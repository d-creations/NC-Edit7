{"version":3,"file":"index-ITj66DDk.js","sources":["../../src/core/ServiceRegistry.ts","../../src/core/types.ts","../../src/services/EventBus.ts","../../src/services/StateService.ts","../../src/services/BackendGateway.ts","../../src/services/MachineService.ts","../../src/services/ParserService.ts","../../src/services/ExecutedProgramService.ts","../../src/services/PlotService.ts","../../src/services/UserPreferenceService.ts","../../src/services/DiagnosticsService.ts","../../src/services/CloudAgentService.ts","../../src/components/BaseComponent.ts","../../node_modules/ace-builds/src-noconflict/ace.js","../../src/ace/mode-nc.ts","../../src/ace/TimeGutter.ts","../../node_modules/ace-builds/src-noconflict/mode-text.js","../../node_modules/ace-builds/src-noconflict/theme-monokai.js","../../node_modules/ace-builds/src-noconflict/ext-language_tools.js","../../src/components/NCCodePane.ts","../../src/components/NCKeywordPanel.ts","../../src/components/NCVariableList.ts","../../src/components/NCToolList.ts","../../node_modules/three/build/three.module.js","../../src/components/NCToolpathPlot.ts","../../src/components/NCEditorApp.ts","../../src/main.ts"],"sourcesContent":["/**\n * ServiceRegistry - Central instantiation service\n * Manages creation and lifecycle of application services and components\n */\n\nimport type { ServiceToken } from './types';\n\ntype ServiceFactory<T> = () => T;\ntype ServiceConstructor<T> = new (...args: unknown[]) => T;\n\ninterface ServiceDescriptor<T> {\n  factory: ServiceFactory<T>;\n  singleton: boolean;\n  instance?: T;\n  dependencies?: ServiceToken[];\n}\n\nexport interface Disposable {\n  dispose(): void | Promise<void>;\n}\n\nexport interface Initializable {\n  init(): void | Promise<void>;\n}\n\n/**\n * ServiceRegistry provides centralized service instantiation and lifecycle management.\n * Avoids scattered `new` calls throughout the application.\n */\nexport class ServiceRegistry {\n  private services = new Map<ServiceToken, ServiceDescriptor<unknown>>();\n  private initializing = new Set<ServiceToken>();\n\n  /**\n   * Register a service with a factory function\n   */\n  register<T>(\n    token: ServiceToken,\n    factory: ServiceFactory<T>,\n    options: { singleton?: boolean; dependencies?: ServiceToken[] } = {}\n  ): void {\n    if (this.services.has(token)) {\n      throw new Error(`Service already registered: ${String(token)}`);\n    }\n\n    this.services.set(token, {\n      factory: factory as ServiceFactory<unknown>,\n      singleton: options.singleton ?? true,\n      dependencies: options.dependencies,\n    });\n  }\n\n  /**\n   * Register a service with a constructor\n   */\n  registerClass<T>(\n    token: ServiceToken,\n    constructor: ServiceConstructor<T>,\n    options: { singleton?: boolean; dependencies?: ServiceToken[] } = {}\n  ): void {\n    this.register(\n      token,\n      () => {\n        const deps = options.dependencies?.map((dep) => this.get(dep)) ?? [];\n        return new constructor(...deps);\n      },\n      options\n    );\n  }\n\n  /**\n   * Get a service instance\n   */\n  get<T>(token: ServiceToken): T {\n    const descriptor = this.services.get(token);\n    if (!descriptor) {\n      throw new Error(`Service not registered: ${String(token)}`);\n    }\n\n    // Check for circular dependencies\n    if (this.initializing.has(token)) {\n      throw new Error(`Circular dependency detected for service: ${String(token)}`);\n    }\n\n    // Return cached singleton instance\n    if (descriptor.singleton && descriptor.instance) {\n      return descriptor.instance as T;\n    }\n\n    // Create new instance\n    try {\n      this.initializing.add(token);\n      const instance = descriptor.factory();\n\n      // Cache singleton\n      if (descriptor.singleton) {\n        descriptor.instance = instance;\n      }\n\n      return instance as T;\n    } finally {\n      this.initializing.delete(token);\n    }\n  }\n\n  /**\n   * Check if a service is registered\n   */\n  has(token: ServiceToken): boolean {\n    return this.services.has(token);\n  }\n\n  /**\n   * Get a service if it exists, otherwise return undefined\n   */\n  tryGet<T>(token: ServiceToken): T | undefined {\n    try {\n      return this.get<T>(token);\n    } catch {\n      return undefined;\n    }\n  }\n\n  /**\n   * Initialize all registered services that implement Initializable\n   */\n  async initializeAll(): Promise<void> {\n    const initPromises: Promise<void>[] = [];\n\n    for (const [token, descriptor] of this.services) {\n      if (descriptor.singleton) {\n        const instance = this.get(token);\n        if (this.isInitializable(instance)) {\n          const result = instance.init();\n          if (result instanceof Promise) {\n            initPromises.push(result);\n          }\n        }\n      }\n    }\n\n    await Promise.all(initPromises);\n  }\n\n  /**\n   * Dispose all services that implement Disposable\n   */\n  async disposeAll(): Promise<void> {\n    const disposePromises: Promise<void>[] = [];\n\n    for (const descriptor of this.services.values()) {\n      if (descriptor.instance && this.isDisposable(descriptor.instance)) {\n        const result = descriptor.instance.dispose();\n        if (result instanceof Promise) {\n          disposePromises.push(result);\n        }\n      }\n    }\n\n    await Promise.all(disposePromises);\n    this.services.clear();\n  }\n\n  /**\n   * Clear a specific service instance (useful for testing)\n   */\n  clear(token: ServiceToken): void {\n    const descriptor = this.services.get(token);\n    if (descriptor) {\n      descriptor.instance = undefined;\n    }\n  }\n\n  /**\n   * Reset the entire registry\n   */\n  reset(): void {\n    this.services.clear();\n    this.initializing.clear();\n  }\n\n  private isInitializable(obj: unknown): obj is Initializable {\n    return (\n      typeof obj === 'object' &&\n      obj !== null &&\n      'init' in obj &&\n      typeof (obj as Initializable).init === 'function'\n    );\n  }\n\n  private isDisposable(obj: unknown): obj is Disposable {\n    return (\n      typeof obj === 'object' &&\n      obj !== null &&\n      'dispose' in obj &&\n      typeof (obj as Disposable).dispose === 'function'\n    );\n  }\n}\n\n// Global singleton instance\nlet globalRegistry: ServiceRegistry | null = null;\n\n/**\n * Get the global service registry instance\n */\nexport function getServiceRegistry(): ServiceRegistry {\n  if (!globalRegistry) {\n    globalRegistry = new ServiceRegistry();\n  }\n  return globalRegistry;\n}\n\n/**\n * Reset the global service registry (useful for testing)\n */\nexport function resetServiceRegistry(): void {\n  globalRegistry = null;\n}\n","/**\n * Core type definitions for NC-Edit7\n * Domain models and interfaces for the multi-channel CNC editor\n */\n\n// ==================== Identifiers ====================\n\nexport type ChannelId = string;\nexport type MachineId = string;\nexport type ToolNumber = number;\n\n// ==================== Machine Profile ====================\n\nexport interface MachineProfile {\n  id: MachineId;\n  name: string;\n  controlType: 'MILL' | 'TURN' | 'MULTI_AXIS';\n  availableChannels: number; // 1-3\n  axes: Axis[];\n  feedLimits: FeedLimits;\n  defaultTools: ToolInfo[];\n  kinematics?: KinematicsConfig;\n}\n\nexport interface Axis {\n  name: string;\n  type: 'LINEAR' | 'ROTARY';\n  minPosition: number;\n  maxPosition: number;\n  units: 'MM' | 'INCH' | 'DEGREE';\n}\n\nexport interface FeedLimits {\n  minFeed: number;\n  maxFeed: number;\n  rapidFeed: number;\n  units: 'MM_PER_MIN' | 'INCH_PER_MIN';\n}\n\nexport interface KinematicsConfig {\n  type: 'CARTESIAN' | 'CYLINDRICAL' | 'SCARA';\n  parameters: Record<string, number>;\n}\n\n// ==================== Channel State ====================\n\nexport interface ChannelState {\n  id: ChannelId;\n  isActive: boolean;\n  machineId: MachineId;\n  program: string;\n  timeline: ChannelTimeline;\n  syncEvents: SyncEvent[];\n  parseResult?: NcParseResult;\n  parseArtifacts?: ParseArtifacts;\n  executedResult?: ExecutedProgramResult;\n  uiConfig: ChannelUIConfig;\n}\n\nexport interface ChannelTimeline {\n  programLines: TimelineEntry[];\n  totalTime: number;\n  currentLine: number;\n}\n\nexport interface TimelineEntry {\n  lineNumber: number;\n  executionTime: number;\n  cumulativeTime: number;\n  isSync: boolean;\n}\n\nexport interface ChannelUIConfig {\n  keywordPanelSide: 'left' | 'right';\n  timeGutterSide: 'left' | 'right';\n  variableDrawerOpen: boolean;\n  toolOverlayOpen: boolean;\n  activeTab: 'program' | 'executed';\n}\n\n// ==================== Tool Information ====================\n\nexport interface ToolInfo {\n  toolNumber: ToolNumber;\n  geometry: ToolGeometry;\n  description?: string;\n}\n\nexport interface ToolGeometry {\n  diameter: number;\n  length: number;\n  cornerRadius?: number;\n  tipAngle?: number;\n  offsets: ToolOffsets;\n}\n\nexport interface ToolOffsets {\n  x: number;\n  y: number;\n  z: number;\n}\n\nexport interface ToolUsage {\n  toolNumber: ToolNumber;\n  channel: ChannelId;\n  lineNumbers: number[];\n  totalTime: number;\n}\n\nexport interface ToolRegisterEntry {\n  toolNumber: ToolNumber;\n  qParameter?: number; // Q parameter value\n  rParameter?: number; // R parameter value\n  lineNumber: number;\n}\n\n// ==================== Synchronization ====================\n\nexport interface SyncEvent {\n  lineNumber: number;\n  code: string;\n  channels: ChannelId[];\n  timingOffset: number;\n  type: 'WAIT' | 'SIGNAL' | 'BARRIER';\n}\n\n// ==================== Parsing Results ====================\n\nexport interface NcParseResult {\n  faultDetected: boolean;\n  faults?: FaultDetail[];\n}\n\nexport interface FaultDetail {\n  lineNumber: number;\n  column: number;\n  severity: 'ERROR' | 'WARNING' | 'INFO';\n  message: string;\n  code?: string;\n}\n\nexport interface ParseArtifacts {\n  keywords: KeywordEntry[];\n  variableSnapshot: VariableRegister;\n  toolRegisters: ToolRegisterEntry[];\n  timingMetadata: TimingMetadata;\n  syncEvents: SyncEvent[];\n}\n\nexport interface KeywordEntry {\n  keyword: string;\n  lineNumber: number;\n  context?: string;\n}\n\nexport interface VariableRegister {\n  registers: Map<number, number>; // Register 1-999 -> value\n  lastUpdated: number; // timestamp\n}\n\nexport interface TimingMetadata {\n  estimatedCycleTime: number;\n  feedRates: FeedRateEntry[];\n  rapidMoves: number;\n}\n\nexport interface FeedRateEntry {\n  lineNumber: number;\n  feedRate: number;\n  distance: number;\n  time: number;\n}\n\n// ==================== Executed Program Results ====================\n\nexport interface ExecutedProgramResult {\n  channel: ChannelId;\n  executedLines: ExecutedLineInfo[];\n  variableDeltas: VariableRegister;\n  plotData: PlotResponse;\n  timestamp: number;\n}\n\nexport interface ExecutedLineInfo {\n  originalLineNumber: number;\n  executedLineNumber: number;\n  executionTime: number;\n  cumulativeTime: number;\n}\n\n// ==================== Plot Data ====================\n\nexport interface PlotRequest {\n  machineId: MachineId;\n  channels: PlotChannelRequest[];\n}\n\nexport interface PlotChannelRequest {\n  channelId: ChannelId;\n  program: string;\n}\n\nexport interface PlotResponse {\n  channel: ChannelId;\n  segments: PlotSegment[];\n  metadata: PlotMetadata;\n}\n\nexport interface PlotSegment {\n  type: 'RAPID' | 'FEED' | 'ARC' | 'DWELL';\n  points: PlotPoint[];\n  toolNumber: ToolNumber;\n  feedRate?: number;\n  lineNumber: number;\n}\n\nexport interface PlotPoint {\n  x: number;\n  y: number;\n  z: number;\n  a?: number;\n  b?: number;\n  c?: number;\n}\n\nexport interface PlotMetadata {\n  bounds: BoundingBox;\n  totalDistance: number;\n  totalTime: number;\n}\n\nexport interface BoundingBox {\n  min: PlotPoint;\n  max: PlotPoint;\n}\n\n// ==================== Server DTOs ====================\n\nexport interface ServerMachineDataRequest {\n  machinedata?: ServerProgramEntry[];\n  action?: 'list_machines' | 'get_machines';\n}\n\nexport interface ServerProgramEntry {\n  program: string;\n  machineName: string;\n  canalNr: string | number;\n}\n\nexport interface ServerResponse {\n  canal?: unknown; // Engine result\n  message?: string[];\n  message_TEST?: string[];\n  machines?: ServerMachineInfo[];\n}\n\nexport interface ServerMachineInfo {\n  machineName: string;\n  controlType: string;\n}\n\n// ==================== Application State ====================\n\nexport interface AppState {\n  machines: Map<MachineId, MachineProfile>;\n  channels: Map<ChannelId, ChannelState>;\n  globalMachineId?: MachineId;\n  activeChannels: ChannelId[];\n  settings: UserSettings;\n}\n\nexport interface UserSettings {\n  theme: 'light' | 'dark';\n  editorFontSize: number;\n  autoSave: boolean;\n  defaultMachine?: MachineId;\n  layoutPreferences: LayoutPreferences;\n}\n\nexport interface LayoutPreferences {\n  channelLayout: 'horizontal' | 'vertical' | 'grid';\n  plotPosition: 'right' | 'bottom';\n  defaultKeywordSide: 'left' | 'right';\n  defaultTimeGutterSide: 'left' | 'right';\n}\n\n// ==================== Events ====================\n\nexport interface AppEvent {\n  type: string;\n  timestamp: number;\n  payload?: unknown;\n}\n\nexport interface ChannelStateChangedEvent extends AppEvent {\n  type: 'channel:state-changed';\n  payload: {\n    channelId: ChannelId;\n    state: ChannelState;\n  };\n}\n\nexport interface MachineChangedEvent extends AppEvent {\n  type: 'machine:changed';\n  payload: {\n    channelId?: ChannelId;\n    machineId: MachineId;\n  };\n}\n\nexport interface ParseCompletedEvent extends AppEvent {\n  type: 'parse:completed';\n  payload: {\n    channelId: ChannelId;\n    result: NcParseResult;\n    artifacts: ParseArtifacts;\n  };\n}\n\nexport interface ExecutionCompletedEvent extends AppEvent {\n  type: 'execution:completed';\n  payload: {\n    channelId: ChannelId;\n    result: ExecutedProgramResult;\n  };\n}\n\nexport interface ErrorEvent extends AppEvent {\n  type: 'error';\n  payload: {\n    message: string;\n    source: string;\n    details?: unknown;\n  };\n}\n\n// ==================== Service Tokens ====================\n\nexport const SERVICE_TOKENS = {\n  EventBus: Symbol('EventBus'),\n  StateService: Symbol('StateService'),\n  MachineService: Symbol('MachineService'),\n  ParserService: Symbol('ParserService'),\n  ExecutedProgramService: Symbol('ExecutedProgramService'),\n  BackendGateway: Symbol('BackendGateway'),\n  PlotService: Symbol('PlotService'),\n  UserPreferenceService: Symbol('UserPreferenceService'),\n  CommandService: Symbol('CommandService'),\n  DiagnosticsService: Symbol('DiagnosticsService'),\n  CloudAgentService: Symbol('CloudAgentService'),\n} as const;\n\nexport type ServiceToken = (typeof SERVICE_TOKENS)[keyof typeof SERVICE_TOKENS];\n","/**\n * EventBus - Lightweight publish/subscribe for application-level events\n */\n\nimport type { AppEvent } from '@core/types';\n\ntype EventHandler<T extends AppEvent = AppEvent> = (event: T) => void;\ntype Unsubscribe = () => void;\n\n/**\n * EventBus provides a simple pub/sub mechanism for application events\n */\nexport class EventBus {\n  private handlers = new Map<string, Set<EventHandler>>();\n  private eventHistory: AppEvent[] = [];\n  private readonly maxHistorySize = 100;\n\n  /**\n   * Subscribe to events of a specific type\n   */\n  on<T extends AppEvent>(eventType: string, handler: EventHandler<T>): Unsubscribe {\n    if (!this.handlers.has(eventType)) {\n      this.handlers.set(eventType, new Set());\n    }\n\n    const handlers = this.handlers.get(eventType)!;\n    handlers.add(handler as EventHandler);\n\n    // Return unsubscribe function\n    return () => {\n      handlers.delete(handler as EventHandler);\n      if (handlers.size === 0) {\n        this.handlers.delete(eventType);\n      }\n    };\n  }\n\n  /**\n   * Subscribe to an event once, then automatically unsubscribe\n   */\n  once<T extends AppEvent>(eventType: string, handler: EventHandler<T>): Unsubscribe {\n    const unsubscribe = this.on<T>(eventType, (event) => {\n      unsubscribe();\n      handler(event);\n    });\n    return unsubscribe;\n  }\n\n  /**\n   * Emit an event to all subscribers\n   */\n  emit<T extends AppEvent>(event: T): void {\n    const handlers = this.handlers.get(event.type);\n    if (handlers) {\n      // Create a copy to avoid issues if handlers modify the set during iteration\n      const handlersCopy = Array.from(handlers);\n      for (const handler of handlersCopy) {\n        try {\n          handler(event);\n        } catch (error) {\n          console.error(`Error in event handler for ${event.type}:`, error);\n        }\n      }\n    }\n\n    // Store in history\n    this.eventHistory.push(event);\n    if (this.eventHistory.length > this.maxHistorySize) {\n      this.eventHistory.shift();\n    }\n  }\n\n  /**\n   * Remove all handlers for a specific event type\n   */\n  off(eventType: string): void {\n    this.handlers.delete(eventType);\n  }\n\n  /**\n   * Remove all handlers\n   */\n  clear(): void {\n    this.handlers.clear();\n  }\n\n  /**\n   * Get the number of handlers for an event type\n   */\n  listenerCount(eventType: string): number {\n    return this.handlers.get(eventType)?.size ?? 0;\n  }\n\n  /**\n   * Get all event types that have handlers\n   */\n  eventTypes(): string[] {\n    return Array.from(this.handlers.keys());\n  }\n\n  /**\n   * Get recent event history\n   */\n  getHistory(eventType?: string, limit?: number): AppEvent[] {\n    let history = this.eventHistory;\n\n    if (eventType) {\n      history = history.filter((e) => e.type === eventType);\n    }\n\n    if (limit && limit > 0) {\n      return history.slice(-limit);\n    }\n\n    return [...history];\n  }\n\n  /**\n   * Clear event history\n   */\n  clearHistory(): void {\n    this.eventHistory = [];\n  }\n}\n","/**\n * StateService - Central state management for the application\n */\n\nimport type {\n  AppState,\n  ChannelId,\n  ChannelState,\n  MachineId,\n  MachineProfile,\n  UserSettings,\n  ChannelStateChangedEvent,\n  MachineChangedEvent,\n} from '@core/types';\nimport type { EventBus } from './EventBus';\n\n/**\n * StateService provides centralized state management with immutable snapshots\n * and event notifications on changes\n */\nexport class StateService {\n  private state: AppState;\n\n  constructor(private eventBus: EventBus) {\n    this.state = this.createInitialState();\n  }\n\n  private createInitialState(): AppState {\n    return {\n      machines: new Map(),\n      channels: new Map(),\n      activeChannels: [],\n      settings: this.createDefaultSettings(),\n    };\n  }\n\n  private createDefaultSettings(): UserSettings {\n    return {\n      theme: 'light',\n      editorFontSize: 14,\n      autoSave: true,\n      layoutPreferences: {\n        channelLayout: 'grid',\n        plotPosition: 'right',\n        defaultKeywordSide: 'left',\n        defaultTimeGutterSide: 'right',\n      },\n    };\n  }\n\n  /**\n   * Get an immutable snapshot of the current state\n   */\n  getSnapshot(): Readonly<AppState> {\n    return {\n      ...this.state,\n      machines: new Map(this.state.machines),\n      channels: new Map(this.state.channels),\n      activeChannels: [...this.state.activeChannels],\n      settings: { ...this.state.settings },\n    };\n  }\n\n  // ==================== Machine Management ====================\n\n  /**\n   * Register a machine profile\n   */\n  registerMachine(machine: MachineProfile): void {\n    this.state.machines.set(machine.id, machine);\n  }\n\n  /**\n   * Get a machine profile by ID\n   */\n  getMachine(id: MachineId): MachineProfile | undefined {\n    return this.state.machines.get(id);\n  }\n\n  /**\n   * Get all registered machines\n   */\n  getAllMachines(): MachineProfile[] {\n    return Array.from(this.state.machines.values());\n  }\n\n  /**\n   * Set the global machine (applies to all channels without specific override)\n   */\n  setGlobalMachine(machineId: MachineId): void {\n    this.state.globalMachineId = machineId;\n\n    // Update all channels that don't have a specific machine override\n    for (const [channelId, channel] of this.state.channels) {\n      if (!channel.machineId || channel.machineId === this.state.globalMachineId) {\n        this.setChannelMachine(channelId, machineId);\n      }\n    }\n\n    this.eventBus.emit<MachineChangedEvent>({\n      type: 'machine:changed',\n      timestamp: Date.now(),\n      payload: { machineId },\n    });\n  }\n\n  /**\n   * Get the global machine ID\n   */\n  getGlobalMachine(): MachineId | undefined {\n    return this.state.globalMachineId;\n  }\n\n  // ==================== Channel Management ====================\n\n  /**\n   * Create a new channel\n   */\n  createChannel(id: ChannelId, machineId?: MachineId): void {\n    const effectiveMachineId = machineId || this.state.globalMachineId;\n    if (!effectiveMachineId) {\n      throw new Error('No machine ID provided and no global machine set');\n    }\n\n    const channel: ChannelState = {\n      id,\n      isActive: false,\n      machineId: effectiveMachineId,\n      program: '',\n      timeline: {\n        programLines: [],\n        totalTime: 0,\n        currentLine: 0,\n      },\n      syncEvents: [],\n      uiConfig: {\n        keywordPanelSide: this.state.settings.layoutPreferences.defaultKeywordSide,\n        timeGutterSide: this.state.settings.layoutPreferences.defaultTimeGutterSide,\n        variableDrawerOpen: false,\n        toolOverlayOpen: false,\n        activeTab: 'program',\n      },\n    };\n\n    this.state.channels.set(id, channel);\n  }\n\n  /**\n   * Get a channel by ID\n   */\n  getChannel(id: ChannelId): ChannelState | undefined {\n    return this.state.channels.get(id);\n  }\n\n  /**\n   * Get all channels\n   */\n  getAllChannels(): ChannelState[] {\n    return Array.from(this.state.channels.values());\n  }\n\n  /**\n   * Update a channel's state\n   */\n  updateChannel(id: ChannelId, updates: Partial<ChannelState>): void {\n    const channel = this.state.channels.get(id);\n    if (!channel) {\n      throw new Error(`Channel not found: ${id}`);\n    }\n\n    const updatedChannel = { ...channel, ...updates };\n    this.state.channels.set(id, updatedChannel);\n\n    this.eventBus.emit<ChannelStateChangedEvent>({\n      type: 'channel:state-changed',\n      timestamp: Date.now(),\n      payload: { channelId: id, state: updatedChannel },\n    });\n  }\n\n  /**\n   * Set a channel's machine\n   */\n  setChannelMachine(channelId: ChannelId, machineId: MachineId): void {\n    this.updateChannel(channelId, { machineId });\n\n    this.eventBus.emit<MachineChangedEvent>({\n      type: 'machine:changed',\n      timestamp: Date.now(),\n      payload: { channelId, machineId },\n    });\n  }\n\n  /**\n   * Activate a channel\n   */\n  activateChannel(id: ChannelId): void {\n    this.updateChannel(id, { isActive: true });\n    if (!this.state.activeChannels.includes(id)) {\n      this.state.activeChannels.push(id);\n    }\n  }\n\n  /**\n   * Deactivate a channel\n   */\n  deactivateChannel(id: ChannelId): void {\n    this.updateChannel(id, { isActive: false });\n    this.state.activeChannels = this.state.activeChannels.filter((cid) => cid !== id);\n  }\n\n  /**\n   * Get active channels\n   */\n  getActiveChannels(): ChannelState[] {\n    return this.state.activeChannels\n      .map((id) => this.state.channels.get(id))\n      .filter((ch): ch is ChannelState => ch !== undefined);\n  }\n\n  /**\n   * Toggle channel activation\n   */\n  toggleChannel(id: ChannelId): void {\n    const channel = this.getChannel(id);\n    if (channel) {\n      if (channel.isActive) {\n        this.deactivateChannel(id);\n      } else {\n        this.activateChannel(id);\n      }\n    }\n  }\n\n  // ==================== Settings Management ====================\n\n  /**\n   * Update user settings\n   */\n  updateSettings(updates: Partial<UserSettings>): void {\n    this.state.settings = { ...this.state.settings, ...updates };\n  }\n\n  /**\n   * Get current settings\n   */\n  getSettings(): Readonly<UserSettings> {\n    return { ...this.state.settings };\n  }\n\n  /**\n   * Reset to default settings\n   */\n  resetSettings(): void {\n    this.state.settings = this.createDefaultSettings();\n  }\n\n  // ==================== Utility Methods ====================\n\n  /**\n   * Clear all state\n   */\n  clear(): void {\n    this.state = this.createInitialState();\n  }\n\n  /**\n   * Load state from a snapshot\n   */\n  loadSnapshot(snapshot: AppState): void {\n    this.state = {\n      machines: new Map(snapshot.machines),\n      channels: new Map(snapshot.channels),\n      globalMachineId: snapshot.globalMachineId,\n      activeChannels: [...snapshot.activeChannels],\n      settings: { ...snapshot.settings },\n    };\n  }\n}\n","/**\n * BackendGateway - Handles communication with the CGI server\n */\n\nimport type {\n  ServerMachineDataRequest,\n  ServerResponse,\n  ServerMachineInfo,\n  ServerProgramEntry,\n} from '@core/types';\n\nexport interface BackendConfig {\n  baseUrl: string;\n  timeout: number;\n  retryAttempts: number;\n  retryDelay: number;\n}\n\n/**\n * BackendGateway wraps fetch calls to the plotting server,\n * handles retries, cancellation, and response mapping\n */\nexport class BackendGateway {\n  private config: BackendConfig;\n  private abortControllers = new Map<string, AbortController>();\n\n  constructor(config?: Partial<BackendConfig>) {\n    this.config = {\n      baseUrl: config?.baseUrl || '/ncplot7py/scripts/cgiserver.cgi',\n      timeout: config?.timeout || 30000,\n      retryAttempts: config?.retryAttempts || 2,\n      retryDelay: config?.retryDelay || 1000,\n    };\n  }\n\n  /**\n   * List available machines from the server\n   */\n  async listMachines(): Promise<ServerMachineInfo[]> {\n    const request: ServerMachineDataRequest = {\n      action: 'list_machines',\n    };\n\n    const response = await this.post<ServerResponse>(request, 'list-machines');\n\n    if (!response.machines) {\n      throw new Error('Invalid response: missing machines array');\n    }\n\n    return response.machines;\n  }\n\n  /**\n   * Execute programs and get plot data\n   */\n  async executePrograms(programs: ServerProgramEntry[]): Promise<ServerResponse> {\n    // Validate and preprocess programs\n    const validatedPrograms = programs.map((prog) => this.validateProgram(prog));\n\n    const request: ServerMachineDataRequest = {\n      machinedata: validatedPrograms,\n    };\n\n    return await this.post<ServerResponse>(request, 'execute-programs');\n  }\n\n  /**\n   * Generic POST request with retry logic\n   */\n  private async post<T>(data: ServerMachineDataRequest, requestId: string): Promise<T> {\n    let lastError: Error | null = null;\n\n    for (let attempt = 0; attempt <= this.config.retryAttempts; attempt++) {\n      try {\n        const response = await this.fetchWithTimeout(data, requestId);\n        return response as T;\n      } catch (error) {\n        lastError = error instanceof Error ? error : new Error(String(error));\n\n        // Don't retry on abort or validation errors\n        if (error instanceof DOMException && error.name === 'AbortError') {\n          throw error;\n        }\n\n        // Wait before retry\n        if (attempt < this.config.retryAttempts) {\n          await this.delay(this.config.retryDelay * (attempt + 1));\n        }\n      }\n    }\n\n    throw new Error(\n      `Request failed after ${this.config.retryAttempts + 1} attempts: ${lastError?.message}`\n    );\n  }\n\n  /**\n   * Fetch with timeout support\n   */\n  private async fetchWithTimeout(\n    data: ServerMachineDataRequest,\n    requestId: string\n  ): Promise<unknown> {\n    // Cancel any existing request with the same ID\n    this.cancel(requestId);\n\n    const abortController = new AbortController();\n    this.abortControllers.set(requestId, abortController);\n\n    // Set timeout\n    const timeoutId = setTimeout(() => {\n      abortController.abort();\n    }, this.config.timeout);\n\n    try {\n      const response = await fetch(this.config.baseUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n        signal: abortController.signal,\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error ${response.status}: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n\n      // Check for server-side errors\n      if (result.message_TEST) {\n        throw new Error(`Server error: ${result.message_TEST.join(', ')}`);\n      }\n\n      return result;\n    } finally {\n      clearTimeout(timeoutId);\n      this.abortControllers.delete(requestId);\n    }\n  }\n\n  /**\n   * Validate and preprocess a program entry\n   */\n  private validateProgram(program: ServerProgramEntry): ServerProgramEntry {\n    // Remove forbidden characters as per server requirements\n    const cleanProgram = program.program\n      .replace(/[(){}]/g, '') // Remove parentheses and braces\n      .trim();\n\n    // Validate machine name\n    const validMachines = ['SB12RG_F', 'FANUC_T', 'SR20JII_F', 'SB12RG_B', 'SR20JII_B', 'ISO_MILL'];\n\n    if (!validMachines.includes(program.machineName)) {\n      throw new Error(\n        `Invalid machine name: ${program.machineName}. Must be one of: ${validMachines.join(', ')}`\n      );\n    }\n\n    return {\n      ...program,\n      program: cleanProgram,\n      canalNr: String(program.canalNr), // Ensure string format\n    };\n  }\n\n  /**\n   * Cancel a pending request\n   */\n  cancel(requestId: string): void {\n    const controller = this.abortControllers.get(requestId);\n    if (controller) {\n      controller.abort();\n      this.abortControllers.delete(requestId);\n    }\n  }\n\n  /**\n   * Cancel all pending requests\n   */\n  cancelAll(): void {\n    for (const controller of this.abortControllers.values()) {\n      controller.abort();\n    }\n    this.abortControllers.clear();\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(config: Partial<BackendConfig>): void {\n    this.config = { ...this.config, ...config };\n  }\n\n  /**\n   * Get current configuration\n   */\n  getConfig(): Readonly<BackendConfig> {\n    return { ...this.config };\n  }\n\n  /**\n   * Simple delay helper\n   */\n  private delay(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n}\n","/**\n * MachineService - Retrieves and manages machine profiles\n */\n\nimport type { MachineId, MachineProfile, ServerMachineInfo } from '@core/types';\nimport type { BackendGateway } from './BackendGateway';\nimport type { EventBus } from './EventBus';\n\n/**\n * MachineService retrieves machine profiles from the CGI server,\n * normalizes data, caches responses, and emits change events\n */\nexport class MachineService {\n  private machines = new Map<MachineId, MachineProfile>();\n  private lastFetch: number = 0;\n  private readonly cacheDuration = 5 * 60 * 1000; // 5 minutes\n  private loadingPromise: Promise<MachineProfile[]> | null = null;\n\n  constructor(\n    private backendGateway: BackendGateway,\n    _eventBus: EventBus\n  ) {}\n\n  /**\n   * Initialize the service by fetching machines\n   */\n  async init(): Promise<void> {\n    await this.fetchMachines();\n  }\n\n  /**\n   * Fetch machines from the server\n   */\n  async fetchMachines(force = false): Promise<MachineProfile[]> {\n    const now = Date.now();\n\n    // Use cache if available and not expired\n    if (!force && this.machines.size > 0 && now - this.lastFetch < this.cacheDuration) {\n      return Array.from(this.machines.values());\n    }\n\n    if (this.loadingPromise) {\n      return this.loadingPromise;\n    }\n\n    this.loadingPromise = (async () => {\n      try {\n        const serverMachines = await this.backendGateway.listMachines();\n        this.machines.clear();\n\n        for (const serverMachine of serverMachines) {\n          const profile = this.convertToMachineProfile(serverMachine);\n          this.machines.set(profile.id, profile);\n        }\n\n        this.lastFetch = now;\n        return Array.from(this.machines.values());\n      } finally {\n        this.loadingPromise = null;\n      }\n    })();\n\n    return this.loadingPromise;\n  }\n\n  /**\n   * Get a machine profile by ID\n   */\n  async getMachine(id: MachineId, fetchIfMissing = true): Promise<MachineProfile | undefined> {\n    let machine = this.machines.get(id);\n\n    if (!machine && fetchIfMissing) {\n      await this.fetchMachines();\n      machine = this.machines.get(id);\n    }\n\n    return machine;\n  }\n\n  /**\n   * Get all cached machines\n   */\n  getAllMachines(): MachineProfile[] {\n    return Array.from(this.machines.values());\n  }\n\n  /**\n   * Check if machines are loaded\n   */\n  isLoaded(): boolean {\n    return this.machines.size > 0;\n  }\n\n  /**\n   * Clear the cache\n   */\n  clearCache(): void {\n    this.machines.clear();\n    this.lastFetch = 0;\n  }\n\n  /**\n   * Convert server machine info to MachineProfile\n   */\n  private convertToMachineProfile(serverMachine: ServerMachineInfo): MachineProfile {\n    const { machineName, controlType } = serverMachine;\n\n    // Parse control type\n    let type: 'MILL' | 'TURN' | 'MULTI_AXIS' = 'MILL';\n    if (controlType.includes('TURN') || machineName.includes('_T')) {\n      type = 'TURN';\n    } else if (\n      controlType.includes('MILL') ||\n      machineName.includes('_F') ||\n      machineName.includes('_B')\n    ) {\n      type = 'MILL';\n    }\n\n    // Determine available channels based on machine name\n    let availableChannels = 1;\n    if (machineName.includes('SB12RG') || machineName.includes('SR20JII')) {\n      availableChannels = 2;\n    }\n\n    // Create profile with defaults\n    const profile: MachineProfile = {\n      id: machineName,\n      name: machineName,\n      controlType: type,\n      availableChannels,\n      axes: this.getDefaultAxes(type),\n      feedLimits: this.getDefaultFeedLimits(type),\n      defaultTools: [],\n    };\n\n    return profile;\n  }\n\n  /**\n   * Get default axes for machine type\n   */\n  private getDefaultAxes(type: 'MILL' | 'TURN' | 'MULTI_AXIS') {\n    if (type === 'TURN') {\n      return [\n        {\n          name: 'X',\n          type: 'LINEAR' as const,\n          minPosition: -200,\n          maxPosition: 200,\n          units: 'MM' as const,\n        },\n        {\n          name: 'Z',\n          type: 'LINEAR' as const,\n          minPosition: -500,\n          maxPosition: 0,\n          units: 'MM' as const,\n        },\n        {\n          name: 'C',\n          type: 'ROTARY' as const,\n          minPosition: 0,\n          maxPosition: 360,\n          units: 'DEGREE' as const,\n        },\n      ];\n    }\n\n    return [\n      {\n        name: 'X',\n        type: 'LINEAR' as const,\n        minPosition: -500,\n        maxPosition: 500,\n        units: 'MM' as const,\n      },\n      {\n        name: 'Y',\n        type: 'LINEAR' as const,\n        minPosition: -500,\n        maxPosition: 500,\n        units: 'MM' as const,\n      },\n      {\n        name: 'Z',\n        type: 'LINEAR' as const,\n        minPosition: -300,\n        maxPosition: 300,\n        units: 'MM' as const,\n      },\n    ];\n  }\n\n  /**\n   * Get default feed limits for machine type\n   */\n  private getDefaultFeedLimits(type: 'MILL' | 'TURN' | 'MULTI_AXIS') {\n    if (type === 'TURN') {\n      return {\n        minFeed: 1,\n        maxFeed: 3000,\n        rapidFeed: 15000,\n        units: 'MM_PER_MIN' as const,\n      };\n    }\n\n    return {\n      minFeed: 1,\n      maxFeed: 5000,\n      rapidFeed: 20000,\n      units: 'MM_PER_MIN' as const,\n    };\n  }\n}\n","/**\n * ParserService - Browser-based NC code parsing service\n */\n\nimport type {\n  ChannelId,\n  NcParseResult,\n  ParseArtifacts,\n  KeywordEntry,\n  ToolRegisterEntry,\n  SyncEvent,\n  ParseCompletedEvent,\n} from '@core/types';\nimport type { EventBus } from './EventBus';\nimport type { CloudAgentService } from './CloudAgentService';\n\n/**\n * ParserService runs NC code parsing in the browser (optionally in a worker)\n * and emits parse results with artifacts\n */\nexport class ParserService {\n  private workers = new Map<ChannelId, Worker | null>();\n  private useWorker = false; // Set to true when worker implementation is ready\n  private cloudAgentService?: CloudAgentService;\n\n  constructor(\n    private eventBus: EventBus,\n    cloudAgentService?: CloudAgentService\n  ) {\n    this.cloudAgentService = cloudAgentService;\n  }\n\n  /**\n   * Parse NC program for a channel\n   */\n  async parse(\n    channelId: ChannelId,\n    program: string\n  ): Promise<{\n    result: NcParseResult;\n    artifacts: ParseArtifacts;\n  }> {\n    // Check if we should delegate to cloud agent\n    if (this.cloudAgentService) {\n      const decision = this.cloudAgentService.shouldDelegateParsing(program);\n\n      if (decision.shouldDelegate) {\n        console.log(`[ParserService] Delegating parsing to cloud agent: ${decision.reason}`);\n\n        // Try cloud delegation\n        const cloudResponse = await this.cloudAgentService.delegateParsing({\n          channelId,\n          program,\n          machineId: 'ISO_MILL', // TODO: Get actual machineId from StateService/context\n        });\n\n        if (cloudResponse.success && cloudResponse.data) {\n          console.log(\n            `[ParserService] Cloud parsing completed in ${cloudResponse.processingTime}ms`\n          );\n          return cloudResponse.data;\n        } else {\n          console.log(\n            `[ParserService] Cloud parsing failed, falling back to local: ${cloudResponse.error}`\n          );\n          // Fall through to local parsing\n        }\n      }\n    }\n\n    if (this.useWorker) {\n      return this.parseInWorker(channelId, program);\n    }\n\n    return this.parseSync(channelId, program);\n  }\n\n  /**\n   * Parse synchronously in main thread\n   */\n  private async parseSync(\n    channelId: ChannelId,\n    program: string\n  ): Promise<{\n    result: NcParseResult;\n    artifacts: ParseArtifacts;\n  }> {\n    // TODO: Implement actual NC parsing logic\n    // This is a placeholder that extracts basic information\n\n    const lines = program.split('\\n');\n    const keywords: KeywordEntry[] = [];\n    const toolRegisters: ToolRegisterEntry[] = [];\n    const syncEvents: SyncEvent[] = [];\n    const faults: NcParseResult['faults'] = [];\n\n    // Simple keyword extraction (placeholder)\n    const keywordPatterns = [/\\b(G0|G1|G2|G3|G4|G90|G91|M3|M4|M5|M6|M30)\\b/gi, /\\b(T\\d+)\\b/gi];\n\n    lines.forEach((line, index) => {\n      const lineNumber = index + 1;\n\n      // Extract keywords\n      keywordPatterns.forEach((pattern) => {\n        const matches = line.matchAll(pattern);\n        for (const match of matches) {\n          keywords.push({\n            keyword: match[0].toUpperCase(),\n            lineNumber,\n            context: line.trim(),\n          });\n        }\n      });\n\n      // Extract tool changes (T codes)\n      const toolMatch = line.match(/T(\\d+)/i);\n      if (toolMatch && toolMatch[1]) {\n        const toolNumber = parseInt(toolMatch[1], 10);\n\n        // Look for Q and R parameters\n        const qMatch = line.match(/Q([\\d.-]+)/i);\n        const rMatch = line.match(/R([\\d.-]+)/i);\n\n        toolRegisters.push({\n          toolNumber,\n          qParameter: qMatch && qMatch[1] ? parseFloat(qMatch[1]) : undefined,\n          rParameter: rMatch && rMatch[1] ? parseFloat(rMatch[1]) : undefined,\n          lineNumber,\n        });\n      }\n\n      // Detect synchronization codes (placeholder)\n      if (line.match(/\\bM200\\b/i)) {\n        syncEvents.push({\n          lineNumber,\n          code: 'M200',\n          channels: [channelId],\n          timingOffset: 0,\n          type: 'WAIT',\n        });\n      }\n\n      // Basic error detection (empty lines, invalid characters, etc.)\n      if (\n        line.trim() &&\n        !line.match(/^[NGMTXYZIJKFRQPSabcdefghijklmnopqrstuvwxyz0-9\\s.;()+-]+$/i)\n      ) {\n        faults.push({\n          lineNumber,\n          column: 0,\n          severity: 'WARNING',\n          message: 'Line contains potentially invalid characters',\n        });\n      }\n    });\n\n    const result: NcParseResult = {\n      faultDetected: faults.length > 0,\n      faults: faults.length > 0 ? faults : undefined,\n    };\n\n    const artifacts: ParseArtifacts = {\n      keywords,\n      variableSnapshot: {\n        registers: new Map(), // TODO: Track variable values during parse\n        lastUpdated: Date.now(),\n      },\n      toolRegisters,\n      timingMetadata: {\n        estimatedCycleTime: 0, // TODO: Calculate from feed rates and distances\n        feedRates: [],\n        rapidMoves: 0,\n      },\n      syncEvents,\n    };\n\n    // Emit parse completed event\n    this.eventBus.emit<ParseCompletedEvent>({\n      type: 'parse:completed',\n      timestamp: Date.now(),\n      payload: {\n        channelId,\n        result,\n        artifacts,\n      },\n    });\n\n    return { result, artifacts };\n  }\n\n  /**\n   * Parse in a web worker (to be implemented)\n   */\n  private async parseInWorker(\n    channelId: ChannelId,\n    program: string\n  ): Promise<{\n    result: NcParseResult;\n    artifacts: ParseArtifacts;\n  }> {\n    // TODO: Implement worker-based parsing\n    // For now, fall back to sync parsing\n    return this.parseSync(channelId, program);\n  }\n\n  /**\n   * Cancel parsing for a channel\n   */\n  cancel(channelId: ChannelId): void {\n    const worker = this.workers.get(channelId);\n    if (worker) {\n      worker.terminate();\n      this.workers.delete(channelId);\n    }\n  }\n\n  /**\n   * Cancel all parsing\n   */\n  cancelAll(): void {\n    for (const worker of this.workers.values()) {\n      if (worker) {\n        worker.terminate();\n      }\n    }\n    this.workers.clear();\n  }\n\n  /**\n   * Dispose of the service\n   */\n  dispose(): void {\n    this.cancelAll();\n  }\n}\n","/**\n * ExecutedProgramService - Manages server-side program execution\n */\n\nimport type {\n  ChannelId,\n  ExecutedProgramResult,\n  ExecutionCompletedEvent,\n  ServerProgramEntry,\n  ServerResponse,\n} from '@core/types';\nimport type { BackendGateway } from './BackendGateway';\nimport type { EventBus } from './EventBus';\nimport type { StateService } from './StateService';\nimport type { CloudAgentService } from './CloudAgentService';\n\n/**\n * ExecutedProgramService posts programs to the CGI endpoint and processes results\n */\nexport class ExecutedProgramService {\n  private cloudAgentService?: CloudAgentService;\n\n  constructor(\n    private backendGateway: BackendGateway,\n    private stateService: StateService,\n    private eventBus: EventBus,\n    cloudAgentService?: CloudAgentService\n  ) {\n    this.cloudAgentService = cloudAgentService;\n  }\n\n  /**\n   * Execute a single channel's program\n   */\n  async executeChannel(channelId: ChannelId): Promise<ExecutedProgramResult> {\n    const channel = this.stateService.getChannel(channelId);\n    if (!channel) {\n      throw new Error(`Channel not found: ${channelId}`);\n    }\n\n    const machine = this.stateService.getMachine(channel.machineId);\n    if (!machine) {\n      throw new Error(`Machine not found: ${channel.machineId}`);\n    }\n\n    const programs: ServerProgramEntry[] = [\n      {\n        program: channel.program,\n        machineName: machine.id,\n        canalNr: channelId,\n      },\n    ];\n\n    return this.execute(programs, channelId);\n  }\n\n  /**\n   * Execute multiple channels' programs\n   */\n  async executeMultipleChannels(\n    channelIds: ChannelId[]\n  ): Promise<Map<ChannelId, ExecutedProgramResult>> {\n    const programs: ServerProgramEntry[] = [];\n\n    for (const channelId of channelIds) {\n      const channel = this.stateService.getChannel(channelId);\n      if (!channel) {\n        throw new Error(`Channel not found: ${channelId}`);\n      }\n\n      const machine = this.stateService.getMachine(channel.machineId);\n      if (!machine) {\n        throw new Error(`Machine not found: ${channel.machineId}`);\n      }\n\n      programs.push({\n        program: channel.program,\n        machineName: machine.id,\n        canalNr: channelId,\n      });\n    }\n\n    const results = new Map<ChannelId, ExecutedProgramResult>();\n\n    try {\n      const serverResponse = await this.backendGateway.executePrograms(programs);\n\n      // Process response for each channel\n      for (const channelId of channelIds) {\n        const result = this.processServerResponse(serverResponse, channelId);\n        results.set(channelId, result);\n\n        // Emit completion event\n        this.eventBus.emit<ExecutionCompletedEvent>({\n          type: 'execution:completed',\n          timestamp: Date.now(),\n          payload: {\n            channelId,\n            result,\n          },\n        });\n\n        // Update channel state\n        this.stateService.updateChannel(channelId, {\n          executedResult: result,\n        });\n      }\n    } catch (error) {\n      console.error('Failed to execute programs:', error);\n      throw error;\n    }\n\n    return results;\n  }\n\n  /**\n   * Execute with raw program entries\n   */\n  private async execute(\n    programs: ServerProgramEntry[],\n    primaryChannelId: ChannelId\n  ): Promise<ExecutedProgramResult> {\n    try {\n      // Check if we should delegate to cloud agent\n      if (this.cloudAgentService) {\n        const decision = this.cloudAgentService.shouldDelegateExecution(programs);\n\n        if (decision.shouldDelegate) {\n          console.log(`[ExecutedProgramService] Delegating execution to cloud: ${decision.reason}`);\n\n          const cloudResponse = await this.cloudAgentService.delegateExecution({ programs });\n\n          if (cloudResponse.success && cloudResponse.data) {\n            console.log(\n              `[ExecutedProgramService] Cloud execution completed in ${cloudResponse.processingTime}ms`\n            );\n\n            // Get result for the primary channel\n            const result = cloudResponse.data.get(primaryChannelId);\n            if (result) {\n              // Emit completion event\n              this.eventBus.emit<ExecutionCompletedEvent>({\n                type: 'execution:completed',\n                timestamp: Date.now(),\n                payload: {\n                  channelId: primaryChannelId,\n                  result,\n                },\n              });\n\n              // Update channel state\n              this.stateService.updateChannel(primaryChannelId, {\n                executedResult: result,\n              });\n\n              return result;\n            }\n          } else {\n            console.log(\n              `[ExecutedProgramService] Cloud execution failed, using backend gateway: ${cloudResponse.error}`\n            );\n            // Fall through to backend gateway\n          }\n        }\n      }\n\n      const serverResponse = await this.backendGateway.executePrograms(programs);\n      const result = this.processServerResponse(serverResponse, primaryChannelId);\n\n      // Emit completion event\n      this.eventBus.emit<ExecutionCompletedEvent>({\n        type: 'execution:completed',\n        timestamp: Date.now(),\n        payload: {\n          channelId: primaryChannelId,\n          result,\n        },\n      });\n\n      // Update channel state\n      this.stateService.updateChannel(primaryChannelId, {\n        executedResult: result,\n      });\n\n      return result;\n    } catch (error) {\n      console.error('Failed to execute program:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Process server response into ExecutedProgramResult\n   */\n  private processServerResponse(\n    serverResponse: ServerResponse,\n    channelId: ChannelId\n  ): ExecutedProgramResult {\n    // TODO: Parse the actual server response structure\n    // The server returns { canal: <engine_result>, message: <message_stack> }\n\n    // For now, create a placeholder result\n    const result: ExecutedProgramResult = {\n      channel: channelId,\n      executedLines: [],\n      variableDeltas: {\n        registers: new Map(),\n        lastUpdated: Date.now(),\n      },\n      plotData: {\n        channel: channelId,\n        segments: [],\n        metadata: {\n          bounds: {\n            min: { x: 0, y: 0, z: 0 },\n            max: { x: 0, y: 0, z: 0 },\n          },\n          totalDistance: 0,\n          totalTime: 0,\n        },\n      },\n      timestamp: Date.now(),\n    };\n\n    // TODO: Parse canal data and extract:\n    // - Executed line numbers and timing\n    // - Variable register updates\n    // - Plot point data\n\n    if (serverResponse.canal) {\n      // Parse canal data structure here\n      console.log('Canal data received:', serverResponse.canal);\n    }\n\n    if (serverResponse.message && serverResponse.message.length > 0) {\n      console.log('Server messages:', serverResponse.message);\n    }\n\n    return result;\n  }\n\n  /**\n   * Clear execution results for a channel\n   */\n  clearResults(channelId: ChannelId): void {\n    this.stateService.updateChannel(channelId, {\n      executedResult: undefined,\n    });\n  }\n\n  /**\n   * Clear all execution results\n   */\n  clearAllResults(): void {\n    const channels = this.stateService.getAllChannels();\n    for (const channel of channels) {\n      this.clearResults(channel.id);\n    }\n  }\n}\n","/**\n * PlotService - Converts parser output into three.js scene elements\n */\n\nimport type { ChannelId, MachineId, PlotResponse, PlotSegment } from '@core/types';\n\n/**\n * PlotService manages plot data and caching for three.js rendering\n */\nexport class PlotService {\n  private plotCache = new Map<string, PlotResponse>();\n\n  /**\n   * Get cache key for a channel/machine combination\n   */\n  private getCacheKey(channelId: ChannelId, machineId: MachineId): string {\n    return `${channelId}:${machineId}`;\n  }\n\n  /**\n   * Store plot data in cache\n   */\n  setPlotData(channelId: ChannelId, machineId: MachineId, plotData: PlotResponse): void {\n    const key = this.getCacheKey(channelId, machineId);\n    this.plotCache.set(key, plotData);\n  }\n\n  /**\n   * Get plot data from cache\n   */\n  getPlotData(channelId: ChannelId, machineId: MachineId): PlotResponse | undefined {\n    const key = this.getCacheKey(channelId, machineId);\n    return this.plotCache.get(key);\n  }\n\n  /**\n   * Clear plot data for a channel\n   */\n  clearChannel(channelId: ChannelId): void {\n    const keysToDelete: string[] = [];\n\n    for (const key of this.plotCache.keys()) {\n      if (key.startsWith(`${channelId}:`)) {\n        keysToDelete.push(key);\n      }\n    }\n\n    for (const key of keysToDelete) {\n      this.plotCache.delete(key);\n    }\n  }\n\n  /**\n   * Clear all plot data\n   */\n  clearAll(): void {\n    this.plotCache.clear();\n  }\n\n  /**\n   * Get segments for a specific tool\n   */\n  getSegmentsByTool(channelId: ChannelId, machineId: MachineId, toolNumber: number): PlotSegment[] {\n    const plotData = this.getPlotData(channelId, machineId);\n    if (!plotData) {\n      return [];\n    }\n\n    return plotData.segments.filter((seg) => seg.toolNumber === toolNumber);\n  }\n\n  /**\n   * Get segments up to a specific line number (for timeline sync)\n   */\n  getSegmentsUpToLine(\n    channelId: ChannelId,\n    machineId: MachineId,\n    lineNumber: number\n  ): PlotSegment[] {\n    const plotData = this.getPlotData(channelId, machineId);\n    if (!plotData) {\n      return [];\n    }\n\n    return plotData.segments.filter((seg) => seg.lineNumber <= lineNumber);\n  }\n\n  /**\n   * Calculate bounding box for plot data\n   */\n  calculateBounds(plotData: PlotResponse) {\n    let minX = Infinity;\n    let minY = Infinity;\n    let minZ = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    let maxZ = -Infinity;\n\n    for (const segment of plotData.segments) {\n      for (const point of segment.points) {\n        minX = Math.min(minX, point.x);\n        minY = Math.min(minY, point.y);\n        minZ = Math.min(minZ, point.z);\n        maxX = Math.max(maxX, point.x);\n        maxY = Math.max(maxY, point.y);\n        maxZ = Math.max(maxZ, point.z);\n      }\n    }\n\n    return {\n      min: { x: minX, y: minY, z: minZ },\n      max: { x: maxX, y: maxY, z: maxZ },\n      center: {\n        x: (minX + maxX) / 2,\n        y: (minY + maxY) / 2,\n        z: (minZ + maxZ) / 2,\n      },\n      size: {\n        x: maxX - minX,\n        y: maxY - minY,\n        z: maxZ - minZ,\n      },\n    };\n  }\n\n  /**\n   * Get statistics about the plot\n   */\n  getPlotStatistics(channelId: ChannelId, machineId: MachineId) {\n    const plotData = this.getPlotData(channelId, machineId);\n    if (!plotData) {\n      return null;\n    }\n\n    const tools = new Set<number>();\n    let totalPoints = 0;\n    const segmentTypes = new Map<string, number>();\n\n    for (const segment of plotData.segments) {\n      tools.add(segment.toolNumber);\n      totalPoints += segment.points.length;\n\n      const count = segmentTypes.get(segment.type) || 0;\n      segmentTypes.set(segment.type, count + 1);\n    }\n\n    return {\n      totalSegments: plotData.segments.length,\n      totalPoints,\n      uniqueTools: tools.size,\n      tools: Array.from(tools),\n      segmentTypes: Object.fromEntries(segmentTypes),\n      bounds: plotData.metadata.bounds,\n      totalDistance: plotData.metadata.totalDistance,\n      totalTime: plotData.metadata.totalTime,\n    };\n  }\n\n  /**\n   * Dispose of the service\n   */\n  dispose(): void {\n    this.clearAll();\n  }\n}\n","/**\n * UserPreferenceService - Stores and retrieves user preferences from localStorage\n */\n\nimport type { UserSettings, LayoutPreferences } from '@core/types';\n\nconst STORAGE_KEY = 'nc-edit7-preferences';\n\n/**\n * UserPreferenceService manages user preferences with localStorage persistence\n */\nexport class UserPreferenceService {\n  private settings: UserSettings;\n\n  constructor() {\n    this.settings = this.loadSettings();\n  }\n\n  /**\n   * Load settings from localStorage\n   */\n  private loadSettings(): UserSettings {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        return this.validateSettings(parsed);\n      }\n    } catch (error) {\n      console.error('Failed to load user preferences:', error);\n    }\n\n    return this.getDefaultSettings();\n  }\n\n  /**\n   * Save settings to localStorage\n   */\n  private saveSettings(): void {\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.settings));\n    } catch (error) {\n      console.error('Failed to save user preferences:', error);\n    }\n  }\n\n  /**\n   * Get default settings\n   */\n  private getDefaultSettings(): UserSettings {\n    return {\n      theme: 'light',\n      editorFontSize: 14,\n      autoSave: true,\n      layoutPreferences: {\n        channelLayout: 'grid',\n        plotPosition: 'right',\n        defaultKeywordSide: 'left',\n        defaultTimeGutterSide: 'right',\n      },\n    };\n  }\n\n  /**\n   * Validate and merge loaded settings with defaults\n   */\n  private validateSettings(settings: Partial<UserSettings>): UserSettings {\n    const defaults = this.getDefaultSettings();\n\n    return {\n      theme: settings.theme === 'dark' ? 'dark' : 'light',\n      editorFontSize:\n        typeof settings.editorFontSize === 'number'\n          ? settings.editorFontSize\n          : defaults.editorFontSize,\n      autoSave: typeof settings.autoSave === 'boolean' ? settings.autoSave : defaults.autoSave,\n      defaultMachine: settings.defaultMachine,\n      layoutPreferences: {\n        ...defaults.layoutPreferences,\n        ...settings.layoutPreferences,\n      },\n    };\n  }\n\n  /**\n   * Get current settings\n   */\n  getSettings(): Readonly<UserSettings> {\n    return { ...this.settings };\n  }\n\n  /**\n   * Update settings\n   */\n  updateSettings(updates: Partial<UserSettings>): void {\n    this.settings = { ...this.settings, ...updates };\n    this.saveSettings();\n  }\n\n  /**\n   * Update layout preferences\n   */\n  updateLayoutPreferences(updates: Partial<LayoutPreferences>): void {\n    this.settings.layoutPreferences = {\n      ...this.settings.layoutPreferences,\n      ...updates,\n    };\n    this.saveSettings();\n  }\n\n  /**\n   * Set theme\n   */\n  setTheme(theme: 'light' | 'dark'): void {\n    this.settings.theme = theme;\n    this.saveSettings();\n\n    // Apply theme to document\n    document.documentElement.setAttribute('data-theme', theme);\n  }\n\n  /**\n   * Set editor font size\n   */\n  setEditorFontSize(size: number): void {\n    this.settings.editorFontSize = Math.max(8, Math.min(32, size));\n    this.saveSettings();\n  }\n\n  /**\n   * Set auto-save preference\n   */\n  setAutoSave(enabled: boolean): void {\n    this.settings.autoSave = enabled;\n    this.saveSettings();\n  }\n\n  /**\n   * Set default machine\n   */\n  setDefaultMachine(machineId: string): void {\n    this.settings.defaultMachine = machineId;\n    this.saveSettings();\n  }\n\n  /**\n   * Clear default machine\n   */\n  clearDefaultMachine(): void {\n    delete this.settings.defaultMachine;\n    this.saveSettings();\n  }\n\n  /**\n   * Reset to defaults\n   */\n  reset(): void {\n    this.settings = this.getDefaultSettings();\n    this.saveSettings();\n  }\n\n  /**\n   * Export settings as JSON\n   */\n  export(): string {\n    return JSON.stringify(this.settings, null, 2);\n  }\n\n  /**\n   * Import settings from JSON\n   */\n  import(json: string): boolean {\n    try {\n      const parsed = JSON.parse(json);\n      this.settings = this.validateSettings(parsed);\n      this.saveSettings();\n      return true;\n    } catch (error) {\n      console.error('Failed to import settings:', error);\n      return false;\n    }\n  }\n}\n","/**\n * DiagnosticsService - Aggregates and manages errors and diagnostics\n */\n\nimport type { ChannelId, FaultDetail, ErrorEvent } from '@core/types';\nimport type { EventBus } from './EventBus';\n\nexport interface Diagnostic {\n  id: string;\n  channelId?: ChannelId;\n  severity: 'ERROR' | 'WARNING' | 'INFO';\n  source: 'PARSER' | 'BACKEND' | 'SYSTEM';\n  message: string;\n  details?: unknown;\n  timestamp: number;\n}\n\n/**\n * DiagnosticsService aggregates parser errors, backend errors,\n * and surfaces guidelines for the UI\n */\nexport class DiagnosticsService {\n  private diagnostics = new Map<string, Diagnostic>();\n  private nextId = 1;\n\n  constructor(private eventBus: EventBus) {\n    // Subscribe to error events\n    this.eventBus.on<ErrorEvent>('error', (event) => {\n      this.addDiagnostic({\n        channelId: undefined,\n        severity: 'ERROR',\n        source: 'SYSTEM',\n        message: event.payload.message,\n        details: event.payload.details,\n      });\n    });\n  }\n\n  /**\n   * Add a diagnostic entry\n   */\n  addDiagnostic(diagnostic: Omit<Diagnostic, 'id' | 'timestamp'>): string {\n    const id = `diag-${this.nextId++}`;\n    const entry: Diagnostic = {\n      ...diagnostic,\n      id,\n      timestamp: Date.now(),\n    };\n\n    this.diagnostics.set(id, entry);\n    return id;\n  }\n\n  /**\n   * Add parser faults as diagnostics\n   */\n  addParserFaults(channelId: ChannelId, faults: FaultDetail[]): void {\n    for (const fault of faults) {\n      this.addDiagnostic({\n        channelId,\n        severity: fault.severity,\n        source: 'PARSER',\n        message: `Line ${fault.lineNumber}: ${fault.message}`,\n        details: fault,\n      });\n    }\n  }\n\n  /**\n   * Add a backend error\n   */\n  addBackendError(message: string, details?: unknown, channelId?: ChannelId): void {\n    this.addDiagnostic({\n      channelId,\n      severity: 'ERROR',\n      source: 'BACKEND',\n      message,\n      details,\n    });\n  }\n\n  /**\n   * Remove a diagnostic by ID\n   */\n  removeDiagnostic(id: string): boolean {\n    return this.diagnostics.delete(id);\n  }\n\n  /**\n   * Clear diagnostics for a channel\n   */\n  clearChannel(channelId: ChannelId): void {\n    const idsToDelete: string[] = [];\n\n    for (const [id, diag] of this.diagnostics) {\n      if (diag.channelId === channelId) {\n        idsToDelete.push(id);\n      }\n    }\n\n    for (const id of idsToDelete) {\n      this.diagnostics.delete(id);\n    }\n  }\n\n  /**\n   * Clear all diagnostics\n   */\n  clearAll(): void {\n    this.diagnostics.clear();\n  }\n\n  /**\n   * Get all diagnostics\n   */\n  getAllDiagnostics(): Diagnostic[] {\n    return Array.from(this.diagnostics.values()).sort((a, b) => b.timestamp - a.timestamp);\n  }\n\n  /**\n   * Get diagnostics for a specific channel\n   */\n  getChannelDiagnostics(channelId: ChannelId): Diagnostic[] {\n    return this.getAllDiagnostics().filter((d) => d.channelId === channelId);\n  }\n\n  /**\n   * Get diagnostics by severity\n   */\n  getDiagnosticsBySeverity(severity: 'ERROR' | 'WARNING' | 'INFO'): Diagnostic[] {\n    return this.getAllDiagnostics().filter((d) => d.severity === severity);\n  }\n\n  /**\n   * Get diagnostics by source\n   */\n  getDiagnosticsBySource(source: 'PARSER' | 'BACKEND' | 'SYSTEM'): Diagnostic[] {\n    return this.getAllDiagnostics().filter((d) => d.source === source);\n  }\n\n  /**\n   * Get error count\n   */\n  getErrorCount(): number {\n    return this.getDiagnosticsBySeverity('ERROR').length;\n  }\n\n  /**\n   * Get warning count\n   */\n  getWarningCount(): number {\n    return this.getDiagnosticsBySeverity('WARNING').length;\n  }\n\n  /**\n   * Check if there are any errors\n   */\n  hasErrors(): boolean {\n    return this.getErrorCount() > 0;\n  }\n\n  /**\n   * Check if there are any warnings\n   */\n  hasWarnings(): boolean {\n    return this.getWarningCount() > 0;\n  }\n\n  /**\n   * Get summary statistics\n   */\n  getSummary() {\n    return {\n      total: this.diagnostics.size,\n      errors: this.getErrorCount(),\n      warnings: this.getWarningCount(),\n      info: this.getDiagnosticsBySeverity('INFO').length,\n      bySource: {\n        parser: this.getDiagnosticsBySource('PARSER').length,\n        backend: this.getDiagnosticsBySource('BACKEND').length,\n        system: this.getDiagnosticsBySource('SYSTEM').length,\n      },\n    };\n  }\n}\n","/**\n * CloudAgentService - Intelligent delegation to cloud-based processing\n *\n * This service determines when to delegate heavy computational tasks to cloud\n * agents instead of local processing, based on program complexity, size, and\n * available resources.\n */\n\nimport type {\n  ChannelId,\n  NcParseResult,\n  ParseArtifacts,\n  ExecutedProgramResult,\n  ServerProgramEntry,\n} from '@core/types';\nimport type { BackendGateway } from './BackendGateway';\nimport type { EventBus } from './EventBus';\n\nexport interface CloudAgentConfig {\n  enabled: boolean;\n  endpoint?: string;\n  apiKey?: string;\n  autoDelegate: boolean;\n  thresholds: {\n    programSizeBytes: number; // Delegate if program exceeds this size\n    lineCount: number; // Delegate if program exceeds this line count\n    complexity: number; // Delegate if complexity score exceeds this (0-100)\n  };\n  capabilities: CloudAgentCapabilities;\n  timeout: number;\n}\n\nexport interface CloudAgentCapabilities {\n  parsing: boolean;\n  execution: boolean;\n  plotting: boolean;\n  optimization: boolean;\n  simulation: boolean;\n}\n\nexport interface DelegationDecision {\n  shouldDelegate: boolean;\n  reason: string;\n  capability: keyof CloudAgentCapabilities;\n  estimatedLocalTime?: number;\n  estimatedCloudTime?: number;\n}\n\nexport interface CloudParseRequest {\n  channelId: ChannelId;\n  program: string;\n  machineId: string;\n}\n\nexport interface CloudExecuteRequest {\n  programs: ServerProgramEntry[];\n}\n\nexport interface CloudAgentResponse<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  processingTime: number;\n  delegatedTo: 'cloud' | 'local';\n}\n\n/**\n * CloudAgentService manages intelligent delegation of tasks to cloud agents\n */\nexport class CloudAgentService {\n  private config: CloudAgentConfig;\n  private stats = {\n    localTasks: 0,\n    cloudTasks: 0,\n    failedDelegations: 0,\n  };\n\n  constructor(\n    private backendGateway: BackendGateway,\n    private eventBus: EventBus,\n    config?: Partial<CloudAgentConfig>\n  ) {\n    this.config = {\n      enabled: config?.enabled ?? false,\n      endpoint: config?.endpoint,\n      apiKey: config?.apiKey,\n      autoDelegate: config?.autoDelegate ?? true,\n      thresholds: {\n        programSizeBytes: config?.thresholds?.programSizeBytes ?? 10000, // 10KB\n        lineCount: config?.thresholds?.lineCount ?? 500,\n        complexity: config?.thresholds?.complexity ?? 70,\n        ...config?.thresholds,\n      },\n      capabilities: {\n        parsing: true,\n        execution: true,\n        plotting: true,\n        optimization: false,\n        simulation: false,\n        ...config?.capabilities,\n      },\n      timeout: config?.timeout ?? 30000,\n    };\n  }\n\n  /**\n   * Determine if a parsing task should be delegated to cloud\n   */\n  shouldDelegateParsing(program: string): DelegationDecision {\n    if (!this.config.enabled || !this.config.capabilities.parsing) {\n      return {\n        shouldDelegate: false,\n        reason: 'Cloud delegation is disabled',\n        capability: 'parsing',\n      };\n    }\n\n    const metrics = this.analyzeProgram(program);\n\n    if (metrics.sizeBytes > this.config.thresholds.programSizeBytes) {\n      return {\n        shouldDelegate: true,\n        reason: `Program size (${metrics.sizeBytes} bytes) exceeds threshold`,\n        capability: 'parsing',\n        estimatedLocalTime: metrics.lineCount * 2, // ms\n        estimatedCloudTime: Math.min(1000, metrics.lineCount * 0.5),\n      };\n    }\n\n    if (metrics.lineCount > this.config.thresholds.lineCount) {\n      return {\n        shouldDelegate: true,\n        reason: `Line count (${metrics.lineCount}) exceeds threshold`,\n        capability: 'parsing',\n        estimatedLocalTime: metrics.lineCount * 2,\n        estimatedCloudTime: Math.min(1000, metrics.lineCount * 0.5),\n      };\n    }\n\n    if (metrics.complexityScore > this.config.thresholds.complexity) {\n      return {\n        shouldDelegate: true,\n        reason: `Complexity score (${metrics.complexityScore}) exceeds threshold`,\n        capability: 'parsing',\n        estimatedLocalTime: metrics.complexityScore * 10,\n        estimatedCloudTime: metrics.complexityScore * 2,\n      };\n    }\n\n    return {\n      shouldDelegate: false,\n      reason: 'Program is suitable for local parsing',\n      capability: 'parsing',\n    };\n  }\n\n  /**\n   * Determine if execution should be delegated to cloud\n   */\n  shouldDelegateExecution(programs: ServerProgramEntry[]): DelegationDecision {\n    if (!this.config.enabled || !this.config.capabilities.execution) {\n      return {\n        shouldDelegate: false,\n        reason: 'Cloud delegation is disabled',\n        capability: 'execution',\n      };\n    }\n\n    const totalSize = programs.reduce((sum, p) => sum + p.program.length, 0);\n    const totalLines = programs.reduce((sum, p) => sum + p.program.split('\\n').length, 0);\n\n    if (totalSize > this.config.thresholds.programSizeBytes) {\n      return {\n        shouldDelegate: true,\n        reason: 'Total program size exceeds threshold',\n        capability: 'execution',\n      };\n    }\n\n    if (totalLines > this.config.thresholds.lineCount) {\n      return {\n        shouldDelegate: true,\n        reason: 'Total line count exceeds threshold',\n        capability: 'execution',\n      };\n    }\n\n    // Multi-channel programs are better suited for cloud processing\n    if (programs.length > 1) {\n      return {\n        shouldDelegate: true,\n        reason: 'Multi-channel execution benefits from cloud processing',\n        capability: 'execution',\n      };\n    }\n\n    return {\n      shouldDelegate: false,\n      reason: 'Execution is suitable for backend gateway',\n      capability: 'execution',\n    };\n  }\n\n  /**\n   * Determine if plotting should be delegated to cloud\n   */\n  shouldDelegatePlotting(program: string): DelegationDecision {\n    if (!this.config.enabled || !this.config.capabilities.plotting) {\n      return {\n        shouldDelegate: false,\n        reason: 'Cloud delegation is disabled',\n        capability: 'plotting',\n      };\n    }\n\n    const metrics = this.analyzeProgram(program);\n\n    // Large programs with many movements benefit from cloud plotting\n    if (metrics.lineCount > 1000 || metrics.sizeBytes > 50000) {\n      return {\n        shouldDelegate: true,\n        reason: 'Large program benefits from cloud plotting',\n        capability: 'plotting',\n      };\n    }\n\n    return {\n      shouldDelegate: false,\n      reason: 'Plotting is suitable for local processing',\n      capability: 'plotting',\n    };\n  }\n\n  /**\n   * Analyze program to determine complexity and characteristics\n   */\n  private analyzeProgram(program: string): {\n    sizeBytes: number;\n    lineCount: number;\n    complexityScore: number;\n  } {\n    const sizeBytes = new Blob([program]).size;\n    const lines = program.split('\\n').filter((line) => line.trim());\n    const lineCount = lines.length;\n\n    // Calculate complexity score (0-100)\n    let complexityScore = 0;\n\n    // Factor in size\n    complexityScore += Math.min(20, (sizeBytes / 1000) * 2);\n\n    // Factor in line count\n    complexityScore += Math.min(20, (lineCount / 100) * 2);\n\n    // Factor in G-code complexity\n    const complexGCodes = (program.match(/G[234]\\b/gi) || []).length; // Arcs and complex moves\n    complexityScore += Math.min(20, complexGCodes / 10);\n\n    // Factor in tool changes\n    const toolChanges = (program.match(/T\\d+/gi) || []).length;\n    complexityScore += Math.min(15, toolChanges * 2);\n\n    // Factor in synchronization codes\n    const syncCodes = (program.match(/M[12]\\d\\d/gi) || []).length;\n    complexityScore += Math.min(15, syncCodes * 5);\n\n    // Factor in macro/subprogram calls\n    const subprogramCalls = (program.match(/M98/gi) || []).length;\n    complexityScore += Math.min(10, subprogramCalls * 3);\n\n    return {\n      sizeBytes,\n      lineCount,\n      complexityScore: Math.min(100, Math.round(complexityScore)),\n    };\n  }\n\n  /**\n   * Delegate parsing to cloud agent\n   */\n  async delegateParsing(\n    request: CloudParseRequest\n  ): Promise<CloudAgentResponse<{ result: NcParseResult; artifacts: ParseArtifacts }>> {\n    const startTime = Date.now();\n\n    try {\n      // If cloud endpoint is not configured, fall back to backend gateway\n      if (!this.config.endpoint) {\n        this.stats.localTasks++;\n        return {\n          success: false,\n          error: 'Cloud endpoint not configured, use local parsing',\n          processingTime: Date.now() - startTime,\n          delegatedTo: 'local',\n        };\n      }\n\n      // TODO: Implement actual cloud API call\n      // For now, this is a placeholder that would call a cloud parsing service\n      // The endpoint needs to be configured and the API contract established\n\n      this.stats.cloudTasks++;\n\n      this.eventBus.emit({\n        type: 'cloud:task-delegated',\n        timestamp: Date.now(),\n        payload: {\n          taskType: 'parsing',\n          channelId: request.channelId,\n        },\n      });\n\n      console.warn(\n        '[CloudAgentService] Cloud parsing endpoint not implemented yet - falling back to local parsing'\n      );\n\n      return {\n        success: false,\n        error: 'Cloud parsing endpoint not implemented yet - use local parsing',\n        processingTime: Date.now() - startTime,\n        delegatedTo: 'local',\n      };\n    } catch (error) {\n      this.stats.failedDelegations++;\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : String(error),\n        processingTime: Date.now() - startTime,\n        delegatedTo: 'cloud',\n      };\n    }\n  }\n\n  /**\n   * Delegate execution to cloud agent or backend gateway based on decision\n   */\n  async delegateExecution(\n    request: CloudExecuteRequest\n  ): Promise<CloudAgentResponse<Map<ChannelId, ExecutedProgramResult>>> {\n    const startTime = Date.now();\n\n    try {\n      const decision = this.shouldDelegateExecution(request.programs);\n\n      // Always use backend gateway for actual execution\n      // The \"cloud\" in this case refers to the existing CGI backend\n      this.stats.cloudTasks++;\n\n      this.eventBus.emit({\n        type: 'cloud:task-delegated',\n        timestamp: Date.now(),\n        payload: {\n          taskType: 'execution',\n          decision,\n        },\n      });\n\n      // Delegate to backend gateway (which is the cloud service)\n      await this.backendGateway.executePrograms(request.programs);\n\n      // TODO: Parse the backend response and convert to ExecutedProgramResult map\n      // For now, return empty result to indicate incomplete implementation\n      console.warn(\n        '[CloudAgentService] Cloud execution response parsing not implemented - ExecutedProgramService will handle via BackendGateway'\n      );\n\n      return {\n        success: false,\n        error:\n          'Cloud execution response parsing not implemented - use ExecutedProgramService directly',\n        processingTime: Date.now() - startTime,\n        delegatedTo: 'local',\n      };\n    } catch (error) {\n      this.stats.failedDelegations++;\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : String(error),\n        processingTime: Date.now() - startTime,\n        delegatedTo: 'cloud',\n      };\n    }\n  }\n\n  /**\n   * Get statistics about delegation\n   */\n  getStats() {\n    return {\n      ...this.stats,\n      totalTasks: this.stats.localTasks + this.stats.cloudTasks,\n      delegationRate: this.stats.cloudTasks / (this.stats.localTasks + this.stats.cloudTasks) || 0,\n    };\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(config: Partial<CloudAgentConfig>): void {\n    this.config = {\n      ...this.config,\n      ...config,\n      thresholds: {\n        ...this.config.thresholds,\n        ...config.thresholds,\n      },\n      capabilities: {\n        ...this.config.capabilities,\n        ...config.capabilities,\n      },\n    };\n  }\n\n  /**\n   * Get current configuration\n   */\n  getConfig(): Readonly<CloudAgentConfig> {\n    return { ...this.config };\n  }\n\n  /**\n   * Enable or disable cloud delegation\n   */\n  setEnabled(enabled: boolean): void {\n    this.config.enabled = enabled;\n  }\n\n  /**\n   * Check if cloud agent is available\n   */\n  async isAvailable(): Promise<boolean> {\n    if (!this.config.enabled || !this.config.endpoint) {\n      return false;\n    }\n\n    try {\n      // TODO: Implement health check to cloud endpoint\n      return false; // For now, return false until endpoint is implemented\n    } catch {\n      return false;\n    }\n  }\n}\n","/**\n * Base class for custom Web Components\n */\n\nexport abstract class BaseComponent extends HTMLElement {\n  protected shadow: ShadowRoot;\n  private _isConnected = false;\n\n  constructor() {\n    super();\n    this.shadow = this.attachShadow({ mode: 'open' });\n  }\n\n  connectedCallback() {\n    if (!this._isConnected) {\n      this._isConnected = true;\n      this.render();\n      this.onConnected();\n    }\n  }\n\n  disconnectedCallback() {\n    this.onDisconnected();\n    this._isConnected = false;\n  }\n\n  /**\n   * Override to implement rendering logic\n   */\n  protected abstract render(): void;\n\n  /**\n   * Override to handle connection lifecycle\n   */\n  protected onConnected(): void {\n    // Override in subclasses\n  }\n\n  /**\n   * Override to handle disconnection lifecycle\n   */\n  protected onDisconnected(): void {\n    // Override in subclasses\n  }\n\n  /**\n   * Request a re-render\n   */\n  protected requestRender(): void {\n    if (this._isConnected) {\n      this.render();\n    }\n  }\n\n  /**\n   * Create a style element with the given CSS\n   */\n  protected createStyles(css: string): HTMLStyleElement {\n    const style = document.createElement('style');\n    style.textContent = css;\n    return style;\n  }\n\n  /**\n   * Query element within shadow root\n   */\n  protected query<T extends Element>(selector: string): T | null {\n    return this.shadow.querySelector<T>(selector);\n  }\n\n  /**\n   * Query all elements within shadow root\n   */\n  protected queryAll<T extends Element>(selector: string): NodeListOf<T> {\n    return this.shadow.querySelectorAll<T>(selector);\n  }\n}\n","/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\n/**\n * Define a module along with a payload\n * @param module a name for the payload\n * @param payload a function to call with (require, exports, module) params\n */\n\n(function() {\n\nvar ACE_NAMESPACE = \"ace\";\n\nvar global = (function() { return this; })();\nif (!global && typeof window != \"undefined\") global = window; // strict mode\n\n\nif (!ACE_NAMESPACE && typeof requirejs !== \"undefined\")\n    return;\n\n\nvar define = function(module, deps, payload) {\n    if (typeof module !== \"string\") {\n        if (define.original)\n            define.original.apply(this, arguments);\n        else {\n            console.error(\"dropping module because define wasn\\'t a string.\");\n            console.trace();\n        }\n        return;\n    }\n    if (arguments.length == 2)\n        payload = deps;\n    if (!define.modules[module]) {\n        define.payloads[module] = payload;\n        define.modules[module] = null;\n    }\n};\n\ndefine.modules = {};\ndefine.payloads = {};\n\n/**\n * Get at functionality define()ed using the function above\n */\nvar _require = function(parentId, module, callback) {\n    if (typeof module === \"string\") {\n        var payload = lookup(parentId, module);\n        if (payload != undefined) {\n            callback && callback();\n            return payload;\n        }\n    } else if (Object.prototype.toString.call(module) === \"[object Array]\") {\n        var params = [];\n        for (var i = 0, l = module.length; i < l; ++i) {\n            var dep = lookup(parentId, module[i]);\n            if (dep == undefined && require.original)\n                return;\n            params.push(dep);\n        }\n        return callback && callback.apply(null, params) || true;\n    }\n};\n\nvar require = function(module, callback) {\n    var packagedModule = _require(\"\", module, callback);\n    if (packagedModule == undefined && require.original)\n        return require.original.apply(this, arguments);\n    return packagedModule;\n};\n\nvar normalizeModule = function(parentId, moduleName) {\n    // normalize plugin requires\n    if (moduleName.indexOf(\"!\") !== -1) {\n        var chunks = moduleName.split(\"!\");\n        return normalizeModule(parentId, chunks[0]) + \"!\" + normalizeModule(parentId, chunks[1]);\n    }\n    // normalize relative requires\n    if (moduleName.charAt(0) == \".\") {\n        var base = parentId.split(\"/\").slice(0, -1).join(\"/\");\n        moduleName = base + \"/\" + moduleName;\n\n        while(moduleName.indexOf(\".\") !== -1 && previous != moduleName) {\n            var previous = moduleName;\n            moduleName = moduleName.replace(/\\/\\.\\//, \"/\").replace(/[^\\/]+\\/\\.\\.\\//, \"\");\n        }\n    }\n    return moduleName;\n};\n\n/**\n * Internal function to lookup moduleNames and resolve them by calling the\n * definition function if needed.\n */\nvar lookup = function(parentId, moduleName) {\n    moduleName = normalizeModule(parentId, moduleName);\n\n    var module = define.modules[moduleName];\n    if (!module) {\n        module = define.payloads[moduleName];\n        if (typeof module === 'function') {\n            var exports = {};\n            var mod = {\n                id: moduleName,\n                uri: '',\n                exports: exports,\n                packaged: true\n            };\n\n            var req = function(module, callback) {\n                return _require(moduleName, module, callback);\n            };\n\n            var returnValue = module(req, exports, mod);\n            exports = returnValue || mod.exports;\n            define.modules[moduleName] = exports;\n            delete define.payloads[moduleName];\n        }\n        module = define.modules[moduleName] = exports || module;\n    }\n    return module;\n};\n\nfunction exportAce(ns) {\n    var root = global;\n    if (ns) {\n        if (!global[ns])\n            global[ns] = {};\n        root = global[ns];\n    }\n\n    if (!root.define || !root.define.packaged) {\n        define.original = root.define;\n        root.define = define;\n        root.define.packaged = true;\n    }\n\n    if (!root.require || !root.require.packaged) {\n        require.original = root.require;\n        root.require = require;\n        root.require.packaged = true;\n    }\n}\n\nexportAce(ACE_NAMESPACE);\n\n})();\n\nace.define(\"ace/lib/es6-shim\",[\"require\",\"exports\",\"module\"], function(require, exports, module){function defineProp(obj, name, val) {\n    Object.defineProperty(obj, name, {\n        value: val,\n        enumerable: false,\n        writable: true,\n        configurable: true\n    });\n}\nif (!String.prototype.startsWith) {\n    defineProp(String.prototype, \"startsWith\", function (searchString, position) {\n        position = position || 0;\n        return this.lastIndexOf(searchString, position) === position;\n    });\n}\nif (!String.prototype.endsWith) {\n    defineProp(String.prototype, \"endsWith\", function (searchString, position) {\n        var subjectString = this;\n        if (position === undefined || position > subjectString.length) {\n            position = subjectString.length;\n        }\n        position -= searchString.length;\n        var lastIndex = subjectString.indexOf(searchString, position);\n        return lastIndex !== -1 && lastIndex === position;\n    });\n}\nif (!String.prototype.repeat) {\n    defineProp(String.prototype, \"repeat\", function (count) {\n        var result = \"\";\n        var string = this;\n        while (count > 0) {\n            if (count & 1)\n                result += string;\n            if ((count >>= 1))\n                string += string;\n        }\n        return result;\n    });\n}\nif (!String.prototype.includes) {\n    defineProp(String.prototype, \"includes\", function (str, position) {\n        return this.indexOf(str, position) != -1;\n    });\n}\nif (!Object.assign) {\n    Object.assign = function (target) {\n        if (target === undefined || target === null) {\n            throw new TypeError(\"Cannot convert undefined or null to object\");\n        }\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                Object.keys(source).forEach(function (key) {\n                    output[key] = source[key];\n                });\n            }\n        }\n        return output;\n    };\n}\nif (!Object.values) {\n    Object.values = function (o) {\n        return Object.keys(o).map(function (k) {\n            return o[k];\n        });\n    };\n}\nif (!Array.prototype.find) {\n    defineProp(Array.prototype, \"find\", function (predicate) {\n        var len = this.length;\n        var thisArg = arguments[1];\n        for (var k = 0; k < len; k++) {\n            var kValue = this[k];\n            if (predicate.call(thisArg, kValue, k, this)) {\n                return kValue;\n            }\n        }\n    });\n}\nif (!Array.prototype.findIndex) {\n    defineProp(Array.prototype, \"findIndex\", function (predicate) {\n        var len = this.length;\n        var thisArg = arguments[1];\n        for (var k = 0; k < len; k++) {\n            var kValue = this[k];\n            if (predicate.call(thisArg, kValue, k, this)) {\n                return k;\n            }\n        }\n    });\n}\nif (!Array.prototype.includes) {\n    defineProp(Array.prototype, \"includes\", function (item, position) {\n        return this.indexOf(item, position) != -1;\n    });\n}\nif (!Array.prototype.fill) {\n    defineProp(Array.prototype, \"fill\", function (value) {\n        var O = this;\n        var len = O.length >>> 0;\n        var start = arguments[1];\n        var relativeStart = start >> 0;\n        var k = relativeStart < 0\n            ? Math.max(len + relativeStart, 0)\n            : Math.min(relativeStart, len);\n        var end = arguments[2];\n        var relativeEnd = end === undefined ? len : end >> 0;\n        var final = relativeEnd < 0\n            ? Math.max(len + relativeEnd, 0)\n            : Math.min(relativeEnd, len);\n        while (k < final) {\n            O[k] = value;\n            k++;\n        }\n        return O;\n    });\n}\nif (!Array.of) {\n    defineProp(Array, \"of\", function () {\n        return Array.prototype.slice.call(arguments);\n    });\n}\n\n});\n\nace.define(\"ace/lib/fixoldbrowsers\",[\"require\",\"exports\",\"module\",\"ace/lib/es6-shim\"], function(require, exports, module){// vim:set ts=4 sts=4 sw=4 st:\n\"use strict\";\nrequire(\"./es6-shim\");\n\n});\n\nace.define(\"ace/lib/deep_copy\",[\"require\",\"exports\",\"module\"], function(require, exports, module){exports.deepCopy = function deepCopy(obj) {\n    if (typeof obj !== \"object\" || !obj)\n        return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n        copy = [];\n        for (var key = 0; key < obj.length; key++) {\n            copy[key] = deepCopy(obj[key]);\n        }\n        return copy;\n    }\n    if (Object.prototype.toString.call(obj) !== \"[object Object]\")\n        return obj;\n    copy = {};\n    for (var key in obj)\n        copy[key] = deepCopy(obj[key]);\n    return copy;\n};\n\n});\n\nace.define(\"ace/lib/lang\",[\"require\",\"exports\",\"module\",\"ace/lib/deep_copy\"], function(require, exports, module){\"use strict\";\nexports.last = function (a) {\n    return a[a.length - 1];\n};\nexports.stringReverse = function (string) {\n    return string.split(\"\").reverse().join(\"\");\n};\nexports.stringRepeat = function (string, count) {\n    var result = '';\n    while (count > 0) {\n        if (count & 1)\n            result += string;\n        if (count >>= 1)\n            string += string;\n    }\n    return result;\n};\nvar trimBeginRegexp = /^\\s\\s*/;\nvar trimEndRegexp = /\\s\\s*$/;\nexports.stringTrimLeft = function (string) {\n    return string.replace(trimBeginRegexp, '');\n};\nexports.stringTrimRight = function (string) {\n    return string.replace(trimEndRegexp, '');\n};\nexports.copyObject = function (obj) {\n    var copy = {};\n    for (var key in obj) {\n        copy[key] = obj[key];\n    }\n    return copy;\n};\nexports.copyArray = function (array) {\n    var copy = [];\n    for (var i = 0, l = array.length; i < l; i++) {\n        if (array[i] && typeof array[i] == \"object\")\n            copy[i] = this.copyObject(array[i]);\n        else\n            copy[i] = array[i];\n    }\n    return copy;\n};\nexports.deepCopy = require(\"./deep_copy\").deepCopy;\nexports.arrayToMap = function (arr) {\n    var map = {};\n    for (var i = 0; i < arr.length; i++) {\n        map[arr[i]] = 1;\n    }\n    return map;\n};\nexports.createMap = function (props) {\n    var map = Object.create(null);\n    for (var i in props) {\n        map[i] = props[i];\n    }\n    return map;\n};\nexports.arrayRemove = function (array, value) {\n    for (var i = 0; i <= array.length; i++) {\n        if (value === array[i]) {\n            array.splice(i, 1);\n        }\n    }\n};\nexports.escapeRegExp = function (str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n};\nexports.escapeHTML = function (str) {\n    return (\"\" + str).replace(/&/g, \"&#38;\").replace(/\"/g, \"&#34;\").replace(/'/g, \"&#39;\").replace(/</g, \"&#60;\");\n};\nexports.getMatchOffsets = function (string, regExp) {\n    var matches = [];\n    string.replace(regExp, function (str) {\n        matches.push({\n            offset: arguments[arguments.length - 2],\n            length: str.length\n        });\n    });\n    return matches;\n};\nexports.deferredCall = function (fcn) {\n    var timer = null;\n    var callback = function () {\n        timer = null;\n        fcn();\n    };\n    var deferred = function (timeout) {\n        deferred.cancel();\n        timer = setTimeout(callback, timeout || 0);\n        return deferred;\n    };\n    deferred.schedule = deferred;\n    deferred.call = function () {\n        this.cancel();\n        fcn();\n        return deferred;\n    };\n    deferred.cancel = function () {\n        clearTimeout(timer);\n        timer = null;\n        return deferred;\n    };\n    deferred.isPending = function () {\n        return timer;\n    };\n    return deferred;\n};\nexports.delayedCall = function (fcn, defaultTimeout) {\n    var timer = null;\n    var callback = function () {\n        timer = null;\n        fcn();\n    };\n    var _self = function (timeout) {\n        if (timer == null)\n            timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n    _self.delay = function (timeout) {\n        timer && clearTimeout(timer);\n        timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n    _self.schedule = _self;\n    _self.call = function () {\n        this.cancel();\n        fcn();\n    };\n    _self.cancel = function () {\n        timer && clearTimeout(timer);\n        timer = null;\n    };\n    _self.isPending = function () {\n        return timer;\n    };\n    return _self;\n};\nexports.supportsLookbehind = function () {\n    try {\n        new RegExp('(?<=.)');\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n};\nexports.skipEmptyMatch = function (line, last, supportsUnicodeFlag) {\n    return supportsUnicodeFlag && line.codePointAt(last) > 0xffff ? 2 : 1;\n};\n\n});\n\nace.define(\"ace/lib/useragent\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nexports.OS = {\n    LINUX: \"LINUX\",\n    MAC: \"MAC\",\n    WINDOWS: \"WINDOWS\"\n};\nexports.getOS = function () {\n    if (exports.isMac) {\n        return exports.OS.MAC;\n    }\n    else if (exports.isLinux) {\n        return exports.OS.LINUX;\n    }\n    else {\n        return exports.OS.WINDOWS;\n    }\n};\nvar _navigator = typeof navigator == \"object\" ? navigator : {};\nvar os = (/mac|win|linux/i.exec(_navigator.platform) || [\"other\"])[0].toLowerCase();\nvar ua = _navigator.userAgent || \"\";\nvar appName = _navigator.appName || \"\";\nexports.isWin = (os == \"win\");\nexports.isMac = (os == \"mac\");\nexports.isLinux = (os == \"linux\");\nexports.isIE =\n    (appName == \"Microsoft Internet Explorer\" || appName.indexOf(\"MSAppHost\") >= 0)\n        ? parseFloat((ua.match(/(?:MSIE |Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/) || [])[1])\n        : parseFloat((ua.match(/(?:Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/) || [])[1]); // for ie\nexports.isOldIE = exports.isIE && exports.isIE < 9;\nexports.isGecko = exports.isMozilla = ua.match(/ Gecko\\/\\d+/);\nexports.isOpera = typeof opera == \"object\" && Object.prototype.toString.call(window[\"opera\"]) == \"[object Opera]\";\nexports.isWebKit = parseFloat(ua.split(\"WebKit/\")[1]) || undefined;\nexports.isChrome = parseFloat(ua.split(\" Chrome/\")[1]) || undefined;\nexports.isSafari = parseFloat(ua.split(\" Safari/\")[1]) && !exports.isChrome || undefined;\nexports.isEdge = parseFloat(ua.split(\" Edge/\")[1]) || undefined;\nexports.isAIR = ua.indexOf(\"AdobeAIR\") >= 0;\nexports.isAndroid = ua.indexOf(\"Android\") >= 0;\nexports.isChromeOS = ua.indexOf(\" CrOS \") >= 0;\nexports.isIOS = /iPad|iPhone|iPod/.test(ua) && !window[\"MSStream\"];\nif (exports.isIOS)\n    exports.isMac = true;\nexports.isMobile = exports.isIOS || exports.isAndroid;\n\n});\n\nace.define(\"ace/lib/dom\",[\"require\",\"exports\",\"module\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar useragent = require(\"./useragent\");\nvar XHTML_NS = \"http://www.w3.org/1999/xhtml\";\nexports.buildDom = function buildDom(arr, parent, refs) {\n    if (typeof arr == \"string\" && arr) {\n        var txt = document.createTextNode(arr);\n        if (parent)\n            parent.appendChild(txt);\n        return txt;\n    }\n    if (!Array.isArray(arr)) {\n        if (arr && arr.appendChild && parent)\n            parent.appendChild(arr);\n        return arr;\n    }\n    if (typeof arr[0] != \"string\" || !arr[0]) {\n        var els = [];\n        for (var i = 0; i < arr.length; i++) {\n            var ch = buildDom(arr[i], parent, refs);\n            ch && els.push(ch);\n        }\n        return els;\n    }\n    var el = document.createElement(arr[0]);\n    var options = arr[1];\n    var childIndex = 1;\n    if (options && typeof options == \"object\" && !Array.isArray(options))\n        childIndex = 2;\n    for (var i = childIndex; i < arr.length; i++)\n        buildDom(arr[i], el, refs);\n    if (childIndex == 2) {\n        Object.keys(options).forEach(function (n) {\n            var val = options[n];\n            if (n === \"class\") {\n                el.className = Array.isArray(val) ? val.join(\" \") : val;\n            }\n            else if (typeof val == \"function\" || n == \"value\" || n[0] == \"$\") {\n                el[n] = val;\n            }\n            else if (n === \"ref\") {\n                if (refs)\n                    refs[val] = el;\n            }\n            else if (n === \"style\") {\n                if (typeof val == \"string\")\n                    el.style.cssText = val;\n            }\n            else if (val != null) {\n                el.setAttribute(n, val);\n            }\n        });\n    }\n    if (parent)\n        parent.appendChild(el);\n    return el;\n};\nexports.getDocumentHead = function (doc) {\n    if (!doc)\n        doc = document;\n    return doc.head || doc.getElementsByTagName(\"head\")[0] || doc.documentElement;\n};\nexports.createElement = function (tag, ns) {\n    return document.createElementNS ? document.createElementNS(ns || XHTML_NS, tag) : document.createElement(tag);\n};\nexports.removeChildren = function (element) {\n    element.innerHTML = \"\";\n};\nexports.createTextNode = function (textContent, element) {\n    var doc = element ? element.ownerDocument : document;\n    return doc.createTextNode(textContent);\n};\nexports.createFragment = function (element) {\n    var doc = element ? element.ownerDocument : document;\n    return doc.createDocumentFragment();\n};\nexports.hasCssClass = function (el, name) {\n    var classes = (el.className + \"\").split(/\\s+/g);\n    return classes.indexOf(name) !== -1;\n};\nexports.addCssClass = function (el, name) {\n    if (!exports.hasCssClass(el, name)) {\n        el.className += \" \" + name;\n    }\n};\nexports.removeCssClass = function (el, name) {\n    var classes = el.className.split(/\\s+/g);\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        classes.splice(index, 1);\n    }\n    el.className = classes.join(\" \");\n};\nexports.toggleCssClass = function (el, name) {\n    var classes = el.className.split(/\\s+/g), add = true;\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        add = false;\n        classes.splice(index, 1);\n    }\n    if (add)\n        classes.push(name);\n    el.className = classes.join(\" \");\n    return add;\n};\nexports.setCssClass = function (node, className, include) {\n    if (include) {\n        exports.addCssClass(node, className);\n    }\n    else {\n        exports.removeCssClass(node, className);\n    }\n};\nexports.hasCssString = function (id, doc) {\n    var index = 0, sheets;\n    doc = doc || document;\n    if ((sheets = doc.querySelectorAll(\"style\"))) {\n        while (index < sheets.length) {\n            if (sheets[index++].id === id) {\n                return true;\n            }\n        }\n    }\n};\nexports.removeElementById = function (id, doc) {\n    doc = doc || document;\n    if (doc.getElementById(id)) {\n        doc.getElementById(id).remove();\n    }\n};\nvar strictCSP;\nvar cssCache = [];\nexports.useStrictCSP = function (value) {\n    strictCSP = value;\n    if (value == false)\n        insertPendingStyles();\n    else if (!cssCache)\n        cssCache = [];\n};\nfunction insertPendingStyles() {\n    var cache = cssCache;\n    cssCache = null;\n    cache && cache.forEach(function (item) {\n        importCssString(item[0], item[1]);\n    });\n}\nfunction importCssString(cssText, id, target) {\n    if (typeof document == \"undefined\")\n        return;\n    if (cssCache) {\n        if (target) {\n            insertPendingStyles();\n        }\n        else if (target === false) {\n            return cssCache.push([cssText, id]);\n        }\n    }\n    if (strictCSP)\n        return;\n    var container = target;\n    if (!target || !target.getRootNode) {\n        container = document;\n    }\n    else {\n        container = target.getRootNode();\n        if (!container || container == target)\n            container = document;\n    }\n    var doc = container.ownerDocument || container;\n    if (id && exports.hasCssString(id, container))\n        return null;\n    if (id)\n        cssText += \"\\n/*# sourceURL=ace/css/\" + id + \" */\";\n    var style = exports.createElement(\"style\");\n    style.appendChild(doc.createTextNode(cssText));\n    if (id)\n        style.id = id;\n    if (container == doc)\n        container = exports.getDocumentHead(doc);\n    container.insertBefore(style, container.firstChild);\n}\nexports.importCssString = importCssString;\nexports.importCssStylsheet = function (uri, doc) {\n    exports.buildDom([\"link\", { rel: \"stylesheet\", href: uri }], exports.getDocumentHead(doc));\n};\nexports.$fixPositionBug = function (el) {\n    var rect = el.getBoundingClientRect();\n    if (el.style.left) {\n        var target = parseFloat(el.style.left);\n        var result = +rect.left;\n        if (Math.abs(target - result) > 1) {\n            el.style.left = 2 * target - result + \"px\";\n        }\n    }\n    if (el.style.right) {\n        var target = parseFloat(el.style.right);\n        var result = window.innerWidth - rect.right;\n        if (Math.abs(target - result) > 1) {\n            el.style.right = 2 * target - result + \"px\";\n        }\n    }\n    if (el.style.top) {\n        var target = parseFloat(el.style.top);\n        var result = +rect.top;\n        if (Math.abs(target - result) > 1) {\n            el.style.top = 2 * target - result + \"px\";\n        }\n    }\n    if (el.style.bottom) {\n        var target = parseFloat(el.style.bottom);\n        var result = window.innerHeight - rect.bottom;\n        if (Math.abs(target - result) > 1) {\n            el.style.bottom = 2 * target - result + \"px\";\n        }\n    }\n};\nexports.scrollbarWidth = function (doc) {\n    var inner = exports.createElement(\"ace_inner\");\n    inner.style.width = \"100%\";\n    inner.style.minWidth = \"0px\";\n    inner.style.height = \"200px\";\n    inner.style.display = \"block\";\n    var outer = exports.createElement(\"ace_outer\");\n    var style = outer.style;\n    style.position = \"absolute\";\n    style.left = \"-10000px\";\n    style.overflow = \"hidden\";\n    style.width = \"200px\";\n    style.minWidth = \"0px\";\n    style.height = \"150px\";\n    style.display = \"block\";\n    outer.appendChild(inner);\n    var body = (doc && doc.documentElement) || (document && document.documentElement);\n    if (!body)\n        return 0;\n    body.appendChild(outer);\n    var noScrollbar = inner.offsetWidth;\n    style.overflow = \"scroll\";\n    var withScrollbar = inner.offsetWidth;\n    if (noScrollbar === withScrollbar) {\n        withScrollbar = outer.clientWidth;\n    }\n    body.removeChild(outer);\n    return noScrollbar - withScrollbar;\n};\nexports.computedStyle = function (element, style) {\n    return window.getComputedStyle(element, \"\") || {};\n};\nexports.setStyle = function (styles, property, value) {\n    if (styles[property] !== value) {\n        styles[property] = value;\n    }\n};\nexports.HAS_CSS_ANIMATION = false;\nexports.HAS_CSS_TRANSFORMS = false;\nexports.HI_DPI = useragent.isWin\n    ? typeof window !== \"undefined\" && window.devicePixelRatio >= 1.5\n    : true;\nif (useragent.isChromeOS)\n    exports.HI_DPI = false;\nif (typeof document !== \"undefined\") {\n    var div = document.createElement(\"div\");\n    if (exports.HI_DPI && div.style.transform !== undefined)\n        exports.HAS_CSS_TRANSFORMS = true;\n    if (!useragent.isEdge && typeof div.style.animationName !== \"undefined\")\n        exports.HAS_CSS_ANIMATION = true;\n    div = null;\n}\nif (exports.HAS_CSS_TRANSFORMS) {\n    exports.translate = function (element, tx, ty) {\n        element.style.transform = \"translate(\" + Math.round(tx) + \"px, \" + Math.round(ty) + \"px)\";\n    };\n}\nelse {\n    exports.translate = function (element, tx, ty) {\n        element.style.top = Math.round(ty) + \"px\";\n        element.style.left = Math.round(tx) + \"px\";\n    };\n}\n\n});\n\nace.define(\"ace/lib/net\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module){/*\n * based on code from:\n *\n * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/requirejs for details\n */\n\"use strict\";\nvar dom = require(\"./dom\");\nexports.get = function (url, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            callback(xhr.responseText);\n        }\n    };\n    xhr.send(null);\n};\nexports.loadScript = function (path, callback) {\n    var head = dom.getDocumentHead();\n    var s = document.createElement('script');\n    s.src = path;\n    head.appendChild(s);\n    s.onload = s.onreadystatechange = function (_, isAbort) {\n        if (isAbort || !s.readyState || s.readyState == \"loaded\" || s.readyState == \"complete\") {\n            s = s.onload = s.onreadystatechange = null;\n            if (!isAbort)\n                callback();\n        }\n    };\n};\nexports.qualifyURL = function (url) {\n    var a = document.createElement('a');\n    a.href = url;\n    return a.href;\n};\n\n});\n\nace.define(\"ace/lib/oop\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nexports.inherits = function (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        }\n    });\n};\nexports.mixin = function (obj, mixin) {\n    for (var key in mixin) {\n        obj[key] = mixin[key];\n    }\n    return obj;\n};\nexports.implement = function (proto, mixin) {\n    exports.mixin(proto, mixin);\n};\n\n});\n\nace.define(\"ace/lib/event_emitter\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar EventEmitter = {};\nvar stopPropagation = function () { this.propagationStopped = true; };\nvar preventDefault = function () { this.defaultPrevented = true; };\nEventEmitter._emit =\n    EventEmitter._dispatchEvent = function (eventName, e) {\n        this._eventRegistry || (this._eventRegistry = {});\n        this._defaultHandlers || (this._defaultHandlers = {});\n        var listeners = this._eventRegistry[eventName] || [];\n        var defaultHandler = this._defaultHandlers[eventName];\n        if (!listeners.length && !defaultHandler)\n            return;\n        if (typeof e != \"object\" || !e)\n            e = {};\n        if (!e.type)\n            e.type = eventName;\n        if (!e.stopPropagation)\n            e.stopPropagation = stopPropagation;\n        if (!e.preventDefault)\n            e.preventDefault = preventDefault;\n        listeners = listeners.slice();\n        for (var i = 0; i < listeners.length; i++) {\n            listeners[i](e, this);\n            if (e.propagationStopped)\n                break;\n        }\n        if (defaultHandler && !e.defaultPrevented)\n            return defaultHandler(e, this);\n    };\nEventEmitter._signal = function (eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (!listeners)\n        return;\n    listeners = listeners.slice();\n    for (var i = 0; i < listeners.length; i++)\n        listeners[i](e, this);\n};\nEventEmitter.once = function (eventName, callback) {\n    var _self = this;\n    this.on(eventName, function newCallback() {\n        _self.off(eventName, newCallback);\n        callback.apply(null, arguments);\n    });\n    if (!callback) {\n        return new Promise(function (resolve) {\n            callback = resolve;\n        });\n    }\n};\nEventEmitter.setDefaultHandler = function (eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        handlers = this._defaultHandlers = { _disabled_: {} };\n    if (handlers[eventName]) {\n        var old = handlers[eventName];\n        var disabled = handlers._disabled_[eventName];\n        if (!disabled)\n            handlers._disabled_[eventName] = disabled = [];\n        disabled.push(old);\n        var i = disabled.indexOf(callback);\n        if (i != -1)\n            disabled.splice(i, 1);\n    }\n    handlers[eventName] = callback;\n};\nEventEmitter.removeDefaultHandler = function (eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        return;\n    var disabled = handlers._disabled_[eventName];\n    if (handlers[eventName] == callback) {\n        if (disabled)\n            this.setDefaultHandler(eventName, disabled.pop());\n    }\n    else if (disabled) {\n        var i = disabled.indexOf(callback);\n        if (i != -1)\n            disabled.splice(i, 1);\n    }\n};\nEventEmitter.on =\n    EventEmitter.addEventListener = function (eventName, callback, capturing) {\n        this._eventRegistry = this._eventRegistry || {};\n        var listeners = this._eventRegistry[eventName];\n        if (!listeners)\n            listeners = this._eventRegistry[eventName] = [];\n        if (listeners.indexOf(callback) == -1)\n            listeners[capturing ? \"unshift\" : \"push\"](callback);\n        return callback;\n    };\nEventEmitter.off =\n    EventEmitter.removeListener =\n        EventEmitter.removeEventListener = function (eventName, callback) {\n            this._eventRegistry = this._eventRegistry || {};\n            var listeners = this._eventRegistry[eventName];\n            if (!listeners)\n                return;\n            var index = listeners.indexOf(callback);\n            if (index !== -1)\n                listeners.splice(index, 1);\n        };\nEventEmitter.removeAllListeners = function (eventName) {\n    if (!eventName)\n        this._eventRegistry = this._defaultHandlers = undefined;\n    if (this._eventRegistry)\n        this._eventRegistry[eventName] = undefined;\n    if (this._defaultHandlers)\n        this._defaultHandlers[eventName] = undefined;\n};\nexports.EventEmitter = EventEmitter;\n\n});\n\nace.define(\"ace/lib/report_error\",[\"require\",\"exports\",\"module\"], function(require, exports, module){exports.reportError = function reportError(msg, data) {\n    var e = new Error(msg);\n    e[\"data\"] = data;\n    if (typeof console == \"object\" && console.error)\n        console.error(e);\n    setTimeout(function () { throw e; });\n};\n\n});\n\nace.define(\"ace/lib/default_english_messages\",[\"require\",\"exports\",\"module\"], function(require, exports, module){var defaultEnglishMessages = {\n    \"autocomplete.popup.aria-roledescription\": \"Autocomplete suggestions\",\n    \"autocomplete.popup.aria-label\": \"Autocomplete suggestions\",\n    \"autocomplete.popup.item.aria-roledescription\": \"item\",\n    \"autocomplete.loading\": \"Loading...\",\n    \"editor.scroller.aria-roledescription\": \"editor\",\n    \"editor.scroller.aria-label\": \"Editor content, press Enter to start editing, press Escape to exit\",\n    \"editor.gutter.aria-roledescription\": \"editor gutter\",\n    \"editor.gutter.aria-label\": \"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit\",\n    \"error-marker.good-state\": \"Looks good!\",\n    \"prompt.recently-used\": \"Recently used\",\n    \"prompt.other-commands\": \"Other commands\",\n    \"prompt.no-matching-commands\": \"No matching commands\",\n    \"search-box.find.placeholder\": \"Search for\",\n    \"search-box.find-all.text\": \"All\",\n    \"search-box.replace.placeholder\": \"Replace with\",\n    \"search-box.replace-next.text\": \"Replace\",\n    \"search-box.replace-all.text\": \"All\",\n    \"search-box.toggle-replace.title\": \"Toggle Replace mode\",\n    \"search-box.toggle-regexp.title\": \"RegExp Search\",\n    \"search-box.toggle-case.title\": \"CaseSensitive Search\",\n    \"search-box.toggle-whole-word.title\": \"Whole Word Search\",\n    \"search-box.toggle-in-selection.title\": \"Search In Selection\",\n    \"search-box.search-counter\": \"$0 of $1\",\n    \"text-input.aria-roledescription\": \"editor\",\n    \"text-input.aria-label\": \"Cursor at row $0\",\n    \"gutter.code-folding.range.aria-label\": \"Toggle code folding, rows $0 through $1\",\n    \"gutter.code-folding.closed.aria-label\": \"Toggle code folding, rows $0 through $1\",\n    \"gutter.code-folding.open.aria-label\": \"Toggle code folding, row $0\",\n    \"gutter.code-folding.closed.title\": \"Unfold code\",\n    \"gutter.code-folding.open.title\": \"Fold code\",\n    \"gutter.annotation.aria-label.error\": \"Error, read annotations row $0\",\n    \"gutter.annotation.aria-label.warning\": \"Warning, read annotations row $0\",\n    \"gutter.annotation.aria-label.info\": \"Info, read annotations row $0\",\n    \"inline-fold.closed.title\": \"Unfold code\",\n    \"gutter-tooltip.aria-label.error.singular\": \"error\",\n    \"gutter-tooltip.aria-label.error.plural\": \"errors\",\n    \"gutter-tooltip.aria-label.warning.singular\": \"warning\",\n    \"gutter-tooltip.aria-label.warning.plural\": \"warnings\",\n    \"gutter-tooltip.aria-label.info.singular\": \"information message\",\n    \"gutter-tooltip.aria-label.info.plural\": \"information messages\",\n    \"gutter.annotation.aria-label.security\": \"Security finding, read annotations row $0\",\n    \"gutter.annotation.aria-label.hint\": \"Suggestion, read annotations row $0\",\n    \"gutter-tooltip.aria-label.security.singular\": \"security finding\",\n    \"gutter-tooltip.aria-label.security.plural\": \"security findings\",\n    \"gutter-tooltip.aria-label.hint.singular\": \"suggestion\",\n    \"gutter-tooltip.aria-label.hint.plural\": \"suggestions\",\n    \"editor.tooltip.disable-editing\": \"Editing is disabled\"\n};\nexports.defaultEnglishMessages = defaultEnglishMessages;\n\n});\n\nace.define(\"ace/lib/app_config\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\",\"ace/lib/report_error\",\"ace/lib/default_english_messages\"], function(require, exports, module){\"no use strict\";\nvar oop = require(\"./oop\");\nvar EventEmitter = require(\"./event_emitter\").EventEmitter;\nvar reportError = require(\"./report_error\").reportError;\nvar defaultEnglishMessages = require(\"./default_english_messages\").defaultEnglishMessages;\nvar optionsProvider = {\n    setOptions: function (optList) {\n        Object.keys(optList).forEach(function (key) {\n            this.setOption(key, optList[key]);\n        }, this);\n    },\n    getOptions: function (optionNames) {\n        var result = {};\n        if (!optionNames) {\n            var options = this.$options;\n            optionNames = Object.keys(options).filter(function (key) {\n                return !options[key].hidden;\n            });\n        }\n        else if (!Array.isArray(optionNames)) {\n            optionNames = Object.keys(optionNames);\n        }\n        optionNames.forEach(function (key) {\n            result[key] = this.getOption(key);\n        }, this);\n        return result;\n    },\n    setOption: function (name, value) {\n        if (this[\"$\" + name] === value)\n            return;\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].setOption(name, value);\n        if (!opt.handlesSet)\n            this[\"$\" + name] = value;\n        if (opt && opt.set)\n            opt.set.call(this, value);\n    },\n    getOption: function (name) {\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].getOption(name);\n        return opt && opt.get ? opt.get.call(this) : this[\"$\" + name];\n    }\n};\nfunction warn(message) {\n    if (typeof console != \"undefined\" && console.warn)\n        console.warn.apply(console, arguments);\n}\nvar messages;\nvar nlsPlaceholders;\nvar AppConfig = /** @class */ (function () {\n    function AppConfig() {\n        this.$defaultOptions = {};\n        messages = defaultEnglishMessages;\n        nlsPlaceholders = \"dollarSigns\";\n    }\n    AppConfig.prototype.defineOptions = function (obj, path, options) {\n        if (!obj.$options)\n            this.$defaultOptions[path] = obj.$options = {};\n        Object.keys(options).forEach(function (key) {\n            var opt = options[key];\n            if (typeof opt == \"string\")\n                opt = { forwardTo: opt };\n            opt.name || (opt.name = key);\n            obj.$options[opt.name] = opt;\n            if (\"initialValue\" in opt)\n                obj[\"$\" + opt.name] = opt.initialValue;\n        });\n        oop.implement(obj, optionsProvider);\n        return this;\n    };\n    AppConfig.prototype.resetOptions = function (obj) {\n        Object.keys(obj.$options).forEach(function (key) {\n            var opt = obj.$options[key];\n            if (\"value\" in opt)\n                obj.setOption(key, opt.value);\n        });\n    };\n    AppConfig.prototype.setDefaultValue = function (path, name, value) {\n        if (!path) {\n            for (path in this.$defaultOptions)\n                if (this.$defaultOptions[path][name])\n                    break;\n            if (!this.$defaultOptions[path][name])\n                return false;\n        }\n        var opts = this.$defaultOptions[path] || (this.$defaultOptions[path] = {});\n        if (opts[name]) {\n            if (opts.forwardTo)\n                this.setDefaultValue(opts.forwardTo, name, value);\n            else\n                opts[name].value = value;\n        }\n    };\n    AppConfig.prototype.setDefaultValues = function (path, optionHash) {\n        Object.keys(optionHash).forEach(function (key) {\n            this.setDefaultValue(path, key, optionHash[key]);\n        }, this);\n    };\n    AppConfig.prototype.setMessages = function (value, options) {\n        messages = value;\n        if (options && options.placeholders) {\n            nlsPlaceholders = options.placeholders;\n        }\n    };\n    AppConfig.prototype.nls = function (key, defaultString, params) {\n        if (!messages[key]) {\n            warn(\"No message found for the key '\" + key + \"' in messages with id \" + messages.$id + \", trying to find a translation for the default string '\" + defaultString + \"'.\");\n            if (!messages[defaultString]) {\n                warn(\"No message found for the default string '\" + defaultString + \"' in the provided messages. Falling back to the default English message.\");\n            }\n        }\n        var translated = messages[key] || messages[defaultString] || defaultString;\n        if (params) {\n            if (nlsPlaceholders === \"dollarSigns\") {\n                translated = translated.replace(/\\$(\\$|[\\d]+)/g, function (_, dollarMatch) {\n                    if (dollarMatch == \"$\")\n                        return \"$\";\n                    return params[dollarMatch];\n                });\n            }\n            if (nlsPlaceholders === \"curlyBrackets\") {\n                translated = translated.replace(/\\{([^\\}]+)\\}/g, function (_, curlyBracketMatch) {\n                    return params[curlyBracketMatch];\n                });\n            }\n        }\n        return translated;\n    };\n    return AppConfig;\n}());\nAppConfig.prototype.warn = warn;\nAppConfig.prototype.reportError = reportError;\noop.implement(AppConfig.prototype, EventEmitter);\nexports.AppConfig = AppConfig;\n\n});\n\nace.define(\"ace/theme/textmate-css\",[\"require\",\"exports\",\"module\"], function(require, exports, module){module.exports = \".ace-tm .ace_gutter {\\n  background: #f0f0f0;\\n  color: #333;\\n}\\n\\n.ace-tm .ace_print-margin {\\n  width: 1px;\\n  background: #e8e8e8;\\n}\\n\\n.ace-tm .ace_fold {\\n    background-color: #6B72E6;\\n}\\n\\n.ace-tm {\\n  background-color: #FFFFFF;\\n  color: black;\\n}\\n\\n.ace-tm .ace_cursor {\\n  color: black;\\n}\\n        \\n.ace-tm .ace_invisible {\\n  color: rgb(191, 191, 191);\\n}\\n\\n.ace-tm .ace_storage,\\n.ace-tm .ace_keyword {\\n  color: blue;\\n}\\n\\n.ace-tm .ace_constant {\\n  color: rgb(197, 6, 11);\\n}\\n\\n.ace-tm .ace_constant.ace_buildin {\\n  color: rgb(88, 72, 246);\\n}\\n\\n.ace-tm .ace_constant.ace_language {\\n  color: rgb(88, 92, 246);\\n}\\n\\n.ace-tm .ace_constant.ace_library {\\n  color: rgb(6, 150, 14);\\n}\\n\\n.ace-tm .ace_invalid {\\n  background-color: rgba(255, 0, 0, 0.1);\\n  color: red;\\n}\\n\\n.ace-tm .ace_support.ace_function {\\n  color: rgb(60, 76, 114);\\n}\\n\\n.ace-tm .ace_support.ace_constant {\\n  color: rgb(6, 150, 14);\\n}\\n\\n.ace-tm .ace_support.ace_type,\\n.ace-tm .ace_support.ace_class {\\n  color: rgb(109, 121, 222);\\n}\\n\\n.ace-tm .ace_keyword.ace_operator {\\n  color: rgb(104, 118, 135);\\n}\\n\\n.ace-tm .ace_string {\\n  color: rgb(3, 106, 7);\\n}\\n\\n.ace-tm .ace_comment {\\n  color: rgb(76, 136, 107);\\n}\\n\\n.ace-tm .ace_comment.ace_doc {\\n  color: rgb(0, 102, 255);\\n}\\n\\n.ace-tm .ace_comment.ace_doc.ace_tag {\\n  color: rgb(128, 159, 191);\\n}\\n\\n.ace-tm .ace_constant.ace_numeric {\\n  color: rgb(0, 0, 205);\\n}\\n\\n.ace-tm .ace_variable {\\n  color: rgb(49, 132, 149);\\n}\\n\\n.ace-tm .ace_xml-pe {\\n  color: rgb(104, 104, 91);\\n}\\n\\n.ace-tm .ace_entity.ace_name.ace_function {\\n  color: #0000A2;\\n}\\n\\n\\n.ace-tm .ace_heading {\\n  color: rgb(12, 7, 255);\\n}\\n\\n.ace-tm .ace_list {\\n  color:rgb(185, 6, 144);\\n}\\n\\n.ace-tm .ace_meta.ace_tag {\\n  color:rgb(0, 22, 142);\\n}\\n\\n.ace-tm .ace_string.ace_regex {\\n  color: rgb(255, 0, 0)\\n}\\n\\n.ace-tm .ace_marker-layer .ace_selection {\\n  background: rgb(181, 213, 255);\\n}\\n.ace-tm.ace_multiselect .ace_selection.ace_start {\\n  box-shadow: 0 0 3px 0px white;\\n}\\n.ace-tm .ace_marker-layer .ace_step {\\n  background: rgb(252, 255, 0);\\n}\\n\\n.ace-tm .ace_marker-layer .ace_stack {\\n  background: rgb(164, 229, 101);\\n}\\n\\n.ace-tm .ace_marker-layer .ace_bracket {\\n  margin: -1px 0 0 -1px;\\n  border: 1px solid rgb(192, 192, 192);\\n}\\n\\n.ace-tm .ace_marker-layer .ace_active-line {\\n  background: rgba(0, 0, 0, 0.07);\\n}\\n\\n.ace-tm .ace_gutter-active-line {\\n    background-color : #dcdcdc;\\n}\\n\\n.ace-tm .ace_marker-layer .ace_selected-word {\\n  background: rgb(250, 250, 255);\\n  border: 1px solid rgb(200, 200, 250);\\n}\\n\\n.ace-tm .ace_indent-guide {\\n  background: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\\\") right repeat-y;\\n}\\n\\n.ace-tm .ace_indent-guide-active {\\n  background: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC\\\") right repeat-y;\\n}\\n\";\n\n});\n\nace.define(\"ace/theme/textmate\",[\"require\",\"exports\",\"module\",\"ace/theme/textmate-css\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nexports.isDark = false;\nexports.cssClass = \"ace-tm\";\nexports.cssText = require(\"./textmate-css\");\nexports.$id = \"ace/theme/textmate\";\nvar dom = require(\"../lib/dom\");\ndom.importCssString(exports.cssText, exports.cssClass, false);\n\n});\n\nace.define(\"ace/config\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/net\",\"ace/lib/dom\",\"ace/lib/app_config\",\"ace/theme/textmate\"], function(require, exports, module){\"no use strict\";\nvar lang = require(\"./lib/lang\");\nvar net = require(\"./lib/net\");\nvar dom = require(\"./lib/dom\");\nvar AppConfig = require(\"./lib/app_config\").AppConfig;\nmodule.exports = exports = new AppConfig();\nvar options = {\n    packaged: false,\n    workerPath: null,\n    modePath: null,\n    themePath: null,\n    basePath: \"\",\n    suffix: \".js\",\n    $moduleUrls: {},\n    loadWorkerFromBlob: true,\n    sharedPopups: false,\n    useStrictCSP: null\n};\nexports.get = function (key) {\n    if (!options.hasOwnProperty(key))\n        throw new Error(\"Unknown config key: \" + key);\n    return options[key];\n};\nexports.set = function (key, value) {\n    if (options.hasOwnProperty(key))\n        options[key] = value;\n    else if (this.setDefaultValue(\"\", key, value) == false)\n        throw new Error(\"Unknown config key: \" + key);\n    if (key == \"useStrictCSP\")\n        dom.useStrictCSP(value);\n};\nexports.all = function () {\n    return lang.copyObject(options);\n};\nexports.$modes = {};\nexports.moduleUrl = function (name, component) {\n    if (options.$moduleUrls[name])\n        return options.$moduleUrls[name];\n    var parts = name.split(\"/\");\n    component = component || parts[parts.length - 2] || \"\";\n    var sep = component == \"snippets\" ? \"/\" : \"-\";\n    var base = parts[parts.length - 1];\n    if (component == \"worker\" && sep == \"-\") {\n        var re = new RegExp(\"^\" + component + \"[\\\\-_]|[\\\\-_]\" + component + \"$\", \"g\");\n        base = base.replace(re, \"\");\n    }\n    if ((!base || base == component) && parts.length > 1)\n        base = parts[parts.length - 2];\n    var path = options[component + \"Path\"];\n    if (path == null) {\n        path = options.basePath;\n    }\n    else if (sep == \"/\") {\n        component = sep = \"\";\n    }\n    if (path && path.slice(-1) != \"/\")\n        path += \"/\";\n    return path + component + sep + base + this.get(\"suffix\");\n};\nexports.setModuleUrl = function (name, subst) {\n    return options.$moduleUrls[name] = subst;\n};\nvar loader = function (moduleName, cb) {\n    if (moduleName === \"ace/theme/textmate\" || moduleName === \"./theme/textmate\")\n        return cb(null, require(\"./theme/textmate\"));\n    if (customLoader)\n        return customLoader(moduleName, cb);\n    console.error(\"loader is not configured\");\n};\nvar customLoader;\nexports.setLoader = function (cb) {\n    customLoader = cb;\n};\nexports.dynamicModules = Object.create(null);\nexports.$loading = {};\nexports.$loaded = {};\nexports.loadModule = function (moduleId, onLoad) {\n    var loadedModule;\n    if (Array.isArray(moduleId)) {\n        var moduleType = moduleId[0];\n        var moduleName = moduleId[1];\n    }\n    else if (typeof moduleId == \"string\") {\n        var moduleName = moduleId;\n    }\n    var load = function (module) {\n        if (module && !exports.$loading[moduleName])\n            return onLoad && onLoad(module);\n        if (!exports.$loading[moduleName])\n            exports.$loading[moduleName] = [];\n        exports.$loading[moduleName].push(onLoad);\n        if (exports.$loading[moduleName].length > 1)\n            return;\n        var afterLoad = function () {\n            loader(moduleName, function (err, module) {\n                if (module)\n                    exports.$loaded[moduleName] = module;\n                exports._emit(\"load.module\", { name: moduleName, module: module });\n                var listeners = exports.$loading[moduleName];\n                exports.$loading[moduleName] = null;\n                listeners.forEach(function (onLoad) {\n                    onLoad && onLoad(module);\n                });\n            });\n        };\n        if (!exports.get(\"packaged\"))\n            return afterLoad();\n        net.loadScript(exports.moduleUrl(moduleName, moduleType), afterLoad);\n        reportErrorIfPathIsNotConfigured();\n    };\n    if (exports.dynamicModules[moduleName]) {\n        exports.dynamicModules[moduleName]().then(function (module) {\n            if (module.default) {\n                load(module.default);\n            }\n            else {\n                load(module);\n            }\n        });\n    }\n    else {\n        try {\n            loadedModule = this.$require(moduleName);\n        }\n        catch (e) { }\n        load(loadedModule || exports.$loaded[moduleName]);\n    }\n};\nexports.$require = function (moduleName) {\n    if (typeof module[\"require\"] == \"function\") {\n        var req = \"require\";\n        return module[req](moduleName);\n    }\n};\nexports.setModuleLoader = function (moduleName, onLoad) {\n    exports.dynamicModules[moduleName] = onLoad;\n};\nvar reportErrorIfPathIsNotConfigured = function () {\n    if (!options.basePath && !options.workerPath\n        && !options.modePath && !options.themePath\n        && !Object.keys(options.$moduleUrls).length) {\n        console.error(\"Unable to infer path to ace from script src,\", \"use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes\", \"or with webpack use ace/webpack-resolver\");\n        reportErrorIfPathIsNotConfigured = function () { };\n    }\n};\nexports.version = \"1.43.4\";\n\n});\n\nace.define(\"ace/loader_build\",[\"require\",\"exports\",\"module\",\"ace/lib/fixoldbrowsers\",\"ace/config\"], function(require, exports, module) {\n\"use strict\";\n\nrequire(\"./lib/fixoldbrowsers\");\nvar config = require(\"./config\");\nconfig.setLoader(function(moduleName, cb) {\n    require([moduleName], function(module) {\n        cb(null, module);\n    });\n});\n\nvar global = (function() {\n    return this || typeof window != \"undefined\" && window;\n})();\n\nmodule.exports = function(ace) {\n    config.init = init;\n    config.$require = require;\n    ace.require = require;\n\n    if (typeof define === \"function\")\n        ace.define = define;\n};\ninit(true);function init(packaged) {\n\n    if (!global || !global.document)\n        return;\n    \n    config.set(\"packaged\", packaged || require.packaged || module.packaged || (global.define && define.packaged));\n\n    var scriptOptions = {};\n    var scriptUrl = \"\";\n    var currentScript = (document.currentScript || document._currentScript ); // native or polyfill\n    var currentDocument = currentScript && currentScript.ownerDocument || document;\n    \n    if (currentScript && currentScript.src) {\n        scriptUrl = currentScript.src.split(/[?#]/)[0].split(\"/\").slice(0, -1).join(\"/\") || \"\";\n    }\n    \n    var scripts = currentDocument.getElementsByTagName(\"script\");\n    for (var i=0; i<scripts.length; i++) {\n        var script = scripts[i];\n\n        var src = script.src || script.getAttribute(\"src\");\n        if (!src)\n            continue;\n\n        var attributes = script.attributes;\n        for (var j=0, l=attributes.length; j < l; j++) {\n            var attr = attributes[j];\n            if (attr.name.indexOf(\"data-ace-\") === 0) {\n                scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/, \"\"))] = attr.value;\n            }\n        }\n\n        var m = src.match(/^(.*)\\/ace([\\-.]\\w+)?\\.js(\\?|$)/);\n        if (m)\n            scriptUrl = m[1];\n    }\n\n    if (scriptUrl) {\n        scriptOptions.base = scriptOptions.base || scriptUrl;\n        scriptOptions.packaged = true;\n    }\n\n    scriptOptions.basePath = scriptOptions.base;\n    scriptOptions.workerPath = scriptOptions.workerPath || scriptOptions.base;\n    scriptOptions.modePath = scriptOptions.modePath || scriptOptions.base;\n    scriptOptions.themePath = scriptOptions.themePath || scriptOptions.base;\n    delete scriptOptions.base;\n\n    for (var key in scriptOptions)\n        if (typeof scriptOptions[key] !== \"undefined\")\n            config.set(key, scriptOptions[key]);\n}\n\nfunction deHyphenate(str) {\n    return str.replace(/-(.)/g, function(m, m1) { return m1.toUpperCase(); });\n}\n});\n\nace.define(\"ace/range\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar Range = /** @class */ (function () {\n    function Range(startRow, startColumn, endRow, endColumn) {\n        this.start = {\n            row: startRow,\n            column: startColumn\n        };\n        this.end = {\n            row: endRow,\n            column: endColumn\n        };\n    }\n    Range.prototype.isEqual = function (range) {\n        return this.start.row === range.start.row &&\n            this.end.row === range.end.row &&\n            this.start.column === range.start.column &&\n            this.end.column === range.end.column;\n    };\n    Range.prototype.toString = function () {\n        return (\"Range: [\" + this.start.row + \"/\" + this.start.column +\n            \"] -> [\" + this.end.row + \"/\" + this.end.column + \"]\");\n    };\n    Range.prototype.contains = function (row, column) {\n        return this.compare(row, column) == 0;\n    };\n    Range.prototype.compareRange = function (range) {\n        var cmp, end = range.end, start = range.start;\n        cmp = this.compare(end.row, end.column);\n        if (cmp == 1) {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == 1) {\n                return 2;\n            }\n            else if (cmp == 0) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        }\n        else if (cmp == -1) {\n            return -2;\n        }\n        else {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == -1) {\n                return -1;\n            }\n            else if (cmp == 1) {\n                return 42;\n            }\n            else {\n                return 0;\n            }\n        }\n    };\n    Range.prototype.comparePoint = function (p) {\n        return this.compare(p.row, p.column);\n    };\n    Range.prototype.containsRange = function (range) {\n        return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;\n    };\n    Range.prototype.intersects = function (range) {\n        var cmp = this.compareRange(range);\n        return (cmp == -1 || cmp == 0 || cmp == 1);\n    };\n    Range.prototype.isEnd = function (row, column) {\n        return this.end.row == row && this.end.column == column;\n    };\n    Range.prototype.isStart = function (row, column) {\n        return this.start.row == row && this.start.column == column;\n    };\n    Range.prototype.setStart = function (row, column) {\n        if (typeof row == \"object\") {\n            this.start.column = row.column;\n            this.start.row = row.row;\n        }\n        else {\n            this.start.row = row;\n            this.start.column = column;\n        }\n    };\n    Range.prototype.setEnd = function (row, column) {\n        if (typeof row == \"object\") {\n            this.end.column = row.column;\n            this.end.row = row.row;\n        }\n        else {\n            this.end.row = row;\n            this.end.column = column;\n        }\n    };\n    Range.prototype.inside = function (row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column) || this.isStart(row, column)) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    Range.prototype.insideStart = function (row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column)) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    Range.prototype.insideEnd = function (row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isStart(row, column)) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    Range.prototype.compare = function (row, column) {\n        if (!this.isMultiLine()) {\n            if (row === this.start.row) {\n                return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);\n            }\n        }\n        if (row < this.start.row)\n            return -1;\n        if (row > this.end.row)\n            return 1;\n        if (this.start.row === row)\n            return column >= this.start.column ? 0 : -1;\n        if (this.end.row === row)\n            return column <= this.end.column ? 0 : 1;\n        return 0;\n    };\n    Range.prototype.compareStart = function (row, column) {\n        if (this.start.row == row && this.start.column == column) {\n            return -1;\n        }\n        else {\n            return this.compare(row, column);\n        }\n    };\n    Range.prototype.compareEnd = function (row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        }\n        else {\n            return this.compare(row, column);\n        }\n    };\n    Range.prototype.compareInside = function (row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        }\n        else if (this.start.row == row && this.start.column == column) {\n            return -1;\n        }\n        else {\n            return this.compare(row, column);\n        }\n    };\n    Range.prototype.clipRows = function (firstRow, lastRow) {\n        if (this.end.row > lastRow)\n            var end = { row: lastRow + 1, column: 0 };\n        else if (this.end.row < firstRow)\n            var end = { row: firstRow, column: 0 };\n        if (this.start.row > lastRow)\n            var start = { row: lastRow + 1, column: 0 };\n        else if (this.start.row < firstRow)\n            var start = { row: firstRow, column: 0 };\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n    Range.prototype.extend = function (row, column) {\n        var cmp = this.compare(row, column);\n        if (cmp == 0)\n            return this;\n        else if (cmp == -1)\n            var start = { row: row, column: column };\n        else\n            var end = { row: row, column: column };\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n    Range.prototype.isEmpty = function () {\n        return (this.start.row === this.end.row && this.start.column === this.end.column);\n    };\n    Range.prototype.isMultiLine = function () {\n        return (this.start.row !== this.end.row);\n    };\n    Range.prototype.clone = function () {\n        return Range.fromPoints(this.start, this.end);\n    };\n    Range.prototype.collapseRows = function () {\n        if (this.end.column == 0)\n            return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0);\n        else\n            return new Range(this.start.row, 0, this.end.row, 0);\n    };\n    Range.prototype.toScreenRange = function (session) {\n        var screenPosStart = session.documentToScreenPosition(this.start);\n        var screenPosEnd = session.documentToScreenPosition(this.end);\n        return new Range(screenPosStart.row, screenPosStart.column, screenPosEnd.row, screenPosEnd.column);\n    };\n    Range.prototype.moveBy = function (row, column) {\n        this.start.row += row;\n        this.start.column += column;\n        this.end.row += row;\n        this.end.column += column;\n    };\n    return Range;\n}());\nRange.fromPoints = function (start, end) {\n    return new Range(start.row, start.column, end.row, end.column);\n};\nRange.comparePoints = function (p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\nexports.Range = Range;\n\n});\n\nace.define(\"ace/lib/keys\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./oop\");\nvar Keys = {\n    MODIFIER_KEYS: {\n        16: 'Shift', 17: 'Ctrl', 18: 'Alt', 224: 'Meta',\n        91: 'MetaLeft', 92: 'MetaRight', 93: 'ContextMenu'\n    },\n    KEY_MODS: {\n        \"ctrl\": 1, \"alt\": 2, \"option\": 2, \"shift\": 4,\n        \"super\": 8, \"meta\": 8, \"command\": 8, \"cmd\": 8,\n        \"control\": 1\n    },\n    FUNCTION_KEYS: {\n        8: \"Backspace\",\n        9: \"Tab\",\n        13: \"Return\",\n        19: \"Pause\",\n        27: \"Esc\",\n        32: \"Space\",\n        33: \"PageUp\",\n        34: \"PageDown\",\n        35: \"End\",\n        36: \"Home\",\n        37: \"Left\",\n        38: \"Up\",\n        39: \"Right\",\n        40: \"Down\",\n        44: \"Print\",\n        45: \"Insert\",\n        46: \"Delete\",\n        '-13': \"NumpadEnter\",\n        144: \"Numlock\",\n        145: \"Scrolllock\"\n    },\n    PRINTABLE_KEYS: {\n        32: ' ', 59: ';', 61: '=', 107: '+', 109: '-', 110: '.',\n        186: ';', 187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`',\n        219: '[', 220: '\\\\', 221: ']', 222: \"'\", 111: '/', 106: '*'\n    }\n};\nvar codeToKeyCode = {\n    Command: 224,\n    Backspace: 8,\n    Tab: 9,\n    Return: 13,\n    Enter: 13,\n    Pause: 19,\n    Escape: 27,\n    PageUp: 33,\n    PageDown: 34,\n    End: 35,\n    Home: 36,\n    Insert: 45,\n    Delete: 46,\n    ArrowLeft: 37,\n    ArrowUp: 38,\n    ArrowRight: 39,\n    ArrowDown: 40,\n    Backquote: 192,\n    Minus: 189,\n    Equal: 187,\n    BracketLeft: 219,\n    Backslash: 220,\n    BracketRight: 221,\n    Semicolon: 186,\n    Quote: 222,\n    Comma: 188,\n    Period: 190,\n    Slash: 191,\n    Space: 32,\n    NumpadAdd: 107,\n    NumpadDecimal: 110,\n    NumpadSubtract: 109,\n    NumpadDivide: 111,\n    NumpadMultiply: 106\n};\nfor (var i = 0; i < 10; i++) {\n    codeToKeyCode[\"Digit\" + i] = 48 + i;\n    codeToKeyCode[\"Numpad\" + i] = 96 + i;\n    Keys.PRINTABLE_KEYS[48 + i] = \"\" + i;\n    Keys.FUNCTION_KEYS[96 + i] = \"Numpad\" + i;\n}\nfor (var i = 65; i < 91; i++) {\n    var chr = String.fromCharCode(i + 32);\n    codeToKeyCode[\"Key\" + chr.toUpperCase()] = i;\n    Keys.PRINTABLE_KEYS[i] = chr;\n}\nfor (var i = 1; i < 13; i++) {\n    codeToKeyCode[\"F\" + i] = 111 + i;\n    Keys.FUNCTION_KEYS[111 + i] = \"F\" + i;\n}\nvar modifiers = {\n    Shift: 16,\n    Control: 17,\n    Alt: 18,\n    Meta: 224\n};\nfor (var mod in modifiers) {\n    codeToKeyCode[mod] = codeToKeyCode[mod + \"Left\"]\n        = codeToKeyCode[mod + \"Right\"] = modifiers[mod];\n}\nexports.$codeToKeyCode = codeToKeyCode;\nKeys.PRINTABLE_KEYS[173] = '-';\nfor (var j in Keys.FUNCTION_KEYS) {\n    var name = Keys.FUNCTION_KEYS[j].toLowerCase();\n    Keys[name] = parseInt(j, 10);\n}\nfor (var j in Keys.PRINTABLE_KEYS) {\n    var name = Keys.PRINTABLE_KEYS[j].toLowerCase();\n    Keys[name] = parseInt(j, 10);\n}\noop.mixin(Keys, Keys.MODIFIER_KEYS);\noop.mixin(Keys, Keys.PRINTABLE_KEYS);\noop.mixin(Keys, Keys.FUNCTION_KEYS);\nKeys.enter = Keys[\"return\"];\nKeys.escape = Keys.esc;\nKeys.del = Keys[\"delete\"];\n(function () {\n    var mods = [\"cmd\", \"ctrl\", \"alt\", \"shift\"];\n    for (var i = Math.pow(2, mods.length); i--;) {\n        Keys.KEY_MODS[i] = mods.filter(function (x) {\n            return i & Keys.KEY_MODS[x];\n        }).join(\"-\") + \"-\";\n    }\n})();\nKeys.KEY_MODS[0] = \"\";\nKeys.KEY_MODS[-1] = \"input-\";\noop.mixin(exports, Keys);\nexports.default = exports;\nexports.keyCodeToString = function (keyCode) {\n    var keyString = Keys[keyCode];\n    if (typeof keyString != \"string\")\n        keyString = String.fromCharCode(keyCode);\n    return keyString.toLowerCase();\n};\n\n});\n\nace.define(\"ace/lib/event\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\"; var keys = require(\"./keys\");\nvar useragent = require(\"./useragent\");\nvar pressedKeys = null;\nvar ts = 0;\nvar activeListenerOptions;\nfunction detectListenerOptionsSupport() {\n    activeListenerOptions = false;\n    try {\n        document.createComment(\"\").addEventListener(\"test\", function () { }, {\n            get passive() {\n                activeListenerOptions = { passive: false };\n                return true;\n            }\n        });\n    }\n    catch (e) { }\n}\nfunction getListenerOptions() {\n    if (activeListenerOptions == undefined)\n        detectListenerOptionsSupport();\n    return activeListenerOptions;\n}\nfunction EventListener(elem, type, callback) {\n    this.elem = elem;\n    this.type = type;\n    this.callback = callback;\n}\nEventListener.prototype.destroy = function () {\n    removeListener(this.elem, this.type, this.callback);\n    this.elem = this.type = this.callback = undefined;\n};\nvar addListener = exports.addListener = function (elem, type, callback, destroyer) {\n    elem.addEventListener(type, callback, getListenerOptions());\n    if (destroyer)\n        destroyer.$toDestroy.push(new EventListener(elem, type, callback));\n};\nvar removeListener = exports.removeListener = function (elem, type, callback) {\n    elem.removeEventListener(type, callback, getListenerOptions());\n};\nexports.stopEvent = function (e) {\n    exports.stopPropagation(e);\n    exports.preventDefault(e);\n    return false;\n};\nexports.stopPropagation = function (e) {\n    if (e.stopPropagation)\n        e.stopPropagation();\n};\nexports.preventDefault = function (e) {\n    if (e.preventDefault)\n        e.preventDefault();\n};\nexports.getButton = function (e) {\n    if (e.type == \"dblclick\")\n        return 0;\n    if (e.type == \"contextmenu\" || (useragent.isMac && (e.ctrlKey && !e.altKey && !e.shiftKey)))\n        return 2;\n    return e.button;\n};\nexports.capture = function (el, eventHandler, releaseCaptureHandler) {\n    var ownerDocument = el && el.ownerDocument || document;\n    function onMouseUp(e) {\n        eventHandler && eventHandler(e);\n        releaseCaptureHandler && releaseCaptureHandler(e);\n        removeListener(ownerDocument, \"mousemove\", eventHandler);\n        removeListener(ownerDocument, \"mouseup\", onMouseUp);\n        removeListener(ownerDocument, \"dragstart\", onMouseUp);\n    }\n    addListener(ownerDocument, \"mousemove\", eventHandler);\n    addListener(ownerDocument, \"mouseup\", onMouseUp);\n    addListener(ownerDocument, \"dragstart\", onMouseUp);\n    return onMouseUp;\n};\nexports.addMouseWheelListener = function (el, callback, destroyer) {\n    addListener(el, \"wheel\", function (e) {\n        var factor = 0.15;\n        var deltaX = e.deltaX || 0;\n        var deltaY = e.deltaY || 0;\n        switch (e.deltaMode) {\n            case e.DOM_DELTA_PIXEL:\n                e.wheelX = deltaX * factor;\n                e.wheelY = deltaY * factor;\n                break;\n            case e.DOM_DELTA_LINE:\n                var linePixels = 15;\n                e.wheelX = deltaX * linePixels;\n                e.wheelY = deltaY * linePixels;\n                break;\n            case e.DOM_DELTA_PAGE:\n                var pagePixels = 150;\n                e.wheelX = deltaX * pagePixels;\n                e.wheelY = deltaY * pagePixels;\n                break;\n        }\n        callback(e);\n    }, destroyer);\n};\nexports.addMultiMouseDownListener = function (elements, timeouts, eventHandler, callbackName, destroyer) {\n    var clicks = 0;\n    var startX, startY, timer;\n    var eventNames = {\n        2: \"dblclick\",\n        3: \"tripleclick\",\n        4: \"quadclick\"\n    };\n    function onMousedown(e) {\n        if (exports.getButton(e) !== 0) {\n            clicks = 0;\n        }\n        else if (e.detail > 1) {\n            clicks++;\n            if (clicks > 4)\n                clicks = 1;\n        }\n        else {\n            clicks = 1;\n        }\n        if (useragent.isIE) {\n            var isNewClick = Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5;\n            if (!timer || isNewClick)\n                clicks = 1;\n            if (timer)\n                clearTimeout(timer);\n            timer = setTimeout(function () { timer = null; }, timeouts[clicks - 1] || 600);\n            if (clicks == 1) {\n                startX = e.clientX;\n                startY = e.clientY;\n            }\n        }\n        e._clicks = clicks;\n        eventHandler[callbackName](\"mousedown\", e);\n        if (clicks > 4)\n            clicks = 0;\n        else if (clicks > 1)\n            return eventHandler[callbackName](eventNames[clicks], e);\n    }\n    if (!Array.isArray(elements))\n        elements = [elements];\n    elements.forEach(function (el) {\n        addListener(el, \"mousedown\", onMousedown, destroyer);\n    });\n};\nfunction getModifierHash(e) {\n    return 0 | (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0);\n}\nexports.getModifierString = function (e) {\n    return keys.KEY_MODS[getModifierHash(e)];\n};\nfunction normalizeCommandKeys(callback, e, keyCode) {\n    var hashId = getModifierHash(e);\n    if (!keyCode && e.code) {\n        keyCode = keys.$codeToKeyCode[e.code] || keyCode;\n    }\n    if (!useragent.isMac && pressedKeys) {\n        if (e.getModifierState && (e.getModifierState(\"OS\") || e.getModifierState(\"Win\")))\n            hashId |= 8;\n        if (pressedKeys.altGr) {\n            if ((3 & hashId) != 3)\n                pressedKeys.altGr = 0;\n            else\n                return;\n        }\n        if (keyCode === 18 || keyCode === 17) {\n            var location = e.location;\n            if (keyCode === 17 && location === 1) {\n                if (pressedKeys[keyCode] == 1)\n                    ts = e.timeStamp;\n            }\n            else if (keyCode === 18 && hashId === 3 && location === 2) {\n                var dt = e.timeStamp - ts;\n                if (dt < 50)\n                    pressedKeys.altGr = true;\n            }\n        }\n    }\n    if (keyCode in keys.MODIFIER_KEYS) {\n        keyCode = -1;\n    }\n    if (!hashId && keyCode === 13) {\n        if (e.location === 3) {\n            callback(e, hashId, -keyCode);\n            if (e.defaultPrevented)\n                return;\n        }\n    }\n    if (useragent.isChromeOS && hashId & 8) {\n        callback(e, hashId, keyCode);\n        if (e.defaultPrevented)\n            return;\n        else\n            hashId &= ~8;\n    }\n    if (!hashId && !(keyCode in keys.FUNCTION_KEYS) && !(keyCode in keys.PRINTABLE_KEYS)) {\n        return false;\n    }\n    return callback(e, hashId, keyCode);\n}\nexports.addCommandKeyListener = function (el, callback, destroyer) {\n    var lastDefaultPrevented = null;\n    addListener(el, \"keydown\", function (e) {\n        pressedKeys[e.keyCode] = (pressedKeys[e.keyCode] || 0) + 1;\n        var result = normalizeCommandKeys(callback, e, e.keyCode);\n        lastDefaultPrevented = e.defaultPrevented;\n        return result;\n    }, destroyer);\n    addListener(el, \"keypress\", function (e) {\n        if (lastDefaultPrevented && (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey)) {\n            exports.stopEvent(e);\n            lastDefaultPrevented = null;\n        }\n    }, destroyer);\n    addListener(el, \"keyup\", function (e) {\n        pressedKeys[e.keyCode] = null;\n    }, destroyer);\n    if (!pressedKeys) {\n        resetPressedKeys();\n        addListener(window, \"focus\", resetPressedKeys);\n    }\n};\nfunction resetPressedKeys() {\n    pressedKeys = Object.create(null);\n}\nif (typeof window == \"object\" && window.postMessage && !useragent.isOldIE) {\n    var postMessageId = 1;\n    exports.nextTick = function (callback, win) {\n        win = win || window;\n        var messageName = \"zero-timeout-message-\" + (postMessageId++);\n        var listener = function (e) {\n            if (e.data == messageName) {\n                exports.stopPropagation(e);\n                removeListener(win, \"message\", listener);\n                callback();\n            }\n        };\n        addListener(win, \"message\", listener);\n        win.postMessage(messageName, \"*\");\n    };\n}\nexports.$idleBlocked = false;\nexports.onIdle = function (cb, timeout) {\n    return setTimeout(function handler() {\n        if (!exports.$idleBlocked) {\n            cb();\n        }\n        else {\n            setTimeout(handler, 100);\n        }\n    }, timeout);\n};\nexports.$idleBlockId = null;\nexports.blockIdle = function (delay) {\n    if (exports.$idleBlockId)\n        clearTimeout(exports.$idleBlockId);\n    exports.$idleBlocked = true;\n    exports.$idleBlockId = setTimeout(function () {\n        exports.$idleBlocked = false;\n    }, delay || 100);\n};\nexports.nextFrame = typeof window == \"object\" && (window.requestAnimationFrame\n    || window[\"mozRequestAnimationFrame\"]\n    || window[\"webkitRequestAnimationFrame\"]\n    || window[\"msRequestAnimationFrame\"]\n    || window[\"oRequestAnimationFrame\"]);\nif (exports.nextFrame)\n    exports.nextFrame = exports.nextFrame.bind(window);\nelse\n    exports.nextFrame = function (callback) {\n        setTimeout(callback, 17);\n    };\n\n});\n\nace.define(\"ace/clipboard\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar $cancelT;\nmodule.exports = {\n    lineMode: false,\n    pasteCancelled: function () {\n        if ($cancelT && $cancelT > Date.now() - 50)\n            return true;\n        return $cancelT = false;\n    },\n    cancel: function () {\n        $cancelT = Date.now();\n    }\n};\n\n});\n\nace.define(\"ace/keyboard/textinput\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/config\",\"ace/lib/useragent\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/clipboard\",\"ace/lib/keys\"], function(require, exports, module){\"use strict\";\nvar event = require(\"../lib/event\");\nvar nls = require(\"../config\").nls;\nvar useragent = require(\"../lib/useragent\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar clipboard = require(\"../clipboard\");\nvar BROKEN_SETDATA = useragent.isChrome < 18;\nvar USE_IE_MIME_TYPE = useragent.isIE;\nvar HAS_FOCUS_ARGS = useragent.isChrome > 63;\nvar MAX_LINE_LENGTH = 400;\nvar KEYS = require(\"../lib/keys\");\nvar MODS = KEYS.KEY_MODS;\nvar isIOS = useragent.isIOS;\nvar valueResetRegex = isIOS ? /\\s/ : /\\n/;\nvar isMobile = useragent.isMobile;\nvar TextInput = /** @class */ (function () {\n    function TextInput(parentNode, host) {\n        var _this = this;\n        this.host = host;\n        this.text = dom.createElement(\"textarea\");\n        this.text.className = \"ace_text-input\";\n        this.text.setAttribute(\"wrap\", \"off\");\n        this.text.setAttribute(\"autocomplete\", \"off\");\n        this.text.setAttribute(\"autocorrect\", \"off\");\n        this.text.setAttribute(\"autocapitalize\", \"off\");\n        this.text.setAttribute(\"spellcheck\", \"false\");\n        this.text.style.opacity = \"0\";\n        parentNode.insertBefore(this.text, parentNode.firstChild); this.copied = false;\n        this.pasted = false;\n        this.inComposition = false;\n        this.sendingText = false;\n        this.tempStyle = '';\n        if (!isMobile)\n            this.text.style.fontSize = \"1px\";\n        this.commandMode = false;\n        this.ignoreFocusEvents = false;\n        this.lastValue = \"\";\n        this.lastSelectionStart = 0;\n        this.lastSelectionEnd = 0;\n        this.lastRestoreEnd = 0;\n        this.rowStart = Number.MAX_SAFE_INTEGER;\n        this.rowEnd = Number.MIN_SAFE_INTEGER;\n        this.numberOfExtraLines = 0;\n        try {\n            this.$isFocused = document.activeElement === this.text;\n        }\n        catch (e) {\n        }\n        this.cancelComposition = this.cancelComposition.bind(this);\n        this.setAriaOptions({ role: \"textbox\" });\n        event.addListener(this.text, \"blur\", function (e) {\n            if (_this.ignoreFocusEvents)\n                return;\n            host.onBlur(e);\n            _this.$isFocused = false;\n        }, host);\n        event.addListener(this.text, \"focus\", function (e) {\n            if (_this.ignoreFocusEvents)\n                return;\n            _this.$isFocused = true;\n            if (useragent.isEdge) {\n                try {\n                    if (!document.hasFocus())\n                        return;\n                }\n                catch (e) {\n                }\n            }\n            host.onFocus(e);\n            if (useragent.isEdge)\n                setTimeout(_this.resetSelection.bind(_this));\n            else\n                _this.resetSelection();\n        }, host); this.$focusScroll = false;\n        host.on(\"beforeEndOperation\", function () {\n            var curOp = host.curOp;\n            var commandName = curOp && curOp.command && curOp.command.name;\n            if (commandName == \"insertstring\")\n                return;\n            var isUserAction = commandName && (curOp.docChanged || curOp.selectionChanged);\n            if (_this.inComposition && isUserAction) {\n                _this.lastValue = _this.text.value = \"\";\n                _this.onCompositionEnd();\n            }\n            _this.resetSelection();\n        });\n        host.on(\"changeSelection\", this.setAriaLabel.bind(this));\n        this.resetSelection = isIOS ? this.$resetSelectionIOS : this.$resetSelection;\n        if (this.$isFocused)\n            host.onFocus();\n        this.inputHandler = null;\n        this.afterContextMenu = false;\n        event.addCommandKeyListener(this.text, function (e, hashId, keyCode) {\n            if (_this.inComposition)\n                return;\n            return host.onCommandKey(e, hashId, keyCode);\n        }, host);\n        event.addListener(this.text, \"select\", this.onSelect.bind(this), host);\n        event.addListener(this.text, \"input\", this.onInput.bind(this), host);\n        event.addListener(this.text, \"cut\", this.onCut.bind(this), host);\n        event.addListener(this.text, \"copy\", this.onCopy.bind(this), host);\n        event.addListener(this.text, \"paste\", this.onPaste.bind(this), host);\n        if (!('oncut' in this.text) || !('oncopy' in this.text) || !('onpaste' in this.text)) {\n            event.addListener(parentNode, \"keydown\", function (e) {\n                if ((useragent.isMac && !e.metaKey) || !e.ctrlKey)\n                    return;\n                switch (e.keyCode) {\n                    case 67:\n                        _this.onCopy(e);\n                        break;\n                    case 86:\n                        _this.onPaste(e);\n                        break;\n                    case 88:\n                        _this.onCut(e);\n                        break;\n                }\n            }, host);\n        }\n        this.syncComposition = lang.delayedCall(this.onCompositionUpdate.bind(this), 50).schedule.bind(null, null); //TODO: check this\n        event.addListener(this.text, \"compositionstart\", this.onCompositionStart.bind(this), host);\n        event.addListener(this.text, \"compositionupdate\", this.onCompositionUpdate.bind(this), host);\n        event.addListener(this.text, \"keyup\", this.onKeyup.bind(this), host);\n        event.addListener(this.text, \"keydown\", this.syncComposition.bind(this), host);\n        event.addListener(this.text, \"compositionend\", this.onCompositionEnd.bind(this), host);\n        this.closeTimeout;\n        event.addListener(this.text, \"mouseup\", this.$onContextMenu.bind(this), host);\n        event.addListener(this.text, \"mousedown\", function (e) {\n            e.preventDefault();\n            _this.onContextMenuClose();\n        }, host);\n        event.addListener(host.renderer.scroller, \"contextmenu\", this.$onContextMenu.bind(this), host);\n        event.addListener(this.text, \"contextmenu\", this.$onContextMenu.bind(this), host);\n        if (isIOS)\n            this.addIosSelectionHandler(parentNode, host, this.text);\n    }\n    TextInput.prototype.addIosSelectionHandler = function (parentNode, host, text) {\n        var _this = this;\n        var typingResetTimeout = null;\n        var typing = false;\n        text.addEventListener(\"keydown\", function (e) {\n            if (typingResetTimeout)\n                clearTimeout(typingResetTimeout);\n            typing = true;\n        }, true);\n        text.addEventListener(\"keyup\", function (e) {\n            typingResetTimeout = setTimeout(function () {\n                typing = false;\n            }, 100);\n        }, true);\n        var detectArrowKeys = function (e) {\n            if (document.activeElement !== text)\n                return;\n            if (typing || _this.inComposition || host.$mouseHandler.isMousePressed)\n                return;\n            if (_this.copied) {\n                return;\n            }\n            var selectionStart = text.selectionStart;\n            var selectionEnd = text.selectionEnd;\n            var key = null;\n            var modifier = 0;\n            if (selectionStart == 0) {\n                key = KEYS.up;\n            }\n            else if (selectionStart == 1) {\n                key = KEYS.home;\n            }\n            else if (selectionEnd > _this.lastSelectionEnd && _this.lastValue[selectionEnd] == \"\\n\") {\n                key = KEYS.end;\n            }\n            else if (selectionStart < _this.lastSelectionStart && _this.lastValue[selectionStart - 1] == \" \") {\n                key = KEYS.left;\n                modifier = MODS.option;\n            }\n            else if (selectionStart < _this.lastSelectionStart || (selectionStart == _this.lastSelectionStart\n                && _this.lastSelectionEnd != _this.lastSelectionStart && selectionStart == selectionEnd)) {\n                key = KEYS.left;\n            }\n            else if (selectionEnd > _this.lastSelectionEnd && _this.lastValue.slice(0, selectionEnd).split(\"\\n\").length > 2) {\n                key = KEYS.down;\n            }\n            else if (selectionEnd > _this.lastSelectionEnd && _this.lastValue[selectionEnd - 1] == \" \") {\n                key = KEYS.right;\n                modifier = MODS.option;\n            }\n            else if (selectionEnd > _this.lastSelectionEnd || (selectionEnd == _this.lastSelectionEnd\n                && _this.lastSelectionEnd != _this.lastSelectionStart && selectionStart == selectionEnd)) {\n                key = KEYS.right;\n            }\n            if (selectionStart !== selectionEnd)\n                modifier |= MODS.shift;\n            if (key) {\n                var result = host.onCommandKey({}, modifier, key);\n                if (!result && host.commands) {\n                    key = KEYS.keyCodeToString(key);\n                    var command = host.commands.findKeyCommand(modifier, key);\n                    if (command)\n                        host.execCommand(command);\n                }\n                _this.lastSelectionStart = selectionStart;\n                _this.lastSelectionEnd = selectionEnd;\n                _this.resetSelection(\"\");\n            }\n        };\n        document.addEventListener(\"selectionchange\", detectArrowKeys);\n        host.on(\"destroy\", function () {\n            document.removeEventListener(\"selectionchange\", detectArrowKeys);\n        });\n    };\n    TextInput.prototype.onContextMenuClose = function () {\n        var _this = this;\n        clearTimeout(this.closeTimeout);\n        this.closeTimeout = setTimeout(function () {\n            if (_this.tempStyle) {\n                _this.text.style.cssText = _this.tempStyle;\n                _this.tempStyle = '';\n            }\n            _this.host.renderer.$isMousePressed = false;\n            if (_this.host.renderer.$keepTextAreaAtCursor)\n                _this.host.renderer.$moveTextAreaToCursor();\n        }, 0);\n    };\n    TextInput.prototype.$onContextMenu = function (e) {\n        this.host.textInput.onContextMenu(e);\n        this.onContextMenuClose();\n    };\n    TextInput.prototype.onKeyup = function (e) {\n        if (e.keyCode == 27 && this.text.value.length < this.text.selectionStart) {\n            if (!this.inComposition)\n                this.lastValue = this.text.value;\n            this.lastSelectionStart = this.lastSelectionEnd = -1;\n            this.resetSelection();\n        }\n        this.syncComposition();\n    };\n    TextInput.prototype.cancelComposition = function () {\n        this.ignoreFocusEvents = true;\n        this.text.blur();\n        this.text.focus();\n        this.ignoreFocusEvents = false;\n    };\n    TextInput.prototype.onCompositionStart = function (e) {\n        if (this.inComposition || !this.host.onCompositionStart || this.host.$readOnly)\n            return;\n        this.inComposition = {};\n        if (this.commandMode)\n            return;\n        if (e.data)\n            this.inComposition.useTextareaForIME = false;\n        setTimeout(this.onCompositionUpdate.bind(this), 0);\n        this.host._signal(\"compositionStart\");\n        this.host.on(\"mousedown\", this.cancelComposition); //TODO:\n        var range = this.host.getSelectionRange();\n        range.end.row = range.start.row;\n        range.end.column = range.start.column;\n        this.inComposition.markerRange = range;\n        this.inComposition.selectionStart = this.lastSelectionStart;\n        this.host.onCompositionStart(this.inComposition);\n        if (this.inComposition.useTextareaForIME) {\n            this.lastValue = this.text.value = \"\";\n            this.lastSelectionStart = 0;\n            this.lastSelectionEnd = 0;\n        }\n        else {\n            if (this.text.msGetInputContext)\n                this.inComposition.context = this.text.msGetInputContext();\n            if (this.text.getInputContext)\n                this.inComposition.context = this.text.getInputContext();\n        }\n    };\n    TextInput.prototype.onCompositionUpdate = function () {\n        if (!this.inComposition || !this.host.onCompositionUpdate || this.host.$readOnly)\n            return;\n        if (this.commandMode)\n            return this.cancelComposition();\n        if (this.inComposition.useTextareaForIME) {\n            this.host.onCompositionUpdate(this.text.value);\n        }\n        else {\n            var data = this.text.value;\n            this.sendText(data);\n            if (this.inComposition.markerRange) {\n                if (this.inComposition.context) {\n                    this.inComposition.markerRange.start.column = this.inComposition.selectionStart = this.inComposition.context.compositionStartOffset;\n                }\n                this.inComposition.markerRange.end.column = this.inComposition.markerRange.start.column\n                    + this.lastSelectionEnd - this.inComposition.selectionStart + this.lastRestoreEnd;\n            }\n        }\n    };\n    TextInput.prototype.onCompositionEnd = function (e) {\n        if (!this.host.onCompositionEnd || this.host.$readOnly)\n            return;\n        this.inComposition = false;\n        this.host.onCompositionEnd();\n        this.host.off(\"mousedown\", this.cancelComposition);\n        if (e)\n            this.onInput();\n    };\n    TextInput.prototype.onCut = function (e) {\n        this.doCopy(e, true);\n    };\n    TextInput.prototype.onCopy = function (e) {\n        this.doCopy(e, false);\n    };\n    TextInput.prototype.onPaste = function (e) {\n        var data = this.handleClipboardData(e);\n        if (clipboard.pasteCancelled())\n            return;\n        if (typeof data == \"string\") {\n            if (data)\n                this.host.onPaste(data, e);\n            if (useragent.isIE)\n                setTimeout(this.resetSelection);\n            event.preventDefault(e);\n        }\n        else {\n            this.text.value = \"\";\n            this.pasted = true;\n        }\n    };\n    TextInput.prototype.doCopy = function (e, isCut) {\n        var _this = this;\n        var data = this.host.getCopyText();\n        if (!data)\n            return event.preventDefault(e);\n        if (this.handleClipboardData(e, data)) {\n            if (isIOS) {\n                this.resetSelection(data);\n                this.copied = data;\n                setTimeout(function () {\n                    _this.copied = false;\n                }, 10);\n            }\n            isCut ? this.host.onCut() : this.host.onCopy();\n            event.preventDefault(e);\n        }\n        else {\n            this.copied = true;\n            this.text.value = data;\n            this.text.select();\n            setTimeout(function () {\n                _this.copied = false;\n                _this.resetSelection();\n                isCut ? _this.host.onCut() : _this.host.onCopy();\n            });\n        }\n    };\n    TextInput.prototype.handleClipboardData = function (e, data, forceIEMime) {\n        var clipboardData = e.clipboardData || window[\"clipboardData\"];\n        if (!clipboardData || BROKEN_SETDATA)\n            return;\n        var mime = USE_IE_MIME_TYPE || forceIEMime ? \"Text\" : \"text/plain\";\n        try {\n            if (data) {\n                return clipboardData.setData(mime, data) !== false;\n            }\n            else {\n                return clipboardData.getData(mime);\n            }\n        }\n        catch (e) {\n            if (!forceIEMime)\n                return this.handleClipboardData(e, data, true);\n        }\n    };\n    TextInput.prototype.onInput = function (e) {\n        if (this.inComposition)\n            return this.onCompositionUpdate();\n        if (e && e.inputType) {\n            if (e.inputType == \"historyUndo\")\n                return this.host.execCommand(\"undo\");\n            if (e.inputType == \"historyRedo\")\n                return this.host.execCommand(\"redo\");\n        }\n        var data = this.text.value;\n        var inserted = this.sendText(data, true);\n        if (data.length > MAX_LINE_LENGTH + 100 || valueResetRegex.test(inserted) || isMobile && this.lastSelectionStart\n            < 1 && this.lastSelectionStart == this.lastSelectionEnd) {\n            this.resetSelection();\n        }\n    };\n    TextInput.prototype.sendText = function (value, fromInput) {\n        if (this.afterContextMenu)\n            this.afterContextMenu = false;\n        if (this.pasted) {\n            this.resetSelection();\n            if (value)\n                this.host.onPaste(value);\n            this.pasted = false;\n            return \"\";\n        }\n        else {\n            var selectionStart = this.text.selectionStart;\n            var selectionEnd = this.text.selectionEnd;\n            var extendLeft = this.lastSelectionStart;\n            var extendRight = this.lastValue.length - this.lastSelectionEnd;\n            var inserted = value;\n            var restoreStart = value.length - selectionStart;\n            var restoreEnd = value.length - selectionEnd;\n            var i = 0;\n            while (extendLeft > 0 && this.lastValue[i] == value[i]) {\n                i++;\n                extendLeft--;\n            }\n            inserted = inserted.slice(i);\n            i = 1;\n            while (extendRight > 0 && this.lastValue.length - i > this.lastSelectionStart - 1\n                && this.lastValue[this.lastValue.length - i] == value[value.length - i]) {\n                i++;\n                extendRight--;\n            }\n            restoreStart -= i - 1;\n            restoreEnd -= i - 1;\n            var endIndex = inserted.length - i + 1;\n            if (endIndex < 0) {\n                extendLeft = -endIndex;\n                endIndex = 0;\n            }\n            inserted = inserted.slice(0, endIndex);\n            if (!fromInput && !inserted && !restoreStart && !extendLeft && !extendRight && !restoreEnd)\n                return \"\";\n            this.sendingText = true;\n            var shouldReset = false;\n            if (useragent.isAndroid && inserted == \". \") {\n                inserted = \"  \";\n                shouldReset = true;\n            }\n            if (inserted && !extendLeft && !extendRight && !restoreStart && !restoreEnd || this.commandMode) {\n                this.host.onTextInput(inserted);\n            }\n            else {\n                this.host.onTextInput(inserted, {\n                    extendLeft: extendLeft,\n                    extendRight: extendRight,\n                    restoreStart: restoreStart,\n                    restoreEnd: restoreEnd\n                });\n            }\n            this.sendingText = false;\n            this.lastValue = value;\n            this.lastSelectionStart = selectionStart;\n            this.lastSelectionEnd = selectionEnd;\n            this.lastRestoreEnd = restoreEnd;\n            return shouldReset ? \"\\n\" : inserted;\n        }\n    };\n    TextInput.prototype.onSelect = function (e) {\n        var _this = this;\n        if (this.inComposition)\n            return;\n        var isAllSelected = function (text) {\n            return text.selectionStart === 0 && text.selectionEnd >= _this.lastValue.length && text.value\n                === _this.lastValue && _this.lastValue && text.selectionEnd !== _this.lastSelectionEnd;\n        };\n        if (this.copied) {\n            this.copied = false;\n        }\n        else if (isAllSelected(this.text)) {\n            this.host.selectAll();\n            this.resetSelection();\n        }\n        else if (isMobile && this.text.selectionStart != this.lastSelectionStart) {\n            this.resetSelection();\n        }\n    };\n    TextInput.prototype.$resetSelectionIOS = function (value) {\n        if (!this.$isFocused || (this.copied && !value) || this.sendingText)\n            return;\n        if (!value)\n            value = \"\";\n        var newValue = \"\\n ab\" + value + \"cde fg\\n\";\n        if (newValue != this.text.value)\n            this.text.value = this.lastValue = newValue;\n        var selectionStart = 4;\n        var selectionEnd = 4 + (value.length || (this.host.selection.isEmpty() ? 0 : 1));\n        if (this.lastSelectionStart != selectionStart || this.lastSelectionEnd != selectionEnd) {\n            this.text.setSelectionRange(selectionStart, selectionEnd);\n        }\n        this.lastSelectionStart = selectionStart;\n        this.lastSelectionEnd = selectionEnd;\n    };\n    TextInput.prototype.$resetSelection = function () {\n        var _this = this;\n        if (this.inComposition || this.sendingText)\n            return;\n        if (!this.$isFocused && !this.afterContextMenu)\n            return;\n        this.inComposition = true;\n        var selectionStart = 0;\n        var selectionEnd = 0;\n        var line = \"\";\n        var positionToSelection = function (row, column) {\n            var selection = column;\n            for (var i = 1; i <= row - _this.rowStart && i < 2 * _this.numberOfExtraLines + 1; i++) {\n                selection += _this.host.session.getLine(row - i).length + 1;\n            }\n            return selection;\n        };\n        if (this.host.session) {\n            var selection = this.host.selection;\n            var range = selection.getRange();\n            var row = selection.cursor.row;\n            if (row === this.rowEnd + 1) {\n                this.rowStart = this.rowEnd + 1;\n                this.rowEnd = this.rowStart + 2 * this.numberOfExtraLines;\n            }\n            else if (row === this.rowStart - 1) {\n                this.rowEnd = this.rowStart - 1;\n                this.rowStart = this.rowEnd - 2 * this.numberOfExtraLines;\n            }\n            else if (row < this.rowStart - 1 || row > this.rowEnd + 1) {\n                this.rowStart = row > this.numberOfExtraLines ? row - this.numberOfExtraLines : 0;\n                this.rowEnd = row > this.numberOfExtraLines ? row + this.numberOfExtraLines : 2\n                    * this.numberOfExtraLines;\n            }\n            var lines = [];\n            for (var i = this.rowStart; i <= this.rowEnd; i++) {\n                lines.push(this.host.session.getLine(i));\n            }\n            line = lines.join('\\n');\n            selectionStart = positionToSelection(range.start.row, range.start.column);\n            selectionEnd = positionToSelection(range.end.row, range.end.column);\n            if (range.start.row < this.rowStart) {\n                var prevLine = this.host.session.getLine(this.rowStart - 1);\n                selectionStart = range.start.row < this.rowStart - 1 ? 0 : selectionStart;\n                selectionEnd += prevLine.length + 1;\n                line = prevLine + \"\\n\" + line;\n            }\n            else if (range.end.row > this.rowEnd) {\n                var nextLine = this.host.session.getLine(this.rowEnd + 1);\n                selectionEnd = range.end.row > this.rowEnd + 1 ? nextLine.length : range.end.column;\n                selectionEnd += line.length + 1;\n                line = line + \"\\n\" + nextLine;\n            }\n            else if (isMobile && row > 0) {\n                line = \"\\n\" + line;\n                selectionEnd += 1;\n                selectionStart += 1;\n            }\n            if (line.length > MAX_LINE_LENGTH) {\n                if (selectionStart < MAX_LINE_LENGTH && selectionEnd < MAX_LINE_LENGTH) {\n                    line = line.slice(0, MAX_LINE_LENGTH);\n                }\n                else {\n                    line = \"\\n\";\n                    if (selectionStart == selectionEnd) {\n                        selectionStart = selectionEnd = 0;\n                    }\n                    else {\n                        selectionStart = 0;\n                        selectionEnd = 1;\n                    }\n                }\n            }\n            var newValue = line + \"\\n\\n\";\n            if (newValue != this.lastValue) {\n                this.text.value = this.lastValue = newValue;\n                this.lastSelectionStart = this.lastSelectionEnd = newValue.length;\n            }\n        }\n        if (this.afterContextMenu) {\n            this.lastSelectionStart = this.text.selectionStart;\n            this.lastSelectionEnd = this.text.selectionEnd;\n        }\n        if (this.lastSelectionEnd != selectionEnd || this.lastSelectionStart != selectionStart || this.text.selectionEnd\n            != this.lastSelectionEnd // on ie edge selectionEnd changes silently after the initialization\n        ) {\n            try {\n                this.text.setSelectionRange(selectionStart, selectionEnd);\n                this.lastSelectionStart = selectionStart;\n                this.lastSelectionEnd = selectionEnd;\n            }\n            catch (e) {\n            }\n        }\n        this.inComposition = false;\n    };\n    TextInput.prototype.setHost = function (newHost) {\n        this.host = newHost;\n    };\n    TextInput.prototype.setNumberOfExtraLines = function (number) {\n        this.rowStart = Number.MAX_SAFE_INTEGER;\n        this.rowEnd = Number.MIN_SAFE_INTEGER;\n        if (number < 0) {\n            this.numberOfExtraLines = 0;\n            return;\n        }\n        this.numberOfExtraLines = number;\n    };\n    TextInput.prototype.setAriaLabel = function () {\n        var ariaLabel = \"\";\n        if (this.host.$textInputAriaLabel) {\n            ariaLabel += \"\".concat(this.host.$textInputAriaLabel, \", \");\n        }\n        if (this.host.session) {\n            var row = this.host.session.selection.cursor.row;\n            ariaLabel += nls(\"text-input.aria-label\", \"Cursor at row $0\", [row + 1]);\n        }\n        this.text.setAttribute(\"aria-label\", ariaLabel);\n    };\n    TextInput.prototype.setAriaOptions = function (options) {\n        if (options.activeDescendant) {\n            this.text.setAttribute(\"aria-haspopup\", \"true\");\n            this.text.setAttribute(\"aria-autocomplete\", options.inline ? \"both\" : \"list\");\n            this.text.setAttribute(\"aria-activedescendant\", options.activeDescendant);\n        }\n        else {\n            this.text.setAttribute(\"aria-haspopup\", \"false\");\n            this.text.setAttribute(\"aria-autocomplete\", \"both\");\n            this.text.removeAttribute(\"aria-activedescendant\");\n        }\n        if (options.role) {\n            this.text.setAttribute(\"role\", options.role);\n        }\n        if (options.setLabel) {\n            this.text.setAttribute(\"aria-roledescription\", nls(\"text-input.aria-roledescription\", \"editor\"));\n            this.setAriaLabel();\n        }\n    };\n    TextInput.prototype.focus = function () {\n        var _this = this;\n        this.setAriaOptions({\n            setLabel: this.host.renderer.enableKeyboardAccessibility\n        });\n        if (this.tempStyle || HAS_FOCUS_ARGS || this.$focusScroll == \"browser\")\n            return this.text.focus({ preventScroll: true });\n        var top = this.text.style.top;\n        this.text.style.position = \"fixed\";\n        this.text.style.top = \"0px\";\n        try {\n            var isTransformed = this.text.getBoundingClientRect().top != 0;\n        }\n        catch (e) {\n            return;\n        }\n        var ancestors = [];\n        if (isTransformed) {\n            var t = this.text.parentElement;\n            while (t && t.nodeType == 1) {\n                ancestors.push(t);\n                t.setAttribute(\"ace_nocontext\", \"true\");\n                if (!t.parentElement && t.getRootNode)\n                    t = t.getRootNode()[\"host\"];\n                else\n                    t = t.parentElement;\n            }\n        }\n        this.text.focus({ preventScroll: true });\n        if (isTransformed) {\n            ancestors.forEach(function (p) {\n                p.removeAttribute(\"ace_nocontext\");\n            });\n        }\n        setTimeout(function () {\n            _this.text.style.position = \"\";\n            if (_this.text.style.top == \"0px\")\n                _this.text.style.top = top;\n        }, 0);\n    };\n    TextInput.prototype.blur = function () {\n        this.text.blur();\n    };\n    TextInput.prototype.isFocused = function () {\n        return this.$isFocused;\n    };\n    TextInput.prototype.setInputHandler = function (cb) {\n        this.inputHandler = cb;\n    };\n    TextInput.prototype.getInputHandler = function () {\n        return this.inputHandler;\n    };\n    TextInput.prototype.getElement = function () {\n        return this.text;\n    };\n    TextInput.prototype.setCommandMode = function (value) {\n        this.commandMode = value;\n        this.text.readOnly = false;\n    };\n    TextInput.prototype.setReadOnly = function (readOnly) {\n        if (!this.commandMode)\n            this.text.readOnly = readOnly;\n    };\n    TextInput.prototype.setCopyWithEmptySelection = function (value) {\n    };\n    TextInput.prototype.onContextMenu = function (e) {\n        this.afterContextMenu = true;\n        this.resetSelection();\n        this.host._emit(\"nativecontextmenu\", {\n            target: this.host,\n            domEvent: e\n        });\n        this.moveToMouse(e, true);\n    };\n    TextInput.prototype.moveToMouse = function (e, bringToFront) {\n        var _this = this;\n        if (!this.tempStyle)\n            this.tempStyle = this.text.style.cssText;\n        this.text.style.cssText = (bringToFront ? \"z-index:100000;\" : \"\") + (useragent.isIE ? \"opacity:0.1;\" : \"\")\n            + \"text-indent: -\" + (this.lastSelectionStart + this.lastSelectionEnd) * this.host.renderer.characterWidth\n            * 0.5 + \"px;\";\n        var rect = this.host.container.getBoundingClientRect();\n        var style = dom.computedStyle(this.host.container);\n        var top = rect.top + (parseInt(style.borderTopWidth) || 0);\n        var left = rect.left + (parseInt(style.borderLeftWidth) || 0);\n        var maxTop = rect.bottom - top - this.text.clientHeight - 2;\n        var move = function (e) {\n            dom.translate(_this.text, e.clientX - left - 2, Math.min(e.clientY - top - 2, maxTop));\n        };\n        move(e);\n        if (e.type != \"mousedown\")\n            return;\n        this.host.renderer.$isMousePressed = true;\n        clearTimeout(this.closeTimeout);\n        if (useragent.isWin)\n            event.capture(this.host.container, move, this.onContextMenuClose.bind(this));\n    };\n    TextInput.prototype.destroy = function () {\n        if (this.text.parentElement)\n            this.text.parentElement.removeChild(this.text);\n    };\n    return TextInput;\n}());\nexports.TextInput = TextInput;\nexports.$setUserAgentForTests = function (_isMobile, _isIOS) {\n    isMobile = _isMobile;\n    isIOS = _isIOS;\n};\n\n});\n\nace.define(\"ace/mouse/default_handlers\",[\"require\",\"exports\",\"module\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar useragent = require(\"../lib/useragent\");\nvar DRAG_OFFSET = 0; // pixels\nvar SCROLL_COOLDOWN_T = 550; // milliseconds\nvar DefaultHandlers = /** @class */ (function () {\n    function DefaultHandlers(mouseHandler) {\n        mouseHandler.$clickSelection = null;\n        var editor = mouseHandler.editor;\n        editor.setDefaultHandler(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n        editor.setDefaultHandler(\"dblclick\", this.onDoubleClick.bind(mouseHandler));\n        editor.setDefaultHandler(\"tripleclick\", this.onTripleClick.bind(mouseHandler));\n        editor.setDefaultHandler(\"quadclick\", this.onQuadClick.bind(mouseHandler));\n        editor.setDefaultHandler(\"mousewheel\", this.onMouseWheel.bind(mouseHandler));\n        var exports = [\"select\", \"startSelect\", \"selectEnd\", \"selectAllEnd\", \"selectByWordsEnd\",\n            \"selectByLinesEnd\", \"dragWait\", \"dragWaitEnd\", \"focusWait\"];\n        exports.forEach(function (x) {\n            mouseHandler[x] = this[x];\n        }, this);\n        mouseHandler[\"selectByLines\"] = this.extendSelectionBy.bind(mouseHandler, \"getLineRange\");\n        mouseHandler[\"selectByWords\"] = this.extendSelectionBy.bind(mouseHandler, \"getWordRange\");\n    }\n    DefaultHandlers.prototype.onMouseDown = function (ev) {\n        var inSelection = ev.inSelection();\n        var pos = ev.getDocumentPosition();\n        this.mousedownEvent = ev;\n        var editor = this.editor;\n        var button = ev.getButton();\n        if (button !== 0) {\n            var selectionRange = editor.getSelectionRange();\n            var selectionEmpty = selectionRange.isEmpty();\n            if (selectionEmpty || button == 1)\n                editor.selection.moveToPosition(pos);\n            if (button == 2) {\n                editor.textInput.onContextMenu(ev.domEvent);\n                if (!useragent.isMozilla)\n                    ev.preventDefault();\n            }\n            return;\n        }\n        this.mousedownEvent.time = Date.now();\n        if (inSelection && !editor.isFocused()) {\n            editor.focus();\n            if (this.$focusTimeout && !this.$clickSelection && !editor.inMultiSelectMode) {\n                this.setState(\"focusWait\");\n                this.captureMouse(ev);\n                return;\n            }\n        }\n        this.captureMouse(ev);\n        this.startSelect(pos, ev.domEvent._clicks > 1);\n        return ev.preventDefault();\n    };\n    DefaultHandlers.prototype.startSelect = function (pos, waitForClickSelection) {\n        pos = pos || this.editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var editor = this.editor;\n        if (!this.mousedownEvent)\n            return;\n        if (this.mousedownEvent.getShiftKey())\n            editor.selection.selectToPosition(pos);\n        else if (!waitForClickSelection)\n            editor.selection.moveToPosition(pos);\n        if (!waitForClickSelection)\n            this.select();\n        editor.setStyle(\"ace_selecting\");\n        this.setState(\"select\");\n    };\n    DefaultHandlers.prototype.select = function () {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        if (this.$clickSelection) {\n            var cmp = this.$clickSelection.comparePoint(cursor);\n            if (cmp == -1) {\n                anchor = this.$clickSelection.end;\n            }\n            else if (cmp == 1) {\n                anchor = this.$clickSelection.start;\n            }\n            else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor, editor.session);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.renderer.scrollCursorIntoView();\n    };\n    DefaultHandlers.prototype.extendSelectionBy = function (unitName) {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var range = editor.selection[unitName](cursor.row, cursor.column);\n        if (this.$clickSelection) {\n            var cmpStart = this.$clickSelection.comparePoint(range.start);\n            var cmpEnd = this.$clickSelection.comparePoint(range.end);\n            if (cmpStart == -1 && cmpEnd <= 0) {\n                anchor = this.$clickSelection.end;\n                if (range.end.row != cursor.row || range.end.column != cursor.column)\n                    cursor = range.start;\n            }\n            else if (cmpEnd == 1 && cmpStart >= 0) {\n                anchor = this.$clickSelection.start;\n                if (range.start.row != cursor.row || range.start.column != cursor.column)\n                    cursor = range.end;\n            }\n            else if (cmpStart == -1 && cmpEnd == 1) {\n                cursor = range.end;\n                anchor = range.start;\n            }\n            else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor, editor.session);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.renderer.scrollCursorIntoView();\n    };\n    DefaultHandlers.prototype.selectByLinesEnd = function () {\n        this.$clickSelection = null;\n        this.editor.unsetStyle(\"ace_selecting\");\n    };\n    DefaultHandlers.prototype.focusWait = function () {\n        var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n        var time = Date.now();\n        if (distance > DRAG_OFFSET || time - this.mousedownEvent.time > this.$focusTimeout)\n            this.startSelect(this.mousedownEvent.getDocumentPosition());\n    };\n    DefaultHandlers.prototype.onDoubleClick = function (ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n        var session = editor.session;\n        var range = session.getBracketRange(pos);\n        if (range) {\n            if (range.isEmpty()) {\n                range.start.column--;\n                range.end.column++;\n            }\n            this.setState(\"select\");\n        }\n        else {\n            range = editor.selection.getWordRange(pos.row, pos.column);\n            this.setState(\"selectByWords\");\n        }\n        this.$clickSelection = range;\n        this.select();\n    };\n    DefaultHandlers.prototype.onTripleClick = function (ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n        this.setState(\"selectByLines\");\n        var range = editor.getSelectionRange();\n        if (range.isMultiLine() && range.contains(pos.row, pos.column)) {\n            this.$clickSelection = editor.selection.getLineRange(range.start.row);\n            this.$clickSelection.end = editor.selection.getLineRange(range.end.row).end;\n        }\n        else {\n            this.$clickSelection = editor.selection.getLineRange(pos.row);\n        }\n        this.select();\n    };\n    DefaultHandlers.prototype.onQuadClick = function (ev) {\n        var editor = this.editor;\n        editor.selectAll();\n        this.$clickSelection = editor.getSelectionRange();\n        this.setState(\"selectAll\");\n    };\n    DefaultHandlers.prototype.onMouseWheel = function (ev) {\n        if (ev.getAccelKey())\n            return;\n        if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {\n            ev.wheelX = ev.wheelY;\n            ev.wheelY = 0;\n        }\n        var editor = this.editor;\n        if (!this.$lastScroll)\n            this.$lastScroll = { t: 0, vx: 0, vy: 0, allowed: 0 };\n        var prevScroll = this.$lastScroll;\n        var t = ev.domEvent.timeStamp;\n        var dt = t - prevScroll.t;\n        var vx = dt ? ev.wheelX / dt : prevScroll.vx;\n        var vy = dt ? ev.wheelY / dt : prevScroll.vy;\n        if (dt < SCROLL_COOLDOWN_T) {\n            vx = (vx + prevScroll.vx) / 2;\n            vy = (vy + prevScroll.vy) / 2;\n        }\n        var direction = Math.abs(vx / vy);\n        var canScroll = false;\n        if (direction >= 1 && editor.renderer.isScrollableBy(ev.wheelX * ev.speed, 0))\n            canScroll = true;\n        if (direction <= 1 && editor.renderer.isScrollableBy(0, ev.wheelY * ev.speed))\n            canScroll = true;\n        if (canScroll) {\n            prevScroll.allowed = t;\n        }\n        else if (t - prevScroll.allowed < SCROLL_COOLDOWN_T) {\n            var isSlower = Math.abs(vx) <= 1.5 * Math.abs(prevScroll.vx)\n                && Math.abs(vy) <= 1.5 * Math.abs(prevScroll.vy);\n            if (isSlower) {\n                canScroll = true;\n                prevScroll.allowed = t;\n            }\n            else {\n                prevScroll.allowed = 0;\n            }\n        }\n        prevScroll.t = t;\n        prevScroll.vx = vx;\n        prevScroll.vy = vy;\n        if (canScroll) {\n            editor.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);\n            return ev.stop();\n        }\n    };\n    return DefaultHandlers;\n}());\nDefaultHandlers.prototype.selectEnd = DefaultHandlers.prototype.selectByLinesEnd;\nDefaultHandlers.prototype.selectAllEnd = DefaultHandlers.prototype.selectByLinesEnd;\nDefaultHandlers.prototype.selectByWordsEnd = DefaultHandlers.prototype.selectByLinesEnd;\nexports.DefaultHandlers = DefaultHandlers;\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\nfunction calcRangeOrientation(range, cursor, session) {\n    if (range.start.row == range.end.row)\n        var cmp = 2 * cursor.column - range.start.column - range.end.column;\n    else if (range.start.row == range.end.row - 1 && !range.start.column && !range.end.column)\n        var cmp = 3 * cursor.column - 2 * session.getLine(range.start.row).length;\n    else\n        var cmp = 2 * cursor.row - range.start.row - range.end.row;\n    if (cmp < 0)\n        return { cursor: range.start, anchor: range.end };\n    else\n        return { cursor: range.end, anchor: range.start };\n}\n\n});\n\nace.define(\"ace/mouse/mouse_event\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar MouseEvent = /** @class */ (function () {\n    function MouseEvent(domEvent, editor) { this.speed; this.wheelX; this.wheelY;\n        this.domEvent = domEvent;\n        this.editor = editor;\n        this.x = this.clientX = domEvent.clientX;\n        this.y = this.clientY = domEvent.clientY;\n        this.$pos = null;\n        this.$inSelection = null;\n        this.propagationStopped = false;\n        this.defaultPrevented = false;\n    }\n    MouseEvent.prototype.stopPropagation = function () {\n        event.stopPropagation(this.domEvent);\n        this.propagationStopped = true;\n    };\n    MouseEvent.prototype.preventDefault = function () {\n        event.preventDefault(this.domEvent);\n        this.defaultPrevented = true;\n    };\n    MouseEvent.prototype.stop = function () {\n        this.stopPropagation();\n        this.preventDefault();\n    };\n    MouseEvent.prototype.getDocumentPosition = function () {\n        if (this.$pos)\n            return this.$pos;\n        this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY);\n        return this.$pos;\n    };\n    MouseEvent.prototype.getGutterRow = function () {\n        var documentRow = this.getDocumentPosition().row;\n        var screenRow = this.editor.session.documentToScreenRow(documentRow, 0);\n        var screenTopRow = this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row, 0);\n        return screenRow - screenTopRow;\n    };\n    MouseEvent.prototype.inSelection = function () {\n        if (this.$inSelection !== null)\n            return this.$inSelection;\n        var editor = this.editor;\n        var selectionRange = editor.getSelectionRange();\n        if (selectionRange.isEmpty())\n            this.$inSelection = false;\n        else {\n            var pos = this.getDocumentPosition();\n            this.$inSelection = selectionRange.contains(pos.row, pos.column);\n        }\n        return this.$inSelection;\n    };\n    MouseEvent.prototype.getButton = function () {\n        return event.getButton(this.domEvent);\n    };\n    MouseEvent.prototype.getShiftKey = function () {\n        return this.domEvent.shiftKey;\n    };\n    MouseEvent.prototype.getAccelKey = function () {\n        return useragent.isMac ? this.domEvent.metaKey : this.domEvent.ctrlKey;\n    };\n    return MouseEvent;\n}());\nexports.MouseEvent = MouseEvent;\n\n});\n\nace.define(\"ace/lib/scroll\",[\"require\",\"exports\",\"module\"], function(require, exports, module){exports.preventParentScroll = function preventParentScroll(event) {\n    event.stopPropagation();\n    var target = event.currentTarget;\n    var contentOverflows = target.scrollHeight > target.clientHeight;\n    if (!contentOverflows) {\n        event.preventDefault();\n    }\n};\n\n});\n\nace.define(\"ace/tooltip\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/range\",\"ace/lib/scroll\"], function(require, exports, module){\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar dom = require(\"./lib/dom\");\nvar event = require(\"./lib/event\");\nvar Range = require(\"./range\").Range;\nvar preventParentScroll = require(\"./lib/scroll\").preventParentScroll;\nvar CLASSNAME = \"ace_tooltip\";\nvar Tooltip = /** @class */ (function () {\n    function Tooltip(parentNode) {\n        this.isOpen = false;\n        this.$element = null;\n        this.$parentNode = parentNode;\n    }\n    Tooltip.prototype.$init = function () {\n        this.$element = dom.createElement(\"div\");\n        this.$element.className = CLASSNAME;\n        this.$element.style.display = \"none\";\n        this.$parentNode.appendChild(this.$element);\n        return this.$element;\n    };\n    Tooltip.prototype.getElement = function () {\n        return this.$element || this.$init();\n    };\n    Tooltip.prototype.setText = function (text) {\n        this.getElement().textContent = text;\n    };\n    Tooltip.prototype.setHtml = function (html) {\n        this.getElement().innerHTML = html;\n    };\n    Tooltip.prototype.setPosition = function (x, y) {\n        this.getElement().style.left = x + \"px\";\n        this.getElement().style.top = y + \"px\";\n    };\n    Tooltip.prototype.setClassName = function (className) {\n        dom.addCssClass(this.getElement(), className);\n    };\n    Tooltip.prototype.setTheme = function (theme) {\n        if (this.theme) {\n            this.theme.isDark && dom.removeCssClass(this.getElement(), \"ace_dark\");\n            this.theme.cssClass && dom.removeCssClass(this.getElement(), this.theme.cssClass);\n        }\n        if (theme.isDark) {\n            dom.addCssClass(this.getElement(), \"ace_dark\");\n        }\n        if (theme.cssClass) {\n            dom.addCssClass(this.getElement(), theme.cssClass);\n        }\n        this.theme = {\n            isDark: theme.isDark,\n            cssClass: theme.cssClass\n        };\n    };\n    Tooltip.prototype.show = function (text, x, y) {\n        if (text != null)\n            this.setText(text);\n        if (x != null && y != null)\n            this.setPosition(x, y);\n        if (!this.isOpen) {\n            this.getElement().style.display = \"block\";\n            this.isOpen = true;\n        }\n    };\n    Tooltip.prototype.hide = function (e) {\n        if (this.isOpen) {\n            this.getElement().style.display = \"none\";\n            this.getElement().className = CLASSNAME;\n            this.isOpen = false;\n        }\n    };\n    Tooltip.prototype.getHeight = function () {\n        return this.getElement().offsetHeight;\n    };\n    Tooltip.prototype.getWidth = function () {\n        return this.getElement().offsetWidth;\n    };\n    Tooltip.prototype.destroy = function () {\n        this.isOpen = false;\n        if (this.$element && this.$element.parentNode) {\n            this.$element.parentNode.removeChild(this.$element);\n        }\n    };\n    return Tooltip;\n}());\nvar PopupManager = /** @class */ (function () {\n    function PopupManager() {\n        this.popups = [];\n    }\n    PopupManager.prototype.addPopup = function (popup) {\n        this.popups.push(popup);\n        this.updatePopups();\n    };\n    PopupManager.prototype.removePopup = function (popup) {\n        var index = this.popups.indexOf(popup);\n        if (index !== -1) {\n            this.popups.splice(index, 1);\n            this.updatePopups();\n        }\n    };\n    PopupManager.prototype.updatePopups = function () {\n        var e_1, _a, e_2, _b;\n        this.popups.sort(function (a, b) { return b.priority - a.priority; });\n        var visiblepopups = [];\n        try {\n            for (var _c = __values(this.popups), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var popup = _d.value;\n                var shouldDisplay = true;\n                try {\n                    for (var visiblepopups_1 = (e_2 = void 0, __values(visiblepopups)), visiblepopups_1_1 = visiblepopups_1.next(); !visiblepopups_1_1.done; visiblepopups_1_1 = visiblepopups_1.next()) {\n                        var visiblePopup = visiblepopups_1_1.value;\n                        if (this.doPopupsOverlap(visiblePopup, popup)) {\n                            shouldDisplay = false;\n                            break;\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (visiblepopups_1_1 && !visiblepopups_1_1.done && (_b = visiblepopups_1.return)) _b.call(visiblepopups_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                if (shouldDisplay) {\n                    visiblepopups.push(popup);\n                }\n                else {\n                    popup.hide();\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    PopupManager.prototype.doPopupsOverlap = function (popupA, popupB) {\n        var rectA = popupA.getElement().getBoundingClientRect();\n        var rectB = popupB.getElement().getBoundingClientRect();\n        return (rectA.left < rectB.right && rectA.right > rectB.left && rectA.top < rectB.bottom && rectA.bottom\n            > rectB.top);\n    };\n    return PopupManager;\n}());\nvar popupManager = new PopupManager();\nexports.popupManager = popupManager;\nexports.Tooltip = Tooltip;\nvar HoverTooltip = /** @class */ (function (_super) {\n    __extends(HoverTooltip, _super);\n    function HoverTooltip(parentNode) {\n        if (parentNode === void 0) { parentNode = document.body; }\n        var _this = _super.call(this, parentNode) || this;\n        _this.timeout = undefined;\n        _this.lastT = 0;\n        _this.idleTime = 350;\n        _this.lastEvent = undefined;\n        _this.onMouseOut = _this.onMouseOut.bind(_this);\n        _this.onMouseMove = _this.onMouseMove.bind(_this);\n        _this.waitForHover = _this.waitForHover.bind(_this);\n        _this.hide = _this.hide.bind(_this);\n        var el = _this.getElement();\n        el.style.whiteSpace = \"pre-wrap\";\n        el.style.pointerEvents = \"auto\";\n        el.addEventListener(\"mouseout\", _this.onMouseOut);\n        el.tabIndex = -1;\n        el.addEventListener(\"blur\", function () {\n            if (!el.contains(document.activeElement))\n                this.hide();\n        }.bind(_this));\n        el.addEventListener(\"wheel\", preventParentScroll);\n        return _this;\n    }\n    HoverTooltip.prototype.addToEditor = function (editor) {\n        editor.on(\"mousemove\", this.onMouseMove);\n        editor.on(\"mousedown\", this.hide);\n        var target = editor.renderer.getMouseEventTarget();\n        if (target && typeof target.removeEventListener === \"function\") {\n            target.addEventListener(\"mouseout\", this.onMouseOut, true);\n        }\n    };\n    HoverTooltip.prototype.removeFromEditor = function (editor) {\n        editor.off(\"mousemove\", this.onMouseMove);\n        editor.off(\"mousedown\", this.hide);\n        var target = editor.renderer.getMouseEventTarget();\n        if (target && typeof target.removeEventListener === \"function\") {\n            target.removeEventListener(\"mouseout\", this.onMouseOut, true);\n        }\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n    };\n    HoverTooltip.prototype.onMouseMove = function (e, editor) {\n        this.lastEvent = e;\n        this.lastT = Date.now();\n        var isMousePressed = editor.$mouseHandler.isMousePressed;\n        if (this.isOpen) {\n            var pos = this.lastEvent && this.lastEvent.getDocumentPosition();\n            if (!this.range\n                || !this.range.contains(pos.row, pos.column)\n                || isMousePressed\n                || this.isOutsideOfText(this.lastEvent)) {\n                this.hide();\n            }\n        }\n        if (this.timeout || isMousePressed)\n            return;\n        this.lastEvent = e;\n        this.timeout = setTimeout(this.waitForHover, this.idleTime);\n    };\n    HoverTooltip.prototype.waitForHover = function () {\n        if (this.timeout)\n            clearTimeout(this.timeout);\n        var dt = Date.now() - this.lastT;\n        if (this.idleTime - dt > 10) {\n            this.timeout = setTimeout(this.waitForHover, this.idleTime - dt);\n            return;\n        }\n        this.timeout = null;\n        if (this.lastEvent && !this.isOutsideOfText(this.lastEvent)) {\n            this.$gatherData(this.lastEvent, this.lastEvent.editor);\n        }\n    };\n    HoverTooltip.prototype.isOutsideOfText = function (e) {\n        var editor = e.editor;\n        var docPos = e.getDocumentPosition();\n        var line = editor.session.getLine(docPos.row);\n        if (docPos.column == line.length) {\n            var screenPos = editor.renderer.pixelToScreenCoordinates(e.clientX, e.clientY);\n            var clippedPos = editor.session.documentToScreenPosition(docPos.row, docPos.column);\n            if (clippedPos.column != screenPos.column\n                || clippedPos.row != screenPos.row) {\n                return true;\n            }\n        }\n        return false;\n    };\n    HoverTooltip.prototype.setDataProvider = function (value) {\n        this.$gatherData = value;\n    };\n    HoverTooltip.prototype.showForRange = function (editor, range, domNode, startingEvent) {\n        if (startingEvent && startingEvent != this.lastEvent)\n            return;\n        if (this.isOpen && document.activeElement == this.getElement())\n            return;\n        var renderer = editor.renderer;\n        if (!this.isOpen) {\n            popupManager.addPopup(this);\n            this.$registerCloseEvents();\n            this.setTheme(renderer.theme);\n        }\n        this.isOpen = true;\n        this.range = Range.fromPoints(range.start, range.end);\n        var position = renderer.textToScreenCoordinates(range.start.row, range.start.column);\n        var rect = renderer.scroller.getBoundingClientRect();\n        if (position.pageX < rect.left)\n            position.pageX = rect.left;\n        var element = this.getElement();\n        element.innerHTML = \"\";\n        element.appendChild(domNode);\n        element.style.maxHeight = \"\";\n        element.style.display = \"block\";\n        this.$setPosition(editor, position, true, range);\n        dom.$fixPositionBug(element);\n    };\n    HoverTooltip.prototype.$setPosition = function (editor, position, withMarker, range) {\n        var MARGIN = 10;\n        withMarker && this.addMarker(range, editor.session);\n        var renderer = editor.renderer;\n        var element = this.getElement();\n        var labelHeight = element.offsetHeight;\n        var labelWidth = element.offsetWidth;\n        var anchorTop = position.pageY;\n        var anchorLeft = position.pageX;\n        var spaceBelow = window.innerHeight - anchorTop - renderer.lineHeight;\n        var isAbove = this.$shouldPlaceAbove(labelHeight, anchorTop, spaceBelow - MARGIN);\n        element.style.maxHeight = (isAbove ? anchorTop : spaceBelow) - MARGIN + \"px\";\n        element.style.top = isAbove ? \"\" : anchorTop + renderer.lineHeight + \"px\";\n        element.style.bottom = isAbove ? window.innerHeight - anchorTop + \"px\" : \"\";\n        element.style.left = Math.min(anchorLeft, window.innerWidth - labelWidth - MARGIN) + \"px\";\n    };\n    HoverTooltip.prototype.$shouldPlaceAbove = function (labelHeight, anchorTop, spaceBelow) {\n        return !(anchorTop - labelHeight < 0 && anchorTop < spaceBelow);\n    };\n    HoverTooltip.prototype.addMarker = function (range, session) {\n        if (this.marker) {\n            this.$markerSession.removeMarker(this.marker);\n        }\n        this.$markerSession = session;\n        this.marker = session && session.addMarker(range, \"ace_highlight-marker\", \"text\");\n    };\n    HoverTooltip.prototype.hide = function (e) {\n        if (e && this.$fromKeyboard && e.type == \"keydown\") {\n            if (e.code == \"Escape\") {\n                return;\n            }\n        }\n        if (!e && document.activeElement == this.getElement())\n            return;\n        if (e && e.target && (e.type != \"keydown\" || e.ctrlKey || e.metaKey) && this.$element.contains(e.target))\n            return;\n        this.lastEvent = null;\n        if (this.timeout)\n            clearTimeout(this.timeout);\n        this.timeout = null;\n        this.addMarker(null);\n        if (this.isOpen) {\n            this.$fromKeyboard = false;\n            this.$removeCloseEvents();\n            this.getElement().style.display = \"none\";\n            this.isOpen = false;\n            popupManager.removePopup(this);\n        }\n    };\n    HoverTooltip.prototype.$registerCloseEvents = function () {\n        window.addEventListener(\"keydown\", this.hide, true);\n        window.addEventListener(\"wheel\", this.hide, true);\n        window.addEventListener(\"mousedown\", this.hide, true);\n    };\n    HoverTooltip.prototype.$removeCloseEvents = function () {\n        window.removeEventListener(\"keydown\", this.hide, true);\n        window.removeEventListener(\"wheel\", this.hide, true);\n        window.removeEventListener(\"mousedown\", this.hide, true);\n    };\n    HoverTooltip.prototype.onMouseOut = function (e) {\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n        this.lastEvent = null;\n        if (!this.isOpen)\n            return;\n        if (!e.relatedTarget || this.getElement().contains(e.relatedTarget))\n            return;\n        if (e && e.currentTarget.contains(e.relatedTarget))\n            return;\n        if (!e.relatedTarget.classList.contains(\"ace_content\"))\n            this.hide();\n    };\n    return HoverTooltip;\n}(Tooltip));\nexports.HoverTooltip = HoverTooltip;\n\n});\n\nace.define(\"ace/mouse/default_gutter_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/mouse/mouse_event\",\"ace/tooltip\",\"ace/config\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar dom = require(\"../lib/dom\");\nvar MouseEvent = require(\"./mouse_event\").MouseEvent;\nvar HoverTooltip = require(\"../tooltip\").HoverTooltip;\nvar nls = require(\"../config\").nls;\nvar Range = require(\"../range\").Range;\nfunction GutterHandler(mouseHandler) {\n    var editor = mouseHandler.editor;\n    var gutter = editor.renderer.$gutterLayer;\n    mouseHandler.$tooltip = new GutterTooltip(editor);\n    mouseHandler.$tooltip.addToEditor(editor);\n    mouseHandler.$tooltip.setDataProvider(function (e, editor) {\n        var row = e.getDocumentPosition().row;\n        mouseHandler.$tooltip.showTooltip(row);\n    });\n    mouseHandler.editor.setDefaultHandler(\"guttermousedown\", function (e) {\n        if (!editor.isFocused() || e.getButton() != 0)\n            return;\n        var gutterRegion = gutter.getRegion(e);\n        if (gutterRegion == \"foldWidgets\")\n            return;\n        var row = e.getDocumentPosition().row;\n        var selection = editor.session.selection;\n        if (e.getShiftKey())\n            selection.selectTo(row, 0);\n        else {\n            if (e.domEvent.detail == 2) {\n                editor.selectAll();\n                return e.preventDefault();\n            }\n            mouseHandler.$clickSelection = editor.selection.getLineRange(row);\n        }\n        mouseHandler.setState(\"selectByLines\");\n        mouseHandler.captureMouse(e);\n        return e.preventDefault();\n    });\n}\nexports.GutterHandler = GutterHandler;\nvar GutterTooltip = /** @class */ (function (_super) {\n    __extends(GutterTooltip, _super);\n    function GutterTooltip(editor) {\n        var _this = _super.call(this, editor.container) || this;\n        _this.id = \"gt\" + (++GutterTooltip.$uid);\n        _this.editor = editor;\n        _this.visibleTooltipRow;\n        var el = _this.getElement();\n        el.setAttribute(\"role\", \"tooltip\");\n        el.setAttribute(\"id\", _this.id);\n        el.style.pointerEvents = \"auto\";\n        _this.idleTime = 50;\n        _this.onDomMouseMove = _this.onDomMouseMove.bind(_this);\n        _this.onDomMouseOut = _this.onDomMouseOut.bind(_this);\n        _this.setClassName(\"ace_gutter-tooltip\");\n        return _this;\n    }\n    GutterTooltip.prototype.onDomMouseMove = function (domEvent) {\n        var aceEvent = new MouseEvent(domEvent, this.editor);\n        this.onMouseMove(aceEvent, this.editor);\n    };\n    GutterTooltip.prototype.onDomMouseOut = function (domEvent) {\n        var aceEvent = new MouseEvent(domEvent, this.editor);\n        this.onMouseOut(aceEvent);\n    };\n    GutterTooltip.prototype.addToEditor = function (editor) {\n        var gutter = editor.renderer.$gutter;\n        gutter.addEventListener(\"mousemove\", this.onDomMouseMove);\n        gutter.addEventListener(\"mouseout\", this.onDomMouseOut);\n        _super.prototype.addToEditor.call(this, editor);\n    };\n    GutterTooltip.prototype.removeFromEditor = function (editor) {\n        var gutter = editor.renderer.$gutter;\n        gutter.removeEventListener(\"mousemove\", this.onDomMouseMove);\n        gutter.removeEventListener(\"mouseout\", this.onDomMouseOut);\n        _super.prototype.removeFromEditor.call(this, editor);\n    };\n    GutterTooltip.prototype.destroy = function () {\n        if (this.editor) {\n            this.removeFromEditor(this.editor);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    Object.defineProperty(GutterTooltip, \"annotationLabels\", {\n        get: function () {\n            return {\n                error: {\n                    singular: nls(\"gutter-tooltip.aria-label.error.singular\", \"error\"),\n                    plural: nls(\"gutter-tooltip.aria-label.error.plural\", \"errors\")\n                },\n                security: {\n                    singular: nls(\"gutter-tooltip.aria-label.security.singular\", \"security finding\"),\n                    plural: nls(\"gutter-tooltip.aria-label.security.plural\", \"security findings\")\n                },\n                warning: {\n                    singular: nls(\"gutter-tooltip.aria-label.warning.singular\", \"warning\"),\n                    plural: nls(\"gutter-tooltip.aria-label.warning.plural\", \"warnings\")\n                },\n                info: {\n                    singular: nls(\"gutter-tooltip.aria-label.info.singular\", \"information message\"),\n                    plural: nls(\"gutter-tooltip.aria-label.info.plural\", \"information messages\")\n                },\n                hint: {\n                    singular: nls(\"gutter-tooltip.aria-label.hint.singular\", \"suggestion\"),\n                    plural: nls(\"gutter-tooltip.aria-label.hint.plural\", \"suggestions\")\n                }\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    GutterTooltip.prototype.showTooltip = function (row) {\n        var _a;\n        var gutter = this.editor.renderer.$gutterLayer;\n        var annotationsInRow = gutter.$annotations[row];\n        var annotation;\n        if (annotationsInRow)\n            annotation = {\n                displayText: Array.from(annotationsInRow.displayText),\n                type: Array.from(annotationsInRow.type)\n            };\n        else\n            annotation = { displayText: [], type: [] };\n        var fold = gutter.session.getFoldLine(row);\n        if (fold && gutter.$showFoldedAnnotations) {\n            var annotationsInFold = { error: [], security: [], warning: [], info: [], hint: [] };\n            var severityRank = { error: 1, security: 2, warning: 3, info: 4, hint: 5 };\n            var mostSevereAnnotationTypeInFold;\n            for (var i = row + 1; i <= fold.end.row; i++) {\n                if (!gutter.$annotations[i])\n                    continue;\n                for (var j = 0; j < gutter.$annotations[i].text.length; j++) {\n                    var annotationType = gutter.$annotations[i].type[j];\n                    annotationsInFold[annotationType].push(gutter.$annotations[i].text[j]);\n                    if (!mostSevereAnnotationTypeInFold ||\n                        severityRank[annotationType] < severityRank[mostSevereAnnotationTypeInFold]) {\n                        mostSevereAnnotationTypeInFold = annotationType;\n                    }\n                }\n            }\n            if ([\"error\", \"security\", \"warning\"].includes(mostSevereAnnotationTypeInFold)) {\n                var summaryFoldedAnnotations = \"\".concat(GutterTooltip.annotationsToSummaryString(annotationsInFold), \" in folded code.\");\n                annotation.displayText.push(summaryFoldedAnnotations);\n                annotation.type.push(mostSevereAnnotationTypeInFold + \"_fold\");\n            }\n        }\n        if (annotation.displayText.length === 0)\n            return this.hide();\n        var annotationMessages = { error: [], security: [], warning: [], info: [], hint: [] };\n        var iconClassName = gutter.$useSvgGutterIcons ? \"ace_icon_svg\" : \"ace_icon\";\n        for (var i = 0; i < annotation.displayText.length; i++) {\n            var lineElement = dom.createElement(\"span\");\n            var iconElement = dom.createElement(\"span\");\n            (_a = iconElement.classList).add.apply(_a, [\"ace_\".concat(annotation.type[i]), iconClassName]);\n            iconElement.setAttribute(\"aria-label\", \"\".concat(GutterTooltip.annotationLabels[annotation.type[i].replace(\"_fold\", \"\")].singular));\n            iconElement.setAttribute(\"role\", \"img\");\n            iconElement.appendChild(dom.createTextNode(\" \"));\n            lineElement.appendChild(iconElement);\n            lineElement.appendChild(dom.createTextNode(annotation.displayText[i]));\n            lineElement.appendChild(dom.createElement(\"br\"));\n            annotationMessages[annotation.type[i].replace(\"_fold\", \"\")].push(lineElement);\n        }\n        var tooltipElement = dom.createElement(\"span\");\n        annotationMessages.error.forEach(function (el) { return tooltipElement.appendChild(el); });\n        annotationMessages.security.forEach(function (el) { return tooltipElement.appendChild(el); });\n        annotationMessages.warning.forEach(function (el) { return tooltipElement.appendChild(el); });\n        annotationMessages.info.forEach(function (el) { return tooltipElement.appendChild(el); });\n        annotationMessages.hint.forEach(function (el) { return tooltipElement.appendChild(el); });\n        tooltipElement.setAttribute(\"aria-live\", \"polite\");\n        var annotationNode = this.$findLinkedAnnotationNode(row);\n        if (annotationNode) {\n            annotationNode.setAttribute(\"aria-describedby\", this.id);\n        }\n        var range = Range.fromPoints({ row: row, column: 0 }, { row: row, column: 0 });\n        this.showForRange(this.editor, range, tooltipElement);\n        this.visibleTooltipRow = row;\n        this.editor._signal(\"showGutterTooltip\", this);\n    };\n    GutterTooltip.prototype.$setPosition = function (editor, _ignoredPosition, _withMarker, range) {\n        var gutterCell = this.$findCellByRow(range.start.row);\n        if (!gutterCell)\n            return;\n        var el = gutterCell && gutterCell.element;\n        var anchorEl = el && (el.querySelector(\".ace_gutter_annotation\"));\n        if (!anchorEl)\n            return;\n        var r = anchorEl.getBoundingClientRect();\n        if (!r)\n            return;\n        var position = {\n            pageX: r.right,\n            pageY: r.top\n        };\n        return _super.prototype.$setPosition.call(this, editor, position, false, range);\n    };\n    GutterTooltip.prototype.$shouldPlaceAbove = function (labelHeight, anchorTop, spaceBelow) {\n        return spaceBelow < labelHeight;\n    };\n    GutterTooltip.prototype.$findLinkedAnnotationNode = function (row) {\n        var cell = this.$findCellByRow(row);\n        if (cell) {\n            var element = cell.element;\n            if (element.childNodes.length > 2) {\n                return element.childNodes[2];\n            }\n        }\n    };\n    GutterTooltip.prototype.$findCellByRow = function (row) {\n        return this.editor.renderer.$gutterLayer.$lines.cells.find(function (el) { return el.row === row; });\n    };\n    GutterTooltip.prototype.hide = function (e) {\n        if (!this.isOpen) {\n            return;\n        }\n        this.$element.removeAttribute(\"aria-live\");\n        if (this.visibleTooltipRow != undefined) {\n            var annotationNode = this.$findLinkedAnnotationNode(this.visibleTooltipRow);\n            if (annotationNode) {\n                annotationNode.removeAttribute(\"aria-describedby\");\n            }\n        }\n        this.visibleTooltipRow = undefined;\n        this.editor._signal(\"hideGutterTooltip\", this);\n        _super.prototype.hide.call(this, e);\n    };\n    GutterTooltip.annotationsToSummaryString = function (annotations) {\n        var e_1, _a;\n        var summary = [];\n        var annotationTypes = [\"error\", \"security\", \"warning\", \"info\", \"hint\"];\n        try {\n            for (var annotationTypes_1 = __values(annotationTypes), annotationTypes_1_1 = annotationTypes_1.next(); !annotationTypes_1_1.done; annotationTypes_1_1 = annotationTypes_1.next()) {\n                var annotationType = annotationTypes_1_1.value;\n                if (!annotations[annotationType].length)\n                    continue;\n                var label = annotations[annotationType].length === 1 ? GutterTooltip.annotationLabels[annotationType].singular : GutterTooltip.annotationLabels[annotationType].plural;\n                summary.push(\"\".concat(annotations[annotationType].length, \" \").concat(label));\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (annotationTypes_1_1 && !annotationTypes_1_1.done && (_a = annotationTypes_1.return)) _a.call(annotationTypes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return summary.join(\", \");\n    };\n    GutterTooltip.prototype.isOutsideOfText = function (e) {\n        var editor = e.editor;\n        var rect = editor.renderer.$gutter.getBoundingClientRect();\n        return !(e.clientX >= rect.left && e.clientX <= rect.right &&\n            e.clientY >= rect.top && e.clientY <= rect.bottom);\n    };\n    return GutterTooltip;\n}(HoverTooltip));\nGutterTooltip.$uid = 0;\nexports.GutterTooltip = GutterTooltip;\n\n});\n\nace.define(\"ace/mouse/dragdrop_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar AUTOSCROLL_DELAY = 200;\nvar SCROLL_CURSOR_DELAY = 200;\nvar SCROLL_CURSOR_HYSTERESIS = 5;\nfunction DragdropHandler(mouseHandler) {\n    var editor = mouseHandler.editor;\n    var dragImage = dom.createElement(\"div\");\n    dragImage.style.cssText = \"top:-100px;position:absolute;z-index:2147483647;opacity:0.5\";\n    dragImage.textContent = \"\\xa0\";\n    var exports = [\"dragWait\", \"dragWaitEnd\", \"startDrag\", \"dragReadyEnd\", \"onMouseDrag\"];\n    exports.forEach(function (x) {\n        mouseHandler[x] = this[x];\n    }, this);\n    editor.on(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n    var mouseTarget = editor.container;\n    var dragSelectionMarker, x, y;\n    var timerId, range;\n    var dragCursor, counter = 0;\n    var dragOperation;\n    var isInternal;\n    var autoScrollStartTime;\n    var cursorMovedTime;\n    var cursorPointOnCaretMoved;\n    this.onDragStart = function (e) {\n        if (this.cancelDrag || !mouseTarget.draggable) {\n            var self = this;\n            setTimeout(function () {\n                self.startSelect();\n                self.captureMouse(e);\n            }, 0);\n            return e.preventDefault();\n        }\n        range = editor.getSelectionRange();\n        var dataTransfer = e.dataTransfer;\n        dataTransfer.effectAllowed = editor.getReadOnly() ? \"copy\" : \"copyMove\";\n        editor.container.appendChild(dragImage);\n        dataTransfer.setDragImage && dataTransfer.setDragImage(dragImage, 0, 0);\n        setTimeout(function () {\n            editor.container.removeChild(dragImage);\n        });\n        dataTransfer.clearData();\n        dataTransfer.setData(\"Text\", editor.session.getTextRange());\n        isInternal = true;\n        this.setState(\"drag\");\n    };\n    this.onDragEnd = function (e) {\n        mouseTarget.draggable = false;\n        isInternal = false;\n        this.setState(null);\n        if (!editor.getReadOnly()) {\n            var dropEffect = e.dataTransfer.dropEffect;\n            if (!dragOperation && dropEffect == \"move\")\n                editor.session.remove(editor.getSelectionRange());\n            editor.$resetCursorStyle();\n        }\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n    };\n    this.onDragEnter = function (e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        if (!dragSelectionMarker)\n            addDragMarker();\n        counter++;\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n    this.onDragOver = function (e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        if (!dragSelectionMarker) {\n            addDragMarker();\n            counter++;\n        }\n        if (onMouseMoveTimer !== null)\n            onMouseMoveTimer = null;\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n    this.onDragLeave = function (e) {\n        counter--;\n        if (counter <= 0 && dragSelectionMarker) {\n            clearDragMarker();\n            dragOperation = null;\n            return event.preventDefault(e);\n        }\n    };\n    this.onDrop = function (e) {\n        if (!dragCursor)\n            return;\n        var dataTransfer = e.dataTransfer;\n        if (isInternal) {\n            switch (dragOperation) {\n                case \"move\":\n                    if (range.contains(dragCursor.row, dragCursor.column)) {\n                        range = {\n                            start: dragCursor,\n                            end: dragCursor\n                        };\n                    }\n                    else {\n                        range = editor.moveText(range, dragCursor);\n                    }\n                    break;\n                case \"copy\":\n                    range = editor.moveText(range, dragCursor, true);\n                    break;\n            }\n        }\n        else {\n            var dropData = dataTransfer.getData('Text');\n            range = {\n                start: dragCursor,\n                end: editor.session.insert(dragCursor, dropData)\n            };\n            editor.focus();\n            dragOperation = null;\n        }\n        clearDragMarker();\n        return event.preventDefault(e);\n    };\n    event.addListener(mouseTarget, \"dragstart\", this.onDragStart.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragend\", this.onDragEnd.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragenter\", this.onDragEnter.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragover\", this.onDragOver.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragleave\", this.onDragLeave.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"drop\", this.onDrop.bind(mouseHandler), editor);\n    function scrollCursorIntoView(cursor, prevCursor) {\n        var now = Date.now();\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        var hMovement = !prevCursor || cursor.column != prevCursor.column;\n        if (!cursorMovedTime || vMovement || hMovement) {\n            editor.moveCursorToPosition(cursor);\n            cursorMovedTime = now;\n            cursorPointOnCaretMoved = { x: x, y: y };\n        }\n        else {\n            var distance = calcDistance(cursorPointOnCaretMoved.x, cursorPointOnCaretMoved.y, x, y);\n            if (distance > SCROLL_CURSOR_HYSTERESIS) {\n                cursorMovedTime = null;\n            }\n            else if (now - cursorMovedTime >= SCROLL_CURSOR_DELAY) {\n                editor.renderer.scrollCursorIntoView();\n                cursorMovedTime = null;\n            }\n        }\n    }\n    function autoScroll(cursor, prevCursor) {\n        var now = Date.now();\n        var lineHeight = editor.renderer.layerConfig.lineHeight;\n        var characterWidth = editor.renderer.layerConfig.characterWidth;\n        var editorRect = editor.renderer.scroller.getBoundingClientRect();\n        var offsets = {\n            x: {\n                left: x - editorRect.left,\n                right: editorRect.right - x\n            },\n            y: {\n                top: y - editorRect.top,\n                bottom: editorRect.bottom - y\n            }\n        };\n        var nearestXOffset = Math.min(offsets.x.left, offsets.x.right);\n        var nearestYOffset = Math.min(offsets.y.top, offsets.y.bottom);\n        var scrollCursor = { row: cursor.row, column: cursor.column };\n        if (nearestXOffset / characterWidth <= 2) {\n            scrollCursor.column += (offsets.x.left < offsets.x.right ? -3 : +2);\n        }\n        if (nearestYOffset / lineHeight <= 1) {\n            scrollCursor.row += (offsets.y.top < offsets.y.bottom ? -1 : +1);\n        }\n        var vScroll = cursor.row != scrollCursor.row;\n        var hScroll = cursor.column != scrollCursor.column;\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        if (vScroll || (hScroll && !vMovement)) {\n            if (!autoScrollStartTime)\n                autoScrollStartTime = now;\n            else if (now - autoScrollStartTime >= AUTOSCROLL_DELAY)\n                editor.renderer.scrollCursorIntoView(scrollCursor);\n        }\n        else {\n            autoScrollStartTime = null;\n        }\n    }\n    function onDragInterval() {\n        var prevCursor = dragCursor;\n        dragCursor = editor.renderer.screenToTextCoordinates(x, y);\n        scrollCursorIntoView(dragCursor, prevCursor);\n        autoScroll(dragCursor, prevCursor);\n    }\n    function addDragMarker() {\n        range = editor.selection.toOrientedRange();\n        dragSelectionMarker = editor.session.addMarker(range, \"ace_selection\", editor.getSelectionStyle());\n        editor.clearSelection();\n        if (editor.isFocused())\n            editor.renderer.$cursorLayer.setBlinking(false);\n        clearInterval(timerId);\n        onDragInterval();\n        timerId = setInterval(onDragInterval, 20);\n        counter = 0;\n        event.addListener(document, \"mousemove\", onMouseMove);\n    }\n    function clearDragMarker() {\n        clearInterval(timerId);\n        editor.session.removeMarker(dragSelectionMarker);\n        dragSelectionMarker = null;\n        editor.selection.fromOrientedRange(range);\n        if (editor.isFocused() && !isInternal)\n            editor.$resetCursorStyle();\n        range = null;\n        dragCursor = null;\n        counter = 0;\n        autoScrollStartTime = null;\n        cursorMovedTime = null;\n        event.removeListener(document, \"mousemove\", onMouseMove);\n    }\n    var onMouseMoveTimer = null;\n    function onMouseMove() {\n        if (onMouseMoveTimer == null) {\n            onMouseMoveTimer = setTimeout(function () {\n                if (onMouseMoveTimer != null && dragSelectionMarker)\n                    clearDragMarker();\n            }, 20);\n        }\n    }\n    function canAccept(dataTransfer) {\n        var types = dataTransfer.types;\n        return !types || Array.prototype.some.call(types, function (type) {\n            return type == 'text/plain' || type == 'Text';\n        });\n    }\n    function getDropEffect(e) {\n        var copyAllowed = ['copy', 'copymove', 'all', 'uninitialized'];\n        var moveAllowed = ['move', 'copymove', 'linkmove', 'all', 'uninitialized'];\n        var copyModifierState = useragent.isMac ? e.altKey : e.ctrlKey;\n        var effectAllowed = \"uninitialized\";\n        try {\n            effectAllowed = e.dataTransfer.effectAllowed.toLowerCase();\n        }\n        catch (e) { }\n        var dropEffect = \"none\";\n        if (copyModifierState && copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n        else if (moveAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"move\";\n        else if (copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n        return dropEffect;\n    }\n}\n(function () {\n    this.dragWait = function () {\n        var interval = Date.now() - this.mousedownEvent.time;\n        if (interval > this.editor.getDragDelay())\n            this.startDrag();\n    };\n    this.dragWaitEnd = function () {\n        var target = this.editor.container;\n        target.draggable = false;\n        this.startSelect(this.mousedownEvent.getDocumentPosition());\n        this.selectEnd();\n    };\n    this.dragReadyEnd = function (e) {\n        this.editor.$resetCursorStyle();\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n        this.dragWaitEnd();\n    };\n    this.startDrag = function () {\n        this.cancelDrag = false;\n        var editor = this.editor;\n        var target = editor.container;\n        target.draggable = true;\n        editor.renderer.$cursorLayer.setBlinking(false);\n        editor.setStyle(\"ace_dragging\");\n        var cursorStyle = useragent.isWin ? \"default\" : \"move\";\n        editor.renderer.setCursorStyle(cursorStyle);\n        this.setState(\"dragReady\");\n    };\n    this.onMouseDrag = function (e) {\n        var target = this.editor.container;\n        if (useragent.isIE && this.state == \"dragReady\") {\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 3)\n                target.dragDrop();\n        }\n        if (this.state === \"dragWait\") {\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 0) {\n                target.draggable = false;\n                this.startSelect(this.mousedownEvent.getDocumentPosition());\n            }\n        }\n    };\n    this.onMouseDown = function (e) {\n        if (!this.$dragEnabled)\n            return;\n        this.mousedownEvent = e;\n        var editor = this.editor;\n        var inSelection = e.inSelection();\n        var button = e.getButton();\n        var clickCount = e.domEvent.detail || 1;\n        if (clickCount === 1 && button === 0 && inSelection) {\n            if (e.editor.inMultiSelectMode && (e.getAccelKey() || e.getShiftKey()))\n                return;\n            this.mousedownEvent.time = Date.now();\n            var eventTarget = e.domEvent.target || e.domEvent.srcElement;\n            if (\"unselectable\" in eventTarget)\n                eventTarget.unselectable = \"on\";\n            if (editor.getDragDelay()) {\n                if (useragent.isWebKit) {\n                    this.cancelDrag = true;\n                    var mouseTarget = editor.container;\n                    mouseTarget.draggable = true;\n                }\n                this.setState(\"dragWait\");\n            }\n            else {\n                this.startDrag();\n            }\n            this.captureMouse(e, this.onMouseDrag.bind(this));\n            e.defaultPrevented = true;\n        }\n    };\n}).call(DragdropHandler.prototype);\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\nexports.DragdropHandler = DragdropHandler;\n\n});\n\nace.define(\"ace/mouse/touch_handler\",[\"require\",\"exports\",\"module\",\"ace/mouse/mouse_event\",\"ace/lib/event\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar MouseEvent = require(\"./mouse_event\").MouseEvent;\nvar event = require(\"../lib/event\");\nvar dom = require(\"../lib/dom\");\nexports.addTouchListeners = function (el, editor) {\n    var mode = \"scroll\";\n    var startX;\n    var startY;\n    var touchStartT;\n    var lastT;\n    var longTouchTimer;\n    var animationTimer;\n    var animationSteps = 0;\n    var pos;\n    var clickCount = 0;\n    var vX = 0;\n    var vY = 0;\n    var pressed;\n    var contextMenu;\n    function createContextMenu() {\n        var clipboard = window.navigator && window.navigator.clipboard;\n        var isOpen = false;\n        var updateMenu = function () {\n            var selected = editor.getCopyText();\n            var hasUndo = editor.session.getUndoManager().hasUndo();\n            contextMenu.replaceChild(dom.buildDom(isOpen ? [\"span\",\n                !selected && canExecuteCommand(\"selectall\") && [\"span\", { class: \"ace_mobile-button\", action: \"selectall\" }, \"Select All\"],\n                selected && canExecuteCommand(\"copy\") && [\"span\", { class: \"ace_mobile-button\", action: \"copy\" }, \"Copy\"],\n                selected && canExecuteCommand(\"cut\") && [\"span\", { class: \"ace_mobile-button\", action: \"cut\" }, \"Cut\"],\n                clipboard && canExecuteCommand(\"paste\") && [\"span\", { class: \"ace_mobile-button\", action: \"paste\" }, \"Paste\"],\n                hasUndo && canExecuteCommand(\"undo\") && [\"span\", { class: \"ace_mobile-button\", action: \"undo\" }, \"Undo\"],\n                canExecuteCommand(\"find\") && [\"span\", { class: \"ace_mobile-button\", action: \"find\" }, \"Find\"],\n                canExecuteCommand(\"openCommandPalette\") && [\"span\", { class: \"ace_mobile-button\", action: \"openCommandPalette\" }, \"Palette\"]\n            ] : [\"span\"]), contextMenu.firstChild);\n        };\n        var canExecuteCommand = function (/** @type {string} */ cmd) {\n            return editor.commands.canExecute(cmd, editor);\n        };\n        var handleClick = function (e) {\n            var action = e.target.getAttribute(\"action\");\n            if (action == \"more\" || !isOpen) {\n                isOpen = !isOpen;\n                return updateMenu();\n            }\n            if (action == \"paste\") {\n                clipboard.readText().then(function (text) {\n                    editor.execCommand(action, text);\n                });\n            }\n            else if (action) {\n                if (action == \"cut\" || action == \"copy\") {\n                    if (clipboard)\n                        clipboard.writeText(editor.getCopyText());\n                    else\n                        document.execCommand(\"copy\");\n                }\n                editor.execCommand(action);\n            }\n            contextMenu.firstChild.style.display = \"none\";\n            isOpen = false;\n            if (action != \"openCommandPalette\")\n                editor.focus();\n        };\n        contextMenu = dom.buildDom([\"div\",\n            {\n                class: \"ace_mobile-menu\",\n                ontouchstart: function (e) {\n                    mode = \"menu\";\n                    e.stopPropagation();\n                    e.preventDefault();\n                    editor.textInput.focus();\n                },\n                ontouchend: function (e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    handleClick(e);\n                },\n                onclick: handleClick\n            },\n            [\"span\"],\n            [\"span\", { class: \"ace_mobile-button\", action: \"more\" }, \"...\"]\n        ], editor.container);\n    }\n    function showContextMenu() {\n        if (!editor.getOption(\"enableMobileMenu\")) {\n            if (contextMenu) {\n                hideContextMenu();\n            }\n            return;\n        }\n        if (!contextMenu)\n            createContextMenu();\n        var cursor = editor.selection.cursor;\n        var pagePos = editor.renderer.textToScreenCoordinates(cursor.row, cursor.column);\n        var leftOffset = editor.renderer.textToScreenCoordinates(0, 0).pageX;\n        var scrollLeft = editor.renderer.scrollLeft;\n        var rect = editor.container.getBoundingClientRect();\n        contextMenu.style.top = pagePos.pageY - rect.top - 3 + \"px\";\n        if (pagePos.pageX - rect.left < rect.width - 70) {\n            contextMenu.style.left = \"\";\n            contextMenu.style.right = \"10px\";\n        }\n        else {\n            contextMenu.style.right = \"\";\n            contextMenu.style.left = leftOffset + scrollLeft - rect.left + \"px\";\n        }\n        contextMenu.style.display = \"\";\n        contextMenu.firstChild.style.display = \"none\";\n        editor.on(\"input\", hideContextMenu);\n    }\n    function hideContextMenu(e) {\n        if (contextMenu)\n            contextMenu.style.display = \"none\";\n        editor.off(\"input\", hideContextMenu);\n    }\n    function handleLongTap() {\n        longTouchTimer = null;\n        clearTimeout(longTouchTimer);\n        var range = editor.selection.getRange();\n        var inSelection = range.contains(pos.row, pos.column);\n        if (range.isEmpty() || !inSelection) {\n            editor.selection.moveToPosition(pos);\n            editor.selection.selectWord();\n        }\n        mode = \"wait\";\n        showContextMenu();\n    }\n    function switchToSelectionMode() {\n        longTouchTimer = null;\n        clearTimeout(longTouchTimer);\n        editor.selection.moveToPosition(pos);\n        var range = clickCount >= 2\n            ? editor.selection.getLineRange(pos.row)\n            : editor.session.getBracketRange(pos);\n        if (range && !range.isEmpty()) {\n            editor.selection.setRange(range);\n        }\n        else {\n            editor.selection.selectWord();\n        }\n        mode = \"wait\";\n    }\n    event.addListener(el, \"contextmenu\", function (e) {\n        if (!pressed)\n            return;\n        var textarea = editor.textInput.getElement();\n        textarea.focus();\n    }, editor);\n    event.addListener(el, \"touchstart\", function (e) {\n        var touches = e.touches;\n        if (longTouchTimer || touches.length > 1) {\n            clearTimeout(longTouchTimer);\n            longTouchTimer = null;\n            touchStartT = -1;\n            mode = \"zoom\";\n            return;\n        }\n        pressed = editor.$mouseHandler.isMousePressed = true;\n        var h = editor.renderer.layerConfig.lineHeight;\n        var w = editor.renderer.layerConfig.lineHeight;\n        var t = e.timeStamp;\n        lastT = t;\n        var touchObj = touches[0];\n        var x = touchObj.clientX;\n        var y = touchObj.clientY;\n        if (Math.abs(startX - x) + Math.abs(startY - y) > h)\n            touchStartT = -1;\n        startX = e.clientX = x;\n        startY = e.clientY = y;\n        vX = vY = 0;\n        var ev = new MouseEvent(e, editor);\n        pos = ev.getDocumentPosition();\n        if (t - touchStartT < 500 && touches.length == 1 && !animationSteps) {\n            clickCount++;\n            e.preventDefault();\n            e.button = 0;\n            switchToSelectionMode();\n        }\n        else {\n            clickCount = 0;\n            var cursor = editor.selection.cursor;\n            var anchor = editor.selection.isEmpty() ? cursor : editor.selection.anchor;\n            var cursorPos = editor.renderer.$cursorLayer.getPixelPosition(cursor, true);\n            var anchorPos = editor.renderer.$cursorLayer.getPixelPosition(anchor, true);\n            var rect = editor.renderer.scroller.getBoundingClientRect();\n            var offsetTop = editor.renderer.layerConfig.offset;\n            var offsetLeft = editor.renderer.scrollLeft;\n            var weightedDistance = function (x, y) {\n                x = x / w;\n                y = y / h - 0.75;\n                return x * x + y * y;\n            };\n            if (e.clientX < rect.left) {\n                mode = \"zoom\";\n                return;\n            }\n            var diff1 = weightedDistance(e.clientX - rect.left - cursorPos.left + offsetLeft, e.clientY - rect.top - cursorPos.top + offsetTop);\n            var diff2 = weightedDistance(e.clientX - rect.left - anchorPos.left + offsetLeft, e.clientY - rect.top - anchorPos.top + offsetTop);\n            if (diff1 < 3.5 && diff2 < 3.5)\n                mode = diff1 > diff2 ? \"cursor\" : \"anchor\";\n            if (diff2 < 3.5)\n                mode = \"anchor\";\n            else if (diff1 < 3.5)\n                mode = \"cursor\";\n            else\n                mode = \"scroll\";\n            longTouchTimer = setTimeout(handleLongTap, 450);\n        }\n        touchStartT = t;\n    }, editor);\n    event.addListener(el, \"touchend\", function (e) {\n        pressed = editor.$mouseHandler.isMousePressed = false;\n        if (animationTimer)\n            clearInterval(animationTimer);\n        if (mode == \"zoom\") {\n            mode = \"\";\n            animationSteps = 0;\n        }\n        else if (longTouchTimer) {\n            editor.selection.moveToPosition(pos);\n            animationSteps = 0;\n            showContextMenu();\n        }\n        else if (mode == \"scroll\") {\n            animate();\n            hideContextMenu();\n        }\n        else {\n            showContextMenu();\n        }\n        clearTimeout(longTouchTimer);\n        longTouchTimer = null;\n    }, editor);\n    event.addListener(el, \"touchmove\", function (e) {\n        if (longTouchTimer) {\n            clearTimeout(longTouchTimer);\n            longTouchTimer = null;\n        }\n        var touches = e.touches;\n        if (touches.length > 1 || mode == \"zoom\")\n            return;\n        var touchObj = touches[0];\n        var wheelX = startX - touchObj.clientX;\n        var wheelY = startY - touchObj.clientY;\n        if (mode == \"wait\") {\n            if (wheelX * wheelX + wheelY * wheelY > 4)\n                mode = \"cursor\";\n            else\n                return e.preventDefault();\n        }\n        startX = touchObj.clientX;\n        startY = touchObj.clientY;\n        e.clientX = touchObj.clientX;\n        e.clientY = touchObj.clientY;\n        var t = e.timeStamp;\n        var dt = t - lastT;\n        lastT = t;\n        if (mode == \"scroll\") {\n            var mouseEvent = new MouseEvent(e, editor);\n            mouseEvent.speed = 1;\n            mouseEvent.wheelX = wheelX;\n            mouseEvent.wheelY = wheelY;\n            if (10 * Math.abs(wheelX) < Math.abs(wheelY))\n                wheelX = 0;\n            if (10 * Math.abs(wheelY) < Math.abs(wheelX))\n                wheelY = 0;\n            if (dt != 0) {\n                vX = wheelX / dt;\n                vY = wheelY / dt;\n            }\n            editor._emit(\"mousewheel\", mouseEvent);\n            if (!mouseEvent.propagationStopped) {\n                vX = vY = 0;\n            }\n        }\n        else {\n            var ev = new MouseEvent(e, editor);\n            var pos = ev.getDocumentPosition();\n            if (mode == \"cursor\")\n                editor.selection.moveCursorToPosition(pos);\n            else if (mode == \"anchor\")\n                editor.selection.setSelectionAnchor(pos.row, pos.column);\n            editor.renderer.scrollCursorIntoView(pos);\n            e.preventDefault();\n        }\n    }, editor);\n    function animate() {\n        animationSteps += 60;\n        animationTimer = setInterval(function () {\n            if (animationSteps-- <= 0) {\n                clearInterval(animationTimer);\n                animationTimer = null;\n            }\n            if (Math.abs(vX) < 0.01)\n                vX = 0;\n            if (Math.abs(vY) < 0.01)\n                vY = 0;\n            if (animationSteps < 20)\n                vX = 0.9 * vX;\n            if (animationSteps < 20)\n                vY = 0.9 * vY;\n            var oldScrollTop = editor.session.getScrollTop();\n            editor.renderer.scrollBy(10 * vX, 10 * vY);\n            if (oldScrollTop == editor.session.getScrollTop())\n                animationSteps = 0;\n        }, 10);\n    }\n};\n\n});\n\nace.define(\"ace/mouse/mouse_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/mouse/default_handlers\",\"ace/mouse/default_gutter_handler\",\"ace/mouse/mouse_event\",\"ace/mouse/dragdrop_handler\",\"ace/mouse/touch_handler\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar DefaultHandlers = require(\"./default_handlers\").DefaultHandlers;\nvar DefaultGutterHandler = require(\"./default_gutter_handler\").GutterHandler;\nvar MouseEvent = require(\"./mouse_event\").MouseEvent;\nvar DragdropHandler = require(\"./dragdrop_handler\").DragdropHandler;\nvar addTouchListeners = require(\"./touch_handler\").addTouchListeners;\nvar config = require(\"../config\");\nvar MouseHandler = /** @class */ (function () {\n    function MouseHandler(editor) { this.$dragDelay; this.$dragEnabled; this.$mouseMoved; this.mouseEvent; this.$focusTimeout;\n        var _self = this;\n        this.editor = editor;\n        new DefaultHandlers(this);\n        new DefaultGutterHandler(this);\n        new DragdropHandler(this);\n        var focusEditor = function (e) {\n            var windowBlurred = !document.hasFocus || !document.hasFocus()\n                || !editor.isFocused() && document.activeElement == (editor.textInput && editor.textInput.getElement());\n            if (windowBlurred)\n                window.focus();\n            editor.focus();\n            setTimeout(function () {\n                if (!editor.isFocused())\n                    editor.focus();\n            });\n        };\n        var mouseTarget = editor.renderer.getMouseEventTarget();\n        event.addListener(mouseTarget, \"click\", this.onMouseEvent.bind(this, \"click\"), editor);\n        event.addListener(mouseTarget, \"mousemove\", this.onMouseMove.bind(this, \"mousemove\"), editor);\n        event.addMultiMouseDownListener([\n            mouseTarget,\n            editor.renderer.scrollBarV && editor.renderer.scrollBarV.inner,\n            editor.renderer.scrollBarH && editor.renderer.scrollBarH.inner,\n            editor.textInput && editor.textInput.getElement()\n        ].filter(Boolean), [400, 300, 250], this, \"onMouseEvent\", editor);\n        event.addMouseWheelListener(editor.container, this.onMouseWheel.bind(this, \"mousewheel\"), editor);\n        addTouchListeners(editor.container, editor);\n        var gutterEl = editor.renderer.$gutter;\n        event.addListener(gutterEl, \"mousedown\", this.onMouseEvent.bind(this, \"guttermousedown\"), editor);\n        event.addListener(gutterEl, \"click\", this.onMouseEvent.bind(this, \"gutterclick\"), editor);\n        event.addListener(gutterEl, \"dblclick\", this.onMouseEvent.bind(this, \"gutterdblclick\"), editor);\n        event.addListener(gutterEl, \"mousemove\", this.onMouseEvent.bind(this, \"guttermousemove\"), editor);\n        event.addListener(mouseTarget, \"mousedown\", focusEditor, editor);\n        event.addListener(gutterEl, \"mousedown\", focusEditor, editor);\n        if (useragent.isIE && editor.renderer.scrollBarV) {\n            event.addListener(editor.renderer.scrollBarV.element, \"mousedown\", focusEditor, editor);\n            event.addListener(editor.renderer.scrollBarH.element, \"mousedown\", focusEditor, editor);\n        }\n        editor.on(\"mousemove\", function (e) {\n            if (_self.state || _self.$dragDelay || !_self.$dragEnabled)\n                return;\n            var character = editor.renderer.screenToTextCoordinates(e.x, e.y);\n            var range = editor.session.selection.getRange();\n            var renderer = editor.renderer;\n            if (!range.isEmpty() && range.insideStart(character.row, character.column)) {\n                renderer.setCursorStyle(\"default\");\n            }\n            else {\n                renderer.setCursorStyle(\"\");\n            }\n        }, //@ts-expect-error TODO: seems mistyping - should be boolean\n        editor);\n    }\n    MouseHandler.prototype.onMouseEvent = function (name, e) {\n        if (!this.editor.session)\n            return;\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    };\n    MouseHandler.prototype.onMouseMove = function (name, e) {\n        var listeners = this.editor._eventRegistry && this.editor._eventRegistry.mousemove;\n        if (!listeners || !listeners.length)\n            return;\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    };\n    MouseHandler.prototype.onMouseWheel = function (name, e) {\n        var mouseEvent = new MouseEvent(e, this.editor);\n        mouseEvent.speed = this.$scrollSpeed * 2;\n        mouseEvent.wheelX = e.wheelX;\n        mouseEvent.wheelY = e.wheelY;\n        this.editor._emit(name, mouseEvent);\n    };\n    MouseHandler.prototype.setState = function (state) {\n        this.state = state;\n    };\n    MouseHandler.prototype.captureMouse = function (ev, mouseMoveHandler) {\n        this.x = ev.x;\n        this.y = ev.y;\n        this.isMousePressed = true;\n        var editor = this.editor;\n        var renderer = this.editor.renderer;\n        renderer.$isMousePressed = true;\n        var self = this;\n        var continueCapture = true;\n        var onMouseMove = function (e) {\n            if (!e)\n                return;\n            if (useragent.isWebKit && !e.which && self.releaseMouse)\n                return self.releaseMouse();\n            self.x = e.clientX;\n            self.y = e.clientY;\n            mouseMoveHandler && mouseMoveHandler(e);\n            self.mouseEvent = new MouseEvent(e, self.editor);\n            self.$mouseMoved = true;\n        };\n        var onCaptureEnd = function (e) {\n            editor.off(\"beforeEndOperation\", onOperationEnd);\n            continueCapture = false;\n            if (editor.session)\n                onCaptureUpdate();\n            self[self.state + \"End\"] && self[self.state + \"End\"](e);\n            self.state = \"\";\n            self.isMousePressed = renderer.$isMousePressed = false;\n            if (renderer.$keepTextAreaAtCursor)\n                renderer.$moveTextAreaToCursor();\n            self.$onCaptureMouseMove = self.releaseMouse = null;\n            e && self.onMouseEvent(\"mouseup\", e);\n            editor.endOperation();\n        };\n        var onCaptureUpdate = function () {\n            self[self.state] && self[self.state]();\n            self.$mouseMoved = false;\n        };\n        var onCaptureInterval = function () {\n            if (continueCapture) {\n                onCaptureUpdate();\n                event.nextFrame(onCaptureInterval);\n            }\n        };\n        if (useragent.isOldIE && ev.domEvent.type == \"dblclick\") {\n            return setTimeout(function () { onCaptureEnd(ev); });\n        }\n        var onOperationEnd = function (e) {\n            if (!self.releaseMouse)\n                return;\n            if (editor.curOp.command.name && editor.curOp.selectionChanged) {\n                self[self.state + \"End\"] && self[self.state + \"End\"]();\n                self.state = \"\";\n                self.releaseMouse();\n            }\n        };\n        editor.on(\"beforeEndOperation\", onOperationEnd);\n        editor.startOperation({ command: { name: \"mouse\" } });\n        self.$onCaptureMouseMove = onMouseMove;\n        self.releaseMouse = event.capture(this.editor.container, onMouseMove, onCaptureEnd);\n        onCaptureInterval();\n    };\n    MouseHandler.prototype.cancelContextMenu = function () {\n        var stop = function (e) {\n            if (e && e.domEvent && e.domEvent.type != \"contextmenu\")\n                return;\n            this.editor.off(\"nativecontextmenu\", stop);\n            if (e && e.domEvent)\n                event.stopEvent(e.domEvent);\n        }.bind(this);\n        setTimeout(stop, 10);\n        this.editor.on(\"nativecontextmenu\", stop);\n    };\n    MouseHandler.prototype.destroy = function () {\n        if (this.releaseMouse)\n            this.releaseMouse();\n        if (this.$tooltip)\n            this.$tooltip.destroy();\n    };\n    return MouseHandler;\n}());\nMouseHandler.prototype.releaseMouse = null;\nconfig.defineOptions(MouseHandler.prototype, \"mouseHandler\", {\n    scrollSpeed: { initialValue: 2 },\n    dragDelay: { initialValue: (useragent.isMac ? 150 : 0) },\n    dragEnabled: { initialValue: true },\n    focusTimeout: { initialValue: 0 },\n});\nexports.MouseHandler = MouseHandler;\n\n});\n\nace.define(\"ace/mouse/fold_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar FoldHandler = /** @class */ (function () {\n    function FoldHandler(editor) {\n        editor.on(\"click\", function (e) {\n            var position = e.getDocumentPosition();\n            var session = editor.session;\n            var fold = session.getFoldAt(position.row, position.column, 1);\n            if (fold) {\n                if (e.getAccelKey())\n                    session.removeFold(fold);\n                else\n                    session.expandFold(fold);\n                e.stop();\n            }\n            var target = e.domEvent && e.domEvent.target;\n            if (target && dom.hasCssClass(target, \"ace_inline_button\")) {\n                if (dom.hasCssClass(target, \"ace_toggle_wrap\")) {\n                    session.setOption(\"wrap\", !session.getUseWrapMode());\n                    editor.renderer.scrollCursorIntoView();\n                }\n            }\n        });\n        editor.on(\"gutterclick\", function (e) {\n            var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n            if (gutterRegion == \"foldWidgets\") {\n                var row = e.getDocumentPosition().row;\n                var session = editor.session;\n                if (session.foldWidgets && session.foldWidgets[row])\n                    editor.session.onFoldWidgetClick(row, e);\n                if (!editor.isFocused())\n                    editor.focus();\n                e.stop();\n            }\n        });\n        editor.on(\"gutterdblclick\", function (e) {\n            var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n            if (gutterRegion == \"foldWidgets\") {\n                var row = e.getDocumentPosition().row;\n                var session = editor.session;\n                var data = session.getParentFoldRangeData(row, true);\n                var range = data.range || data.firstRange;\n                if (range) {\n                    row = range.start.row;\n                    var fold = session.getFoldAt(row, session.getLine(row).length, 1);\n                    if (fold) {\n                        session.removeFold(fold);\n                    }\n                    else {\n                        session.addFold(\"...\", range);\n                        editor.renderer.scrollCursorIntoView({ row: range.start.row, column: 0 });\n                    }\n                }\n                e.stop();\n            }\n        });\n    }\n    return FoldHandler;\n}());\nexports.FoldHandler = FoldHandler;\n\n});\n\nace.define(\"ace/keyboard/keybinding\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/event\"], function(require, exports, module){\"use strict\";\nvar keyUtil = require(\"../lib/keys\");\nvar event = require(\"../lib/event\");\nvar KeyBinding = /** @class */ (function () {\n    function KeyBinding(editor) {\n        this.$editor = editor;\n        this.$data = { editor: editor };\n        this.$handlers = [];\n        this.setDefaultHandler(editor.commands);\n    }\n    KeyBinding.prototype.setDefaultHandler = function (kb) {\n        this.removeKeyboardHandler(this.$defaultHandler);\n        this.$defaultHandler = kb;\n        this.addKeyboardHandler(kb, 0);\n    };\n    KeyBinding.prototype.setKeyboardHandler = function (kb) {\n        var h = this.$handlers;\n        if (h[h.length - 1] == kb)\n            return;\n        while (h[h.length - 1] && h[h.length - 1] != this.$defaultHandler)\n            this.removeKeyboardHandler(h[h.length - 1]);\n        this.addKeyboardHandler(kb, 1);\n    };\n    KeyBinding.prototype.addKeyboardHandler = function (kb, pos) {\n        if (!kb)\n            return;\n        if (typeof kb == \"function\" && !kb.handleKeyboard)\n            kb.handleKeyboard = kb;\n        var i = this.$handlers.indexOf(kb);\n        if (i != -1)\n            this.$handlers.splice(i, 1);\n        if (pos == undefined)\n            this.$handlers.push(kb);\n        else\n            this.$handlers.splice(pos, 0, kb);\n        if (i == -1 && kb.attach)\n            kb.attach(this.$editor);\n    };\n    KeyBinding.prototype.removeKeyboardHandler = function (kb) {\n        var i = this.$handlers.indexOf(kb);\n        if (i == -1)\n            return false;\n        this.$handlers.splice(i, 1);\n        kb.detach && kb.detach(this.$editor);\n        return true;\n    };\n    KeyBinding.prototype.getKeyboardHandler = function () {\n        return this.$handlers[this.$handlers.length - 1];\n    };\n    KeyBinding.prototype.getStatusText = function () {\n        var data = this.$data;\n        var editor = data.editor;\n        return this.$handlers.map(function (h) {\n            return h.getStatusText && h.getStatusText(editor, data) || \"\";\n        }).filter(Boolean).join(\" \");\n    };\n    KeyBinding.prototype.$callKeyboardHandlers = function (hashId, keyString, keyCode, e) {\n        var toExecute;\n        var success = false;\n        var commands = this.$editor.commands;\n        for (var i = this.$handlers.length; i--;) {\n            toExecute = this.$handlers[i].handleKeyboard(\n            this.$data, hashId, keyString, keyCode, e);\n            if (!toExecute || !toExecute.command)\n                continue;\n            if (toExecute.command == \"null\") {\n                success = true;\n            }\n            else {\n                success = commands.exec(toExecute.command, this.$editor, toExecute.args, e);\n            }\n            if (success && e && hashId != -1 &&\n                toExecute[\"passEvent\"] != true && toExecute.command[\"passEvent\"] != true) {\n                event.stopEvent(e);\n            }\n            if (success)\n                break;\n        }\n        if (!success && hashId == -1) {\n            toExecute = { command: \"insertstring\" };\n            success = commands.exec(\"insertstring\", this.$editor, keyString);\n        }\n        if (success && this.$editor._signal)\n            this.$editor._signal(\"keyboardActivity\", toExecute);\n        return success;\n    };\n    KeyBinding.prototype.onCommandKey = function (e, hashId, keyCode) {\n        var keyString = keyUtil.keyCodeToString(keyCode);\n        return this.$callKeyboardHandlers(hashId, keyString, keyCode, e);\n    };\n    KeyBinding.prototype.onTextInput = function (text) {\n        return this.$callKeyboardHandlers(-1, text);\n    };\n    return KeyBinding;\n}());\nexports.KeyBinding = KeyBinding;\n\n});\n\nace.define(\"ace/lib/bidiutil\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar ArabicAlefBetIntervalsBegine = ['\\u0621', '\\u0641'];\nvar ArabicAlefBetIntervalsEnd = ['\\u063A', '\\u064a'];\nvar dir = 0, hiLevel = 0;\nvar lastArabic = false, hasUBAT_AL = false, hasUBAT_B = false, hasUBAT_S = false, hasBlockSep = false, hasSegSep = false;\nvar impTab_LTR = [ [0, 3, 0, 1, 0, 0, 0], [0, 3, 0, 1, 2, 2, 0], [0, 3, 0, 0x11, 2, 0, 1], [0, 3, 5, 5, 4, 1, 0], [0, 3, 0x15, 0x15, 4, 0, 1], [0, 3, 5, 5, 4, 2, 0]\n];\nvar impTab_RTL = [ [2, 0, 1, 1, 0, 1, 0], [2, 0, 1, 1, 0, 2, 0], [2, 0, 2, 1, 3, 2, 0], [2, 0, 2, 0x21, 3, 1, 1]\n];\nvar LTR = 0, RTL = 1;\nvar L = 0;\nvar R = 1;\nvar EN = 2;\nvar AN = 3;\nvar ON = 4;\nvar B = 5;\nvar S = 6;\nvar AL = 7;\nvar WS = 8;\nvar CS = 9;\nvar ES = 10;\nvar ET = 11;\nvar NSM = 12;\nvar LRE = 13;\nvar RLE = 14;\nvar PDF = 15;\nvar LRO = 16;\nvar RLO = 17;\nvar BN = 18;\nvar UnicodeTBL00 = [\n    BN, BN, BN, BN, BN, BN, BN, BN, BN, S, B, S, WS, B, BN, BN,\n    BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, B, B, B, S,\n    WS, ON, ON, ET, ET, ET, ON, ON, ON, ON, ON, ES, CS, ES, CS, CS,\n    EN, EN, EN, EN, EN, EN, EN, EN, EN, EN, CS, ON, ON, ON, ON, ON,\n    ON, L, L, L, L, L, L, L, L, L, L, L, L, L, L, L,\n    L, L, L, L, L, L, L, L, L, L, L, ON, ON, ON, ON, ON,\n    ON, L, L, L, L, L, L, L, L, L, L, L, L, L, L, L,\n    L, L, L, L, L, L, L, L, L, L, L, ON, ON, ON, ON, BN,\n    BN, BN, BN, BN, BN, B, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN,\n    BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN, BN,\n    CS, ON, ET, ET, ET, ET, ON, ON, ON, ON, L, ON, ON, BN, ON, ON,\n    ET, ET, EN, EN, ON, L, ON, ON, ON, EN, L, ON, ON, ON, ON, ON\n];\nvar UnicodeTBL20 = [\n    WS, WS, WS, WS, WS, WS, WS, WS, WS, WS, WS, BN, BN, BN, L, R,\n    ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON,\n    ON, ON, ON, ON, ON, ON, ON, ON, WS, B, LRE, RLE, PDF, LRO, RLO, CS,\n    ET, ET, ET, ET, ET, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON,\n    ON, ON, ON, ON, CS, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON,\n    ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, ON, WS\n];\nfunction _computeLevels(chars, levels, len, charTypes) {\n    var impTab = dir ? impTab_RTL : impTab_LTR, prevState = null, newClass = null, newLevel = null, newState = 0, action = null, cond = null, condPos = -1, i = null, ix = null, classes = [];\n    if (!charTypes) {\n        for (i = 0, charTypes = []; i < len; i++) {\n            charTypes[i] = _getCharacterType(chars[i]);\n        }\n    }\n    hiLevel = dir;\n    lastArabic = false;\n    hasUBAT_AL = false;\n    hasUBAT_B = false;\n    hasUBAT_S = false;\n    for (ix = 0; ix < len; ix++) {\n        prevState = newState;\n        classes[ix] = newClass = _getCharClass(chars, charTypes, classes, ix);\n        newState = impTab[prevState][newClass];\n        action = newState & 0xF0;\n        newState &= 0x0F;\n        levels[ix] = newLevel = impTab[newState][5];\n        if (action > 0) {\n            if (action == 0x10) {\n                for (i = condPos; i < ix; i++) {\n                    levels[i] = 1;\n                }\n                condPos = -1;\n            }\n            else {\n                condPos = -1;\n            }\n        }\n        cond = impTab[newState][6];\n        if (cond) {\n            if (condPos == -1) {\n                condPos = ix;\n            }\n        }\n        else {\n            if (condPos > -1) {\n                for (i = condPos; i < ix; i++) {\n                    levels[i] = newLevel;\n                }\n                condPos = -1;\n            }\n        }\n        if (charTypes[ix] == B) {\n            levels[ix] = 0;\n        }\n        hiLevel |= newLevel;\n    }\n    if (hasUBAT_S) {\n        for (i = 0; i < len; i++) {\n            if (charTypes[i] == S) {\n                levels[i] = dir;\n                for (var j = i - 1; j >= 0; j--) {\n                    if (charTypes[j] == WS) {\n                        levels[j] = dir;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n}\nfunction _invertLevel(lev, levels, _array) {\n    if (hiLevel < lev) {\n        return;\n    }\n    if (lev == 1 && dir == RTL && !hasUBAT_B) {\n        _array.reverse();\n        return;\n    }\n    var len = _array.length, start = 0, end, lo, hi, tmp;\n    while (start < len) {\n        if (levels[start] >= lev) {\n            end = start + 1;\n            while (end < len && levels[end] >= lev) {\n                end++;\n            }\n            for (lo = start, hi = end - 1; lo < hi; lo++, hi--) {\n                tmp = _array[lo];\n                _array[lo] = _array[hi];\n                _array[hi] = tmp;\n            }\n            start = end;\n        }\n        start++;\n    }\n}\nfunction _getCharClass(chars, types, classes, ix) {\n    var cType = types[ix], wType, nType, len, i;\n    switch (cType) {\n        case L:\n        case R:\n            lastArabic = false;\n        case ON:\n        case AN:\n            return cType;\n        case EN:\n            return lastArabic ? AN : EN;\n        case AL:\n            lastArabic = true;\n            hasUBAT_AL = true;\n            return R;\n        case WS:\n            return ON;\n        case CS:\n            if (ix < 1 || (ix + 1) >= types.length ||\n                ((wType = classes[ix - 1]) != EN && wType != AN) ||\n                ((nType = types[ix + 1]) != EN && nType != AN)) {\n                return ON;\n            }\n            if (lastArabic) {\n                nType = AN;\n            }\n            return nType == wType ? nType : ON;\n        case ES:\n            wType = ix > 0 ? classes[ix - 1] : B;\n            if (wType == EN && (ix + 1) < types.length && types[ix + 1] == EN) {\n                return EN;\n            }\n            return ON;\n        case ET:\n            if (ix > 0 && classes[ix - 1] == EN) {\n                return EN;\n            }\n            if (lastArabic) {\n                return ON;\n            }\n            i = ix + 1;\n            len = types.length;\n            while (i < len && types[i] == ET) {\n                i++;\n            }\n            if (i < len && types[i] == EN) {\n                return EN;\n            }\n            return ON;\n        case NSM:\n            len = types.length;\n            i = ix + 1;\n            while (i < len && types[i] == NSM) {\n                i++;\n            }\n            if (i < len) {\n                var c = chars[ix], rtlCandidate = (c >= 0x0591 && c <= 0x08FF) || c == 0xFB1E;\n                wType = types[i];\n                if (rtlCandidate && (wType == R || wType == AL)) {\n                    return R;\n                }\n            }\n            if (ix < 1 || (wType = types[ix - 1]) == B) {\n                return ON;\n            }\n            return classes[ix - 1];\n        case B:\n            lastArabic = false;\n            hasUBAT_B = true;\n            return dir;\n        case S:\n            hasUBAT_S = true;\n            return ON;\n        case LRE:\n        case RLE:\n        case LRO:\n        case RLO:\n        case PDF:\n            lastArabic = false;\n        case BN:\n            return ON;\n    }\n}\nfunction _getCharacterType(ch) {\n    var uc = ch.charCodeAt(0), hi = uc >> 8;\n    if (hi == 0) {\n        return ((uc > 0x00BF) ? L : UnicodeTBL00[uc]);\n    }\n    else if (hi == 5) {\n        return (/[\\u0591-\\u05f4]/.test(ch) ? R : L);\n    }\n    else if (hi == 6) {\n        if (/[\\u0610-\\u061a\\u064b-\\u065f\\u06d6-\\u06e4\\u06e7-\\u06ed]/.test(ch))\n            return NSM;\n        else if (/[\\u0660-\\u0669\\u066b-\\u066c]/.test(ch))\n            return AN;\n        else if (uc == 0x066A)\n            return ET;\n        else if (/[\\u06f0-\\u06f9]/.test(ch))\n            return EN;\n        else\n            return AL;\n    }\n    else if (hi == 0x20 && uc <= 0x205F) {\n        return UnicodeTBL20[uc & 0xFF];\n    }\n    else if (hi == 0xFE) {\n        return (uc >= 0xFE70 ? AL : ON);\n    }\n    return ON;\n}\nfunction _isArabicDiacritics(ch) {\n    return (ch >= '\\u064b' && ch <= '\\u0655');\n}\nexports.L = L;\nexports.R = R;\nexports.EN = EN;\nexports.ON_R = 3;\nexports.AN = 4;\nexports.R_H = 5;\nexports.B = 6;\nexports.RLE = 7;\nexports.DOT = \"\\xB7\";\nexports.doBidiReorder = function (text, textCharTypes, isRtl) {\n    if (text.length < 2)\n        return {};\n    var chars = text.split(\"\"), logicalFromVisual = new Array(chars.length), bidiLevels = new Array(chars.length), levels = [];\n    dir = isRtl ? RTL : LTR;\n    _computeLevels(chars, levels, chars.length, textCharTypes);\n    for (var i = 0; i < logicalFromVisual.length; logicalFromVisual[i] = i, i++)\n        ;\n    _invertLevel(2, levels, logicalFromVisual);\n    _invertLevel(1, levels, logicalFromVisual);\n    for (var i = 0; i < logicalFromVisual.length - 1; i++) { //fix levels to reflect character width\n        if (textCharTypes[i] === AN) {\n            levels[i] = exports.AN;\n        }\n        else if (levels[i] === R && ((textCharTypes[i] > AL && textCharTypes[i] < LRE)\n            || textCharTypes[i] === ON || textCharTypes[i] === BN)) {\n            levels[i] = exports.ON_R;\n        }\n        else if ((i > 0 && chars[i - 1] === '\\u0644') && /\\u0622|\\u0623|\\u0625|\\u0627/.test(chars[i])) {\n            levels[i - 1] = levels[i] = exports.R_H;\n            i++;\n        }\n    }\n    if (chars[chars.length - 1] === exports.DOT)\n        levels[chars.length - 1] = exports.B;\n    if (chars[0] === '\\u202B')\n        levels[0] = exports.RLE;\n    for (var i = 0; i < logicalFromVisual.length; i++) {\n        bidiLevels[i] = levels[logicalFromVisual[i]];\n    }\n    return { 'logicalFromVisual': logicalFromVisual, 'bidiLevels': bidiLevels };\n};\nexports.hasBidiCharacters = function (text, textCharTypes) {\n    var ret = false;\n    for (var i = 0; i < text.length; i++) {\n        textCharTypes[i] = _getCharacterType(text.charAt(i));\n        if (!ret && (textCharTypes[i] == R || textCharTypes[i] == AL || textCharTypes[i] == AN))\n            ret = true;\n    }\n    return ret;\n};\nexports.getVisualFromLogicalIdx = function (logIdx, rowMap) {\n    for (var i = 0; i < rowMap.logicalFromVisual.length; i++) {\n        if (rowMap.logicalFromVisual[i] == logIdx)\n            return i;\n    }\n    return 0;\n};\n\n});\n\nace.define(\"ace/bidihandler\",[\"require\",\"exports\",\"module\",\"ace/lib/bidiutil\",\"ace/lib/lang\"], function(require, exports, module){\"use strict\";\nvar bidiUtil = require(\"./lib/bidiutil\");\nvar lang = require(\"./lib/lang\");\nvar bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac\\u202B]/;\nvar BidiHandler = /** @class */ (function () {\n    function BidiHandler(session) {\n        this.session = session;\n        this.bidiMap = {};\n        this.currentRow = null;\n        this.bidiUtil = bidiUtil;\n        this.charWidths = [];\n        this.EOL = \"\\xAC\";\n        this.showInvisibles = true;\n        this.isRtlDir = false;\n        this.$isRtl = false;\n        this.line = \"\";\n        this.wrapIndent = 0;\n        this.EOF = \"\\xB6\";\n        this.RLE = \"\\u202B\";\n        this.contentWidth = 0;\n        this.fontMetrics = null;\n        this.rtlLineOffset = 0;\n        this.wrapOffset = 0;\n        this.isMoveLeftOperation = false;\n        this.seenBidi = bidiRE.test(session.getValue());\n    }\n    BidiHandler.prototype.isBidiRow = function (screenRow, docRow, splitIndex) {\n        if (!this.seenBidi)\n            return false;\n        if (screenRow !== this.currentRow) {\n            this.currentRow = screenRow;\n            this.updateRowLine(docRow, splitIndex);\n            this.updateBidiMap();\n        }\n        return this.bidiMap.bidiLevels;\n    };\n    BidiHandler.prototype.onChange = function (delta) {\n        if (!this.seenBidi) {\n            if (delta.action == \"insert\" && bidiRE.test(delta.lines.join(\"\\n\"))) {\n                this.seenBidi = true;\n                this.currentRow = null;\n            }\n        }\n        else {\n            this.currentRow = null;\n        }\n    };\n    BidiHandler.prototype.getDocumentRow = function () {\n        var docRow = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var index = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            if (index >= 0)\n                docRow = this.session.$docRowCache[index];\n        }\n        return docRow;\n    };\n    BidiHandler.prototype.getSplitIndex = function () {\n        var splitIndex = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var currentIndex, prevIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            while (this.currentRow - splitIndex > 0) {\n                currentIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow - splitIndex - 1);\n                if (currentIndex !== prevIndex)\n                    break;\n                prevIndex = currentIndex;\n                splitIndex++;\n            }\n        }\n        else {\n            splitIndex = this.currentRow;\n        }\n        return splitIndex;\n    };\n    BidiHandler.prototype.updateRowLine = function (docRow, splitIndex) {\n        if (docRow === undefined)\n            docRow = this.getDocumentRow();\n        var isLastRow = (docRow === this.session.getLength() - 1), endOfLine = isLastRow ? this.EOF : this.EOL;\n        this.wrapIndent = 0;\n        this.line = this.session.getLine(docRow);\n        this.isRtlDir = this.$isRtl || this.line.charAt(0) === this.RLE;\n        if (this.session.$useWrapMode) {\n            var splits = this.session.$wrapData[docRow];\n            if (splits) {\n                if (splitIndex === undefined)\n                    splitIndex = this.getSplitIndex();\n                if (splitIndex > 0 && splits.length) {\n                    this.wrapIndent = splits.indent;\n                    this.wrapOffset = this.wrapIndent * this.charWidths[bidiUtil.L];\n                    this.line = (splitIndex < splits.length) ?\n                        this.line.substring(splits[splitIndex - 1], splits[splitIndex]) :\n                        this.line.substring(splits[splits.length - 1]);\n                }\n                else {\n                    this.line = this.line.substring(0, splits[splitIndex]);\n                }\n                if (splitIndex == splits.length) {\n                    this.line += (this.showInvisibles) ? endOfLine : bidiUtil.DOT;\n                }\n            }\n        }\n        else {\n            this.line += this.showInvisibles ? endOfLine : bidiUtil.DOT;\n        }\n        var session = this.session, shift = 0, size;\n        this.line = this.line.replace(/\\t|[\\u1100-\\u2029, \\u202F-\\uFFE6]/g, function (ch, i) {\n            if (ch === '\\t' || session.isFullWidth(ch.charCodeAt(0))) {\n                size = (ch === '\\t') ? session.getScreenTabSize(i + shift) : 2;\n                shift += size - 1;\n                return lang.stringRepeat(bidiUtil.DOT, size);\n            }\n            return ch;\n        });\n        if (this.isRtlDir) {\n            this.fontMetrics.$main.textContent = (this.line.charAt(this.line.length - 1) == bidiUtil.DOT) ? this.line.substr(0, this.line.length - 1) : this.line;\n            this.rtlLineOffset = this.contentWidth - this.fontMetrics.$main.getBoundingClientRect().width;\n        }\n    };\n    BidiHandler.prototype.updateBidiMap = function () {\n        var textCharTypes = [];\n        if (bidiUtil.hasBidiCharacters(this.line, textCharTypes) || this.isRtlDir) {\n            this.bidiMap = bidiUtil.doBidiReorder(this.line, textCharTypes, this.isRtlDir);\n        }\n        else {\n            this.bidiMap = {};\n        }\n    };\n    BidiHandler.prototype.markAsDirty = function () {\n        this.currentRow = null;\n    };\n    BidiHandler.prototype.updateCharacterWidths = function (fontMetrics) {\n        if (this.characterWidth === fontMetrics.$characterSize.width)\n            return;\n        this.fontMetrics = fontMetrics;\n        var characterWidth = this.characterWidth = fontMetrics.$characterSize.width;\n        var bidiCharWidth = fontMetrics.$measureCharWidth(\"\\u05d4\");\n        this.charWidths[bidiUtil.L] = this.charWidths[bidiUtil.EN] = this.charWidths[bidiUtil.ON_R] = characterWidth;\n        this.charWidths[bidiUtil.R] = this.charWidths[bidiUtil.AN] = bidiCharWidth;\n        this.charWidths[bidiUtil.R_H] = bidiCharWidth * 0.45;\n        this.charWidths[bidiUtil.B] = this.charWidths[bidiUtil.RLE] = 0;\n        this.currentRow = null;\n    };\n    BidiHandler.prototype.setShowInvisibles = function (showInvisibles) {\n        this.showInvisibles = showInvisibles;\n        this.currentRow = null;\n    };\n    BidiHandler.prototype.setEolChar = function (eolChar) {\n        this.EOL = eolChar;\n    };\n    BidiHandler.prototype.setContentWidth = function (width) {\n        this.contentWidth = width;\n    };\n    BidiHandler.prototype.isRtlLine = function (row) {\n        if (this.$isRtl)\n            return true;\n        if (row != undefined)\n            return (this.session.getLine(row).charAt(0) == this.RLE);\n        else\n            return this.isRtlDir;\n    };\n    BidiHandler.prototype.setRtlDirection = function (editor, isRtlDir) {\n        var cursor = editor.getCursorPosition();\n        for (var row = editor.selection.getSelectionAnchor().row; row <= cursor.row; row++) {\n            if (!isRtlDir && editor.session.getLine(row).charAt(0) === editor.session.$bidiHandler.RLE)\n                editor.session.doc.removeInLine(row, 0, 1);\n            else if (isRtlDir && editor.session.getLine(row).charAt(0) !== editor.session.$bidiHandler.RLE)\n                editor.session.doc.insert({ column: 0, row: row }, editor.session.$bidiHandler.RLE);\n        }\n    };\n    BidiHandler.prototype.getPosLeft = function (col) {\n        col -= this.wrapIndent;\n        var leftBoundary = (this.line.charAt(0) === this.RLE) ? 1 : 0;\n        var logicalIdx = (col > leftBoundary) ? (this.session.getOverwrite() ? col : col - 1) : leftBoundary;\n        var visualIdx = bidiUtil.getVisualFromLogicalIdx(logicalIdx, this.bidiMap), levels = this.bidiMap.bidiLevels, left = 0;\n        if (!this.session.getOverwrite() && col <= leftBoundary && levels[visualIdx] % 2 !== 0)\n            visualIdx++;\n        for (var i = 0; i < visualIdx; i++) {\n            left += this.charWidths[levels[i]];\n        }\n        if (!this.session.getOverwrite() && (col > leftBoundary) && (levels[visualIdx] % 2 === 0))\n            left += this.charWidths[levels[visualIdx]];\n        if (this.wrapIndent)\n            left += this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n        if (this.isRtlDir)\n            left += this.rtlLineOffset;\n        return left;\n    };\n    BidiHandler.prototype.getSelections = function (startCol, endCol) {\n        var map = this.bidiMap, levels = map.bidiLevels, level, selections = [], offset = 0, selColMin = Math.min(startCol, endCol) - this.wrapIndent, selColMax = Math.max(startCol, endCol) - this.wrapIndent, isSelected = false, isSelectedPrev = false, selectionStart = 0;\n        if (this.wrapIndent)\n            offset += this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n        for (var logIdx, visIdx = 0; visIdx < levels.length; visIdx++) {\n            logIdx = map.logicalFromVisual[visIdx];\n            level = levels[visIdx];\n            isSelected = (logIdx >= selColMin) && (logIdx < selColMax);\n            if (isSelected && !isSelectedPrev) {\n                selectionStart = offset;\n            }\n            else if (!isSelected && isSelectedPrev) {\n                selections.push({ left: selectionStart, width: offset - selectionStart });\n            }\n            offset += this.charWidths[level];\n            isSelectedPrev = isSelected;\n        }\n        if (isSelected && (visIdx === levels.length)) {\n            selections.push({ left: selectionStart, width: offset - selectionStart });\n        }\n        if (this.isRtlDir) {\n            for (var i = 0; i < selections.length; i++) {\n                selections[i].left += this.rtlLineOffset;\n            }\n        }\n        return selections;\n    };\n    BidiHandler.prototype.offsetToCol = function (posX) {\n        if (this.isRtlDir)\n            posX -= this.rtlLineOffset;\n        var logicalIdx = 0, posX = Math.max(posX, 0), offset = 0, visualIdx = 0, levels = this.bidiMap.bidiLevels, charWidth = this.charWidths[levels[visualIdx]];\n        if (this.wrapIndent)\n            posX -= this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n        while (posX > offset + charWidth / 2) {\n            offset += charWidth;\n            if (visualIdx === levels.length - 1) {\n                charWidth = 0;\n                break;\n            }\n            charWidth = this.charWidths[levels[++visualIdx]];\n        }\n        if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && (levels[visualIdx] % 2 === 0)) {\n            if (posX < offset)\n                visualIdx--;\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n        }\n        else if (visualIdx > 0 && (levels[visualIdx - 1] % 2 === 0) && (levels[visualIdx] % 2 !== 0)) {\n            logicalIdx = 1 + ((posX > offset) ? this.bidiMap.logicalFromVisual[visualIdx]\n                : this.bidiMap.logicalFromVisual[visualIdx - 1]);\n        }\n        else if ((this.isRtlDir && visualIdx === levels.length - 1 && charWidth === 0 && (levels[visualIdx - 1] % 2 === 0))\n            || (!this.isRtlDir && visualIdx === 0 && (levels[visualIdx] % 2 !== 0))) {\n            logicalIdx = 1 + this.bidiMap.logicalFromVisual[visualIdx];\n        }\n        else {\n            if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && charWidth !== 0)\n                visualIdx--;\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n        }\n        if (logicalIdx === 0 && this.isRtlDir)\n            logicalIdx++;\n        return (logicalIdx + this.wrapIndent);\n    };\n    return BidiHandler;\n}());\nexports.BidiHandler = BidiHandler;\n\n});\n\nace.define(\"ace/selection\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/lib/event_emitter\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar lang = require(\"./lib/lang\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Range = require(\"./range\").Range;\nvar Selection = /** @class */ (function () {\n    function Selection(session) {\n        this.session = session;\n        this.doc = session.getDocument();\n        this.clearSelection();\n        this.cursor = this.lead = this.doc.createAnchor(0, 0);\n        this.anchor = this.doc.createAnchor(0, 0);\n        this.$silent = false;\n        var self = this;\n        this.cursor.on(\"change\", function (e) {\n            self.$cursorChanged = true;\n            if (!self.$silent)\n                self._emit(\"changeCursor\");\n            if (!self.$isEmpty && !self.$silent)\n                self._emit(\"changeSelection\");\n            if (!self.$keepDesiredColumnOnChange && e.old.column != e.value.column)\n                self.$desiredColumn = null;\n        });\n        this.anchor.on(\"change\", function () {\n            self.$anchorChanged = true;\n            if (!self.$isEmpty && !self.$silent)\n                self._emit(\"changeSelection\");\n        });\n    }\n    Selection.prototype.isEmpty = function () {\n        return this.$isEmpty || (this.anchor.row == this.lead.row &&\n            this.anchor.column == this.lead.column);\n    };\n    Selection.prototype.isMultiLine = function () {\n        return !this.$isEmpty && this.anchor.row != this.cursor.row;\n    };\n    Selection.prototype.getCursor = function () {\n        return this.lead.getPosition();\n    };\n    Selection.prototype.setAnchor = function (row, column) {\n        this.$isEmpty = false;\n        this.anchor.setPosition(row, column);\n    };\n    Selection.prototype.getAnchor = function () {\n        if (this.$isEmpty)\n            return this.getSelectionLead();\n        return this.anchor.getPosition();\n    };\n    Selection.prototype.getSelectionLead = function () {\n        return this.lead.getPosition();\n    };\n    Selection.prototype.isBackwards = function () {\n        var anchor = this.anchor;\n        var lead = this.lead;\n        return (anchor.row > lead.row || (anchor.row == lead.row && anchor.column > lead.column));\n    };\n    Selection.prototype.getRange = function () {\n        var anchor = this.anchor;\n        var lead = this.lead;\n        if (this.$isEmpty)\n            return Range.fromPoints(lead, lead);\n        return this.isBackwards()\n            ? Range.fromPoints(lead, anchor)\n            : Range.fromPoints(anchor, lead);\n    };\n    Selection.prototype.clearSelection = function () {\n        if (!this.$isEmpty) {\n            this.$isEmpty = true;\n            this._emit(\"changeSelection\");\n        }\n    };\n    Selection.prototype.selectAll = function () {\n        this.$setSelection(0, 0, Number.MAX_VALUE, Number.MAX_VALUE);\n    };\n    Selection.prototype.setRange = function (range, reverse) {\n        var start = reverse ? range.end : range.start;\n        var end = reverse ? range.start : range.end;\n        this.$setSelection(start.row, start.column, end.row, end.column);\n    };\n    Selection.prototype.$setSelection = function (anchorRow, anchorColumn, cursorRow, cursorColumn) {\n        if (this.$silent)\n            return;\n        var wasEmpty = this.$isEmpty;\n        var wasMultiselect = this.inMultiSelectMode;\n        this.$silent = true;\n        this.$cursorChanged = this.$anchorChanged = false;\n        this.anchor.setPosition(anchorRow, anchorColumn);\n        this.cursor.setPosition(cursorRow, cursorColumn);\n        this.$isEmpty = !Range.comparePoints(this.anchor, this.cursor);\n        this.$silent = false;\n        if (this.$cursorChanged)\n            this._emit(\"changeCursor\");\n        if (this.$cursorChanged || this.$anchorChanged || wasEmpty != this.$isEmpty || wasMultiselect)\n            this._emit(\"changeSelection\");\n    };\n    Selection.prototype.$moveSelection = function (mover) {\n        var lead = this.lead;\n        if (this.$isEmpty)\n            this.setSelectionAnchor(lead.row, lead.column);\n        mover.call(this);\n    };\n    Selection.prototype.selectTo = function (row, column) {\n        this.$moveSelection(function () {\n            this.moveCursorTo(row, column);\n        });\n    };\n    Selection.prototype.selectToPosition = function (pos) {\n        this.$moveSelection(function () {\n            this.moveCursorToPosition(pos);\n        });\n    };\n    Selection.prototype.moveTo = function (row, column) {\n        this.clearSelection();\n        this.moveCursorTo(row, column);\n    };\n    Selection.prototype.moveToPosition = function (pos) {\n        this.clearSelection();\n        this.moveCursorToPosition(pos);\n    };\n    Selection.prototype.selectUp = function () {\n        this.$moveSelection(this.moveCursorUp);\n    };\n    Selection.prototype.selectDown = function () {\n        this.$moveSelection(this.moveCursorDown);\n    };\n    Selection.prototype.selectRight = function () {\n        this.$moveSelection(this.moveCursorRight);\n    };\n    Selection.prototype.selectLeft = function () {\n        this.$moveSelection(this.moveCursorLeft);\n    };\n    Selection.prototype.selectLineStart = function () {\n        this.$moveSelection(this.moveCursorLineStart);\n    };\n    Selection.prototype.selectLineEnd = function () {\n        this.$moveSelection(this.moveCursorLineEnd);\n    };\n    Selection.prototype.selectFileEnd = function () {\n        this.$moveSelection(this.moveCursorFileEnd);\n    };\n    Selection.prototype.selectFileStart = function () {\n        this.$moveSelection(this.moveCursorFileStart);\n    };\n    Selection.prototype.selectWordRight = function () {\n        this.$moveSelection(this.moveCursorWordRight);\n    };\n    Selection.prototype.selectWordLeft = function () {\n        this.$moveSelection(this.moveCursorWordLeft);\n    };\n    Selection.prototype.getWordRange = function (row, column) {\n        if (typeof column == \"undefined\") {\n            var cursor = row || this.lead;\n            row = cursor.row;\n            column = cursor.column;\n        }\n        return this.session.getWordRange(row, column);\n    };\n    Selection.prototype.selectWord = function () {\n        this.setSelectionRange(this.getWordRange());\n    };\n    Selection.prototype.selectAWord = function () {\n        var cursor = this.getCursor();\n        var range = this.session.getAWordRange(cursor.row, cursor.column);\n        this.setSelectionRange(range);\n    };\n    Selection.prototype.getLineRange = function (row, excludeLastChar) {\n        var rowStart = typeof row == \"number\" ? row : this.lead.row;\n        var rowEnd;\n        var foldLine = this.session.getFoldLine(rowStart);\n        if (foldLine) {\n            rowStart = foldLine.start.row;\n            rowEnd = foldLine.end.row;\n        }\n        else {\n            rowEnd = rowStart;\n        }\n        if (excludeLastChar === true)\n            return new Range(rowStart, 0, rowEnd, this.session.getLine(rowEnd).length);\n        else\n            return new Range(rowStart, 0, rowEnd + 1, 0);\n    };\n    Selection.prototype.selectLine = function () {\n        this.setSelectionRange(this.getLineRange());\n    };\n    Selection.prototype.moveCursorUp = function () {\n        this.moveCursorBy(-1, 0);\n    };\n    Selection.prototype.moveCursorDown = function () {\n        this.moveCursorBy(1, 0);\n    };\n    Selection.prototype.wouldMoveIntoSoftTab = function (cursor, tabSize, direction) {\n        var start = cursor.column;\n        var end = cursor.column + tabSize;\n        if (direction < 0) {\n            start = cursor.column - tabSize;\n            end = cursor.column;\n        }\n        return this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(start, end).split(\" \").length - 1 == tabSize;\n    };\n    Selection.prototype.moveCursorLeft = function () {\n        var cursor = this.lead.getPosition(), fold;\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n        }\n        else if (cursor.column === 0) {\n            if (cursor.row > 0) {\n                this.moveCursorTo(cursor.row - 1, this.doc.getLine(cursor.row - 1).length);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, -1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, -tabSize);\n            }\n            else {\n                this.moveCursorBy(0, -1);\n            }\n        }\n    };\n    Selection.prototype.moveCursorRight = function () {\n        var cursor = this.lead.getPosition(), fold;\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, 1)) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n        }\n        else if (this.lead.column == this.doc.getLine(this.lead.row).length) {\n            if (this.lead.row < this.doc.getLength() - 1) {\n                this.moveCursorTo(this.lead.row + 1, 0);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            var cursor = this.lead;\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, 1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, tabSize);\n            }\n            else {\n                this.moveCursorBy(0, 1);\n            }\n        }\n    };\n    Selection.prototype.moveCursorLineStart = function () {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var screenRow = this.session.documentToScreenRow(row, column);\n        var firstColumnPosition = this.session.screenToDocumentPosition(screenRow, 0);\n        var beforeCursor = this.session.getDisplayLine(row, null, firstColumnPosition.row, firstColumnPosition.column);\n        var leadingSpace = beforeCursor.match(/^\\s*/);\n        if (leadingSpace[0].length != column && !this.session.$useEmacsStyleLineStart)\n            firstColumnPosition.column += leadingSpace[0].length;\n        this.moveCursorToPosition(firstColumnPosition);\n    };\n    Selection.prototype.moveCursorLineEnd = function () {\n        var lead = this.lead;\n        var lineEnd = this.session.getDocumentLastRowColumnPosition(lead.row, lead.column);\n        if (this.lead.column == lineEnd.column) {\n            var line = this.session.getLine(lineEnd.row);\n            if (lineEnd.column == line.length) {\n                var textEnd = line.search(/\\s+$/);\n                if (textEnd > 0)\n                    lineEnd.column = textEnd;\n            }\n        }\n        this.moveCursorTo(lineEnd.row, lineEnd.column);\n    };\n    Selection.prototype.moveCursorFileEnd = function () {\n        var row = this.doc.getLength() - 1;\n        var column = this.doc.getLine(row).length;\n        this.moveCursorTo(row, column);\n    };\n    Selection.prototype.moveCursorFileStart = function () {\n        this.moveCursorTo(0, 0);\n    };\n    Selection.prototype.moveCursorLongWordRight = function () {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n            return;\n        }\n        if (this.session.nonTokenRe.exec(rightOfCursor)) {\n            column += this.session.nonTokenRe.lastIndex;\n            this.session.nonTokenRe.lastIndex = 0;\n            rightOfCursor = line.substring(column);\n        }\n        if (column >= line.length) {\n            this.moveCursorTo(row, line.length);\n            this.moveCursorRight();\n            if (row < this.doc.getLength() - 1)\n                this.moveCursorWordRight();\n            return;\n        }\n        if (this.session.tokenRe.exec(rightOfCursor)) {\n            column += this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n        this.moveCursorTo(row, column);\n    };\n    Selection.prototype.moveCursorLongWordLeft = function () {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n            return;\n        }\n        var str = this.session.getFoldStringAt(row, column, -1);\n        if (str == null) {\n            str = this.doc.getLine(row).substring(0, column);\n        }\n        var leftOfCursor = lang.stringReverse(str);\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n        if (this.session.nonTokenRe.exec(leftOfCursor)) {\n            column -= this.session.nonTokenRe.lastIndex;\n            leftOfCursor = leftOfCursor.slice(this.session.nonTokenRe.lastIndex);\n            this.session.nonTokenRe.lastIndex = 0;\n        }\n        if (column <= 0) {\n            this.moveCursorTo(row, 0);\n            this.moveCursorLeft();\n            if (row > 0)\n                this.moveCursorWordLeft();\n            return;\n        }\n        if (this.session.tokenRe.exec(leftOfCursor)) {\n            column -= this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n        this.moveCursorTo(row, column);\n    };\n    Selection.prototype.$shortWordEndIndex = function (rightOfCursor) {\n        var index = 0, ch;\n        var whitespaceRe = /\\s/;\n        var tokenRe = this.session.tokenRe;\n        tokenRe.lastIndex = 0;\n        if (this.session.tokenRe.exec(rightOfCursor)) {\n            index = this.session.tokenRe.lastIndex;\n        }\n        else {\n            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                index++;\n            if (index < 1) {\n                tokenRe.lastIndex = 0;\n                while ((ch = rightOfCursor[index]) && !tokenRe.test(ch)) {\n                    tokenRe.lastIndex = 0;\n                    index++;\n                    if (whitespaceRe.test(ch)) {\n                        if (index > 2) {\n                            index--;\n                            break;\n                        }\n                        else {\n                            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                                index++;\n                            if (index > 2)\n                                break;\n                        }\n                    }\n                }\n            }\n        }\n        tokenRe.lastIndex = 0;\n        return index;\n    };\n    Selection.prototype.moveCursorShortWordRight = function () {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold)\n            return this.moveCursorTo(fold.end.row, fold.end.column);\n        if (column == line.length) {\n            var l = this.doc.getLength();\n            do {\n                row++;\n                rightOfCursor = this.doc.getLine(row);\n            } while (row < l && /^\\s*$/.test(rightOfCursor));\n            if (!/^\\s+/.test(rightOfCursor))\n                rightOfCursor = \"\";\n            column = 0;\n        }\n        var index = this.$shortWordEndIndex(rightOfCursor);\n        this.moveCursorTo(row, column + index);\n    };\n    Selection.prototype.moveCursorShortWordLeft = function () {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1))\n            return this.moveCursorTo(fold.start.row, fold.start.column);\n        var line = this.session.getLine(row).substring(0, column);\n        if (column === 0) {\n            do {\n                row--;\n                line = this.doc.getLine(row);\n            } while (row > 0 && /^\\s*$/.test(line));\n            column = line.length;\n            if (!/\\s+$/.test(line))\n                line = \"\";\n        }\n        var leftOfCursor = lang.stringReverse(line);\n        var index = this.$shortWordEndIndex(leftOfCursor);\n        return this.moveCursorTo(row, column - index);\n    };\n    Selection.prototype.moveCursorWordRight = function () {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordRight();\n        else\n            this.moveCursorShortWordRight();\n    };\n    Selection.prototype.moveCursorWordLeft = function () {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordLeft();\n        else\n            this.moveCursorShortWordLeft();\n    };\n    Selection.prototype.moveCursorBy = function (rows, chars) {\n        var screenPos = this.session.documentToScreenPosition(this.lead.row, this.lead.column);\n        var offsetX;\n        if (chars === 0) {\n            if (rows !== 0) {\n                if (this.session.$bidiHandler.isBidiRow(screenPos.row, this.lead.row)) {\n                    offsetX = this.session.$bidiHandler.getPosLeft(screenPos.column);\n                    screenPos.column = Math.round(offsetX / this.session.$bidiHandler.charWidths[0]);\n                }\n                else {\n                    offsetX = screenPos.column * this.session.$bidiHandler.charWidths[0];\n                }\n            }\n            if (this.$desiredColumn)\n                screenPos.column = this.$desiredColumn;\n            else\n                this.$desiredColumn = screenPos.column;\n        }\n        if (rows != 0 && this.session.lineWidgets && this.session.lineWidgets[this.lead.row]) {\n            var widget = this.session.lineWidgets[this.lead.row];\n            if (rows < 0)\n                rows -= widget.rowsAbove || 0;\n            else if (rows > 0)\n                rows += widget.rowCount - (widget.rowsAbove || 0);\n        }\n        var docPos = this.session.screenToDocumentPosition(screenPos.row + rows, screenPos.column, offsetX);\n        if (rows !== 0 && chars === 0 && docPos.row === this.lead.row && docPos.column === this.lead.column) {\n        }\n        this.moveCursorTo(docPos.row, docPos.column + chars, chars === 0);\n    };\n    Selection.prototype.moveCursorToPosition = function (position) {\n        this.moveCursorTo(position.row, position.column);\n    };\n    Selection.prototype.moveCursorTo = function (row, column, keepDesiredColumn) {\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            row = fold.start.row;\n            column = fold.start.column;\n        }\n        this.$keepDesiredColumnOnChange = true;\n        var line = this.session.getLine(row);\n        if (/[\\uDC00-\\uDFFF]/.test(line.charAt(column)) && line.charAt(column - 1)) {\n            if (this.lead.row == row && this.lead.column == column + 1)\n                column = column - 1;\n            else\n                column = column + 1;\n        }\n        this.lead.setPosition(row, column);\n        this.$keepDesiredColumnOnChange = false;\n        if (!keepDesiredColumn)\n            this.$desiredColumn = null;\n    };\n    Selection.prototype.moveCursorToScreen = function (row, column, keepDesiredColumn) {\n        var pos = this.session.screenToDocumentPosition(row, column);\n        this.moveCursorTo(pos.row, pos.column, keepDesiredColumn);\n    };\n    Selection.prototype.detach = function () {\n        this.lead.detach();\n        this.anchor.detach();\n    };\n    Selection.prototype.fromOrientedRange = function (range) {\n        this.setSelectionRange(range, range.cursor == range.start);\n        this.$desiredColumn = range.desiredColumn || this.$desiredColumn;\n    };\n    Selection.prototype.toOrientedRange = function (range) {\n        var r = this.getRange();\n        if (range) {\n            range.start.column = r.start.column;\n            range.start.row = r.start.row;\n            range.end.column = r.end.column;\n            range.end.row = r.end.row;\n        }\n        else {\n            range = r;\n        }\n        range.cursor = this.isBackwards() ? range.start : range.end;\n        range.desiredColumn = this.$desiredColumn;\n        return range;\n    };\n    Selection.prototype.getRangeOfMovements = function (func) {\n        var start = this.getCursor();\n        try {\n            func(this);\n            var end = this.getCursor();\n            return Range.fromPoints(start, end);\n        }\n        catch (e) {\n            return Range.fromPoints(start, start);\n        }\n        finally {\n            this.moveCursorToPosition(start);\n        }\n    };\n    Selection.prototype.toJSON = function () {\n        if (this.rangeCount) { var data = this.ranges.map(function (r) {\n                var r1 = r.clone();\n                r1.isBackwards = r.cursor == r.start;\n                return r1;\n            });\n        }\n        else { var data = this.getRange();\n            data.isBackwards = this.isBackwards();\n        }\n        return data;\n    };\n    Selection.prototype.fromJSON = function (data) {\n        if (data.start == undefined) {\n            if (this.rangeList && data.length > 1) {\n                this.toSingleRange(data[0]);\n                for (var i = data.length; i--;) {\n                    var r = Range.fromPoints(data[i].start, data[i].end);\n                    if (data[i].isBackwards)\n                        r.cursor = r.start;\n                    this.addRange(r, true);\n                }\n                return;\n            }\n            else {\n                data = data[0];\n            }\n        }\n        if (this.rangeList)\n            this.toSingleRange(data);\n        this.setSelectionRange(data, data.isBackwards);\n    };\n    Selection.prototype.isEqual = function (data) {\n        if ((data.length || this.rangeCount) && data.length != this.rangeCount)\n            return false;\n        if (!data.length || !this.ranges)\n            return this.getRange().isEqual(data);\n        for (var i = this.ranges.length; i--;) {\n            if (!this.ranges[i].isEqual(data[i]))\n                return false;\n        }\n        return true;\n    };\n    return Selection;\n}());\nSelection.prototype.setSelectionAnchor = Selection.prototype.setAnchor;\nSelection.prototype.getSelectionAnchor = Selection.prototype.getAnchor;\nSelection.prototype.setSelectionRange = Selection.prototype.setRange;\noop.implement(Selection.prototype, EventEmitter);\nexports.Selection = Selection;\n\n});\n\nace.define(\"ace/tokenizer\",[\"require\",\"exports\",\"module\",\"ace/lib/report_error\"], function(require, exports, module){\"use strict\";\nvar reportError = require(\"./lib/report_error\").reportError;\nvar MAX_TOKEN_COUNT = 2000;\nvar Tokenizer = /** @class */ (function () {\n    function Tokenizer(rules) {\n        this.splitRegex;\n        this.states = rules;\n        this.regExps = {};\n        this.matchMappings = {};\n        for (var key in this.states) {\n            var state = this.states[key];\n            var ruleRegExps = [];\n            var matchTotal = 0;\n            var mapping = this.matchMappings[key] = { defaultToken: \"text\" };\n            var flag = \"g\";\n            var splitterRurles = [];\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                if (rule.defaultToken)\n                    mapping.defaultToken = rule.defaultToken;\n                if (rule.caseInsensitive && flag.indexOf(\"i\") === -1)\n                    flag += \"i\";\n                if (rule.unicode && flag.indexOf(\"u\") === -1)\n                    flag += \"u\";\n                if (rule.regex == null)\n                    continue;\n                if (rule.regex instanceof RegExp)\n                    rule.regex = rule.regex.toString().slice(1, -1);\n                var adjustedregex = rule.regex;\n                var matchcount = new RegExp(\"(?:(\" + adjustedregex + \")|(.))\").exec(\"a\").length - 2;\n                if (Array.isArray(rule.token)) {\n                    if (rule.token.length == 1 || matchcount == 1) {\n                        rule.token = rule.token[0];\n                    }\n                    else if (matchcount - 1 != rule.token.length) {\n                        this.reportError(\"number of classes and regexp groups doesn't match\", {\n                            rule: rule,\n                            groupCount: matchcount - 1\n                        });\n                        rule.token = rule.token[0];\n                    }\n                    else {\n                        rule.tokenArray = rule.token;\n                        rule.token = null;\n                        rule.onMatch = this.$arrayTokens;\n                    }\n                }\n                else if (typeof rule.token == \"function\" && !rule.onMatch) {\n                    if (matchcount > 1)\n                        rule.onMatch = this.$applyToken;\n                    else\n                        rule.onMatch = rule.token;\n                }\n                if (matchcount > 1) {\n                    if (/\\\\\\d/.test(rule.regex)) {\n                        adjustedregex = rule.regex.replace(/\\\\([0-9]+)/g, function (match, digit) {\n                            return \"\\\\\" + (parseInt(digit, 10) + matchTotal + 1);\n                        });\n                    }\n                    else {\n                        matchcount = 1;\n                        adjustedregex = this.removeCapturingGroups(rule.regex);\n                    }\n                    if (!rule.splitRegex && typeof rule.token != \"string\")\n                        splitterRurles.push(rule); // flag will be known only at the very end\n                }\n                mapping[matchTotal] = i;\n                matchTotal += matchcount;\n                ruleRegExps.push(adjustedregex);\n                if (!rule.onMatch)\n                    rule.onMatch = null;\n            }\n            if (!ruleRegExps.length) {\n                mapping[0] = 0;\n                ruleRegExps.push(\"$\");\n            }\n            splitterRurles.forEach(function (rule) {\n                rule.splitRegex = this.createSplitterRegexp(rule.regex, flag);\n            }, this);\n            this.regExps[key] = new RegExp(\"(\" + ruleRegExps.join(\")|(\") + \")|($)\", flag);\n        }\n    }\n    Tokenizer.prototype.$setMaxTokenCount = function (m) {\n        MAX_TOKEN_COUNT = m | 0;\n    };\n    Tokenizer.prototype.$applyToken = function (str) {\n        var values = this.splitRegex.exec(str).slice(1);\n        var types = this.token.apply(this, values);\n        if (typeof types === \"string\")\n            return [{ type: types, value: str }];\n        var tokens = [];\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i]\n                };\n        }\n        return tokens;\n    };\n    Tokenizer.prototype.$arrayTokens = function (str) {\n        if (!str)\n            return [];\n        var values = this.splitRegex.exec(str);\n        if (!values)\n            return \"text\";\n        var tokens = [];\n        var types = this.tokenArray;\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i + 1])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i + 1]\n                };\n        }\n        return tokens;\n    };\n    Tokenizer.prototype.removeCapturingGroups = function (src) {\n        var r = src.replace(/\\\\.|\\[(?:\\\\.|[^\\\\\\]])*|\\(\\?[:=!<]|(\\()/g, function (x, y) { return y ? \"(?:\" : x; });\n        return r;\n    };\n    Tokenizer.prototype.createSplitterRegexp = function (src, flag) {\n        if (src.indexOf(\"(?=\") != -1) {\n            var stack = 0;\n            var inChClass = false;\n            var lastCapture = {};\n            src.replace(/(\\\\.)|(\\((?:\\?[=!])?)|(\\))|([\\[\\]])/g, function (m, esc, parenOpen, parenClose, square, index) {\n                if (inChClass) {\n                    inChClass = square != \"]\";\n                }\n                else if (square) {\n                    inChClass = true;\n                }\n                else if (parenClose) {\n                    if (stack == lastCapture.stack) {\n                        lastCapture.end = index + 1;\n                        lastCapture.stack = -1;\n                    }\n                    stack--;\n                }\n                else if (parenOpen) {\n                    stack++;\n                    if (parenOpen.length != 1) {\n                        lastCapture.stack = stack;\n                        lastCapture.start = index;\n                    }\n                }\n                return m;\n            });\n            if (lastCapture.end != null && /^\\)*$/.test(src.substr(lastCapture.end)))\n                src = src.substring(0, lastCapture.start) + src.substr(lastCapture.end);\n        }\n        if (src.charAt(0) != \"^\")\n            src = \"^\" + src;\n        if (src.charAt(src.length - 1) != \"$\")\n            src += \"$\";\n        return new RegExp(src, (flag || \"\").replace(\"g\", \"\"));\n    };\n    Tokenizer.prototype.getLineTokens = function (line, startState) {\n        if (startState && typeof startState != \"string\") {\n            var stack = startState.slice(0);\n            startState = stack[0];\n            if (startState === \"#tmp\") {\n                stack.shift();\n                startState = stack.shift();\n            }\n        }\n        else\n            var stack = [];\n        var currentState = /**@type{string}*/ (startState) || \"start\";\n        var state = this.states[currentState];\n        if (!state) {\n            currentState = \"start\";\n            state = this.states[currentState];\n        }\n        var mapping = this.matchMappings[currentState];\n        var re = this.regExps[currentState];\n        re.lastIndex = 0;\n        var match, tokens = [];\n        var lastIndex = 0;\n        var matchAttempts = 0;\n        var token = { type: null, value: \"\" };\n        while (match = re.exec(line)) {\n            var type = mapping.defaultToken;\n            var rule = null;\n            var value = match[0];\n            var index = re.lastIndex;\n            if (index - value.length > lastIndex) {\n                var skipped = line.substring(lastIndex, index - value.length);\n                if (token.type == type) {\n                    token.value += skipped;\n                }\n                else {\n                    if (token.type)\n                        tokens.push(token);\n                    token = { type: type, value: skipped };\n                }\n            }\n            for (var i = 0; i < match.length - 2; i++) {\n                if (match[i + 1] === undefined)\n                    continue;\n                rule = state[mapping[i]];\n                if (rule.onMatch)\n                    type = rule.onMatch(value, currentState, stack, line);\n                else\n                    type = rule.token;\n                if (rule.next) {\n                    if (typeof rule.next == \"string\") {\n                        currentState = rule.next;\n                    }\n                    else {\n                        currentState = rule.next(currentState, stack);\n                    }\n                    state = this.states[currentState];\n                    if (!state) {\n                        this.reportError(\"state doesn't exist\", currentState);\n                        currentState = \"start\";\n                        state = this.states[currentState];\n                    }\n                    mapping = this.matchMappings[currentState];\n                    lastIndex = index;\n                    re = this.regExps[currentState];\n                    re.lastIndex = index;\n                }\n                if (rule.consumeLineEnd)\n                    lastIndex = index;\n                break;\n            }\n            if (value) {\n                if (typeof type === \"string\") {\n                    if ((!rule || rule.merge !== false) && token.type === type) {\n                        token.value += value;\n                    }\n                    else {\n                        if (token.type)\n                            tokens.push(token);\n                        token = { type: type, value: value };\n                    }\n                }\n                else if (type) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = { type: null, value: \"\" };\n                    for (var i = 0; i < type.length; i++)\n                        tokens.push(type[i]);\n                }\n            }\n            if (lastIndex == line.length)\n                break;\n            lastIndex = index;\n            if (matchAttempts++ > MAX_TOKEN_COUNT) {\n                if (matchAttempts > 2 * line.length) {\n                    this.reportError(\"infinite loop with in ace tokenizer\", {\n                        startState: startState,\n                        line: line\n                    });\n                }\n                while (lastIndex < line.length) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {\n                        value: line.substring(lastIndex, lastIndex += 500),\n                        type: \"overflow\"\n                    };\n                }\n                currentState = \"start\";\n                stack = [];\n                break;\n            }\n        }\n        if (token.type)\n            tokens.push(token);\n        if (stack.length > 1) {\n            if (stack[0] !== currentState)\n                stack.unshift(\"#tmp\", currentState);\n        }\n        return {\n            tokens: tokens,\n            state: stack.length ? stack : currentState\n        };\n    };\n    return Tokenizer;\n}());\nTokenizer.prototype.reportError = reportError;\nexports.Tokenizer = Tokenizer;\n\n});\n\nace.define(\"ace/mode/text_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/deep_copy\"], function(require, exports, module){\"use strict\";\nvar deepCopy = require(\"../lib/deep_copy\").deepCopy;\nvar TextHighlightRules;\nTextHighlightRules = function () {\n    this.$rules = {\n        \"start\": [{\n                token: \"empty_line\",\n                regex: '^$'\n            }, {\n                defaultToken: \"text\"\n            }]\n    };\n};\n(function () {\n    this.addRules = function (rules, prefix) {\n        if (!prefix) {\n            for (var key in rules)\n                this.$rules[key] = rules[key];\n            return;\n        }\n        for (var key in rules) {\n            var state = rules[key];\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                if (rule.next || rule.onMatch) {\n                    if (typeof rule.next == \"string\") {\n                        if (rule.next.indexOf(prefix) !== 0)\n                            rule.next = prefix + rule.next;\n                    }\n                    if (rule.nextState && rule.nextState.indexOf(prefix) !== 0)\n                        rule.nextState = prefix + rule.nextState;\n                }\n            }\n            this.$rules[prefix + key] = state;\n        }\n    };\n    this.getRules = function () {\n        return this.$rules;\n    };\n    this.embedRules = function (HighlightRules, prefix, escapeRules, states, append) {\n        var embedRules = typeof HighlightRules == \"function\"\n            ? new HighlightRules().getRules()\n            : HighlightRules;\n        if (states) {\n            for (var i = 0; i < states.length; i++)\n                states[i] = prefix + states[i];\n        }\n        else {\n            states = [];\n            for (var key in embedRules)\n                states.push(prefix + key);\n        }\n        this.addRules(embedRules, prefix);\n        if (escapeRules) {\n            var addRules = Array.prototype[append ? \"push\" : \"unshift\"];\n            for (var i = 0; i < states.length; i++)\n                addRules.apply(this.$rules[states[i]], deepCopy(escapeRules));\n        }\n        if (!this.$embeds)\n            this.$embeds = [];\n        this.$embeds.push(prefix);\n    };\n    this.getEmbeds = function () {\n        return this.$embeds;\n    };\n    var pushState = function (currentState, stack) {\n        if (currentState != \"start\" || stack.length)\n            stack.unshift(this.nextState, currentState);\n        return this.nextState;\n    };\n    var popState = function (currentState, stack) {\n        stack.shift();\n        return stack.shift() || \"start\";\n    };\n    this.normalizeRules = function () {\n        var id = 0;\n        var rules = this.$rules;\n        function processState(key) {\n            var state = rules[key];\n            state[\"processed\"] = true;\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                var toInsert = null;\n                if (Array.isArray(rule)) {\n                    toInsert = rule;\n                    rule = {};\n                }\n                if (!rule.regex && rule.start) {\n                    rule.regex = rule.start;\n                    if (!rule.next)\n                        rule.next = [];\n                    rule.next.push({\n                        defaultToken: rule.token\n                    }, {\n                        token: rule.token + \".end\",\n                        regex: rule.end || rule.start,\n                        next: \"pop\"\n                    });\n                    rule.token = rule.token + \".start\";\n                    rule.push = true;\n                }\n                var next = rule.next || rule.push;\n                if (next && Array.isArray(next)) {\n                    var stateName = rule.stateName;\n                    if (!stateName) {\n                        stateName = rule.token;\n                        if (typeof stateName != \"string\")\n                            stateName = stateName[0] || \"\";\n                        if (rules[stateName])\n                            stateName += id++;\n                    }\n                    rules[stateName] = next;\n                    rule.next = stateName;\n                    processState(stateName);\n                }\n                else if (next == \"pop\") {\n                    rule.next = popState;\n                }\n                if (rule.push) {\n                    rule.nextState = rule.next || rule.push;\n                    rule.next = pushState;\n                    delete rule.push;\n                }\n                if (rule.rules) {\n                    for (var r in rule.rules) {\n                        if (rules[r]) {\n                            if (rules[r].push)\n                                rules[r].push.apply(rules[r], rule.rules[r]);\n                        }\n                        else {\n                            rules[r] = rule.rules[r];\n                        }\n                    }\n                }\n                var includeName = typeof rule == \"string\" ? rule : rule.include;\n                if (includeName) {\n                    if (includeName === \"$self\")\n                        includeName = \"start\";\n                    if (Array.isArray(includeName))\n                        toInsert = includeName.map(function (x) { return rules[x]; });\n                    else\n                        toInsert = rules[includeName];\n                }\n                if (toInsert) {\n                    var args = [i, 1].concat(toInsert);\n                    if (rule.noEscape)\n                        args = args.filter(function (x) { return !x.next; });\n                    state.splice.apply(state, args);\n                    i--;\n                }\n                if (rule.keywordMap) {\n                    rule.token = this.createKeywordMapper(rule.keywordMap, rule.defaultToken || \"text\", rule.caseInsensitive);\n                    delete rule.defaultToken;\n                }\n            }\n        }\n        Object.keys(rules).forEach(processState, this);\n    };\n    this.createKeywordMapper = function (map, defaultToken, ignoreCase, splitChar) {\n        var keywords = Object.create(null);\n        this.$keywordList = [];\n        Object.keys(map).forEach(function (className) {\n            var a = map[className];\n            var list = a.split(splitChar || \"|\");\n            for (var i = list.length; i--;) {\n                var word = list[i];\n                this.$keywordList.push(word);\n                if (ignoreCase)\n                    word = word.toLowerCase();\n                keywords[word] = className;\n            }\n        }, this);\n        map = null;\n        return ignoreCase\n            ? function (value) { return keywords[value.toLowerCase()] || defaultToken; }\n            : function (value) { return keywords[value] || defaultToken; };\n    };\n    this.getKeywords = function () {\n        return this.$keywords;\n    };\n}).call(TextHighlightRules.prototype);\nexports.TextHighlightRules = TextHighlightRules;\n\n});\n\nace.define(\"ace/mode/behaviour\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar Behaviour;\nBehaviour = function () {\n    this.$behaviours = {};\n};\n(function () {\n    this.add = function (name, action, callback) {\n        switch (undefined) {\n            case this.$behaviours:\n                this.$behaviours = {};\n            case this.$behaviours[name]:\n                this.$behaviours[name] = {};\n        }\n        this.$behaviours[name][action] = callback;\n    };\n    this.addBehaviours = function (behaviours) {\n        for (var key in behaviours) {\n            for (var action in behaviours[key]) {\n                this.add(key, action, behaviours[key][action]);\n            }\n        }\n    };\n    this.remove = function (name) {\n        if (this.$behaviours && this.$behaviours[name]) {\n            delete this.$behaviours[name];\n        }\n    };\n    this.inherit = function (mode, filter) {\n        if (typeof mode === \"function\") {\n            var behaviours = new mode().getBehaviours(filter);\n        }\n        else {\n            var behaviours = mode.getBehaviours(filter);\n        }\n        this.addBehaviours(behaviours);\n    };\n    this.getBehaviours = function (filter) {\n        if (!filter) {\n            return this.$behaviours;\n        }\n        else {\n            var ret = {};\n            for (var i = 0; i < filter.length; i++) {\n                if (this.$behaviours[filter[i]]) {\n                    ret[filter[i]] = this.$behaviours[filter[i]];\n                }\n            }\n            return ret;\n        }\n    };\n}).call(Behaviour.prototype);\nexports.Behaviour = Behaviour;\n\n});\n\nace.define(\"ace/token_iterator\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"./range\").Range;\nvar TokenIterator = /** @class */ (function () {\n    function TokenIterator(session, initialRow, initialColumn) {\n        this.$session = session;\n        this.$row = initialRow;\n        this.$rowTokens = session.getTokens(initialRow);\n        var token = session.getTokenAt(initialRow, initialColumn);\n        this.$tokenIndex = token ? token.index : -1;\n    }\n    TokenIterator.prototype.stepBackward = function () {\n        this.$tokenIndex -= 1;\n        while (this.$tokenIndex < 0) {\n            this.$row -= 1;\n            if (this.$row < 0) {\n                this.$row = 0;\n                return null;\n            }\n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = this.$rowTokens.length - 1;\n        }\n        return this.$rowTokens[this.$tokenIndex];\n    };\n    TokenIterator.prototype.stepForward = function () {\n        this.$tokenIndex += 1;\n        var rowCount;\n        while (this.$tokenIndex >= this.$rowTokens.length) {\n            this.$row += 1;\n            if (!rowCount)\n                rowCount = this.$session.getLength();\n            if (this.$row >= rowCount) {\n                this.$row = rowCount - 1;\n                return null;\n            }\n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = 0;\n        }\n        return this.$rowTokens[this.$tokenIndex];\n    };\n    TokenIterator.prototype.getCurrentToken = function () {\n        return this.$rowTokens[this.$tokenIndex];\n    };\n    TokenIterator.prototype.getCurrentTokenRow = function () {\n        return this.$row;\n    };\n    TokenIterator.prototype.getCurrentTokenColumn = function () {\n        var rowTokens = this.$rowTokens;\n        var tokenIndex = this.$tokenIndex;\n        var column = rowTokens[tokenIndex].start;\n        if (column !== undefined)\n            return column;\n        column = 0;\n        while (tokenIndex > 0) {\n            tokenIndex -= 1;\n            column += rowTokens[tokenIndex].value.length;\n        }\n        return column;\n    };\n    TokenIterator.prototype.getCurrentTokenPosition = function () {\n        return { row: this.$row, column: this.getCurrentTokenColumn() };\n    };\n    TokenIterator.prototype.getCurrentTokenRange = function () {\n        var token = this.$rowTokens[this.$tokenIndex];\n        var column = this.getCurrentTokenColumn();\n        return new Range(this.$row, column, this.$row, column + token.value.length);\n    };\n    return TokenIterator;\n}());\nexports.TokenIterator = TokenIterator;\n\n});\n\nace.define(\"ace/mode/behaviour/cstyle\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/behaviour\",\"ace/token_iterator\",\"ace/lib/lang\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"../../lib/oop\");\nvar Behaviour = require(\"../behaviour\").Behaviour;\nvar TokenIterator = require(\"../../token_iterator\").TokenIterator;\nvar lang = require(\"../../lib/lang\");\nvar SAFE_INSERT_IN_TOKENS = [\"text\", \"paren.rparen\", \"rparen\", \"paren\", \"punctuation.operator\"];\nvar SAFE_INSERT_BEFORE_TOKENS = [\"text\", \"paren.rparen\", \"rparen\", \"paren\", \"punctuation.operator\", \"comment\"];\nvar context;\nvar contextCache = {};\nvar defaultQuotes = { '\"': '\"', \"'\": \"'\" };\nvar initContext = function (editor) {\n    var id = -1;\n    if (editor.multiSelect) {\n        id = editor.selection.index;\n        if (contextCache.rangeCount != editor.multiSelect.rangeCount)\n            contextCache = { rangeCount: editor.multiSelect.rangeCount };\n    }\n    if (contextCache[id])\n        return context = contextCache[id];\n    context = contextCache[id] = {\n        autoInsertedBrackets: 0,\n        autoInsertedRow: -1,\n        autoInsertedLineEnd: \"\",\n        maybeInsertedBrackets: 0,\n        maybeInsertedRow: -1,\n        maybeInsertedLineStart: \"\",\n        maybeInsertedLineEnd: \"\"\n    };\n};\nvar getWrapped = function (selection, selected, opening, closing) {\n    var rowDiff = selection.end.row - selection.start.row;\n    return {\n        text: opening + selected + closing,\n        selection: [\n            0,\n            selection.start.column + 1,\n            rowDiff,\n            selection.end.column + (rowDiff ? 0 : 1)\n        ]\n    };\n};\nvar CstyleBehaviour;\nCstyleBehaviour = function (options) {\n    options = options || {};\n    this.add(\"braces\", \"insertion\", function (state, action, editor, session, text) {\n        var cursor = editor.getCursorPosition();\n        var line = session.doc.getLine(cursor.row);\n        if (text == '{') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            var token = session.getTokenAt(cursor.row, cursor.column);\n            if (selected !== \"\" && selected !== \"{\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '{', '}');\n            }\n            else if (token && /(?:string)\\.quasi|\\.xml/.test(token.type)) {\n                var excludeTokens = [\n                    /tag\\-(?:open|name)/, /attribute\\-name/\n                ];\n                if (excludeTokens.some(function (el) { return el.test(token.type); }) || /(string)\\.quasi/.test(token.type)\n                    && token.value[cursor.column - token.start - 1] !== '$')\n                    return;\n                CstyleBehaviour.recordAutoInsert(editor, session, \"}\");\n                return {\n                    text: '{}',\n                    selection: [1, 1]\n                };\n            }\n            else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                if (/[\\]\\}\\)]/.test(line[cursor.column]) || editor.inMultiSelectMode || options.braces) {\n                    CstyleBehaviour.recordAutoInsert(editor, session, \"}\");\n                    return {\n                        text: '{}',\n                        selection: [1, 1]\n                    };\n                }\n                else {\n                    CstyleBehaviour.recordMaybeInsert(editor, session, \"{\");\n                    return {\n                        text: '{',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n        else if (text == '}') {\n            initContext(editor);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == '}') {\n                var matching = session.$findOpeningBracket('}', { column: cursor.column + 1, row: cursor.row });\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n        else if (text == \"\\n\" || text == \"\\r\\n\") {\n            initContext(editor);\n            var closing = \"\";\n            if (CstyleBehaviour.isMaybeInsertedClosing(cursor, line)) {\n                closing = lang.stringRepeat(\"}\", context.maybeInsertedBrackets);\n                CstyleBehaviour.clearMaybeInsertedClosing();\n            }\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar === '}') {\n                var openBracePos = session.findMatchingBracket({ row: cursor.row, column: cursor.column + 1 }, '}');\n                if (!openBracePos)\n                    return null;\n                var next_indent = this.$getIndent(session.getLine(openBracePos.row));\n            }\n            else if (closing) {\n                var next_indent = this.$getIndent(line);\n            }\n            else {\n                CstyleBehaviour.clearMaybeInsertedClosing();\n                return;\n            }\n            var indent = next_indent + session.getTabString();\n            return {\n                text: '\\n' + indent + '\\n' + next_indent + closing,\n                selection: [1, indent.length, 1, indent.length]\n            };\n        }\n        else {\n            CstyleBehaviour.clearMaybeInsertedClosing();\n        }\n    });\n    this.add(\"braces\", \"deletion\", function (state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '{') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.end.column, range.end.column + 1);\n            if (rightChar == '}') {\n                range.end.column++;\n                return range;\n            }\n            else {\n                context.maybeInsertedBrackets--;\n            }\n        }\n    });\n    this.add(\"parens\", \"insertion\", function (state, action, editor, session, text) {\n        if (text == '(') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '(', ')');\n            }\n            else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \")\");\n                return {\n                    text: '()',\n                    selection: [1, 1]\n                };\n            }\n        }\n        else if (text == ')') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ')') {\n                var matching = session.$findOpeningBracket(')', { column: cursor.column + 1, row: cursor.row });\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n    this.add(\"parens\", \"deletion\", function (state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '(') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ')') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n    this.add(\"brackets\", \"insertion\", function (state, action, editor, session, text) {\n        if (text == '[') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '[', ']');\n            }\n            else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \"]\");\n                return {\n                    text: '[]',\n                    selection: [1, 1]\n                };\n            }\n        }\n        else if (text == ']') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ']') {\n                var matching = session.$findOpeningBracket(']', { column: cursor.column + 1, row: cursor.row });\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n    this.add(\"brackets\", \"deletion\", function (state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '[') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ']') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n    this.add(\"string_dquotes\", \"insertion\", function (state, action, editor, session, text) {\n        var quotes = session.$mode.$quotes || defaultQuotes;\n        if (text.length == 1 && quotes[text]) {\n            if (this.lineCommentStart && this.lineCommentStart.indexOf(text) != -1)\n                return;\n            initContext(editor);\n            var quote = text;\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && (selected.length != 1 || !quotes[selected]) && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, quote, quote);\n            }\n            else if (!selected) {\n                var cursor = editor.getCursorPosition();\n                var line = session.doc.getLine(cursor.row);\n                var leftChar = line.substring(cursor.column - 1, cursor.column);\n                var rightChar = line.substring(cursor.column, cursor.column + 1);\n                var token = session.getTokenAt(cursor.row, cursor.column);\n                var rightToken = session.getTokenAt(cursor.row, cursor.column + 1);\n                if (leftChar == \"\\\\\" && token && /escape/.test(token.type))\n                    return null;\n                var stringBefore = token && /string|escape/.test(token.type);\n                var stringAfter = !rightToken || /string|escape/.test(rightToken.type);\n                var pair;\n                if (rightChar == quote) {\n                    pair = stringBefore !== stringAfter;\n                    if (pair && /string\\.end/.test(rightToken.type))\n                        pair = false;\n                }\n                else {\n                    if (stringBefore && !stringAfter)\n                        return null; // wrap string with different quote\n                    if (stringBefore && stringAfter)\n                        return null; // do not pair quotes inside strings\n                    var wordRe = session.$mode.tokenRe;\n                    wordRe.lastIndex = 0;\n                    var isWordBefore = wordRe.test(leftChar);\n                    wordRe.lastIndex = 0;\n                    var isWordAfter = wordRe.test(rightChar);\n                    var pairQuotesAfter = session.$mode.$pairQuotesAfter;\n                    var shouldPairQuotes = pairQuotesAfter && pairQuotesAfter[quote] && pairQuotesAfter[quote].test(leftChar);\n                    if ((!shouldPairQuotes && isWordBefore) || isWordAfter)\n                        return null; // before or after alphanumeric\n                    if (rightChar && !/[\\s;,.})\\]\\\\]/.test(rightChar))\n                        return null; // there is rightChar and it isn't closing\n                    var charBefore = line[cursor.column - 2];\n                    if (leftChar == quote && (charBefore == quote || wordRe.test(charBefore)))\n                        return null;\n                    pair = true;\n                }\n                return {\n                    text: pair ? quote + quote : \"\",\n                    selection: [1, 1]\n                };\n            }\n        }\n    });\n    this.add(\"string_dquotes\", \"deletion\", function (state, action, editor, session, range) {\n        var quotes = session.$mode.$quotes || defaultQuotes;\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && quotes.hasOwnProperty(selected)) {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == selected) {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n    if (options.closeDocComment !== false) {\n        this.add(\"doc comment end\", \"insertion\", function (state, action, editor, session, text) {\n            if (state === \"doc-start\" && (text === \"\\n\" || text === \"\\r\\n\") && editor.selection.isEmpty()) {\n                var cursor = editor.getCursorPosition();\n                if (cursor.column === 0) {\n                    return;\n                }\n                var line = session.doc.getLine(cursor.row);\n                var nextLine = session.doc.getLine(cursor.row + 1);\n                var tokens = session.getTokens(cursor.row);\n                var index = 0;\n                for (var i = 0; i < tokens.length; i++) {\n                    index += tokens[i].value.length;\n                    var currentToken = tokens[i];\n                    if (index >= cursor.column) {\n                        if (index === cursor.column) {\n                            if (!/\\.doc/.test(currentToken.type)) {\n                                return;\n                            }\n                            if (/\\*\\//.test(currentToken.value)) {\n                                var nextToken = tokens[i + 1];\n                                if (!nextToken || !/\\.doc/.test(nextToken.type)) {\n                                    return;\n                                }\n                            }\n                        }\n                        var cursorPosInToken = cursor.column - (index - currentToken.value.length);\n                        var closeDocPos = currentToken.value.indexOf(\"*/\");\n                        var openDocPos = currentToken.value.indexOf(\"/**\", closeDocPos > -1 ? closeDocPos + 2 : 0);\n                        if (openDocPos !== -1 && cursorPosInToken > openDocPos && cursorPosInToken < openDocPos + 3) {\n                            return;\n                        }\n                        if (closeDocPos !== -1 && openDocPos !== -1 && cursorPosInToken >= closeDocPos\n                            && cursorPosInToken <= openDocPos || !/\\.doc/.test(currentToken.type)) {\n                            return;\n                        }\n                        break;\n                    }\n                }\n                var indent = this.$getIndent(line);\n                if (/\\s*\\*/.test(nextLine)) {\n                    if (/^\\s*\\*/.test(line)) {\n                        return {\n                            text: text + indent + \"* \",\n                            selection: [1, 2 + indent.length, 1, 2 + indent.length]\n                        };\n                    }\n                    else {\n                        return {\n                            text: text + indent + \" * \",\n                            selection: [1, 3 + indent.length, 1, 3 + indent.length]\n                        };\n                    }\n                }\n                if (/\\/\\*\\*/.test(line.substring(0, cursor.column))) {\n                    return {\n                        text: text + indent + \" * \" + text + \" \" + indent + \"*/\",\n                        selection: [1, 4 + indent.length, 1, 4 + indent.length]\n                    };\n                }\n            }\n        });\n    }\n};\nCstyleBehaviour.isSaneInsertion = function (editor, session) {\n    var cursor = editor.getCursorPosition();\n    var iterator = new TokenIterator(session, cursor.row, cursor.column);\n    if (!this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS)) {\n        if (/[)}\\]]/.test(editor.session.getLine(cursor.row)[cursor.column]))\n            return true;\n        var iterator2 = new TokenIterator(session, cursor.row, cursor.column + 1);\n        if (!this.$matchTokenType(iterator2.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS))\n            return false;\n    }\n    iterator.stepForward();\n    return iterator.getCurrentTokenRow() !== cursor.row ||\n        this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_BEFORE_TOKENS);\n};\nCstyleBehaviour[\"$matchTokenType\"] = function (token, types) {\n    return types.indexOf(token.type || token) > -1;\n};\nCstyleBehaviour[\"recordAutoInsert\"] = function (editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    if (!this[\"isAutoInsertedClosing\"](cursor, line, context.autoInsertedLineEnd[0]))\n        context.autoInsertedBrackets = 0;\n    context.autoInsertedRow = cursor.row;\n    context.autoInsertedLineEnd = bracket + line.substr(cursor.column);\n    context.autoInsertedBrackets++;\n};\nCstyleBehaviour[\"recordMaybeInsert\"] = function (editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    if (!this[\"isMaybeInsertedClosing\"](cursor, line))\n        context.maybeInsertedBrackets = 0;\n    context.maybeInsertedRow = cursor.row;\n    context.maybeInsertedLineStart = line.substr(0, cursor.column) + bracket;\n    context.maybeInsertedLineEnd = line.substr(cursor.column);\n    context.maybeInsertedBrackets++;\n};\nCstyleBehaviour[\"isAutoInsertedClosing\"] = function (cursor, line, bracket) {\n    return context.autoInsertedBrackets > 0 &&\n        cursor.row === context.autoInsertedRow &&\n        bracket === context.autoInsertedLineEnd[0] &&\n        line.substr(cursor.column) === context.autoInsertedLineEnd;\n};\nCstyleBehaviour[\"isMaybeInsertedClosing\"] = function (cursor, line) {\n    return context.maybeInsertedBrackets > 0 &&\n        cursor.row === context.maybeInsertedRow &&\n        line.substr(cursor.column) === context.maybeInsertedLineEnd &&\n        line.substr(0, cursor.column) == context.maybeInsertedLineStart;\n};\nCstyleBehaviour[\"popAutoInsertedClosing\"] = function () {\n    context.autoInsertedLineEnd = context.autoInsertedLineEnd.substr(1);\n    context.autoInsertedBrackets--;\n};\nCstyleBehaviour[\"clearMaybeInsertedClosing\"] = function () {\n    if (context) {\n        context.maybeInsertedBrackets = 0;\n        context.maybeInsertedRow = -1;\n    }\n};\noop.inherits(CstyleBehaviour, Behaviour);\nexports.CstyleBehaviour = CstyleBehaviour;\n\n});\n\nace.define(\"ace/unicode\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar wordChars = [48, 9, 8, 25, 5, 0, 2, 25, 48, 0, 11, 0, 5, 0, 6, 22, 2, 30, 2, 457, 5, 11, 15, 4, 8, 0, 2, 0, 18, 116, 2, 1, 3, 3, 9, 0, 2, 2, 2, 0, 2, 19, 2, 82, 2, 138, 2, 4, 3, 155, 12, 37, 3, 0, 8, 38, 10, 44, 2, 0, 2, 1, 2, 1, 2, 0, 9, 26, 6, 2, 30, 10, 7, 61, 2, 9, 5, 101, 2, 7, 3, 9, 2, 18, 3, 0, 17, 58, 3, 100, 15, 53, 5, 0, 6, 45, 211, 57, 3, 18, 2, 5, 3, 11, 3, 9, 2, 1, 7, 6, 2, 2, 2, 7, 3, 1, 3, 21, 2, 6, 2, 0, 4, 3, 3, 8, 3, 1, 3, 3, 9, 0, 5, 1, 2, 4, 3, 11, 16, 2, 2, 5, 5, 1, 3, 21, 2, 6, 2, 1, 2, 1, 2, 1, 3, 0, 2, 4, 5, 1, 3, 2, 4, 0, 8, 3, 2, 0, 8, 15, 12, 2, 2, 8, 2, 2, 2, 21, 2, 6, 2, 1, 2, 4, 3, 9, 2, 2, 2, 2, 3, 0, 16, 3, 3, 9, 18, 2, 2, 7, 3, 1, 3, 21, 2, 6, 2, 1, 2, 4, 3, 8, 3, 1, 3, 2, 9, 1, 5, 1, 2, 4, 3, 9, 2, 0, 17, 1, 2, 5, 4, 2, 2, 3, 4, 1, 2, 0, 2, 1, 4, 1, 4, 2, 4, 11, 5, 4, 4, 2, 2, 3, 3, 0, 7, 0, 15, 9, 18, 2, 2, 7, 2, 2, 2, 22, 2, 9, 2, 4, 4, 7, 2, 2, 2, 3, 8, 1, 2, 1, 7, 3, 3, 9, 19, 1, 2, 7, 2, 2, 2, 22, 2, 9, 2, 4, 3, 8, 2, 2, 2, 3, 8, 1, 8, 0, 2, 3, 3, 9, 19, 1, 2, 7, 2, 2, 2, 22, 2, 15, 4, 7, 2, 2, 2, 3, 10, 0, 9, 3, 3, 9, 11, 5, 3, 1, 2, 17, 4, 23, 2, 8, 2, 0, 3, 6, 4, 0, 5, 5, 2, 0, 2, 7, 19, 1, 14, 57, 6, 14, 2, 9, 40, 1, 2, 0, 3, 1, 2, 0, 3, 0, 7, 3, 2, 6, 2, 2, 2, 0, 2, 0, 3, 1, 2, 12, 2, 2, 3, 4, 2, 0, 2, 5, 3, 9, 3, 1, 35, 0, 24, 1, 7, 9, 12, 0, 2, 0, 2, 0, 5, 9, 2, 35, 5, 19, 2, 5, 5, 7, 2, 35, 10, 0, 58, 73, 7, 77, 3, 37, 11, 42, 2, 0, 4, 328, 2, 3, 3, 6, 2, 0, 2, 3, 3, 40, 2, 3, 3, 32, 2, 3, 3, 6, 2, 0, 2, 3, 3, 14, 2, 56, 2, 3, 3, 66, 5, 0, 33, 15, 17, 84, 13, 619, 3, 16, 2, 25, 6, 74, 22, 12, 2, 6, 12, 20, 12, 19, 13, 12, 2, 2, 2, 1, 13, 51, 3, 29, 4, 0, 5, 1, 3, 9, 34, 2, 3, 9, 7, 87, 9, 42, 6, 69, 11, 28, 4, 11, 5, 11, 11, 39, 3, 4, 12, 43, 5, 25, 7, 10, 38, 27, 5, 62, 2, 28, 3, 10, 7, 9, 14, 0, 89, 75, 5, 9, 18, 8, 13, 42, 4, 11, 71, 55, 9, 9, 4, 48, 83, 2, 2, 30, 14, 230, 23, 280, 3, 5, 3, 37, 3, 5, 3, 7, 2, 0, 2, 0, 2, 0, 2, 30, 3, 52, 2, 6, 2, 0, 4, 2, 2, 6, 4, 3, 3, 5, 5, 12, 6, 2, 2, 6, 67, 1, 20, 0, 29, 0, 14, 0, 17, 4, 60, 12, 5, 0, 4, 11, 18, 0, 5, 0, 3, 9, 2, 0, 4, 4, 7, 0, 2, 0, 2, 0, 2, 3, 2, 10, 3, 3, 6, 4, 5, 0, 53, 1, 2684, 46, 2, 46, 2, 132, 7, 6, 15, 37, 11, 53, 10, 0, 17, 22, 10, 6, 2, 6, 2, 6, 2, 6, 2, 6, 2, 6, 2, 6, 2, 6, 2, 31, 48, 0, 470, 1, 36, 5, 2, 4, 6, 1, 5, 85, 3, 1, 3, 2, 2, 89, 2, 3, 6, 40, 4, 93, 18, 23, 57, 15, 513, 6581, 75, 20939, 53, 1164, 68, 45, 3, 268, 4, 27, 21, 31, 3, 13, 13, 1, 2, 24, 9, 69, 11, 1, 38, 8, 3, 102, 3, 1, 111, 44, 25, 51, 13, 68, 12, 9, 7, 23, 4, 0, 5, 45, 3, 35, 13, 28, 4, 64, 15, 10, 39, 54, 10, 13, 3, 9, 7, 22, 4, 1, 5, 66, 25, 2, 227, 42, 2, 1, 3, 9, 7, 11171, 13, 22, 5, 48, 8453, 301, 3, 61, 3, 105, 39, 6, 13, 4, 6, 11, 2, 12, 2, 4, 2, 0, 2, 1, 2, 1, 2, 107, 34, 362, 19, 63, 3, 53, 41, 11, 5, 15, 17, 6, 13, 1, 25, 2, 33, 4, 2, 134, 20, 9, 8, 25, 5, 0, 2, 25, 12, 88, 4, 5, 3, 5, 3, 5, 3, 2];\nvar code = 0;\nvar str = [];\nfor (var i = 0; i < wordChars.length; i += 2) {\n    str.push(code += wordChars[i]);\n    if (wordChars[i + 1])\n        str.push(45, code += wordChars[i + 1]);\n}\nexports.wordChars = String.fromCharCode.apply(null, str);\n\n});\n\nace.define(\"ace/mode/text\",[\"require\",\"exports\",\"module\",\"ace/config\",\"ace/tokenizer\",\"ace/mode/text_highlight_rules\",\"ace/mode/behaviour/cstyle\",\"ace/unicode\",\"ace/lib/lang\",\"ace/token_iterator\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar config = require(\"../config\");\nvar Tokenizer = require(\"../tokenizer\").Tokenizer;\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\nvar CstyleBehaviour = require(\"./behaviour/cstyle\").CstyleBehaviour;\nvar unicode = require(\"../unicode\");\nvar lang = require(\"../lib/lang\");\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\nvar Range = require(\"../range\").Range;\nvar Mode;\nMode = function () {\n    this.HighlightRules = TextHighlightRules;\n};\n(function () {\n    this.$defaultBehaviour = new CstyleBehaviour();\n    this.tokenRe = new RegExp(\"^[\" + unicode.wordChars + \"\\\\$_]+\", \"g\");\n    this.nonTokenRe = new RegExp(\"^(?:[^\" + unicode.wordChars + \"\\\\$_]|\\\\s])+\", \"g\");\n    this.getTokenizer = function () {\n        if (!this.$tokenizer) {\n            this.$highlightRules = this.$highlightRules || new this.HighlightRules(this.$highlightRuleConfig);\n            this.$tokenizer = new Tokenizer(this.$highlightRules.getRules());\n        }\n        return this.$tokenizer;\n    };\n    this.lineCommentStart = \"\";\n    this.blockComment = \"\";\n    this.toggleCommentLines = function (state, session, startRow, endRow) {\n        var doc = session.doc;\n        var ignoreBlankLines = true;\n        var shouldRemove = true;\n        var minIndent = Infinity;\n        var tabSize = session.getTabSize();\n        var insertAtTabStop = false;\n        if (!this.lineCommentStart) {\n            if (!this.blockComment)\n                return false;\n            var lineCommentStart = this.blockComment.start;\n            var lineCommentEnd = this.blockComment.end;\n            var regexpStart = new RegExp(\"^(\\\\s*)(?:\" + lang.escapeRegExp(lineCommentStart) + \")\");\n            var regexpEnd = new RegExp(\"(?:\" + lang.escapeRegExp(lineCommentEnd) + \")\\\\s*$\");\n            var comment = function (line, i) {\n                if (testRemove(line, i))\n                    return;\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    doc.insertInLine({ row: i, column: line.length }, lineCommentEnd);\n                    doc.insertInLine({ row: i, column: minIndent }, lineCommentStart);\n                }\n            };\n            var uncomment = function (line, i) {\n                var m;\n                if (m = line.match(regexpEnd))\n                    doc.removeInLine(i, line.length - m[0].length, line.length);\n                if (m = line.match(regexpStart))\n                    doc.removeInLine(i, m[1].length, m[0].length);\n            };\n            var testRemove = function (line, row) {\n                if (regexpStart.test(line))\n                    return true;\n                var tokens = session.getTokens(row);\n                for (var i = 0; i < tokens.length; i++) {\n                    if (tokens[i].type === \"comment\")\n                        return true;\n                }\n            };\n        }\n        else {\n            if (Array.isArray(this.lineCommentStart)) {\n                var regexpStart = this.lineCommentStart.map(lang.escapeRegExp).join(\"|\");\n                var lineCommentStart = this.lineCommentStart[0];\n            }\n            else {\n                var regexpStart = lang.escapeRegExp(this.lineCommentStart);\n                var lineCommentStart = this.lineCommentStart;\n            }\n            regexpStart = new RegExp(\"^(\\\\s*)(?:\" + regexpStart + \") ?\");\n            insertAtTabStop = session.getUseSoftTabs();\n            var uncomment = function (line, i) {\n                var m = line.match(regexpStart);\n                if (!m)\n                    return;\n                var start = m[1].length, end = m[0].length;\n                if (!shouldInsertSpace(line, start, end) && m[0][end - 1] == \" \")\n                    end--;\n                doc.removeInLine(i, start, end);\n            };\n            var commentWithSpace = lineCommentStart + \" \";\n            var comment = function (line, i) {\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    if (shouldInsertSpace(line, minIndent, minIndent))\n                        doc.insertInLine({ row: i, column: minIndent }, commentWithSpace);\n                    else\n                        doc.insertInLine({ row: i, column: minIndent }, lineCommentStart);\n                }\n            };\n            var testRemove = function (line, i) {\n                return regexpStart.test(line);\n            };\n            var shouldInsertSpace = function (line, before, after) {\n                var spaces = 0;\n                while (before-- && line.charAt(before) == \" \")\n                    spaces++;\n                if (spaces % tabSize != 0)\n                    return false;\n                var spaces = 0;\n                while (line.charAt(after++) == \" \")\n                    spaces++;\n                if (tabSize > 2)\n                    return spaces % tabSize != tabSize - 1;\n                else\n                    return spaces % tabSize == 0;\n            };\n        }\n        function iter(fun) {\n            for (var i = startRow; i <= endRow; i++)\n                fun(doc.getLine(i), i);\n        }\n        var minEmptyLength = Infinity;\n        iter(function (line, i) {\n            var indent = line.search(/\\S/);\n            if (indent !== -1) {\n                if (indent < minIndent)\n                    minIndent = indent;\n                if (shouldRemove && !testRemove(line, i))\n                    shouldRemove = false;\n            }\n            else if (minEmptyLength > line.length) {\n                minEmptyLength = line.length;\n            }\n        });\n        if (minIndent == Infinity) {\n            minIndent = minEmptyLength;\n            ignoreBlankLines = false;\n            shouldRemove = false;\n        }\n        if (insertAtTabStop && minIndent % tabSize != 0)\n            minIndent = Math.floor(minIndent / tabSize) * tabSize;\n        iter(shouldRemove ? uncomment : comment);\n    };\n    this.toggleBlockComment = function (state, session, range, cursor) {\n        var comment = this.blockComment;\n        if (!comment)\n            return;\n        if (!comment.start && comment[0])\n            comment = comment[0];\n        var iterator = new TokenIterator(session, cursor.row, cursor.column);\n        var token = iterator.getCurrentToken();\n        var sel = session.selection;\n        var initialRange = session.selection.toOrientedRange();\n        var startRow, colDiff;\n        if (token && /comment/.test(token.type)) {\n            var startRange, endRange;\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.start);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    startRange = new Range(row, column, row, column + comment.start.length);\n                    break;\n                }\n                token = iterator.stepBackward();\n            }\n            var iterator = new TokenIterator(session, cursor.row, cursor.column);\n            var token = iterator.getCurrentToken();\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.end);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    endRange = new Range(row, column, row, column + comment.end.length);\n                    break;\n                }\n                token = iterator.stepForward();\n            }\n            if (endRange)\n                session.remove(endRange);\n            if (startRange) {\n                session.remove(startRange);\n                startRow = startRange.start.row;\n                colDiff = -comment.start.length;\n            }\n        }\n        else {\n            colDiff = comment.start.length;\n            startRow = range.start.row;\n            session.insert(range.end, comment.end);\n            session.insert(range.start, comment.start);\n        }\n        if (initialRange.start.row == startRow)\n            initialRange.start.column += colDiff;\n        if (initialRange.end.row == startRow)\n            initialRange.end.column += colDiff;\n        session.selection.fromOrientedRange(initialRange);\n    };\n    this.getNextLineIndent = function (state, line, tab) {\n        return this.$getIndent(line);\n    };\n    this.checkOutdent = function (state, line, input) {\n        return false;\n    };\n    this.autoOutdent = function (state, doc, row) {\n    };\n    this.$getIndent = function (line) {\n        return line.match(/^\\s*/)[0];\n    };\n    this.createWorker = function (session) {\n        return null;\n    };\n    this.createModeDelegates = function (mapping) {\n        this.$embeds = [];\n        this.$modes = {};\n        for (var i in mapping) {\n            if (mapping[i]) {\n                var Mode = mapping[i];\n                var id = Mode.prototype.$id;\n                var mode = config.$modes[id];\n                if (!mode)\n                    config.$modes[id] = mode = new Mode();\n                if (!config.$modes[i])\n                    config.$modes[i] = mode;\n                this.$embeds.push(i);\n                this.$modes[i] = mode;\n            }\n        }\n        var delegations = [\"toggleBlockComment\", \"toggleCommentLines\", \"getNextLineIndent\",\n            \"checkOutdent\", \"autoOutdent\", \"transformAction\", \"getCompletions\"];\n        var _loop_1 = function (i) {\n            (function (scope) {\n                var functionName = delegations[i];\n                var defaultHandler = scope[functionName];\n                scope[delegations[i]] =\n                    function () {\n                        return this.$delegator(functionName, arguments, defaultHandler);\n                    };\n            }(this_1));\n        };\n        var this_1 = this;\n        for (var i = 0; i < delegations.length; i++) {\n            _loop_1(i);\n        }\n    };\n    this.$delegator = function (method, args, defaultHandler) {\n        var state = args[0] || \"start\";\n        if (typeof state != \"string\") {\n            if (Array.isArray(state[2])) {\n                var language = state[2][state[2].length - 1];\n                var mode = this.$modes[language];\n                if (mode)\n                    return mode[method].apply(mode, [state[1]].concat([].slice.call(args, 1)));\n            }\n            state = state[0] || \"start\";\n        }\n        for (var i = 0; i < this.$embeds.length; i++) {\n            if (!this.$modes[this.$embeds[i]])\n                continue;\n            var split = state.split(this.$embeds[i]);\n            if (!split[0] && split[1]) {\n                args[0] = split[1];\n                var mode = this.$modes[this.$embeds[i]];\n                return mode[method].apply(mode, args);\n            }\n        }\n        var ret = defaultHandler.apply(this, args);\n        return defaultHandler ? ret : undefined;\n    };\n    this.transformAction = function (state, action, editor, session, param) {\n        if (this.$behaviour) {\n            var behaviours = this.$behaviour.getBehaviours();\n            for (var key in behaviours) {\n                if (behaviours[key][action]) {\n                    var ret = behaviours[key][action].apply(this, arguments);\n                    if (ret) {\n                        return ret;\n                    }\n                }\n            }\n        }\n    };\n    this.getKeywords = function (append) {\n        if (!this.completionKeywords) {\n            var rules = this.$tokenizer[\"rules\"];\n            var completionKeywords = [];\n            for (var rule in rules) {\n                var ruleItr = rules[rule];\n                for (var r = 0, l = ruleItr.length; r < l; r++) {\n                    if (typeof ruleItr[r].token === \"string\") {\n                        if (/keyword|support|storage/.test(ruleItr[r].token))\n                            completionKeywords.push(ruleItr[r].regex);\n                    }\n                    else if (typeof ruleItr[r].token === \"object\") {\n                        for (var a = 0, aLength = ruleItr[r].token.length; a < aLength; a++) {\n                            if (/keyword|support|storage/.test(ruleItr[r].token[a])) {\n                                var rule = ruleItr[r].regex.match(/\\(.+?\\)/g)[a];\n                                completionKeywords.push(rule.substr(1, rule.length - 2));\n                            }\n                        }\n                    }\n                }\n            }\n            this.completionKeywords = completionKeywords;\n        }\n        if (!append)\n            return this.$keywordList;\n        return completionKeywords.concat(this.$keywordList || []);\n    };\n    this.$createKeywordList = function () {\n        if (!this.$highlightRules)\n            this.getTokenizer();\n        return this.$keywordList = this.$highlightRules.$keywordList || [];\n    };\n    this.getCompletions = function (state, session, pos, prefix) {\n        var keywords = this.$keywordList || this.$createKeywordList();\n        return keywords.map(function (word) {\n            return {\n                name: word,\n                value: word,\n                score: 0,\n                meta: \"keyword\"\n            };\n        });\n    };\n    this.$id = \"ace/mode/text\";\n}).call(Mode.prototype);\nexports.Mode = Mode;\n\n});\n\nace.define(\"ace/line_widgets\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"./lib/dom\");\nvar LineWidgets = /** @class */ (function () {\n    function LineWidgets(session) {\n        this.session = session;\n        this.session.widgetManager = this;\n        this.session.getRowLength = this.getRowLength;\n        this.session.$getWidgetScreenLength = this.$getWidgetScreenLength;\n        this.updateOnChange = this.updateOnChange.bind(this);\n        this.renderWidgets = this.renderWidgets.bind(this);\n        this.measureWidgets = this.measureWidgets.bind(this);\n        this.session._changedWidgets = [];\n        this.$onChangeEditor = this.$onChangeEditor.bind(this);\n        this.session.on(\"change\", this.updateOnChange);\n        this.session.on(\"changeFold\", this.updateOnFold);\n        this.session.on(\"changeEditor\", this.$onChangeEditor);\n    }\n    LineWidgets.prototype.getRowLength = function (row) {\n        var h;\n        if (this.lineWidgets)\n            h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n        else\n            h = 0;\n        if (!this[\"$useWrapMode\"] || !this[\"$wrapData\"][row]) {\n            return 1 + h;\n        }\n        else {\n            return this[\"$wrapData\"][row].length + 1 + h;\n        }\n    };\n    LineWidgets.prototype.$getWidgetScreenLength = function () {\n        var screenRows = 0;\n        this.lineWidgets.forEach(function (w) {\n            if (w && w.rowCount && !w.hidden)\n                screenRows += w.rowCount;\n        });\n        return screenRows;\n    };\n    LineWidgets.prototype.$onChangeEditor = function (e) {\n        this.attach(e.editor);\n    };\n    LineWidgets.prototype.attach = function (editor) {\n        if (editor && editor.widgetManager && editor.widgetManager != this)\n            editor.widgetManager.detach();\n        if (this.editor == editor)\n            return;\n        this.detach();\n        this.editor = editor;\n        if (editor) {\n            editor.widgetManager = this;\n            editor.renderer.on(\"beforeRender\", this.measureWidgets);\n            editor.renderer.on(\"afterRender\", this.renderWidgets);\n        }\n    };\n    LineWidgets.prototype.detach = function (e) {\n        var editor = this.editor;\n        if (!editor)\n            return;\n        this.editor = null;\n        editor.widgetManager = null;\n        editor.renderer.off(\"beforeRender\", this.measureWidgets);\n        editor.renderer.off(\"afterRender\", this.renderWidgets);\n        var lineWidgets = this.session.lineWidgets;\n        lineWidgets && lineWidgets.forEach(function (w) {\n            if (w && w.el && w.el.parentNode) {\n                w._inDocument = false;\n                w.el.parentNode.removeChild(w.el);\n            }\n        });\n    };\n    LineWidgets.prototype.updateOnFold = function (e, session) {\n        var lineWidgets = session.lineWidgets;\n        if (!lineWidgets || !e.action)\n            return;\n        var fold = e.data;\n        var start = fold.start.row;\n        var end = fold.end.row;\n        var hide = e.action == \"add\";\n        for (var i = start + 1; i < end; i++) {\n            if (lineWidgets[i])\n                lineWidgets[i].hidden = hide;\n        }\n        if (lineWidgets[end]) {\n            if (hide) {\n                if (!lineWidgets[start])\n                    lineWidgets[start] = lineWidgets[end];\n                else\n                    lineWidgets[end].hidden = hide;\n            }\n            else {\n                if (lineWidgets[start] == lineWidgets[end])\n                    lineWidgets[start] = undefined;\n                lineWidgets[end].hidden = hide;\n            }\n        }\n    };\n    LineWidgets.prototype.updateOnChange = function (delta) {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets)\n            return;\n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n        if (len === 0) {\n        }\n        else if (delta.action == \"remove\") {\n            var removed = lineWidgets.splice(startRow + 1, len);\n            if (!lineWidgets[startRow] && removed[removed.length - 1]) {\n                lineWidgets[startRow] = removed.pop();\n            }\n            removed.forEach(function (w) {\n                w && this.removeLineWidget(w);\n            }, this);\n            this.$updateRows();\n        }\n        else {\n            var args = new Array(len);\n            if (lineWidgets[startRow] && lineWidgets[startRow].column != null) {\n                if (delta.start.column > lineWidgets[startRow].column)\n                    startRow++;\n            }\n            args.unshift(startRow, 0);\n            lineWidgets.splice.apply(lineWidgets, args);\n            this.$updateRows();\n        }\n    };\n    LineWidgets.prototype.$updateRows = function () {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets)\n            return;\n        var noWidgets = true;\n        lineWidgets.forEach(function (w, i) {\n            if (w) {\n                noWidgets = false;\n                w.row = i;\n                while (w.$oldWidget) {\n                    w.$oldWidget.row = i;\n                    w = w.$oldWidget;\n                }\n            }\n        });\n        if (noWidgets)\n            this.session.lineWidgets = null;\n    };\n    LineWidgets.prototype.$registerLineWidget = function (w) {\n        if (!this.session.lineWidgets)\n            this.session.lineWidgets = new Array(this.session.getLength());\n        var old = this.session.lineWidgets[w.row];\n        if (old) {\n            w.$oldWidget = old;\n            if (old.el && old.el.parentNode) {\n                old.el.parentNode.removeChild(old.el);\n                old._inDocument = false;\n            }\n        }\n        this.session.lineWidgets[w.row] = w;\n        return w;\n    };\n    LineWidgets.prototype.addLineWidget = function (w) {\n        this.$registerLineWidget(w);\n        w.session = this.session;\n        if (!this.editor)\n            return w;\n        var renderer = this.editor.renderer;\n        if (w.html && !w.el) {\n            w.el = dom.createElement(\"div\");\n            w.el.innerHTML = w.html;\n        }\n        if (w.text && !w.el) {\n            w.el = dom.createElement(\"div\");\n            w.el.textContent = w.text;\n        }\n        if (w.el) {\n            dom.addCssClass(w.el, \"ace_lineWidgetContainer\");\n            if (w.className) {\n                dom.addCssClass(w.el, w.className);\n            }\n            w.el.style.position = \"absolute\";\n            w.el.style.zIndex = \"5\";\n            renderer.container.appendChild(w.el);\n            w._inDocument = true;\n            if (!w.coverGutter) {\n                w.el.style.zIndex = \"3\";\n            }\n            if (w.pixelHeight == null) {\n                w.pixelHeight = w.el.offsetHeight;\n            }\n        }\n        if (w.rowCount == null) {\n            w.rowCount = w.pixelHeight / renderer.layerConfig.lineHeight;\n        }\n        var fold = this.session.getFoldAt(w.row, 0);\n        w.$fold = fold;\n        if (fold) {\n            var lineWidgets = this.session.lineWidgets;\n            if (w.row == fold.end.row && !lineWidgets[fold.start.row])\n                lineWidgets[fold.start.row] = w;\n            else\n                w.hidden = true;\n        }\n        this.session._emit(\"changeFold\", { data: { start: { row: w.row } } });\n        this.$updateRows();\n        this.renderWidgets(null, renderer);\n        this.onWidgetChanged(w);\n        return w;\n    };\n    LineWidgets.prototype.removeLineWidget = function (w) {\n        w._inDocument = false;\n        w.session = null;\n        if (w.el && w.el.parentNode)\n            w.el.parentNode.removeChild(w.el);\n        if (w.editor && w.editor.destroy)\n            try {\n                w.editor.destroy();\n            }\n            catch (e) { }\n        if (this.session.lineWidgets) {\n            var w1 = this.session.lineWidgets[w.row];\n            if (w1 == w) {\n                this.session.lineWidgets[w.row] = w.$oldWidget;\n                if (w.$oldWidget)\n                    this.onWidgetChanged(w.$oldWidget);\n            }\n            else {\n                while (w1) {\n                    if (w1.$oldWidget == w) {\n                        w1.$oldWidget = w.$oldWidget;\n                        break;\n                    }\n                    w1 = w1.$oldWidget;\n                }\n            }\n        }\n        this.session._emit(\"changeFold\", { data: { start: { row: w.row } } });\n        this.$updateRows();\n    };\n    LineWidgets.prototype.getWidgetsAtRow = function (row) {\n        var lineWidgets = this.session.lineWidgets;\n        var w = lineWidgets && lineWidgets[row];\n        var list = [];\n        while (w) {\n            list.push(w);\n            w = w.$oldWidget;\n        }\n        return list;\n    };\n    LineWidgets.prototype.onWidgetChanged = function (w) {\n        this.session._changedWidgets.push(w);\n        this.editor && this.editor.renderer.updateFull();\n    };\n    LineWidgets.prototype.measureWidgets = function (e, renderer) {\n        var changedWidgets = this.session._changedWidgets;\n        var config = renderer.layerConfig;\n        if (!changedWidgets || !changedWidgets.length)\n            return;\n        var min = Infinity;\n        for (var i = 0; i < changedWidgets.length; i++) {\n            var w = changedWidgets[i];\n            if (!w || !w.el)\n                continue;\n            if (w.session != this.session)\n                continue;\n            if (!w._inDocument) {\n                if (this.session.lineWidgets[w.row] != w)\n                    continue;\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n            w.h = w.el.offsetHeight;\n            if (!w.fixedWidth) {\n                w.w = w.el.offsetWidth;\n                w.screenWidth = Math.ceil(w.w / config.characterWidth);\n            }\n            var rowCount = w.h / config.lineHeight;\n            if (w.coverLine) {\n                rowCount -= this.session.getRowLineCount(w.row);\n                if (rowCount < 0)\n                    rowCount = 0;\n            }\n            if (w.rowCount != rowCount) {\n                w.rowCount = rowCount;\n                if (w.row < min)\n                    min = w.row;\n            }\n        }\n        if (min != Infinity) {\n            this.session._emit(\"changeFold\", { data: { start: { row: min } } });\n            this.session.lineWidgetWidth = null;\n        }\n        this.session._changedWidgets = [];\n    };\n    LineWidgets.prototype.renderWidgets = function (e, renderer) {\n        var config = renderer.layerConfig;\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets)\n            return;\n        var first = Math.min(this.firstRow, config.firstRow);\n        var last = Math.max(this.lastRow, config.lastRow, lineWidgets.length);\n        while (first > 0 && !lineWidgets[first])\n            first--;\n        this.firstRow = config.firstRow;\n        this.lastRow = config.lastRow;\n        renderer.$cursorLayer.config = config;\n        for (var i = first; i <= last; i++) {\n            var w = lineWidgets[i];\n            if (!w || !w.el)\n                continue;\n            if (w.hidden) {\n                w.el.style.top = -100 - (w.pixelHeight || 0) + \"px\";\n                continue;\n            }\n            if (!w._inDocument) {\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n            var top = renderer.$cursorLayer.getPixelPosition({ row: i, column: 0 }, true).top;\n            if (!w.coverLine)\n                top += config.lineHeight * this.session.getRowLineCount(w.row);\n            w.el.style.top = top - config.offset + \"px\";\n            var left = w.coverGutter ? 0 : renderer.gutterWidth;\n            if (!w.fixedWidth)\n                left -= renderer.scrollLeft;\n            w.el.style.left = left + \"px\";\n            if (w.fullWidth && w.screenWidth) {\n                w.el.style.minWidth = config.width + 2 * config.padding + \"px\";\n            }\n            if (w.fixedWidth) {\n                w.el.style.right = renderer.scrollBar.getWidth() + \"px\";\n            }\n            else {\n                w.el.style.right = \"\";\n            }\n        }\n    };\n    return LineWidgets;\n}());\nexports.LineWidgets = LineWidgets;\n\n});\n\nace.define(\"ace/apply_delta\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nfunction throwDeltaError(delta, errorText) {\n    console.log(\"Invalid Delta:\", delta);\n    throw \"Invalid Delta: \" + errorText;\n}\nfunction positionInDocument(docLines, position) {\n    return position.row >= 0 && position.row < docLines.length &&\n        position.column >= 0 && position.column <= docLines[position.row].length;\n}\nfunction validateDelta(docLines, delta) {\n    if (delta.action != \"insert\" && delta.action != \"remove\")\n        throwDeltaError(delta, \"delta.action must be 'insert' or 'remove'\");\n    if (!(delta.lines instanceof Array))\n        throwDeltaError(delta, \"delta.lines must be an Array\");\n    if (!delta.start || !delta.end)\n        throwDeltaError(delta, \"delta.start/end must be an present\");\n    var start = delta.start;\n    if (!positionInDocument(docLines, delta.start))\n        throwDeltaError(delta, \"delta.start must be contained in document\");\n    var end = delta.end;\n    if (delta.action == \"remove\" && !positionInDocument(docLines, end))\n        throwDeltaError(delta, \"delta.end must contained in document for 'remove' actions\");\n    var numRangeRows = end.row - start.row;\n    var numRangeLastLineChars = (end.column - (numRangeRows == 0 ? start.column : 0));\n    if (numRangeRows != delta.lines.length - 1 || delta.lines[numRangeRows].length != numRangeLastLineChars)\n        throwDeltaError(delta, \"delta.range must match delta lines\");\n}\nexports.applyDelta = function (docLines, delta, doNotValidate) {\n    var row = delta.start.row;\n    var startColumn = delta.start.column;\n    var line = docLines[row] || \"\";\n    switch (delta.action) {\n        case \"insert\":\n            var lines = delta.lines;\n            if (lines.length === 1) {\n                docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n            }\n            else {\n                var args = [row, 1].concat(delta.lines);\n                docLines.splice.apply(docLines, args);\n                docLines[row] = line.substring(0, startColumn) + docLines[row];\n                docLines[row + delta.lines.length - 1] += line.substring(startColumn);\n            }\n            break;\n        case \"remove\":\n            var endColumn = delta.end.column;\n            var endRow = delta.end.row;\n            if (row === endRow) {\n                docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);\n            }\n            else {\n                docLines.splice(row, endRow - row + 1, line.substring(0, startColumn) + docLines[endRow].substring(endColumn));\n            }\n            break;\n    }\n};\n\n});\n\nace.define(\"ace/anchor\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Anchor = /** @class */ (function () {\n    function Anchor(doc, row, column) {\n        this.$onChange = this.onChange.bind(this);\n        this.attach(doc);\n        if (typeof row != \"number\")\n            this.setPosition(row.row, row.column);\n        else\n            this.setPosition(row, column);\n    }\n    Anchor.prototype.getPosition = function () {\n        return this.$clipPositionToDocument(this.row, this.column);\n    };\n    Anchor.prototype.getDocument = function () {\n        return this.document;\n    };\n    Anchor.prototype.onChange = function (delta) {\n        if (delta.start.row == delta.end.row && delta.start.row != this.row)\n            return;\n        if (delta.start.row > this.row)\n            return;\n        var point = $getTransformedPoint(delta, { row: this.row, column: this.column }, this.$insertRight);\n        this.setPosition(point.row, point.column, true);\n    };\n    Anchor.prototype.setPosition = function (row, column, noClip) {\n        var pos;\n        if (noClip) {\n            pos = {\n                row: row,\n                column: column\n            };\n        }\n        else {\n            pos = this.$clipPositionToDocument(row, column);\n        }\n        if (this.row == pos.row && this.column == pos.column)\n            return;\n        var old = {\n            row: this.row,\n            column: this.column\n        };\n        this.row = pos.row;\n        this.column = pos.column;\n        this._signal(\"change\", {\n            old: old,\n            value: pos\n        });\n    };\n    Anchor.prototype.detach = function () {\n        this.document.off(\"change\", this.$onChange);\n    };\n    Anchor.prototype.attach = function (doc) {\n        this.document = doc || this.document;\n        this.document.on(\"change\", this.$onChange);\n    };\n    Anchor.prototype.$clipPositionToDocument = function (row, column) {\n        var pos = {};\n        if (row >= this.document.getLength()) {\n            pos.row = Math.max(0, this.document.getLength() - 1);\n            pos.column = this.document.getLine(pos.row).length;\n        }\n        else if (row < 0) {\n            pos.row = 0;\n            pos.column = 0;\n        }\n        else {\n            pos.row = row;\n            pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));\n        }\n        if (column < 0)\n            pos.column = 0;\n        return pos;\n    };\n    return Anchor;\n}());\nAnchor.prototype.$insertRight = false;\noop.implement(Anchor.prototype, EventEmitter);\nfunction $pointsInOrder(point1, point2, equalPointsInOrder) {\n    var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n    return (point1.row < point2.row) || (point1.row == point2.row && bColIsAfter);\n}\nfunction $getTransformedPoint(delta, point, moveIfEqual) {\n    var deltaIsInsert = delta.action == \"insert\";\n    var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row);\n    var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);\n    var deltaStart = delta.start;\n    var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.\n    if ($pointsInOrder(point, deltaStart, moveIfEqual)) {\n        return {\n            row: point.row,\n            column: point.column\n        };\n    }\n    if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) {\n        return {\n            row: point.row + deltaRowShift,\n            column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n        };\n    }\n    return {\n        row: deltaStart.row,\n        column: deltaStart.column\n    };\n}\nexports.Anchor = Anchor;\n\n});\n\nace.define(\"ace/document\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/apply_delta\",\"ace/lib/event_emitter\",\"ace/range\",\"ace/anchor\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar applyDelta = require(\"./apply_delta\").applyDelta;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Range = require(\"./range\").Range;\nvar Anchor = require(\"./anchor\").Anchor;\nvar Document = /** @class */ (function () {\n    function Document(textOrLines) {\n        this.$lines = [\"\"];\n        if (textOrLines.length === 0) {\n            this.$lines = [\"\"];\n        }\n        else if (Array.isArray(textOrLines)) {\n            this.insertMergedLines({ row: 0, column: 0 }, textOrLines);\n        }\n        else {\n            this.insert({ row: 0, column: 0 }, textOrLines);\n        }\n    }\n    Document.prototype.setValue = function (text) {\n        var len = this.getLength() - 1;\n        this.remove(new Range(0, 0, len, this.getLine(len).length));\n        this.insert({ row: 0, column: 0 }, text || \"\");\n    };\n    Document.prototype.getValue = function () {\n        return this.getAllLines().join(this.getNewLineCharacter());\n    };\n    Document.prototype.createAnchor = function (row, column) {\n        return new Anchor(this, row, column);\n    };\n    Document.prototype.$detectNewLine = function (text) {\n        var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n        this.$autoNewLine = match ? match[1] : \"\\n\";\n        this._signal(\"changeNewLineMode\");\n    };\n    Document.prototype.getNewLineCharacter = function () {\n        switch (this.$newLineMode) {\n            case \"windows\":\n                return \"\\r\\n\";\n            case \"unix\":\n                return \"\\n\";\n            default:\n                return this.$autoNewLine || \"\\n\";\n        }\n    };\n    Document.prototype.setNewLineMode = function (newLineMode) {\n        if (this.$newLineMode === newLineMode)\n            return;\n        this.$newLineMode = newLineMode;\n        this._signal(\"changeNewLineMode\");\n    };\n    Document.prototype.getNewLineMode = function () {\n        return this.$newLineMode;\n    };\n    Document.prototype.isNewLine = function (text) {\n        return (text == \"\\r\\n\" || text == \"\\r\" || text == \"\\n\");\n    };\n    Document.prototype.getLine = function (row) {\n        return this.$lines[row] || \"\";\n    };\n    Document.prototype.getLines = function (firstRow, lastRow) {\n        return this.$lines.slice(firstRow, lastRow + 1);\n    };\n    Document.prototype.getAllLines = function () {\n        return this.getLines(0, this.getLength());\n    };\n    Document.prototype.getLength = function () {\n        return this.$lines.length;\n    };\n    Document.prototype.getTextRange = function (range) {\n        return this.getLinesForRange(range).join(this.getNewLineCharacter());\n    };\n    Document.prototype.getLinesForRange = function (range) {\n        var lines;\n        if (range.start.row === range.end.row) {\n            lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n        }\n        else {\n            lines = this.getLines(range.start.row, range.end.row);\n            lines[0] = (lines[0] || \"\").substring(range.start.column);\n            var l = lines.length - 1;\n            if (range.end.row - range.start.row == l)\n                lines[l] = lines[l].substring(0, range.end.column);\n        }\n        return lines;\n    };\n    Document.prototype.insertLines = function (row, lines) {\n        console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\");\n        return this.insertFullLines(row, lines);\n    };\n    Document.prototype.removeLines = function (firstRow, lastRow) {\n        console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\");\n        return this.removeFullLines(firstRow, lastRow);\n    };\n    Document.prototype.insertNewLine = function (position) {\n        console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\");\n        return this.insertMergedLines(position, [\"\", \"\"]);\n    };\n    Document.prototype.insert = function (position, text) {\n        if (this.getLength() <= 1)\n            this.$detectNewLine(text);\n        return this.insertMergedLines(position, this.$split(text));\n    };\n    Document.prototype.insertInLine = function (position, text) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = this.pos(position.row, position.column + text.length);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: [text]\n        }, true);\n        return this.clonePos(end);\n    };\n    Document.prototype.clippedPos = function (row, column) {\n        var length = this.getLength();\n        if (row === undefined) {\n            row = length;\n        }\n        else if (row < 0) {\n            row = 0;\n        }\n        else if (row >= length) {\n            row = length - 1;\n            column = undefined;\n        }\n        var line = this.getLine(row);\n        if (column == undefined)\n            column = line.length;\n        column = Math.min(Math.max(column, 0), line.length);\n        return { row: row, column: column };\n    };\n    Document.prototype.clonePos = function (pos) {\n        return { row: pos.row, column: pos.column };\n    };\n    Document.prototype.pos = function (row, column) {\n        return { row: row, column: column };\n    };\n    Document.prototype.$clipPosition = function (position) {\n        var length = this.getLength();\n        if (position.row >= length) {\n            position.row = Math.max(0, length - 1);\n            position.column = this.getLine(length - 1).length;\n        }\n        else {\n            position.row = Math.max(0, position.row);\n            position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);\n        }\n        return position;\n    };\n    Document.prototype.insertFullLines = function (row, lines) {\n        row = Math.min(Math.max(row, 0), this.getLength());\n        var column = 0;\n        if (row < this.getLength()) {\n            lines = lines.concat([\"\"]);\n            column = 0;\n        }\n        else {\n            lines = [\"\"].concat(lines);\n            row--;\n            column = this.$lines[row].length;\n        }\n        this.insertMergedLines({ row: row, column: column }, lines);\n    };\n    Document.prototype.insertMergedLines = function (position, lines) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = {\n            row: start.row + lines.length - 1,\n            column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length\n        };\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: lines\n        });\n        return this.clonePos(end);\n    };\n    Document.prototype.remove = function (range) {\n        var start = this.clippedPos(range.start.row, range.start.column);\n        var end = this.clippedPos(range.end.row, range.end.column);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({ start: start, end: end })\n        });\n        return this.clonePos(start);\n    };\n    Document.prototype.removeInLine = function (row, startColumn, endColumn) {\n        var start = this.clippedPos(row, startColumn);\n        var end = this.clippedPos(row, endColumn);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({ start: start, end: end })\n        }, true);\n        return this.clonePos(start);\n    };\n    Document.prototype.removeFullLines = function (firstRow, lastRow) {\n        firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);\n        lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1);\n        var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0;\n        var deleteLastNewLine = lastRow < this.getLength() - 1;\n        var startRow = (deleteFirstNewLine ? firstRow - 1 : firstRow);\n        var startCol = (deleteFirstNewLine ? this.getLine(startRow).length : 0);\n        var endRow = (deleteLastNewLine ? lastRow + 1 : lastRow);\n        var endCol = (deleteLastNewLine ? 0 : this.getLine(endRow).length);\n        var range = new Range(startRow, startCol, endRow, endCol);\n        var deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n        this.applyDelta({\n            start: range.start,\n            end: range.end,\n            action: \"remove\",\n            lines: this.getLinesForRange(range)\n        });\n        return deletedLines;\n    };\n    Document.prototype.removeNewLine = function (row) {\n        if (row < this.getLength() - 1 && row >= 0) {\n            this.applyDelta({\n                start: this.pos(row, this.getLine(row).length),\n                end: this.pos(row + 1, 0),\n                action: \"remove\",\n                lines: [\"\", \"\"]\n            });\n        }\n    };\n    Document.prototype.replace = function (range, text) {\n        if (!(range instanceof Range))\n            range = Range.fromPoints(range.start, range.end);\n        if (text.length === 0 && range.isEmpty())\n            return range.start;\n        if (text == this.getTextRange(range))\n            return range.end;\n        this.remove(range);\n        var end;\n        if (text) {\n            end = this.insert(range.start, text);\n        }\n        else {\n            end = range.start;\n        }\n        return end;\n    };\n    Document.prototype.applyDeltas = function (deltas) {\n        for (var i = 0; i < deltas.length; i++) {\n            this.applyDelta(deltas[i]);\n        }\n    };\n    Document.prototype.revertDeltas = function (deltas) {\n        for (var i = deltas.length - 1; i >= 0; i--) {\n            this.revertDelta(deltas[i]);\n        }\n    };\n    Document.prototype.applyDelta = function (delta, doNotValidate) {\n        var isInsert = delta.action == \"insert\";\n        if (isInsert ? delta.lines.length <= 1 && !delta.lines[0]\n            : !Range.comparePoints(delta.start, delta.end)) {\n            return;\n        }\n        if (isInsert && delta.lines.length > 20000) {\n            this.$splitAndapplyLargeDelta(delta, 20000);\n        }\n        else {\n            applyDelta(this.$lines, delta, doNotValidate);\n            this._signal(\"change\", delta);\n        }\n    };\n    Document.prototype.$safeApplyDelta = function (delta) {\n        var docLength = this.$lines.length;\n        if (delta.action == \"remove\" && delta.start.row < docLength && delta.end.row < docLength\n            || delta.action == \"insert\" && delta.start.row <= docLength) {\n            this.applyDelta(delta);\n        }\n    };\n    Document.prototype.$splitAndapplyLargeDelta = function (delta, MAX) {\n        var lines = delta.lines;\n        var l = lines.length - MAX + 1;\n        var row = delta.start.row;\n        var column = delta.start.column;\n        for (var from = 0, to = 0; from < l; from = to) {\n            to += MAX - 1;\n            var chunk = lines.slice(from, to);\n            chunk.push(\"\");\n            this.applyDelta({\n                start: this.pos(row + from, column),\n                end: this.pos(row + to, column = 0),\n                action: delta.action,\n                lines: chunk\n            }, true);\n        }\n        delta.lines = lines.slice(from);\n        delta.start.row = row + from;\n        delta.start.column = column;\n        this.applyDelta(delta, true);\n    };\n    Document.prototype.revertDelta = function (delta) {\n        this.$safeApplyDelta({\n            start: this.clonePos(delta.start),\n            end: this.clonePos(delta.end),\n            action: (delta.action == \"insert\" ? \"remove\" : \"insert\"),\n            lines: delta.lines.slice()\n        });\n    };\n    Document.prototype.indexToPosition = function (index, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        for (var i = startRow || 0, l = lines.length; i < l; i++) {\n            index -= lines[i].length + newlineLength;\n            if (index < 0)\n                return { row: i, column: index + lines[i].length + newlineLength };\n        }\n        return { row: l - 1, column: index + lines[l - 1].length + newlineLength };\n    };\n    Document.prototype.positionToIndex = function (pos, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        var index = 0;\n        var row = Math.min(pos.row, lines.length);\n        for (var i = startRow || 0; i < row; ++i)\n            index += lines[i].length + newlineLength;\n        return index + pos.column;\n    };\n    Document.prototype.$split = function (text) {\n        return text.split(/\\r\\n|\\r|\\n/);\n    };\n    return Document;\n}());\nDocument.prototype.$autoNewLine = \"\";\nDocument.prototype.$newLineMode = \"auto\";\noop.implement(Document.prototype, EventEmitter);\nexports.Document = Document;\n\n});\n\nace.define(\"ace/background_tokenizer\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar BackgroundTokenizer = /** @class */ (function () {\n    function BackgroundTokenizer(tokenizer, session) {\n        this.running = false;\n        this.lines = [];\n        this.states = [];\n        this.currentLine = 0;\n        this.tokenizer = tokenizer;\n        var self = this;\n        this.$worker = function () {\n            if (!self.running) {\n                return;\n            }\n            var workerStart = new Date();\n            var currentLine = self.currentLine;\n            var endLine = -1;\n            var doc = self.doc;\n            var startLine = currentLine;\n            while (self.lines[currentLine])\n                currentLine++;\n            var len = doc.getLength();\n            var processedLines = 0;\n            self.running = false;\n            while (currentLine < len) {\n                self.$tokenizeRow(currentLine);\n                endLine = currentLine;\n                do {\n                    currentLine++;\n                } while (self.lines[currentLine]);\n                processedLines++;\n                if ((processedLines % 5 === 0) && (new Date() - workerStart) > 20) {\n                    self.running = setTimeout(self.$worker, 20);\n                    break;\n                }\n            }\n            self.currentLine = currentLine;\n            if (endLine == -1)\n                endLine = currentLine;\n            if (startLine <= endLine)\n                self.fireUpdateEvent(startLine, endLine);\n        };\n    }\n    BackgroundTokenizer.prototype.setTokenizer = function (tokenizer) {\n        this.tokenizer = tokenizer;\n        this.lines = [];\n        this.states = [];\n        this.start(0);\n    };\n    BackgroundTokenizer.prototype.setDocument = function (doc) {\n        this.doc = doc;\n        this.lines = [];\n        this.states = [];\n        this.stop();\n    };\n    BackgroundTokenizer.prototype.fireUpdateEvent = function (firstRow, lastRow) {\n        var data = {\n            first: firstRow,\n            last: lastRow\n        };\n        this._signal(\"update\", { data: data });\n    };\n    BackgroundTokenizer.prototype.start = function (startRow) {\n        this.currentLine = Math.min(startRow || 0, this.currentLine, this.doc.getLength());\n        this.lines.splice(this.currentLine, this.lines.length);\n        this.states.splice(this.currentLine, this.states.length);\n        this.stop();\n        this.running = setTimeout(this.$worker, 700);\n    };\n    BackgroundTokenizer.prototype.scheduleStart = function () {\n        if (!this.running)\n            this.running = setTimeout(this.$worker, 700);\n    };\n    BackgroundTokenizer.prototype.$updateOnChange = function (delta) {\n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n        if (len === 0) {\n            this.lines[startRow] = null;\n        }\n        else if (delta.action == \"remove\") {\n            this.lines.splice(startRow, len + 1, null);\n            this.states.splice(startRow, len + 1, null);\n        }\n        else {\n            var args = Array(len + 1);\n            args.unshift(startRow, 1);\n            this.lines.splice.apply(this.lines, args);\n            this.states.splice.apply(this.states, args);\n        }\n        this.currentLine = Math.min(startRow, this.currentLine, this.doc.getLength());\n        this.stop();\n    };\n    BackgroundTokenizer.prototype.stop = function () {\n        if (this.running)\n            clearTimeout(this.running);\n        this.running = false;\n    };\n    BackgroundTokenizer.prototype.getTokens = function (row) {\n        return this.lines[row] || this.$tokenizeRow(row);\n    };\n    BackgroundTokenizer.prototype.getState = function (row) {\n        if (this.currentLine == row)\n            this.$tokenizeRow(row);\n        return this.states[row] || \"start\";\n    };\n    BackgroundTokenizer.prototype.$tokenizeRow = function (row) {\n        var line = this.doc.getLine(row);\n        var state = this.states[row - 1];\n        var data = this.tokenizer.getLineTokens(line, state, row);\n        if (this.states[row] + \"\" !== data.state + \"\") {\n            this.states[row] = data.state;\n            this.lines[row + 1] = null;\n            if (this.currentLine > row + 1)\n                this.currentLine = row + 1;\n        }\n        else if (this.currentLine == row) {\n            this.currentLine = row + 1;\n        }\n        return this.lines[row] = data.tokens;\n    };\n    BackgroundTokenizer.prototype.cleanup = function () {\n        this.running = false;\n        this.lines = [];\n        this.states = [];\n        this.currentLine = 0;\n        this.removeAllListeners();\n    };\n    return BackgroundTokenizer;\n}());\noop.implement(BackgroundTokenizer.prototype, EventEmitter);\nexports.BackgroundTokenizer = BackgroundTokenizer;\n\n});\n\nace.define(\"ace/search_highlight\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar lang = require(\"./lib/lang\");\nvar Range = require(\"./range\").Range;\nvar SearchHighlight = /** @class */ (function () {\n    function SearchHighlight(regExp, clazz, type) {\n        if (type === void 0) { type = \"text\"; }\n        this.setRegexp(regExp);\n        this.clazz = clazz;\n        this.type = type;\n        this.docLen = 0;\n    }\n    SearchHighlight.prototype.setRegexp = function (regExp) {\n        if (this.regExp + \"\" == regExp + \"\")\n            return;\n        this.regExp = regExp;\n        this.cache = [];\n    };\n    SearchHighlight.prototype.update = function (html, markerLayer, session, config) {\n        if (!this.regExp)\n            return;\n        var start = config.firstRow;\n        var end = config.lastRow;\n        var renderedMarkerRanges = {};\n        var _search = session.$editor && session.$editor.$search;\n        var mtSearch = _search && _search.$isMultilineSearch(session.$editor.getLastSearchOptions());\n        for (var i = start; i <= end; i++) {\n            var ranges = this.cache[i];\n            if (ranges == null || session.getValue().length != this.docLen) {\n                if (mtSearch) {\n                    ranges = [];\n                    var match = _search.$multiLineForward(session, this.regExp, i, end);\n                    if (match) {\n                        var end_row = match.endRow <= end ? match.endRow - 1 : end;\n                        if (end_row > i)\n                            i = end_row;\n                        ranges.push(new Range(match.startRow, match.startCol, match.endRow, match.endCol));\n                    }\n                    if (ranges.length > this.MAX_RANGES)\n                        ranges = ranges.slice(0, this.MAX_RANGES);\n                }\n                else {\n                    ranges = lang.getMatchOffsets(session.getLine(i), this.regExp);\n                    if (ranges.length > this.MAX_RANGES)\n                        ranges = ranges.slice(0, this.MAX_RANGES);\n                    ranges = ranges.map(function (match) {\n                        return new Range(i, match.offset, i, match.offset + match.length);\n                    });\n                }\n                this.cache[i] = ranges.length ? ranges : \"\";\n            }\n            if (ranges.length === 0)\n                continue;\n            for (var j = ranges.length; j--;) {\n                var rangeToAddMarkerTo = ranges[j].toScreenRange(session);\n                var rangeAsString = rangeToAddMarkerTo.toString();\n                if (renderedMarkerRanges[rangeAsString])\n                    continue;\n                renderedMarkerRanges[rangeAsString] = true;\n                markerLayer.drawSingleLineMarker(html, rangeToAddMarkerTo, this.clazz, config);\n            }\n        }\n        this.docLen = session.getValue().length;\n    };\n    return SearchHighlight;\n}());\nSearchHighlight.prototype.MAX_RANGES = 500;\nexports.SearchHighlight = SearchHighlight;\n\n});\n\nace.define(\"ace/undomanager\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar UndoManager = /** @class */ (function () {\n    function UndoManager() {\n        this.$keepRedoStack;\n        this.$maxRev = 0;\n        this.$fromUndo = false;\n        this.$undoDepth = Infinity;\n        this.reset();\n    }\n    UndoManager.prototype.addSession = function (session) {\n        this.$session = session;\n    };\n    UndoManager.prototype.add = function (delta, allowMerge, session) {\n        if (this.$fromUndo)\n            return;\n        if (delta == this.$lastDelta)\n            return;\n        if (!this.$keepRedoStack)\n            this.$redoStack.length = 0;\n        if (allowMerge === false || !this.lastDeltas) {\n            this.lastDeltas = [];\n            var undoStackLength = this.$undoStack.length;\n            if (undoStackLength > this.$undoDepth - 1) {\n                this.$undoStack.splice(0, undoStackLength - this.$undoDepth + 1);\n            }\n            this.$undoStack.push(this.lastDeltas);\n            delta.id = this.$rev = ++this.$maxRev;\n        }\n        if (delta.action == \"remove\" || delta.action == \"insert\")\n            this.$lastDelta = delta;\n        this.lastDeltas.push(delta);\n    };\n    UndoManager.prototype.addSelection = function (selection, rev) {\n        this.selections.push({\n            value: selection,\n            rev: rev || this.$rev\n        });\n    };\n    UndoManager.prototype.startNewGroup = function () {\n        this.lastDeltas = null;\n        return this.$rev;\n    };\n    UndoManager.prototype.markIgnored = function (from, to) {\n        if (to == null)\n            to = this.$rev + 1;\n        var stack = this.$undoStack;\n        for (var i = stack.length; i--;) {\n            var delta = stack[i][0];\n            if (delta.id <= from)\n                break;\n            if (delta.id < to)\n                delta.ignore = true;\n        }\n        this.lastDeltas = null;\n    };\n    UndoManager.prototype.getSelection = function (rev, after) {\n        var stack = this.selections;\n        for (var i = stack.length; i--;) {\n            var selection = stack[i];\n            if (selection.rev < rev) {\n                if (after)\n                    selection = stack[i + 1];\n                return selection;\n            }\n        }\n    };\n    UndoManager.prototype.getRevision = function () {\n        return this.$rev;\n    };\n    UndoManager.prototype.getDeltas = function (from, to) {\n        if (to == null)\n            to = this.$rev + 1;\n        var stack = this.$undoStack;\n        var end = null, start = 0;\n        for (var i = stack.length; i--;) {\n            var delta = stack[i][0];\n            if (delta.id < to && !end)\n                end = i + 1;\n            if (delta.id <= from) {\n                start = i + 1;\n                break;\n            }\n        }\n        return stack.slice(start, end);\n    };\n    UndoManager.prototype.getChangedRanges = function (from, to) {\n        if (to == null)\n            to = this.$rev + 1;\n    };\n    UndoManager.prototype.getChangedLines = function (from, to) {\n        if (to == null)\n            to = this.$rev + 1;\n    };\n    UndoManager.prototype.undo = function (session, dontSelect) {\n        this.lastDeltas = null;\n        var stack = this.$undoStack;\n        if (!rearrangeUndoStack(stack, stack.length))\n            return;\n        if (!session)\n            session = this.$session;\n        if (this.$redoStackBaseRev !== this.$rev && this.$redoStack.length)\n            this.$redoStack = [];\n        this.$fromUndo = true;\n        var deltaSet = stack.pop();\n        var undoSelectionRange = null;\n        if (deltaSet) {\n            undoSelectionRange = session.undoChanges(deltaSet, dontSelect);\n            this.$redoStack.push(deltaSet);\n            this.$syncRev();\n        }\n        this.$fromUndo = false;\n        return undoSelectionRange;\n    };\n    UndoManager.prototype.redo = function (session, dontSelect) {\n        this.lastDeltas = null;\n        if (!session)\n            session = this.$session;\n        this.$fromUndo = true;\n        if (this.$redoStackBaseRev != this.$rev) {\n            var diff = this.getDeltas(this.$redoStackBaseRev, this.$rev + 1);\n            rebaseRedoStack(this.$redoStack, diff);\n            this.$redoStackBaseRev = this.$rev;\n            this.$redoStack.forEach(function (x) {\n                x[0].id = ++this.$maxRev;\n            }, this);\n        }\n        var deltaSet = this.$redoStack.pop();\n        var redoSelectionRange = null;\n        if (deltaSet) {\n            redoSelectionRange = session.redoChanges(deltaSet, dontSelect);\n            this.$undoStack.push(deltaSet);\n            this.$syncRev();\n        }\n        this.$fromUndo = false;\n        return redoSelectionRange;\n    };\n    UndoManager.prototype.$syncRev = function () {\n        var stack = this.$undoStack;\n        var nextDelta = stack[stack.length - 1];\n        var id = nextDelta && nextDelta[0].id || 0;\n        this.$redoStackBaseRev = id;\n        this.$rev = id;\n    };\n    UndoManager.prototype.reset = function () {\n        this.lastDeltas = null;\n        this.$lastDelta = null;\n        this.$undoStack = [];\n        this.$redoStack = [];\n        this.$rev = 0;\n        this.mark = 0;\n        this.$redoStackBaseRev = this.$rev;\n        this.selections = [];\n    };\n    UndoManager.prototype.canUndo = function () {\n        return this.$undoStack.length > 0;\n    };\n    UndoManager.prototype.canRedo = function () {\n        return this.$redoStack.length > 0;\n    };\n    UndoManager.prototype.bookmark = function (rev) {\n        if (rev == undefined)\n            rev = this.$rev;\n        this.mark = rev;\n    };\n    UndoManager.prototype.isAtBookmark = function () {\n        return this.$rev === this.mark;\n    };\n    UndoManager.prototype.toJSON = function () {\n        return {\n            $redoStack: this.$redoStack,\n            $undoStack: this.$undoStack\n        };\n    };\n    UndoManager.prototype.fromJSON = function (json) {\n        this.reset();\n        this.$undoStack = json.$undoStack;\n        this.$redoStack = json.$redoStack;\n    };\n    UndoManager.prototype.$prettyPrint = function (delta) {\n        if (delta)\n            return stringifyDelta(delta);\n        return stringifyDelta(this.$undoStack) + \"\\n---\\n\" + stringifyDelta(this.$redoStack);\n    };\n    return UndoManager;\n}());\nUndoManager.prototype.hasUndo = UndoManager.prototype.canUndo;\nUndoManager.prototype.hasRedo = UndoManager.prototype.canRedo;\nUndoManager.prototype.isClean = UndoManager.prototype.isAtBookmark;\nUndoManager.prototype.markClean = UndoManager.prototype.bookmark;\nfunction rearrangeUndoStack(stack, pos) {\n    for (var i = pos; i--;) {\n        var deltaSet = stack[i];\n        if (deltaSet && !deltaSet[0].ignore) {\n            while (i < pos - 1) {\n                var swapped = swapGroups(stack[i], stack[i + 1]);\n                stack[i] = swapped[0];\n                stack[i + 1] = swapped[1];\n                i++;\n            }\n            return true;\n        }\n    }\n}\nvar Range = require(\"./range\").Range;\nvar cmp = Range.comparePoints;\nvar comparePoints = Range.comparePoints;\nfunction $updateMarkers(delta) {\n    var isInsert = delta.action == \"insert\";\n    var start = delta.start;\n    var end = delta.end;\n    var rowShift = (end.row - start.row) * (isInsert ? 1 : -1);\n    var colShift = (end.column - start.column) * (isInsert ? 1 : -1);\n    if (isInsert)\n        end = start;\n    for (var i in this.marks) {\n        var point = this.marks[i];\n        var cmp = comparePoints(point, start);\n        if (cmp < 0) {\n            continue; // delta starts after the range\n        }\n        if (cmp === 0) {\n            if (isInsert) {\n                if (point.bias == 1) {\n                    cmp = 1;\n                }\n                else {\n                    point.bias == -1;\n                    continue;\n                }\n            }\n        }\n        var cmp2 = isInsert ? cmp : comparePoints(point, end);\n        if (cmp2 > 0) {\n            point.row += rowShift;\n            point.column += point.row == end.row ? colShift : 0;\n            continue;\n        }\n        if (!isInsert && cmp2 <= 0) {\n            point.row = start.row;\n            point.column = start.column;\n            if (cmp2 === 0)\n                point.bias = 1;\n        }\n    }\n}\nfunction clonePos(pos) {\n    return { row: pos.row, column: pos.column };\n}\nfunction cloneDelta(d) {\n    return {\n        start: clonePos(d.start),\n        end: clonePos(d.end),\n        action: d.action,\n        lines: d.lines.slice()\n    };\n}\nfunction stringifyDelta(d) {\n    d = d || this;\n    if (Array.isArray(d)) {\n        return d.map(stringifyDelta).join(\"\\n\");\n    }\n    var type = \"\";\n    if (d.action) {\n        type = d.action == \"insert\" ? \"+\" : \"-\";\n        type += \"[\" + d.lines + \"]\";\n    }\n    else if (d.value) {\n        if (Array.isArray(d.value)) {\n            type = d.value.map(stringifyRange).join(\"\\n\");\n        }\n        else {\n            type = stringifyRange(d.value);\n        }\n    }\n    if (d.start) {\n        type += stringifyRange(d);\n    }\n    if (d.id || d.rev) {\n        type += \"\\t(\" + (d.id || d.rev) + \")\";\n    }\n    return type;\n}\nfunction stringifyRange(r) {\n    return r.start.row + \":\" + r.start.column\n        + \"=>\" + r.end.row + \":\" + r.end.column;\n}\nfunction swap(d1, d2) {\n    var i1 = d1.action == \"insert\";\n    var i2 = d2.action == \"insert\";\n    if (i1 && i2) {\n        if (cmp(d2.start, d1.end) >= 0) {\n            shift(d2, d1, -1);\n        }\n        else if (cmp(d2.start, d1.start) <= 0) {\n            shift(d1, d2, +1);\n        }\n        else {\n            return null;\n        }\n    }\n    else if (i1 && !i2) {\n        if (cmp(d2.start, d1.end) >= 0) {\n            shift(d2, d1, -1);\n        }\n        else if (cmp(d2.end, d1.start) <= 0) {\n            shift(d1, d2, -1);\n        }\n        else {\n            return null;\n        }\n    }\n    else if (!i1 && i2) {\n        if (cmp(d2.start, d1.start) >= 0) {\n            shift(d2, d1, +1);\n        }\n        else if (cmp(d2.start, d1.start) <= 0) {\n            shift(d1, d2, +1);\n        }\n        else {\n            return null;\n        }\n    }\n    else if (!i1 && !i2) {\n        if (cmp(d2.start, d1.start) >= 0) {\n            shift(d2, d1, +1);\n        }\n        else if (cmp(d2.end, d1.start) <= 0) {\n            shift(d1, d2, -1);\n        }\n        else {\n            return null;\n        }\n    }\n    return [d2, d1];\n}\nfunction swapGroups(ds1, ds2) {\n    for (var i = ds1.length; i--;) {\n        for (var j = 0; j < ds2.length; j++) {\n            if (!swap(ds1[i], ds2[j])) {\n                while (i < ds1.length) {\n                    while (j--) {\n                        swap(ds2[j], ds1[i]);\n                    }\n                    j = ds2.length;\n                    i++;\n                }\n                return [ds1, ds2];\n            }\n        }\n    }\n    ds1.selectionBefore = ds2.selectionBefore =\n        ds1.selectionAfter = ds2.selectionAfter = null;\n    return [ds2, ds1];\n}\nfunction xform(d1, c1) {\n    var i1 = d1.action == \"insert\";\n    var i2 = c1.action == \"insert\";\n    if (i1 && i2) {\n        if (cmp(d1.start, c1.start) < 0) {\n            shift(c1, d1, 1);\n        }\n        else {\n            shift(d1, c1, 1);\n        }\n    }\n    else if (i1 && !i2) {\n        if (cmp(d1.start, c1.end) >= 0) {\n            shift(d1, c1, -1);\n        }\n        else if (cmp(d1.start, c1.start) <= 0) {\n            shift(c1, d1, +1);\n        }\n        else {\n            shift(d1, Range.fromPoints(c1.start, d1.start), -1);\n            shift(c1, d1, +1);\n        }\n    }\n    else if (!i1 && i2) {\n        if (cmp(c1.start, d1.end) >= 0) {\n            shift(c1, d1, -1);\n        }\n        else if (cmp(c1.start, d1.start) <= 0) {\n            shift(d1, c1, +1);\n        }\n        else {\n            shift(c1, Range.fromPoints(d1.start, c1.start), -1);\n            shift(d1, c1, +1);\n        }\n    }\n    else if (!i1 && !i2) {\n        if (cmp(c1.start, d1.end) >= 0) {\n            shift(c1, d1, -1);\n        }\n        else if (cmp(c1.end, d1.start) <= 0) {\n            shift(d1, c1, -1);\n        }\n        else {\n            var before, after;\n            if (cmp(d1.start, c1.start) < 0) {\n                before = d1;\n                d1 = splitDelta(d1, c1.start);\n            }\n            if (cmp(d1.end, c1.end) > 0) {\n                after = splitDelta(d1, c1.end);\n            }\n            shiftPos(c1.end, d1.start, d1.end, -1);\n            if (after && !before) {\n                d1.lines = after.lines;\n                d1.start = after.start;\n                d1.end = after.end;\n                after = d1;\n            }\n            return [c1, before, after].filter(Boolean);\n        }\n    }\n    return [c1, d1];\n}\nfunction shift(d1, d2, dir) {\n    shiftPos(d1.start, d2.start, d2.end, dir);\n    shiftPos(d1.end, d2.start, d2.end, dir);\n}\nfunction shiftPos(pos, start, end, dir) {\n    if (pos.row == (dir == 1 ? start : end).row) {\n        pos.column += dir * (end.column - start.column);\n    }\n    pos.row += dir * (end.row - start.row);\n}\nfunction splitDelta(c, pos) {\n    var lines = c.lines;\n    var end = c.end;\n    c.end = clonePos(pos);\n    var rowsBefore = c.end.row - c.start.row;\n    var otherLines = lines.splice(rowsBefore, lines.length);\n    var col = rowsBefore ? pos.column : pos.column - c.start.column;\n    lines.push(otherLines[0].substring(0, col));\n    otherLines[0] = otherLines[0].substr(col);\n    var rest = {\n        start: clonePos(pos),\n        end: end,\n        lines: otherLines,\n        action: c.action\n    };\n    return rest;\n}\nfunction moveDeltasByOne(redoStack, d) {\n    d = cloneDelta(d);\n    for (var j = redoStack.length; j--;) {\n        var deltaSet = redoStack[j];\n        for (var i = 0; i < deltaSet.length; i++) {\n            var x = deltaSet[i];\n            var xformed = xform(x, d);\n            d = xformed[0];\n            if (xformed.length != 2) {\n                if (xformed[2]) {\n                    deltaSet.splice(i + 1, 1, xformed[1], xformed[2]);\n                    i++;\n                }\n                else if (!xformed[1]) {\n                    deltaSet.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        if (!deltaSet.length) {\n            redoStack.splice(j, 1);\n        }\n    }\n    return redoStack;\n}\nfunction rebaseRedoStack(redoStack, deltaSets) {\n    for (var i = 0; i < deltaSets.length; i++) {\n        var deltas = deltaSets[i];\n        for (var j = 0; j < deltas.length; j++) {\n            moveDeltasByOne(redoStack, deltas[j]);\n        }\n    }\n}\nexports.UndoManager = UndoManager;\n\n});\n\nace.define(\"ace/edit_session/fold_line\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"../range\").Range;\nvar FoldLine = /** @class */ (function () {\n    function FoldLine(foldData, folds) {\n        this.foldData = foldData;\n        if (Array.isArray(folds)) {\n            this.folds = folds;\n        }\n        else {\n            folds = this.folds = [folds];\n        }\n        var last = folds[folds.length - 1];\n        this.range = new Range(folds[0].start.row, folds[0].start.column, last.end.row, last.end.column);\n        this.start = this.range.start;\n        this.end = this.range.end;\n        this.folds.forEach(function (fold) {\n            fold.setFoldLine(this);\n        }, this);\n    }\n    FoldLine.prototype.shiftRow = function (shift) {\n        this.start.row += shift;\n        this.end.row += shift;\n        this.folds.forEach(function (fold) {\n            fold.start.row += shift;\n            fold.end.row += shift;\n        });\n    };\n    FoldLine.prototype.addFold = function (fold) {\n        if (fold.sameRow) {\n            if (fold.start.row < this.startRow || fold.endRow > this.endRow) {\n                throw new Error(\"Can't add a fold to this FoldLine as it has no connection\");\n            }\n            this.folds.push(fold);\n            this.folds.sort(function (a, b) {\n                return -a.range.compareEnd(b.start.row, b.start.column);\n            });\n            if (this.range.compareEnd(fold.start.row, fold.start.column) > 0) {\n                this.end.row = fold.end.row;\n                this.end.column = fold.end.column;\n            }\n            else if (this.range.compareStart(fold.end.row, fold.end.column) < 0) {\n                this.start.row = fold.start.row;\n                this.start.column = fold.start.column;\n            }\n        }\n        else if (fold.start.row == this.end.row) {\n            this.folds.push(fold);\n            this.end.row = fold.end.row;\n            this.end.column = fold.end.column;\n        }\n        else if (fold.end.row == this.start.row) {\n            this.folds.unshift(fold);\n            this.start.row = fold.start.row;\n            this.start.column = fold.start.column;\n        }\n        else {\n            throw new Error(\"Trying to add fold to FoldRow that doesn't have a matching row\");\n        }\n        fold.foldLine = this;\n    };\n    FoldLine.prototype.containsRow = function (row) {\n        return row >= this.start.row && row <= this.end.row;\n    };\n    FoldLine.prototype.walk = function (callback, endRow, endColumn) {\n        var lastEnd = 0, folds = this.folds, fold, cmp, stop, isNewRow = true;\n        if (endRow == null) {\n            endRow = this.end.row;\n            endColumn = this.end.column;\n        }\n        for (var i = 0; i < folds.length; i++) {\n            fold = folds[i];\n            cmp = fold.range.compareStart(endRow, endColumn);\n            if (cmp == -1) {\n                callback(null, endRow, endColumn, lastEnd, isNewRow);\n                return;\n            }\n            stop = callback(null, fold.start.row, fold.start.column, lastEnd, isNewRow);\n            stop = !stop && callback(fold.placeholder, fold.start.row, fold.start.column, lastEnd);\n            if (stop || cmp === 0) {\n                return;\n            }\n            isNewRow = !fold.sameRow;\n            lastEnd = fold.end.column;\n        }\n        callback(null, endRow, endColumn, lastEnd, isNewRow);\n    };\n    FoldLine.prototype.getNextFoldTo = function (row, column) {\n        var fold, cmp;\n        for (var i = 0; i < this.folds.length; i++) {\n            fold = this.folds[i];\n            cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                return {\n                    fold: fold,\n                    kind: \"after\"\n                };\n            }\n            else if (cmp === 0) {\n                return {\n                    fold: fold,\n                    kind: \"inside\"\n                };\n            }\n        }\n        return null;\n    };\n    FoldLine.prototype.addRemoveChars = function (row, column, len) {\n        var ret = this.getNextFoldTo(row, column), fold, folds;\n        if (ret) {\n            fold = ret.fold;\n            if (ret.kind == \"inside\"\n                && fold.start.column != column\n                && fold.start.row != row) {\n                window.console && window.console.log(row, column, fold);\n            }\n            else if (fold.start.row == row) {\n                folds = this.folds;\n                var i = folds.indexOf(fold);\n                if (i === 0) {\n                    this.start.column += len;\n                }\n                for (i; i < folds.length; i++) {\n                    fold = folds[i];\n                    fold.start.column += len;\n                    if (!fold.sameRow) {\n                        return;\n                    }\n                    fold.end.column += len;\n                }\n                this.end.column += len;\n            }\n        }\n    };\n    FoldLine.prototype.split = function (row, column) {\n        var pos = this.getNextFoldTo(row, column);\n        if (!pos || pos.kind == \"inside\")\n            return null;\n        var fold = pos.fold;\n        var folds = this.folds;\n        var foldData = this.foldData;\n        var i = folds.indexOf(fold);\n        var foldBefore = folds[i - 1];\n        this.end.row = foldBefore.end.row;\n        this.end.column = foldBefore.end.column;\n        folds = folds.splice(i, folds.length - i);\n        var newFoldLine = new FoldLine(foldData, folds);\n        foldData.splice(foldData.indexOf(this) + 1, 0, newFoldLine);\n        return newFoldLine;\n    };\n    FoldLine.prototype.merge = function (foldLineNext) {\n        var folds = foldLineNext.folds;\n        for (var i = 0; i < folds.length; i++) {\n            this.addFold(folds[i]);\n        }\n        var foldData = this.foldData;\n        foldData.splice(foldData.indexOf(foldLineNext), 1);\n    };\n    FoldLine.prototype.toString = function () {\n        var ret = [this.range.toString() + \": [\"];\n        this.folds.forEach(function (fold) {\n            ret.push(\"  \" + fold.toString());\n        });\n        ret.push(\"]\");\n        return ret.join(\"\\n\");\n    };\n    FoldLine.prototype.idxToPosition = function (idx) {\n        var lastFoldEndColumn = 0;\n        for (var i = 0; i < this.folds.length; i++) {\n            var fold = this.folds[i];\n            idx -= fold.start.column - lastFoldEndColumn;\n            if (idx < 0) {\n                return {\n                    row: fold.start.row,\n                    column: fold.start.column + idx\n                };\n            }\n            idx -= fold.placeholder.length;\n            if (idx < 0) {\n                return fold.start;\n            }\n            lastFoldEndColumn = fold.end.column;\n        }\n        return {\n            row: this.end.row,\n            column: this.end.column + idx\n        };\n    };\n    return FoldLine;\n}());\nexports.FoldLine = FoldLine;\n\n});\n\nace.define(\"ace/range_list\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"./range\").Range;\nvar comparePoints = Range.comparePoints;\nvar RangeList = /** @class */ (function () {\n    function RangeList() {\n        this.ranges = [];\n        this.$bias = 1;\n    }\n    RangeList.prototype.pointIndex = function (pos, excludeEdges, startIndex) {\n        var list = this.ranges;\n        for (var i = startIndex || 0; i < list.length; i++) {\n            var range = list[i];\n            var cmpEnd = comparePoints(pos, range.end);\n            if (cmpEnd > 0)\n                continue;\n            var cmpStart = comparePoints(pos, range.start);\n            if (cmpEnd === 0)\n                return excludeEdges && cmpStart !== 0 ? -i - 2 : i;\n            if (cmpStart > 0 || (cmpStart === 0 && !excludeEdges))\n                return i;\n            return -i - 1;\n        }\n        return -i - 1;\n    };\n    RangeList.prototype.add = function (range) {\n        var excludeEdges = !range.isEmpty();\n        var startIndex = this.pointIndex(range.start, excludeEdges);\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n        var endIndex = this.pointIndex(range.end, excludeEdges, startIndex);\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n        else\n            endIndex++;\n        return this.ranges.splice(startIndex, endIndex - startIndex, range);\n    };\n    RangeList.prototype.addList = function (list) {\n        var removed = [];\n        for (var i = list.length; i--;) {\n            removed.push.apply(removed, this.add(list[i]));\n        }\n        return removed;\n    };\n    RangeList.prototype.substractPoint = function (pos) {\n        var i = this.pointIndex(pos);\n        if (i >= 0)\n            return this.ranges.splice(i, 1);\n    };\n    RangeList.prototype.merge = function () {\n        var removed = [];\n        var list = this.ranges;\n        list = list.sort(function (a, b) {\n            return comparePoints(a.start, b.start);\n        });\n        var next = list[0], range;\n        for (var i = 1; i < list.length; i++) {\n            range = next;\n            next = list[i];\n            var cmp = comparePoints(range.end, next.start);\n            if (cmp < 0)\n                continue;\n            if (cmp == 0 && !range.isEmpty() && !next.isEmpty())\n                continue;\n            if (comparePoints(range.end, next.end) < 0) {\n                range.end.row = next.end.row;\n                range.end.column = next.end.column;\n            }\n            list.splice(i, 1);\n            removed.push(next);\n            next = range;\n            i--;\n        }\n        this.ranges = list;\n        return removed;\n    };\n    RangeList.prototype.contains = function (row, column) {\n        return this.pointIndex({ row: row, column: column }) >= 0;\n    };\n    RangeList.prototype.containsPoint = function (pos) {\n        return this.pointIndex(pos) >= 0;\n    };\n    RangeList.prototype.rangeAtPoint = function (pos) {\n        var i = this.pointIndex(pos);\n        if (i >= 0)\n            return this.ranges[i];\n    };\n    RangeList.prototype.clipRows = function (startRow, endRow) {\n        var list = this.ranges;\n        if (list[0].start.row > endRow || list[list.length - 1].start.row < startRow)\n            return [];\n        var startIndex = this.pointIndex({ row: startRow, column: 0 });\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n        var endIndex = this.pointIndex({ row: endRow, column: 0 }, startIndex);\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n        var clipped = [];\n        for (var i = startIndex; i < endIndex; i++) {\n            clipped.push(list[i]);\n        }\n        return clipped;\n    };\n    RangeList.prototype.removeAll = function () {\n        return this.ranges.splice(0, this.ranges.length);\n    };\n    RangeList.prototype.attach = function (session) {\n        if (this.session)\n            this.detach();\n        this.session = session;\n        this.onChange = this.$onChange.bind(this);\n        this.session.on('change', this.onChange);\n    };\n    RangeList.prototype.detach = function () {\n        if (!this.session)\n            return;\n        this.session.removeListener('change', this.onChange);\n        this.session = null;\n    };\n    RangeList.prototype.$onChange = function (delta) {\n        var start = delta.start;\n        var end = delta.end;\n        var startRow = start.row;\n        var endRow = end.row;\n        var ranges = this.ranges;\n        for (var i = 0, n = ranges.length; i < n; i++) {\n            var r = ranges[i];\n            if (r.end.row >= startRow)\n                break;\n        }\n        if (delta.action == \"insert\") {\n            var lineDif = endRow - startRow;\n            var colDiff = -start.column + end.column;\n            for (; i < n; i++) {\n                var r = ranges[i];\n                if (r.start.row > startRow)\n                    break;\n                if (r.start.row == startRow && r.start.column >= start.column) {\n                    if (r.start.column == start.column && this.$bias <= 0) {\n                    }\n                    else {\n                        r.start.column += colDiff;\n                        r.start.row += lineDif;\n                    }\n                }\n                if (r.end.row == startRow && r.end.column >= start.column) {\n                    if (r.end.column == start.column && this.$bias < 0) {\n                        continue;\n                    }\n                    if (r.end.column == start.column && colDiff > 0 && i < n - 1) {\n                        if (r.end.column > r.start.column && r.end.column == ranges[i + 1].start.column)\n                            r.end.column -= colDiff;\n                    }\n                    r.end.column += colDiff;\n                    r.end.row += lineDif;\n                }\n            }\n        }\n        else {\n            var lineDif = startRow - endRow;\n            var colDiff = start.column - end.column;\n            for (; i < n; i++) {\n                var r = ranges[i];\n                if (r.start.row > endRow)\n                    break;\n                if (r.end.row < endRow\n                    && (startRow < r.end.row\n                        || startRow == r.end.row && start.column < r.end.column)) {\n                    r.end.row = startRow;\n                    r.end.column = start.column;\n                }\n                else if (r.end.row == endRow) {\n                    if (r.end.column <= end.column) {\n                        if (lineDif || r.end.column > start.column) {\n                            r.end.column = start.column;\n                            r.end.row = start.row;\n                        }\n                    }\n                    else {\n                        r.end.column += colDiff;\n                        r.end.row += lineDif;\n                    }\n                }\n                else if (r.end.row > endRow) {\n                    r.end.row += lineDif;\n                }\n                if (r.start.row < endRow\n                    && (startRow < r.start.row\n                        || startRow == r.start.row && start.column < r.start.column)) {\n                    r.start.row = startRow;\n                    r.start.column = start.column;\n                }\n                else if (r.start.row == endRow) {\n                    if (r.start.column <= end.column) {\n                        if (lineDif || r.start.column > start.column) {\n                            r.start.column = start.column;\n                            r.start.row = start.row;\n                        }\n                    }\n                    else {\n                        r.start.column += colDiff;\n                        r.start.row += lineDif;\n                    }\n                }\n                else if (r.start.row > endRow) {\n                    r.start.row += lineDif;\n                }\n            }\n        }\n        if (lineDif != 0 && i < n) {\n            for (; i < n; i++) {\n                var r = ranges[i];\n                r.start.row += lineDif;\n                r.end.row += lineDif;\n            }\n        }\n    };\n    return RangeList;\n}());\nRangeList.prototype.comparePoints = comparePoints;\nexports.RangeList = RangeList;\n\n});\n\nace.define(\"ace/edit_session/fold\",[\"require\",\"exports\",\"module\",\"ace/range_list\"], function(require, exports, module){\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar RangeList = require(\"../range_list\").RangeList;\nvar Fold = /** @class */ (function (_super) {\n    __extends(Fold, _super);\n    function Fold(range, placeholder) {\n        var _this = _super.call(this) || this;\n        _this.foldLine = null;\n        _this.placeholder = placeholder;\n        _this.range = range;\n        _this.start = range.start;\n        _this.end = range.end;\n        _this.sameRow = range.start.row == range.end.row;\n        _this.subFolds = _this.ranges = [];\n        return _this;\n    }\n    Fold.prototype.toString = function () {\n        return '\"' + this.placeholder + '\" ' + this.range.toString();\n    };\n    Fold.prototype.setFoldLine = function (foldLine) {\n        this.foldLine = foldLine;\n        this.subFolds.forEach(function (fold) {\n            fold.setFoldLine(foldLine);\n        });\n    };\n    Fold.prototype.clone = function () {\n        var range = this.range.clone();\n        var fold = new Fold(range, this.placeholder);\n        this.subFolds.forEach(function (subFold) {\n            fold.subFolds.push(subFold.clone());\n        });\n        fold.collapseChildren = this.collapseChildren;\n        return fold;\n    };\n    Fold.prototype.addSubFold = function (fold) {\n        if (this.range.isEqual(fold))\n            return;\n        consumeRange(fold, this.start);\n        var row = fold.start.row, column = fold.start.column;\n        for (var i = 0, cmp = -1; i < this.subFolds.length; i++) {\n            cmp = this.subFolds[i].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        var afterStart = this.subFolds[i];\n        var firstConsumed = 0;\n        if (cmp == 0) {\n            if (afterStart.range.containsRange(fold))\n                return afterStart.addSubFold(fold);\n            else\n                firstConsumed = 1;\n        }\n        var row = fold.range.end.row, column = fold.range.end.column;\n        for (var j = i, cmp = -1; j < this.subFolds.length; j++) {\n            cmp = this.subFolds[j].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        if (cmp == 0)\n            j++;\n        var consumedFolds = this.subFolds.splice(i, j - i, fold);\n        var last = cmp == 0 ? consumedFolds.length - 1 : consumedFolds.length;\n        for (var k = firstConsumed; k < last; k++) {\n            fold.addSubFold(consumedFolds[k]);\n        }\n        fold.setFoldLine(this.foldLine);\n        return fold;\n    };\n    Fold.prototype.restoreRange = function (range) {\n        return restoreRange(range, this.start);\n    };\n    return Fold;\n}(RangeList));\nfunction consumePoint(point, anchor) {\n    point.row -= anchor.row;\n    if (point.row == 0)\n        point.column -= anchor.column;\n}\nfunction consumeRange(range, anchor) {\n    consumePoint(range.start, anchor);\n    consumePoint(range.end, anchor);\n}\nfunction restorePoint(point, anchor) {\n    if (point.row == 0)\n        point.column += anchor.column;\n    point.row += anchor.row;\n}\nfunction restoreRange(range, anchor) {\n    restorePoint(range.start, anchor);\n    restorePoint(range.end, anchor);\n}\nexports.Fold = Fold;\n\n});\n\nace.define(\"ace/edit_session/folding\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/edit_session/fold_line\",\"ace/edit_session/fold\",\"ace/token_iterator\",\"ace/mouse/mouse_event\"], function(require, exports, module){// @ts-nocheck\n\"use strict\";\nvar Range = require(\"../range\").Range;\nvar FoldLine = require(\"./fold_line\").FoldLine;\nvar Fold = require(\"./fold\").Fold;\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\nvar MouseEvent = require(\"../mouse/mouse_event\").MouseEvent;\nfunction Folding() {\n    this.getFoldAt = function (row, column, side) {\n        var foldLine = this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n        var folds = foldLine.folds;\n        for (var i = 0; i < folds.length; i++) {\n            var range = folds[i].range;\n            if (range.contains(row, column)) {\n                if (side == 1 && range.isEnd(row, column) && !range.isEmpty()) {\n                    continue;\n                }\n                else if (side == -1 && range.isStart(row, column) && !range.isEmpty()) {\n                    continue;\n                }\n                return folds[i];\n            }\n        }\n    };\n    this.getFoldsInRange = function (range) {\n        var start = range.start;\n        var end = range.end;\n        var foldLines = this.$foldData;\n        var foundFolds = [];\n        start.column += 1;\n        end.column -= 1;\n        for (var i = 0; i < foldLines.length; i++) {\n            var cmp = foldLines[i].range.compareRange(range);\n            if (cmp == 2) {\n                continue;\n            }\n            else if (cmp == -2) {\n                break;\n            }\n            var folds = foldLines[i].folds;\n            for (var j = 0; j < folds.length; j++) {\n                var fold = folds[j];\n                cmp = fold.range.compareRange(range);\n                if (cmp == -2) {\n                    break;\n                }\n                else if (cmp == 2) {\n                    continue;\n                }\n                else \n                if (cmp == 42) {\n                    break;\n                }\n                foundFolds.push(fold);\n            }\n        }\n        start.column -= 1;\n        end.column += 1;\n        return foundFolds;\n    };\n    this.getFoldsInRangeList = function (ranges) {\n        if (Array.isArray(ranges)) {\n            var folds = [];\n            ranges.forEach(function (range) {\n                folds = folds.concat(this.getFoldsInRange(range));\n            }, this);\n        }\n        else {\n            var folds = this.getFoldsInRange(ranges);\n        }\n        return folds;\n    };\n    this.getAllFolds = function () {\n        var folds = [];\n        var foldLines = this.$foldData;\n        for (var i = 0; i < foldLines.length; i++)\n            for (var j = 0; j < foldLines[i].folds.length; j++)\n                folds.push(foldLines[i].folds[j]);\n        return folds;\n    };\n    this.getFoldStringAt = function (row, column, trim, foldLine) {\n        foldLine = foldLine || this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n        var lastFold = {\n            end: { column: 0 }\n        };\n        var str, fold;\n        for (var i = 0; i < foldLine.folds.length; i++) {\n            fold = foldLine.folds[i];\n            var cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                str = this\n                    .getLine(fold.start.row)\n                    .substring(lastFold.end.column, fold.start.column);\n                break;\n            }\n            else if (cmp === 0) {\n                return null;\n            }\n            lastFold = fold;\n        }\n        if (!str)\n            str = this.getLine(fold.start.row).substring(lastFold.end.column);\n        if (trim == -1)\n            return str.substring(0, column - lastFold.end.column);\n        else if (trim == 1)\n            return str.substring(column - lastFold.end.column);\n        else\n            return str;\n    };\n    this.getFoldLine = function (docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.start.row <= docRow && foldLine.end.row >= docRow) {\n                return foldLine;\n            }\n            else if (foldLine.end.row > docRow) {\n                return null;\n            }\n        }\n        return null;\n    };\n    this.getNextFoldLine = function (docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.end.row >= docRow) {\n                return foldLine;\n            }\n        }\n        return null;\n    };\n    this.getFoldedRowCount = function (first, last) {\n        var foldData = this.$foldData, rowCount = last - first + 1;\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i], end = foldLine.end.row, start = foldLine.start.row;\n            if (end >= last) {\n                if (start < last) {\n                    if (start >= first)\n                        rowCount -= last - start;\n                    else\n                        rowCount = 0; // in one fold\n                }\n                break;\n            }\n            else if (end >= first) {\n                if (start >= first) // fold inside range\n                    rowCount -= end - start;\n                else\n                    rowCount -= end - first + 1;\n            }\n        }\n        return rowCount;\n    };\n    this.$addFoldLine = function (foldLine) {\n        this.$foldData.push(foldLine);\n        this.$foldData.sort(function (a, b) {\n            return a.start.row - b.start.row;\n        });\n        return foldLine;\n    };\n    this.addFold = function (placeholder, range) {\n        var foldData = this.$foldData;\n        var added = false;\n        var fold;\n        if (placeholder instanceof Fold)\n            fold = placeholder;\n        else {\n            fold = new Fold(range, placeholder);\n            fold.collapseChildren = range.collapseChildren;\n        }\n        this.$clipRangeToDocument(fold.range);\n        var startRow = fold.start.row;\n        var startColumn = fold.start.column;\n        var endRow = fold.end.row;\n        var endColumn = fold.end.column;\n        var startFold = this.getFoldAt(startRow, startColumn, 1);\n        var endFold = this.getFoldAt(endRow, endColumn, -1);\n        if (startFold && endFold == startFold)\n            return startFold.addSubFold(fold);\n        if (startFold && !startFold.range.isStart(startRow, startColumn))\n            this.removeFold(startFold);\n        if (endFold && !endFold.range.isEnd(endRow, endColumn))\n            this.removeFold(endFold);\n        var folds = this.getFoldsInRange(fold.range);\n        if (folds.length > 0) {\n            this.removeFolds(folds);\n            if (!fold.collapseChildren) {\n                folds.forEach(function (subFold) {\n                    fold.addSubFold(subFold);\n                });\n            }\n        }\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (endRow == foldLine.start.row) {\n                foldLine.addFold(fold);\n                added = true;\n                break;\n            }\n            else if (startRow == foldLine.end.row) {\n                foldLine.addFold(fold);\n                added = true;\n                if (!fold.sameRow) {\n                    var foldLineNext = foldData[i + 1];\n                    if (foldLineNext && foldLineNext.start.row == endRow) {\n                        foldLine.merge(foldLineNext);\n                        break;\n                    }\n                }\n                break;\n            }\n            else if (endRow <= foldLine.start.row) {\n                break;\n            }\n        }\n        if (!added)\n            foldLine = this.$addFoldLine(new FoldLine(this.$foldData, fold));\n        if (this.$useWrapMode)\n            this.$updateWrapData(foldLine.start.row, foldLine.start.row);\n        else\n            this.$updateRowLengthCache(foldLine.start.row, foldLine.start.row);\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"add\" });\n        return fold;\n    };\n    this.addFolds = function (folds) {\n        folds.forEach(function (fold) {\n            this.addFold(fold);\n        }, this);\n    };\n    this.removeFold = function (fold) {\n        var foldLine = fold.foldLine;\n        var startRow = foldLine.start.row;\n        var endRow = foldLine.end.row;\n        var foldLines = this.$foldData;\n        var folds = foldLine.folds;\n        if (folds.length == 1) {\n            foldLines.splice(foldLines.indexOf(foldLine), 1);\n        }\n        else \n        if (foldLine.range.isEnd(fold.end.row, fold.end.column)) {\n            folds.pop();\n            foldLine.end.row = folds[folds.length - 1].end.row;\n            foldLine.end.column = folds[folds.length - 1].end.column;\n        }\n        else \n        if (foldLine.range.isStart(fold.start.row, fold.start.column)) {\n            folds.shift();\n            foldLine.start.row = folds[0].start.row;\n            foldLine.start.column = folds[0].start.column;\n        }\n        else \n        if (fold.sameRow) {\n            folds.splice(folds.indexOf(fold), 1);\n        }\n        else \n        {\n            var newFoldLine = foldLine.split(fold.start.row, fold.start.column);\n            folds = newFoldLine.folds;\n            folds.shift();\n            newFoldLine.start.row = folds[0].start.row;\n            newFoldLine.start.column = folds[0].start.column;\n        }\n        if (!this.$updating) {\n            if (this.$useWrapMode)\n                this.$updateWrapData(startRow, endRow);\n            else\n                this.$updateRowLengthCache(startRow, endRow);\n        }\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"remove\" });\n    };\n    this.removeFolds = function (folds) {\n        var cloneFolds = [];\n        for (var i = 0; i < folds.length; i++) {\n            cloneFolds.push(folds[i]);\n        }\n        cloneFolds.forEach(function (fold) {\n            this.removeFold(fold);\n        }, this);\n        this.$modified = true;\n    };\n    this.expandFold = function (fold) {\n        this.removeFold(fold);\n        fold.subFolds.forEach(function (subFold) {\n            fold.restoreRange(subFold);\n            this.addFold(subFold);\n        }, this);\n        if (fold.collapseChildren > 0) {\n            this.foldAll(fold.start.row + 1, fold.end.row, fold.collapseChildren - 1);\n        }\n        fold.subFolds = [];\n    };\n    this.expandFolds = function (folds) {\n        folds.forEach(function (fold) {\n            this.expandFold(fold);\n        }, this);\n    };\n    this.unfold = function (location, expandInner) {\n        var range, folds;\n        if (location == null) {\n            range = new Range(0, 0, this.getLength(), 0);\n            if (expandInner == null)\n                expandInner = true;\n        }\n        else if (typeof location == \"number\") {\n            range = new Range(location, 0, location, this.getLine(location).length);\n        }\n        else if (\"row\" in location) {\n            range = Range.fromPoints(location, location);\n        }\n        else if (Array.isArray(location)) {\n            folds = [];\n            location.forEach(function (range) {\n                folds = folds.concat(this.unfold(range));\n            }, this);\n            return folds;\n        }\n        else {\n            range = location;\n        }\n        folds = this.getFoldsInRangeList(range);\n        var outermostFolds = folds;\n        while (folds.length == 1\n            && Range.comparePoints(folds[0].start, range.start) < 0\n            && Range.comparePoints(folds[0].end, range.end) > 0) {\n            this.expandFolds(folds);\n            folds = this.getFoldsInRangeList(range);\n        }\n        if (expandInner != false) {\n            this.removeFolds(folds);\n        }\n        else {\n            this.expandFolds(folds);\n        }\n        if (outermostFolds.length)\n            return outermostFolds;\n    };\n    this.isRowFolded = function (docRow, startFoldRow) {\n        return !!this.getFoldLine(docRow, startFoldRow);\n    };\n    this.getRowFoldEnd = function (docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.end.row : docRow;\n    };\n    this.getRowFoldStart = function (docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.start.row : docRow;\n    };\n    this.getFoldDisplayLine = function (foldLine, endRow, endColumn, startRow, startColumn) {\n        if (startRow == null)\n            startRow = foldLine.start.row;\n        if (startColumn == null)\n            startColumn = 0;\n        if (endRow == null)\n            endRow = foldLine.end.row;\n        if (endColumn == null)\n            endColumn = this.getLine(endRow).length;\n        var doc = this.doc;\n        var textLine = \"\";\n        foldLine.walk(function (placeholder, row, column, lastColumn) {\n            if (row < startRow)\n                return;\n            if (row == startRow) {\n                if (column < startColumn)\n                    return;\n                lastColumn = Math.max(startColumn, lastColumn);\n            }\n            if (placeholder != null) {\n                textLine += placeholder;\n            }\n            else {\n                textLine += doc.getLine(row).substring(lastColumn, column);\n            }\n        }, endRow, endColumn);\n        return textLine;\n    };\n    this.getDisplayLine = function (row, endColumn, startRow, startColumn) {\n        var foldLine = this.getFoldLine(row);\n        if (!foldLine) {\n            var line;\n            line = this.doc.getLine(row);\n            return line.substring(startColumn || 0, endColumn || line.length);\n        }\n        else {\n            return this.getFoldDisplayLine(foldLine, row, endColumn, startRow, startColumn);\n        }\n    };\n    this.$cloneFoldData = function () {\n        var fd = [];\n        fd = this.$foldData.map(function (foldLine) {\n            var folds = foldLine.folds.map(function (fold) {\n                return fold.clone();\n            });\n            return new FoldLine(fd, folds);\n        });\n        return fd;\n    };\n    this.toggleFold = function (tryToUnfold) {\n        var selection = this.selection;\n        var range = selection.getRange();\n        var fold;\n        var bracketPos;\n        if (range.isEmpty()) {\n            var cursor = range.start;\n            fold = this.getFoldAt(cursor.row, cursor.column);\n            if (fold) {\n                this.expandFold(fold);\n                return;\n            }\n            else if (tryToUnfold) {\n                var foldLine = this.getFoldLine(cursor.row);\n                if (foldLine)\n                    this.expandFolds(foldLine.folds);\n                return;\n            }\n            else if (bracketPos = this.findMatchingBracket(cursor)) {\n                if (range.comparePoint(bracketPos) == 1) {\n                    range.end = bracketPos;\n                }\n                else {\n                    range.start = bracketPos;\n                    range.start.column++;\n                    range.end.column--;\n                }\n            }\n            else if (bracketPos = this.findMatchingBracket({ row: cursor.row, column: cursor.column + 1 })) {\n                if (range.comparePoint(bracketPos) == 1)\n                    range.end = bracketPos;\n                else\n                    range.start = bracketPos;\n                range.start.column++;\n            }\n            else {\n                range = this.getCommentFoldRange(cursor.row, cursor.column) || range;\n            }\n        }\n        else {\n            var folds = this.getFoldsInRange(range);\n            if (tryToUnfold && folds.length) {\n                this.expandFolds(folds);\n                return;\n            }\n            else if (folds.length == 1) {\n                fold = folds[0];\n            }\n        }\n        if (!fold)\n            fold = this.getFoldAt(range.start.row, range.start.column);\n        if (fold && fold.range.toString() == range.toString()) {\n            this.expandFold(fold);\n            return;\n        }\n        var placeholder = \"...\";\n        if (!range.isMultiLine()) {\n            placeholder = this.getTextRange(range);\n            if (placeholder.length < 4)\n                return;\n            placeholder = placeholder.trim().substring(0, 2) + \"..\";\n        }\n        this.addFold(placeholder, range);\n    };\n    this.getCommentFoldRange = function (row, column, dir) {\n        var iterator = new TokenIterator(this, row, column);\n        var token = iterator.getCurrentToken();\n        var type = token && token.type;\n        if (token && /^comment|string/.test(type)) {\n            type = type.match(/comment|string/)[0];\n            if (type == \"comment\")\n                type += \"|doc-start|\\\\.doc\";\n            var re = new RegExp(type);\n            var range = new Range();\n            if (dir != 1) {\n                do {\n                    token = iterator.stepBackward();\n                } while (token && re.test(token.type));\n                token = iterator.stepForward();\n            }\n            range.start.row = iterator.getCurrentTokenRow();\n            range.start.column = iterator.getCurrentTokenColumn() + token.value.length;\n            iterator = new TokenIterator(this, row, column);\n            var initState = this.getState(iterator.$row);\n            if (dir != -1) {\n                var lastRow = -1;\n                do {\n                    token = iterator.stepForward();\n                    if (lastRow == -1) {\n                        var state = this.getState(iterator.$row);\n                        if (initState.toString() !== state.toString())\n                            lastRow = iterator.$row;\n                    }\n                    else if (iterator.$row > lastRow) {\n                        break;\n                    }\n                } while (token && re.test(token.type));\n                token = iterator.stepBackward();\n            }\n            else\n                token = iterator.getCurrentToken();\n            range.end.row = iterator.getCurrentTokenRow();\n            range.end.column = iterator.getCurrentTokenColumn();\n            if (range.start.row == range.end.row && range.start.column > range.end.column)\n                return;\n            return range;\n        }\n    };\n    this.foldAll = function (startRow, endRow, depth, test) {\n        if (depth == undefined)\n            depth = 100000; // JSON.stringify doesn't hanle Infinity\n        var foldWidgets = this.foldWidgets;\n        if (!foldWidgets)\n            return; // mode doesn't support folding\n        endRow = endRow || this.getLength();\n        startRow = startRow || 0;\n        for (var row = startRow; row < endRow; row++) {\n            if (foldWidgets[row] == null)\n                foldWidgets[row] = this.getFoldWidget(row);\n            if (foldWidgets[row] != \"start\")\n                continue;\n            if (test && !test(row))\n                continue;\n            var range = this.getFoldWidgetRange(row);\n            if (range && range.isMultiLine()\n                && range.end.row <= endRow\n                && range.start.row >= startRow) {\n                row = range.end.row;\n                range.collapseChildren = depth;\n                this.addFold(\"...\", range);\n            }\n        }\n    };\n    this.foldToLevel = function (level) {\n        this.foldAll();\n        while (level-- > 0)\n            this.unfold(null, false);\n    };\n    this.foldAllComments = function () {\n        var session = this;\n        this.foldAll(null, null, null, function (row) {\n            var tokens = session.getTokens(row);\n            for (var i = 0; i < tokens.length; i++) {\n                var token = tokens[i];\n                if (token.type == \"text\" && /^\\s+$/.test(token.value))\n                    continue;\n                if (/comment/.test(token.type))\n                    return true;\n                return false;\n            }\n        });\n    };\n    this.$foldStyles = {\n        \"manual\": 1,\n        \"markbegin\": 1,\n        \"markbeginend\": 1\n    };\n    this.$foldStyle = \"markbegin\";\n    this.setFoldStyle = function (style) {\n        if (!this.$foldStyles[style])\n            throw new Error(\"invalid fold style: \" + style + \"[\" + Object.keys(this.$foldStyles).join(\", \") + \"]\");\n        if (this.$foldStyle == style)\n            return;\n        this.$foldStyle = style;\n        if (style == \"manual\")\n            this.unfold();\n        var mode = this.$foldMode;\n        this.$setFolding(null);\n        this.$setFolding(mode);\n    };\n    this.$setFolding = function (foldMode) {\n        if (this.$foldMode == foldMode)\n            return;\n        this.$foldMode = foldMode;\n        this.off('change', this.$updateFoldWidgets);\n        this.off('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n        this._signal(\"changeAnnotation\");\n        if (!foldMode || this.$foldStyle == \"manual\") {\n            this.foldWidgets = null;\n            return;\n        }\n        this.foldWidgets = [];\n        this.getFoldWidget = foldMode.getFoldWidget.bind(foldMode, this, this.$foldStyle);\n        this.getFoldWidgetRange = foldMode.getFoldWidgetRange.bind(foldMode, this, this.$foldStyle);\n        this.$updateFoldWidgets = this.updateFoldWidgets.bind(this);\n        this.$tokenizerUpdateFoldWidgets = this.tokenizerUpdateFoldWidgets.bind(this);\n        this.on('change', this.$updateFoldWidgets);\n        this.on('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n    };\n    this.getParentFoldRangeData = function (row, ignoreCurrent) {\n        var fw = this.foldWidgets;\n        if (!fw || (ignoreCurrent && fw[row]))\n            return {};\n        var i = row - 1, firstRange;\n        while (i >= 0) {\n            var c = fw[i];\n            if (c == null)\n                c = fw[i] = this.getFoldWidget(i);\n            if (c == \"start\") {\n                var range = this.getFoldWidgetRange(i);\n                if (!firstRange)\n                    firstRange = range;\n                if (range && range.end.row >= row)\n                    break;\n            }\n            i--;\n        }\n        return {\n            range: i !== -1 && range,\n            firstRange: firstRange\n        };\n    };\n    this.onFoldWidgetClick = function (row, e) {\n        if (e instanceof MouseEvent)\n            e = e.domEvent;\n        var options = {\n            children: e.shiftKey,\n            all: e.ctrlKey || e.metaKey,\n            siblings: e.altKey\n        };\n        var range = this.$toggleFoldWidget(row, options);\n        if (!range) {\n            var el = (e.target || e.srcElement);\n            if (el && /ace_fold-widget/.test(el.className))\n                el.className += \" ace_invalid\";\n        }\n    };\n    this.$toggleFoldWidget = function (row, options) {\n        if (!this.getFoldWidget)\n            return;\n        var type = this.getFoldWidget(row);\n        var line = this.getLine(row);\n        var dir = type === \"end\" ? -1 : 1;\n        var fold = this.getFoldAt(row, dir === -1 ? 0 : line.length, dir);\n        if (fold) {\n            if (options.children || options.all)\n                this.removeFold(fold);\n            else\n                this.expandFold(fold);\n            return fold;\n        }\n        var range = this.getFoldWidgetRange(row, true);\n        if (range && !range.isMultiLine()) {\n            fold = this.getFoldAt(range.start.row, range.start.column, 1);\n            if (fold && range.isEqual(fold.range)) {\n                this.removeFold(fold);\n                return fold;\n            }\n        }\n        if (options.siblings) {\n            var data = this.getParentFoldRangeData(row);\n            if (data.range) {\n                var startRow = data.range.start.row + 1;\n                var endRow = data.range.end.row;\n            }\n            this.foldAll(startRow, endRow, options.all ? 10000 : 0);\n        }\n        else if (options.children) {\n            endRow = range ? range.end.row : this.getLength();\n            this.foldAll(row + 1, endRow, options.all ? 10000 : 0);\n        }\n        else if (range) {\n            if (options.all)\n                range.collapseChildren = 10000;\n            this.addFold(\"...\", range);\n        }\n        return range;\n    };\n    this.toggleFoldWidget = function (toggleParent) {\n        var row = this.selection.getCursor().row;\n        row = this.getRowFoldStart(row);\n        var range = this.$toggleFoldWidget(row, {});\n        if (range)\n            return;\n        var data = this.getParentFoldRangeData(row, true);\n        range = data.range || data.firstRange;\n        if (range) {\n            row = range.start.row;\n            var fold = this.getFoldAt(row, this.getLine(row).length, 1);\n            if (fold) {\n                this.removeFold(fold);\n            }\n            else {\n                this.addFold(\"...\", range);\n            }\n        }\n    };\n    this.updateFoldWidgets = function (delta) {\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n        if (len === 0) {\n            this.foldWidgets[firstRow] = null;\n        }\n        else if (delta.action == 'remove') {\n            this.foldWidgets.splice(firstRow, len + 1, null);\n        }\n        else {\n            var args = Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.foldWidgets.splice.apply(this.foldWidgets, args);\n        }\n    };\n    this.tokenizerUpdateFoldWidgets = function (e) {\n        var rows = e.data;\n        if (rows.first != rows.last) {\n            if (this.foldWidgets.length > rows.first)\n                this.foldWidgets.splice(rows.first, this.foldWidgets.length);\n        }\n    };\n}\nexports.Folding = Folding;\n\n});\n\nace.define(\"ace/edit_session/bracket_match\",[\"require\",\"exports\",\"module\",\"ace/token_iterator\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\nvar Range = require(\"../range\").Range;\nfunction BracketMatch() {\n    this.findMatchingBracket = function (position, chr) {\n        if (position.column == 0)\n            return null;\n        var charBeforeCursor = chr || this.getLine(position.row).charAt(position.column - 1);\n        if (charBeforeCursor == \"\")\n            return null;\n        var match = charBeforeCursor.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match)\n            return null;\n        if (match[1])\n            return this.$findClosingBracket(match[1], position);\n        else\n            return this.$findOpeningBracket(match[2], position);\n    };\n    this.getBracketRange = function (pos) {\n        var line = this.getLine(pos.row);\n        var before = true, range;\n        var chr = line.charAt(pos.column - 1);\n        var match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match) {\n            chr = line.charAt(pos.column);\n            pos = { row: pos.row, column: pos.column + 1 };\n            match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n            before = false;\n        }\n        if (!match)\n            return null;\n        if (match[1]) {\n            var bracketPos = this.$findClosingBracket(match[1], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(pos, bracketPos);\n            if (!before) {\n                range.end.column++;\n                range.start.column--;\n            }\n            range.cursor = range.end;\n        }\n        else {\n            var bracketPos = this.$findOpeningBracket(match[2], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(bracketPos, pos);\n            if (!before) {\n                range.start.column++;\n                range.end.column--;\n            }\n            range.cursor = range.start;\n        }\n        return range;\n    };\n    this.getMatchingBracketRanges = function (pos, isBackwards) {\n        var line = this.getLine(pos.row);\n        var bracketsRegExp = /([\\(\\[\\{])|([\\)\\]\\}])/;\n        var chr = !isBackwards && line.charAt(pos.column - 1);\n        var match = chr && chr.match(bracketsRegExp);\n        if (!match) {\n            chr = (isBackwards === undefined || isBackwards) && line.charAt(pos.column);\n            pos = {\n                row: pos.row,\n                column: pos.column + 1\n            };\n            match = chr && chr.match(bracketsRegExp);\n        }\n        if (!match)\n            return null;\n        var startRange = new Range(pos.row, pos.column - 1, pos.row, pos.column);\n        var bracketPos = match[1] ? this.$findClosingBracket(match[1], pos)\n            : this.$findOpeningBracket(match[2], pos);\n        if (!bracketPos)\n            return [startRange];\n        var endRange = new Range(bracketPos.row, bracketPos.column, bracketPos.row, bracketPos.column + 1);\n        return [startRange, endRange];\n    };\n    this.$brackets = {\n        \")\": \"(\",\n        \"(\": \")\",\n        \"]\": \"[\",\n        \"[\": \"]\",\n        \"{\": \"}\",\n        \"}\": \"{\",\n        \"<\": \">\",\n        \">\": \"<\"\n    };\n    this.$findOpeningBracket = function (bracket, position, typeRe) {\n        var openBracket = this.$brackets[bracket];\n        var depth = 1;\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n        if (!typeRe) {\n            typeRe = new RegExp(\"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"rparen\", \".paren\")\n                    .replace(/\\b(?:end)\\b/, \"(?:start|begin|end)\")\n                    .replace(/-close\\b/, \"-(close|open)\")\n                + \")+\");\n        }\n        var valueIndex = position.column - iterator.getCurrentTokenColumn() - 2;\n        var value = token.value;\n        while (true) {\n            while (valueIndex >= 0) {\n                var chr = value.charAt(valueIndex);\n                if (chr == openBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return { row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn() };\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex -= 1;\n            }\n            do {\n                token = iterator.stepBackward();\n            } while (token && !typeRe.test(token.type));\n            if (token == null)\n                break;\n            value = token.value;\n            valueIndex = value.length - 1;\n        }\n        return null;\n    };\n    this.$findClosingBracket = function (bracket, position, typeRe) {\n        var closingBracket = this.$brackets[bracket];\n        var depth = 1;\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n        if (!typeRe) {\n            typeRe = new RegExp(\"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"lparen\", \".paren\")\n                    .replace(/\\b(?:start|begin)\\b/, \"(?:start|begin|end)\")\n                    .replace(/-open\\b/, \"-(close|open)\")\n                + \")+\");\n        }\n        var valueIndex = position.column - iterator.getCurrentTokenColumn();\n        while (true) {\n            var value = token.value;\n            var valueLength = value.length;\n            while (valueIndex < valueLength) {\n                var chr = value.charAt(valueIndex);\n                if (chr == closingBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return { row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn() };\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex += 1;\n            }\n            do {\n                token = iterator.stepForward();\n            } while (token && !typeRe.test(token.type));\n            if (token == null)\n                break;\n            valueIndex = 0;\n        }\n        return null;\n    };\n    this.getMatchingTags = function (pos) {\n        var iterator = new TokenIterator(this, pos.row, pos.column);\n        var token = this.$findTagName(iterator);\n        if (!token)\n            return;\n        var prevToken = iterator.stepBackward();\n        if (prevToken.value === '<') {\n            return this.$findClosingTag(iterator, token);\n        }\n        else {\n            return this.$findOpeningTag(iterator, token);\n        }\n    };\n    this.$findTagName = function (iterator) {\n        var token = iterator.getCurrentToken();\n        var found = false;\n        var backward = false;\n        if (token && token.type.indexOf('tag-name') === -1) {\n            do {\n                if (backward)\n                    token = iterator.stepBackward();\n                else\n                    token = iterator.stepForward();\n                if (token) {\n                    if (token.value === \"/>\") {\n                        backward = true;\n                    }\n                    else if (token.type.indexOf('tag-name') !== -1) {\n                        found = true;\n                    }\n                }\n            } while (token && !found);\n        }\n        return token;\n    };\n    this.$findClosingTag = function (iterator, token) {\n        var prevToken;\n        var currentTag = token.value;\n        var tag = token.value;\n        var depth = 0;\n        var openTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1);\n        token = iterator.stepForward();\n        var openTagName = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + token.value.length);\n        var foundOpenTagEnd = false;\n        do {\n            prevToken = token;\n            if (prevToken.type.indexOf('tag-close') !== -1 && !foundOpenTagEnd) {\n                var openTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1); //Range for `>`\n                foundOpenTagEnd = true;\n            }\n            token = iterator.stepForward();\n            if (token) {\n                if (token.value === '>' && !foundOpenTagEnd) {\n                    var openTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1); //Range for `>`\n                    foundOpenTagEnd = true;\n                }\n                if (token.type.indexOf('tag-name') !== -1) {\n                    currentTag = token.value;\n                    if (tag === currentTag) {\n                        if (prevToken.value === '<') {\n                            depth++;\n                        }\n                        else if (prevToken.value === '</') {\n                            depth--;\n                            if (depth < 0) { //found closing tag\n                                iterator.stepBackward();\n                                var closeTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 2); //Range for </\n                                token = iterator.stepForward();\n                                var closeTagName = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + token.value.length);\n                                if (token.type.indexOf('tag-close') === -1) {\n                                    token = iterator.stepForward();\n                                }\n                                if (token && token.value === '>') {\n                                    var closeTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1); //Range for >\n                                }\n                                else {\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                }\n                else if (tag === currentTag && token.value === '/>') { // self-closing tag\n                    depth--;\n                    if (depth < 0) { //found self-closing tag end\n                        var closeTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 2);\n                        var closeTagName = closeTagStart;\n                        var closeTagEnd = closeTagName;\n                        var openTagEnd = new Range(openTagName.end.row, openTagName.end.column, openTagName.end.row, openTagName.end.column + 1);\n                    }\n                }\n            }\n        } while (token && depth >= 0);\n        if (openTagStart && openTagEnd && closeTagStart && closeTagEnd && openTagName && closeTagName) {\n            return {\n                openTag: new Range(openTagStart.start.row, openTagStart.start.column, openTagEnd.end.row, openTagEnd.end.column),\n                closeTag: new Range(closeTagStart.start.row, closeTagStart.start.column, closeTagEnd.end.row, closeTagEnd.end.column),\n                openTagName: openTagName,\n                closeTagName: closeTagName\n            };\n        }\n    };\n    this.$findOpeningTag = function (iterator, token) {\n        var prevToken = iterator.getCurrentToken();\n        var tag = token.value;\n        var depth = 0;\n        var startRow = iterator.getCurrentTokenRow();\n        var startColumn = iterator.getCurrentTokenColumn();\n        var endColumn = startColumn + 2;\n        var closeTagStart = new Range(startRow, startColumn, startRow, endColumn); //Range for </\n        iterator.stepForward();\n        var closeTagName = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + token.value.length);\n        if (token.type.indexOf('tag-close') === -1) {\n            token = iterator.stepForward();\n        }\n        if (!token || token.value !== \">\")\n            return;\n        var closeTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1); //Range for >\n        iterator.stepBackward();\n        iterator.stepBackward();\n        do {\n            token = prevToken;\n            startRow = iterator.getCurrentTokenRow();\n            startColumn = iterator.getCurrentTokenColumn();\n            endColumn = startColumn + token.value.length;\n            prevToken = iterator.stepBackward();\n            if (token) {\n                if (token.type.indexOf('tag-name') !== -1) {\n                    if (tag === token.value) {\n                        if (prevToken.value === '<') {\n                            depth++;\n                            if (depth > 0) { //found opening tag\n                                var openTagName = new Range(startRow, startColumn, startRow, endColumn);\n                                var openTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1); //Range for <\n                                do {\n                                    token = iterator.stepForward();\n                                } while (token && token.value !== '>');\n                                var openTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1); //Range for >\n                            }\n                        }\n                        else if (prevToken.value === '</') {\n                            depth--;\n                        }\n                    }\n                }\n                else if (token.value === '/>') { // self-closing tag\n                    var stepCount = 0;\n                    var tmpToken = prevToken;\n                    while (tmpToken) {\n                        if (tmpToken.type.indexOf('tag-name') !== -1 && tmpToken.value === tag) {\n                            depth--;\n                            break;\n                        }\n                        else if (tmpToken.value === '<') {\n                            break;\n                        }\n                        tmpToken = iterator.stepBackward();\n                        stepCount++;\n                    }\n                    for (var i = 0; i < stepCount; i++) {\n                        iterator.stepForward();\n                    }\n                }\n            }\n        } while (prevToken && depth <= 0);\n        if (openTagStart && openTagEnd && closeTagStart && closeTagEnd && openTagName && closeTagName) {\n            return {\n                openTag: new Range(openTagStart.start.row, openTagStart.start.column, openTagEnd.end.row, openTagEnd.end.column),\n                closeTag: new Range(closeTagStart.start.row, closeTagStart.start.column, closeTagEnd.end.row, closeTagEnd.end.column),\n                openTagName: openTagName,\n                closeTagName: closeTagName\n            };\n        }\n    };\n}\nexports.BracketMatch = BracketMatch;\n\n});\n\nace.define(\"ace/edit_session\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/bidihandler\",\"ace/config\",\"ace/lib/event_emitter\",\"ace/selection\",\"ace/mode/text\",\"ace/range\",\"ace/line_widgets\",\"ace/document\",\"ace/background_tokenizer\",\"ace/search_highlight\",\"ace/undomanager\",\"ace/edit_session/folding\",\"ace/edit_session/bracket_match\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar lang = require(\"./lib/lang\");\nvar BidiHandler = require(\"./bidihandler\").BidiHandler;\nvar config = require(\"./config\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Selection = require(\"./selection\").Selection;\nvar TextMode = require(\"./mode/text\").Mode;\nvar Range = require(\"./range\").Range;\nvar LineWidgets = require(\"./line_widgets\").LineWidgets;\nvar Document = require(\"./document\").Document;\nvar BackgroundTokenizer = require(\"./background_tokenizer\").BackgroundTokenizer;\nvar SearchHighlight = require(\"./search_highlight\").SearchHighlight;\nvar UndoManager = require(\"./undomanager\").UndoManager;\nvar EditSession = /** @class */ (function () {\n    function EditSession(text, mode) { this.doc;\n        this.$breakpoints = [];\n        this.$decorations = [];\n        this.$frontMarkers = {};\n        this.$backMarkers = {};\n        this.$markerId = 1;\n        this.$undoSelect = true;\n        this.$editor = null;\n        this.prevOp = {};\n        this.$foldData = [];\n        this.id = \"session\" + (++EditSession.$uid);\n        this.$foldData.toString = function () {\n            return this.join(\"\\n\");\n        };\n        this.$gutterCustomWidgets = {};\n        this.bgTokenizer = new BackgroundTokenizer((new TextMode()).getTokenizer(), this);\n        var _self = this;\n        this.bgTokenizer.on(\"update\", function (e) {\n            _self._signal(\"tokenizerUpdate\", e);\n        });\n        this.on(\"changeFold\", this.onChangeFold.bind(this));\n        this.$onChange = this.onChange.bind(this);\n        if (typeof text != \"object\" || !text.getLine)\n            text = new Document(/**@type{string}*/ (text));\n        this.setDocument(text);\n        this.selection = new Selection(this);\n        this.$onSelectionChange = this.onSelectionChange.bind(this);\n        this.selection.on(\"changeSelection\", this.$onSelectionChange);\n        this.selection.on(\"changeCursor\", this.$onSelectionChange);\n        this.$bidiHandler = new BidiHandler(this);\n        config.resetOptions(this);\n        this.setMode(mode);\n        config._signal(\"session\", this);\n        this.destroyed = false;\n        this.$initOperationListeners();\n    }\n    EditSession.prototype.$initOperationListeners = function () {\n        var _this = this;\n        this.curOp = null;\n        this.on(\"change\", function () {\n            if (!_this.curOp) {\n                _this.startOperation();\n                _this.curOp.selectionBefore = _this.$lastSel;\n            }\n            _this.curOp.docChanged = true;\n        }, true);\n        this.on(\"changeSelection\", function () {\n            if (!_this.curOp) {\n                _this.startOperation();\n                _this.curOp.selectionBefore = _this.$lastSel;\n            }\n            _this.curOp.selectionChanged = true;\n        }, true);\n        this.$operationResetTimer = lang.delayedCall(this.endOperation.bind(this, true));\n    };\n    EditSession.prototype.startOperation = function (commandEvent) {\n        if (this.curOp) {\n            if (!commandEvent || this.curOp.command) {\n                return;\n            }\n            this.prevOp = this.curOp;\n        }\n        if (!commandEvent) {\n            commandEvent = {};\n        }\n        this.$operationResetTimer.schedule();\n        this.curOp = {\n            command: commandEvent.command || {},\n            args: commandEvent.args\n        };\n        this.curOp.selectionBefore = this.selection.toJSON();\n        this._signal(\"startOperation\", commandEvent);\n    };\n    EditSession.prototype.endOperation = function (e) {\n        if (this.curOp) {\n            if (e && e.returnValue === false) {\n                this.curOp = null;\n                this._signal(\"endOperation\", e);\n                return;\n            }\n            if (e == true && this.curOp.command && this.curOp.command.name == \"mouse\") {\n                return;\n            }\n            var currentSelection = this.selection.toJSON();\n            this.curOp.selectionAfter = currentSelection;\n            this.$lastSel = this.selection.toJSON();\n            this.getUndoManager().addSelection(currentSelection);\n            this._signal(\"beforeEndOperation\");\n            this.prevOp = this.curOp;\n            this.curOp = null;\n            this._signal(\"endOperation\", e);\n        }\n    };\n    EditSession.prototype.setDocument = function (doc) {\n        if (this.doc)\n            this.doc.off(\"change\", this.$onChange);\n        this.doc = doc;\n        doc.on(\"change\", this.$onChange, true);\n        this.bgTokenizer.setDocument(this.getDocument());\n        this.resetCaches();\n    };\n    EditSession.prototype.getDocument = function () {\n        return this.doc;\n    };\n    Object.defineProperty(EditSession.prototype, \"widgetManager\", {\n        get: function () {\n            var widgetManager = new LineWidgets(this);\n            this.widgetManager = widgetManager;\n            if (this.$editor)\n                widgetManager.attach(this.$editor);\n            return widgetManager;\n        },\n        set: function (value) {\n            Object.defineProperty(this, \"widgetManager\", {\n                writable: true,\n                enumerable: true,\n                configurable: true,\n                value: value,\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EditSession.prototype.$resetRowCache = function (docRow) {\n        if (!docRow) {\n            this.$docRowCache = [];\n            this.$screenRowCache = [];\n            return;\n        }\n        var l = this.$docRowCache.length;\n        var i = this.$getRowCacheIndex(this.$docRowCache, docRow) + 1;\n        if (l > i) {\n            this.$docRowCache.splice(i, l);\n            this.$screenRowCache.splice(i, l);\n        }\n    };\n    EditSession.prototype.$getRowCacheIndex = function (cacheArray, val) {\n        var low = 0;\n        var hi = cacheArray.length - 1;\n        while (low <= hi) {\n            var mid = (low + hi) >> 1;\n            var c = cacheArray[mid];\n            if (val > c)\n                low = mid + 1;\n            else if (val < c)\n                hi = mid - 1;\n            else\n                return mid;\n        }\n        return low - 1;\n    };\n    EditSession.prototype.resetCaches = function () {\n        this.$modified = true;\n        this.$wrapData = [];\n        this.$rowLengthCache = [];\n        this.$resetRowCache(0);\n        if (!this.destroyed)\n            this.bgTokenizer.start(0);\n    };\n    EditSession.prototype.onChangeFold = function (e) {\n        var fold = e.data;\n        this.$resetRowCache(fold.start.row);\n    };\n    EditSession.prototype.onChange = function (delta) {\n        this.$modified = true;\n        this.$bidiHandler.onChange(delta);\n        this.$resetRowCache(delta.start.row);\n        var removedFolds = this.$updateInternalDataOnChange(delta);\n        if (!this.$fromUndo && this.$undoManager) {\n            if (removedFolds && removedFolds.length) {\n                this.$undoManager.add({\n                    action: \"removeFolds\",\n                    folds: removedFolds\n                }, this.mergeUndoDeltas);\n                this.mergeUndoDeltas = true;\n            }\n            this.$undoManager.add(delta, this.mergeUndoDeltas);\n            this.mergeUndoDeltas = true;\n            this.$informUndoManager.schedule();\n        }\n        this.bgTokenizer.$updateOnChange(delta);\n        this._signal(\"change\", delta);\n    };\n    EditSession.prototype.onSelectionChange = function () {\n        this._signal(\"changeSelection\");\n    };\n    EditSession.prototype.setValue = function (text) {\n        this.doc.setValue(text);\n        this.selection.moveTo(0, 0);\n        this.$resetRowCache(0);\n        this.setUndoManager(this.$undoManager);\n        this.getUndoManager().reset();\n    };\n    EditSession.fromJSON = function (session) {\n        if (typeof session == \"string\")\n            session = JSON.parse(session);\n        var undoManager = new UndoManager();\n        undoManager.$undoStack = session.history.undo;\n        undoManager.$redoStack = session.history.redo;\n        undoManager.mark = session.history.mark;\n        undoManager.$rev = session.history.rev;\n        var editSession = new EditSession(session.value);\n        session.folds.forEach(function (fold) {\n            editSession.addFold(\"...\", Range.fromPoints(fold.start, fold.end));\n        });\n        editSession.setAnnotations(session.annotations);\n        editSession.setBreakpoints(session.breakpoints);\n        editSession.setMode(session.mode);\n        editSession.setScrollLeft(session.scrollLeft);\n        editSession.setScrollTop(session.scrollTop);\n        editSession.setUndoManager(undoManager);\n        editSession.selection.fromJSON(session.selection);\n        return editSession;\n    };\n    EditSession.prototype.toJSON = function () {\n        return {\n            annotations: this.$annotations,\n            breakpoints: this.$breakpoints,\n            folds: this.getAllFolds().map(function (fold) {\n                return fold.range;\n            }),\n            history: this.getUndoManager(),\n            mode: this.$mode.$id,\n            scrollLeft: this.$scrollLeft,\n            scrollTop: this.$scrollTop,\n            selection: this.selection.toJSON(),\n            value: this.doc.getValue()\n        };\n    };\n    EditSession.prototype.toString = function () {\n        return this.doc.getValue();\n    };\n    EditSession.prototype.getSelection = function () {\n        return this.selection;\n    };\n    EditSession.prototype.getState = function (row) {\n        return this.bgTokenizer.getState(row);\n    };\n    EditSession.prototype.getTokens = function (row) {\n        return this.bgTokenizer.getTokens(row);\n    };\n    EditSession.prototype.getTokenAt = function (row, column) {\n        var tokens = this.bgTokenizer.getTokens(row);\n        var token, c = 0;\n        if (column == null) {\n            var i = tokens.length - 1;\n            c = this.getLine(row).length;\n        }\n        else {\n            for (var i = 0; i < tokens.length; i++) {\n                c += tokens[i].value.length;\n                if (c >= column)\n                    break;\n            }\n        }\n        token = tokens[i];\n        if (!token)\n            return null;\n        token.index = i;\n        token.start = c - token.value.length;\n        return token;\n    };\n    EditSession.prototype.setUndoManager = function (undoManager) {\n        this.$undoManager = undoManager;\n        if (this.$informUndoManager)\n            this.$informUndoManager.cancel();\n        if (undoManager) {\n            var self = this;\n            undoManager.addSession(this);\n            this.$syncInformUndoManager = function () {\n                self.$informUndoManager.cancel();\n                self.mergeUndoDeltas = false;\n            };\n            this.$informUndoManager = lang.delayedCall(this.$syncInformUndoManager);\n        }\n        else {\n            this.$syncInformUndoManager = function () { };\n        }\n    };\n    EditSession.prototype.markUndoGroup = function () {\n        if (this.$syncInformUndoManager)\n            this.$syncInformUndoManager();\n    };\n    EditSession.prototype.getUndoManager = function () {\n        return this.$undoManager || this.$defaultUndoManager;\n    };\n    EditSession.prototype.getTabString = function () {\n        if (this.getUseSoftTabs()) {\n            return lang.stringRepeat(\" \", this.getTabSize());\n        }\n        else {\n            return \"\\t\";\n        }\n    };\n    EditSession.prototype.setUseSoftTabs = function (val) {\n        this.setOption(\"useSoftTabs\", val);\n    };\n    EditSession.prototype.getUseSoftTabs = function () {\n        return this.$useSoftTabs && !this.$mode.$indentWithTabs;\n    };\n    EditSession.prototype.setTabSize = function (tabSize) {\n        this.setOption(\"tabSize\", tabSize);\n    };\n    EditSession.prototype.getTabSize = function () {\n        return this.$tabSize;\n    };\n    EditSession.prototype.isTabStop = function (position) {\n        return this.$useSoftTabs && (position.column % this.$tabSize === 0);\n    };\n    EditSession.prototype.setNavigateWithinSoftTabs = function (navigateWithinSoftTabs) {\n        this.setOption(\"navigateWithinSoftTabs\", navigateWithinSoftTabs);\n    };\n    EditSession.prototype.getNavigateWithinSoftTabs = function () {\n        return this.$navigateWithinSoftTabs;\n    };\n    EditSession.prototype.setOverwrite = function (overwrite) {\n        this.setOption(\"overwrite\", overwrite);\n    };\n    EditSession.prototype.getOverwrite = function () {\n        return this.$overwrite;\n    };\n    EditSession.prototype.toggleOverwrite = function () {\n        this.setOverwrite(!this.$overwrite);\n    };\n    EditSession.prototype.addGutterDecoration = function (row, className) {\n        if (!this.$decorations[row])\n            this.$decorations[row] = \"\";\n        this.$decorations[row] += \" \" + className;\n        this._signal(\"changeBreakpoint\", {});\n    };\n    EditSession.prototype.removeGutterCustomWidget = function (row) {\n        if (this.$editor) {\n            this.$editor.renderer.$gutterLayer.$removeCustomWidget(row);\n        }\n    };\n    EditSession.prototype.addGutterCustomWidget = function (row, attributes) {\n        if (this.$editor) {\n            this.$editor.renderer.$gutterLayer.$addCustomWidget(row, attributes);\n        }\n    };\n    EditSession.prototype.removeGutterDecoration = function (row, className) {\n        this.$decorations[row] = (this.$decorations[row] || \"\").replace(\" \" + className, \"\");\n        this._signal(\"changeBreakpoint\", {});\n    };\n    EditSession.prototype.getBreakpoints = function () {\n        return this.$breakpoints;\n    };\n    EditSession.prototype.setBreakpoints = function (rows) {\n        this.$breakpoints = [];\n        for (var i = 0; i < rows.length; i++) {\n            this.$breakpoints[rows[i]] = \"ace_breakpoint\";\n        }\n        this._signal(\"changeBreakpoint\", {});\n    };\n    EditSession.prototype.clearBreakpoints = function () {\n        this.$breakpoints = [];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    EditSession.prototype.setBreakpoint = function (row, className) {\n        if (className === undefined)\n            className = \"ace_breakpoint\";\n        if (className)\n            this.$breakpoints[row] = className;\n        else\n            delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    EditSession.prototype.clearBreakpoint = function (row) {\n        delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    EditSession.prototype.addMarker = function (range, clazz, type, inFront) {\n        var id = this.$markerId++;\n        var marker = {\n            range: range,\n            type: type || \"line\",\n            renderer: typeof type == \"function\" ? type : null,\n            clazz: clazz,\n            inFront: !!inFront,\n            id: id\n        };\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        }\n        else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n        return id;\n    };\n    EditSession.prototype.addDynamicMarker = function (marker, inFront) {\n        if (!marker.update)\n            return;\n        var id = this.$markerId++;\n        marker.id = id;\n        marker.inFront = !!inFront;\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        }\n        else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n        return marker;\n    };\n    EditSession.prototype.removeMarker = function (markerId) {\n        var marker = this.$frontMarkers[markerId] || this.$backMarkers[markerId];\n        if (!marker)\n            return;\n        var markers = marker.inFront ? this.$frontMarkers : this.$backMarkers;\n        delete (markers[markerId]);\n        this._signal(marker.inFront ? \"changeFrontMarker\" : \"changeBackMarker\");\n    };\n    EditSession.prototype.getMarkers = function (inFront) {\n        return inFront ? this.$frontMarkers : this.$backMarkers;\n    };\n    EditSession.prototype.highlight = function (re) {\n        if (!this.$searchHighlight) {\n            var highlight = new SearchHighlight(null, \"ace_selected-word\", \"text\");\n            this.$searchHighlight = this.addDynamicMarker(highlight);\n        }\n        this.$searchHighlight.setRegexp(re);\n    };\n    EditSession.prototype.highlightLines = function (startRow, endRow, clazz, inFront) {\n        if (typeof endRow != \"number\") {\n            clazz = endRow;\n            endRow = startRow;\n        }\n        if (!clazz)\n            clazz = \"ace_step\";\n        var range = new Range(startRow, 0, endRow, Infinity);\n        range.id = this.addMarker(range, clazz, \"fullLine\", inFront);\n        return range;\n    };\n    EditSession.prototype.setAnnotations = function (annotations) {\n        this.$annotations = annotations;\n        this._signal(\"changeAnnotation\", {});\n    };\n    EditSession.prototype.getAnnotations = function () {\n        return this.$annotations || [];\n    };\n    EditSession.prototype.clearAnnotations = function () {\n        this.setAnnotations([]);\n    };\n    EditSession.prototype.$detectNewLine = function (text) {\n        var match = text.match(/^.*?(\\r?\\n)/m);\n        if (match) {\n            this.$autoNewLine = match[1];\n        }\n        else {\n            this.$autoNewLine = \"\\n\";\n        }\n    };\n    EditSession.prototype.getWordRange = function (row, column) {\n        var line = this.getLine(row);\n        var inToken = false;\n        if (column > 0)\n            inToken = !!line.charAt(column - 1).match(this.tokenRe);\n        if (!inToken)\n            inToken = !!line.charAt(column).match(this.tokenRe);\n        if (inToken)\n            var re = this.tokenRe;\n        else if (/^\\s+$/.test(line.slice(column - 1, column + 1)))\n            var re = /\\s/;\n        else\n            var re = this.nonTokenRe;\n        var start = column;\n        if (start > 0) {\n            do {\n                start--;\n            } while (start >= 0 && line.charAt(start).match(re));\n            start++;\n        }\n        var end = column;\n        while (end < line.length && line.charAt(end).match(re)) {\n            end++;\n        }\n        return new Range(row, start, row, end);\n    };\n    EditSession.prototype.getAWordRange = function (row, column) {\n        var wordRange = this.getWordRange(row, column);\n        var line = this.getLine(wordRange.end.row);\n        while (line.charAt(wordRange.end.column).match(/[ \\t]/)) {\n            wordRange.end.column += 1;\n        }\n        return wordRange;\n    };\n    EditSession.prototype.setNewLineMode = function (newLineMode) {\n        this.doc.setNewLineMode(newLineMode);\n    };\n    EditSession.prototype.getNewLineMode = function () {\n        return this.doc.getNewLineMode();\n    };\n    EditSession.prototype.setUseWorker = function (useWorker) { this.setOption(\"useWorker\", useWorker); };\n    EditSession.prototype.getUseWorker = function () { return this.$useWorker; };\n    EditSession.prototype.onReloadTokenizer = function (e) {\n        var rows = e.data;\n        this.bgTokenizer.start(rows.first);\n        this._signal(\"tokenizerUpdate\", e);\n    };\n    EditSession.prototype.setMode = function (mode, cb) {\n        if (mode && typeof mode === \"object\") {\n            if (mode.getTokenizer)\n                return this.$onChangeMode(mode);\n            var options = mode;\n            var path = options.path;\n        }\n        else {\n            path = /**@type{string}*/ (mode) || \"ace/mode/text\";\n        }\n        if (!this.$modes[\"ace/mode/text\"])\n            this.$modes[\"ace/mode/text\"] = new TextMode();\n        if (this.$modes[path] && !options) {\n            this.$onChangeMode(this.$modes[path]);\n            cb && cb();\n            return;\n        }\n        this.$modeId = path;\n        config.loadModule([\"mode\", path], function (m) {\n            if (this.destroyed) {\n                return;\n            }\n            if (this.$modeId !== path)\n                return cb && cb();\n            if (this.$modes[path] && !options) {\n                this.$onChangeMode(this.$modes[path]);\n            }\n            else if (m && m.Mode) {\n                m = new m.Mode(options);\n                if (!options) {\n                    this.$modes[path] = m;\n                    m.$id = path;\n                }\n                this.$onChangeMode(m);\n            }\n            cb && cb();\n        }.bind(this));\n        if (!this.$mode)\n            this.$onChangeMode(this.$modes[\"ace/mode/text\"], true);\n    };\n    EditSession.prototype.$onChangeMode = function (mode, $isPlaceholder) {\n        if (!$isPlaceholder)\n            this.$modeId = mode.$id;\n        if (this.$mode === mode)\n            return;\n        var oldMode = this.$mode;\n        this.$mode = mode;\n        this.$stopWorker();\n        if (this.$useWorker)\n            this.$startWorker();\n        var tokenizer = mode.getTokenizer();\n        if (tokenizer.on !== undefined) {\n            var onReloadTokenizer = this.onReloadTokenizer.bind(this);\n            tokenizer.on(\"update\", onReloadTokenizer);\n        }\n        this.bgTokenizer.setTokenizer(tokenizer);\n        this.bgTokenizer.setDocument(this.getDocument());\n        this.tokenRe = mode.tokenRe;\n        this.nonTokenRe = mode.nonTokenRe;\n        if (!$isPlaceholder) {\n            if (mode.attachToSession)\n                mode.attachToSession(this);\n            this.$options.wrapMethod.set.call(this, this.$wrapMethod);\n            this.$setFolding(mode.foldingRules);\n            this.bgTokenizer.start(0);\n            this._emit(\"changeMode\", { oldMode: oldMode, mode: mode });\n        }\n    };\n    EditSession.prototype.$stopWorker = function () {\n        if (this.$worker) {\n            this.$worker.terminate();\n            this.$worker = null;\n        }\n    };\n    EditSession.prototype.$startWorker = function () {\n        try {\n            this.$worker = this.$mode.createWorker(this);\n        }\n        catch (e) {\n            config.warn(\"Could not load worker\", e);\n            this.$worker = null;\n        }\n    };\n    EditSession.prototype.getMode = function () {\n        return this.$mode;\n    };\n    EditSession.prototype.setScrollTop = function (scrollTop) {\n        if (this.$scrollTop === scrollTop || isNaN(scrollTop))\n            return;\n        this.$scrollTop = scrollTop;\n        this._signal(\"changeScrollTop\", scrollTop);\n    };\n    EditSession.prototype.getScrollTop = function () {\n        return this.$scrollTop;\n    };\n    EditSession.prototype.setScrollLeft = function (scrollLeft) {\n        if (this.$scrollLeft === scrollLeft || isNaN(scrollLeft))\n            return;\n        this.$scrollLeft = scrollLeft;\n        this._signal(\"changeScrollLeft\", scrollLeft);\n    };\n    EditSession.prototype.getScrollLeft = function () {\n        return this.$scrollLeft;\n    };\n    EditSession.prototype.getScreenWidth = function () {\n        this.$computeWidth();\n        if (this.lineWidgets)\n            return Math.max(this.getLineWidgetMaxWidth(), this.screenWidth);\n        return this.screenWidth;\n    };\n    EditSession.prototype.getLineWidgetMaxWidth = function () {\n        if (this.lineWidgetsWidth != null)\n            return this.lineWidgetsWidth;\n        var width = 0;\n        this.lineWidgets.forEach(function (w) {\n            if (w && w.screenWidth > width)\n                width = w.screenWidth;\n        });\n        return this.lineWidgetWidth = width;\n    };\n    EditSession.prototype.$computeWidth = function (force) {\n        if (this.$modified || force) {\n            this.$modified = false;\n            if (this.$useWrapMode)\n                return this.screenWidth = this.$wrapLimit;\n            var lines = this.doc.getAllLines();\n            var cache = this.$rowLengthCache;\n            var longestScreenLine = 0;\n            var foldIndex = 0;\n            var foldLine = this.$foldData[foldIndex];\n            var foldStart = foldLine ? foldLine.start.row : Infinity;\n            var len = lines.length;\n            for (var i = 0; i < len; i++) {\n                if (i > foldStart) {\n                    i = foldLine.end.row + 1;\n                    if (i >= len)\n                        break;\n                    foldLine = this.$foldData[foldIndex++];\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n                if (cache[i] == null)\n                    cache[i] = this.$getStringScreenWidth(lines[i])[0];\n                if (cache[i] > longestScreenLine)\n                    longestScreenLine = cache[i];\n            }\n            this.screenWidth = longestScreenLine;\n        }\n    };\n    EditSession.prototype.getLine = function (row) {\n        return this.doc.getLine(row);\n    };\n    EditSession.prototype.getLines = function (firstRow, lastRow) {\n        return this.doc.getLines(firstRow, lastRow);\n    };\n    EditSession.prototype.getLength = function () {\n        return this.doc.getLength();\n    };\n    EditSession.prototype.getTextRange = function (range) {\n        return this.doc.getTextRange(range || this.selection.getRange());\n    };\n    EditSession.prototype.insert = function (position, text) {\n        return this.doc.insert(position, text);\n    };\n    EditSession.prototype.remove = function (range) {\n        return this.doc.remove(range);\n    };\n    EditSession.prototype.removeFullLines = function (firstRow, lastRow) {\n        return this.doc.removeFullLines(firstRow, lastRow);\n    };\n    EditSession.prototype.undoChanges = function (deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n        this.$fromUndo = true;\n        for (var i = deltas.length - 1; i != -1; i--) {\n            var delta = deltas[i];\n            if (delta.action == \"insert\" || delta.action == \"remove\") {\n                this.doc.revertDelta(delta);\n            }\n            else if (delta.folds) {\n                this.addFolds(delta.folds);\n            }\n        }\n        if (!dontSelect && this.$undoSelect) {\n            if (deltas.selectionBefore)\n                this.selection.fromJSON(deltas.selectionBefore);\n            else\n                this.selection.setRange(this.$getUndoSelection(deltas, true));\n        }\n        this.$fromUndo = false;\n    };\n    EditSession.prototype.redoChanges = function (deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n        this.$fromUndo = true;\n        for (var i = 0; i < deltas.length; i++) {\n            var delta = deltas[i];\n            if (delta.action == \"insert\" || delta.action == \"remove\") {\n                this.doc.$safeApplyDelta(delta);\n            }\n        }\n        if (!dontSelect && this.$undoSelect) {\n            if (deltas.selectionAfter)\n                this.selection.fromJSON(deltas.selectionAfter);\n            else\n                this.selection.setRange(this.$getUndoSelection(deltas, false));\n        }\n        this.$fromUndo = false;\n    };\n    EditSession.prototype.setUndoSelect = function (enable) {\n        this.$undoSelect = enable;\n    };\n    EditSession.prototype.$getUndoSelection = function (deltas, isUndo) {\n        function isInsert(delta) {\n            return isUndo ? delta.action !== \"insert\" : delta.action === \"insert\";\n        }\n        var range, point;\n        for (var i = 0; i < deltas.length; i++) {\n            var delta = deltas[i];\n            if (!delta.start)\n                continue; // skip folds\n            if (!range) {\n                if (isInsert(delta)) {\n                    range = Range.fromPoints(delta.start, delta.end);\n                }\n                else {\n                    range = Range.fromPoints(delta.start, delta.start);\n                }\n                continue;\n            }\n            if (isInsert(delta)) {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range.setStart(point);\n                }\n                point = delta.end;\n                if (range.compare(point.row, point.column) == 1) {\n                    range.setEnd(point);\n                }\n            }\n            else {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range = Range.fromPoints(delta.start, delta.start);\n                }\n            }\n        }\n        return range;\n    };\n    EditSession.prototype.replace = function (range, text) {\n        return this.doc.replace(range, text);\n    };\n    EditSession.prototype.moveText = function (fromRange, toPosition, copy) {\n        var text = this.getTextRange(fromRange);\n        var folds = this.getFoldsInRange(fromRange);\n        var toRange = Range.fromPoints(toPosition, toPosition);\n        if (!copy) {\n            this.remove(fromRange);\n            var rowDiff = fromRange.start.row - fromRange.end.row;\n            var collDiff = rowDiff ? -fromRange.end.column : fromRange.start.column - fromRange.end.column;\n            if (collDiff) {\n                if (toRange.start.row == fromRange.end.row && toRange.start.column > fromRange.end.column)\n                    toRange.start.column += collDiff;\n                if (toRange.end.row == fromRange.end.row && toRange.end.column > fromRange.end.column)\n                    toRange.end.column += collDiff;\n            }\n            if (rowDiff && toRange.start.row >= fromRange.end.row) {\n                toRange.start.row += rowDiff;\n                toRange.end.row += rowDiff;\n            }\n        }\n        toRange.end = this.insert(toRange.start, text);\n        if (folds.length) {\n            var oldStart = fromRange.start;\n            var newStart = toRange.start;\n            var rowDiff = newStart.row - oldStart.row;\n            var collDiff = newStart.column - oldStart.column;\n            this.addFolds(folds.map(function (x) {\n                x = x.clone();\n                if (x.start.row == oldStart.row)\n                    x.start.column += collDiff;\n                if (x.end.row == oldStart.row)\n                    x.end.column += collDiff;\n                x.start.row += rowDiff;\n                x.end.row += rowDiff;\n                return x;\n            }));\n        }\n        return toRange;\n    };\n    EditSession.prototype.indentRows = function (startRow, endRow, indentString) {\n        indentString = indentString.replace(/\\t/g, this.getTabString());\n        for (var row = startRow; row <= endRow; row++)\n            this.doc.insertInLine({ row: row, column: 0 }, indentString);\n    };\n    EditSession.prototype.outdentRows = function (range) {\n        var rowRange = range.collapseRows();\n        var deleteRange = new Range(0, 0, 0, 0);\n        var size = this.getTabSize();\n        for (var i = rowRange.start.row; i <= rowRange.end.row; ++i) {\n            var line = this.getLine(i);\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            for (var j = 0; j < size; ++j)\n                if (line.charAt(j) != ' ')\n                    break;\n            if (j < size && line.charAt(j) == '\\t') {\n                deleteRange.start.column = j;\n                deleteRange.end.column = j + 1;\n            }\n            else {\n                deleteRange.start.column = 0;\n                deleteRange.end.column = j;\n            }\n            this.remove(deleteRange);\n        }\n    };\n    EditSession.prototype.$moveLines = function (firstRow, lastRow, dir) {\n        firstRow = this.getRowFoldStart(firstRow);\n        lastRow = this.getRowFoldEnd(lastRow);\n        if (dir < 0) {\n            var row = this.getRowFoldStart(firstRow + dir);\n            if (row < 0)\n                return 0;\n            var diff = row - firstRow;\n        }\n        else if (dir > 0) {\n            var row = this.getRowFoldEnd(lastRow + dir);\n            if (row > this.doc.getLength() - 1)\n                return 0;\n            var diff = row - lastRow;\n        }\n        else {\n            firstRow = this.$clipRowToDocument(firstRow);\n            lastRow = this.$clipRowToDocument(lastRow);\n            var diff = lastRow - firstRow + 1;\n        }\n        var range = new Range(firstRow, 0, lastRow, Number.MAX_VALUE);\n        var folds = this.getFoldsInRange(range).map(function (x) {\n            x = x.clone();\n            x.start.row += diff;\n            x.end.row += diff;\n            return x;\n        });\n        var lines = dir == 0\n            ? this.doc.getLines(firstRow, lastRow)\n            : this.doc.removeFullLines(firstRow, lastRow);\n        this.doc.insertFullLines(firstRow + diff, lines);\n        folds.length && this.addFolds(folds);\n        return diff;\n    };\n    EditSession.prototype.moveLinesUp = function (firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, -1);\n    };\n    EditSession.prototype.moveLinesDown = function (firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 1);\n    };\n    EditSession.prototype.duplicateLines = function (firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 0);\n    };\n    EditSession.prototype.$clipRowToDocument = function (row) {\n        return Math.max(0, Math.min(row, this.doc.getLength() - 1));\n    };\n    EditSession.prototype.$clipColumnToRow = function (row, column) {\n        if (column < 0)\n            return 0;\n        return Math.min(this.doc.getLine(row).length, column);\n    };\n    EditSession.prototype.$clipPositionToDocument = function (row, column) {\n        column = Math.max(0, column);\n        if (row < 0) {\n            row = 0;\n            column = 0;\n        }\n        else {\n            var len = this.doc.getLength();\n            if (row >= len) {\n                row = len - 1;\n                column = this.doc.getLine(len - 1).length;\n            }\n            else {\n                column = Math.min(this.doc.getLine(row).length, column);\n            }\n        }\n        return {\n            row: row,\n            column: column\n        };\n    };\n    EditSession.prototype.$clipRangeToDocument = function (range) {\n        if (range.start.row < 0) {\n            range.start.row = 0;\n            range.start.column = 0;\n        }\n        else {\n            range.start.column = this.$clipColumnToRow(range.start.row, range.start.column);\n        }\n        var len = this.doc.getLength() - 1;\n        if (range.end.row > len) {\n            range.end.row = len;\n            range.end.column = this.doc.getLine(len).length;\n        }\n        else {\n            range.end.column = this.$clipColumnToRow(range.end.row, range.end.column);\n        }\n        return range;\n    };\n    EditSession.prototype.setUseWrapMode = function (useWrapMode) {\n        if (useWrapMode != this.$useWrapMode) {\n            this.$useWrapMode = useWrapMode;\n            this.$modified = true;\n            this.$resetRowCache(0);\n            if (useWrapMode) {\n                var len = this.getLength();\n                this.$wrapData = Array(len);\n                this.$updateWrapData(0, len - 1);\n            }\n            this._signal(\"changeWrapMode\");\n        }\n    };\n    EditSession.prototype.getUseWrapMode = function () {\n        return this.$useWrapMode;\n    };\n    EditSession.prototype.setWrapLimitRange = function (min, max) {\n        if (this.$wrapLimitRange.min !== min || this.$wrapLimitRange.max !== max) {\n            this.$wrapLimitRange = { min: min, max: max };\n            this.$modified = true;\n            this.$bidiHandler.markAsDirty();\n            if (this.$useWrapMode)\n                this._signal(\"changeWrapMode\");\n        }\n    };\n    EditSession.prototype.adjustWrapLimit = function (desiredLimit, $printMargin) {\n        var limits = this.$wrapLimitRange;\n        if (limits.max < 0)\n            limits = { min: $printMargin, max: $printMargin };\n        var wrapLimit = this.$constrainWrapLimit(desiredLimit, limits.min, limits.max);\n        if (wrapLimit != this.$wrapLimit && wrapLimit > 1) {\n            this.$wrapLimit = wrapLimit;\n            this.$modified = true;\n            if (this.$useWrapMode) {\n                this.$updateWrapData(0, this.getLength() - 1);\n                this.$resetRowCache(0);\n                this._signal(\"changeWrapLimit\");\n            }\n            return true;\n        }\n        return false;\n    };\n    EditSession.prototype.$constrainWrapLimit = function (wrapLimit, min, max) {\n        if (min)\n            wrapLimit = Math.max(min, wrapLimit);\n        if (max)\n            wrapLimit = Math.min(max, wrapLimit);\n        return wrapLimit;\n    };\n    EditSession.prototype.getWrapLimit = function () {\n        return this.$wrapLimit;\n    };\n    EditSession.prototype.setWrapLimit = function (limit) {\n        this.setWrapLimitRange(limit, limit);\n    };\n    EditSession.prototype.getWrapLimitRange = function () {\n        return {\n            min: this.$wrapLimitRange.min,\n            max: this.$wrapLimitRange.max\n        };\n    };\n    EditSession.prototype.$updateInternalDataOnChange = function (delta) {\n        var useWrapMode = this.$useWrapMode;\n        var action = delta.action;\n        var start = delta.start;\n        var end = delta.end;\n        var firstRow = start.row;\n        var lastRow = end.row;\n        var len = lastRow - firstRow;\n        var removedFolds = null;\n        this.$updating = true;\n        if (len != 0) {\n            if (action === \"remove\") {\n                this[useWrapMode ? \"$wrapData\" : \"$rowLengthCache\"].splice(firstRow, len);\n                var foldLines = this.$foldData;\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n                var foldLine = this.getFoldLine(end.row);\n                var idx = 0;\n                if (foldLine) {\n                    foldLine.addRemoveChars(end.row, end.column, start.column - end.column);\n                    foldLine.shiftRow(-len);\n                    var foldLineBefore = this.getFoldLine(firstRow);\n                    if (foldLineBefore && foldLineBefore !== foldLine) {\n                        foldLineBefore.merge(foldLine);\n                        foldLine = foldLineBefore;\n                    }\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= end.row) {\n                        foldLine.shiftRow(-len);\n                    }\n                }\n                lastRow = firstRow;\n            }\n            else {\n                var args = Array(len);\n                args.unshift(firstRow, 0);\n                var arr = useWrapMode ? this.$wrapData : this.$rowLengthCache;\n                arr.splice.apply(arr, args);\n                var foldLines = this.$foldData;\n                var foldLine = this.getFoldLine(firstRow);\n                var idx = 0;\n                if (foldLine) {\n                    var cmp = foldLine.range.compareInside(start.row, start.column);\n                    if (cmp == 0) {\n                        foldLine = foldLine.split(start.row, start.column);\n                        if (foldLine) {\n                            foldLine.shiftRow(len);\n                            foldLine.addRemoveChars(lastRow, 0, end.column - start.column);\n                        }\n                    }\n                    else \n                    if (cmp == -1) {\n                        foldLine.addRemoveChars(firstRow, 0, end.column - start.column);\n                        foldLine.shiftRow(len);\n                    }\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= firstRow) {\n                        foldLine.shiftRow(len);\n                    }\n                }\n            }\n        }\n        else {\n            len = Math.abs(delta.start.column - delta.end.column);\n            if (action === \"remove\") {\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n                len = -len;\n            }\n            var foldLine = this.getFoldLine(firstRow);\n            if (foldLine) {\n                foldLine.addRemoveChars(firstRow, start.column, len);\n            }\n        }\n        if (useWrapMode && this.$wrapData.length != this.doc.getLength()) {\n            console.error(\"doc.getLength() and $wrapData.length have to be the same!\");\n        }\n        this.$updating = false;\n        if (useWrapMode)\n            this.$updateWrapData(firstRow, lastRow);\n        else\n            this.$updateRowLengthCache(firstRow, lastRow);\n        return removedFolds;\n    };\n    EditSession.prototype.$updateRowLengthCache = function (firstRow, lastRow) {\n        this.$rowLengthCache[firstRow] = null;\n        this.$rowLengthCache[lastRow] = null;\n    };\n    EditSession.prototype.$updateWrapData = function (firstRow, lastRow) {\n        var lines = this.doc.getAllLines();\n        var tabSize = this.getTabSize();\n        var wrapData = this.$wrapData;\n        var wrapLimit = this.$wrapLimit;\n        var tokens;\n        var foldLine;\n        var row = firstRow;\n        lastRow = Math.min(lastRow, lines.length - 1);\n        while (row <= lastRow) {\n            foldLine = this.getFoldLine(row, foldLine);\n            if (!foldLine) {\n                tokens = this.$getDisplayTokens(lines[row]);\n                wrapData[row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row++;\n            }\n            else {\n                tokens = [];\n                foldLine.walk(function (placeholder, row, column, lastColumn) {\n                    var walkTokens;\n                    if (placeholder != null) {\n                        walkTokens = this.$getDisplayTokens(placeholder, tokens.length);\n                        walkTokens[0] = PLACEHOLDER_START;\n                        for (var i = 1; i < walkTokens.length; i++) {\n                            walkTokens[i] = PLACEHOLDER_BODY;\n                        }\n                    }\n                    else {\n                        walkTokens = this.$getDisplayTokens(lines[row].substring(lastColumn, column), tokens.length);\n                    }\n                    tokens = tokens.concat(walkTokens);\n                }.bind(this), foldLine.end.row, lines[foldLine.end.row].length + 1);\n                wrapData[foldLine.start.row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row = foldLine.end.row + 1;\n            }\n        }\n    };\n    EditSession.prototype.$computeWrapSplits = function (tokens, wrapLimit, tabSize) {\n        if (tokens.length == 0) {\n            return [];\n        }\n        var splits = [];\n        var displayLength = tokens.length;\n        var lastSplit = 0, lastDocSplit = 0;\n        var isCode = this.$wrapAsCode;\n        var indentedSoftWrap = this.$indentedSoftWrap;\n        var maxIndent = wrapLimit <= Math.max(2 * tabSize, 8)\n            || indentedSoftWrap === false ? 0 : Math.floor(wrapLimit / 2);\n        function getWrapIndent() {\n            var indentation = 0;\n            if (maxIndent === 0)\n                return indentation;\n            if (indentedSoftWrap) {\n                for (var i = 0; i < tokens.length; i++) {\n                    var token = tokens[i];\n                    if (token == SPACE)\n                        indentation += 1;\n                    else if (token == TAB)\n                        indentation += tabSize;\n                    else if (token == TAB_SPACE)\n                        continue;\n                    else\n                        break;\n                }\n            }\n            if (isCode && indentedSoftWrap !== false)\n                indentation += tabSize;\n            return Math.min(indentation, maxIndent);\n        }\n        function addSplit(screenPos) {\n            var len = screenPos - lastSplit;\n            for (var i = lastSplit; i < screenPos; i++) {\n                var ch = tokens[i];\n                if (ch === 12 || ch === 2)\n                    len -= 1;\n            }\n            if (!splits.length) {\n                indent = getWrapIndent();\n                splits.indent = indent;\n            }\n            lastDocSplit += len;\n            splits.push(lastDocSplit);\n            lastSplit = screenPos;\n        }\n        var indent = 0;\n        while (displayLength - lastSplit > wrapLimit - indent) {\n            var split = lastSplit + wrapLimit - indent;\n            if (tokens[split - 1] >= SPACE && tokens[split] >= SPACE) {\n                addSplit(split);\n                continue;\n            }\n            if (tokens[split] == PLACEHOLDER_START || tokens[split] == PLACEHOLDER_BODY) {\n                for (split; split != lastSplit - 1; split--) {\n                    if (tokens[split] == PLACEHOLDER_START) {\n                        break;\n                    }\n                }\n                if (split > lastSplit) {\n                    addSplit(split);\n                    continue;\n                }\n                split = lastSplit + wrapLimit;\n                for (split; split < tokens.length; split++) {\n                    if (tokens[split] != PLACEHOLDER_BODY) {\n                        break;\n                    }\n                }\n                if (split == tokens.length) {\n                    break; // Breaks the while-loop.\n                }\n                addSplit(split);\n                continue;\n            }\n            var minSplit = Math.max(split - (wrapLimit - (wrapLimit >> 2)), lastSplit - 1);\n            while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                split--;\n            }\n            if (isCode) {\n                while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                    split--;\n                }\n                while (split > minSplit && tokens[split] == PUNCTUATION) {\n                    split--;\n                }\n            }\n            else {\n                while (split > minSplit && tokens[split] < SPACE) {\n                    split--;\n                }\n            }\n            if (split > minSplit) {\n                addSplit(++split);\n                continue;\n            }\n            split = lastSplit + wrapLimit;\n            if (tokens[split] == CHAR_EXT)\n                split--;\n            addSplit(split - indent);\n        }\n        return splits;\n    };\n    EditSession.prototype.$getDisplayTokens = function (str, offset) {\n        var arr = [];\n        var tabSize;\n        offset = offset || 0;\n        for (var i = 0; i < str.length; i++) {\n            var c = str.charCodeAt(i);\n            if (c == 9) {\n                tabSize = this.getScreenTabSize(arr.length + offset);\n                arr.push(TAB);\n                for (var n = 1; n < tabSize; n++) {\n                    arr.push(TAB_SPACE);\n                }\n            }\n            else if (c == 32) {\n                arr.push(SPACE);\n            }\n            else if ((c > 39 && c < 48) || (c > 57 && c < 64)) {\n                arr.push(PUNCTUATION);\n            }\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                arr.push(CHAR, CHAR_EXT);\n            }\n            else {\n                arr.push(CHAR);\n            }\n        }\n        return arr;\n    };\n    EditSession.prototype.$getStringScreenWidth = function (str, maxScreenColumn, screenColumn) {\n        if (maxScreenColumn == 0)\n            return [0, 0];\n        if (maxScreenColumn == null)\n            maxScreenColumn = Infinity;\n        screenColumn = screenColumn || 0;\n        var c, column;\n        for (column = 0; column < str.length; column++) {\n            c = str.charCodeAt(column);\n            if (c == 9) {\n                screenColumn += this.getScreenTabSize(screenColumn);\n            }\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                screenColumn += 2;\n            }\n            else {\n                screenColumn += 1;\n            }\n            if (screenColumn > maxScreenColumn) {\n                break;\n            }\n        }\n        return [screenColumn, column];\n    };\n    EditSession.prototype.getRowLength = function (row) {\n        var h = 1;\n        if (this.lineWidgets)\n            h += this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n        if (!this.$useWrapMode || !this.$wrapData[row])\n            return h;\n        else\n            return this.$wrapData[row].length + h;\n    };\n    EditSession.prototype.getRowLineCount = function (row) {\n        if (!this.$useWrapMode || !this.$wrapData[row]) {\n            return 1;\n        }\n        else {\n            return this.$wrapData[row].length + 1;\n        }\n    };\n    EditSession.prototype.getRowWrapIndent = function (screenRow) {\n        if (this.$useWrapMode) {\n            var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n            var splits = this.$wrapData[pos.row];\n            return splits.length && splits[0] < pos.column ? splits.indent : 0;\n        }\n        else {\n            return 0;\n        }\n    };\n    EditSession.prototype.getScreenLastRowColumn = function (screenRow) {\n        var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n        return this.documentToScreenColumn(pos.row, pos.column);\n    };\n    EditSession.prototype.getDocumentLastRowColumn = function (docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.getScreenLastRowColumn(screenRow);\n    };\n    EditSession.prototype.getDocumentLastRowColumnPosition = function (docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.screenToDocumentPosition(screenRow, Number.MAX_VALUE / 10);\n    };\n    EditSession.prototype.getRowSplitData = function (row) {\n        if (!this.$useWrapMode) {\n            return undefined;\n        }\n        else {\n            return this.$wrapData[row];\n        }\n    };\n    EditSession.prototype.getScreenTabSize = function (screenColumn) {\n        return this.$tabSize - (screenColumn % this.$tabSize | 0);\n    };\n    EditSession.prototype.screenToDocumentRow = function (screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).row;\n    };\n    EditSession.prototype.screenToDocumentColumn = function (screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).column;\n    };\n    EditSession.prototype.screenToDocumentPosition = function (screenRow, screenColumn, offsetX) {\n        if (screenRow < 0)\n            return { row: 0, column: 0 };\n        var line;\n        var docRow = 0;\n        var docColumn = 0;\n        var column;\n        var row = 0;\n        var rowLength = 0;\n        var rowCache = this.$screenRowCache;\n        var i = this.$getRowCacheIndex(rowCache, screenRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var docRow = this.$docRowCache[i];\n            var doCache = screenRow > rowCache[l - 1];\n        }\n        else {\n            var doCache = !l;\n        }\n        var maxRow = this.getLength() - 1;\n        var foldLine = this.getNextFoldLine(docRow);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n        while (row <= screenRow) {\n            rowLength = this.getRowLength(docRow);\n            if (row + rowLength > screenRow || docRow >= maxRow) {\n                break;\n            }\n            else {\n                row += rowLength;\n                docRow++;\n                if (docRow > foldStart) {\n                    docRow = foldLine.end.row + 1;\n                    foldLine = this.getNextFoldLine(docRow, foldLine);\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n            }\n            if (doCache) {\n                this.$docRowCache.push(docRow);\n                this.$screenRowCache.push(row);\n            }\n        }\n        if (foldLine && foldLine.start.row <= docRow) {\n            line = this.getFoldDisplayLine(foldLine);\n            docRow = foldLine.start.row;\n        }\n        else if (row + rowLength <= screenRow || docRow > maxRow) {\n            return {\n                row: maxRow,\n                column: this.getLine(maxRow).length\n            };\n        }\n        else {\n            line = this.getLine(docRow);\n            foldLine = null;\n        }\n        var wrapIndent = 0, splitIndex = Math.floor(screenRow - row);\n        if (this.$useWrapMode) {\n            var splits = this.$wrapData[docRow];\n            if (splits) {\n                column = splits[splitIndex];\n                if (splitIndex > 0 && splits.length) {\n                    wrapIndent = splits.indent;\n                    docColumn = splits[splitIndex - 1] || splits[splits.length - 1];\n                    line = line.substring(docColumn);\n                }\n            }\n        }\n        if (offsetX !== undefined && this.$bidiHandler.isBidiRow(row + splitIndex, docRow, splitIndex))\n            screenColumn = this.$bidiHandler.offsetToCol(offsetX);\n        docColumn += this.$getStringScreenWidth(line, screenColumn - wrapIndent)[1];\n        if (this.$useWrapMode && docColumn >= column)\n            docColumn = column - 1;\n        if (foldLine)\n            return foldLine.idxToPosition(docColumn);\n        return { row: docRow, column: docColumn };\n    };\n    EditSession.prototype.documentToScreenPosition = function (docRow, docColumn) {\n        if (typeof docColumn === \"undefined\")\n            var pos = this.$clipPositionToDocument(/**@type{Point}*/ (docRow).row, /**@type{Point}*/ (docRow).column);\n        else\n            pos = this.$clipPositionToDocument(/**@type{number}*/ (docRow), docColumn);\n        docRow = pos.row;\n        docColumn = pos.column;\n        var screenRow = 0;\n        var foldStartRow = null;\n        var fold = null;\n        fold = this.getFoldAt(docRow, docColumn, 1);\n        if (fold) {\n            docRow = fold.start.row;\n            docColumn = fold.start.column;\n        }\n        var rowEnd, row = 0;\n        var rowCache = this.$docRowCache;\n        var i = this.$getRowCacheIndex(rowCache, docRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var screenRow = this.$screenRowCache[i];\n            var doCache = docRow > rowCache[l - 1];\n        }\n        else {\n            var doCache = !l;\n        }\n        var foldLine = this.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n        while (row < docRow) {\n            if (row >= foldStart) {\n                rowEnd = foldLine.end.row + 1;\n                if (rowEnd > docRow)\n                    break;\n                foldLine = this.getNextFoldLine(rowEnd, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            else {\n                rowEnd = row + 1;\n            }\n            screenRow += this.getRowLength(row);\n            row = rowEnd;\n            if (doCache) {\n                this.$docRowCache.push(row);\n                this.$screenRowCache.push(screenRow);\n            }\n        }\n        var textLine = \"\";\n        if (foldLine && row >= foldStart) {\n            textLine = this.getFoldDisplayLine(foldLine, docRow, docColumn);\n            foldStartRow = foldLine.start.row;\n        }\n        else {\n            textLine = this.getLine(docRow).substring(0, docColumn);\n            foldStartRow = docRow;\n        }\n        var wrapIndent = 0;\n        if (this.$useWrapMode) {\n            var wrapRow = this.$wrapData[foldStartRow];\n            if (wrapRow) {\n                var screenRowOffset = 0;\n                while (textLine.length >= wrapRow[screenRowOffset]) {\n                    screenRow++;\n                    screenRowOffset++;\n                }\n                textLine = textLine.substring(wrapRow[screenRowOffset - 1] || 0, textLine.length);\n                wrapIndent = screenRowOffset > 0 ? wrapRow.indent : 0;\n            }\n        }\n        if (this.lineWidgets && this.lineWidgets[row] && this.lineWidgets[row].rowsAbove)\n            screenRow += this.lineWidgets[row].rowsAbove;\n        return {\n            row: screenRow,\n            column: wrapIndent + this.$getStringScreenWidth(textLine)[0]\n        };\n    };\n    EditSession.prototype.documentToScreenColumn = function (row, docColumn) {\n        return this.documentToScreenPosition(row, docColumn).column;\n    };\n    EditSession.prototype.documentToScreenRow = function (docRow, docColumn) {\n        return this.documentToScreenPosition(docRow, docColumn).row;\n    };\n    EditSession.prototype.getScreenLength = function () {\n        var screenRows = 0;\n        var fold = null;\n        if (!this.$useWrapMode) {\n            screenRows = this.getLength();\n            var foldData = this.$foldData;\n            for (var i = 0; i < foldData.length; i++) {\n                fold = foldData[i];\n                screenRows -= fold.end.row - fold.start.row;\n            }\n        }\n        else {\n            var lastRow = this.$wrapData.length;\n            var row = 0, i = 0;\n            var fold = this.$foldData[i++];\n            var foldStart = fold ? fold.start.row : Infinity;\n            while (row < lastRow) {\n                var splits = this.$wrapData[row];\n                screenRows += splits ? splits.length + 1 : 1;\n                row++;\n                if (row > foldStart) {\n                    row = fold.end.row + 1;\n                    fold = this.$foldData[i++];\n                    foldStart = fold ? fold.start.row : Infinity;\n                }\n            }\n        }\n        if (this.lineWidgets)\n            screenRows += this.$getWidgetScreenLength();\n        return screenRows;\n    };\n    EditSession.prototype.$setFontMetrics = function (fm) {\n        if (!this.$enableVarChar)\n            return;\n        this.$getStringScreenWidth = function (str, maxScreenColumn, screenColumn) {\n            if (maxScreenColumn === 0)\n                return [0, 0];\n            if (!maxScreenColumn)\n                maxScreenColumn = Infinity;\n            screenColumn = screenColumn || 0;\n            var c, column;\n            for (column = 0; column < str.length; column++) {\n                c = str.charAt(column);\n                if (c === \"\\t\") {\n                    screenColumn += this.getScreenTabSize(screenColumn);\n                }\n                else {\n                    screenColumn += fm.getCharacterWidth(c);\n                }\n                if (screenColumn > maxScreenColumn) {\n                    break;\n                }\n            }\n            return [screenColumn, column];\n        };\n    };\n    EditSession.prototype.getPrecedingCharacter = function () {\n        var pos = this.selection.getCursor();\n        if (pos.column === 0) {\n            return pos.row === 0 ? \"\" : this.doc.getNewLineCharacter();\n        }\n        var currentLine = this.getLine(pos.row);\n        return currentLine[pos.column - 1];\n    };\n    EditSession.prototype.destroy = function () {\n        if (!this.destroyed) {\n            this.bgTokenizer.setDocument(null);\n            this.bgTokenizer.cleanup();\n            this.destroyed = true;\n        }\n        this.endOperation();\n        this.$stopWorker();\n        this.removeAllListeners();\n        if (this.doc) {\n            this.doc.off(\"change\", this.$onChange);\n        }\n        if (this.selection) {\n            this.selection.off(\"changeCursor\", this.$onSelectionChange);\n            this.selection.off(\"changeSelection\", this.$onSelectionChange);\n        }\n        this.selection.detach();\n    };\n    return EditSession;\n}());\nEditSession.$uid = 0;\nEditSession.prototype.$modes = config.$modes;\nEditSession.prototype.getValue = EditSession.prototype.toString;\nEditSession.prototype.$defaultUndoManager = {\n    undo: function () { },\n    redo: function () { },\n    hasUndo: function () { },\n    hasRedo: function () { },\n    reset: function () { },\n    add: function () { },\n    addSelection: function () { },\n    startNewGroup: function () { },\n    addSession: function () { }\n};\nEditSession.prototype.$overwrite = false;\nEditSession.prototype.$mode = null;\nEditSession.prototype.$modeId = null;\nEditSession.prototype.$scrollTop = 0;\nEditSession.prototype.$scrollLeft = 0;\nEditSession.prototype.$wrapLimit = 80;\nEditSession.prototype.$useWrapMode = false;\nEditSession.prototype.$wrapLimitRange = {\n    min: null,\n    max: null\n};\nEditSession.prototype.lineWidgets = null;\nEditSession.prototype.isFullWidth = isFullWidth;\noop.implement(EditSession.prototype, EventEmitter);\nvar CHAR = 1, CHAR_EXT = 2, PLACEHOLDER_START = 3, PLACEHOLDER_BODY = 4, PUNCTUATION = 9, SPACE = 10, TAB = 11, TAB_SPACE = 12;\nfunction isFullWidth(c) {\n    if (c < 0x1100)\n        return false;\n    return c >= 0x1100 && c <= 0x115F ||\n        c >= 0x11A3 && c <= 0x11A7 ||\n        c >= 0x11FA && c <= 0x11FF ||\n        c >= 0x2329 && c <= 0x232A ||\n        c >= 0x2E80 && c <= 0x2E99 ||\n        c >= 0x2E9B && c <= 0x2EF3 ||\n        c >= 0x2F00 && c <= 0x2FD5 ||\n        c >= 0x2FF0 && c <= 0x2FFB ||\n        c >= 0x3000 && c <= 0x303E ||\n        c >= 0x3041 && c <= 0x3096 ||\n        c >= 0x3099 && c <= 0x30FF ||\n        c >= 0x3105 && c <= 0x312D ||\n        c >= 0x3131 && c <= 0x318E ||\n        c >= 0x3190 && c <= 0x31BA ||\n        c >= 0x31C0 && c <= 0x31E3 ||\n        c >= 0x31F0 && c <= 0x321E ||\n        c >= 0x3220 && c <= 0x3247 ||\n        c >= 0x3250 && c <= 0x32FE ||\n        c >= 0x3300 && c <= 0x4DBF ||\n        c >= 0x4E00 && c <= 0xA48C ||\n        c >= 0xA490 && c <= 0xA4C6 ||\n        c >= 0xA960 && c <= 0xA97C ||\n        c >= 0xAC00 && c <= 0xD7A3 ||\n        c >= 0xD7B0 && c <= 0xD7C6 ||\n        c >= 0xD7CB && c <= 0xD7FB ||\n        c >= 0xF900 && c <= 0xFAFF ||\n        c >= 0xFE10 && c <= 0xFE19 ||\n        c >= 0xFE30 && c <= 0xFE52 ||\n        c >= 0xFE54 && c <= 0xFE66 ||\n        c >= 0xFE68 && c <= 0xFE6B ||\n        c >= 0xFF01 && c <= 0xFF60 ||\n        c >= 0xFFE0 && c <= 0xFFE6;\n}\nrequire(\"./edit_session/folding\").Folding.call(EditSession.prototype);\nrequire(\"./edit_session/bracket_match\").BracketMatch.call(EditSession.prototype);\nconfig.defineOptions(EditSession.prototype, \"session\", {\n    wrap: {\n        set: function (value) {\n            if (!value || value == \"off\")\n                value = false;\n            else if (value == \"free\")\n                value = true;\n            else if (value == \"printMargin\")\n                value = -1;\n            else if (typeof value == \"string\")\n                value = parseInt(value, 10) || false;\n            if (this.$wrap == value)\n                return;\n            this.$wrap = value;\n            if (!value) {\n                this.setUseWrapMode(false);\n            }\n            else {\n                var col = typeof value == \"number\" ? value : null;\n                this.setWrapLimitRange(col, col);\n                this.setUseWrapMode(true);\n            }\n        },\n        get: function () {\n            if (this.getUseWrapMode()) {\n                if (this.$wrap == -1)\n                    return \"printMargin\";\n                if (!this.getWrapLimitRange().min)\n                    return \"free\";\n                return this.$wrap;\n            }\n            return \"off\";\n        },\n        handlesSet: true\n    },\n    wrapMethod: {\n        set: function (val) {\n            val = val == \"auto\"\n                ? this.$mode.type != \"text\"\n                : val != \"text\";\n            if (val != this.$wrapAsCode) {\n                this.$wrapAsCode = val;\n                if (this.$useWrapMode) {\n                    this.$useWrapMode = false;\n                    this.setUseWrapMode(true);\n                }\n            }\n        },\n        initialValue: \"auto\"\n    },\n    indentedSoftWrap: {\n        set: function () {\n            if (this.$useWrapMode) {\n                this.$useWrapMode = false;\n                this.setUseWrapMode(true);\n            }\n        },\n        initialValue: true\n    },\n    firstLineNumber: {\n        set: function () { this._signal(\"changeBreakpoint\"); },\n        initialValue: 1\n    },\n    useWorker: {\n        set: function (useWorker) {\n            this.$useWorker = useWorker;\n            this.$stopWorker();\n            if (useWorker)\n                this.$startWorker();\n        },\n        initialValue: true\n    },\n    useSoftTabs: { initialValue: true },\n    tabSize: {\n        set: function (tabSize) {\n            tabSize = parseInt(tabSize);\n            if (tabSize > 0 && this.$tabSize !== tabSize) {\n                this.$modified = true;\n                this.$rowLengthCache = [];\n                this.$tabSize = tabSize;\n                this._signal(\"changeTabSize\");\n            }\n        },\n        initialValue: 4,\n        handlesSet: true\n    },\n    navigateWithinSoftTabs: { initialValue: false },\n    foldStyle: {\n        set: function (val) { this.setFoldStyle(val); },\n        handlesSet: true\n    },\n    overwrite: {\n        set: function (val) { this._signal(\"changeOverwrite\"); },\n        initialValue: false\n    },\n    newLineMode: {\n        set: function (val) { this.doc.setNewLineMode(val); },\n        get: function () { return this.doc.getNewLineMode(); },\n        handlesSet: true\n    },\n    mode: {\n        set: function (val) { this.setMode(val); },\n        get: function () { return this.$modeId; },\n        handlesSet: true\n    }\n});\nexports.EditSession = EditSession;\n\n});\n\nace.define(\"ace/search\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar lang = require(\"./lib/lang\");\nvar oop = require(\"./lib/oop\");\nvar Range = require(\"./range\").Range;\nvar Search = /** @class */ (function () {\n    function Search() {\n        this.$options = {};\n    }\n    Search.prototype.set = function (options) {\n        oop.mixin(this.$options, options);\n        return this;\n    };\n    Search.prototype.getOptions = function () {\n        return lang.copyObject(this.$options);\n    };\n    Search.prototype.setOptions = function (options) {\n        this.$options = options;\n    };\n    Search.prototype.find = function (session) {\n        var options = this.$options;\n        var iterator = this.$matchIterator(session, options);\n        if (!iterator)\n            return false;\n        var firstRange = null;\n        iterator.forEach(function (sr, sc, er, ec) {\n            firstRange = new Range(sr, sc, er, ec);\n            if (sc == ec && options.start && /**@type{Range}*/ (options.start).start\n                && options.skipCurrent != false && firstRange.isEqual(/**@type{Range}*/ (options.start))) {\n                firstRange = null;\n                return false;\n            }\n            return true;\n        });\n        return firstRange;\n    };\n    Search.prototype.findAll = function (session) {\n        var options = this.$options;\n        if (!options.needle)\n            return [];\n        this.$assembleRegExp(options);\n        var range = options.range;\n        var lines = range\n            ? session.getLines(range.start.row, range.end.row)\n            : session.doc.getAllLines();\n        var ranges = [];\n        var re = options.re;\n        if (options.$isMultiLine) {\n            var len = re.length;\n            var maxRow = lines.length - len;\n            var prevRange;\n            outer: for (var row = re.offset || 0; row <= maxRow; row++) {\n                for (var j = 0; j < len; j++)\n                    if (lines[row + j].search(re[j]) == -1)\n                        continue outer;\n                var startLine = lines[row];\n                var line = lines[row + len - 1];\n                var startIndex = startLine.length - startLine.match(re[0])[0].length;\n                var endIndex = line.match(re[len - 1])[0].length;\n                if (prevRange && prevRange.end.row === row &&\n                    prevRange.end.column > startIndex) {\n                    continue;\n                }\n                ranges.push(prevRange = new Range(row, startIndex, row + len - 1, endIndex));\n                if (len > 2)\n                    row = row + len - 2;\n            }\n        }\n        else {\n            for (var matches, i = 0; i < lines.length; i++) {\n                if (this.$isMultilineSearch(options)) {\n                    var lng = lines.length - 1;\n                    matches = this.$multiLineForward(session, re, i, lng);\n                    if (matches) {\n                        var end_row = matches.endRow <= lng ? matches.endRow - 1 : lng;\n                        if (end_row > i)\n                            i = end_row;\n                        ranges.push(new Range(matches.startRow, matches.startCol, matches.endRow, matches.endCol));\n                    }\n                }\n                else {\n                    matches = lang.getMatchOffsets(lines[i], re);\n                    for (var j = 0; j < matches.length; j++) {\n                        var match = matches[j];\n                        ranges.push(new Range(i, match.offset, i, match.offset + match.length));\n                    }\n                }\n            }\n        }\n        if (range) {\n            var startColumn = range.start.column;\n            var endColumn = range.end.column;\n            var i = 0, j = ranges.length - 1;\n            while (i < j && ranges[i].start.column < startColumn && ranges[i].start.row == 0)\n                i++;\n            var endRow = range.end.row - range.start.row;\n            while (i < j && ranges[j].end.column > endColumn && ranges[j].end.row == endRow)\n                j--;\n            ranges = ranges.slice(i, j + 1);\n            for (i = 0, j = ranges.length; i < j; i++) {\n                ranges[i].start.row += range.start.row;\n                ranges[i].end.row += range.start.row;\n            }\n        }\n        return ranges;\n    };\n    Search.prototype.parseReplaceString = function (replaceString) {\n        var CharCode = {\n            DollarSign: 36,\n            Ampersand: 38,\n            Digit0: 48,\n            Digit1: 49,\n            Digit9: 57,\n            Backslash: 92,\n            n: 110,\n            t: 116\n        };\n        var replacement = '';\n        for (var i = 0, len = replaceString.length; i < len; i++) {\n            var chCode = replaceString.charCodeAt(i);\n            if (chCode === CharCode.Backslash) {\n                i++;\n                if (i >= len) {\n                    replacement += \"\\\\\";\n                    break;\n                }\n                var nextChCode = replaceString.charCodeAt(i);\n                switch (nextChCode) {\n                    case CharCode.Backslash:\n                        replacement += \"\\\\\";\n                        break;\n                    case CharCode.n:\n                        replacement += \"\\n\";\n                        break;\n                    case CharCode.t:\n                        replacement += \"\\t\";\n                        break;\n                }\n                continue;\n            }\n            if (chCode === CharCode.DollarSign) {\n                i++;\n                if (i >= len) {\n                    replacement += \"$\";\n                    break;\n                }\n                var nextChCode_1 = replaceString.charCodeAt(i);\n                if (nextChCode_1 === CharCode.DollarSign) {\n                    replacement += \"$$\";\n                    continue;\n                }\n                if (nextChCode_1 === CharCode.Digit0 || nextChCode_1 === CharCode.Ampersand) {\n                    replacement += \"$&\";\n                    continue;\n                }\n                if (CharCode.Digit1 <= nextChCode_1 && nextChCode_1 <= CharCode.Digit9) {\n                    replacement += \"$\" + replaceString[i];\n                    continue;\n                }\n            }\n            replacement += replaceString[i];\n        }\n        return replacement || replaceString;\n    };\n    Search.prototype.replace = function (input, replacement) {\n        var options = this.$options;\n        var re = this.$assembleRegExp(options);\n        if (options.$isMultiLine)\n            return replacement;\n        if (!re)\n            return;\n        var mtSearch = this.$isMultilineSearch(options);\n        if (mtSearch)\n            input = input.replace(/\\r\\n|\\r|\\n/g, \"\\n\");\n        var match = re.exec(input);\n        if (!match || (!mtSearch && match[0].length != input.length))\n            return null;\n        replacement = options.regExp\n            ? this.parseReplaceString(replacement)\n            : replacement.replace(/\\$/g, \"$$$$\");\n        replacement = input.replace(re, replacement);\n        if (options.preserveCase) {\n            replacement = replacement.split(\"\");\n            for (var i = Math.min(input.length, input.length); i--;) {\n                var ch = input[i];\n                if (ch && ch.toLowerCase() != ch)\n                    replacement[i] = replacement[i].toUpperCase();\n                else\n                    replacement[i] = replacement[i].toLowerCase();\n            }\n            replacement = replacement.join(\"\");\n        }\n        return replacement;\n    };\n    Search.prototype.$assembleRegExp = function (options, $disableFakeMultiline) {\n        if (options.needle instanceof RegExp)\n            return options.re = options.needle;\n        var needle = options.needle;\n        if (!options.needle)\n            return options.re = false;\n        if (!options.regExp)\n            needle = lang.escapeRegExp(needle);\n        var modifier = options.caseSensitive ? \"gm\" : \"gmi\";\n        try {\n            new RegExp(needle, \"u\");\n            options.$supportsUnicodeFlag = true;\n            modifier += \"u\";\n        }\n        catch (e) {\n            options.$supportsUnicodeFlag = false; //left for backward compatibility with previous versions for cases like /ab\\{2}/gu\n        }\n        if (options.wholeWord)\n            needle = addWordBoundary(needle, options);\n        options.$isMultiLine = !$disableFakeMultiline && /[\\n\\r]/.test(needle);\n        if (options.$isMultiLine)\n            return options.re = this.$assembleMultilineRegExp(needle, modifier);\n        try {\n            var re = new RegExp(needle, modifier);\n        }\n        catch (e) {\n            re = false;\n        }\n        return options.re = re;\n    };\n    Search.prototype.$assembleMultilineRegExp = function (needle, modifier) {\n        var parts = needle.replace(/\\r\\n|\\r|\\n/g, \"$\\n^\").split(\"\\n\");\n        var re = [];\n        for (var i = 0; i < parts.length; i++)\n            try {\n                re.push(new RegExp(parts[i], modifier));\n            }\n            catch (e) {\n                return false;\n            }\n        return re;\n    };\n    Search.prototype.$isMultilineSearch = function (options) {\n        return options.re && /\\\\r\\\\n|\\\\r|\\\\n/.test(options.re.source) && options.regExp && !options.$isMultiLine;\n    };\n    Search.prototype.$multiLineForward = function (session, re, start, last) {\n        var line, chunk = chunkEnd(session, start);\n        for (var row = start; row <= last;) {\n            for (var i = 0; i < chunk; i++) {\n                if (row > last)\n                    break;\n                var next = session.getLine(row++);\n                line = line == null ? next : line + \"\\n\" + next;\n            }\n            var match = re.exec(line);\n            re.lastIndex = 0;\n            if (match) {\n                var beforeMatch = line.slice(0, match.index).split(\"\\n\");\n                var matchedText = match[0].split(\"\\n\");\n                var startRow = start + beforeMatch.length - 1;\n                var startCol = beforeMatch[beforeMatch.length - 1].length;\n                var endRow = startRow + matchedText.length - 1;\n                var endCol = matchedText.length == 1\n                    ? startCol + matchedText[0].length\n                    : matchedText[matchedText.length - 1].length;\n                return {\n                    startRow: startRow,\n                    startCol: startCol,\n                    endRow: endRow,\n                    endCol: endCol\n                };\n            }\n        }\n        return null;\n    };\n    Search.prototype.$multiLineBackward = function (session, re, endIndex, start, first) {\n        var line, chunk = chunkEnd(session, start), endMargin = session.getLine(start).length - endIndex;\n        for (var row = start; row >= first;) {\n            for (var i = 0; i < chunk && row >= first; i++) {\n                var next = session.getLine(row--);\n                line = line == null ? next : next + \"\\n\" + line;\n            }\n            var match = multiLineBackwardMatch(line, re, endMargin);\n            if (match) {\n                var beforeMatch = line.slice(0, match.index).split(\"\\n\");\n                var matchedText = match[0].split(\"\\n\");\n                var startRow = row + beforeMatch.length;\n                var startCol = beforeMatch[beforeMatch.length - 1].length;\n                var endRow = startRow + matchedText.length - 1;\n                var endCol = matchedText.length == 1\n                    ? startCol + matchedText[0].length\n                    : matchedText[matchedText.length - 1].length;\n                return {\n                    startRow: startRow,\n                    startCol: startCol,\n                    endRow: endRow,\n                    endCol: endCol\n                };\n            }\n        }\n        return null;\n    };\n    Search.prototype.$matchIterator = function (session, options) {\n        var re = this.$assembleRegExp(options);\n        if (!re)\n            return false;\n        var mtSearch = this.$isMultilineSearch(options);\n        var mtForward = this.$multiLineForward;\n        var mtBackward = this.$multiLineBackward;\n        var backwards = options.backwards == true;\n        var skipCurrent = options.skipCurrent != false;\n        var supportsUnicodeFlag = re.unicode;\n        var range = options.range;\n        var start = options.start;\n        if (!start)\n            start = range ? range[backwards ? \"end\" : \"start\"] : session.selection.getRange();\n        if (start.start)\n            start = start[skipCurrent != backwards ? \"end\" : \"start\"];\n        var firstRow = range ? range.start.row : 0;\n        var lastRow = range ? range.end.row : session.getLength() - 1;\n        if (backwards) {\n            var forEach = function (callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row--; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = lastRow, firstRow = start.row; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n            };\n        }\n        else {\n            var forEach = function (callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row = row + 1; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = firstRow, lastRow = start.row; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n            };\n        }\n        if (options.$isMultiLine) {\n            var len = re.length;\n            var forEachInLine = function (row, offset, callback) {\n                var startRow = backwards ? row - len + 1 : row;\n                if (startRow < 0 || startRow + len > session.getLength())\n                    return;\n                var line = session.getLine(startRow);\n                var startIndex = line.search(re[0]);\n                if (!backwards && startIndex < offset || startIndex === -1)\n                    return;\n                for (var i = 1; i < len; i++) {\n                    line = session.getLine(startRow + i);\n                    if (line.search(re[i]) == -1)\n                        return;\n                }\n                var endIndex = line.match(re[len - 1])[0].length;\n                if (backwards && endIndex > offset)\n                    return;\n                if (callback(startRow, startIndex, startRow + len - 1, endIndex))\n                    return true;\n            };\n        }\n        else if (backwards) {\n            var forEachInLine = function (row, endIndex, callback) {\n                if (mtSearch) {\n                    var pos = mtBackward(session, re, endIndex, row, firstRow);\n                    if (!pos)\n                        return false;\n                    if (callback(pos.startRow, pos.startCol, pos.endRow, pos.endCol))\n                        return true;\n                }\n                else {\n                    var line = session.getLine(row);\n                    var matches = [];\n                    var m, last = 0;\n                    re.lastIndex = 0;\n                    while ((m = re.exec(line))) {\n                        var length = m[0].length;\n                        last = m.index;\n                        if (!length) {\n                            if (last >= line.length)\n                                break;\n                            re.lastIndex = last += lang.skipEmptyMatch(line, last, supportsUnicodeFlag);\n                        }\n                        if (m.index + length > endIndex)\n                            break;\n                        matches.push(m.index, length);\n                    }\n                    for (var i = matches.length - 1; i >= 0; i -= 2) {\n                        var column = matches[i - 1];\n                        var length = matches[i];\n                        if (callback(row, column, row, column + length))\n                            return true;\n                    }\n                }\n            };\n        }\n        else {\n            var forEachInLine = function (row, startIndex, callback) {\n                re.lastIndex = startIndex;\n                if (mtSearch) {\n                    var pos = mtForward(session, re, row, lastRow);\n                    if (pos) {\n                        var end_row = pos.endRow <= lastRow ? pos.endRow - 1 : lastRow;\n                        if (end_row > row)\n                            row = end_row;\n                    }\n                    if (!pos)\n                        return false;\n                    if (callback(pos.startRow, pos.startCol, pos.endRow, pos.endCol))\n                        return true;\n                }\n                else {\n                    var line = session.getLine(row);\n                    var last;\n                    var m;\n                    while ((m = re.exec(line))) {\n                        var length = m[0].length;\n                        last = m.index;\n                        if (callback(row, last, row, last + length))\n                            return true;\n                        if (!length) {\n                            re.lastIndex = last += lang.skipEmptyMatch(line, last, supportsUnicodeFlag);\n                            if (last >= line.length)\n                                return false;\n                        }\n                    }\n                }\n            };\n        }\n        return { forEach: forEach };\n    };\n    return Search;\n}());\nfunction addWordBoundary(needle, options) {\n    var supportsLookbehind = lang.supportsLookbehind();\n    function wordBoundary(c, firstChar) {\n        if (firstChar === void 0) { firstChar = true; }\n        var wordRegExp = supportsLookbehind && options.$supportsUnicodeFlag ? new RegExp(\"[\\\\p{L}\\\\p{N}_]\", \"u\") : new RegExp(\"\\\\w\");\n        if (wordRegExp.test(c) || options.regExp) {\n            if (supportsLookbehind && options.$supportsUnicodeFlag) {\n                if (firstChar)\n                    return \"(?<=^|[^\\\\p{L}\\\\p{N}_])\";\n                return \"(?=[^\\\\p{L}\\\\p{N}_]|$)\";\n            }\n            return \"\\\\b\";\n        }\n        return \"\";\n    }\n    var needleArray = Array.from(needle);\n    var firstChar = needleArray[0];\n    var lastChar = needleArray[needleArray.length - 1];\n    return wordBoundary(firstChar) + needle + wordBoundary(lastChar, false);\n}\nfunction multiLineBackwardMatch(line, re, endMargin) {\n    var match = null;\n    var from = 0;\n    while (from <= line.length) {\n        re.lastIndex = from;\n        var newMatch = re.exec(line);\n        if (!newMatch)\n            break;\n        var end = newMatch.index + newMatch[0].length;\n        if (end > line.length - endMargin)\n            break;\n        if (!match || end > match.index + match[0].length)\n            match = newMatch;\n        from = newMatch.index + 1;\n    }\n    return match;\n}\nfunction chunkEnd(session, start) {\n    var base = 5000, startPosition = { row: start, column: 0 }, startIndex = session.doc.positionToIndex(startPosition), targetIndex = startIndex + base, targetPosition = session.doc.indexToPosition(targetIndex), targetLine = targetPosition.row;\n    return targetLine + 1;\n}\nexports.Search = Search;\n\n});\n\nace.define(\"ace/keyboard/hash_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})(); var keyUtil = require(\"../lib/keys\");\nvar useragent = require(\"../lib/useragent\");\nvar KEY_MODS = keyUtil.KEY_MODS;\nvar MultiHashHandler = /** @class */ (function () {\n    function MultiHashHandler(config, platform) {\n        this.$init(config, platform, false);\n    }\n    MultiHashHandler.prototype.$init = function (config, platform, $singleCommand) {\n        this.platform = platform || (useragent.isMac ? \"mac\" : \"win\");\n        this.commands = {};\n        this.commandKeyBinding = {};\n        this.addCommands(config);\n        this.$singleCommand = $singleCommand;\n    };\n    MultiHashHandler.prototype.addCommand = function (command) {\n        if (this.commands[command.name])\n            this.removeCommand(command);\n        this.commands[command.name] = command;\n        if (command.bindKey)\n            this._buildKeyHash(command);\n    };\n    MultiHashHandler.prototype.removeCommand = function (command, keepCommand) {\n        var name = command && (typeof command === 'string' ? command : command.name);\n        command = this.commands[name];\n        if (!keepCommand)\n            delete this.commands[name];\n        var ckb = this.commandKeyBinding;\n        for (var keyId in ckb) {\n            var cmdGroup = ckb[keyId];\n            if (cmdGroup == command) {\n                delete ckb[keyId];\n            }\n            else if (Array.isArray(cmdGroup)) {\n                var i = cmdGroup.indexOf(command);\n                if (i != -1) {\n                    cmdGroup.splice(i, 1);\n                    if (cmdGroup.length == 1)\n                        ckb[keyId] = cmdGroup[0];\n                }\n            }\n        }\n    };\n    MultiHashHandler.prototype.bindKey = function (key, command, position) {\n        if (typeof key == \"object\" && key) {\n            if (position == undefined)\n                position = key.position;\n            key = key[this.platform];\n        }\n        if (!key)\n            return;\n        if (typeof command == \"function\")\n            return this.addCommand({ exec: command, bindKey: key, name: command.name || /**@type{string}*/ (key) }); (key).split(\"|\").forEach(function (keyPart) {\n            var chain = \"\";\n            if (keyPart.indexOf(\" \") != -1) {\n                var parts = keyPart.split(/\\s+/);\n                keyPart = parts.pop();\n                parts.forEach(function (keyPart) {\n                    var binding = this.parseKeys(keyPart);\n                    var id = KEY_MODS[binding.hashId] + binding.key;\n                    chain += (chain ? \" \" : \"\") + id;\n                    this._addCommandToBinding(chain, \"chainKeys\");\n                }, this);\n                chain += \" \";\n            }\n            var binding = this.parseKeys(keyPart);\n            var id = KEY_MODS[binding.hashId] + binding.key;\n            this._addCommandToBinding(chain + id, command, position);\n        }, this);\n    };\n    MultiHashHandler.prototype._addCommandToBinding = function (keyId, command, position) {\n        var ckb = this.commandKeyBinding, i;\n        if (!command) {\n            delete ckb[keyId];\n        }\n        else if (!ckb[keyId] || this.$singleCommand) {\n            ckb[keyId] = command;\n        }\n        else {\n            if (!Array.isArray(ckb[keyId])) {\n                ckb[keyId] = [ckb[keyId]];\n            }\n            else if ((i = ckb[keyId].indexOf(command)) != -1) {\n                ckb[keyId].splice(i, 1);\n            }\n            if (typeof position != \"number\") {\n                position = getPosition(command);\n            }\n            var commands = ckb[keyId];\n            for (i = 0; i < commands.length; i++) {\n                var other = commands[i];\n                var otherPos = getPosition(other);\n                if (otherPos > position)\n                    break;\n            }\n            commands.splice(i, 0, command);\n        }\n    };\n    MultiHashHandler.prototype.addCommands = function (commands) {\n        commands && Object.keys(commands).forEach(function (name) {\n            var command = commands[name];\n            if (!command)\n                return;\n            if (typeof command === \"string\")\n                return this.bindKey(command, name);\n            if (typeof command === \"function\")\n                command = { exec: command };\n            if (typeof command !== \"object\")\n                return;\n            if (!command.name)\n                command.name = name;\n            this.addCommand(command);\n        }, this);\n    };\n    MultiHashHandler.prototype.removeCommands = function (commands) {\n        Object.keys(commands).forEach(function (name) {\n            this.removeCommand(commands[name]);\n        }, this);\n    };\n    MultiHashHandler.prototype.bindKeys = function (keyList) {\n        Object.keys(keyList).forEach(function (key) {\n            this.bindKey(key, keyList[key]);\n        }, this);\n    };\n    MultiHashHandler.prototype._buildKeyHash = function (command) {\n        this.bindKey(command.bindKey, command);\n    };\n    MultiHashHandler.prototype.parseKeys = function (keys) {\n        var parts = keys.toLowerCase().split(/[\\-\\+]([\\-\\+])?/).filter(function (x) { return x; });\n        var key = parts.pop();\n        var keyCode = keyUtil[key];\n        if (keyUtil.FUNCTION_KEYS[keyCode])\n            key = keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();\n        else if (!parts.length)\n            return { key: key, hashId: -1 };\n        else if (parts.length == 1 && parts[0] == \"shift\")\n            return { key: key.toUpperCase(), hashId: -1 };\n        var hashId = 0;\n        for (var i = parts.length; i--;) {\n            var modifier = keyUtil.KEY_MODS[parts[i]];\n            if (modifier == null) {\n                if (typeof console != \"undefined\")\n                    console.error(\"invalid modifier \" + parts[i] + \" in \" + keys);\n                return false;\n            }\n            hashId |= modifier;\n        }\n        return { key: key, hashId: hashId };\n    };\n    MultiHashHandler.prototype.findKeyCommand = function (hashId, keyString) {\n        var key = KEY_MODS[hashId] + keyString;\n        return this.commandKeyBinding[key];\n    };\n    MultiHashHandler.prototype.handleKeyboard = function (data, hashId, keyString, keyCode) {\n        if (keyCode < 0)\n            return;\n        var key = KEY_MODS[hashId] + keyString;\n        var command = this.commandKeyBinding[key];\n        if (data.$keyChain) {\n            data.$keyChain += \" \" + key;\n            command = this.commandKeyBinding[data.$keyChain] || command;\n        }\n        if (command) {\n            if (command == \"chainKeys\" || command[command.length - 1] == \"chainKeys\") {\n                data.$keyChain = data.$keyChain || key;\n                return { command: \"null\" };\n            }\n        }\n        if (data.$keyChain) {\n            if ((!hashId || hashId == 4) && keyString.length == 1)\n                data.$keyChain = data.$keyChain.slice(0, -key.length - 1); // wait for input\n            else if (hashId == -1 || keyCode > 0)\n                data.$keyChain = \"\"; // reset keyChain\n        }\n        return { command: command };\n    };\n    MultiHashHandler.prototype.getStatusText = function (editor, data) {\n        return data.$keyChain || \"\";\n    };\n    return MultiHashHandler;\n}());\nfunction getPosition(command) {\n    return typeof command == \"object\" && command.bindKey\n        && command.bindKey.position\n        || (command.isDefault ? -100 : 0);\n}\nvar HashHandler = /** @class */ (function (_super) {\n    __extends(HashHandler, _super);\n    function HashHandler(config, platform) {\n        var _this = _super.call(this, config, platform) || this;\n        _this.$singleCommand = true;\n        return _this;\n    }\n    return HashHandler;\n}(MultiHashHandler));\nHashHandler.call = function (thisArg, config, platform) {\n    MultiHashHandler.prototype.$init.call(thisArg, config, platform, true);\n};\nMultiHashHandler.call = function (thisArg, config, platform) {\n    MultiHashHandler.prototype.$init.call(thisArg, config, platform, false);\n};\nexports.HashHandler = HashHandler;\nexports.MultiHashHandler = MultiHashHandler;\n\n});\n\nace.define(\"ace/commands/command_manager\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/keyboard/hash_handler\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar oop = require(\"../lib/oop\");\nvar MultiHashHandler = require(\"../keyboard/hash_handler\").MultiHashHandler;\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar CommandManager = /** @class */ (function (_super) {\n    __extends(CommandManager, _super);\n    function CommandManager(platform, commands) {\n        var _this = _super.call(this, commands, platform) || this;\n        _this.byName = _this.commands;\n        _this.setDefaultHandler(\"exec\", function (e) {\n            if (!e.args) {\n                return e.command.exec(e.editor, {}, e.event, true);\n            }\n            return e.command.exec(e.editor, e.args, e.event, false);\n        });\n        return _this;\n    }\n    CommandManager.prototype.exec = function (command, editor, args) {\n        if (Array.isArray(command)) {\n            for (var i = command.length; i--;) {\n                if (this.exec(command[i], editor, args))\n                    return true;\n            }\n            return false;\n        }\n        if (typeof command === \"string\")\n            command = this.commands[command];\n        var e = { editor: editor, command: command, args: args };\n        if (!this.canExecute(command, editor)) {\n            this._signal(\"commandUnavailable\", e);\n            return false;\n        }\n        e.returnValue = this._emit(\"exec\", e);\n        this._signal(\"afterExec\", e);\n        return e.returnValue === false ? false : true;\n    };\n    CommandManager.prototype.canExecute = function (command, editor) {\n        if (typeof command === \"string\")\n            command = this.commands[command];\n        if (!command)\n            return false;\n        if (editor && editor.$readOnly && !command.readOnly)\n            return false;\n        if (this.$checkCommandState != false && command.isAvailable && !command.isAvailable(editor))\n            return false;\n        return true;\n    };\n    CommandManager.prototype.toggleRecording = function (editor) {\n        if (this.$inReplay)\n            return;\n        editor && editor._emit(\"changeStatus\");\n        if (this.recording) {\n            this.macro.pop();\n            this.off(\"exec\", this.$addCommandToMacro);\n            if (!this.macro.length)\n                this.macro = this.oldMacro;\n            return this.recording = false;\n        }\n        if (!this.$addCommandToMacro) {\n            this.$addCommandToMacro = function (e) {\n                this.macro.push([e.command, e.args]);\n            }.bind(this);\n        }\n        this.oldMacro = this.macro;\n        this.macro = [];\n        this.on(\"exec\", this.$addCommandToMacro);\n        return this.recording = true;\n    };\n    CommandManager.prototype.replay = function (editor) {\n        if (this.$inReplay || !this.macro)\n            return;\n        if (this.recording)\n            return this.toggleRecording(editor);\n        try {\n            this.$inReplay = true;\n            this.macro.forEach(function (x) {\n                if (typeof x == \"string\")\n                    this.exec(x, editor);\n                else\n                    this.exec(x[0], editor, x[1]);\n            }, this);\n        }\n        finally {\n            this.$inReplay = false;\n        }\n    };\n    CommandManager.prototype.trimMacro = function (m) {\n        return m.map(function (x) {\n            if (typeof x[0] != \"string\")\n                x[0] = x[0].name;\n            if (!x[1])\n                x = x[0];\n            return x;\n        });\n    };\n    return CommandManager;\n}(MultiHashHandler));\noop.implement(CommandManager.prototype, EventEmitter);\nexports.CommandManager = CommandManager;\n\n});\n\nace.define(\"ace/commands/default_commands\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/config\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar lang = require(\"../lib/lang\");\nvar config = require(\"../config\");\nvar Range = require(\"../range\").Range;\nfunction bindKey(win, mac) {\n    return { win: win, mac: mac };\n}\nexports.commands = [{\n        name: \"showSettingsMenu\",\n        description: \"Show settings menu\",\n        bindKey: bindKey(\"Ctrl-,\", \"Command-,\"),\n        exec: function (editor) {\n            config.loadModule(\"ace/ext/settings_menu\", function (module) {\n                module.init(editor);\n                editor.showSettingsMenu();\n            });\n        },\n        readOnly: true\n    }, {\n        name: \"goToNextError\",\n        description: \"Go to next error\",\n        bindKey: bindKey(\"Alt-E\", \"F4\"),\n        exec: function (editor) {\n            config.loadModule(\"ace/ext/error_marker\", function (module) {\n                module.showErrorMarker(editor, 1);\n            });\n        },\n        scrollIntoView: \"animate\",\n        readOnly: true\n    }, {\n        name: \"goToPreviousError\",\n        description: \"Go to previous error\",\n        bindKey: bindKey(\"Alt-Shift-E\", \"Shift-F4\"),\n        exec: function (editor) {\n            config.loadModule(\"ace/ext/error_marker\", function (module) {\n                module.showErrorMarker(editor, -1);\n            });\n        },\n        scrollIntoView: \"animate\",\n        readOnly: true\n    }, {\n        name: \"selectall\",\n        description: \"Select all\",\n        bindKey: bindKey(\"Ctrl-A\", \"Command-A\"),\n        exec: function (editor) { editor.selectAll(); },\n        readOnly: true\n    }, {\n        name: \"centerselection\",\n        description: \"Center selection\",\n        bindKey: bindKey(null, \"Ctrl-L\"),\n        exec: function (editor) { editor.centerSelection(); },\n        readOnly: true\n    }, {\n        name: \"gotoline\",\n        description: \"Go to line...\",\n        bindKey: bindKey(\"Ctrl-L\", \"Command-L\"),\n        exec: function (editor, line) {\n            if (typeof line === \"number\" && !isNaN(line))\n                editor.gotoLine(line);\n            editor.prompt({ $type: \"gotoLine\" });\n        },\n        readOnly: true\n    }, {\n        name: \"fold\",\n        bindKey: bindKey(\"Alt-L|Ctrl-F1\", \"Command-Alt-L|Command-F1\"),\n        exec: function (editor) { editor.session.toggleFold(false); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"unfold\",\n        bindKey: bindKey(\"Alt-Shift-L|Ctrl-Shift-F1\", \"Command-Alt-Shift-L|Command-Shift-F1\"),\n        exec: function (editor) { editor.session.toggleFold(true); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"toggleFoldWidget\",\n        description: \"Toggle fold widget\",\n        bindKey: bindKey(\"F2\", \"F2\"),\n        exec: function (editor) { editor.session.toggleFoldWidget(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"toggleParentFoldWidget\",\n        description: \"Toggle parent fold widget\",\n        bindKey: bindKey(\"Alt-F2\", \"Alt-F2\"),\n        exec: function (editor) { editor.session.toggleFoldWidget(true); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"foldall\",\n        description: \"Fold all\",\n        bindKey: bindKey(null, \"Ctrl-Command-Option-0\"),\n        exec: function (editor) { editor.session.foldAll(); },\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"foldAllComments\",\n        description: \"Fold all comments\",\n        bindKey: bindKey(null, \"Ctrl-Command-Option-0\"),\n        exec: function (editor) { editor.session.foldAllComments(); },\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"foldOther\",\n        description: \"Fold other\",\n        bindKey: bindKey(\"Alt-0\", \"Command-Option-0\"),\n        exec: function (editor) {\n            editor.session.foldAll();\n            editor.session.unfold(editor.selection.getAllRanges());\n        },\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"unfoldall\",\n        description: \"Unfold all\",\n        bindKey: bindKey(\"Alt-Shift-0\", \"Command-Option-Shift-0\"),\n        exec: function (editor) { editor.session.unfold(); },\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"findnext\",\n        description: \"Find next\",\n        bindKey: bindKey(\"Ctrl-K\", \"Command-G\"),\n        exec: function (editor) { editor.findNext(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"findprevious\",\n        description: \"Find previous\",\n        bindKey: bindKey(\"Ctrl-Shift-K\", \"Command-Shift-G\"),\n        exec: function (editor) { editor.findPrevious(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"center\",\n        readOnly: true\n    }, {\n        name: \"selectOrFindNext\",\n        description: \"Select or find next\",\n        bindKey: bindKey(\"Alt-K\", \"Ctrl-G\"),\n        exec: function (editor) {\n            if (editor.selection.isEmpty())\n                editor.selection.selectWord();\n            else\n                editor.findNext();\n        },\n        readOnly: true\n    }, {\n        name: \"selectOrFindPrevious\",\n        description: \"Select or find previous\",\n        bindKey: bindKey(\"Alt-Shift-K\", \"Ctrl-Shift-G\"),\n        exec: function (editor) {\n            if (editor.selection.isEmpty())\n                editor.selection.selectWord();\n            else\n                editor.findPrevious();\n        },\n        readOnly: true\n    }, {\n        name: \"find\",\n        description: \"Find\",\n        bindKey: bindKey(\"Ctrl-F\", \"Command-F\"),\n        exec: function (editor) {\n            config.loadModule(\"ace/ext/searchbox\", function (e) { e.Search(editor); });\n        },\n        readOnly: true\n    }, {\n        name: \"overwrite\",\n        description: \"Overwrite\",\n        bindKey: \"Insert\",\n        exec: function (editor) { editor.toggleOverwrite(); },\n        readOnly: true\n    }, {\n        name: \"selecttostart\",\n        description: \"Select to start\",\n        bindKey: bindKey(\"Ctrl-Shift-Home\", \"Command-Shift-Home|Command-Shift-Up\"),\n        exec: function (editor) { editor.getSelection().selectFileStart(); },\n        multiSelectAction: \"forEach\",\n        readOnly: true,\n        scrollIntoView: \"animate\",\n        aceCommandGroup: \"fileJump\"\n    }, {\n        name: \"gotostart\",\n        description: \"Go to start\",\n        bindKey: bindKey(\"Ctrl-Home\", \"Command-Home|Command-Up\"),\n        exec: function (editor) { editor.navigateFileStart(); },\n        multiSelectAction: \"forEach\",\n        readOnly: true,\n        scrollIntoView: \"animate\",\n        aceCommandGroup: \"fileJump\"\n    }, {\n        name: \"selectup\",\n        description: \"Select up\",\n        bindKey: bindKey(\"Shift-Up\", \"Shift-Up|Ctrl-Shift-P\"),\n        exec: function (editor) { editor.getSelection().selectUp(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"golineup\",\n        description: \"Go line up\",\n        bindKey: bindKey(\"Up\", \"Up|Ctrl-P\"),\n        exec: function (editor, args) { editor.navigateUp(args.times); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selecttoend\",\n        description: \"Select to end\",\n        bindKey: bindKey(\"Ctrl-Shift-End\", \"Command-Shift-End|Command-Shift-Down\"),\n        exec: function (editor) { editor.getSelection().selectFileEnd(); },\n        multiSelectAction: \"forEach\",\n        readOnly: true,\n        scrollIntoView: \"animate\",\n        aceCommandGroup: \"fileJump\"\n    }, {\n        name: \"gotoend\",\n        description: \"Go to end\",\n        bindKey: bindKey(\"Ctrl-End\", \"Command-End|Command-Down\"),\n        exec: function (editor) { editor.navigateFileEnd(); },\n        multiSelectAction: \"forEach\",\n        readOnly: true,\n        scrollIntoView: \"animate\",\n        aceCommandGroup: \"fileJump\"\n    }, {\n        name: \"selectdown\",\n        description: \"Select down\",\n        bindKey: bindKey(\"Shift-Down\", \"Shift-Down|Ctrl-Shift-N\"),\n        exec: function (editor) { editor.getSelection().selectDown(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"golinedown\",\n        description: \"Go line down\",\n        bindKey: bindKey(\"Down\", \"Down|Ctrl-N\"),\n        exec: function (editor, args) { editor.navigateDown(args.times); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectwordleft\",\n        description: \"Select word left\",\n        bindKey: bindKey(\"Ctrl-Shift-Left\", \"Option-Shift-Left\"),\n        exec: function (editor) { editor.getSelection().selectWordLeft(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotowordleft\",\n        description: \"Go to word left\",\n        bindKey: bindKey(\"Ctrl-Left\", \"Option-Left\"),\n        exec: function (editor) { editor.navigateWordLeft(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selecttolinestart\",\n        description: \"Select to line start\",\n        bindKey: bindKey(\"Alt-Shift-Left\", \"Command-Shift-Left|Ctrl-Shift-A\"),\n        exec: function (editor) { editor.getSelection().selectLineStart(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotolinestart\",\n        description: \"Go to line start\",\n        bindKey: bindKey(\"Alt-Left|Home\", \"Command-Left|Home|Ctrl-A\"),\n        exec: function (editor) { editor.navigateLineStart(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectleft\",\n        description: \"Select left\",\n        bindKey: bindKey(\"Shift-Left\", \"Shift-Left|Ctrl-Shift-B\"),\n        exec: function (editor) { editor.getSelection().selectLeft(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotoleft\",\n        description: \"Go to left\",\n        bindKey: bindKey(\"Left\", \"Left|Ctrl-B\"),\n        exec: function (editor, args) { editor.navigateLeft(args.times); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectwordright\",\n        description: \"Select word right\",\n        bindKey: bindKey(\"Ctrl-Shift-Right\", \"Option-Shift-Right\"),\n        exec: function (editor) { editor.getSelection().selectWordRight(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotowordright\",\n        description: \"Go to word right\",\n        bindKey: bindKey(\"Ctrl-Right\", \"Option-Right\"),\n        exec: function (editor) { editor.navigateWordRight(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selecttolineend\",\n        description: \"Select to line end\",\n        bindKey: bindKey(\"Alt-Shift-Right\", \"Command-Shift-Right|Shift-End|Ctrl-Shift-E\"),\n        exec: function (editor) { editor.getSelection().selectLineEnd(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotolineend\",\n        description: \"Go to line end\",\n        bindKey: bindKey(\"Alt-Right|End\", \"Command-Right|End|Ctrl-E\"),\n        exec: function (editor) { editor.navigateLineEnd(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectright\",\n        description: \"Select right\",\n        bindKey: bindKey(\"Shift-Right\", \"Shift-Right\"),\n        exec: function (editor) { editor.getSelection().selectRight(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"gotoright\",\n        description: \"Go to right\",\n        bindKey: bindKey(\"Right\", \"Right|Ctrl-F\"),\n        exec: function (editor, args) { editor.navigateRight(args.times); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectpagedown\",\n        description: \"Select page down\",\n        bindKey: \"Shift-PageDown\",\n        exec: function (editor) { editor.selectPageDown(); },\n        readOnly: true\n    }, {\n        name: \"pagedown\",\n        description: \"Page down\",\n        bindKey: bindKey(null, \"Option-PageDown\"),\n        exec: function (editor) { editor.scrollPageDown(); },\n        readOnly: true\n    }, {\n        name: \"gotopagedown\",\n        description: \"Go to page down\",\n        bindKey: bindKey(\"PageDown\", \"PageDown|Ctrl-V\"),\n        exec: function (editor) { editor.gotoPageDown(); },\n        readOnly: true\n    }, {\n        name: \"selectpageup\",\n        description: \"Select page up\",\n        bindKey: \"Shift-PageUp\",\n        exec: function (editor) { editor.selectPageUp(); },\n        readOnly: true\n    }, {\n        name: \"pageup\",\n        description: \"Page up\",\n        bindKey: bindKey(null, \"Option-PageUp\"),\n        exec: function (editor) { editor.scrollPageUp(); },\n        readOnly: true\n    }, {\n        name: \"gotopageup\",\n        description: \"Go to page up\",\n        bindKey: \"PageUp\",\n        exec: function (editor) { editor.gotoPageUp(); },\n        readOnly: true\n    }, {\n        name: \"scrollup\",\n        description: \"Scroll up\",\n        bindKey: bindKey(\"Ctrl-Up\", null),\n        exec: function (e) { e.renderer.scrollBy(0, -2 * e.renderer.layerConfig.lineHeight); },\n        readOnly: true\n    }, {\n        name: \"scrolldown\",\n        description: \"Scroll down\",\n        bindKey: bindKey(\"Ctrl-Down\", null),\n        exec: function (e) { e.renderer.scrollBy(0, 2 * e.renderer.layerConfig.lineHeight); },\n        readOnly: true\n    }, {\n        name: \"selectlinestart\",\n        description: \"Select line start\",\n        bindKey: \"Shift-Home\",\n        exec: function (editor) { editor.getSelection().selectLineStart(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectlineend\",\n        description: \"Select line end\",\n        bindKey: \"Shift-End\",\n        exec: function (editor) { editor.getSelection().selectLineEnd(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"togglerecording\",\n        description: \"Toggle recording\",\n        bindKey: bindKey(\"Ctrl-Alt-E\", \"Command-Option-E\"),\n        exec: function (editor) { editor.commands.toggleRecording(editor); },\n        readOnly: true\n    }, {\n        name: \"replaymacro\",\n        description: \"Replay macro\",\n        bindKey: bindKey(\"Ctrl-Shift-E\", \"Command-Shift-E\"),\n        exec: function (editor) { editor.commands.replay(editor); },\n        readOnly: true\n    }, {\n        name: \"jumptomatching\",\n        description: \"Jump to matching\",\n        bindKey: bindKey(\"Ctrl-\\\\|Ctrl-P\", \"Command-\\\\\"),\n        exec: function (editor) { editor.jumpToMatching(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"animate\",\n        readOnly: true\n    }, {\n        name: \"selecttomatching\",\n        description: \"Select to matching\",\n        bindKey: bindKey(\"Ctrl-Shift-\\\\|Ctrl-Shift-P\", \"Command-Shift-\\\\\"),\n        exec: function (editor) { editor.jumpToMatching(true); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"animate\",\n        readOnly: true\n    }, {\n        name: \"expandToMatching\",\n        description: \"Expand to matching\",\n        bindKey: bindKey(\"Ctrl-Shift-M\", \"Ctrl-Shift-M\"),\n        exec: function (editor) { editor.jumpToMatching(true, true); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"animate\",\n        readOnly: true\n    }, {\n        name: \"passKeysToBrowser\",\n        description: \"Pass keys to browser\",\n        bindKey: bindKey(null, null),\n        exec: function () { },\n        passEvent: true,\n        readOnly: true\n    }, {\n        name: \"copy\",\n        description: \"Copy\",\n        exec: function (editor) {\n        },\n        readOnly: true\n    },\n    {\n        name: \"cut\",\n        description: \"Cut\",\n        exec: function (editor) {\n            var cutLine = editor.$copyWithEmptySelection && editor.selection.isEmpty();\n            var range = cutLine ? editor.selection.getLineRange() : editor.selection.getRange();\n            editor._emit(\"cut\", range);\n            if (!range.isEmpty())\n                editor.session.remove(range);\n            editor.clearSelection();\n        },\n        scrollIntoView: \"cursor\",\n        multiSelectAction: \"forEach\"\n    }, {\n        name: \"paste\",\n        description: \"Paste\",\n        exec: function (editor, args) {\n            editor.$handlePaste(args);\n        },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removeline\",\n        description: \"Remove line\",\n        bindKey: bindKey(\"Ctrl-D\", \"Command-D\"),\n        exec: function (editor) { editor.removeLines(); },\n        scrollIntoView: \"cursor\",\n        multiSelectAction: \"forEachLine\"\n    }, {\n        name: \"duplicateSelection\",\n        description: \"Duplicate selection\",\n        bindKey: bindKey(\"Ctrl-Shift-D\", \"Command-Shift-D\"),\n        exec: function (editor) { editor.duplicateSelection(); },\n        scrollIntoView: \"cursor\",\n        multiSelectAction: \"forEach\"\n    }, {\n        name: \"sortlines\",\n        description: \"Sort lines\",\n        bindKey: bindKey(\"Ctrl-Alt-S\", \"Command-Alt-S\"),\n        exec: function (editor) { editor.sortLines(); },\n        scrollIntoView: \"selection\",\n        multiSelectAction: \"forEachLine\"\n    }, {\n        name: \"togglecomment\",\n        description: \"Toggle comment\",\n        bindKey: bindKey(\"Ctrl-/\", \"Command-/\"),\n        exec: function (editor) { editor.toggleCommentLines(); },\n        multiSelectAction: \"forEachLine\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"toggleBlockComment\",\n        description: \"Toggle block comment\",\n        bindKey: bindKey(\"Ctrl-Shift-/\", \"Command-Shift-/\"),\n        exec: function (editor) { editor.toggleBlockComment(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"modifyNumberUp\",\n        description: \"Modify number up\",\n        bindKey: bindKey(\"Ctrl-Shift-Up\", \"Alt-Shift-Up\"),\n        exec: function (editor) { editor.modifyNumber(1); },\n        scrollIntoView: \"cursor\",\n        multiSelectAction: \"forEach\"\n    }, {\n        name: \"modifyNumberDown\",\n        description: \"Modify number down\",\n        bindKey: bindKey(\"Ctrl-Shift-Down\", \"Alt-Shift-Down\"),\n        exec: function (editor) { editor.modifyNumber(-1); },\n        scrollIntoView: \"cursor\",\n        multiSelectAction: \"forEach\"\n    }, {\n        name: \"replace\",\n        description: \"Replace\",\n        bindKey: bindKey(\"Ctrl-H\", \"Command-Option-F\"),\n        exec: function (editor) {\n            config.loadModule(\"ace/ext/searchbox\", function (e) { e.Search(editor, true); });\n        }\n    }, {\n        name: \"undo\",\n        description: \"Undo\",\n        bindKey: bindKey(\"Ctrl-Z\", \"Command-Z\"),\n        exec: function (editor) { editor.undo(); }\n    }, {\n        name: \"redo\",\n        description: \"Redo\",\n        bindKey: bindKey(\"Ctrl-Shift-Z|Ctrl-Y\", \"Command-Shift-Z|Command-Y\"),\n        exec: function (editor) { editor.redo(); }\n    }, {\n        name: \"copylinesup\",\n        description: \"Copy lines up\",\n        bindKey: bindKey(\"Alt-Shift-Up\", \"Command-Option-Up\"),\n        exec: function (editor) { editor.copyLinesUp(); },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"movelinesup\",\n        description: \"Move lines up\",\n        bindKey: bindKey(\"Alt-Up\", \"Option-Up\"),\n        exec: function (editor) { editor.moveLinesUp(); },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"copylinesdown\",\n        description: \"Copy lines down\",\n        bindKey: bindKey(\"Alt-Shift-Down\", \"Command-Option-Down\"),\n        exec: function (editor) { editor.copyLinesDown(); },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"movelinesdown\",\n        description: \"Move lines down\",\n        bindKey: bindKey(\"Alt-Down\", \"Option-Down\"),\n        exec: function (editor) { editor.moveLinesDown(); },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"del\",\n        description: \"Delete\",\n        bindKey: bindKey(\"Delete\", \"Delete|Ctrl-D|Shift-Delete\"),\n        exec: function (editor) { editor.remove(\"right\"); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"backspace\",\n        description: \"Backspace\",\n        bindKey: bindKey(\"Shift-Backspace|Backspace\", \"Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H\"),\n        exec: function (editor) { editor.remove(\"left\"); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"cut_or_delete\",\n        description: \"Cut or delete\",\n        bindKey: bindKey(\"Shift-Delete\", null),\n        exec: function (editor) {\n            if (editor.selection.isEmpty()) {\n                editor.remove(\"left\");\n            }\n            else {\n                return false;\n            }\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removetolinestart\",\n        description: \"Remove to line start\",\n        bindKey: bindKey(\"Alt-Backspace\", \"Command-Backspace\"),\n        exec: function (editor) { editor.removeToLineStart(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removetolineend\",\n        description: \"Remove to line end\",\n        bindKey: bindKey(\"Alt-Delete\", \"Ctrl-K|Command-Delete\"),\n        exec: function (editor) { editor.removeToLineEnd(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removetolinestarthard\",\n        description: \"Remove to line start hard\",\n        bindKey: bindKey(\"Ctrl-Shift-Backspace\", null),\n        exec: function (editor) {\n            var range = editor.selection.getRange();\n            range.start.column = 0;\n            editor.session.remove(range);\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removetolineendhard\",\n        description: \"Remove to line end hard\",\n        bindKey: bindKey(\"Ctrl-Shift-Delete\", null),\n        exec: function (editor) {\n            var range = editor.selection.getRange();\n            range.end.column = Number.MAX_VALUE;\n            editor.session.remove(range);\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removewordleft\",\n        description: \"Remove word left\",\n        bindKey: bindKey(\"Ctrl-Backspace\", \"Alt-Backspace|Ctrl-Alt-Backspace\"),\n        exec: function (editor) { editor.removeWordLeft(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"removewordright\",\n        description: \"Remove word right\",\n        bindKey: bindKey(\"Ctrl-Delete\", \"Alt-Delete\"),\n        exec: function (editor) { editor.removeWordRight(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"outdent\",\n        description: \"Outdent\",\n        bindKey: bindKey(\"Shift-Tab\", \"Shift-Tab\"),\n        exec: function (editor) { editor.blockOutdent(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"indent\",\n        description: \"Indent\",\n        bindKey: bindKey(\"Tab\", \"Tab\"),\n        exec: function (editor) { editor.indent(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"blockoutdent\",\n        description: \"Block outdent\",\n        bindKey: bindKey(\"Ctrl-[\", \"Ctrl-[\"),\n        exec: function (editor) { editor.blockOutdent(); },\n        multiSelectAction: \"forEachLine\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"blockindent\",\n        description: \"Block indent\",\n        bindKey: bindKey(\"Ctrl-]\", \"Ctrl-]\"),\n        exec: function (editor) { editor.blockIndent(); },\n        multiSelectAction: \"forEachLine\",\n        scrollIntoView: \"selectionPart\"\n    }, {\n        name: \"insertstring\",\n        description: \"Insert string\",\n        exec: function (editor, str) { editor.insert(str); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"inserttext\",\n        description: \"Insert text\",\n        exec: function (editor, args) {\n            editor.insert(lang.stringRepeat(args.text || \"\", args.times || 1));\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"splitline\",\n        description: \"Split line\",\n        bindKey: bindKey(null, \"Ctrl-O\"),\n        exec: function (editor) { editor.splitLine(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"transposeletters\",\n        description: \"Transpose letters\",\n        bindKey: bindKey(\"Alt-Shift-X\", \"Ctrl-T\"),\n        exec: function (editor) { editor.transposeLetters(); },\n        multiSelectAction: function (editor) { editor.transposeSelections(1); },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"touppercase\",\n        description: \"To uppercase\",\n        bindKey: bindKey(\"Ctrl-U\", \"Ctrl-U\"),\n        exec: function (editor) { editor.toUpperCase(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"tolowercase\",\n        description: \"To lowercase\",\n        bindKey: bindKey(\"Ctrl-Shift-U\", \"Ctrl-Shift-U\"),\n        exec: function (editor) { editor.toLowerCase(); },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"autoindent\",\n        description: \"Auto Indent\",\n        bindKey: bindKey(null, null),\n        exec: function (editor) { editor.autoIndent(); },\n        scrollIntoView: \"animate\"\n    }, {\n        name: \"expandtoline\",\n        description: \"Expand to line\",\n        bindKey: bindKey(\"Ctrl-Shift-L\", \"Command-Shift-L\"),\n        exec: function (editor) {\n            var range = editor.selection.getRange();\n            range.start.column = range.end.column = 0;\n            range.end.row++;\n            editor.selection.setRange(range, false);\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"openlink\",\n        bindKey: bindKey(\"Ctrl+F3\", \"F3\"),\n        exec: function (editor) { editor.openLink(); }\n    }, {\n        name: \"joinlines\",\n        description: \"Join lines\",\n        bindKey: bindKey(null, null),\n        exec: function (editor) {\n            var isBackwards = editor.selection.isBackwards();\n            var selectionStart = isBackwards ? editor.selection.getSelectionLead() : editor.selection.getSelectionAnchor();\n            var selectionEnd = isBackwards ? editor.selection.getSelectionAnchor() : editor.selection.getSelectionLead();\n            var firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length;\n            var selectedText = editor.session.doc.getTextRange(editor.selection.getRange());\n            var selectedCount = selectedText.replace(/\\n\\s*/, \" \").length;\n            var insertLine = editor.session.doc.getLine(selectionStart.row);\n            for (var i = selectionStart.row + 1; i <= selectionEnd.row + 1; i++) {\n                var curLine = lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)));\n                if (curLine.length !== 0) {\n                    curLine = \" \" + curLine;\n                }\n                insertLine += curLine;\n            }\n            if (selectionEnd.row + 1 < (editor.session.doc.getLength() - 1)) {\n                insertLine += editor.session.doc.getNewLineCharacter();\n            }\n            editor.clearSelection();\n            editor.session.doc.replace(new Range(selectionStart.row, 0, selectionEnd.row + 2, 0), insertLine);\n            if (selectedCount > 0) {\n                editor.selection.moveCursorTo(selectionStart.row, selectionStart.column);\n                editor.selection.selectTo(selectionStart.row, selectionStart.column + selectedCount);\n            }\n            else {\n                firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length > firstLineEndCol ? (firstLineEndCol + 1) : firstLineEndCol;\n                editor.selection.moveCursorTo(selectionStart.row, firstLineEndCol);\n            }\n        },\n        multiSelectAction: \"forEach\",\n        readOnly: true\n    }, {\n        name: \"invertSelection\",\n        description: \"Invert selection\",\n        bindKey: bindKey(null, null),\n        exec: function (editor) {\n            var endRow = editor.session.doc.getLength() - 1;\n            var endCol = editor.session.doc.getLine(endRow).length;\n            var ranges = editor.selection.rangeList.ranges;\n            var newRanges = [];\n            if (ranges.length < 1) {\n                ranges = [editor.selection.getRange()];\n            }\n            for (var i = 0; i < ranges.length; i++) {\n                if (i == (ranges.length - 1)) {\n                    if (!(ranges[i].end.row === endRow && ranges[i].end.column === endCol)) {\n                        newRanges.push(new Range(ranges[i].end.row, ranges[i].end.column, endRow, endCol));\n                    }\n                }\n                if (i === 0) {\n                    if (!(ranges[i].start.row === 0 && ranges[i].start.column === 0)) {\n                        newRanges.push(new Range(0, 0, ranges[i].start.row, ranges[i].start.column));\n                    }\n                }\n                else {\n                    newRanges.push(new Range(ranges[i - 1].end.row, ranges[i - 1].end.column, ranges[i].start.row, ranges[i].start.column));\n                }\n            }\n            editor.exitMultiSelectMode();\n            editor.clearSelection();\n            for (var i = 0; i < newRanges.length; i++) {\n                editor.selection.addRange(newRanges[i], false);\n            }\n        },\n        readOnly: true,\n        scrollIntoView: \"none\"\n    }, {\n        name: \"addLineAfter\",\n        description: \"Add new line after the current line\",\n        exec: function (editor) {\n            editor.selection.clearSelection();\n            editor.navigateLineEnd();\n            editor.insert(\"\\n\");\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"addLineBefore\",\n        description: \"Add new line before the current line\",\n        exec: function (editor) {\n            editor.selection.clearSelection();\n            var cursor = editor.getCursorPosition();\n            editor.selection.moveTo(cursor.row - 1, Number.MAX_VALUE);\n            editor.insert(\"\\n\");\n            if (cursor.row === 0)\n                editor.navigateUp();\n        },\n        multiSelectAction: \"forEach\",\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"openCommandPallete\",\n        exec: function (editor) {\n            console.warn(\"This is an obsolete command. Please use `openCommandPalette` instead.\");\n            editor.prompt({ $type: \"commands\" });\n        },\n        readOnly: true\n    }, {\n        name: \"openCommandPalette\",\n        description: \"Open command palette\",\n        bindKey: bindKey(\"F1\", \"F1\"),\n        exec: function (editor) {\n            editor.prompt({ $type: \"commands\" });\n        },\n        readOnly: true\n    }, {\n        name: \"modeSelect\",\n        description: \"Change language mode...\",\n        bindKey: bindKey(null, null),\n        exec: function (editor) {\n            editor.prompt({ $type: \"modes\" });\n        },\n        readOnly: true\n    }];\nfor (var i = 1; i < 9; i++) {\n    exports.commands.push({\n        name: \"foldToLevel\" + i,\n        description: \"Fold To Level \" + i,\n        level: i,\n        exec: function (editor) { editor.session.foldToLevel(this.level); },\n        scrollIntoView: \"center\",\n        readOnly: true\n    });\n}\n\n});\n\nace.define(\"ace/keyboard/gutter_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\"], function(require, exports, module){\"use strict\";\nvar keys = require('../lib/keys');\nvar GutterKeyboardHandler = /** @class */ (function () {\n    function GutterKeyboardHandler(editor) {\n        this.editor = editor;\n        this.gutterLayer = editor.renderer.$gutterLayer;\n        this.element = editor.renderer.$gutter;\n        this.lines = editor.renderer.$gutterLayer.$lines;\n        this.activeRowIndex = null;\n        this.activeLane = null;\n        this.annotationTooltip = this.editor.$mouseHandler.$tooltip;\n    }\n    GutterKeyboardHandler.prototype.addListener = function () {\n        this.element.addEventListener(\"keydown\", this.$onGutterKeyDown.bind(this));\n        this.element.addEventListener(\"focusout\", this.$blurGutter.bind(this));\n        this.editor.on(\"mousewheel\", this.$blurGutter.bind(this));\n    };\n    GutterKeyboardHandler.prototype.removeListener = function () {\n        this.element.removeEventListener(\"keydown\", this.$onGutterKeyDown.bind(this));\n        this.element.removeEventListener(\"focusout\", this.$blurGutter.bind(this));\n        this.editor.off(\"mousewheel\", this.$blurGutter.bind(this));\n    };\n    GutterKeyboardHandler.prototype.$onGutterKeyDown = function (e) {\n        if (this.annotationTooltip.isOpen) {\n            e.preventDefault();\n            if (e.keyCode === keys[\"escape\"])\n                this.annotationTooltip.hide();\n            return;\n        }\n        if (e.target === this.element) {\n            if (e.keyCode != keys[\"enter\"]) {\n                return;\n            }\n            e.preventDefault();\n            var row = this.editor.getCursorPosition().row;\n            if (!this.editor.isRowVisible(row))\n                this.editor.scrollToLine(row, true, true);\n            setTimeout(\n            function () {\n                var index = this.$rowToRowIndex(this.gutterLayer.$cursorCell.row);\n                var nearestFoldLaneWidgetIndex = this.$findNearestFoldLaneWidget(index);\n                var nearestAnnotationIndex = this.$findNearestAnnotation(index);\n                if (nearestFoldLaneWidgetIndex === null && nearestAnnotationIndex === null)\n                    return;\n                var futureActiveRowIndex = this.$findClosestNumber(nearestFoldLaneWidgetIndex, nearestAnnotationIndex, index);\n                if (futureActiveRowIndex === nearestFoldLaneWidgetIndex) {\n                    this.activeLane = \"fold\";\n                    this.activeRowIndex = nearestFoldLaneWidgetIndex;\n                    if (this.$isCustomWidgetVisible(nearestFoldLaneWidgetIndex)) {\n                        this.$focusCustomWidget(this.activeRowIndex);\n                        return;\n                    }\n                    else {\n                        this.$focusFoldWidget(this.activeRowIndex);\n                        return;\n                    }\n                }\n                else {\n                    this.activeRowIndex = nearestAnnotationIndex;\n                    this.activeLane = \"annotation\";\n                    this.$focusAnnotation(this.activeRowIndex);\n                    return;\n                }\n            }.bind(this), 10);\n            return;\n        }\n        this.$handleGutterKeyboardInteraction(e);\n        setTimeout(function () {\n            this.editor._signal(\"gutterkeydown\", new GutterKeyboardEvent(e, this));\n        }.bind(this), 10);\n    };\n    GutterKeyboardHandler.prototype.$handleGutterKeyboardInteraction = function (e) {\n        if (e.keyCode === keys[\"tab\"]) {\n            e.preventDefault();\n            return;\n        }\n        if (e.keyCode === keys[\"escape\"]) {\n            e.preventDefault();\n            this.$blurGutter();\n            this.element.focus();\n            this.lane = null;\n            return;\n        }\n        if (e.keyCode === keys[\"up\"]) {\n            e.preventDefault();\n            switch (this.activeLane) {\n                case \"fold\":\n                    this.$moveFoldWidgetUp();\n                    break;\n                case \"annotation\":\n                    this.$moveAnnotationUp();\n                    break;\n            }\n            return;\n        }\n        if (e.keyCode === keys[\"down\"]) {\n            e.preventDefault();\n            switch (this.activeLane) {\n                case \"fold\":\n                    this.$moveFoldWidgetDown();\n                    break;\n                case \"annotation\":\n                    this.$moveAnnotationDown();\n                    break;\n            }\n            return;\n        }\n        if (e.keyCode === keys[\"left\"]) {\n            e.preventDefault();\n            this.$switchLane(\"annotation\");\n            return;\n        }\n        if (e.keyCode === keys[\"right\"]) {\n            e.preventDefault();\n            this.$switchLane(\"fold\");\n            return;\n        }\n        if (e.keyCode === keys[\"enter\"] || e.keyCode === keys[\"space\"]) {\n            e.preventDefault();\n            switch (this.activeLane) {\n                case \"fold\":\n                    var row = this.$rowIndexToRow(this.activeRowIndex);\n                    var customWidget = this.editor.session.$gutterCustomWidgets[row];\n                    if (customWidget) {\n                        if (customWidget.callbacks && customWidget.callbacks.onClick) {\n                            customWidget.callbacks.onClick(e, row);\n                        }\n                    }\n                    else if (this.gutterLayer.session.foldWidgets[row] === 'start') {\n                        this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex), e);\n                        setTimeout(\n                        function () {\n                            if (this.$rowIndexToRow(this.activeRowIndex) !== row) {\n                                this.$blurFoldWidget(this.activeRowIndex);\n                                this.activeRowIndex = this.$rowToRowIndex(row);\n                                this.$focusFoldWidget(this.activeRowIndex);\n                            }\n                        }.bind(this), 10);\n                        break;\n                    }\n                    else if (this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)] === 'end') {\n                        break;\n                    }\n                    return;\n                case \"annotation\":\n                    this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));\n                    this.annotationTooltip.$fromKeyboard = true;\n                    break;\n            }\n            return;\n        }\n    };\n    GutterKeyboardHandler.prototype.$blurGutter = function () {\n        if (this.activeRowIndex !== null) {\n            switch (this.activeLane) {\n                case \"fold\":\n                    this.$blurFoldWidget(this.activeRowIndex);\n                    this.$blurCustomWidget(this.activeRowIndex);\n                    break;\n                case \"annotation\":\n                    this.$blurAnnotation(this.activeRowIndex);\n                    break;\n            }\n        }\n        if (this.annotationTooltip.isOpen)\n            this.annotationTooltip.hide();\n        return;\n    };\n    GutterKeyboardHandler.prototype.$isFoldWidgetVisible = function (index) {\n        var isRowFullyVisible = this.editor.isRowFullyVisible(this.$rowIndexToRow(index));\n        var isIconVisible = this.$getFoldWidget(index).style.display !== \"none\";\n        return isRowFullyVisible && isIconVisible;\n    };\n    GutterKeyboardHandler.prototype.$isCustomWidgetVisible = function (index) {\n        var isRowFullyVisible = this.editor.isRowFullyVisible(this.$rowIndexToRow(index));\n        var isIconVisible = !!this.$getCustomWidget(index);\n        return isRowFullyVisible && isIconVisible;\n    };\n    GutterKeyboardHandler.prototype.$isAnnotationVisible = function (index) {\n        var isRowFullyVisible = this.editor.isRowFullyVisible(this.$rowIndexToRow(index));\n        var isIconVisible = this.$getAnnotation(index).style.display !== \"none\";\n        return isRowFullyVisible && isIconVisible;\n    };\n    GutterKeyboardHandler.prototype.$getFoldWidget = function (index) {\n        var cell = this.lines.get(index);\n        var element = cell.element;\n        return element.childNodes[1];\n    };\n    GutterKeyboardHandler.prototype.$getCustomWidget = function (index) {\n        var cell = this.lines.get(index);\n        var element = cell.element;\n        return element.childNodes[3];\n    };\n    GutterKeyboardHandler.prototype.$getAnnotation = function (index) {\n        var cell = this.lines.get(index);\n        var element = cell.element;\n        return element.childNodes[2];\n    };\n    GutterKeyboardHandler.prototype.$findNearestFoldLaneWidget = function (index) {\n        if (this.$isCustomWidgetVisible(index))\n            return index;\n        if (this.$isFoldWidgetVisible(index))\n            return index;\n        var i = 0;\n        while (index - i > 0 || index + i < this.lines.getLength() - 1) {\n            i++;\n            if (index - i >= 0 && this.$isCustomWidgetVisible(index - i))\n                return index - i;\n            if (index + i <= this.lines.getLength() - 1 && this.$isCustomWidgetVisible(index + i))\n                return index + i;\n            if (index - i >= 0 && this.$isFoldWidgetVisible(index - i))\n                return index - i;\n            if (index + i <= this.lines.getLength() - 1 && this.$isFoldWidgetVisible(index + i))\n                return index + i;\n        }\n        return null;\n    };\n    GutterKeyboardHandler.prototype.$findNearestAnnotation = function (index) {\n        if (this.$isAnnotationVisible(index))\n            return index;\n        var i = 0;\n        while (index - i > 0 || index + i < this.lines.getLength() - 1) {\n            i++;\n            if (index - i >= 0 && this.$isAnnotationVisible(index - i))\n                return index - i;\n            if (index + i <= this.lines.getLength() - 1 && this.$isAnnotationVisible(index + i))\n                return index + i;\n        }\n        return null;\n    };\n    GutterKeyboardHandler.prototype.$focusFoldWidget = function (index) {\n        if (index == null)\n            return;\n        var foldWidget = this.$getFoldWidget(index);\n        foldWidget.classList.add(this.editor.renderer.keyboardFocusClassName);\n        foldWidget.focus();\n    };\n    GutterKeyboardHandler.prototype.$focusCustomWidget = function (index) {\n        if (index == null)\n            return;\n        var customWidget = this.$getCustomWidget(index);\n        if (customWidget) {\n            customWidget.classList.add(this.editor.renderer.keyboardFocusClassName);\n            customWidget.focus();\n        }\n    };\n    GutterKeyboardHandler.prototype.$focusAnnotation = function (index) {\n        if (index == null)\n            return;\n        var annotation = this.$getAnnotation(index);\n        annotation.classList.add(this.editor.renderer.keyboardFocusClassName);\n        annotation.focus();\n    };\n    GutterKeyboardHandler.prototype.$blurFoldWidget = function (index) {\n        var foldWidget = this.$getFoldWidget(index);\n        foldWidget.classList.remove(this.editor.renderer.keyboardFocusClassName);\n        foldWidget.blur();\n    };\n    GutterKeyboardHandler.prototype.$blurCustomWidget = function (index) {\n        var customWidget = this.$getCustomWidget(index);\n        if (customWidget) {\n            customWidget.classList.remove(this.editor.renderer.keyboardFocusClassName);\n            customWidget.blur();\n        }\n    };\n    GutterKeyboardHandler.prototype.$blurAnnotation = function (index) {\n        var annotation = this.$getAnnotation(index);\n        annotation.classList.remove(this.editor.renderer.keyboardFocusClassName);\n        annotation.blur();\n    };\n    GutterKeyboardHandler.prototype.$moveFoldWidgetUp = function () {\n        var index = this.activeRowIndex;\n        while (index > 0) {\n            index--;\n            if (this.$isFoldWidgetVisible(index) || this.$isCustomWidgetVisible(index)) {\n                this.$blurFoldWidget(this.activeRowIndex);\n                this.$blurCustomWidget(this.activeRowIndex);\n                this.activeRowIndex = index;\n                if (this.$isFoldWidgetVisible(index)) {\n                    this.$focusFoldWidget(this.activeRowIndex);\n                }\n                else {\n                    this.$focusCustomWidget(this.activeRowIndex);\n                }\n                return;\n            }\n        }\n        return;\n    };\n    GutterKeyboardHandler.prototype.$moveFoldWidgetDown = function () {\n        var index = this.activeRowIndex;\n        while (index < this.lines.getLength() - 1) {\n            index++;\n            if (this.$isFoldWidgetVisible(index) || this.$isCustomWidgetVisible(index)) {\n                this.$blurFoldWidget(this.activeRowIndex);\n                this.$blurCustomWidget(this.activeRowIndex);\n                this.activeRowIndex = index;\n                if (this.$isFoldWidgetVisible(index)) {\n                    this.$focusFoldWidget(this.activeRowIndex);\n                }\n                else {\n                    this.$focusCustomWidget(this.activeRowIndex);\n                }\n                return;\n            }\n        }\n        return;\n    };\n    GutterKeyboardHandler.prototype.$moveAnnotationUp = function () {\n        var index = this.activeRowIndex;\n        while (index > 0) {\n            index--;\n            if (this.$isAnnotationVisible(index)) {\n                this.$blurAnnotation(this.activeRowIndex);\n                this.activeRowIndex = index;\n                this.$focusAnnotation(this.activeRowIndex);\n                return;\n            }\n        }\n        return;\n    };\n    GutterKeyboardHandler.prototype.$moveAnnotationDown = function () {\n        var index = this.activeRowIndex;\n        while (index < this.lines.getLength() - 1) {\n            index++;\n            if (this.$isAnnotationVisible(index)) {\n                this.$blurAnnotation(this.activeRowIndex);\n                this.activeRowIndex = index;\n                this.$focusAnnotation(this.activeRowIndex);\n                return;\n            }\n        }\n        return;\n    };\n    GutterKeyboardHandler.prototype.$findClosestNumber = function (num1, num2, target) {\n        if (num1 === null)\n            return num2;\n        if (num2 === null)\n            return num1;\n        return (Math.abs(target - num1) <= Math.abs(target - num2)) ? num1 : num2;\n    };\n    GutterKeyboardHandler.prototype.$switchLane = function (desinationLane) {\n        switch (desinationLane) {\n            case \"annotation\":\n                if (this.activeLane === \"annotation\") {\n                    break;\n                }\n                var annotationIndex = this.$findNearestAnnotation(this.activeRowIndex);\n                if (annotationIndex == null) {\n                    break;\n                }\n                this.activeLane = \"annotation\";\n                this.$blurFoldWidget(this.activeRowIndex);\n                this.$blurCustomWidget(this.activeRowIndex);\n                this.activeRowIndex = annotationIndex;\n                this.$focusAnnotation(this.activeRowIndex);\n                break;\n            case \"fold\":\n                if (this.activeLane === \"fold\") {\n                    break;\n                }\n                var foldLaneWidgetIndex = this.$findNearestFoldLaneWidget(this.activeRowIndex);\n                if (foldLaneWidgetIndex === null) {\n                    break;\n                }\n                this.activeLane = \"fold\";\n                this.$blurAnnotation(this.activeRowIndex);\n                this.activeRowIndex = foldLaneWidgetIndex;\n                if (this.$isCustomWidgetVisible(foldLaneWidgetIndex)) {\n                    this.$focusCustomWidget(this.activeRowIndex);\n                }\n                else {\n                    this.$focusFoldWidget(this.activeRowIndex);\n                }\n                break;\n        }\n        return;\n    };\n    GutterKeyboardHandler.prototype.$rowIndexToRow = function (index) {\n        var cell = this.lines.get(index);\n        if (cell)\n            return cell.row;\n        return null;\n    };\n    GutterKeyboardHandler.prototype.$rowToRowIndex = function (row) {\n        for (var i = 0; i < this.lines.getLength(); i++) {\n            var cell = this.lines.get(i);\n            if (cell.row == row)\n                return i;\n        }\n        return null;\n    };\n    return GutterKeyboardHandler;\n}());\nexports.GutterKeyboardHandler = GutterKeyboardHandler;\nvar GutterKeyboardEvent = /** @class */ (function () {\n    function GutterKeyboardEvent(domEvent, gutterKeyboardHandler) {\n        this.gutterKeyboardHandler = gutterKeyboardHandler;\n        this.domEvent = domEvent;\n    }\n    GutterKeyboardEvent.prototype.getKey = function () {\n        return keys.keyCodeToString(this.domEvent.keyCode);\n    };\n    GutterKeyboardEvent.prototype.getRow = function () {\n        return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex);\n    };\n    GutterKeyboardEvent.prototype.isInAnnotationLane = function () {\n        return this.gutterKeyboardHandler.activeLane === \"annotation\";\n    };\n    GutterKeyboardEvent.prototype.isInFoldLane = function () {\n        return this.gutterKeyboardHandler.activeLane === \"fold\";\n    };\n    return GutterKeyboardEvent;\n}());\nexports.GutterKeyboardEvent = GutterKeyboardEvent;\n\n});\n\nace.define(\"ace/editor\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/useragent\",\"ace/keyboard/textinput\",\"ace/mouse/mouse_handler\",\"ace/mouse/fold_handler\",\"ace/keyboard/keybinding\",\"ace/edit_session\",\"ace/search\",\"ace/range\",\"ace/lib/event_emitter\",\"ace/commands/command_manager\",\"ace/commands/default_commands\",\"ace/config\",\"ace/token_iterator\",\"ace/keyboard/gutter_handler\",\"ace/config\",\"ace/clipboard\",\"ace/lib/keys\",\"ace/lib/event\",\"ace/tooltip\"], function(require, exports, module){\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar lang = require(\"./lib/lang\");\nvar useragent = require(\"./lib/useragent\");\nvar TextInput = require(\"./keyboard/textinput\").TextInput;\nvar MouseHandler = require(\"./mouse/mouse_handler\").MouseHandler;\nvar FoldHandler = require(\"./mouse/fold_handler\").FoldHandler;\nvar KeyBinding = require(\"./keyboard/keybinding\").KeyBinding;\nvar EditSession = require(\"./edit_session\").EditSession;\nvar Search = require(\"./search\").Search;\nvar Range = require(\"./range\").Range;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar CommandManager = require(\"./commands/command_manager\").CommandManager;\nvar defaultCommands = require(\"./commands/default_commands\").commands;\nvar config = require(\"./config\");\nvar TokenIterator = require(\"./token_iterator\").TokenIterator;\nvar GutterKeyboardHandler = require(\"./keyboard/gutter_handler\").GutterKeyboardHandler;\nvar nls = require(\"./config\").nls;\nvar clipboard = require(\"./clipboard\");\nvar keys = require('./lib/keys');\nvar event = require(\"./lib/event\");\nvar HoverTooltip = require(\"./tooltip\").HoverTooltip;\nvar Editor = /** @class */ (function () {\n    function Editor(renderer, session, options) {\n        this.id = \"editor\" + (++Editor.$uid); this.session;\n        this.$toDestroy = [];\n        var container = renderer.getContainerElement();\n        this.container = container;\n        this.renderer = renderer;\n        this.commands = new CommandManager(useragent.isMac ? \"mac\" : \"win\", defaultCommands);\n        if (typeof document == \"object\") {\n            this.textInput = new TextInput(renderer.getTextAreaContainer(), this);\n            this.renderer.textarea = this.textInput.getElement();\n            this.$mouseHandler = new MouseHandler(this);\n            new FoldHandler(this);\n        }\n        this.keyBinding = new KeyBinding(this);\n        this.$search = new Search().set({\n            wrap: true\n        });\n        this.$historyTracker = this.$historyTracker.bind(this);\n        this.commands.on(\"exec\", this.$historyTracker);\n        this.$initOperationListeners();\n        this._$emitInputEvent = lang.delayedCall(function () {\n            this._signal(\"input\", {});\n            if (this.session && !this.session.destroyed)\n                this.session.bgTokenizer.scheduleStart();\n        }.bind(this));\n        this.on(\"change\", function (_, _self) {\n            _self._$emitInputEvent.schedule(31);\n        });\n        this.setSession(session || options && options.session || new EditSession(\"\"));\n        config.resetOptions(this);\n        if (options)\n            this.setOptions(options);\n        config._signal(\"editor\", this);\n    }\n    Editor.prototype.$initOperationListeners = function () {\n        this.commands.on(\"exec\", this.startOperation.bind(this), true);\n        this.commands.on(\"afterExec\", this.endOperation.bind(this), true);\n    };\n    Editor.prototype.startOperation = function (commandEvent) {\n        this.session.startOperation(commandEvent);\n    };\n    Editor.prototype.endOperation = function (e) {\n        this.session.endOperation(e);\n    };\n    Editor.prototype.onStartOperation = function (commandEvent) {\n        this.curOp = this.session.curOp;\n        this.curOp.scrollTop = this.renderer.scrollTop;\n        this.prevOp = this.session.prevOp;\n        if (!commandEvent) {\n            this.previousCommand = null;\n        }\n    };\n    Editor.prototype.onEndOperation = function (e) {\n        if (this.curOp && this.session) {\n            if (e && e.returnValue === false) {\n                this.curOp = null;\n                return;\n            }\n            this._signal(\"beforeEndOperation\");\n            if (!this.curOp)\n                return;\n            var command = this.curOp.command;\n            var scrollIntoView = command && command.scrollIntoView;\n            if (scrollIntoView) {\n                switch (scrollIntoView) {\n                    case \"center-animate\":\n                        scrollIntoView = \"animate\";\n                    case \"center\":\n                        this.renderer.scrollCursorIntoView(null, 0.5);\n                        break;\n                    case \"animate\":\n                    case \"cursor\":\n                        this.renderer.scrollCursorIntoView();\n                        break;\n                    case \"selectionPart\":\n                        var range = this.selection.getRange();\n                        var config = this.renderer.layerConfig;\n                        if (range.start.row >= config.lastRow || range.end.row <= config.firstRow) {\n                            this.renderer.scrollSelectionIntoView(this.selection.anchor, this.selection.lead);\n                        }\n                        break;\n                    default:\n                        break;\n                }\n                if (scrollIntoView == \"animate\")\n                    this.renderer.animateScrolling(this.curOp.scrollTop);\n            }\n            this.$lastSel = this.session.selection.toJSON();\n            this.prevOp = this.curOp;\n            this.curOp = null;\n        }\n    };\n    Editor.prototype.$historyTracker = function (e) {\n        if (!this.$mergeUndoDeltas)\n            return;\n        var prev = this.prevOp;\n        var mergeableCommands = this.$mergeableCommands;\n        var shouldMerge = prev.command && (e.command.name == prev.command.name);\n        if (e.command.name == \"insertstring\") {\n            var text = e.args;\n            if (this.mergeNextCommand === undefined)\n                this.mergeNextCommand = true;\n            shouldMerge = shouldMerge\n                && this.mergeNextCommand // previous command allows to coalesce with\n                && (!/\\s/.test(text) || /\\s/.test(prev.args)); // previous insertion was of same type\n            this.mergeNextCommand = true;\n        }\n        else {\n            shouldMerge = shouldMerge\n                && mergeableCommands.indexOf(e.command.name) !== -1; // the command is mergeable\n        }\n        if (this.$mergeUndoDeltas != \"always\"\n            && Date.now() - this.sequenceStartTime > 2000) {\n            shouldMerge = false; // the sequence is too long\n        }\n        if (shouldMerge)\n            this.session.mergeUndoDeltas = true;\n        else if (mergeableCommands.indexOf(e.command.name) !== -1)\n            this.sequenceStartTime = Date.now();\n    };\n    Editor.prototype.setKeyboardHandler = function (keyboardHandler, cb) {\n        if (keyboardHandler && typeof keyboardHandler === \"string\" && keyboardHandler != \"ace\") {\n            this.$keybindingId = keyboardHandler;\n            var _self = this;\n            config.loadModule([\"keybinding\", keyboardHandler], function (module) {\n                if (_self.$keybindingId == keyboardHandler)\n                    _self.keyBinding.setKeyboardHandler(module && module.handler);\n                cb && cb();\n            });\n        }\n        else {\n            this.$keybindingId = null;\n            this.keyBinding.setKeyboardHandler(keyboardHandler);\n            cb && cb();\n        }\n    };\n    Editor.prototype.getKeyboardHandler = function () {\n        return this.keyBinding.getKeyboardHandler();\n    };\n    Editor.prototype.setSession = function (session) {\n        if (this.session == session)\n            return;\n        if (this.curOp)\n            this.endOperation();\n        this.curOp = {};\n        var oldSession = this.session;\n        if (oldSession) {\n            this.session.off(\"change\", this.$onDocumentChange);\n            this.session.off(\"changeMode\", this.$onChangeMode);\n            this.session.off(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n            this.session.off(\"changeTabSize\", this.$onChangeTabSize);\n            this.session.off(\"changeWrapLimit\", this.$onChangeWrapLimit);\n            this.session.off(\"changeWrapMode\", this.$onChangeWrapMode);\n            this.session.off(\"changeFold\", this.$onChangeFold);\n            this.session.off(\"changeFrontMarker\", this.$onChangeFrontMarker);\n            this.session.off(\"changeBackMarker\", this.$onChangeBackMarker);\n            this.session.off(\"changeBreakpoint\", this.$onChangeBreakpoint);\n            this.session.off(\"changeAnnotation\", this.$onChangeAnnotation);\n            this.session.off(\"changeOverwrite\", this.$onCursorChange);\n            this.session.off(\"changeScrollTop\", this.$onScrollTopChange);\n            this.session.off(\"changeScrollLeft\", this.$onScrollLeftChange);\n            this.session.off(\"startOperation\", this.$onStartOperation);\n            this.session.off(\"endOperation\", this.$onEndOperation);\n            var selection = this.session.getSelection();\n            selection.off(\"changeCursor\", this.$onCursorChange);\n            selection.off(\"changeSelection\", this.$onSelectionChange);\n        }\n        this.session = session;\n        if (session) {\n            this.$onDocumentChange = this.onDocumentChange.bind(this);\n            session.on(\"change\", this.$onDocumentChange);\n            this.renderer.setSession(session);\n            this.$onChangeMode = this.onChangeMode.bind(this);\n            session.on(\"changeMode\", this.$onChangeMode);\n            this.$onTokenizerUpdate = this.onTokenizerUpdate.bind(this);\n            session.on(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n            this.$onChangeTabSize = this.renderer.onChangeTabSize.bind(this.renderer);\n            session.on(\"changeTabSize\", this.$onChangeTabSize);\n            this.$onChangeWrapLimit = this.onChangeWrapLimit.bind(this);\n            session.on(\"changeWrapLimit\", this.$onChangeWrapLimit);\n            this.$onChangeWrapMode = this.onChangeWrapMode.bind(this);\n            session.on(\"changeWrapMode\", this.$onChangeWrapMode);\n            this.$onChangeFold = this.onChangeFold.bind(this);\n            session.on(\"changeFold\", this.$onChangeFold);\n            this.$onChangeFrontMarker = this.onChangeFrontMarker.bind(this);\n            this.session.on(\"changeFrontMarker\", this.$onChangeFrontMarker);\n            this.$onChangeBackMarker = this.onChangeBackMarker.bind(this);\n            this.session.on(\"changeBackMarker\", this.$onChangeBackMarker);\n            this.$onChangeBreakpoint = this.onChangeBreakpoint.bind(this);\n            this.session.on(\"changeBreakpoint\", this.$onChangeBreakpoint);\n            this.$onChangeAnnotation = this.onChangeAnnotation.bind(this);\n            this.session.on(\"changeAnnotation\", this.$onChangeAnnotation);\n            this.$onCursorChange = this.onCursorChange.bind(this);\n            this.session.on(\"changeOverwrite\", this.$onCursorChange);\n            this.$onScrollTopChange = this.onScrollTopChange.bind(this);\n            this.session.on(\"changeScrollTop\", this.$onScrollTopChange);\n            this.$onScrollLeftChange = this.onScrollLeftChange.bind(this);\n            this.session.on(\"changeScrollLeft\", this.$onScrollLeftChange);\n            this.selection = session.getSelection();\n            this.selection.on(\"changeCursor\", this.$onCursorChange);\n            this.$onSelectionChange = this.onSelectionChange.bind(this);\n            this.selection.on(\"changeSelection\", this.$onSelectionChange);\n            this.$onStartOperation = this.onStartOperation.bind(this);\n            this.session.on(\"startOperation\", this.$onStartOperation);\n            this.$onEndOperation = this.onEndOperation.bind(this);\n            this.session.on(\"endOperation\", this.$onEndOperation);\n            this.onChangeMode();\n            this.onCursorChange();\n            this.onScrollTopChange();\n            this.onScrollLeftChange();\n            this.onSelectionChange();\n            this.onChangeFrontMarker();\n            this.onChangeBackMarker();\n            this.onChangeBreakpoint();\n            this.onChangeAnnotation();\n            this.session.getUseWrapMode() && this.renderer.adjustWrapLimit();\n            this.renderer.updateFull();\n        }\n        else {\n            this.selection = null;\n            this.renderer.setSession(session);\n        }\n        this._signal(\"changeSession\", {\n            session: session,\n            oldSession: oldSession\n        });\n        this.curOp = null;\n        oldSession && oldSession._signal(\"changeEditor\", { oldEditor: this });\n        if (oldSession)\n            oldSession.$editor = null;\n        session && session._signal(\"changeEditor\", { editor: this });\n        if (session)\n            session.$editor = this;\n        if (session && !session.destroyed)\n            session.bgTokenizer.scheduleStart();\n    };\n    Editor.prototype.getSession = function () {\n        return this.session;\n    };\n    Editor.prototype.setValue = function (val, cursorPos) {\n        this.session.doc.setValue(val);\n        if (!cursorPos)\n            this.selectAll();\n        else if (cursorPos == 1)\n            this.navigateFileEnd();\n        else if (cursorPos == -1)\n            this.navigateFileStart();\n        return val;\n    };\n    Editor.prototype.getValue = function () {\n        return this.session.getValue();\n    };\n    Editor.prototype.getSelection = function () {\n        return this.selection;\n    };\n    Editor.prototype.resize = function (force) {\n        this.renderer.onResize(force);\n    };\n    Editor.prototype.setTheme = function (theme, cb) {\n        this.renderer.setTheme(theme, cb);\n    };\n    Editor.prototype.getTheme = function () {\n        return this.renderer.getTheme();\n    };\n    Editor.prototype.setStyle = function (style, incluude) {\n        this.renderer.setStyle(style, incluude);\n    };\n    Editor.prototype.unsetStyle = function (style) {\n        this.renderer.unsetStyle(style);\n    };\n    Editor.prototype.getFontSize = function () {\n        return this.getOption(\"fontSize\") ||\n            dom.computedStyle(this.container).fontSize;\n    };\n    Editor.prototype.setFontSize = function (size) {\n        this.setOption(\"fontSize\", size);\n    };\n    Editor.prototype.$highlightBrackets = function () {\n        if (this.$highlightPending) {\n            return;\n        }\n        var self = this;\n        this.$highlightPending = true;\n        setTimeout(function () {\n            self.$highlightPending = false;\n            var session = self.session;\n            if (!session || session.destroyed)\n                return;\n            if (session.$bracketHighlight) {\n                session.$bracketHighlight.markerIds.forEach(function (id) {\n                    session.removeMarker(id);\n                });\n                session.$bracketHighlight = null;\n            }\n            var pos = self.getCursorPosition();\n            var handler = self.getKeyboardHandler();\n            var isBackwards = handler && handler.$getDirectionForHighlight && handler.$getDirectionForHighlight(self);\n            var ranges = session.getMatchingBracketRanges(pos, isBackwards);\n            if (!ranges) {\n                var iterator = new TokenIterator(session, pos.row, pos.column);\n                var token = iterator.getCurrentToken();\n                if (token && /\\b(?:tag-open|tag-name)/.test(token.type)) {\n                    var tagNamesRanges = session.getMatchingTags(pos);\n                    if (tagNamesRanges) {\n                        ranges = [\n                            tagNamesRanges.openTagName.isEmpty() ? tagNamesRanges.openTag : tagNamesRanges.openTagName,\n                            tagNamesRanges.closeTagName.isEmpty() ? tagNamesRanges.closeTag : tagNamesRanges.closeTagName\n                        ];\n                    }\n                }\n            }\n            if (!ranges && session.$mode.getMatching)\n                ranges = session.$mode.getMatching(self.session);\n            if (!ranges) {\n                if (self.getHighlightIndentGuides())\n                    self.renderer.$textLayer.$highlightIndentGuide();\n                return;\n            }\n            var markerType = \"ace_bracket\";\n            if (!Array.isArray(ranges)) {\n                ranges = [ranges];\n            }\n            else if (ranges.length == 1) {\n                markerType = \"ace_error_bracket\";\n            }\n            if (ranges.length == 2) {\n                if (Range.comparePoints(ranges[0].end, ranges[1].start) == 0)\n                    ranges = [Range.fromPoints(ranges[0].start, ranges[1].end)];\n                else if (Range.comparePoints(ranges[0].start, ranges[1].end) == 0)\n                    ranges = [Range.fromPoints(ranges[1].start, ranges[0].end)];\n            }\n            session.$bracketHighlight = {\n                ranges: ranges,\n                markerIds: ranges.map(function (range) {\n                    return session.addMarker(range, markerType, \"text\");\n                })\n            };\n            if (self.getHighlightIndentGuides())\n                self.renderer.$textLayer.$highlightIndentGuide();\n        }, 50);\n    };\n    Editor.prototype.focus = function () {\n        this.textInput.focus();\n    };\n    Editor.prototype.isFocused = function () {\n        return this.textInput.isFocused();\n    };\n    Editor.prototype.blur = function () {\n        this.textInput.blur();\n    };\n    Editor.prototype.onFocus = function (e) {\n        if (this.$isFocused)\n            return;\n        this.$isFocused = true;\n        this.renderer.showCursor();\n        this.renderer.visualizeFocus();\n        this._emit(\"focus\", e);\n    };\n    Editor.prototype.onBlur = function (e) {\n        if (!this.$isFocused)\n            return;\n        this.$isFocused = false;\n        this.renderer.hideCursor();\n        this.renderer.visualizeBlur();\n        this._emit(\"blur\", e);\n    };\n    Editor.prototype.$cursorChange = function () {\n        this.renderer.updateCursor();\n        this.$highlightBrackets();\n        this.$updateHighlightActiveLine();\n    };\n    Editor.prototype.onDocumentChange = function (delta) {\n        var wrap = this.session.$useWrapMode;\n        var lastRow = (delta.start.row == delta.end.row ? delta.end.row : Infinity);\n        this.renderer.updateLines(delta.start.row, lastRow, wrap);\n        this._signal(\"change\", delta);\n        this.$cursorChange();\n    };\n    Editor.prototype.onTokenizerUpdate = function (e) {\n        var rows = e.data;\n        this.renderer.updateLines(rows.first, rows.last);\n    };\n    Editor.prototype.onScrollTopChange = function () {\n        this.renderer.scrollToY(this.session.getScrollTop());\n    };\n    Editor.prototype.onScrollLeftChange = function () {\n        this.renderer.scrollToX(this.session.getScrollLeft());\n    };\n    Editor.prototype.onCursorChange = function () {\n        this.$cursorChange();\n        this._signal(\"changeSelection\");\n    };\n    Editor.prototype.$updateHighlightActiveLine = function () {\n        var session = this.getSession();\n        var highlight;\n        if (this.$highlightActiveLine) {\n            if (this.$selectionStyle != \"line\" || !this.selection.isMultiLine())\n                highlight = this.getCursorPosition();\n            if (this.renderer.theme && this.renderer.theme.$selectionColorConflict && !this.selection.isEmpty())\n                highlight = false;\n            if (this.renderer.$maxLines && this.session.getLength() === 1 && !(this.renderer.$minLines > 1))\n                highlight = false;\n        }\n        if (session.$highlightLineMarker && !highlight) {\n            session.removeMarker(session.$highlightLineMarker.id);\n            session.$highlightLineMarker = null;\n        }\n        else if (!session.$highlightLineMarker && highlight) {\n            var range = new Range(highlight.row, highlight.column, highlight.row, Infinity);\n            range.id = session.addMarker(range, \"ace_active-line\", \"screenLine\");\n            session.$highlightLineMarker = range;\n        }\n        else if (highlight) {\n            session.$highlightLineMarker.start.row = highlight.row;\n            session.$highlightLineMarker.end.row = highlight.row;\n            session.$highlightLineMarker.start.column = highlight.column;\n            session._signal(\"changeBackMarker\");\n        }\n    };\n    Editor.prototype.onSelectionChange = function (e) {\n        var session = this.session;\n        if (session.$selectionMarker) {\n            session.removeMarker(session.$selectionMarker);\n        }\n        session.$selectionMarker = null;\n        if (!this.selection.isEmpty()) {\n            var range = this.selection.getRange();\n            var style = this.getSelectionStyle();\n            session.$selectionMarker = session.addMarker(range, \"ace_selection\", style);\n        }\n        else {\n            this.$updateHighlightActiveLine();\n        }\n        var re = this.$highlightSelectedWord && this.$getSelectionHighLightRegexp();\n        this.session.highlight(re);\n        this._signal(\"changeSelection\");\n    };\n    Editor.prototype.$getSelectionHighLightRegexp = function () {\n        var session = this.session;\n        var selection = this.getSelectionRange();\n        if (selection.isEmpty() || selection.isMultiLine())\n            return;\n        var startColumn = selection.start.column;\n        var endColumn = selection.end.column;\n        var line = session.getLine(selection.start.row);\n        var needle = line.substring(startColumn, endColumn);\n        if (needle.length > 5000 || !/[\\w\\d]/.test(needle))\n            return;\n        var re = this.$search.$assembleRegExp({\n            wholeWord: true,\n            caseSensitive: true,\n            needle: needle\n        });\n        var wordWithBoundary = line.substring(startColumn - 1, endColumn + 1);\n        if (!re.test(wordWithBoundary))\n            return;\n        return re;\n    };\n    Editor.prototype.onChangeFrontMarker = function () {\n        this.renderer.updateFrontMarkers();\n    };\n    Editor.prototype.onChangeBackMarker = function () {\n        this.renderer.updateBackMarkers();\n    };\n    Editor.prototype.onChangeBreakpoint = function () {\n        this.renderer.updateBreakpoints();\n    };\n    Editor.prototype.onChangeAnnotation = function () {\n        this.renderer.setAnnotations(this.session.getAnnotations());\n    };\n    Editor.prototype.onChangeMode = function (e) {\n        this.renderer.updateText();\n        this._emit(\"changeMode\", e);\n    };\n    Editor.prototype.onChangeWrapLimit = function () {\n        this.renderer.updateFull();\n    };\n    Editor.prototype.onChangeWrapMode = function () {\n        this.renderer.onResize(true);\n    };\n    Editor.prototype.onChangeFold = function () {\n        this.$updateHighlightActiveLine();\n        this.renderer.updateFull();\n    };\n    Editor.prototype.getSelectedText = function () {\n        return this.session.getTextRange(this.getSelectionRange());\n    };\n    Editor.prototype.getCopyText = function () {\n        var text = this.getSelectedText();\n        var nl = this.session.doc.getNewLineCharacter();\n        var copyLine = false;\n        if (!text && this.$copyWithEmptySelection) {\n            copyLine = true;\n            var ranges = this.selection.getAllRanges();\n            for (var i = 0; i < ranges.length; i++) {\n                var range = ranges[i];\n                if (i && ranges[i - 1].start.row == range.start.row)\n                    continue;\n                text += this.session.getLine(range.start.row) + nl;\n            }\n        }\n        var e = { text: text };\n        this._signal(\"copy\", e);\n        clipboard.lineMode = copyLine ? e.text : false;\n        return e.text;\n    };\n    Editor.prototype.onCopy = function () {\n        this.commands.exec(\"copy\", this);\n    };\n    Editor.prototype.onCut = function () {\n        this.commands.exec(\"cut\", this);\n    };\n    Editor.prototype.onPaste = function (text, event) {\n        var e = { text: text, event: event };\n        this.commands.exec(\"paste\", this, e);\n    };\n    Editor.prototype.$handlePaste = function (e) {\n        if (typeof e == \"string\")\n            e = { text: e };\n        this._signal(\"paste\", e);\n        var text = e.text;\n        var lineMode = text === clipboard.lineMode;\n        var session = this.session;\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode) {\n            if (lineMode)\n                session.insert({ row: this.selection.lead.row, column: 0 }, text);\n            else\n                this.insert(text);\n        }\n        else if (lineMode) {\n            this.selection.rangeList.ranges.forEach(function (range) {\n                session.insert({ row: range.start.row, column: 0 }, text);\n            });\n        }\n        else {\n            var lines = text.split(/\\r\\n|\\r|\\n/);\n            var ranges = this.selection.rangeList.ranges;\n            var isFullLine = lines.length == 2 && (!lines[0] || !lines[1]);\n            if (lines.length != ranges.length || isFullLine)\n                return this.commands.exec(\"insertstring\", this, text);\n            for (var i = ranges.length; i--;) {\n                var range = ranges[i];\n                if (!range.isEmpty())\n                    session.remove(range);\n                session.insert(range.start, lines[i]);\n            }\n        }\n    };\n    Editor.prototype.execCommand = function (command, args) {\n        return this.commands.exec(command, this, args);\n    };\n    Editor.prototype.insert = function (text, pasted) {\n        var session = this.session;\n        var mode = session.getMode();\n        var cursor = this.getCursorPosition();\n        if (this.getBehavioursEnabled() && !pasted) {\n            var transform = mode.transformAction(session.getState(cursor.row), 'insertion', this, session, text);\n            if (transform) {\n                if (text !== transform.text) {\n                    if (!this.inVirtualSelectionMode) {\n                        this.session.mergeUndoDeltas = false;\n                        this.mergeNextCommand = false;\n                    }\n                }\n                text = transform.text;\n            }\n        }\n        if (text == \"\\t\")\n            text = this.session.getTabString();\n        if (!this.selection.isEmpty()) {\n            var range = this.getSelectionRange();\n            cursor = this.session.remove(range);\n            this.clearSelection();\n        }\n        else if (this.session.getOverwrite() && text.indexOf(\"\\n\") == -1) {\n            var range = Range.fromPoints(cursor, cursor);\n            range.end.column += text.length;\n            this.session.remove(range);\n        }\n        if (text == \"\\n\" || text == \"\\r\\n\") {\n            var line = session.getLine(cursor.row);\n            if (cursor.column > line.search(/\\S|$/)) {\n                var d = line.substr(cursor.column).search(/\\S|$/);\n                session.doc.removeInLine(cursor.row, cursor.column, cursor.column + d);\n            }\n        }\n        this.clearSelection();\n        var start = cursor.column;\n        var lineState = session.getState(cursor.row);\n        var line = session.getLine(cursor.row);\n        var shouldOutdent = mode.checkOutdent(lineState, line, text);\n        session.insert(cursor, text);\n        if (transform && transform.selection) {\n            if (transform.selection.length == 2) { // Transform relative to the current column\n                this.selection.setSelectionRange(new Range(cursor.row, start + transform.selection[0], cursor.row, start + transform.selection[1]));\n            }\n            else { // Transform relative to the current row.\n                this.selection.setSelectionRange(new Range(cursor.row + transform.selection[0], transform.selection[1], cursor.row + transform.selection[2], transform.selection[3]));\n            }\n        }\n        if (this.$enableAutoIndent) {\n            if (session.getDocument().isNewLine(text)) {\n                var lineIndent = mode.getNextLineIndent(lineState, line.slice(0, cursor.column), session.getTabString());\n                session.insert({ row: cursor.row + 1, column: 0 }, lineIndent);\n            }\n            if (shouldOutdent)\n                mode.autoOutdent(lineState, session, cursor.row);\n        }\n    };\n    Editor.prototype.autoIndent = function () {\n        var session = this.session;\n        var mode = session.getMode();\n        var ranges = this.selection.isEmpty()\n            ? [new Range(0, 0, session.doc.getLength() - 1, 0)]\n            : this.selection.getAllRanges();\n        var prevLineState = \"\";\n        var prevLine = \"\";\n        var lineIndent = \"\";\n        var tab = session.getTabString();\n        for (var i = 0; i < ranges.length; i++) {\n            var startRow = ranges[i].start.row;\n            var endRow = ranges[i].end.row;\n            for (var row = startRow; row <= endRow; row++) {\n                if (row > 0) {\n                    prevLineState = session.getState(row - 1);\n                    prevLine = session.getLine(row - 1);\n                    lineIndent = mode.getNextLineIndent(prevLineState, prevLine, tab);\n                }\n                var line = session.getLine(row);\n                var currIndent = mode.$getIndent(line);\n                if (lineIndent !== currIndent) {\n                    if (currIndent.length > 0) {\n                        var range = new Range(row, 0, row, currIndent.length);\n                        session.remove(range);\n                    }\n                    if (lineIndent.length > 0) {\n                        session.insert({ row: row, column: 0 }, lineIndent);\n                    }\n                }\n                mode.autoOutdent(prevLineState, session, row);\n            }\n        }\n    };\n    Editor.prototype.onTextInput = function (text, composition) {\n        if (!composition)\n            return this.keyBinding.onTextInput(text);\n        this.startOperation({ command: { name: \"insertstring\" } });\n        var applyComposition = this.applyComposition.bind(this, text, composition);\n        if (this.selection.rangeCount)\n            this.forEachSelection(applyComposition);\n        else\n            applyComposition();\n        this.endOperation();\n    };\n    Editor.prototype.applyComposition = function (text, composition) {\n        if (composition.extendLeft || composition.extendRight) {\n            var r = this.selection.getRange();\n            r.start.column -= composition.extendLeft;\n            r.end.column += composition.extendRight;\n            if (r.start.column < 0) {\n                r.start.row--;\n                r.start.column += this.session.getLine(r.start.row).length + 1;\n            }\n            this.selection.setRange(r);\n            if (!text && !r.isEmpty())\n                this.remove();\n        }\n        if (text || !this.selection.isEmpty())\n            this.insert(text, true);\n        if (composition.restoreStart || composition.restoreEnd) {\n            var r = this.selection.getRange();\n            r.start.column -= composition.restoreStart;\n            r.end.column -= composition.restoreEnd;\n            this.selection.setRange(r);\n        }\n    };\n    Editor.prototype.onCommandKey = function (e, hashId, keyCode) {\n        return this.keyBinding.onCommandKey(e, hashId, keyCode);\n    };\n    Editor.prototype.setOverwrite = function (overwrite) {\n        this.session.setOverwrite(overwrite);\n    };\n    Editor.prototype.getOverwrite = function () {\n        return this.session.getOverwrite();\n    };\n    Editor.prototype.toggleOverwrite = function () {\n        this.session.toggleOverwrite();\n    };\n    Editor.prototype.setScrollSpeed = function (speed) {\n        this.setOption(\"scrollSpeed\", speed);\n    };\n    Editor.prototype.getScrollSpeed = function () {\n        return this.getOption(\"scrollSpeed\");\n    };\n    Editor.prototype.setDragDelay = function (dragDelay) {\n        this.setOption(\"dragDelay\", dragDelay);\n    };\n    Editor.prototype.getDragDelay = function () {\n        return this.getOption(\"dragDelay\");\n    };\n    Editor.prototype.setSelectionStyle = function (val) {\n        this.setOption(\"selectionStyle\", val);\n    };\n    Editor.prototype.getSelectionStyle = function () {\n        return this.getOption(\"selectionStyle\");\n    };\n    Editor.prototype.setHighlightActiveLine = function (shouldHighlight) {\n        this.setOption(\"highlightActiveLine\", shouldHighlight);\n    };\n    Editor.prototype.getHighlightActiveLine = function () {\n        return this.getOption(\"highlightActiveLine\");\n    };\n    Editor.prototype.setHighlightGutterLine = function (shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    };\n    Editor.prototype.getHighlightGutterLine = function () {\n        return this.getOption(\"highlightGutterLine\");\n    };\n    Editor.prototype.setHighlightSelectedWord = function (shouldHighlight) {\n        this.setOption(\"highlightSelectedWord\", shouldHighlight);\n    };\n    Editor.prototype.getHighlightSelectedWord = function () {\n        return this.$highlightSelectedWord;\n    };\n    Editor.prototype.setAnimatedScroll = function (shouldAnimate) {\n        this.renderer.setAnimatedScroll(shouldAnimate);\n    };\n    Editor.prototype.getAnimatedScroll = function () {\n        return this.renderer.getAnimatedScroll();\n    };\n    Editor.prototype.setShowInvisibles = function (showInvisibles) {\n        this.renderer.setShowInvisibles(showInvisibles);\n    };\n    Editor.prototype.getShowInvisibles = function () {\n        return this.renderer.getShowInvisibles();\n    };\n    Editor.prototype.setDisplayIndentGuides = function (display) {\n        this.renderer.setDisplayIndentGuides(display);\n    };\n    Editor.prototype.getDisplayIndentGuides = function () {\n        return this.renderer.getDisplayIndentGuides();\n    };\n    Editor.prototype.setHighlightIndentGuides = function (highlight) {\n        this.renderer.setHighlightIndentGuides(highlight);\n    };\n    Editor.prototype.getHighlightIndentGuides = function () {\n        return this.renderer.getHighlightIndentGuides();\n    };\n    Editor.prototype.setShowPrintMargin = function (showPrintMargin) {\n        this.renderer.setShowPrintMargin(showPrintMargin);\n    };\n    Editor.prototype.getShowPrintMargin = function () {\n        return this.renderer.getShowPrintMargin();\n    };\n    Editor.prototype.setPrintMarginColumn = function (showPrintMargin) {\n        this.renderer.setPrintMarginColumn(showPrintMargin);\n    };\n    Editor.prototype.getPrintMarginColumn = function () {\n        return this.renderer.getPrintMarginColumn();\n    };\n    Editor.prototype.setReadOnly = function (readOnly) {\n        this.setOption(\"readOnly\", readOnly);\n    };\n    Editor.prototype.getReadOnly = function () {\n        return this.getOption(\"readOnly\");\n    };\n    Editor.prototype.setBehavioursEnabled = function (enabled) {\n        this.setOption(\"behavioursEnabled\", enabled);\n    };\n    Editor.prototype.getBehavioursEnabled = function () {\n        return this.getOption(\"behavioursEnabled\");\n    };\n    Editor.prototype.setWrapBehavioursEnabled = function (enabled) {\n        this.setOption(\"wrapBehavioursEnabled\", enabled);\n    };\n    Editor.prototype.getWrapBehavioursEnabled = function () {\n        return this.getOption(\"wrapBehavioursEnabled\");\n    };\n    Editor.prototype.setShowFoldWidgets = function (show) {\n        this.setOption(\"showFoldWidgets\", show);\n    };\n    Editor.prototype.getShowFoldWidgets = function () {\n        return this.getOption(\"showFoldWidgets\");\n    };\n    Editor.prototype.setFadeFoldWidgets = function (fade) {\n        this.setOption(\"fadeFoldWidgets\", fade);\n    };\n    Editor.prototype.getFadeFoldWidgets = function () {\n        return this.getOption(\"fadeFoldWidgets\");\n    };\n    Editor.prototype.remove = function (dir) {\n        if (this.selection.isEmpty()) {\n            if (dir == \"left\")\n                this.selection.selectLeft();\n            else\n                this.selection.selectRight();\n        }\n        var range = this.getSelectionRange();\n        if (this.getBehavioursEnabled()) {\n            var session = this.session;\n            var state = session.getState(range.start.row);\n            var new_range = session.getMode().transformAction(state, 'deletion', this, session, range);\n            if (range.end.column === 0) {\n                var text = session.getTextRange(range);\n                if (text[text.length - 1] == \"\\n\") {\n                    var line = session.getLine(range.end.row);\n                    if (/^\\s+$/.test(line)) {\n                        range.end.column = line.length;\n                    }\n                }\n            }\n            if (new_range)\n                range = new_range;\n        }\n        this.session.remove(range);\n        this.clearSelection();\n    };\n    Editor.prototype.removeWordRight = function () {\n        if (this.selection.isEmpty())\n            this.selection.selectWordRight();\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    Editor.prototype.removeWordLeft = function () {\n        if (this.selection.isEmpty())\n            this.selection.selectWordLeft();\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    Editor.prototype.removeToLineStart = function () {\n        if (this.selection.isEmpty())\n            this.selection.selectLineStart();\n        if (this.selection.isEmpty())\n            this.selection.selectLeft();\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    Editor.prototype.removeToLineEnd = function () {\n        if (this.selection.isEmpty())\n            this.selection.selectLineEnd();\n        var range = this.getSelectionRange();\n        if (range.start.column == range.end.column && range.start.row == range.end.row) {\n            range.end.column = 0;\n            range.end.row++;\n        }\n        this.session.remove(range);\n        this.clearSelection();\n    };\n    Editor.prototype.splitLine = function () {\n        if (!this.selection.isEmpty()) {\n            this.session.remove(this.getSelectionRange());\n            this.clearSelection();\n        }\n        var cursor = this.getCursorPosition();\n        this.insert(\"\\n\");\n        this.moveCursorToPosition(cursor);\n    };\n    Editor.prototype.setGhostText = function (text, position) {\n        this.renderer.setGhostText(text, position);\n    };\n    Editor.prototype.removeGhostText = function () {\n        this.renderer.removeGhostText();\n    };\n    Editor.prototype.transposeLetters = function () {\n        if (!this.selection.isEmpty()) {\n            return;\n        }\n        var cursor = this.getCursorPosition();\n        var column = cursor.column;\n        if (column === 0)\n            return;\n        var line = this.session.getLine(cursor.row);\n        var swap, range;\n        if (column < line.length) {\n            swap = line.charAt(column) + line.charAt(column - 1);\n            range = new Range(cursor.row, column - 1, cursor.row, column + 1);\n        }\n        else {\n            swap = line.charAt(column - 1) + line.charAt(column - 2);\n            range = new Range(cursor.row, column - 2, cursor.row, column);\n        }\n        this.session.replace(range, swap);\n        this.session.selection.moveToPosition(range.end);\n    };\n    Editor.prototype.toLowerCase = function () {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toLowerCase());\n        this.selection.setSelectionRange(originalRange);\n    };\n    Editor.prototype.toUpperCase = function () {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toUpperCase());\n        this.selection.setSelectionRange(originalRange);\n    };\n    Editor.prototype.indent = function () {\n        var session = this.session;\n        var range = this.getSelectionRange();\n        if (range.start.row < range.end.row) {\n            var rows = this.$getSelectedRows();\n            session.indentRows(rows.first, rows.last, \"\\t\");\n            return;\n        }\n        else if (range.start.column < range.end.column) {\n            var text = session.getTextRange(range);\n            if (!/^\\s+$/.test(text)) {\n                var rows = this.$getSelectedRows();\n                session.indentRows(rows.first, rows.last, \"\\t\");\n                return;\n            }\n        }\n        var line = session.getLine(range.start.row);\n        var position = range.start;\n        var size = session.getTabSize();\n        var column = session.documentToScreenColumn(position.row, position.column);\n        if (this.session.getUseSoftTabs()) {\n            var count = (size - column % size);\n            var indentString = lang.stringRepeat(\" \", count);\n        }\n        else {\n            var count = column % size;\n            while (line[range.start.column - 1] == \" \" && count) {\n                range.start.column--;\n                count--;\n            }\n            this.selection.setSelectionRange(range);\n            indentString = \"\\t\";\n        }\n        return this.insert(indentString);\n    };\n    Editor.prototype.blockIndent = function () {\n        var rows = this.$getSelectedRows();\n        this.session.indentRows(rows.first, rows.last, \"\\t\");\n    };\n    Editor.prototype.blockOutdent = function () {\n        var selection = this.session.getSelection();\n        this.session.outdentRows(selection.getRange());\n    };\n    Editor.prototype.sortLines = function () {\n        var rows = this.$getSelectedRows();\n        var session = this.session;\n        var lines = [];\n        for (var i = rows.first; i <= rows.last; i++)\n            lines.push(session.getLine(i));\n        lines.sort(function (a, b) {\n            if (a.toLowerCase() < b.toLowerCase())\n                return -1;\n            if (a.toLowerCase() > b.toLowerCase())\n                return 1;\n            return 0;\n        });\n        var deleteRange = new Range(0, 0, 0, 0);\n        for (var i = rows.first; i <= rows.last; i++) {\n            var line = session.getLine(i);\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            deleteRange.end.column = line.length;\n            session.replace(deleteRange, lines[i - rows.first]);\n        }\n    };\n    Editor.prototype.toggleCommentLines = function () {\n        var state = this.session.getState(this.getCursorPosition().row);\n        var rows = this.$getSelectedRows();\n        this.session.getMode().toggleCommentLines(state, this.session, rows.first, rows.last);\n    };\n    Editor.prototype.toggleBlockComment = function () {\n        var cursor = this.getCursorPosition();\n        var state = this.session.getState(cursor.row);\n        var range = this.getSelectionRange();\n        this.session.getMode().toggleBlockComment(state, this.session, range, cursor);\n    };\n    Editor.prototype.getNumberAt = function (row, column) {\n        var _numberRx = /[\\-]?[0-9]+(?:\\.[0-9]+)?/g;\n        _numberRx.lastIndex = 0;\n        var s = this.session.getLine(row);\n        while (_numberRx.lastIndex < column) {\n            var m = _numberRx.exec(s);\n            if (m.index <= column && m.index + m[0].length >= column) {\n                var number = {\n                    value: m[0],\n                    start: m.index,\n                    end: m.index + m[0].length\n                };\n                return number;\n            }\n        }\n        return null;\n    };\n    Editor.prototype.modifyNumber = function (amount) {\n        var row = this.selection.getCursor().row;\n        var column = this.selection.getCursor().column;\n        var charRange = new Range(row, column - 1, row, column);\n        var c = this.session.getTextRange(charRange);\n        if (!isNaN(parseFloat(c)) && isFinite(c)) {\n            var nr = this.getNumberAt(row, column);\n            if (nr) {\n                var fp = nr.value.indexOf(\".\") >= 0 ? nr.start + nr.value.indexOf(\".\") + 1 : nr.end;\n                var decimals = nr.start + nr.value.length - fp;\n                var t = parseFloat(nr.value);\n                t *= Math.pow(10, decimals);\n                if (fp !== nr.end && column < fp) {\n                    amount *= Math.pow(10, nr.end - column - 1);\n                }\n                else {\n                    amount *= Math.pow(10, nr.end - column);\n                }\n                t += amount;\n                t /= Math.pow(10, decimals);\n                var nnr = t.toFixed(decimals);\n                var replaceRange = new Range(row, nr.start, row, nr.end);\n                this.session.replace(replaceRange, nnr);\n                this.moveCursorTo(row, Math.max(nr.start + 1, column + nnr.length - nr.value.length));\n            }\n        }\n        else {\n            this.toggleWord();\n        }\n    };\n    Editor.prototype.toggleWord = function () {\n        var row = this.selection.getCursor().row;\n        var column = this.selection.getCursor().column;\n        this.selection.selectWord();\n        var currentState = this.getSelectedText();\n        var currWordStart = this.selection.getWordRange().start.column;\n        var wordParts = currentState.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g, '$1 ').split(/\\s/);\n        var delta = column - currWordStart - 1;\n        if (delta < 0)\n            delta = 0;\n        var curLength = 0, itLength = 0;\n        var that = this;\n        if (currentState.match(/[A-Za-z0-9_]+/)) {\n            wordParts.forEach(function (item, i) {\n                itLength = curLength + item.length;\n                if (delta >= curLength && delta <= itLength) {\n                    currentState = item;\n                    that.selection.clearSelection();\n                    that.moveCursorTo(row, curLength + currWordStart);\n                    that.selection.selectTo(row, itLength + currWordStart);\n                }\n                curLength = itLength;\n            });\n        }\n        var wordPairs = this.$toggleWordPairs;\n        var reg;\n        for (var i = 0; i < wordPairs.length; i++) {\n            var item = wordPairs[i];\n            for (var j = 0; j <= 1; j++) {\n                var negate = +!j;\n                var firstCondition = currentState.match(new RegExp('^\\\\s?_?(' + lang.escapeRegExp(item[j]) + ')\\\\s?$', 'i'));\n                if (firstCondition) {\n                    var secondCondition = currentState.match(new RegExp('([_]|^|\\\\s)(' + lang.escapeRegExp(firstCondition[1]) + ')($|\\\\s)', 'g'));\n                    if (secondCondition) {\n                        reg = currentState.replace(new RegExp(lang.escapeRegExp(item[j]), 'i'), function (result) {\n                            var res = item[negate];\n                            if (result.toUpperCase() == result) {\n                                res = res.toUpperCase();\n                            }\n                            else if (result.charAt(0).toUpperCase() == result.charAt(0)) {\n                                res = res.substr(0, 0) + item[negate].charAt(0).toUpperCase() + res.substr(1);\n                            }\n                            return res;\n                        });\n                        this.insert(reg);\n                        reg = \"\";\n                    }\n                }\n            }\n        }\n    };\n    Editor.prototype.findLinkAt = function (row, column) {\n        var e_1, _a;\n        var line = this.session.getLine(row);\n        var wordParts = line.split(/((?:https?|ftp):\\/\\/[\\S]+)/);\n        var columnPosition = column;\n        if (columnPosition < 0)\n            columnPosition = 0;\n        var previousPosition = 0, currentPosition = 0, match;\n        try {\n            for (var wordParts_1 = __values(wordParts), wordParts_1_1 = wordParts_1.next(); !wordParts_1_1.done; wordParts_1_1 = wordParts_1.next()) {\n                var item = wordParts_1_1.value;\n                currentPosition = previousPosition + item.length;\n                if (columnPosition >= previousPosition && columnPosition <= currentPosition) {\n                    if (item.match(/((?:https?|ftp):\\/\\/[\\S]+)/)) {\n                        match = item.replace(/[\\s:.,'\";}\\]]+$/, \"\");\n                        break;\n                    }\n                }\n                previousPosition = currentPosition;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (wordParts_1_1 && !wordParts_1_1.done && (_a = wordParts_1.return)) _a.call(wordParts_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return match;\n    };\n    Editor.prototype.openLink = function () {\n        var cursor = this.selection.getCursor();\n        var url = this.findLinkAt(cursor.row, cursor.column);\n        if (url)\n            window.open(url, '_blank');\n        return url != null;\n    };\n    Editor.prototype.removeLines = function () {\n        var rows = this.$getSelectedRows();\n        this.session.removeFullLines(rows.first, rows.last);\n        this.clearSelection();\n    };\n    Editor.prototype.duplicateSelection = function () {\n        var sel = this.selection;\n        var doc = this.session;\n        var range = sel.getRange();\n        var reverse = sel.isBackwards();\n        if (range.isEmpty()) {\n            var row = range.start.row;\n            doc.duplicateLines(row, row);\n        }\n        else {\n            var point = reverse ? range.start : range.end;\n            var endPoint = doc.insert(point, doc.getTextRange(range));\n            range.start = point;\n            range.end = endPoint;\n            sel.setSelectionRange(range, reverse);\n        }\n    };\n    Editor.prototype.moveLinesDown = function () {\n        this.$moveLines(1, false);\n    };\n    Editor.prototype.moveLinesUp = function () {\n        this.$moveLines(-1, false);\n    };\n    Editor.prototype.moveText = function (range, toPosition, copy) {\n        return this.session.moveText(range, toPosition, copy);\n    };\n    Editor.prototype.copyLinesUp = function () {\n        this.$moveLines(-1, true);\n    };\n    Editor.prototype.copyLinesDown = function () {\n        this.$moveLines(1, true);\n    };\n    Editor.prototype.$moveLines = function (dir, copy) {\n        var rows, moved;\n        var selection = this.selection;\n        if (!selection.inMultiSelectMode || this.inVirtualSelectionMode) {\n            var range = selection.toOrientedRange();\n            rows = this.$getSelectedRows(range);\n            moved = this.session.$moveLines(rows.first, rows.last, copy ? 0 : dir);\n            if (copy && dir == -1)\n                moved = 0;\n            range.moveBy(moved, 0);\n            selection.fromOrientedRange(range);\n        }\n        else {\n            var ranges = selection.rangeList.ranges;\n            selection.rangeList.detach(this.session);\n            this.inVirtualSelectionMode = true;\n            var diff = 0;\n            var totalDiff = 0;\n            var l = ranges.length;\n            for (var i = 0; i < l; i++) {\n                var rangeIndex = i;\n                ranges[i].moveBy(diff, 0);\n                rows = this.$getSelectedRows(ranges[i]);\n                var first = rows.first;\n                var last = rows.last;\n                while (++i < l) {\n                    if (totalDiff)\n                        ranges[i].moveBy(totalDiff, 0);\n                    var subRows = this.$getSelectedRows(ranges[i]);\n                    if (copy && subRows.first != last)\n                        break;\n                    else if (!copy && subRows.first > last + 1)\n                        break;\n                    last = subRows.last;\n                }\n                i--;\n                diff = this.session.$moveLines(first, last, copy ? 0 : dir);\n                if (copy && dir == -1)\n                    rangeIndex = i + 1;\n                while (rangeIndex <= i) {\n                    ranges[rangeIndex].moveBy(diff, 0);\n                    rangeIndex++;\n                }\n                if (!copy)\n                    diff = 0;\n                totalDiff += diff;\n            }\n            selection.fromOrientedRange(selection.ranges[0]);\n            selection.rangeList.attach(this.session);\n            this.inVirtualSelectionMode = false;\n        }\n    };\n    Editor.prototype.$getSelectedRows = function (range) {\n        range = (range || this.getSelectionRange()).collapseRows();\n        return {\n            first: this.session.getRowFoldStart(range.start.row),\n            last: this.session.getRowFoldEnd(range.end.row)\n        };\n    };\n    Editor.prototype.onCompositionStart = function (compositionState) {\n        this.renderer.showComposition(compositionState);\n    };\n    Editor.prototype.onCompositionUpdate = function (text) {\n        this.renderer.setCompositionText(text);\n    };\n    Editor.prototype.onCompositionEnd = function () {\n        this.renderer.hideComposition();\n    };\n    Editor.prototype.getFirstVisibleRow = function () {\n        return this.renderer.getFirstVisibleRow();\n    };\n    Editor.prototype.getLastVisibleRow = function () {\n        return this.renderer.getLastVisibleRow();\n    };\n    Editor.prototype.isRowVisible = function (row) {\n        return (row >= this.getFirstVisibleRow() && row <= this.getLastVisibleRow());\n    };\n    Editor.prototype.isRowFullyVisible = function (row) {\n        return (row >= this.renderer.getFirstFullyVisibleRow() && row <= this.renderer.getLastFullyVisibleRow());\n    };\n    Editor.prototype.$getVisibleRowCount = function () {\n        return this.renderer.getScrollBottomRow() - this.renderer.getScrollTopRow() + 1;\n    };\n    Editor.prototype.$moveByPage = function (dir, select) {\n        var renderer = this.renderer;\n        var config = this.renderer.layerConfig;\n        var rows = dir * Math.floor(config.height / config.lineHeight);\n        if (select === true) {\n            this.selection.$moveSelection(function () {\n                this.moveCursorBy(rows, 0);\n            });\n        }\n        else if (select === false) {\n            this.selection.moveCursorBy(rows, 0);\n            this.selection.clearSelection();\n        }\n        var scrollTop = renderer.scrollTop;\n        renderer.scrollBy(0, rows * config.lineHeight);\n        if (select != null)\n            renderer.scrollCursorIntoView(null, 0.5);\n        renderer.animateScrolling(scrollTop);\n    };\n    Editor.prototype.selectPageDown = function () {\n        this.$moveByPage(1, true);\n    };\n    Editor.prototype.selectPageUp = function () {\n        this.$moveByPage(-1, true);\n    };\n    Editor.prototype.gotoPageDown = function () {\n        this.$moveByPage(1, false);\n    };\n    Editor.prototype.gotoPageUp = function () {\n        this.$moveByPage(-1, false);\n    };\n    Editor.prototype.scrollPageDown = function () {\n        this.$moveByPage(1);\n    };\n    Editor.prototype.scrollPageUp = function () {\n        this.$moveByPage(-1);\n    };\n    Editor.prototype.scrollToRow = function (row) {\n        this.renderer.scrollToRow(row);\n    };\n    Editor.prototype.scrollToLine = function (line, center, animate, callback) {\n        this.renderer.scrollToLine(line, center, animate, callback);\n    };\n    Editor.prototype.centerSelection = function () {\n        var range = this.getSelectionRange();\n        var pos = {\n            row: Math.floor(range.start.row + (range.end.row - range.start.row) / 2),\n            column: Math.floor(range.start.column + (range.end.column - range.start.column) / 2)\n        };\n        this.renderer.alignCursor(pos, 0.5);\n    };\n    Editor.prototype.getCursorPosition = function () {\n        return this.selection.getCursor();\n    };\n    Editor.prototype.getCursorPositionScreen = function () {\n        return this.session.documentToScreenPosition(this.getCursorPosition());\n    };\n    Editor.prototype.getSelectionRange = function () {\n        return this.selection.getRange();\n    };\n    Editor.prototype.selectAll = function () {\n        this.selection.selectAll();\n    };\n    Editor.prototype.clearSelection = function () {\n        this.selection.clearSelection();\n    };\n    Editor.prototype.moveCursorTo = function (row, column) {\n        this.selection.moveCursorTo(row, column);\n    };\n    Editor.prototype.moveCursorToPosition = function (pos) {\n        this.selection.moveCursorToPosition(pos);\n    };\n    Editor.prototype.jumpToMatching = function (select, expand) {\n        var cursor = this.getCursorPosition();\n        var iterator = new TokenIterator(this.session, cursor.row, cursor.column);\n        var prevToken = iterator.getCurrentToken();\n        var tokenCount = 0;\n        if (prevToken && prevToken.type.indexOf('tag-name') !== -1) {\n            prevToken = iterator.stepBackward();\n        }\n        var token = prevToken || iterator.stepForward();\n        if (!token)\n            return;\n        var matchType;\n        var found = false;\n        var depth = {};\n        var i = cursor.column - token.start;\n        var bracketType;\n        var brackets = {\n            \")\": \"(\",\n            \"(\": \"(\",\n            \"]\": \"[\",\n            \"[\": \"[\",\n            \"{\": \"{\",\n            \"}\": \"{\"\n        };\n        do {\n            if (token.value.match(/[{}()\\[\\]]/g)) {\n                for (; i < token.value.length && !found; i++) {\n                    if (!brackets[token.value[i]]) {\n                        continue;\n                    }\n                    bracketType = brackets[token.value[i]] + '.' + token.type.replace(\"rparen\", \"lparen\");\n                    if (isNaN(depth[bracketType])) {\n                        depth[bracketType] = 0;\n                    }\n                    switch (token.value[i]) {\n                        case '(':\n                        case '[':\n                        case '{':\n                            depth[bracketType]++;\n                            break;\n                        case ')':\n                        case ']':\n                        case '}':\n                            depth[bracketType]--;\n                            if (depth[bracketType] === -1) {\n                                matchType = 'bracket';\n                                found = true;\n                            }\n                            break;\n                    }\n                }\n            }\n            else if (token.type.indexOf('tag-name') !== -1) {\n                if (isNaN(depth[token.value])) {\n                    depth[token.value] = 0;\n                }\n                if (prevToken.value === '<' && tokenCount > 1) {\n                    depth[token.value]++;\n                }\n                else if (prevToken.value === '</') {\n                    depth[token.value]--;\n                }\n                if (depth[token.value] === -1) {\n                    matchType = 'tag';\n                    found = true;\n                }\n            }\n            if (!found) {\n                prevToken = token;\n                tokenCount++;\n                token = iterator.stepForward();\n                i = 0;\n            }\n        } while (token && !found);\n        if (!matchType)\n            return;\n        var range, pos;\n        if (matchType === 'bracket') {\n            range = this.session.getBracketRange(cursor);\n            if (!range) {\n                range = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + i - 1, iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + i - 1);\n                pos = range.start;\n                if (expand || pos.row === cursor.row && Math.abs(pos.column - cursor.column)\n                    < 2)\n                    range = this.session.getBracketRange(pos);\n            }\n        }\n        else if (matchType === 'tag') {\n            if (!token || token.type.indexOf('tag-name') === -1)\n                return;\n            range = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() - 2, iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() - 2);\n            if (range.compare(cursor.row, cursor.column) === 0) {\n                var tagsRanges = this.session.getMatchingTags(cursor);\n                if (tagsRanges) {\n                    if (tagsRanges.openTag.contains(cursor.row, cursor.column)) {\n                        range = tagsRanges.closeTag;\n                        pos = range.start;\n                    }\n                    else {\n                        range = tagsRanges.openTag;\n                        if (tagsRanges.closeTag.start.row === cursor.row && tagsRanges.closeTag.start.column\n                            === cursor.column)\n                            pos = range.end;\n                        else\n                            pos = range.start;\n                    }\n                }\n            }\n            pos = pos || range.start;\n        }\n        pos = range && range.cursor || pos;\n        if (pos) {\n            if (select) {\n                if (range && expand) {\n                    this.selection.setRange(range);\n                }\n                else if (range && range.isEqual(this.getSelectionRange())) {\n                    this.clearSelection();\n                }\n                else {\n                    this.selection.selectTo(pos.row, pos.column);\n                }\n            }\n            else {\n                this.selection.moveTo(pos.row, pos.column);\n            }\n        }\n    };\n    Editor.prototype.gotoLine = function (lineNumber, column, animate) {\n        this.selection.clearSelection();\n        this.session.unfold({ row: lineNumber - 1, column: column || 0 });\n        this.exitMultiSelectMode && this.exitMultiSelectMode();\n        this.moveCursorTo(lineNumber - 1, column || 0);\n        if (!this.isRowFullyVisible(lineNumber - 1))\n            this.scrollToLine(lineNumber - 1, true, animate);\n    };\n    Editor.prototype.navigateTo = function (row, column) {\n        this.selection.moveTo(row, column);\n    };\n    Editor.prototype.navigateUp = function (times) {\n        if (this.selection.isMultiLine() && !this.selection.isBackwards()) {\n            var selectionStart = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionStart);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(-times || -1, 0);\n    };\n    Editor.prototype.navigateDown = function (times) {\n        if (this.selection.isMultiLine() && this.selection.isBackwards()) {\n            var selectionEnd = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionEnd);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(times || 1, 0);\n    };\n    Editor.prototype.navigateLeft = function (times) {\n        if (!this.selection.isEmpty()) {\n            var selectionStart = this.getSelectionRange().start;\n            this.moveCursorToPosition(selectionStart);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorLeft();\n            }\n        }\n        this.clearSelection();\n    };\n    Editor.prototype.navigateRight = function (times) {\n        if (!this.selection.isEmpty()) {\n            var selectionEnd = this.getSelectionRange().end;\n            this.moveCursorToPosition(selectionEnd);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorRight();\n            }\n        }\n        this.clearSelection();\n    };\n    Editor.prototype.navigateLineStart = function () {\n        this.selection.moveCursorLineStart();\n        this.clearSelection();\n    };\n    Editor.prototype.navigateLineEnd = function () {\n        this.selection.moveCursorLineEnd();\n        this.clearSelection();\n    };\n    Editor.prototype.navigateFileEnd = function () {\n        this.selection.moveCursorFileEnd();\n        this.clearSelection();\n    };\n    Editor.prototype.navigateFileStart = function () {\n        this.selection.moveCursorFileStart();\n        this.clearSelection();\n    };\n    Editor.prototype.navigateWordRight = function () {\n        this.selection.moveCursorWordRight();\n        this.clearSelection();\n    };\n    Editor.prototype.navigateWordLeft = function () {\n        this.selection.moveCursorWordLeft();\n        this.clearSelection();\n    };\n    Editor.prototype.replace = function (replacement, options) {\n        if (options)\n            this.$search.set(options);\n        var range = this.$search.find(this.session);\n        var replaced = 0;\n        if (!range)\n            return replaced;\n        if (this.$tryReplace(range, replacement)) {\n            replaced = 1;\n        }\n        this.selection.setSelectionRange(range);\n        this.renderer.scrollSelectionIntoView(range.start, range.end);\n        return replaced;\n    };\n    Editor.prototype.replaceAll = function (replacement, options) {\n        if (options) {\n            this.$search.set(options);\n        }\n        var ranges = this.$search.findAll(this.session);\n        var replaced = 0;\n        if (!ranges.length)\n            return replaced;\n        var selection = this.getSelectionRange();\n        this.selection.moveTo(0, 0);\n        for (var i = ranges.length - 1; i >= 0; --i) {\n            if (this.$tryReplace(ranges[i], replacement)) {\n                replaced++;\n            }\n        }\n        this.selection.setSelectionRange(selection);\n        return replaced;\n    };\n    Editor.prototype.$tryReplace = function (range, replacement) {\n        var input = this.session.getTextRange(range);\n        replacement = this.$search.replace(input, replacement);\n        if (replacement !== null) {\n            range.end = this.session.replace(range, replacement);\n            return range;\n        }\n        else {\n            return null;\n        }\n    };\n    Editor.prototype.getLastSearchOptions = function () {\n        return this.$search.getOptions();\n    };\n    Editor.prototype.find = function (needle, options, animate) {\n        if (!options)\n            options = {};\n        if (typeof needle == \"string\" || needle instanceof RegExp)\n            options.needle = needle;\n        else if (typeof needle == \"object\")\n            oop.mixin(options, needle);\n        var range = this.selection.getRange();\n        if (options.needle == null) {\n            needle = this.session.getTextRange(range)\n                || this.$search.$options.needle;\n            if (!needle) {\n                range = this.session.getWordRange(range.start.row, range.start.column);\n                needle = this.session.getTextRange(range);\n            }\n            this.$search.set({ needle: needle });\n        }\n        this.$search.set(options);\n        if (!options.start)\n            this.$search.set({ start: range });\n        var newRange = this.$search.find(this.session);\n        if (options.preventScroll)\n            return newRange;\n        if (newRange) {\n            this.revealRange(newRange, animate);\n            return newRange;\n        }\n        if (options.backwards)\n            range.start = range.end;\n        else\n            range.end = range.start;\n        this.selection.setRange(range);\n    };\n    Editor.prototype.findNext = function (options, animate) {\n        this.find({ skipCurrent: true, backwards: false }, options, animate);\n    };\n    Editor.prototype.findPrevious = function (options, animate) {\n        this.find(options, { skipCurrent: true, backwards: true }, animate);\n    };\n    Editor.prototype.revealRange = function (range, animate) {\n        this.session.unfold(range);\n        this.selection.setSelectionRange(range);\n        var scrollTop = this.renderer.scrollTop;\n        this.renderer.scrollSelectionIntoView(range.start, range.end, 0.5);\n        if (animate !== false)\n            this.renderer.animateScrolling(scrollTop);\n    };\n    Editor.prototype.undo = function () {\n        this.session.getUndoManager().undo(this.session);\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    };\n    Editor.prototype.redo = function () {\n        this.session.getUndoManager().redo(this.session);\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    };\n    Editor.prototype.destroy = function () {\n        this.destroyed = true;\n        if (this.$toDestroy) {\n            this.$toDestroy.forEach(function (el) {\n                el.destroy();\n            });\n            this.$toDestroy = [];\n        }\n        if (this.$mouseHandler)\n            this.$mouseHandler.destroy();\n        this.renderer.destroy();\n        this._signal(\"destroy\", this);\n        if (this.session)\n            this.session.destroy();\n        if (this._$emitInputEvent)\n            this._$emitInputEvent.cancel();\n        this.removeAllListeners();\n    };\n    Editor.prototype.setAutoScrollEditorIntoView = function (enable) {\n        if (!enable)\n            return;\n        var rect;\n        var self = this;\n        var shouldScroll = false;\n        if (!this.$scrollAnchor)\n            this.$scrollAnchor = document.createElement(\"div\");\n        var scrollAnchor = this.$scrollAnchor;\n        scrollAnchor.style.cssText = \"position:absolute\";\n        this.container.insertBefore(scrollAnchor, this.container.firstChild);\n        var onChangeSelection = this.on(\"changeSelection\", function () {\n            shouldScroll = true;\n        });\n        var onBeforeRender = this.renderer.on(\"beforeRender\", function () {\n            if (shouldScroll)\n                rect = self.renderer.container.getBoundingClientRect();\n        });\n        var onAfterRender = this.renderer.on(\"afterRender\", function () {\n            if (shouldScroll && rect && (self.isFocused()\n                || self.searchBox && self.searchBox.isFocused())) {\n                var renderer = self.renderer;\n                var pos = renderer.$cursorLayer.$pixelPos;\n                var config = renderer.layerConfig;\n                var top = pos.top - config.offset;\n                if (pos.top >= 0 && top + rect.top < 0) {\n                    shouldScroll = true;\n                }\n                else if (pos.top < config.height &&\n                    pos.top + rect.top + config.lineHeight > window.innerHeight) {\n                    shouldScroll = false;\n                }\n                else {\n                    shouldScroll = null;\n                }\n                if (shouldScroll != null) {\n                    scrollAnchor.style.top = top + \"px\";\n                    scrollAnchor.style.left = pos.left + \"px\";\n                    scrollAnchor.style.height = config.lineHeight + \"px\";\n                    scrollAnchor.scrollIntoView(shouldScroll);\n                }\n                shouldScroll = rect = null;\n            }\n        });\n        this.setAutoScrollEditorIntoView = function (enable) {\n            if (enable)\n                return;\n            delete this.setAutoScrollEditorIntoView;\n            this.off(\"changeSelection\", onChangeSelection);\n            this.renderer.off(\"afterRender\", onAfterRender);\n            this.renderer.off(\"beforeRender\", onBeforeRender);\n        };\n    };\n    Editor.prototype.$resetCursorStyle = function () {\n        var style = this.$cursorStyle || \"ace\";\n        var cursorLayer = this.renderer.$cursorLayer;\n        if (!cursorLayer)\n            return;\n        cursorLayer.setSmoothBlinking(/smooth/.test(style));\n        cursorLayer.isBlinking = !this.$readOnly && style != \"wide\";\n        dom.setCssClass(cursorLayer.element, \"ace_slim-cursors\", /slim/.test(style));\n    };\n    Editor.prototype.prompt = function (message, options, callback) {\n        var editor = this;\n        config.loadModule(\"ace/ext/prompt\", function (module) {\n            module.prompt(editor, message, options, callback);\n        });\n    };\n    return Editor;\n}());\nEditor.$uid = 0;\nEditor.prototype.curOp = null;\nEditor.prototype.prevOp = {};\nEditor.prototype.$mergeableCommands = [\"backspace\", \"del\", \"insertstring\"];\nEditor.prototype.$toggleWordPairs = [\n    [\"first\", \"last\"],\n    [\"true\", \"false\"],\n    [\"yes\", \"no\"],\n    [\"width\", \"height\"],\n    [\"top\", \"bottom\"],\n    [\"right\", \"left\"],\n    [\"on\", \"off\"],\n    [\"x\", \"y\"],\n    [\"get\", \"set\"],\n    [\"max\", \"min\"],\n    [\"horizontal\", \"vertical\"],\n    [\"show\", \"hide\"],\n    [\"add\", \"remove\"],\n    [\"up\", \"down\"],\n    [\"before\", \"after\"],\n    [\"even\", \"odd\"],\n    [\"in\", \"out\"],\n    [\"inside\", \"outside\"],\n    [\"next\", \"previous\"],\n    [\"increase\", \"decrease\"],\n    [\"attach\", \"detach\"],\n    [\"&&\", \"||\"],\n    [\"==\", \"!=\"]\n];\noop.implement(Editor.prototype, EventEmitter);\nconfig.defineOptions(Editor.prototype, \"editor\", {\n    selectionStyle: {\n        set: function (style) {\n            this.onSelectionChange();\n            this._signal(\"changeSelectionStyle\", { data: style });\n        },\n        initialValue: \"line\"\n    },\n    highlightActiveLine: {\n        set: function () { this.$updateHighlightActiveLine(); },\n        initialValue: true\n    },\n    highlightSelectedWord: {\n        set: function (shouldHighlight) { this.$onSelectionChange(); },\n        initialValue: true\n    },\n    readOnly: {\n        set: function (/**@type{boolean}*/ readOnly) {\n            var _this = this;\n            this.textInput.setReadOnly(readOnly);\n            if (this.destroyed)\n                return;\n            this.$resetCursorStyle();\n            if (!this.$readOnlyCallback) {\n                this.$readOnlyCallback = function (e) {\n                    var shouldShow = false;\n                    if (e && e.type == \"keydown\") {\n                        if (e && e.key && !e.ctrlKey && !e.metaKey) {\n                            if (e.key == \" \")\n                                e.preventDefault();\n                            shouldShow = e.key.length == 1;\n                        }\n                        if (!shouldShow)\n                            return;\n                    }\n                    else if (e && e.type !== \"exec\") {\n                        shouldShow = true;\n                    }\n                    if (shouldShow) {\n                        if (!_this.hoverTooltip) {\n                            _this.hoverTooltip = new HoverTooltip();\n                        }\n                        var domNode = dom.createElement(\"div\");\n                        domNode.textContent = nls(\"editor.tooltip.disable-editing\", \"Editing is disabled\");\n                        if (!_this.hoverTooltip.isOpen) {\n                            _this.hoverTooltip.showForRange(_this, _this.getSelectionRange(), domNode);\n                        }\n                    }\n                    else if (_this.hoverTooltip && _this.hoverTooltip.isOpen) {\n                        _this.hoverTooltip.hide();\n                    }\n                };\n            }\n            var textArea = this.textInput.getElement();\n            if (readOnly) {\n                event.addListener(textArea, \"keydown\", this.$readOnlyCallback, this);\n                this.commands.on(\"exec\", this.$readOnlyCallback);\n                this.commands.on(\"commandUnavailable\", this.$readOnlyCallback);\n            }\n            else {\n                event.removeListener(textArea, \"keydown\", this.$readOnlyCallback);\n                this.commands.off(\"exec\", this.$readOnlyCallback);\n                this.commands.off(\"commandUnavailable\", this.$readOnlyCallback);\n                if (this.hoverTooltip) {\n                    this.hoverTooltip.destroy();\n                    this.hoverTooltip = null;\n                }\n            }\n        },\n        initialValue: false\n    },\n    copyWithEmptySelection: {\n        set: function (value) {\n            this.textInput.setCopyWithEmptySelection(value);\n        },\n        initialValue: false\n    },\n    cursorStyle: {\n        set: function (val) { this.$resetCursorStyle(); },\n        values: [\"ace\", \"slim\", \"smooth\", \"wide\"],\n        initialValue: \"ace\"\n    },\n    mergeUndoDeltas: {\n        values: [false, true, \"always\"],\n        initialValue: true\n    },\n    behavioursEnabled: { initialValue: true },\n    wrapBehavioursEnabled: { initialValue: true },\n    enableAutoIndent: { initialValue: true },\n    autoScrollEditorIntoView: {\n        set: function (val) { this.setAutoScrollEditorIntoView(val); }\n    },\n    keyboardHandler: {\n        set: function (val) { this.setKeyboardHandler(val); },\n        get: function () { return this.$keybindingId; },\n        handlesSet: true\n    },\n    value: {\n        set: function (val) { this.session.setValue(val); },\n        get: function () { return this.getValue(); },\n        handlesSet: true,\n        hidden: true\n    },\n    session: {\n        set: function (val) { this.setSession(val); },\n        get: function () { return this.session; },\n        handlesSet: true,\n        hidden: true\n    },\n    showLineNumbers: {\n        set: function (show) {\n            this.renderer.$gutterLayer.setShowLineNumbers(show);\n            this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER);\n            if (show && this.$relativeLineNumbers)\n                relativeNumberRenderer.attach(this);\n            else\n                relativeNumberRenderer.detach(this);\n        },\n        initialValue: true\n    },\n    relativeLineNumbers: {\n        set: function (value) {\n            if (this.$showLineNumbers && value)\n                relativeNumberRenderer.attach(this);\n            else\n                relativeNumberRenderer.detach(this);\n        }\n    },\n    placeholder: {\n        set: function (message) {\n            if (!this.$updatePlaceholder) {\n                this.$updatePlaceholder = function () {\n                    var hasValue = this.session && (this.renderer.$composition ||\n                        this.session.getLength() > 1 || this.session.getLine(0).length > 0);\n                    if (hasValue && this.renderer.placeholderNode) {\n                        this.renderer.off(\"afterRender\", this.$updatePlaceholder);\n                        dom.removeCssClass(this.container, \"ace_hasPlaceholder\");\n                        this.renderer.placeholderNode.remove();\n                        this.renderer.placeholderNode = null;\n                    }\n                    else if (!hasValue && !this.renderer.placeholderNode) {\n                        this.renderer.on(\"afterRender\", this.$updatePlaceholder);\n                        dom.addCssClass(this.container, \"ace_hasPlaceholder\");\n                        var el = dom.createElement(\"div\");\n                        el.className = \"ace_placeholder\";\n                        el.textContent = this.$placeholder || \"\";\n                        this.renderer.placeholderNode = el;\n                        this.renderer.content.appendChild(this.renderer.placeholderNode);\n                    }\n                    else if (!hasValue && this.renderer.placeholderNode) {\n                        this.renderer.placeholderNode.textContent = this.$placeholder || \"\";\n                    }\n                }.bind(this);\n                this.on(\"input\", this.$updatePlaceholder);\n            }\n            this.$updatePlaceholder();\n        }\n    },\n    enableKeyboardAccessibility: {\n        set: function (value) {\n            var blurCommand = {\n                name: \"blurTextInput\",\n                description: \"Set focus to the editor content div to allow tabbing through the page\",\n                bindKey: \"Esc\",\n                exec: function (editor) {\n                    editor.blur();\n                    editor.renderer.scroller.focus();\n                },\n                readOnly: true\n            };\n            var focusOnEnterKeyup = function (e) {\n                if (e.target == this.renderer.scroller && e.keyCode === keys['enter']) {\n                    e.preventDefault();\n                    var row = this.getCursorPosition().row;\n                    if (!this.isRowVisible(row))\n                        this.scrollToLine(row, true, true);\n                    this.focus();\n                }\n            };\n            var gutterKeyboardHandler;\n            if (value) {\n                this.renderer.enableKeyboardAccessibility = true;\n                this.renderer.keyboardFocusClassName = \"ace_keyboard-focus\";\n                this.textInput.getElement().setAttribute(\"tabindex\", -1);\n                this.textInput.setNumberOfExtraLines(useragent.isWin ? 3 : 0);\n                this.renderer.scroller.setAttribute(\"tabindex\", 0);\n                this.renderer.scroller.setAttribute(\"role\", \"group\");\n                this.renderer.scroller.setAttribute(\"aria-roledescription\", nls(\"editor.scroller.aria-roledescription\", \"editor\"));\n                this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName);\n                this.renderer.scroller.setAttribute(\"aria-label\", nls(\"editor.scroller.aria-label\", \"Editor content, press Enter to start editing, press Escape to exit\"));\n                this.renderer.scroller.addEventListener(\"keyup\", focusOnEnterKeyup.bind(this));\n                this.commands.addCommand(blurCommand);\n                this.renderer.$gutter.setAttribute(\"tabindex\", 0);\n                this.renderer.$gutter.setAttribute(\"aria-hidden\", false);\n                this.renderer.$gutter.setAttribute(\"role\", \"group\");\n                this.renderer.$gutter.setAttribute(\"aria-roledescription\", nls(\"editor.gutter.aria-roledescription\", \"editor gutter\"));\n                this.renderer.$gutter.setAttribute(\"aria-label\", nls(\"editor.gutter.aria-label\", \"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit\"));\n                this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName);\n                this.renderer.content.setAttribute(\"aria-hidden\", true);\n                if (!gutterKeyboardHandler)\n                    gutterKeyboardHandler = new GutterKeyboardHandler(this);\n                gutterKeyboardHandler.addListener();\n                this.textInput.setAriaOptions({\n                    setLabel: true\n                });\n            }\n            else {\n                this.renderer.enableKeyboardAccessibility = false;\n                this.textInput.getElement().setAttribute(\"tabindex\", 0);\n                this.textInput.setNumberOfExtraLines(0);\n                this.renderer.scroller.setAttribute(\"tabindex\", -1);\n                this.renderer.scroller.removeAttribute(\"role\");\n                this.renderer.scroller.removeAttribute(\"aria-roledescription\");\n                this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName);\n                this.renderer.scroller.removeAttribute(\"aria-label\");\n                this.renderer.scroller.removeEventListener(\"keyup\", focusOnEnterKeyup.bind(this));\n                this.commands.removeCommand(blurCommand);\n                this.renderer.content.removeAttribute(\"aria-hidden\");\n                this.renderer.$gutter.setAttribute(\"tabindex\", -1);\n                this.renderer.$gutter.setAttribute(\"aria-hidden\", true);\n                this.renderer.$gutter.removeAttribute(\"role\");\n                this.renderer.$gutter.removeAttribute(\"aria-roledescription\");\n                this.renderer.$gutter.removeAttribute(\"aria-label\");\n                this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName);\n                if (gutterKeyboardHandler)\n                    gutterKeyboardHandler.removeListener();\n            }\n        },\n        initialValue: false\n    },\n    textInputAriaLabel: {\n        set: function (val) { this.$textInputAriaLabel = val; },\n        initialValue: \"\"\n    },\n    enableMobileMenu: {\n        set: function (val) { this.$enableMobileMenu = val; },\n        initialValue: true\n    },\n    customScrollbar: \"renderer\",\n    hScrollBarAlwaysVisible: \"renderer\",\n    vScrollBarAlwaysVisible: \"renderer\",\n    highlightGutterLine: \"renderer\",\n    animatedScroll: \"renderer\",\n    showInvisibles: \"renderer\",\n    showPrintMargin: \"renderer\",\n    printMarginColumn: \"renderer\",\n    printMargin: \"renderer\",\n    fadeFoldWidgets: \"renderer\",\n    showFoldWidgets: \"renderer\",\n    displayIndentGuides: \"renderer\",\n    highlightIndentGuides: \"renderer\",\n    showGutter: \"renderer\",\n    fontSize: \"renderer\",\n    fontFamily: \"renderer\",\n    maxLines: \"renderer\",\n    minLines: \"renderer\",\n    scrollPastEnd: \"renderer\",\n    fixedWidthGutter: \"renderer\",\n    theme: \"renderer\",\n    hasCssTransforms: \"renderer\",\n    maxPixelHeight: \"renderer\",\n    useTextareaForIME: \"renderer\",\n    useResizeObserver: \"renderer\",\n    useSvgGutterIcons: \"renderer\",\n    showFoldedAnnotations: \"renderer\",\n    scrollSpeed: \"$mouseHandler\",\n    dragDelay: \"$mouseHandler\",\n    dragEnabled: \"$mouseHandler\",\n    focusTimeout: \"$mouseHandler\",\n    firstLineNumber: \"session\",\n    overwrite: \"session\",\n    newLineMode: \"session\",\n    useWorker: \"session\",\n    useSoftTabs: \"session\",\n    navigateWithinSoftTabs: \"session\",\n    tabSize: \"session\",\n    wrap: \"session\",\n    indentedSoftWrap: \"session\",\n    foldStyle: \"session\",\n    mode: \"session\"\n});\nvar relativeNumberRenderer = {\n    getText: function (/**@type{EditSession}*/ session, /**@type{number}*/ row) {\n        return (Math.abs(session.selection.lead.row - row) || (row + 1 + (row < 9 ? \"\\xb7\" : \"\"))) + \"\";\n    },\n    getWidth: function (session, /**@type{number}*/ lastLineNumber, config) {\n        return Math.max(lastLineNumber.toString().length, (config.lastRow + 1).toString().length, 2) * config.characterWidth;\n    },\n    update: function (e, /**@type{Editor}*/ editor) {\n        editor.renderer.$loop.schedule(editor.renderer.CHANGE_GUTTER);\n    },\n    attach: function (/**@type{Editor}*/ editor) {\n        editor.renderer.$gutterLayer.$renderer = this;\n        editor.on(\"changeSelection\", this.update);\n        this.update(null, editor);\n    },\n    detach: function (/**@type{Editor}*/ editor) {\n        if (editor.renderer.$gutterLayer.$renderer == this)\n            editor.renderer.$gutterLayer.$renderer = null;\n        editor.off(\"changeSelection\", this.update);\n        this.update(null, editor);\n    }\n};\nexports.Editor = Editor;\n\n});\n\nace.define(\"ace/layer/lines\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar Lines = /** @class */ (function () {\n    function Lines(element, canvasHeight) {\n        this.element = element;\n        this.canvasHeight = canvasHeight || 500000;\n        this.element.style.height = (this.canvasHeight * 2) + \"px\";\n        this.cells = [];\n        this.cellCache = [];\n        this.$offsetCoefficient = 0;\n    }\n    Lines.prototype.moveContainer = function (config) {\n        dom.translate(this.element, 0, -((config.firstRowScreen * config.lineHeight) % this.canvasHeight) - config.offset * this.$offsetCoefficient);\n    };\n    Lines.prototype.pageChanged = function (oldConfig, newConfig) {\n        return (Math.floor((oldConfig.firstRowScreen * oldConfig.lineHeight) / this.canvasHeight) !==\n            Math.floor((newConfig.firstRowScreen * newConfig.lineHeight) / this.canvasHeight));\n    };\n    Lines.prototype.computeLineTop = function (row, config, session) {\n        var screenTop = config.firstRowScreen * config.lineHeight;\n        var screenPage = Math.floor(screenTop / this.canvasHeight);\n        var lineTop = session.documentToScreenRow(row, 0) * config.lineHeight;\n        return lineTop - (screenPage * this.canvasHeight);\n    };\n    Lines.prototype.computeLineHeight = function (row, config, session) {\n        return config.lineHeight * session.getRowLineCount(row);\n    };\n    Lines.prototype.getLength = function () {\n        return this.cells.length;\n    };\n    Lines.prototype.get = function (index) {\n        return this.cells[index];\n    };\n    Lines.prototype.shift = function () {\n        this.$cacheCell(this.cells.shift());\n    };\n    Lines.prototype.pop = function () {\n        this.$cacheCell(this.cells.pop());\n    };\n    Lines.prototype.push = function (cell) {\n        if (Array.isArray(cell)) {\n            this.cells.push.apply(this.cells, cell);\n            var fragment = dom.createFragment(this.element);\n            for (var i = 0; i < cell.length; i++) {\n                fragment.appendChild(cell[i].element);\n            }\n            this.element.appendChild(fragment);\n        }\n        else {\n            this.cells.push(cell);\n            this.element.appendChild(cell.element);\n        }\n    };\n    Lines.prototype.unshift = function (cell) {\n        if (Array.isArray(cell)) {\n            this.cells.unshift.apply(this.cells, cell);\n            var fragment = dom.createFragment(this.element);\n            for (var i = 0; i < cell.length; i++) {\n                fragment.appendChild(cell[i].element);\n            }\n            if (this.element.firstChild)\n                this.element.insertBefore(fragment, this.element.firstChild);\n            else\n                this.element.appendChild(fragment);\n        }\n        else {\n            this.cells.unshift(cell);\n            this.element.insertAdjacentElement(\"afterbegin\", cell.element);\n        }\n    };\n    Lines.prototype.last = function () {\n        if (this.cells.length)\n            return this.cells[this.cells.length - 1];\n        else\n            return null;\n    };\n    Lines.prototype.$cacheCell = function (cell) {\n        if (!cell)\n            return;\n        cell.element.remove();\n        this.cellCache.push(cell);\n    };\n    Lines.prototype.createCell = function (row, config, session, initElement) {\n        var cell = this.cellCache.pop();\n        if (!cell) {\n            var element = dom.createElement(\"div\");\n            if (initElement)\n                initElement(element);\n            this.element.appendChild(element);\n            cell = {\n                element: element,\n                text: \"\",\n                row: row\n            };\n        }\n        cell.row = row;\n        return cell;\n    };\n    return Lines;\n}());\nexports.Lines = Lines;\n\n});\n\nace.define(\"ace/layer/gutter\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/lib/event_emitter\",\"ace/layer/lines\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar oop = require(\"../lib/oop\");\nvar lang = require(\"../lib/lang\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar Lines = require(\"./lines\").Lines;\nvar nls = require(\"../config\").nls;\nvar Gutter = /** @class */ (function () {\n    function Gutter(parentEl) {\n        this.$showCursorMarker = null;\n        this.element = dom.createElement(\"div\");\n        this.element.className = \"ace_layer ace_gutter-layer\";\n        parentEl.appendChild(this.element);\n        this.setShowFoldWidgets(this.$showFoldWidgets);\n        this.gutterWidth = 0;\n        this.$annotations = [];\n        this.$updateAnnotations = this.$updateAnnotations.bind(this);\n        this.$lines = new Lines(this.element);\n        this.$lines.$offsetCoefficient = 1;\n    }\n    Gutter.prototype.setSession = function (session) {\n        if (this.session)\n            this.session.off(\"change\", this.$updateAnnotations);\n        this.session = session;\n        if (session)\n            session.on(\"change\", this.$updateAnnotations);\n    };\n    Gutter.prototype.addGutterDecoration = function (row, className) {\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.addGutterDecoration\");\n        this.session.addGutterDecoration(row, className);\n    };\n    Gutter.prototype.removeGutterDecoration = function (row, className) {\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.removeGutterDecoration\");\n        this.session.removeGutterDecoration(row, className);\n    };\n    Gutter.prototype.setAnnotations = function (annotations) {\n        this.$annotations = [];\n        for (var i = 0; i < annotations.length; i++) {\n            var annotation = annotations[i];\n            var row = annotation.row;\n            var rowInfo = this.$annotations[row];\n            if (!rowInfo)\n                rowInfo = this.$annotations[row] = { text: [], type: [], displayText: [] };\n            var annoText = annotation.text;\n            var displayAnnoText = annotation.text;\n            var annoType = annotation.type;\n            annoText = annoText ? lang.escapeHTML(annoText) : annotation.html || \"\";\n            displayAnnoText = displayAnnoText ? displayAnnoText : annotation.html || \"\";\n            if (rowInfo.text.indexOf(annoText) === -1) {\n                rowInfo.text.push(annoText);\n                rowInfo.type.push(annoType);\n                rowInfo.displayText.push(displayAnnoText);\n            }\n            var className = annotation.className;\n            if (className) {\n                rowInfo.className = className;\n            }\n            else if (annoType === \"error\") {\n                rowInfo.className = \" ace_error\";\n            }\n            else if (annoType === \"security\" && !/\\bace_error\\b/.test(rowInfo.className)) {\n                rowInfo.className = \" ace_security\";\n            }\n            else if (annoType === \"warning\" && !/\\bace_(error|security)\\b/.test(rowInfo.className)) {\n                rowInfo.className = \" ace_warning\";\n            }\n            else if (annoType === \"info\" && !rowInfo.className) {\n                rowInfo.className = \" ace_info\";\n            }\n            else if (annoType === \"hint\" && !rowInfo.className) {\n                rowInfo.className = \" ace_hint\";\n            }\n        }\n    };\n    Gutter.prototype.$updateAnnotations = function (delta) {\n        if (!this.$annotations.length)\n            return;\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n        if (len === 0) {\n        }\n        else if (delta.action == 'remove') {\n            this.$annotations.splice(firstRow, len + 1, null);\n        }\n        else {\n            var args = new Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.$annotations.splice.apply(this.$annotations, args);\n        }\n    };\n    Gutter.prototype.update = function (config) {\n        this.config = config;\n        var session = this.session;\n        var firstRow = config.firstRow;\n        var lastRow = Math.min(config.lastRow + config.gutterOffset, // needed to compensate for hor scollbar\n        session.getLength() - 1);\n        this.oldLastRow = lastRow;\n        this.config = config;\n        this.$lines.moveContainer(config);\n        this.$updateCursorRow();\n        var fold = session.getNextFoldLine(firstRow);\n        var foldStart = fold ? fold.start.row : Infinity;\n        var cell = null;\n        var index = -1;\n        var row = firstRow;\n        while (true) {\n            if (row > foldStart) {\n                row = fold.end.row + 1;\n                fold = session.getNextFoldLine(row, fold);\n                foldStart = fold ? fold.start.row : Infinity;\n            }\n            if (row > lastRow) {\n                while (this.$lines.getLength() > index + 1)\n                    this.$lines.pop();\n                break;\n            }\n            cell = this.$lines.get(++index);\n            if (cell) {\n                cell.row = row;\n            }\n            else {\n                cell = this.$lines.createCell(row, config, this.session, onCreateCell);\n                this.$lines.push(cell);\n            }\n            this.$renderCell(cell, config, fold, row);\n            row++;\n        }\n        this._signal(\"afterRender\");\n        this.$updateGutterWidth(config);\n        if (this.$showCursorMarker && this.$highlightGutterLine)\n            this.$updateCursorMarker();\n    };\n    Gutter.prototype.$updateGutterWidth = function (config) {\n        var session = this.session;\n        var gutterRenderer = session.gutterRenderer || this.$renderer;\n        var firstLineNumber = session.$firstLineNumber;\n        var lastLineText = this.$lines.last() ? this.$lines.last().text : \"\";\n        if (this.$fixedWidth || session.$useWrapMode)\n            lastLineText = session.getLength() + firstLineNumber - 1;\n        var gutterWidth = gutterRenderer\n            ? gutterRenderer.getWidth(session, lastLineText, config)\n            : lastLineText.toString().length * config.characterWidth;\n        var padding = this.$padding || this.$computePadding();\n        gutterWidth += padding.left + padding.right;\n        if (gutterWidth !== this.gutterWidth && !isNaN(gutterWidth)) {\n            this.gutterWidth = gutterWidth; (this.element.parentNode).style.width =\n                this.element.style.width = Math.ceil(this.gutterWidth) + \"px\";\n            this._signal(\"changeGutterWidth\", gutterWidth);\n        }\n    };\n    Gutter.prototype.$updateCursorRow = function () {\n        if (!this.$highlightGutterLine)\n            return;\n        var position = this.session.selection.getCursor();\n        if (this.$cursorRow === position.row)\n            return;\n        this.$cursorRow = position.row;\n    };\n    Gutter.prototype.updateLineHighlight = function () {\n        if (this.$showCursorMarker)\n            this.$updateCursorMarker();\n        if (!this.$highlightGutterLine)\n            return;\n        var row = this.session.selection.cursor.row;\n        this.$cursorRow = row;\n        if (this.$cursorCell && this.$cursorCell.row == row)\n            return;\n        if (this.$cursorCell)\n            this.$cursorCell.element.className = this.$cursorCell.element.className.replace(\"ace_gutter-active-line \", \"\");\n        var cells = this.$lines.cells;\n        this.$cursorCell = null;\n        for (var i = 0; i < cells.length; i++) {\n            var cell = cells[i];\n            if (cell.row >= this.$cursorRow) {\n                if (cell.row > this.$cursorRow) {\n                    var fold = this.session.getFoldLine(this.$cursorRow);\n                    if (i > 0 && fold && fold.start.row == cells[i - 1].row)\n                        cell = cells[i - 1];\n                    else\n                        break;\n                }\n                cell.element.className = \"ace_gutter-active-line \" + cell.element.className;\n                this.$cursorCell = cell;\n                break;\n            }\n        }\n    };\n    Gutter.prototype.$updateCursorMarker = function () {\n        if (!this.session)\n            return;\n        var session = this.session;\n        if (!this.$highlightElement) {\n            this.$highlightElement = dom.createElement(\"div\");\n            this.$highlightElement.className = \"ace_gutter-cursor\";\n            this.$highlightElement.style.pointerEvents = \"none\";\n            this.element.appendChild(this.$highlightElement);\n        }\n        var pos = session.selection.cursor;\n        var config = this.config;\n        var lines = this.$lines;\n        var screenTop = config.firstRowScreen * config.lineHeight;\n        var screenPage = Math.floor(screenTop / lines.canvasHeight);\n        var lineTop = session.documentToScreenRow(pos) * config.lineHeight;\n        var top = lineTop - (screenPage * lines.canvasHeight);\n        dom.setStyle(this.$highlightElement.style, \"height\", config.lineHeight + \"px\");\n        dom.setStyle(this.$highlightElement.style, \"top\", top + \"px\");\n    };\n    Gutter.prototype.scrollLines = function (config) {\n        var oldConfig = this.config;\n        this.config = config;\n        this.$updateCursorRow();\n        if (this.$lines.pageChanged(oldConfig, config))\n            return this.update(config);\n        this.$lines.moveContainer(config);\n        var lastRow = Math.min(config.lastRow + config.gutterOffset, // needed to compensate for hor scollbar\n        this.session.getLength() - 1);\n        var oldLastRow = this.oldLastRow;\n        this.oldLastRow = lastRow;\n        if (!oldConfig || oldLastRow < config.firstRow)\n            return this.update(config);\n        if (lastRow < oldConfig.firstRow)\n            return this.update(config);\n        if (oldConfig.firstRow < config.firstRow)\n            for (var row = this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row > 0; row--)\n                this.$lines.shift();\n        if (oldLastRow > lastRow)\n            for (var row = this.session.getFoldedRowCount(lastRow + 1, oldLastRow); row > 0; row--)\n                this.$lines.pop();\n        if (config.firstRow < oldConfig.firstRow) {\n            this.$lines.unshift(this.$renderLines(config, config.firstRow, oldConfig.firstRow - 1));\n        }\n        if (lastRow > oldLastRow) {\n            this.$lines.push(this.$renderLines(config, oldLastRow + 1, lastRow));\n        }\n        this.updateLineHighlight();\n        this._signal(\"afterRender\");\n        this.$updateGutterWidth(config);\n    };\n    Gutter.prototype.$renderLines = function (config, firstRow, lastRow) {\n        var fragment = [];\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row + 1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > lastRow)\n                break;\n            var cell = this.$lines.createCell(row, config, this.session, onCreateCell);\n            this.$renderCell(cell, config, foldLine, row);\n            fragment.push(cell);\n            row++;\n        }\n        return fragment;\n    };\n    Gutter.prototype.$renderCell = function (cell, config, fold, row) {\n        var element = cell.element;\n        var session = this.session;\n        var textNode = element.childNodes[0];\n        var foldWidget = element.childNodes[1];\n        var annotationNode = element.childNodes[2];\n        var customWidget = element.childNodes[3];\n        var annotationIconNode = annotationNode.firstChild;\n        var firstLineNumber = session.$firstLineNumber;\n        var breakpoints = session.$breakpoints;\n        var decorations = session.$decorations;\n        var gutterRenderer = session.gutterRenderer || this.$renderer;\n        var foldWidgets = this.$showFoldWidgets && session.foldWidgets;\n        var foldStart = fold ? fold.start.row : Number.MAX_VALUE;\n        var lineHeight = config.lineHeight + \"px\";\n        var className = this.$useSvgGutterIcons ? \"ace_gutter-cell_svg-icons \" : \"ace_gutter-cell \";\n        var iconClassName = this.$useSvgGutterIcons ? \"ace_icon_svg\" : \"ace_icon\";\n        var rowText = (gutterRenderer\n            ? gutterRenderer.getText(session, row)\n            : row + firstLineNumber).toString();\n        if (this.$highlightGutterLine) {\n            if (row == this.$cursorRow || (fold && row < this.$cursorRow && row >= foldStart && this.$cursorRow <= fold.end.row)) {\n                className += \"ace_gutter-active-line \";\n                if (this.$cursorCell != cell) {\n                    if (this.$cursorCell)\n                        this.$cursorCell.element.className = this.$cursorCell.element.className.replace(\"ace_gutter-active-line \", \"\");\n                    this.$cursorCell = cell;\n                }\n            }\n        }\n        if (breakpoints[row])\n            className += breakpoints[row];\n        if (decorations[row])\n            className += decorations[row];\n        if (this.$annotations[row] && row !== foldStart)\n            className += this.$annotations[row].className;\n        if (foldWidgets) {\n            var c = foldWidgets[row];\n            if (c == null)\n                c = foldWidgets[row] = session.getFoldWidget(row);\n        }\n        if (c) {\n            var foldClass = \"ace_fold-widget ace_\" + c;\n            var isClosedFold = c == \"start\" && row == foldStart && row < fold.end.row;\n            if (isClosedFold) {\n                foldClass += \" ace_closed\";\n                var foldAnnotationClass = \"\";\n                var annotationInFold = false;\n                for (var i = row + 1; i <= fold.end.row; i++) {\n                    if (!this.$annotations[i])\n                        continue;\n                    if (this.$annotations[i].className === \" ace_error\") {\n                        annotationInFold = true;\n                        foldAnnotationClass = \" ace_error_fold\";\n                        break;\n                    }\n                    if (this.$annotations[i].className === \" ace_security\") {\n                        annotationInFold = true;\n                        foldAnnotationClass = \" ace_security_fold\";\n                    }\n                    else if (this.$annotations[i].className === \" ace_warning\" &&\n                        foldAnnotationClass !== \" ace_security_fold\") {\n                        annotationInFold = true;\n                        foldAnnotationClass = \" ace_warning_fold\";\n                    }\n                }\n                className += foldAnnotationClass;\n            }\n            else\n                foldClass += \" ace_open\";\n            if (foldWidget.className != foldClass)\n                foldWidget.className = foldClass;\n            dom.setStyle(foldWidget.style, \"height\", lineHeight);\n            dom.setStyle(foldWidget.style, \"display\", \"inline-block\");\n            foldWidget.setAttribute(\"role\", \"button\");\n            foldWidget.setAttribute(\"tabindex\", \"-1\");\n            var foldRange = session.getFoldWidgetRange(row);\n            if (foldRange)\n                foldWidget.setAttribute(\"aria-label\", nls(\"gutter.code-folding.range.aria-label\", \"Toggle code folding, rows $0 through $1\", [\n                    foldRange.start.row + 1,\n                    foldRange.end.row + 1\n                ]));\n            else {\n                if (fold)\n                    foldWidget.setAttribute(\"aria-label\", nls(\"gutter.code-folding.closed.aria-label\", \"Toggle code folding, rows $0 through $1\", [\n                        fold.start.row + 1,\n                        fold.end.row + 1\n                    ]));\n                else\n                    foldWidget.setAttribute(\"aria-label\", nls(\"gutter.code-folding.open.aria-label\", \"Toggle code folding, row $0\", [row + 1]));\n            }\n            if (isClosedFold) {\n                foldWidget.setAttribute(\"aria-expanded\", \"false\");\n                foldWidget.setAttribute(\"title\", nls(\"gutter.code-folding.closed.title\", \"Unfold code\"));\n            }\n            else {\n                foldWidget.setAttribute(\"aria-expanded\", \"true\");\n                foldWidget.setAttribute(\"title\", nls(\"gutter.code-folding.open.title\", \"Fold code\"));\n            }\n        }\n        else {\n            if (foldWidget) {\n                dom.setStyle(foldWidget.style, \"display\", \"none\");\n                foldWidget.setAttribute(\"tabindex\", \"0\");\n                foldWidget.removeAttribute(\"role\");\n                foldWidget.removeAttribute(\"aria-label\");\n            }\n        }\n        var customWidgetAttributes = this.session.$gutterCustomWidgets[row];\n        if (customWidgetAttributes) {\n            this.$addCustomWidget(row, customWidgetAttributes, cell);\n        }\n        else if (customWidget) {\n            this.$removeCustomWidget(row, cell);\n        }\n        if (annotationInFold && this.$showFoldedAnnotations) {\n            annotationNode.className = \"ace_gutter_annotation\";\n            annotationIconNode.className = iconClassName;\n            annotationIconNode.className += foldAnnotationClass;\n            dom.setStyle(annotationIconNode.style, \"height\", lineHeight);\n            dom.setStyle(annotationNode.style, \"display\", \"block\");\n            dom.setStyle(annotationNode.style, \"height\", lineHeight);\n            var ariaLabel;\n            switch (foldAnnotationClass) {\n                case \" ace_error_fold\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.error\", \"Error, read annotations row $0\", [rowText]);\n                    break;\n                case \" ace_security_fold\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.security\", \"Security finding, read annotations row $0\", [rowText]);\n                    break;\n                case \" ace_warning_fold\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.warning\", \"Warning, read annotations row $0\", [rowText]);\n                    break;\n            }\n            annotationNode.setAttribute(\"aria-label\", ariaLabel);\n            annotationNode.setAttribute(\"tabindex\", \"-1\");\n            annotationNode.setAttribute(\"role\", \"button\");\n        }\n        else if (this.$annotations[row]) {\n            annotationNode.className = \"ace_gutter_annotation\";\n            annotationIconNode.className = iconClassName;\n            if (this.$useSvgGutterIcons)\n                annotationIconNode.className += this.$annotations[row].className;\n            else\n                element.classList.add(this.$annotations[row].className.replace(\" \", \"\"));\n            dom.setStyle(annotationIconNode.style, \"height\", lineHeight);\n            dom.setStyle(annotationNode.style, \"display\", \"block\");\n            dom.setStyle(annotationNode.style, \"height\", lineHeight);\n            var ariaLabel;\n            switch (this.$annotations[row].className) {\n                case \" ace_error\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.error\", \"Error, read annotations row $0\", [rowText]);\n                    break;\n                case \" ace_security\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.security\", \"Security finding, read annotations row $0\", [rowText]);\n                    break;\n                case \" ace_warning\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.warning\", \"Warning, read annotations row $0\", [rowText]);\n                    break;\n                case \" ace_info\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.info\", \"Info, read annotations row $0\", [rowText]);\n                    break;\n                case \" ace_hint\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.hint\", \"Suggestion, read annotations row $0\", [rowText]);\n                    break;\n            }\n            annotationNode.setAttribute(\"aria-label\", ariaLabel);\n            annotationNode.setAttribute(\"tabindex\", \"-1\");\n            annotationNode.setAttribute(\"role\", \"button\");\n        }\n        else {\n            dom.setStyle(annotationNode.style, \"display\", \"none\");\n            annotationNode.removeAttribute(\"aria-label\");\n            annotationNode.removeAttribute(\"role\");\n            annotationNode.setAttribute(\"tabindex\", \"0\");\n        }\n        if (rowText !== textNode.data) {\n            textNode.data = rowText;\n        }\n        if (element.className != className)\n            element.className = className;\n        dom.setStyle(cell.element.style, \"height\", this.$lines.computeLineHeight(row, config, session) + \"px\");\n        dom.setStyle(cell.element.style, \"top\", this.$lines.computeLineTop(row, config, session) + \"px\");\n        cell.text = rowText;\n        if (annotationNode.style.display === \"none\" && foldWidget.style.display === \"none\" && !customWidgetAttributes)\n            cell.element.setAttribute(\"aria-hidden\", true);\n        else\n            cell.element.setAttribute(\"aria-hidden\", false);\n        return cell;\n    };\n    Gutter.prototype.setHighlightGutterLine = function (highlightGutterLine) {\n        this.$highlightGutterLine = highlightGutterLine;\n        if (!highlightGutterLine && this.$highlightElement) {\n            this.$highlightElement.remove();\n            this.$highlightElement = null;\n        }\n    };\n    Gutter.prototype.setShowLineNumbers = function (show) {\n        this.$renderer = !show && {\n            getWidth: function () { return 0; },\n            getText: function () { return \"\"; }\n        };\n    };\n    Gutter.prototype.getShowLineNumbers = function () {\n        return this.$showLineNumbers;\n    };\n    Gutter.prototype.setShowFoldWidgets = function (show) {\n        if (show)\n            dom.addCssClass(this.element, \"ace_folding-enabled\");\n        else\n            dom.removeCssClass(this.element, \"ace_folding-enabled\");\n        this.$showFoldWidgets = show;\n        this.$padding = null;\n    };\n    Gutter.prototype.getShowFoldWidgets = function () {\n        return this.$showFoldWidgets;\n    };\n    Gutter.prototype.$hideFoldWidget = function (row, cell) {\n        var rowCell = cell || this.$getGutterCell(row);\n        if (rowCell && rowCell.element) {\n            var foldWidget = rowCell.element.childNodes[1];\n            if (foldWidget) {\n                dom.setStyle(foldWidget.style, \"display\", \"none\");\n            }\n        }\n    };\n    Gutter.prototype.$showFoldWidget = function (row, cell) {\n        var rowCell = cell || this.$getGutterCell(row);\n        if (rowCell && rowCell.element) {\n            var foldWidget = rowCell.element.childNodes[1];\n            if (foldWidget && this.session.foldWidgets && this.session.foldWidgets[rowCell.row]) {\n                dom.setStyle(foldWidget.style, \"display\", \"inline-block\");\n            }\n        }\n    };\n    Gutter.prototype.$getGutterCell = function (row) {\n        var cells = this.$lines.cells;\n        var min = 0;\n        var max = cells.length - 1;\n        if (row < cells[0].row || row > cells[max].row)\n            return;\n        while (min <= max) {\n            var mid = Math.floor((min + max) / 2);\n            var cell = cells[mid];\n            if (cell.row > row) {\n                max = mid - 1;\n            }\n            else if (cell.row < row) {\n                min = mid + 1;\n            }\n            else {\n                return cell;\n            }\n        }\n        return cell;\n    };\n    Gutter.prototype.$addCustomWidget = function (row, _a, cell) {\n        var className = _a.className, label = _a.label, title = _a.title, callbacks = _a.callbacks;\n        this.session.$gutterCustomWidgets[row] = { className: className, label: label, title: title, callbacks: callbacks };\n        this.$hideFoldWidget(row, cell);\n        var rowCell = cell || this.$getGutterCell(row);\n        if (rowCell && rowCell.element) {\n            var customWidget = rowCell.element.querySelector(\".ace_custom-widget\");\n            if (customWidget) {\n                customWidget.remove();\n            }\n            customWidget = dom.createElement(\"span\");\n            customWidget.className = \"ace_custom-widget \".concat(className);\n            customWidget.setAttribute(\"tabindex\", \"-1\");\n            customWidget.setAttribute(\"role\", 'button');\n            customWidget.setAttribute(\"aria-label\", label);\n            customWidget.setAttribute(\"title\", title);\n            dom.setStyle(customWidget.style, \"display\", \"inline-block\");\n            dom.setStyle(customWidget.style, \"height\", \"inherit\");\n            if (callbacks && callbacks.onClick) {\n                customWidget.addEventListener(\"click\", function (e) {\n                    callbacks.onClick(e, row);\n                    e.stopPropagation();\n                });\n            }\n            rowCell.element.appendChild(customWidget);\n        }\n    };\n    Gutter.prototype.$removeCustomWidget = function (row, cell) {\n        delete this.session.$gutterCustomWidgets[row];\n        this.$showFoldWidget(row, cell);\n        var rowCell = cell || this.$getGutterCell(row);\n        if (rowCell && rowCell.element) {\n            var customWidget = rowCell.element.querySelector(\".ace_custom-widget\");\n            if (customWidget) {\n                rowCell.element.removeChild(customWidget);\n            }\n        }\n    };\n    Gutter.prototype.$computePadding = function () {\n        if (!this.element.firstChild)\n            return { left: 0, right: 0 };\n        var style = dom.computedStyle(/**@type{Element}*/ (this.element.firstChild));\n        this.$padding = {};\n        this.$padding.left = (parseInt(style.borderLeftWidth) || 0)\n            + (parseInt(style.paddingLeft) || 0) + 1;\n        this.$padding.right = (parseInt(style.borderRightWidth) || 0)\n            + (parseInt(style.paddingRight) || 0);\n        return this.$padding;\n    };\n    Gutter.prototype.getRegion = function (point) {\n        var padding = this.$padding || this.$computePadding();\n        var rect = this.element.getBoundingClientRect();\n        if (point.x < padding.left + rect.left)\n            return \"markers\";\n        if (this.$showFoldWidgets && point.x > rect.right - padding.right)\n            return \"foldWidgets\";\n    };\n    return Gutter;\n}());\nGutter.prototype.$fixedWidth = false;\nGutter.prototype.$highlightGutterLine = true;\nGutter.prototype.$renderer = undefined;\nGutter.prototype.$showLineNumbers = true;\nGutter.prototype.$showFoldWidgets = true;\noop.implement(Gutter.prototype, EventEmitter);\nfunction onCreateCell(element) {\n    var textNode = document.createTextNode('');\n    element.appendChild(textNode);\n    var foldWidget = dom.createElement(\"span\");\n    element.appendChild(foldWidget);\n    var annotationNode = dom.createElement(\"span\");\n    element.appendChild(annotationNode);\n    var annotationIconNode = dom.createElement(\"span\");\n    annotationNode.appendChild(annotationIconNode);\n    return element;\n}\nexports.Gutter = Gutter;\n\n});\n\nace.define(\"ace/layer/marker\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"../range\").Range;\nvar dom = require(\"../lib/dom\");\nvar Marker = /** @class */ (function () {\n    function Marker(parentEl) {\n        this.element = dom.createElement(\"div\");\n        this.element.className = \"ace_layer ace_marker-layer\";\n        parentEl.appendChild(this.element);\n    }\n    Marker.prototype.setPadding = function (padding) {\n        this.$padding = padding;\n    };\n    Marker.prototype.setSession = function (session) {\n        this.session = session;\n    };\n    Marker.prototype.setMarkers = function (markers) {\n        this.markers = markers;\n    };\n    Marker.prototype.elt = function (className, css) {\n        var x = this.i != -1 && this.element.childNodes[this.i];\n        if (!x) {\n            x = document.createElement(\"div\");\n            this.element.appendChild(x);\n            this.i = -1;\n        }\n        else {\n            this.i++;\n        }\n        x.style.cssText = css;\n        x.className = className;\n    };\n    Marker.prototype.update = function (config) {\n        if (!config)\n            return;\n        this.config = config;\n        this.i = 0;\n        var html;\n        for (var key in this.markers) {\n            var marker = this.markers[key];\n            if (!marker.range) {\n                marker.update(html, this, this.session, config);\n                continue;\n            }\n            var range = marker.range.clipRows(config.firstRow, config.lastRow);\n            if (range.isEmpty())\n                continue;\n            range = range.toScreenRange(this.session);\n            if (marker.renderer) {\n                var top = this.$getTop(range.start.row, config);\n                var left = this.$padding + range.start.column * config.characterWidth;\n                marker.renderer(html, range, left, top, config);\n            }\n            else if (marker.type == \"fullLine\") {\n                this.drawFullLineMarker(html, range, marker.clazz, config);\n            }\n            else if (marker.type == \"screenLine\") {\n                this.drawScreenLineMarker(html, range, marker.clazz, config);\n            }\n            else if (range.isMultiLine()) {\n                if (marker.type == \"text\")\n                    this.drawTextMarker(html, range, marker.clazz, config);\n                else\n                    this.drawMultiLineMarker(html, range, marker.clazz, config);\n            }\n            else {\n                this.drawSingleLineMarker(html, range, marker.clazz + \" ace_start\" + \" ace_br15\", config);\n            }\n        }\n        if (this.i != -1) {\n            while (this.i < this.element.childElementCount)\n                this.element.removeChild(this.element.lastChild);\n        }\n    };\n    Marker.prototype.$getTop = function (row, layerConfig) {\n        return (row - layerConfig.firstRowScreen) * layerConfig.lineHeight;\n    };\n    Marker.prototype.drawTextMarker = function (stringBuilder, range, clazz, layerConfig, extraStyle) {\n        var session = this.session;\n        var start = range.start.row;\n        var end = range.end.row;\n        var row = start;\n        var prev = 0;\n        var curr = 0;\n        var next = session.getScreenLastRowColumn(row);\n        var lineRange = new Range(row, range.start.column, row, curr);\n        for (; row <= end; row++) {\n            lineRange.start.row = lineRange.end.row = row;\n            lineRange.start.column = row == start ? range.start.column : session.getRowWrapIndent(row);\n            lineRange.end.column = next;\n            prev = curr;\n            curr = next;\n            next = row + 1 < end ? session.getScreenLastRowColumn(row + 1) : row == end ? 0 : range.end.column;\n            this.drawSingleLineMarker(stringBuilder, lineRange, clazz + (row == start ? \" ace_start\" : \"\") + \" ace_br\"\n                + getBorderClass(row == start || row == start + 1 && range.start.column, prev < curr, curr > next, row == end), layerConfig, row == end ? 0 : 1, extraStyle);\n        }\n    };\n    Marker.prototype.drawMultiLineMarker = function (stringBuilder, range, clazz, config, extraStyle) {\n        var padding = this.$padding;\n        var height = config.lineHeight;\n        var top = this.$getTop(range.start.row, config);\n        var left = padding + range.start.column * config.characterWidth;\n        extraStyle = extraStyle || \"\";\n        if (this.session.$bidiHandler.isBidiRow(range.start.row)) {\n            var range1 = range.clone();\n            range1.end.row = range1.start.row;\n            range1.end.column = this.session.getLine(range1.start.row).length;\n            this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br1 ace_start\", config, null, extraStyle);\n        }\n        else {\n            this.elt(clazz + \" ace_br1 ace_start\", \"height:\" + height + \"px;\" + \"right:\" + padding + \"px;\" + \"top:\" + top + \"px;left:\" + left + \"px;\" + (extraStyle || \"\"));\n        }\n        if (this.session.$bidiHandler.isBidiRow(range.end.row)) {\n            var range1 = range.clone();\n            range1.start.row = range1.end.row;\n            range1.start.column = 0;\n            this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br12\", config, null, extraStyle);\n        }\n        else {\n            top = this.$getTop(range.end.row, config);\n            var width = range.end.column * config.characterWidth;\n            this.elt(clazz + \" ace_br12\", \"height:\" + height + \"px;\" +\n                \"width:\" + width + \"px;\" +\n                \"top:\" + top + \"px;\" +\n                \"left:\" + padding + \"px;\" + (extraStyle || \"\"));\n        }\n        height = (range.end.row - range.start.row - 1) * config.lineHeight;\n        if (height <= 0)\n            return;\n        top = this.$getTop(range.start.row + 1, config);\n        var radiusClass = (range.start.column ? 1 : 0) | (range.end.column ? 0 : 8);\n        this.elt(clazz + (radiusClass ? \" ace_br\" + radiusClass : \"\"), \"height:\" + height + \"px;\" +\n            \"right:\" + padding + \"px;\" +\n            \"top:\" + top + \"px;\" +\n            \"left:\" + padding + \"px;\" + (extraStyle || \"\"));\n    };\n    Marker.prototype.drawSingleLineMarker = function (stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        if (this.session.$bidiHandler.isBidiRow(range.start.row))\n            return this.drawBidiSingleLineMarker(stringBuilder, range, clazz, config, extraLength, extraStyle);\n        var height = config.lineHeight;\n        var width = (range.end.column + (extraLength || 0) - range.start.column) * config.characterWidth;\n        var top = this.$getTop(range.start.row, config);\n        var left = this.$padding + range.start.column * config.characterWidth;\n        this.elt(clazz, \"height:\" + height + \"px;\" +\n            \"width:\" + width + \"px;\" +\n            \"top:\" + top + \"px;\" +\n            \"left:\" + left + \"px;\" + (extraStyle || \"\"));\n    };\n    Marker.prototype.drawBidiSingleLineMarker = function (stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        var height = config.lineHeight, top = this.$getTop(range.start.row, config), padding = this.$padding;\n        var selections = this.session.$bidiHandler.getSelections(range.start.column, range.end.column);\n        selections.forEach(function (selection) {\n            this.elt(clazz, \"height:\" + height + \"px;\" +\n                \"width:\" + (selection.width + (extraLength || 0)) + \"px;\" +\n                \"top:\" + top + \"px;\" +\n                \"left:\" + (padding + selection.left) + \"px;\" + (extraStyle || \"\"));\n        }, this);\n    };\n    Marker.prototype.drawFullLineMarker = function (stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n        if (range.start.row != range.end.row)\n            height += this.$getTop(range.end.row, config) - top;\n        this.elt(clazz, \"height:\" + height + \"px;\" +\n            \"top:\" + top + \"px;\" +\n            \"left:0;right:0;\" + (extraStyle || \"\"));\n    };\n    Marker.prototype.drawScreenLineMarker = function (stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n        this.elt(clazz, \"height:\" + height + \"px;\" +\n            \"top:\" + top + \"px;\" +\n            \"left:0;right:0;\" + (extraStyle || \"\"));\n    };\n    return Marker;\n}());\nMarker.prototype.$padding = 0;\nfunction getBorderClass(tl, tr, br, bl) {\n    return (tl ? 1 : 0) | (tr ? 2 : 0) | (br ? 4 : 0) | (bl ? 8 : 0);\n}\nexports.Marker = Marker;\n\n});\n\nace.define(\"ace/layer/text_util\",[\"require\",\"exports\",\"module\"], function(require, exports, module){// Tokens for which Ace just uses a simple TextNode and does not add any special className.\nvar textTokens = new Set([\"text\", \"rparen\", \"lparen\"]);\nexports.isTextToken = function (tokenType) {\n    return textTokens.has(tokenType);\n};\n\n});\n\nace.define(\"ace/layer/text\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/layer/lines\",\"ace/lib/event_emitter\",\"ace/config\",\"ace/layer/text_util\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"../lib/oop\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar Lines = require(\"./lines\").Lines;\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar nls = require(\"../config\").nls;\nvar isTextToken = require(\"./text_util\").isTextToken;\nvar Text = /** @class */ (function () {\n    function Text(parentEl) {\n        this.dom = dom;\n        this.element = this.dom.createElement(\"div\");\n        this.element.className = \"ace_layer ace_text-layer\";\n        parentEl.appendChild(this.element);\n        this.$updateEolChar = this.$updateEolChar.bind(this);\n        this.$lines = new Lines(this.element);\n    }\n    Text.prototype.$updateEolChar = function () {\n        var doc = this.session.doc;\n        var unixMode = doc.getNewLineCharacter() == \"\\n\" && doc.getNewLineMode() != \"windows\";\n        var EOL_CHAR = unixMode ? this.EOL_CHAR_LF : this.EOL_CHAR_CRLF;\n        if (this.EOL_CHAR != EOL_CHAR) {\n            this.EOL_CHAR = EOL_CHAR;\n            return true;\n        }\n    };\n    Text.prototype.setPadding = function (padding) {\n        this.$padding = padding;\n        this.element.style.margin = \"0 \" + padding + \"px\";\n    };\n    Text.prototype.getLineHeight = function () {\n        return this.$fontMetrics.$characterSize.height || 0;\n    };\n    Text.prototype.getCharacterWidth = function () {\n        return this.$fontMetrics.$characterSize.width || 0;\n    };\n    Text.prototype.$setFontMetrics = function (measure) {\n        this.$fontMetrics = measure;\n        this.$fontMetrics.on(\"changeCharacterSize\", \n        function (e) {\n            this._signal(\"changeCharacterSize\", e);\n        }.bind(this));\n        this.$pollSizeChanges();\n    };\n    Text.prototype.checkForSizeChanges = function () {\n        this.$fontMetrics.checkForSizeChanges();\n    };\n    Text.prototype.$pollSizeChanges = function () {\n        return this.$pollSizeChangesTimer = this.$fontMetrics.$pollSizeChanges();\n    };\n    Text.prototype.setSession = function (session) {\n        this.session = session;\n        if (session)\n            this.$computeTabString();\n    };\n    Text.prototype.setShowInvisibles = function (showInvisibles) {\n        if (this.showInvisibles == showInvisibles)\n            return false;\n        this.showInvisibles = showInvisibles;\n        if (typeof showInvisibles == \"string\") {\n            this.showSpaces = /tab/i.test(showInvisibles);\n            this.showTabs = /space/i.test(showInvisibles);\n            this.showEOL = /eol/i.test(showInvisibles);\n        }\n        else {\n            this.showSpaces = this.showTabs = this.showEOL = showInvisibles;\n        }\n        this.$computeTabString();\n        return true;\n    };\n    Text.prototype.setDisplayIndentGuides = function (display) {\n        if (this.displayIndentGuides == display)\n            return false;\n        this.displayIndentGuides = display;\n        this.$computeTabString();\n        return true;\n    };\n    Text.prototype.setHighlightIndentGuides = function (highlight) {\n        if (this.$highlightIndentGuides === highlight)\n            return false;\n        this.$highlightIndentGuides = highlight;\n        return highlight;\n    };\n    Text.prototype.$computeTabString = function () {\n        var tabSize = this.session.getTabSize();\n        this.tabSize = tabSize; var tabStr = this.$tabStrings = [0];\n        for (var i = 1; i < tabSize + 1; i++) {\n            if (this.showTabs) {\n                var span = this.dom.createElement(\"span\");\n                span.className = \"ace_invisible ace_invisible_tab\";\n                span.textContent = lang.stringRepeat(this.TAB_CHAR, i);\n                tabStr.push(span);\n            }\n            else {\n                tabStr.push(this.dom.createTextNode(lang.stringRepeat(\" \", i), this.element));\n            }\n        }\n        if (this.displayIndentGuides) {\n            this.$indentGuideRe = /\\s\\S| \\t|\\t |\\s$/;\n            var className = \"ace_indent-guide\";\n            var spaceClass = this.showSpaces ? \" ace_invisible ace_invisible_space\" : \"\";\n            var spaceContent = this.showSpaces\n                ? lang.stringRepeat(this.SPACE_CHAR, this.tabSize)\n                : lang.stringRepeat(\" \", this.tabSize);\n            var tabClass = this.showTabs ? \" ace_invisible ace_invisible_tab\" : \"\";\n            var tabContent = this.showTabs\n                ? lang.stringRepeat(this.TAB_CHAR, this.tabSize)\n                : spaceContent;\n            var span = this.dom.createElement(\"span\");\n            span.className = className + spaceClass;\n            span.textContent = spaceContent;\n            this.$tabStrings[\" \"] = span;\n            var span = this.dom.createElement(\"span\");\n            span.className = className + tabClass;\n            span.textContent = tabContent;\n            this.$tabStrings[\"\\t\"] = span;\n        }\n    };\n    Text.prototype.updateLines = function (config, firstRow, lastRow) {\n        if (this.config.lastRow != config.lastRow ||\n            this.config.firstRow != config.firstRow) {\n            return this.update(config);\n        }\n        this.config = config;\n        var first = Math.max(firstRow, config.firstRow);\n        var last = Math.min(lastRow, config.lastRow);\n        var lineElements = this.element.childNodes;\n        var lineElementsIdx = 0;\n        for (var row = config.firstRow; row < first; row++) {\n            var foldLine = this.session.getFoldLine(row);\n            if (foldLine) {\n                if (foldLine.containsRow(first)) {\n                    first = foldLine.start.row;\n                    break;\n                }\n                else {\n                    row = foldLine.end.row;\n                }\n            }\n            lineElementsIdx++;\n        }\n        var heightChanged = false;\n        var row = first;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row + 1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > last)\n                break; var lineElement = lineElements[lineElementsIdx++];\n            if (lineElement) {\n                this.dom.removeChildren(lineElement);\n                this.$renderLine(lineElement, row, row == foldStart ? foldLine : false);\n                if (heightChanged)\n                    lineElement.style.top = this.$lines.computeLineTop(row, config, this.session) + \"px\";\n                var height = (config.lineHeight * this.session.getRowLength(row)) + \"px\";\n                if (lineElement.style.height != height) {\n                    heightChanged = true;\n                    lineElement.style.height = height;\n                }\n            }\n            row++;\n        }\n        if (heightChanged) {\n            while (lineElementsIdx < this.$lines.cells.length) {\n                var cell = this.$lines.cells[lineElementsIdx++];\n                cell.element.style.top = this.$lines.computeLineTop(cell.row, config, this.session) + \"px\";\n            }\n        }\n    };\n    Text.prototype.scrollLines = function (config) {\n        var oldConfig = this.config;\n        this.config = config;\n        if (this.$lines.pageChanged(oldConfig, config))\n            return this.update(config);\n        this.$lines.moveContainer(config);\n        var lastRow = config.lastRow;\n        var oldLastRow = oldConfig ? oldConfig.lastRow : -1;\n        if (!oldConfig || oldLastRow < config.firstRow)\n            return this.update(config);\n        if (lastRow < oldConfig.firstRow)\n            return this.update(config);\n        if (!oldConfig || oldConfig.lastRow < config.firstRow)\n            return this.update(config);\n        if (config.lastRow < oldConfig.firstRow)\n            return this.update(config);\n        if (oldConfig.firstRow < config.firstRow)\n            for (var row = this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row > 0; row--)\n                this.$lines.shift();\n        if (oldConfig.lastRow > config.lastRow)\n            for (var row = this.session.getFoldedRowCount(config.lastRow + 1, oldConfig.lastRow); row > 0; row--)\n                this.$lines.pop();\n        if (config.firstRow < oldConfig.firstRow) {\n            this.$lines.unshift(this.$renderLinesFragment(config, config.firstRow, oldConfig.firstRow - 1));\n        }\n        if (config.lastRow > oldConfig.lastRow) {\n            this.$lines.push(this.$renderLinesFragment(config, oldConfig.lastRow + 1, config.lastRow));\n        }\n        this.$highlightIndentGuide();\n    };\n    Text.prototype.$renderLinesFragment = function (config, firstRow, lastRow) {\n        var fragment = [];\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row + 1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > lastRow)\n                break;\n            var line = this.$lines.createCell(row, config, this.session);\n            var lineEl = line.element;\n            this.dom.removeChildren(lineEl);\n            dom.setStyle(lineEl.style, \"height\", this.$lines.computeLineHeight(row, config, this.session) + \"px\");\n            dom.setStyle(lineEl.style, \"top\", this.$lines.computeLineTop(row, config, this.session) + \"px\");\n            this.$renderLine(lineEl, row, row == foldStart ? foldLine : false);\n            if (this.$useLineGroups()) {\n                lineEl.className = \"ace_line_group\";\n            }\n            else {\n                lineEl.className = \"ace_line\";\n            }\n            fragment.push(line);\n            row++;\n        }\n        return fragment;\n    };\n    Text.prototype.update = function (config) {\n        this.$lines.moveContainer(config);\n        this.config = config;\n        var firstRow = config.firstRow;\n        var lastRow = config.lastRow;\n        var lines = this.$lines;\n        while (lines.getLength())\n            lines.pop();\n        lines.push(this.$renderLinesFragment(config, firstRow, lastRow));\n    };\n    Text.prototype.$renderToken = function (parent, screenColumn, token, value) {\n        var self = this;\n        var re = /(\\t)|( +)|([\\x00-\\x1f\\x80-\\xa0\\xad\\u1680\\u180E\\u2000-\\u200f\\u2028\\u2029\\u202F\\u205F\\uFEFF\\uFFF9-\\uFFFC\\u2066\\u2067\\u2068\\u202A\\u202B\\u202D\\u202E\\u202C\\u2069\\u2060\\u2061\\u2062\\u2063\\u2064\\u206A\\u206B\\u206B\\u206C\\u206D\\u206E\\u206F]+)|(\\u3000)|([\\u1100-\\u115F\\u11A3-\\u11A7\\u11FA-\\u11FF\\u2329-\\u232A\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3001-\\u303E\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u3190-\\u31BA\\u31C0-\\u31E3\\u31F0-\\u321E\\u3220-\\u3247\\u3250-\\u32FE\\u3300-\\u4DBF\\u4E00-\\uA48C\\uA490-\\uA4C6\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFF01-\\uFF60\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/g;\n        var valueFragment = this.dom.createFragment(this.element);\n        var m;\n        var i = 0;\n        while (m = re.exec(value)) {\n            var tab = m[1];\n            var simpleSpace = m[2];\n            var controlCharacter = m[3];\n            var cjkSpace = m[4];\n            var cjk = m[5];\n            if (!self.showSpaces && simpleSpace)\n                continue;\n            var before = i != m.index ? value.slice(i, m.index) : \"\";\n            i = m.index + m[0].length;\n            if (before) {\n                valueFragment.appendChild(this.dom.createTextNode(before, this.element));\n            }\n            if (tab) {\n                var tabSize = self.session.getScreenTabSize(screenColumn + m.index);\n                var text = self.$tabStrings[tabSize].cloneNode(true);\n                text[\"charCount\"] = 1;\n                valueFragment.appendChild(text);\n                screenColumn += tabSize - 1;\n            }\n            else if (simpleSpace) {\n                if (self.showSpaces) {\n                    var span = this.dom.createElement(\"span\");\n                    span.className = \"ace_invisible ace_invisible_space\";\n                    span.textContent = lang.stringRepeat(self.SPACE_CHAR, simpleSpace.length);\n                    valueFragment.appendChild(span);\n                }\n                else {\n                    valueFragment.appendChild(this.dom.createTextNode(simpleSpace, this.element));\n                }\n            }\n            else if (controlCharacter) {\n                var span = this.dom.createElement(\"span\");\n                span.className = \"ace_invisible ace_invisible_space ace_invalid\";\n                span.textContent = lang.stringRepeat(self.SPACE_CHAR, controlCharacter.length);\n                valueFragment.appendChild(span);\n            }\n            else if (cjkSpace) {\n                screenColumn += 1;\n                var span = this.dom.createElement(\"span\");\n                span.style.width = (self.config.characterWidth * 2) + \"px\";\n                span.className = self.showSpaces ? \"ace_cjk ace_invisible ace_invisible_space\" : \"ace_cjk\";\n                span.textContent = self.showSpaces ? self.SPACE_CHAR : cjkSpace;\n                valueFragment.appendChild(span);\n            }\n            else if (cjk) {\n                screenColumn += 1;\n                var span = this.dom.createElement(\"span\");\n                span.style.width = (self.config.characterWidth * 2) + \"px\";\n                span.className = \"ace_cjk\";\n                span.textContent = cjk;\n                valueFragment.appendChild(span);\n            }\n        }\n        valueFragment.appendChild(this.dom.createTextNode(i ? value.slice(i) : value, this.element));\n        if (!isTextToken(token.type)) {\n            var classes = \"ace_\" + token.type.replace(/\\./g, \" ace_\");\n            var span = this.dom.createElement(\"span\");\n            if (token.type == \"fold\") {\n                span.style.width = (token.value.length * this.config.characterWidth) + \"px\";\n                span.setAttribute(\"title\", nls(\"inline-fold.closed.title\", \"Unfold code\"));\n            }\n            span.className = classes;\n            span.appendChild(valueFragment);\n            parent.appendChild(span);\n        }\n        else {\n            parent.appendChild(valueFragment);\n        }\n        return screenColumn + value.length;\n    };\n    Text.prototype.renderIndentGuide = function (parent, value, max) {\n        var cols = value.search(this.$indentGuideRe);\n        if (cols <= 0 || cols >= max)\n            return value;\n        if (value[0] == \" \") {\n            cols -= cols % this.tabSize;\n            var count = cols / this.tabSize;\n            for (var i = 0; i < count; i++) {\n                parent.appendChild(this.$tabStrings[\" \"].cloneNode(true));\n            }\n            this.$highlightIndentGuide();\n            return value.substr(cols);\n        }\n        else if (value[0] == \"\\t\") {\n            for (var i = 0; i < cols; i++) {\n                parent.appendChild(this.$tabStrings[\"\\t\"].cloneNode(true));\n            }\n            this.$highlightIndentGuide();\n            return value.substr(cols);\n        }\n        this.$highlightIndentGuide();\n        return value;\n    };\n    Text.prototype.$highlightIndentGuide = function () {\n        if (!this.$highlightIndentGuides || !this.displayIndentGuides)\n            return;\n        this.$highlightIndentGuideMarker = {\n            indentLevel: undefined,\n            start: undefined,\n            end: undefined,\n            dir: undefined\n        };\n        var lines = this.session.doc.$lines;\n        if (!lines)\n            return;\n        var cursor = this.session.selection.getCursor();\n        var initialIndent = /^\\s*/.exec(this.session.doc.getLine(cursor.row))[0].length;\n        var elementIndentLevel = Math.floor(initialIndent / this.tabSize);\n        this.$highlightIndentGuideMarker = {\n            indentLevel: elementIndentLevel,\n            start: cursor.row\n        };\n        var bracketHighlight = this.session.$bracketHighlight;\n        if (bracketHighlight) {\n            var ranges = this.session.$bracketHighlight.ranges;\n            for (var i = 0; i < ranges.length; i++) {\n                if (cursor.row !== ranges[i].start.row) {\n                    this.$highlightIndentGuideMarker.end = ranges[i].start.row + 1;\n                    if (cursor.row > ranges[i].start.row) {\n                        this.$highlightIndentGuideMarker.dir = -1;\n                    }\n                    else {\n                        this.$highlightIndentGuideMarker.dir = 1;\n                    }\n                    break;\n                }\n            }\n        }\n        if (!this.$highlightIndentGuideMarker.end) {\n            if (lines[cursor.row] !== '' && cursor.column === lines[cursor.row].length) {\n                this.$highlightIndentGuideMarker.dir = 1;\n                for (var i = cursor.row + 1; i < lines.length; i++) {\n                    var line = lines[i];\n                    var currentIndent = /^\\s*/.exec(line)[0].length;\n                    if (line !== '') {\n                        this.$highlightIndentGuideMarker.end = i;\n                        if (currentIndent <= initialIndent)\n                            break;\n                    }\n                }\n            }\n        }\n        this.$renderHighlightIndentGuide();\n    };\n    Text.prototype.$clearActiveIndentGuide = function () {\n        var activeIndentGuides = this.element.querySelectorAll(\".ace_indent-guide-active\");\n        for (var i = 0; i < activeIndentGuides.length; i++) {\n            activeIndentGuides[i].classList.remove(\"ace_indent-guide-active\");\n        }\n    };\n    Text.prototype.$setIndentGuideActive = function (cell, indentLevel) {\n        var line = this.session.doc.getLine(cell.row);\n        if (line !== \"\") {\n            var element = cell.element;\n            if (cell.element.classList && cell.element.classList.contains(\"ace_line_group\")) {\n                if (cell.element.childNodes.length > 0) {\n                    element = cell.element.childNodes[0];\n                }\n                else {\n                    return;\n                }\n            }\n            var childNodes = element.childNodes;\n            if (childNodes) {\n                var node = childNodes[indentLevel - 1];\n                if (node && node.classList && node.classList.contains(\"ace_indent-guide\"))\n                    node.classList.add(\"ace_indent-guide-active\");\n            }\n        }\n    };\n    Text.prototype.$renderHighlightIndentGuide = function () {\n        if (!this.$lines)\n            return;\n        var cells = this.$lines.cells;\n        this.$clearActiveIndentGuide();\n        var indentLevel = this.$highlightIndentGuideMarker.indentLevel;\n        if (indentLevel !== 0) {\n            if (this.$highlightIndentGuideMarker.dir === 1) {\n                for (var i = 0; i < cells.length; i++) {\n                    var cell = cells[i];\n                    if (this.$highlightIndentGuideMarker.end && cell.row >= this.$highlightIndentGuideMarker.start\n                        + 1) {\n                        if (cell.row >= this.$highlightIndentGuideMarker.end)\n                            break;\n                        this.$setIndentGuideActive(cell, indentLevel);\n                    }\n                }\n            }\n            else {\n                for (var i = cells.length - 1; i >= 0; i--) {\n                    var cell = cells[i];\n                    if (this.$highlightIndentGuideMarker.end && cell.row < this.$highlightIndentGuideMarker.start) {\n                        if (cell.row < this.$highlightIndentGuideMarker.end)\n                            break;\n                        this.$setIndentGuideActive(cell, indentLevel);\n                    }\n                }\n            }\n        }\n    };\n    Text.prototype.$createLineElement = function (parent) {\n        var lineEl = this.dom.createElement(\"div\");\n        lineEl.className = \"ace_line\";\n        lineEl.style.height = this.config.lineHeight + \"px\";\n        return lineEl;\n    };\n    Text.prototype.$renderWrappedLine = function (parent, tokens, splits) {\n        var chars = 0;\n        var split = 0;\n        var splitChars = splits[0];\n        var screenColumn = 0;\n        var lineEl = this.$createLineElement();\n        parent.appendChild(lineEl);\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            var value = token.value;\n            if (i == 0 && this.displayIndentGuides) {\n                chars = value.length;\n                value = this.renderIndentGuide(lineEl, value, splitChars);\n                if (!value)\n                    continue;\n                chars -= value.length;\n            }\n            if (chars + value.length < splitChars) {\n                screenColumn = this.$renderToken(lineEl, screenColumn, token, value);\n                chars += value.length;\n            }\n            else {\n                while (chars + value.length >= splitChars) {\n                    screenColumn = this.$renderToken(lineEl, screenColumn, token, value.substring(0, splitChars - chars));\n                    value = value.substring(splitChars - chars);\n                    chars = splitChars;\n                    lineEl = this.$createLineElement();\n                    parent.appendChild(lineEl);\n                    var text = this.dom.createTextNode(lang.stringRepeat(\"\\xa0\", splits.indent), this.element);\n                    text[\"charCount\"] = 0; // not to take into account when we are counting columns\n                    lineEl.appendChild(text);\n                    split++;\n                    screenColumn = 0;\n                    splitChars = splits[split] || Number.MAX_VALUE;\n                }\n                if (value.length != 0) {\n                    chars += value.length;\n                    screenColumn = this.$renderToken(lineEl, screenColumn, token, value);\n                }\n            }\n        }\n        if (splits[splits.length - 1] > this.MAX_LINE_LENGTH)\n            this.$renderOverflowMessage(lineEl, screenColumn, null, \"\", true);\n    };\n    Text.prototype.$renderSimpleLine = function (parent, tokens) {\n        var screenColumn = 0;\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            var value = token.value;\n            if (i == 0 && this.displayIndentGuides) {\n                value = this.renderIndentGuide(parent, value);\n                if (!value)\n                    continue;\n            }\n            if (screenColumn + value.length > this.MAX_LINE_LENGTH)\n                return this.$renderOverflowMessage(parent, screenColumn, token, value);\n            screenColumn = this.$renderToken(parent, screenColumn, token, value);\n        }\n    };\n    Text.prototype.$renderOverflowMessage = function (parent, screenColumn, token, value, hide) {\n        token && this.$renderToken(parent, screenColumn, token, value.slice(0, this.MAX_LINE_LENGTH - screenColumn));\n        var overflowEl = this.dom.createElement(\"span\");\n        overflowEl.className = \"ace_inline_button ace_keyword ace_toggle_wrap\";\n        overflowEl.textContent = hide ? \"<hide>\" : \"<click to see more...>\";\n        parent.appendChild(overflowEl);\n    };\n    Text.prototype.$renderLine = function (parent, row, foldLine) {\n        if (!foldLine && foldLine != false)\n            foldLine = this.session.getFoldLine(row);\n        if (foldLine)\n            var tokens = this.$getFoldLineTokens(row, foldLine);\n        else\n            var tokens = this.session.getTokens(row);\n        var lastLineEl = parent;\n        if (tokens.length) {\n            var splits = this.session.getRowSplitData(row);\n            if (splits && splits.length) {\n                this.$renderWrappedLine(parent, tokens, splits);\n                var lastLineEl = parent.lastChild;\n            }\n            else {\n                var lastLineEl = parent;\n                if (this.$useLineGroups()) {\n                    lastLineEl = this.$createLineElement();\n                    parent.appendChild(lastLineEl);\n                }\n                this.$renderSimpleLine(lastLineEl, tokens);\n            }\n        }\n        else if (this.$useLineGroups()) {\n            lastLineEl = this.$createLineElement();\n            parent.appendChild(lastLineEl);\n        }\n        if (this.showEOL && lastLineEl) {\n            if (foldLine)\n                row = foldLine.end.row;\n            var invisibleEl = this.dom.createElement(\"span\");\n            invisibleEl.className = \"ace_invisible ace_invisible_eol\";\n            invisibleEl.textContent = row == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR;\n            lastLineEl.appendChild(invisibleEl);\n        }\n    };\n    Text.prototype.$getFoldLineTokens = function (row, foldLine) {\n        var session = this.session;\n        var renderTokens = [];\n        function addTokens(tokens, from, to) {\n            var idx = 0, col = 0;\n            while ((col + tokens[idx].value.length) < from) {\n                col += tokens[idx].value.length;\n                idx++;\n                if (idx == tokens.length)\n                    return;\n            }\n            if (col != from) {\n                var value = tokens[idx].value.substring(from - col);\n                if (value.length > (to - from))\n                    value = value.substring(0, to - from);\n                renderTokens.push({\n                    type: tokens[idx].type,\n                    value: value\n                });\n                col = from + value.length;\n                idx += 1;\n            }\n            while (col < to && idx < tokens.length) {\n                var value = tokens[idx].value;\n                if (value.length + col > to) {\n                    renderTokens.push({\n                        type: tokens[idx].type,\n                        value: value.substring(0, to - col)\n                    });\n                }\n                else\n                    renderTokens.push(tokens[idx]);\n                col += value.length;\n                idx += 1;\n            }\n        }\n        var tokens = session.getTokens(row);\n        foldLine.walk(function (placeholder, row, column, lastColumn, isNewRow) {\n            if (placeholder != null) {\n                renderTokens.push({\n                    type: \"fold\",\n                    value: placeholder\n                });\n            }\n            else {\n                if (isNewRow)\n                    tokens = session.getTokens(row);\n                if (tokens.length)\n                    addTokens(tokens, lastColumn, column);\n            }\n        }, foldLine.end.row, this.session.getLine(foldLine.end.row).length);\n        return renderTokens;\n    };\n    Text.prototype.$useLineGroups = function () {\n        return this.session.getUseWrapMode();\n    };\n    return Text;\n}());\nText.prototype.EOF_CHAR = \"\\xB6\";\nText.prototype.EOL_CHAR_LF = \"\\xAC\";\nText.prototype.EOL_CHAR_CRLF = \"\\xa4\";\nText.prototype.EOL_CHAR = Text.prototype.EOL_CHAR_LF;\nText.prototype.TAB_CHAR = \"\\u2014\"; //\"\\u21E5\";\nText.prototype.SPACE_CHAR = \"\\xB7\";\nText.prototype.$padding = 0;\nText.prototype.MAX_LINE_LENGTH = 10000;\nText.prototype.showInvisibles = false;\nText.prototype.showSpaces = false;\nText.prototype.showTabs = false;\nText.prototype.showEOL = false;\nText.prototype.displayIndentGuides = true;\nText.prototype.$highlightIndentGuides = true;\nText.prototype.$tabStrings = [];\nText.prototype.destroy = {};\nText.prototype.onChangeTabSize = Text.prototype.$computeTabString;\noop.implement(Text.prototype, EventEmitter);\nexports.Text = Text;\n\n});\n\nace.define(\"ace/layer/cursor\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar Cursor = /** @class */ (function () {\n    function Cursor(parentEl) {\n        this.element = dom.createElement(\"div\");\n        this.element.className = \"ace_layer ace_cursor-layer\";\n        parentEl.appendChild(this.element);\n        this.isVisible = false;\n        this.isBlinking = true;\n        this.blinkInterval = 1000;\n        this.smoothBlinking = false;\n        this.cursors = [];\n        this.cursor = this.addCursor();\n        dom.addCssClass(this.element, \"ace_hidden-cursors\");\n        this.$updateCursors = this.$updateOpacity.bind(this);\n    }\n    Cursor.prototype.$updateOpacity = function (val) {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--;)\n            dom.setStyle(cursors[i].style, \"opacity\", val ? \"\" : \"0\");\n    };\n    Cursor.prototype.$startCssAnimation = function () {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--;)\n            cursors[i].style.animationDuration = this.blinkInterval + \"ms\";\n        this.$isAnimating = true;\n        setTimeout(function () {\n            if (this.$isAnimating) {\n                dom.addCssClass(this.element, \"ace_animate-blinking\");\n            }\n        }.bind(this));\n    };\n    Cursor.prototype.$stopCssAnimation = function () {\n        this.$isAnimating = false;\n        dom.removeCssClass(this.element, \"ace_animate-blinking\");\n    };\n    Cursor.prototype.setPadding = function (padding) {\n        this.$padding = padding;\n    };\n    Cursor.prototype.setSession = function (session) {\n        this.session = session;\n    };\n    Cursor.prototype.setBlinking = function (blinking) {\n        if (blinking != this.isBlinking) {\n            this.isBlinking = blinking;\n            this.restartTimer();\n        }\n    };\n    Cursor.prototype.setBlinkInterval = function (blinkInterval) {\n        if (blinkInterval != this.blinkInterval) {\n            this.blinkInterval = blinkInterval;\n            this.restartTimer();\n        }\n    };\n    Cursor.prototype.setSmoothBlinking = function (smoothBlinking) {\n        if (smoothBlinking != this.smoothBlinking) {\n            this.smoothBlinking = smoothBlinking;\n            dom.setCssClass(this.element, \"ace_smooth-blinking\", smoothBlinking);\n            this.$updateCursors(true);\n            this.restartTimer();\n        }\n    };\n    Cursor.prototype.addCursor = function () {\n        var el = dom.createElement(\"div\");\n        el.className = \"ace_cursor\";\n        this.element.appendChild(el);\n        this.cursors.push(el);\n        return el;\n    };\n    Cursor.prototype.removeCursor = function () {\n        if (this.cursors.length > 1) {\n            var el = this.cursors.pop();\n            el.parentNode.removeChild(el);\n            return el;\n        }\n    };\n    Cursor.prototype.hideCursor = function () {\n        this.isVisible = false;\n        dom.addCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    };\n    Cursor.prototype.showCursor = function () {\n        this.isVisible = true;\n        dom.removeCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    };\n    Cursor.prototype.restartTimer = function () {\n        var update = this.$updateCursors;\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n        this.$stopCssAnimation();\n        if (this.smoothBlinking) {\n            this.$isSmoothBlinking = false;\n            dom.removeCssClass(this.element, \"ace_smooth-blinking\");\n        }\n        update(true);\n        if (!this.isBlinking || !this.blinkInterval || !this.isVisible) {\n            this.$stopCssAnimation();\n            return;\n        }\n        if (this.smoothBlinking) {\n            this.$isSmoothBlinking = true;\n            setTimeout(function () {\n                if (this.$isSmoothBlinking) {\n                    dom.addCssClass(this.element, \"ace_smooth-blinking\");\n                }\n            }.bind(this));\n        }\n        if (dom.HAS_CSS_ANIMATION) {\n            this.$startCssAnimation();\n        }\n        else {\n            var blink = /**@this{Cursor}*/ function () {\n                this.timeoutId = setTimeout(function () {\n                    update(false);\n                }, 0.6 * this.blinkInterval);\n            }.bind(this);\n            this.intervalId = setInterval(function () {\n                update(true);\n                blink();\n            }, this.blinkInterval);\n            blink();\n        }\n    };\n    Cursor.prototype.getPixelPosition = function (position, onScreen) {\n        if (!this.config || !this.session)\n            return { left: 0, top: 0 };\n        if (!position)\n            position = this.session.selection.getCursor();\n        var pos = this.session.documentToScreenPosition(position);\n        var cursorLeft = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, position.row)\n            ? this.session.$bidiHandler.getPosLeft(pos.column)\n            : pos.column * this.config.characterWidth);\n        var cursorTop = (pos.row - (onScreen ? this.config.firstRowScreen : 0)) *\n            this.config.lineHeight;\n        return { left: cursorLeft, top: cursorTop };\n    };\n    Cursor.prototype.isCursorInView = function (pixelPos, config) {\n        return pixelPos.top >= 0 && pixelPos.top < config.maxHeight;\n    };\n    Cursor.prototype.update = function (config) {\n        this.config = config;\n        var selections = this.session.$selectionMarkers;\n        var i = 0, cursorIndex = 0;\n        if (selections === undefined || selections.length === 0) {\n            selections = [{ cursor: null }];\n        }\n        for (var i = 0, n = selections.length; i < n; i++) {\n            var pixelPos = this.getPixelPosition(selections[i].cursor, true);\n            if ((pixelPos.top > config.height + config.offset ||\n                pixelPos.top < 0) && i > 1) {\n                continue;\n            }\n            var element = this.cursors[cursorIndex++] || this.addCursor();\n            var style = element.style;\n            if (!this.drawCursor) {\n                if (!this.isCursorInView(pixelPos, config)) {\n                    dom.setStyle(style, \"display\", \"none\");\n                }\n                else {\n                    dom.setStyle(style, \"display\", \"block\");\n                    dom.translate(element, pixelPos.left, pixelPos.top);\n                    dom.setStyle(style, \"width\", Math.round(config.characterWidth) + \"px\");\n                    dom.setStyle(style, \"height\", config.lineHeight + \"px\");\n                }\n            }\n            else {\n                this.drawCursor(element, pixelPos, config, selections[i], this.session);\n            }\n        }\n        while (this.cursors.length > cursorIndex)\n            this.removeCursor();\n        var overwrite = this.session.getOverwrite();\n        this.$setOverwrite(overwrite);\n        this.$pixelPos = pixelPos;\n        this.restartTimer();\n    };\n    Cursor.prototype.$setOverwrite = function (overwrite) {\n        if (overwrite != this.overwrite) {\n            this.overwrite = overwrite;\n            if (overwrite)\n                dom.addCssClass(this.element, \"ace_overwrite-cursors\");\n            else\n                dom.removeCssClass(this.element, \"ace_overwrite-cursors\");\n        }\n    };\n    Cursor.prototype.destroy = function () {\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n    };\n    return Cursor;\n}());\nCursor.prototype.$padding = 0;\nCursor.prototype.drawCursor = null;\nexports.Cursor = Cursor;\n\n});\n\nace.define(\"ace/scrollbar\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar event = require(\"./lib/event\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar MAX_SCROLL_H = 0x8000;\nvar Scrollbar = /** @class */ (function () {\n    function Scrollbar(parent, classSuffix) {\n        this.element = dom.createElement(\"div\");\n        this.element.className = \"ace_scrollbar ace_scrollbar\" + classSuffix;\n        this.inner = dom.createElement(\"div\");\n        this.inner.className = \"ace_scrollbar-inner\";\n        this.inner.textContent = \"\\xa0\";\n        this.element.appendChild(this.inner);\n        parent.appendChild(this.element);\n        this.setVisible(false);\n        this.skipEvent = false;\n        event.addListener(this.element, \"scroll\", this.onScroll.bind(this));\n        event.addListener(this.element, \"mousedown\", event.preventDefault);\n    }\n    Scrollbar.prototype.setVisible = function (isVisible) {\n        this.element.style.display = isVisible ? \"\" : \"none\";\n        this.isVisible = isVisible;\n        this.coeff = 1;\n    };\n    return Scrollbar;\n}());\noop.implement(Scrollbar.prototype, EventEmitter);\nvar VScrollBar = /** @class */ (function (_super) {\n    __extends(VScrollBar, _super);\n    function VScrollBar(parent, renderer) {\n        var _this = _super.call(this, parent, '-v') || this;\n        _this.scrollTop = 0;\n        _this.scrollHeight = 0;\n        renderer.$scrollbarWidth =\n            _this.width = dom.scrollbarWidth(parent.ownerDocument);\n        _this.inner.style.width =\n            _this.element.style.width = (_this.width || 15) + 5 + \"px\";\n        _this.$minWidth = 0;\n        return _this;\n    }\n    VScrollBar.prototype.onScroll = function () {\n        if (!this.skipEvent) {\n            this.scrollTop = this.element.scrollTop;\n            if (this.coeff != 1) {\n                var h = this.element.clientHeight / this.scrollHeight;\n                this.scrollTop = this.scrollTop * (1 - h) / (this.coeff - h);\n            }\n            this._emit(\"scroll\", { data: this.scrollTop });\n        }\n        this.skipEvent = false;\n    };\n    VScrollBar.prototype.getWidth = function () {\n        return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);\n    };\n    VScrollBar.prototype.setHeight = function (height) {\n        this.element.style.height = height + \"px\";\n    };\n    VScrollBar.prototype.setScrollHeight = function (height) {\n        this.scrollHeight = height;\n        if (height > MAX_SCROLL_H) {\n            this.coeff = MAX_SCROLL_H / height;\n            height = MAX_SCROLL_H;\n        }\n        else if (this.coeff != 1) {\n            this.coeff = 1;\n        }\n        this.inner.style.height = height + \"px\";\n    };\n    VScrollBar.prototype.setScrollTop = function (scrollTop) {\n        if (this.scrollTop != scrollTop) {\n            this.skipEvent = true;\n            this.scrollTop = scrollTop;\n            this.element.scrollTop = scrollTop * this.coeff;\n        }\n    };\n    return VScrollBar;\n}(Scrollbar));\nVScrollBar.prototype.setInnerHeight = VScrollBar.prototype.setScrollHeight;\nvar HScrollBar = /** @class */ (function (_super) {\n    __extends(HScrollBar, _super);\n    function HScrollBar(parent, renderer) {\n        var _this = _super.call(this, parent, '-h') || this;\n        _this.scrollLeft = 0;\n        _this.height = renderer.$scrollbarWidth;\n        _this.inner.style.height =\n            _this.element.style.height = (_this.height || 15) + 5 + \"px\";\n        return _this;\n    }\n    HScrollBar.prototype.onScroll = function () {\n        if (!this.skipEvent) {\n            this.scrollLeft = this.element.scrollLeft;\n            this._emit(\"scroll\", { data: this.scrollLeft });\n        }\n        this.skipEvent = false;\n    };\n    HScrollBar.prototype.getHeight = function () {\n        return this.isVisible ? this.height : 0;\n    };\n    HScrollBar.prototype.setWidth = function (width) {\n        this.element.style.width = width + \"px\";\n    };\n    HScrollBar.prototype.setInnerWidth = function (width) {\n        this.inner.style.width = width + \"px\";\n    };\n    HScrollBar.prototype.setScrollWidth = function (width) {\n        this.inner.style.width = width + \"px\";\n    };\n    HScrollBar.prototype.setScrollLeft = function (scrollLeft) {\n        if (this.scrollLeft != scrollLeft) {\n            this.skipEvent = true;\n            this.scrollLeft = this.element.scrollLeft = scrollLeft;\n        }\n    };\n    return HScrollBar;\n}(Scrollbar));\nexports.ScrollBar = VScrollBar; // backward compatibility\nexports.ScrollBarV = VScrollBar; // backward compatibility\nexports.ScrollBarH = HScrollBar; // backward compatibility\nexports.VScrollBar = VScrollBar;\nexports.HScrollBar = HScrollBar;\n\n});\n\nace.define(\"ace/scrollbar_custom\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar event = require(\"./lib/event\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\ndom.importCssString(\".ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{\\n  position: absolute;\\n  background: rgba(128, 128, 128, 0.6);\\n  -moz-box-sizing: border-box;\\n  box-sizing: border-box;\\n  border: 1px solid #bbb;\\n  border-radius: 2px;\\n  z-index: 8;\\n}\\n.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {\\n  position: absolute;\\n  z-index: 6;\\n  background: none;\\n  overflow: hidden!important;\\n}\\n.ace_editor>.ace_sb-v {\\n  z-index: 6;\\n  right: 0;\\n  top: 0;\\n  width: 12px;\\n}\\n.ace_editor>.ace_sb-v div {\\n  z-index: 8;\\n  right: 0;\\n  width: 100%;\\n}\\n.ace_editor>.ace_sb-h {\\n  bottom: 0;\\n  left: 0;\\n  height: 12px;\\n}\\n.ace_editor>.ace_sb-h div {\\n  bottom: 0;\\n  height: 100%;\\n}\\n.ace_editor>.ace_sb_grabbed {\\n  z-index: 8;\\n  background: #000;\\n}\", \"ace_scrollbar.css\", false);\nvar ScrollBar = /** @class */ (function () {\n    function ScrollBar(parent, classSuffix) {\n        this.element = dom.createElement(\"div\");\n        this.element.className = \"ace_sb\" + classSuffix;\n        this.inner = dom.createElement(\"div\");\n        this.inner.className = \"\";\n        this.element.appendChild(this.inner);\n        this.VScrollWidth = 12;\n        this.HScrollHeight = 12;\n        parent.appendChild(this.element);\n        this.setVisible(false);\n        this.skipEvent = false;\n        event.addMultiMouseDownListener(this.element, [500, 300, 300], this, \"onMouseDown\");\n    }\n    ScrollBar.prototype.setVisible = function (isVisible) {\n        this.element.style.display = isVisible ? \"\" : \"none\";\n        this.isVisible = isVisible;\n        this.coeff = 1;\n    };\n    return ScrollBar;\n}());\noop.implement(ScrollBar.prototype, EventEmitter);\nvar VScrollBar = /** @class */ (function (_super) {\n    __extends(VScrollBar, _super);\n    function VScrollBar(parent, renderer) {\n        var _this = _super.call(this, parent, '-v') || this;\n        _this.scrollTop = 0;\n        _this.scrollHeight = 0;\n        _this.parent = parent;\n        _this.width = _this.VScrollWidth;\n        _this.renderer = renderer;\n        _this.inner.style.width = _this.element.style.width = (_this.width || 15) + \"px\";\n        _this.$minWidth = 0;\n        return _this;\n    }\n    VScrollBar.prototype.onMouseDown = function (eType, e) {\n        if (eType !== \"mousedown\")\n            return;\n        if (event.getButton(e) !== 0 || e.detail === 2) {\n            return;\n        }\n        if (e.target === this.inner) {\n            var self = this;\n            var mousePageY = e.clientY;\n            var onMouseMove = function (e) {\n                mousePageY = e.clientY;\n            };\n            var onMouseUp = function () {\n                clearInterval(timerId);\n            };\n            var startY = e.clientY;\n            var startTop = this.thumbTop;\n            var onScrollInterval = function () {\n                if (mousePageY === undefined)\n                    return;\n                var scrollTop = self.scrollTopFromThumbTop(startTop + mousePageY - startY);\n                if (scrollTop === self.scrollTop)\n                    return;\n                self._emit(\"scroll\", { data: scrollTop });\n            };\n            event.capture(this.inner, onMouseMove, onMouseUp);\n            var timerId = setInterval(onScrollInterval, 20);\n            return event.preventDefault(e);\n        }\n        var top = e.clientY - this.element.getBoundingClientRect().top - this.thumbHeight / 2;\n        this._emit(\"scroll\", { data: this.scrollTopFromThumbTop(top) });\n        return event.preventDefault(e);\n    };\n    VScrollBar.prototype.getHeight = function () {\n        return this.height;\n    };\n    VScrollBar.prototype.scrollTopFromThumbTop = function (thumbTop) {\n        var scrollTop = thumbTop * (this.pageHeight - this.viewHeight) / (this.slideHeight - this.thumbHeight);\n        scrollTop = scrollTop >> 0;\n        if (scrollTop < 0) {\n            scrollTop = 0;\n        }\n        else if (scrollTop > this.pageHeight - this.viewHeight) {\n            scrollTop = this.pageHeight - this.viewHeight;\n        }\n        return scrollTop;\n    };\n    VScrollBar.prototype.getWidth = function () {\n        return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);\n    };\n    VScrollBar.prototype.setHeight = function (height) {\n        this.height = Math.max(0, height);\n        this.slideHeight = this.height;\n        this.viewHeight = this.height;\n        this.setScrollHeight(this.pageHeight, true);\n    };\n    VScrollBar.prototype.setScrollHeight = function (height, force) {\n        if (this.pageHeight === height && !force)\n            return;\n        this.pageHeight = height;\n        this.thumbHeight = this.slideHeight * this.viewHeight / this.pageHeight;\n        if (this.thumbHeight > this.slideHeight)\n            this.thumbHeight = this.slideHeight;\n        if (this.thumbHeight < 15)\n            this.thumbHeight = 15;\n        this.inner.style.height = this.thumbHeight + \"px\";\n        if (this.scrollTop > (this.pageHeight - this.viewHeight)) {\n            this.scrollTop = (this.pageHeight - this.viewHeight);\n            if (this.scrollTop < 0)\n                this.scrollTop = 0;\n            this._emit(\"scroll\", { data: this.scrollTop });\n        }\n    };\n    VScrollBar.prototype.setScrollTop = function (scrollTop) {\n        this.scrollTop = scrollTop;\n        if (scrollTop < 0)\n            scrollTop = 0;\n        this.thumbTop = scrollTop * (this.slideHeight - this.thumbHeight) / (this.pageHeight - this.viewHeight);\n        this.inner.style.top = this.thumbTop + \"px\";\n    };\n    return VScrollBar;\n}(ScrollBar));\nVScrollBar.prototype.setInnerHeight = VScrollBar.prototype.setScrollHeight;\nvar HScrollBar = /** @class */ (function (_super) {\n    __extends(HScrollBar, _super);\n    function HScrollBar(parent, renderer) {\n        var _this = _super.call(this, parent, '-h') || this;\n        _this.scrollLeft = 0;\n        _this.scrollWidth = 0;\n        _this.height = _this.HScrollHeight;\n        _this.inner.style.height = _this.element.style.height = (_this.height || 12) + \"px\";\n        _this.renderer = renderer;\n        return _this;\n    }\n    HScrollBar.prototype.onMouseDown = function (eType, e) {\n        if (eType !== \"mousedown\")\n            return;\n        if (event.getButton(e) !== 0 || e.detail === 2) {\n            return;\n        }\n        if (e.target === this.inner) {\n            var self = this;\n            var mousePageX = e.clientX;\n            var onMouseMove = function (e) {\n                mousePageX = e.clientX;\n            };\n            var onMouseUp = function () {\n                clearInterval(timerId);\n            };\n            var startX = e.clientX;\n            var startLeft = this.thumbLeft;\n            var onScrollInterval = function () {\n                if (mousePageX === undefined)\n                    return;\n                var scrollLeft = self.scrollLeftFromThumbLeft(startLeft + mousePageX - startX);\n                if (scrollLeft === self.scrollLeft)\n                    return;\n                self._emit(\"scroll\", { data: scrollLeft });\n            };\n            event.capture(this.inner, onMouseMove, onMouseUp);\n            var timerId = setInterval(onScrollInterval, 20);\n            return event.preventDefault(e);\n        }\n        var left = e.clientX - this.element.getBoundingClientRect().left - this.thumbWidth / 2;\n        this._emit(\"scroll\", { data: this.scrollLeftFromThumbLeft(left) });\n        return event.preventDefault(e);\n    };\n    HScrollBar.prototype.getHeight = function () {\n        return this.isVisible ? this.height : 0;\n    };\n    HScrollBar.prototype.scrollLeftFromThumbLeft = function (thumbLeft) {\n        var scrollLeft = thumbLeft * (this.pageWidth - this.viewWidth) / (this.slideWidth - this.thumbWidth);\n        scrollLeft = scrollLeft >> 0;\n        if (scrollLeft < 0) {\n            scrollLeft = 0;\n        }\n        else if (scrollLeft > this.pageWidth - this.viewWidth) {\n            scrollLeft = this.pageWidth - this.viewWidth;\n        }\n        return scrollLeft;\n    };\n    HScrollBar.prototype.setWidth = function (width) {\n        this.width = Math.max(0, width);\n        this.element.style.width = this.width + \"px\";\n        this.slideWidth = this.width;\n        this.viewWidth = this.width;\n        this.setScrollWidth(this.pageWidth, true);\n    };\n    HScrollBar.prototype.setScrollWidth = function (width, force) {\n        if (this.pageWidth === width && !force)\n            return;\n        this.pageWidth = width;\n        this.thumbWidth = this.slideWidth * this.viewWidth / this.pageWidth;\n        if (this.thumbWidth > this.slideWidth)\n            this.thumbWidth = this.slideWidth;\n        if (this.thumbWidth < 15)\n            this.thumbWidth = 15;\n        this.inner.style.width = this.thumbWidth + \"px\";\n        if (this.scrollLeft > (this.pageWidth - this.viewWidth)) {\n            this.scrollLeft = (this.pageWidth - this.viewWidth);\n            if (this.scrollLeft < 0)\n                this.scrollLeft = 0;\n            this._emit(\"scroll\", { data: this.scrollLeft });\n        }\n    };\n    HScrollBar.prototype.setScrollLeft = function (scrollLeft) {\n        this.scrollLeft = scrollLeft;\n        if (scrollLeft < 0)\n            scrollLeft = 0;\n        this.thumbLeft = scrollLeft * (this.slideWidth - this.thumbWidth) / (this.pageWidth - this.viewWidth);\n        this.inner.style.left = (this.thumbLeft) + \"px\";\n    };\n    return HScrollBar;\n}(ScrollBar));\nHScrollBar.prototype.setInnerWidth = HScrollBar.prototype.setScrollWidth;\nexports.ScrollBar = VScrollBar; // backward compatibility\nexports.ScrollBarV = VScrollBar; // backward compatibility\nexports.ScrollBarH = HScrollBar; // backward compatibility\nexports.VScrollBar = VScrollBar;\nexports.HScrollBar = HScrollBar;\n\n});\n\nace.define(\"ace/renderloop\",[\"require\",\"exports\",\"module\",\"ace/lib/event\"], function(require, exports, module){\"use strict\";\nvar event = require(\"./lib/event\");\nvar RenderLoop = /** @class */ (function () {\n    function RenderLoop(onRender, win) {\n        this.onRender = onRender;\n        this.pending = false;\n        this.changes = 0;\n        this.$recursionLimit = 2;\n        this.window = win || window;\n        var _self = this;\n        this._flush = function (ts) {\n            _self.pending = false;\n            var changes = _self.changes;\n            if (changes) {\n                event.blockIdle(100);\n                _self.changes = 0;\n                _self.onRender(changes);\n            }\n            if (_self.changes) {\n                if (_self.$recursionLimit-- < 0)\n                    return;\n                _self.schedule();\n            }\n            else {\n                _self.$recursionLimit = 2;\n            }\n        };\n    }\n    RenderLoop.prototype.schedule = function (change) {\n        this.changes = this.changes | change;\n        if (this.changes && !this.pending) {\n            event.nextFrame(this._flush);\n            this.pending = true;\n        }\n    };\n    RenderLoop.prototype.clear = function (change) {\n        var changes = this.changes;\n        this.changes = 0;\n        return changes;\n    };\n    return RenderLoop;\n}());\nexports.RenderLoop = RenderLoop;\n\n});\n\nace.define(\"ace/layer/font_metrics\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/lib/event_emitter\"], function(require, exports, module){var oop = require(\"../lib/oop\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar CHAR_COUNT = 512;\nvar USE_OBSERVER = typeof ResizeObserver == \"function\";\nvar L = 200;\nvar FontMetrics = /** @class */ (function () {\n    function FontMetrics(parentEl) {\n        this.el = dom.createElement(\"div\");\n        this.$setMeasureNodeStyles(this.el.style, true);\n        this.$main = dom.createElement(\"div\");\n        this.$setMeasureNodeStyles(this.$main.style);\n        this.$measureNode = dom.createElement(\"div\");\n        this.$setMeasureNodeStyles(this.$measureNode.style);\n        this.el.appendChild(this.$main);\n        this.el.appendChild(this.$measureNode);\n        parentEl.appendChild(this.el);\n        this.$measureNode.textContent = lang.stringRepeat(\"X\", CHAR_COUNT);\n        this.$characterSize = { width: 0, height: 0 };\n        if (USE_OBSERVER)\n            this.$addObserver();\n        else\n            this.checkForSizeChanges();\n    }\n    FontMetrics.prototype.$setMeasureNodeStyles = function (style, isRoot) {\n        style.width = style.height = \"auto\";\n        style.left = style.top = \"0px\";\n        style.visibility = \"hidden\";\n        style.position = \"absolute\";\n        style.whiteSpace = \"pre\";\n        if (useragent.isIE < 8) {\n            style[\"font-family\"] = \"inherit\";\n        }\n        else {\n            style.font = \"inherit\";\n        }\n        style.overflow = isRoot ? \"hidden\" : \"visible\";\n    };\n    FontMetrics.prototype.checkForSizeChanges = function (size) {\n        if (size === undefined)\n            size = this.$measureSizes();\n        if (size && (this.$characterSize.width !== size.width || this.$characterSize.height !== size.height)) {\n            this.$measureNode.style.fontWeight = \"bold\";\n            var boldSize = this.$measureSizes();\n            this.$measureNode.style.fontWeight = \"\";\n            this.$characterSize = size;\n            this.charSizes = Object.create(null);\n            this.allowBoldFonts = boldSize && boldSize.width === size.width && boldSize.height === size.height;\n            this._emit(\"changeCharacterSize\", { data: size });\n        }\n    };\n    FontMetrics.prototype.$addObserver = function () {\n        var self = this;\n        this.$observer = new window.ResizeObserver(function (e) {\n            self.checkForSizeChanges();\n        });\n        this.$observer.observe(this.$measureNode);\n    };\n    FontMetrics.prototype.$pollSizeChanges = function () {\n        if (this.$pollSizeChangesTimer || this.$observer)\n            return this.$pollSizeChangesTimer;\n        var self = this;\n        return this.$pollSizeChangesTimer = event.onIdle(function cb() {\n            self.checkForSizeChanges();\n            event.onIdle(cb, 500);\n        }, 500);\n    };\n    FontMetrics.prototype.setPolling = function (val) {\n        if (val) {\n            this.$pollSizeChanges();\n        }\n        else if (this.$pollSizeChangesTimer) {\n            clearInterval(this.$pollSizeChangesTimer);\n            this.$pollSizeChangesTimer = 0;\n        }\n    };\n    FontMetrics.prototype.$measureSizes = function (node) {\n        var size = {\n            height: (node || this.$measureNode).clientHeight,\n            width: (node || this.$measureNode).clientWidth / CHAR_COUNT\n        };\n        if (size.width === 0 || size.height === 0)\n            return null;\n        return size;\n    };\n    FontMetrics.prototype.$measureCharWidth = function (ch) {\n        this.$main.textContent = lang.stringRepeat(ch, CHAR_COUNT);\n        var rect = this.$main.getBoundingClientRect();\n        return rect.width / CHAR_COUNT;\n    };\n    FontMetrics.prototype.getCharacterWidth = function (ch) {\n        var w = this.charSizes[ch];\n        if (w === undefined) {\n            w = this.charSizes[ch] = this.$measureCharWidth(ch) / this.$characterSize.width;\n        }\n        return w;\n    };\n    FontMetrics.prototype.destroy = function () {\n        clearInterval(this.$pollSizeChangesTimer);\n        if (this.$observer)\n            this.$observer.disconnect();\n        if (this.el && this.el.parentNode)\n            this.el.parentNode.removeChild(this.el);\n    };\n    FontMetrics.prototype.$getZoom = function (element) {\n        if (!element || !element.parentElement)\n            return 1;\n        return (Number(window.getComputedStyle(element)[\"zoom\"]) || 1) * this.$getZoom(element.parentElement);\n    };\n    FontMetrics.prototype.$initTransformMeasureNodes = function () {\n        var t = function (t, l) {\n            return [\"div\", {\n                    style: \"position: absolute;top:\" + t + \"px;left:\" + l + \"px;\"\n                }];\n        };\n        this.els = dom.buildDom([t(0, 0), t(L, 0), t(0, L), t(L, L)], this.el);\n    };\n    FontMetrics.prototype.transformCoordinates = function (clientPos, elPos) {\n        if (clientPos) {\n            var zoom = this.$getZoom(this.el);\n            clientPos = mul(1 / zoom, clientPos);\n        }\n        function solve(l1, l2, r) {\n            var det = l1[1] * l2[0] - l1[0] * l2[1];\n            return [\n                (-l2[1] * r[0] + l2[0] * r[1]) / det,\n                (+l1[1] * r[0] - l1[0] * r[1]) / det\n            ];\n        }\n        function sub(a, b) { return [a[0] - b[0], a[1] - b[1]]; }\n        function add(a, b) { return [a[0] + b[0], a[1] + b[1]]; }\n        function mul(a, b) { return [a * b[0], a * b[1]]; }\n        if (!this.els)\n            this.$initTransformMeasureNodes();\n        function p(el) {\n            var r = el.getBoundingClientRect();\n            return [r.left, r.top];\n        }\n        var a = p(this.els[0]);\n        var b = p(this.els[1]);\n        var c = p(this.els[2]);\n        var d = p(this.els[3]);\n        var h = solve(sub(d, b), sub(d, c), sub(add(b, c), add(d, a)));\n        var m1 = mul(1 + h[0], sub(b, a));\n        var m2 = mul(1 + h[1], sub(c, a));\n        if (elPos) {\n            var x = elPos;\n            var k = h[0] * x[0] / L + h[1] * x[1] / L + 1;\n            var ut = add(mul(x[0], m1), mul(x[1], m2));\n            return add(mul(1 / k / L, ut), a);\n        }\n        var u = sub(clientPos, a);\n        var f = solve(sub(m1, mul(h[0], u)), sub(m2, mul(h[1], u)), u);\n        return mul(L, f);\n    };\n    return FontMetrics;\n}());\nFontMetrics.prototype.$characterSize = { width: 0, height: 0 };\noop.implement(FontMetrics.prototype, EventEmitter);\nexports.FontMetrics = FontMetrics;\n\n});\n\nace.define(\"ace/css/editor-css\",[\"require\",\"exports\",\"module\"], function(require, exports, module){/*\nstyles = []\nfor (var i = 1; i < 16; i++) {\n    styles.push(\".ace_br\" + i + \"{\" + (\n        [\"top-left\", \"top-right\", \"bottom-right\", \"bottom-left\"]\n    ).map(function(x, j) {\n        return i & (1<<j) ? \"border-\" + x + \"-radius: 3px;\" : \"\"\n    }).filter(Boolean).join(\" \") + \"}\")\n}\nstyles.join(\"\\\\n\")\n*/\nmodule.exports = \"\\n.ace_br1 {border-top-left-radius    : 3px;}\\n.ace_br2 {border-top-right-radius   : 3px;}\\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\\n.ace_br4 {border-bottom-right-radius: 3px;}\\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\\n.ace_br8 {border-bottom-left-radius : 3px;}\\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\\n\\n\\n.ace_editor {\\n    position: relative;\\n    overflow: hidden;\\n    padding: 0;\\n    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;\\n    direction: ltr;\\n    text-align: left;\\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\\n    forced-color-adjust: none;\\n}\\n\\n.ace_scroller {\\n    position: absolute;\\n    overflow: hidden;\\n    top: 0;\\n    bottom: 0;\\n    background-color: inherit;\\n    -ms-user-select: none;\\n    -moz-user-select: none;\\n    -webkit-user-select: none;\\n    user-select: none;\\n    cursor: text;\\n}\\n\\n.ace_content {\\n    position: absolute;\\n    box-sizing: border-box;\\n    min-width: 100%;\\n    contain: style size layout;\\n    font-variant-ligatures: no-common-ligatures;\\n}\\n.ace_invisible {\\n    font-variant-ligatures: none;\\n}\\n\\n.ace_keyboard-focus:focus {\\n    box-shadow: inset 0 0 0 2px #5E9ED6;\\n    outline: none;\\n}\\n\\n.ace_dragging .ace_scroller:before{\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    content: '';\\n    background: rgba(250, 250, 250, 0.01);\\n    z-index: 1000;\\n}\\n.ace_dragging.ace_dark .ace_scroller:before{\\n    background: rgba(0, 0, 0, 0.01);\\n}\\n\\n.ace_gutter {\\n    position: absolute;\\n    overflow : hidden;\\n    width: auto;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    cursor: default;\\n    z-index: 4;\\n    -ms-user-select: none;\\n    -moz-user-select: none;\\n    -webkit-user-select: none;\\n    user-select: none;\\n    contain: style size layout;\\n}\\n\\n.ace_gutter-active-line {\\n    position: absolute;\\n    left: 0;\\n    right: 0;\\n}\\n\\n.ace_scroller.ace_scroll-left:after {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\\n    pointer-events: none;\\n}\\n\\n.ace_gutter-cell, .ace_gutter-cell_svg-icons {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    padding-left: 19px;\\n    padding-right: 6px;\\n    background-repeat: no-repeat;\\n}\\n\\n.ace_gutter-cell_svg-icons .ace_gutter_annotation {\\n    margin-left: -14px;\\n    float: left;\\n}\\n\\n.ace_gutter-cell .ace_gutter_annotation {\\n    margin-left: -19px;\\n    float: left;\\n}\\n\\n.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold, .ace_gutter-cell.ace_security, .ace_icon.ace_security, .ace_icon.ace_security_fold {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==\\\");\\n    background-repeat: no-repeat;\\n    background-position: 2px center;\\n}\\n\\n.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==\\\");\\n    background-repeat: no-repeat;\\n    background-position: 2px center;\\n}\\n\\n.ace_gutter-cell.ace_info, .ace_icon.ace_info, .ace_gutter-cell.ace_hint, .ace_icon.ace_hint {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=\\\");\\n    background-repeat: no-repeat;\\n    background-position: 2px center;\\n}\\n\\n.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info, .ace_dark .ace_gutter-cell.ace_hint, .ace_dark .ace_icon.ace_hint {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC\\\");\\n}\\n\\n.ace_icon_svg.ace_error {\\n    -webkit-mask-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+\\\");\\n    background-color: crimson;\\n}\\n.ace_icon_svg.ace_security {\\n    -webkit-mask-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iZGFya29yYW5nZSIgZmlsbD0ibm9uZSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgogICAgICAgIDxwYXRoIGNsYXNzPSJzdHJva2UtbGluZWpvaW4tcm91bmQiIGQ9Ik04IDE0LjgzMDdDOCAxNC44MzA3IDIgMTIuOTA0NyAyIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOEM3Ljk4OTk5IDEuMzQ5MTggMTAuNjkgMy4yNjU0OCAxNCAzLjI2NTQ4VjguMDg5OTJDMTQgMTIuOTA0NyA4IDE0LjgzMDcgOCAxNC44MzA3WiIvPgogICAgICAgIDxwYXRoIGQ9Ik0yIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOCIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMy45OSA4LjA4OTkyVjMuMjY1NDhDMTAuNjggMy4yNjU0OCA4IDEuMzQ5MTggOCAxLjM0OTE4Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggNFY5Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggMTBWMTIiLz4KICAgIDwvZz4KPC9zdmc+\\\");\\n    background-color: crimson;\\n}\\n.ace_icon_svg.ace_warning {\\n    -webkit-mask-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==\\\");\\n    background-color: darkorange;\\n}\\n.ace_icon_svg.ace_info {\\n    -webkit-mask-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==\\\");\\n    background-color: royalblue;\\n}\\n.ace_icon_svg.ace_hint {\\n    -webkit-mask-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ic2lsdmVyIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTYgMTRIMTAiLz4KICAgICAgICA8cGF0aCBkPSJNOCAxMUg5QzkgOS40NzAwMiAxMiA4LjU0MDAyIDEyIDUuNzYwMDJDMTIuMDIgNC40MDAwMiAxMS4zOSAzLjM2MDAyIDEwLjQzIDIuNjcwMDJDOSAxLjY0MDAyIDcuMDAwMDEgMS42NDAwMiA1LjU3MDAxIDIuNjcwMDJDNC42MTAwMSAzLjM2MDAyIDMuOTggNC40MDAwMiA0IDUuNzYwMDJDNCA4LjU0MDAyIDcuMDAwMDEgOS40NzAwMiA3LjAwMDAxIDExSDhaIi8+CiAgICA8L2c+Cjwvc3ZnPg==\\\");\\n    background-color: silver;\\n}\\n\\n.ace_icon_svg.ace_error_fold {\\n    -webkit-mask-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=\\\");\\n    background-color: crimson;\\n}\\n.ace_icon_svg.ace_security_fold {\\n    -webkit-mask-image: url(\\\"data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTcgMTQiIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0iTTEwLjAwMDEgMTMuNjk5MkMxMC4wMDAxIDEzLjY5OTIgMTEuOTI0MSAxMy40NzYzIDEzIDEyLjY5OTJDMTQuNDEzOSAxMS42NzgxIDE2IDEwLjUgMTYuMTI1MSA2LjgxMTI2VjIuNTg5ODdDMTYuMTI1MSAyLjU0NzY4IDE2LjEyMjEgMi41MDYxOSAxNi4xMTY0IDIuNDY1NTlWMS43MTQ4NUgxNS4yNDE0TDE1LjIzMDcgMS43MTQ4NEwxNC42MjUxIDEuNjk5MjJWNi44MTEyM0MxNC42MjUxIDguNTEwNjEgMTQuNjI1MSA5LjQ2NDYxIDEyLjc4MjQgMTEuNzIxQzEyLjE1ODYgMTIuNDg0OCAxMC4wMDAxIDEzLjY5OTIgMTAuMDAwMSAxMy42OTkyWiIgZmlsbD0iY3JpbXNvbiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMzM2MDkgMC4zNjc0NzVDNy4wMzIxNCAwLjE1MjY1MiA2LjYyNTQ4IDAuMTUzNjE0IDYuMzIyNTMgMC4zNjk5OTdMNi4zMDg2OSAwLjM3OTU1NEM2LjI5NTUzIDAuMzg4NTg4IDYuMjczODggMC40MDMyNjYgNi4yNDQxNyAwLjQyMjc4OUM2LjE4NDcxIDAuNDYxODYgNi4wOTMyMSAwLjUyMDE3MSA1Ljk3MzEzIDAuNTkxMzczQzUuNzMyNTEgMC43MzQwNTkgNS4zNzk5IDAuOTI2ODY0IDQuOTQyNzkgMS4xMjAwOUM0LjA2MTQ0IDEuNTA5NyAyLjg3NTQxIDEuODgzNzcgMS41ODk4NCAxLjg4Mzc3SDAuNzE0ODQ0VjIuNzU4NzdWNi45ODAxNUMwLjcxNDg0NCA5LjQ5Mzc0IDIuMjg4NjYgMTEuMTk3MyAzLjcwMjU0IDEyLjIxODVDNC40MTg0NSAxMi43MzU1IDUuMTI4NzQgMTMuMTA1MyA1LjY1NzMzIDEzLjM0NTdDNS45MjI4NCAxMy40NjY0IDYuMTQ1NjYgMTMuNTU1OSA2LjMwNDY1IDEzLjYxNjFDNi4zODQyMyAxMy42NDYyIDYuNDQ4MDUgMTMuNjY5IDYuNDkzNDkgMTMuNjg0OEM2LjUxNjIyIDEzLjY5MjcgNi41MzQzOCAxMy42OTg5IDYuNTQ3NjQgMTMuNzAzM0w2LjU2MzgyIDEzLjcwODdMNi41NjkwOCAxMy43MTA0TDYuNTcwOTkgMTMuNzExTDYuODM5ODQgMTMuNzUzM0w2LjU3MjQyIDEzLjcxMTVDNi43NDYzMyAxMy43NjczIDYuOTMzMzUgMTMuNzY3MyA3LjEwNzI3IDEzLjcxMTVMNy4xMDg3IDEzLjcxMUw3LjExMDYxIDEzLjcxMDRMNy4xMTU4NyAxMy43MDg3TDcuMTMyMDUgMTMuNzAzM0M3LjE0NTMxIDEzLjY5ODkgNy4xNjM0NiAxMy42OTI3IDcuMTg2MTkgMTMuNjg0OEM3LjIzMTY0IDEzLjY2OSA3LjI5NTQ2IDEzLjY0NjIgNy4zNzUwMyAxMy42MTYxQzcuNTM0MDMgMTMuNTU1OSA3Ljc1Njg1IDEzLjQ2NjQgOC4wMjIzNiAxMy4zNDU3QzguNTUwOTUgMTMuMTA1MyA5LjI2MTIzIDEyLjczNTUgOS45NzcxNSAxMi4yMTg1QzExLjM5MSAxMS4xOTczIDEyLjk2NDggOS40OTM3NyAxMi45NjQ4IDYuOTgwMThWMi43NTg4QzEyLjk2NDggMi43MTY2IDEyLjk2MTkgMi42NzUxMSAxMi45NTYxIDIuNjM0NTFWMS44ODM3N0gxMi4wODExQzEyLjA3NzUgMS44ODM3NyAxMi4wNzQgMS44ODM3NyAxMi4wNzA0IDEuODgzNzdDMTAuNzk3OSAxLjg4MDA0IDkuNjE5NjIgMS41MTEwMiA4LjczODk0IDEuMTI0ODZDOC43MzUzNCAxLjEyMzI3IDguNzMxNzQgMS4xMjE2OCA4LjcyODE0IDEuMTIwMDlDOC4yOTEwMyAwLjkyNjg2NCA3LjkzODQyIDAuNzM0MDU5IDcuNjk3NzkgMC41OTEzNzNDNy41Nzc3MiAwLjUyMDE3MSA3LjQ4NjIyIDAuNDYxODYgNy40MjY3NiAwLjQyMjc4OUM3LjM5NzA1IDAuNDAzMjY2IDcuMzc1MzkgMC4zODg1ODggNy4zNjIyNCAwLjM3OTU1NEw3LjM0ODk2IDAuMzcwMzVDNy4zNDg5NiAwLjM3MDM1IDcuMzQ4NDcgMC4zNzAwMiA3LjM0NTYzIDAuMzc0MDU0TDcuMzM3NzkgMC4zNjg2NTlMNy4zMzYwOSAwLjM2NzQ3NVpNOC4wMzQ3MSAyLjcyNjkxQzguODYwNCAzLjA5MDYzIDkuOTYwNjYgMy40NjMwOSAxMS4yMDYxIDMuNTg5MDdWNi45ODAxNUgxMS4yMTQ4QzExLjIxNDggOC42Nzk1MyAxMC4xNjM3IDkuOTI1MDcgOC45NTI1NCAxMC43OTk4QzguMzU1OTUgMTEuMjMwNiA3Ljc1Mzc0IDExLjU0NTQgNy4yOTc5NiAxMS43NTI3QzcuMTE2NzEgMTEuODM1MSA2Ljk2MDYyIDExLjg5OTYgNi44Mzk4NCAxMS45NDY5QzYuNzE5MDYgMTEuODk5NiA2LjU2Mjk3IDExLjgzNTEgNi4zODE3MyAxMS43NTI3QzUuOTI1OTUgMTEuNTQ1NCA1LjMyMzczIDExLjIzMDYgNC43MjcxNSAxMC43OTk4QzMuNTE2MDMgOS45MjUwNyAyLjQ2NDg0IDguNjc5NTUgMi40NjQ4NCA2Ljk4MDE4VjMuNTg5MDlDMy43MTczOCAzLjQ2MjM5IDQuODIzMDggMy4wODYzOSA1LjY1MDMzIDIuNzIwNzFDNi4xNDIyOCAyLjUwMzI0IDYuNTQ0ODUgMi4yODUzNyA2LjgzMjU0IDIuMTE2MjRDNy4xMjE4MSAyLjI4NTM1IDcuNTI3IDIuNTAzNTIgOC4wMjE5NiAyLjcyMTMxQzguMDI2MiAyLjcyMzE3IDguMDMwNDUgMi43MjUwNCA4LjAzNDcxIDIuNzI2OTFaTTUuOTY0ODQgMy40MDE0N1Y3Ljc3NjQ3SDcuNzE0ODRWMy40MDE0N0g1Ljk2NDg0Wk01Ljk2NDg0IDEwLjQwMTVWOC42NTE0N0g3LjcxNDg0VjEwLjQwMTVINS45NjQ4NFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=\\\");\\n    background-color: crimson;\\n}\\n.ace_icon_svg.ace_warning_fold {\\n    -webkit-mask-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=\\\");\\n    background-color: darkorange;\\n}\\n\\n.ace_scrollbar {\\n    contain: strict;\\n    position: absolute;\\n    right: 0;\\n    bottom: 0;\\n    z-index: 6;\\n}\\n\\n.ace_scrollbar-inner {\\n    position: absolute;\\n    cursor: text;\\n    left: 0;\\n    top: 0;\\n}\\n\\n.ace_scrollbar-v{\\n    overflow-x: hidden;\\n    overflow-y: scroll;\\n    top: 0;\\n}\\n\\n.ace_scrollbar-h {\\n    overflow-x: scroll;\\n    overflow-y: hidden;\\n    left: 0;\\n}\\n\\n.ace_print-margin {\\n    position: absolute;\\n    height: 100%;\\n}\\n\\n.ace_text-input {\\n    position: absolute;\\n    z-index: 0;\\n    width: 0.5em;\\n    height: 1em;\\n    opacity: 0;\\n    background: transparent;\\n    -moz-appearance: none;\\n    appearance: none;\\n    border: none;\\n    resize: none;\\n    outline: none;\\n    overflow: hidden;\\n    font: inherit;\\n    padding: 0 1px;\\n    margin: 0 -1px;\\n    contain: strict;\\n    -ms-user-select: text;\\n    -moz-user-select: text;\\n    -webkit-user-select: text;\\n    user-select: text;\\n    /*with `pre-line` chrome inserts &nbsp; instead of space*/\\n    white-space: pre!important;\\n}\\n.ace_text-input.ace_composition {\\n    background: transparent;\\n    color: inherit;\\n    z-index: 1000;\\n    opacity: 1;\\n}\\n.ace_composition_placeholder { color: transparent }\\n.ace_composition_marker { \\n    border-bottom: 1px solid;\\n    position: absolute;\\n    border-radius: 0;\\n    margin-top: 1px;\\n}\\n\\n[ace_nocontext=true] {\\n    transform: none!important;\\n    filter: none!important;\\n    clip-path: none!important;\\n    mask : none!important;\\n    contain: none!important;\\n    perspective: none!important;\\n    mix-blend-mode: initial!important;\\n    z-index: auto;\\n}\\n\\n.ace_layer {\\n    z-index: 1;\\n    position: absolute;\\n    overflow: hidden;\\n    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/\\n    word-wrap: normal;\\n    white-space: pre;\\n    height: 100%;\\n    width: 100%;\\n    box-sizing: border-box;\\n    /* setting pointer-events: auto; on node under the mouse, which changes\\n        during scroll, will break mouse wheel scrolling in Safari */\\n    pointer-events: none;\\n}\\n\\n.ace_gutter-layer {\\n    position: relative;\\n    width: auto;\\n    text-align: right;\\n    pointer-events: auto;\\n    height: 1000000px;\\n    contain: style size layout;\\n}\\n\\n.ace_text-layer {\\n    font: inherit !important;\\n    position: absolute;\\n    height: 1000000px;\\n    width: 1000000px;\\n    contain: style size layout;\\n}\\n\\n.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {\\n    contain: style size layout;\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n}\\n\\n.ace_hidpi .ace_text-layer,\\n.ace_hidpi .ace_gutter-layer,\\n.ace_hidpi .ace_content,\\n.ace_hidpi .ace_gutter {\\n    contain: strict;\\n}\\n.ace_hidpi .ace_text-layer > .ace_line, \\n.ace_hidpi .ace_text-layer > .ace_line_group {\\n    contain: strict;\\n}\\n\\n.ace_cjk {\\n    display: inline-block;\\n    text-align: center;\\n}\\n\\n.ace_cursor-layer {\\n    z-index: 4;\\n}\\n\\n.ace_cursor {\\n    z-index: 4;\\n    position: absolute;\\n    box-sizing: border-box;\\n    border-left: 2px solid;\\n    /* workaround for smooth cursor repaintng whole screen in chrome */\\n    transform: translatez(0);\\n}\\n\\n.ace_multiselect .ace_cursor {\\n    border-left-width: 1px;\\n}\\n\\n.ace_slim-cursors .ace_cursor {\\n    border-left-width: 1px;\\n}\\n\\n.ace_overwrite-cursors .ace_cursor {\\n    border-left-width: 0;\\n    border-bottom: 1px solid;\\n}\\n\\n.ace_hidden-cursors .ace_cursor {\\n    opacity: 0.2;\\n}\\n\\n.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {\\n    opacity: 0;\\n}\\n\\n.ace_smooth-blinking .ace_cursor {\\n    transition: opacity 0.18s;\\n}\\n\\n.ace_animate-blinking .ace_cursor {\\n    animation-duration: 1000ms;\\n    animation-timing-function: step-end;\\n    animation-name: blink-ace-animate;\\n    animation-iteration-count: infinite;\\n}\\n\\n.ace_animate-blinking.ace_smooth-blinking .ace_cursor {\\n    animation-duration: 1000ms;\\n    animation-timing-function: ease-in-out;\\n    animation-name: blink-ace-animate-smooth;\\n}\\n    \\n@keyframes blink-ace-animate {\\n    from, to { opacity: 1; }\\n    60% { opacity: 0; }\\n}\\n\\n@keyframes blink-ace-animate-smooth {\\n    from, to { opacity: 1; }\\n    45% { opacity: 1; }\\n    60% { opacity: 0; }\\n    85% { opacity: 0; }\\n}\\n\\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\\n    position: absolute;\\n    z-index: 3;\\n}\\n\\n.ace_marker-layer .ace_selection {\\n    position: absolute;\\n    z-index: 5;\\n}\\n\\n.ace_marker-layer .ace_bracket {\\n    position: absolute;\\n    z-index: 6;\\n}\\n\\n.ace_marker-layer .ace_error_bracket {\\n    position: absolute;\\n    border-bottom: 1px solid #DE5555;\\n    border-radius: 0;\\n}\\n\\n.ace_marker-layer .ace_active-line {\\n    position: absolute;\\n    z-index: 2;\\n}\\n\\n.ace_marker-layer .ace_selected-word {\\n    position: absolute;\\n    z-index: 4;\\n    box-sizing: border-box;\\n}\\n\\n.ace_line .ace_fold {\\n    box-sizing: border-box;\\n\\n    display: inline-block;\\n    height: 11px;\\n    margin-top: -2px;\\n    vertical-align: middle;\\n\\n    background-image:\\n        url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\\\"),\\n        url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=\\\");\\n    background-repeat: no-repeat, repeat-x;\\n    background-position: center center, top left;\\n    color: transparent;\\n\\n    border: 1px solid black;\\n    border-radius: 2px;\\n\\n    cursor: pointer;\\n    pointer-events: auto;\\n}\\n\\n.ace_dark .ace_fold {\\n}\\n\\n.ace_fold:hover{\\n    background-image:\\n        url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\\\"),\\n        url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC\\\");\\n}\\n\\n.ace_tooltip {\\n    background-color: #f5f5f5;\\n    border: 1px solid gray;\\n    border-radius: 1px;\\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\\n    color: black;\\n    padding: 3px 4px;\\n    position: fixed;\\n    z-index: 999999;\\n    box-sizing: border-box;\\n    cursor: default;\\n    white-space: pre-wrap;\\n    word-wrap: break-word;\\n    line-height: normal;\\n    font-style: normal;\\n    font-weight: normal;\\n    letter-spacing: normal;\\n    pointer-events: none;\\n    overflow: auto;\\n    max-width: min(33em, 66vw);\\n    overscroll-behavior: contain;\\n}\\n.ace_tooltip pre {\\n    white-space: pre-wrap;\\n}\\n\\n.ace_tooltip.ace_dark {\\n    background-color: #636363;\\n    color: #fff;\\n}\\n\\n.ace_tooltip:focus {\\n    outline: 1px solid #5E9ED6;\\n}\\n\\n.ace_icon {\\n    display: inline-block;\\n    width: 18px;\\n    vertical-align: top;\\n}\\n\\n.ace_icon_svg {\\n    display: inline-block;\\n    width: 12px;\\n    vertical-align: top;\\n    -webkit-mask-repeat: no-repeat;\\n    -webkit-mask-size: 12px;\\n    -webkit-mask-position: center;\\n}\\n\\n.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {\\n    padding-right: 13px;\\n}\\n\\n.ace_fold-widget, .ace_custom-widget {\\n    box-sizing: border-box;\\n\\n    margin: 0 -12px 0 1px;\\n    display: none;\\n    width: 11px;\\n    vertical-align: top;\\n\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==\\\");\\n    background-repeat: no-repeat;\\n    background-position: center;\\n\\n    border-radius: 3px;\\n    \\n    border: 1px solid transparent;\\n    cursor: pointer;\\n    pointer-events: auto;\\n}\\n\\n.ace_custom-widget {\\n    background: none;\\n}\\n\\n.ace_folding-enabled .ace_fold-widget {\\n    display: inline-block;   \\n}\\n\\n.ace_fold-widget.ace_end {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==\\\");\\n}\\n\\n.ace_fold-widget.ace_closed {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==\\\");\\n}\\n\\n.ace_fold-widget:hover {\\n    border: 1px solid rgba(0, 0, 0, 0.3);\\n    background-color: rgba(255, 255, 255, 0.2);\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\\n}\\n\\n.ace_fold-widget:active {\\n    border: 1px solid rgba(0, 0, 0, 0.4);\\n    background-color: rgba(0, 0, 0, 0.05);\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\\n}\\n/**\\n * Dark version for fold widgets\\n */\\n.ace_dark .ace_fold-widget {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\\\");\\n}\\n.ace_dark .ace_fold-widget.ace_end {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\\\");\\n}\\n.ace_dark .ace_fold-widget.ace_closed {\\n    background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\\\");\\n}\\n.ace_dark .ace_fold-widget:hover {\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\\n    background-color: rgba(255, 255, 255, 0.1);\\n}\\n.ace_dark .ace_fold-widget:active {\\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\\n}\\n\\n.ace_inline_button {\\n    border: 1px solid lightgray;\\n    display: inline-block;\\n    margin: -1px 8px;\\n    padding: 0 5px;\\n    pointer-events: auto;\\n    cursor: pointer;\\n}\\n.ace_inline_button:hover {\\n    border-color: gray;\\n    background: rgba(200,200,200,0.2);\\n    display: inline-block;\\n    pointer-events: auto;\\n}\\n\\n.ace_fold-widget.ace_invalid {\\n    background-color: #FFB4B4;\\n    border-color: #DE5555;\\n}\\n\\n.ace_fade-fold-widgets .ace_fold-widget {\\n    transition: opacity 0.4s ease 0.05s;\\n    opacity: 0;\\n}\\n\\n.ace_fade-fold-widgets:hover .ace_fold-widget {\\n    transition: opacity 0.05s ease 0.05s;\\n    opacity:1;\\n}\\n\\n.ace_underline {\\n    text-decoration: underline;\\n}\\n\\n.ace_bold {\\n    font-weight: bold;\\n}\\n\\n.ace_nobold .ace_bold {\\n    font-weight: normal;\\n}\\n\\n.ace_italic {\\n    font-style: italic;\\n}\\n\\n\\n.ace_error-marker {\\n    background-color: rgba(255, 0, 0,0.2);\\n    position: absolute;\\n    z-index: 9;\\n}\\n\\n.ace_highlight-marker {\\n    background-color: rgba(255, 255, 0,0.2);\\n    position: absolute;\\n    z-index: 8;\\n}\\n\\n.ace_mobile-menu {\\n    position: absolute;\\n    line-height: 1.5;\\n    border-radius: 4px;\\n    -ms-user-select: none;\\n    -moz-user-select: none;\\n    -webkit-user-select: none;\\n    user-select: none;\\n    background: white;\\n    box-shadow: 1px 3px 2px grey;\\n    border: 1px solid #dcdcdc;\\n    color: black;\\n}\\n.ace_dark > .ace_mobile-menu {\\n    background: #333;\\n    color: #ccc;\\n    box-shadow: 1px 3px 2px grey;\\n    border: 1px solid #444;\\n\\n}\\n.ace_mobile-button {\\n    padding: 2px;\\n    cursor: pointer;\\n    overflow: hidden;\\n}\\n.ace_mobile-button:hover {\\n    background-color: #eee;\\n    opacity:1;\\n}\\n.ace_mobile-button:active {\\n    background-color: #ddd;\\n}\\n\\n.ace_placeholder {\\n    position: relative;\\n    font-family: arial;\\n    transform: scale(0.9);\\n    transform-origin: left;\\n    white-space: pre;\\n    opacity: 0.7;\\n    margin: 0 10px;\\n    z-index: 1;\\n}\\n\\n.ace_ghost_text {\\n    opacity: 0.5;\\n    font-style: italic;\\n}\\n\\n.ace_ghost_text_container > div {\\n    white-space: pre;\\n}\\n\\n.ghost_text_line_wrapped::after {\\n    content: \\\"\\u21A9\\\";\\n    position: absolute;\\n}\\n\\n.ace_lineWidgetContainer.ace_ghost_text {\\n    margin: 0px 4px\\n}\\n\\n.ace_screenreader-only {\\n    position:absolute;\\n    left:-10000px;\\n    top:auto;\\n    width:1px;\\n    height:1px;\\n    overflow:hidden;\\n}\\n\\n.ace_hidden_token {\\n    display: none;\\n}\";\n\n});\n\nace.define(\"ace/layer/decorators\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar oop = require(\"../lib/oop\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar Decorator = /** @class */ (function () {\n    function Decorator(scrollbarV, renderer) {\n        this.renderer = renderer;\n        this.pixelRatio = 1;\n        this.maxHeight = renderer.layerConfig.maxHeight;\n        this.lineHeight = renderer.layerConfig.lineHeight;\n        this.minDecorationHeight = (2 * this.pixelRatio) | 0;\n        this.halfMinDecorationHeight = (this.minDecorationHeight / 2) | 0;\n        this.colors = {};\n        this.colors.dark = {\n            \"error\": \"rgba(255, 18, 18, 1)\",\n            \"warning\": \"rgba(18, 136, 18, 1)\",\n            \"info\": \"rgba(18, 18, 136, 1)\",\n        };\n        this.colors.light = {\n            \"error\": \"rgb(255,51,51)\",\n            \"warning\": \"rgb(32,133,72)\",\n            \"info\": \"rgb(35,68,138)\",\n        };\n        this.setScrollBarV(scrollbarV);\n    }\n    Decorator.prototype.$createCanvas = function () {\n        this.canvas = dom.createElement(\"canvas\");\n        this.canvas.style.top = 0 + \"px\";\n        this.canvas.style.right = 0 + \"px\";\n        this.canvas.style.zIndex = \"7\";\n        this.canvas.style.position = \"absolute\";\n    };\n    Decorator.prototype.setScrollBarV = function (scrollbarV) {\n        this.$createCanvas();\n        this.scrollbarV = scrollbarV;\n        scrollbarV.element.appendChild(this.canvas);\n        this.setDimensions();\n    };\n    Decorator.prototype.$updateDecorators = function (config) {\n        if (typeof this.canvas.getContext !== \"function\") {\n            return;\n        }\n        var colors = (this.renderer.theme.isDark === true) ? this.colors.dark : this.colors.light;\n        this.setDimensions(config);\n        var ctx = this.canvas.getContext(\"2d\");\n        function compare(a, b) {\n            if (a.priority < b.priority)\n                return -1;\n            if (a.priority > b.priority)\n                return 1;\n            return 0;\n        }\n        var annotations = this.renderer.session.$annotations;\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        if (annotations) {\n            var priorities = {\n                \"info\": 1,\n                \"warning\": 2,\n                \"error\": 3\n            };\n            annotations.forEach(function (item) {\n                item[\"priority\"] = priorities[item.type] || null;\n            });\n            annotations = annotations.sort(compare);\n            for (var i = 0; i < annotations.length; i++) {\n                var row = annotations[i].row;\n                var offset1 = this.getVerticalOffsetForRow(row);\n                var offset2 = offset1 + this.lineHeight;\n                var y1 = Math.round(this.heightRatio * offset1);\n                var y2 = Math.round(this.heightRatio * offset2);\n                var ycenter = Math.round((y1 + y2) / 2);\n                var halfHeight = (y2 - ycenter);\n                if (halfHeight < this.halfMinDecorationHeight) {\n                    halfHeight = this.halfMinDecorationHeight;\n                }\n                if (ycenter - halfHeight < 0) {\n                    ycenter = halfHeight;\n                }\n                if (ycenter + halfHeight > this.canvasHeight) {\n                    ycenter = this.canvasHeight - halfHeight;\n                }\n                var from = ycenter - halfHeight;\n                var to = ycenter + halfHeight;\n                var zoneHeight = to - from;\n                ctx.fillStyle = colors[annotations[i].type] || null;\n                ctx.fillRect(0, from, Math.round(this.oneZoneWidth - 1), zoneHeight);\n            }\n        }\n        var cursor = this.renderer.session.selection.getCursor();\n        if (cursor) {\n            var currentY = Math.round(this.getVerticalOffsetForRow(cursor.row) * this.heightRatio);\n            ctx.fillStyle = \"rgba(0, 0, 0, 0.5)\";\n            ctx.fillRect(0, currentY, this.canvasWidth, 2);\n        }\n    };\n    Decorator.prototype.getVerticalOffsetForRow = function (row) {\n        row = row | 0;\n        var offset = this.renderer.session.documentToScreenRow(row, 0) * this.lineHeight;\n        return offset;\n    };\n    Decorator.prototype.setDimensions = function (config) {\n        config = config || this.renderer.layerConfig;\n        this.maxHeight = config.maxHeight;\n        this.lineHeight = config.lineHeight;\n        this.canvasHeight = config.height;\n        this.canvasWidth = this.scrollbarV.width || this.canvasWidth;\n        this.setZoneWidth();\n        this.canvas.width = this.canvasWidth;\n        this.canvas.height = this.canvasHeight;\n        if (this.maxHeight < this.canvasHeight) {\n            this.heightRatio = 1;\n        }\n        else {\n            this.heightRatio = this.canvasHeight / this.maxHeight;\n        }\n    };\n    Decorator.prototype.setZoneWidth = function () {\n        this.oneZoneWidth = this.canvasWidth;\n    };\n    Decorator.prototype.destroy = function () {\n        this.canvas.parentNode.removeChild(this.canvas);\n    };\n    return Decorator;\n}());\noop.implement(Decorator.prototype, EventEmitter);\nexports.Decorator = Decorator;\n\n});\n\nace.define(\"ace/virtual_renderer\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/config\",\"ace/layer/gutter\",\"ace/layer/marker\",\"ace/layer/text\",\"ace/layer/cursor\",\"ace/scrollbar\",\"ace/scrollbar\",\"ace/scrollbar_custom\",\"ace/scrollbar_custom\",\"ace/renderloop\",\"ace/layer/font_metrics\",\"ace/lib/event_emitter\",\"ace/css/editor-css\",\"ace/layer/decorators\",\"ace/lib/useragent\",\"ace/layer/text_util\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar lang = require(\"./lib/lang\");\nvar config = require(\"./config\");\nvar GutterLayer = require(\"./layer/gutter\").Gutter;\nvar MarkerLayer = require(\"./layer/marker\").Marker;\nvar TextLayer = require(\"./layer/text\").Text;\nvar CursorLayer = require(\"./layer/cursor\").Cursor;\nvar HScrollBar = require(\"./scrollbar\").HScrollBar;\nvar VScrollBar = require(\"./scrollbar\").VScrollBar;\nvar HScrollBarCustom = require(\"./scrollbar_custom\").HScrollBar;\nvar VScrollBarCustom = require(\"./scrollbar_custom\").VScrollBar;\nvar RenderLoop = require(\"./renderloop\").RenderLoop;\nvar FontMetrics = require(\"./layer/font_metrics\").FontMetrics;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar editorCss = require(\"./css/editor-css\");\nvar Decorator = require(\"./layer/decorators\").Decorator;\nvar useragent = require(\"./lib/useragent\");\nvar isTextToken = require(\"./layer/text_util\").isTextToken;\ndom.importCssString(editorCss, \"ace_editor.css\", false);\nvar VirtualRenderer = /** @class */ (function () {\n    function VirtualRenderer(container, theme) {\n        var _self = this;\n        this.container = container || dom.createElement(\"div\");\n        dom.addCssClass(this.container, \"ace_editor\");\n        if (dom.HI_DPI)\n            dom.addCssClass(this.container, \"ace_hidpi\");\n        this.setTheme(theme);\n        if (config.get(\"useStrictCSP\") == null)\n            config.set(\"useStrictCSP\", false);\n        this.$gutter = dom.createElement(\"div\");\n        this.$gutter.className = \"ace_gutter\";\n        this.container.appendChild(this.$gutter);\n        this.$gutter.setAttribute(\"aria-hidden\", \"true\");\n        this.scroller = dom.createElement(\"div\");\n        this.scroller.className = \"ace_scroller\";\n        this.container.appendChild(this.scroller);\n        this.content = dom.createElement(\"div\");\n        this.content.className = \"ace_content\";\n        this.scroller.appendChild(this.content);\n        this.$gutterLayer = new GutterLayer(this.$gutter);\n        this.$gutterLayer.on(\"changeGutterWidth\", this.onGutterResize.bind(this));\n        this.$markerBack = new MarkerLayer(this.content);\n        var textLayer = this.$textLayer = new TextLayer(this.content);\n        this.canvas = textLayer.element;\n        this.$markerFront = new MarkerLayer(this.content);\n        this.$cursorLayer = new CursorLayer(this.content);\n        this.$horizScroll = false;\n        this.$vScroll = false;\n        this.scrollBar =\n            this.scrollBarV = new VScrollBar(this.container, this);\n        this.scrollBarH = new HScrollBar(this.container, this);\n        this.scrollBarV.on(\"scroll\", function (e) {\n            if (!_self.$scrollAnimation)\n                _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n        });\n        this.scrollBarH.on(\"scroll\", function (e) {\n            if (!_self.$scrollAnimation)\n                _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n        });\n        this.scrollTop = 0;\n        this.scrollLeft = 0;\n        this.cursorPos = {\n            row: 0,\n            column: 0\n        };\n        this.$fontMetrics = new FontMetrics(this.container);\n        this.$textLayer.$setFontMetrics(this.$fontMetrics);\n        this.$textLayer.on(\"changeCharacterSize\", function (e) {\n            _self.updateCharacterSize();\n            _self.onResize(true, _self.gutterWidth, _self.$size.width, _self.$size.height);\n            _self._signal(\"changeCharacterSize\", e);\n        });\n        this.$size = {\n            width: 0,\n            height: 0,\n            scrollerHeight: 0,\n            scrollerWidth: 0,\n            $dirty: true\n        };\n        this.layerConfig = {\n            width: 1,\n            padding: 0,\n            firstRow: 0,\n            firstRowScreen: 0,\n            lastRow: 0,\n            lineHeight: 0,\n            characterWidth: 0,\n            minHeight: 1,\n            maxHeight: 1,\n            offset: 0,\n            height: 1,\n            gutterOffset: 1\n        };\n        this.scrollMargin = {\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0,\n            v: 0,\n            h: 0\n        };\n        this.margin = {\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0,\n            v: 0,\n            h: 0\n        };\n        this.$keepTextAreaAtCursor = !useragent.isIOS;\n        this.$loop = new RenderLoop(this.$renderChanges.bind(this), this.container.ownerDocument.defaultView);\n        this.$loop.schedule(this.CHANGE_FULL);\n        this.updateCharacterSize();\n        this.setPadding(4);\n        this.$addResizeObserver();\n        config.resetOptions(this);\n        config._signal(\"renderer\", this);\n    }\n    VirtualRenderer.prototype.updateCharacterSize = function () {\n        if (this.$textLayer.allowBoldFonts != this.$allowBoldFonts) {\n            this.$allowBoldFonts = this.$textLayer.allowBoldFonts;\n            this.setStyle(\"ace_nobold\", !this.$allowBoldFonts);\n        }\n        this.layerConfig.characterWidth =\n            this.characterWidth = this.$textLayer.getCharacterWidth();\n        this.layerConfig.lineHeight =\n            this.lineHeight = this.$textLayer.getLineHeight();\n        this.$updatePrintMargin();\n        dom.setStyle(this.scroller.style, \"line-height\", this.lineHeight + \"px\");\n    };\n    VirtualRenderer.prototype.setSession = function (session) {\n        if (this.session)\n            this.session.doc.off(\"changeNewLineMode\", this.onChangeNewLineMode);\n        this.session = session;\n        if (session && this.scrollMargin.top && session.getScrollTop() <= 0)\n            session.setScrollTop(-this.scrollMargin.top);\n        this.$cursorLayer.setSession(session);\n        this.$markerBack.setSession(session);\n        this.$markerFront.setSession(session);\n        this.$gutterLayer.setSession(session);\n        this.$textLayer.setSession(session);\n        if (!session)\n            return;\n        this.$loop.schedule(this.CHANGE_FULL);\n        this.session.$setFontMetrics(this.$fontMetrics);\n        this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;\n        this.onChangeNewLineMode = this.onChangeNewLineMode.bind(this);\n        this.onChangeNewLineMode();\n        this.session.doc.on(\"changeNewLineMode\", this.onChangeNewLineMode);\n    };\n    VirtualRenderer.prototype.updateLines = function (firstRow, lastRow, force) {\n        if (lastRow === undefined)\n            lastRow = Infinity;\n        if (!this.$changedLines) {\n            this.$changedLines = {\n                firstRow: firstRow,\n                lastRow: lastRow\n            };\n        }\n        else {\n            if (this.$changedLines.firstRow > firstRow)\n                this.$changedLines.firstRow = firstRow;\n            if (this.$changedLines.lastRow < lastRow)\n                this.$changedLines.lastRow = lastRow;\n        }\n        if (this.$changedLines.lastRow < this.layerConfig.firstRow) {\n            if (force)\n                this.$changedLines.lastRow = this.layerConfig.lastRow;\n            else\n                return;\n        }\n        if (this.$changedLines.firstRow > this.layerConfig.lastRow)\n            return;\n        this.$loop.schedule(this.CHANGE_LINES);\n    };\n    VirtualRenderer.prototype.onChangeNewLineMode = function () {\n        this.$loop.schedule(this.CHANGE_TEXT);\n        this.$textLayer.$updateEolChar();\n        this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR);\n    };\n    VirtualRenderer.prototype.onChangeTabSize = function () {\n        this.$loop.schedule(this.CHANGE_TEXT | this.CHANGE_MARKER);\n        this.$textLayer.onChangeTabSize();\n    };\n    VirtualRenderer.prototype.updateText = function () {\n        this.$loop.schedule(this.CHANGE_TEXT);\n    };\n    VirtualRenderer.prototype.updateFull = function (force) {\n        if (force)\n            this.$renderChanges(this.CHANGE_FULL, true);\n        else\n            this.$loop.schedule(this.CHANGE_FULL);\n    };\n    VirtualRenderer.prototype.updateFontSize = function () {\n        this.$textLayer.checkForSizeChanges();\n    };\n    VirtualRenderer.prototype.$updateSizeAsync = function () {\n        if (this.$loop.pending)\n            this.$size.$dirty = true;\n        else\n            this.onResize();\n    };\n    VirtualRenderer.prototype.onResize = function (force, gutterWidth, width, height) {\n        if (this.resizing > 2)\n            return;\n        else if (this.resizing > 0)\n            this.resizing++;\n        else\n            this.resizing = force ? 1 : 0;\n        var el = this.container;\n        if (!height)\n            height = el.clientHeight || el.scrollHeight;\n        if (!height && this.$maxLines && this.lineHeight > 1) {\n            if (!el.style.height || el.style.height == \"0px\") {\n                el.style.height = \"1px\";\n                height = el.clientHeight || el.scrollHeight;\n            }\n        }\n        if (!width)\n            width = el.clientWidth || el.scrollWidth;\n        var changes = this.$updateCachedSize(force, gutterWidth, width, height);\n        if (this.$resizeTimer)\n            this.$resizeTimer.cancel();\n        if (!this.$size.scrollerHeight || (!width && !height))\n            return this.resizing = 0;\n        if (force)\n            this.$gutterLayer.$padding = null;\n        if (force)\n            this.$renderChanges(changes | this.$changes, true);\n        else\n            this.$loop.schedule(changes | this.$changes);\n        if (this.resizing)\n            this.resizing = 0;\n        this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;\n        if (this.$customScrollbar) {\n            this.$updateCustomScrollbar(true);\n        }\n    };\n    VirtualRenderer.prototype.$updateCachedSize = function (force, gutterWidth, width, height) {\n        height -= (this.$extraHeight || 0);\n        var changes = 0;\n        var size = this.$size;\n        var oldSize = {\n            width: size.width,\n            height: size.height,\n            scrollerHeight: size.scrollerHeight,\n            scrollerWidth: size.scrollerWidth\n        };\n        if (height && (force || size.height != height)) {\n            size.height = height;\n            changes |= this.CHANGE_SIZE;\n            size.scrollerHeight = size.height;\n            if (this.$horizScroll)\n                size.scrollerHeight -= this.scrollBarH.getHeight();\n            this.scrollBarV.setHeight(size.scrollerHeight);\n            this.scrollBarV.element.style.bottom = this.scrollBarH.getHeight() + \"px\";\n            changes = changes | this.CHANGE_SCROLL;\n        }\n        if (width && (force || size.width != width)) {\n            changes |= this.CHANGE_SIZE;\n            size.width = width;\n            if (gutterWidth == null)\n                gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;\n            this.gutterWidth = gutterWidth;\n            dom.setStyle(this.scrollBarH.element.style, \"left\", gutterWidth + \"px\");\n            dom.setStyle(this.scroller.style, \"left\", gutterWidth + this.margin.left + \"px\");\n            size.scrollerWidth = Math.max(0, width - gutterWidth - this.scrollBarV.getWidth() - this.margin.h);\n            dom.setStyle(this.$gutter.style, \"left\", this.margin.left + \"px\");\n            var right = this.scrollBarV.getWidth() + \"px\";\n            dom.setStyle(this.scrollBarH.element.style, \"right\", right);\n            dom.setStyle(this.scroller.style, \"right\", right);\n            dom.setStyle(this.scroller.style, \"bottom\", this.scrollBarH.getHeight());\n            this.scrollBarH.setWidth(size.scrollerWidth);\n            if (this.session && this.session.getUseWrapMode() && this.adjustWrapLimit() || force) {\n                changes |= this.CHANGE_FULL;\n            }\n        }\n        size.$dirty = !width || !height;\n        if (changes)\n            this._signal(\"resize\", oldSize);\n        return changes;\n    };\n    VirtualRenderer.prototype.onGutterResize = function (width) {\n        var gutterWidth = this.$showGutter ? width : 0;\n        if (gutterWidth != this.gutterWidth)\n            this.$changes |= this.$updateCachedSize(true, gutterWidth, this.$size.width, this.$size.height);\n        if (this.session.getUseWrapMode() && this.adjustWrapLimit()) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        }\n        else if (this.$size.$dirty) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        }\n        else {\n            this.$computeLayerConfig();\n        }\n    };\n    VirtualRenderer.prototype.adjustWrapLimit = function () {\n        var availableWidth = this.$size.scrollerWidth - this.$padding * 2;\n        var limit = Math.floor(availableWidth / this.characterWidth);\n        return this.session.adjustWrapLimit(limit, this.$showPrintMargin && this.$printMarginColumn);\n    };\n    VirtualRenderer.prototype.setAnimatedScroll = function (shouldAnimate) {\n        this.setOption(\"animatedScroll\", shouldAnimate);\n    };\n    VirtualRenderer.prototype.getAnimatedScroll = function () {\n        return this.$animatedScroll;\n    };\n    VirtualRenderer.prototype.setShowInvisibles = function (showInvisibles) {\n        this.setOption(\"showInvisibles\", showInvisibles);\n        this.session.$bidiHandler.setShowInvisibles(showInvisibles);\n    };\n    VirtualRenderer.prototype.getShowInvisibles = function () {\n        return this.getOption(\"showInvisibles\");\n    };\n    VirtualRenderer.prototype.getDisplayIndentGuides = function () {\n        return this.getOption(\"displayIndentGuides\");\n    };\n    VirtualRenderer.prototype.setDisplayIndentGuides = function (display) {\n        this.setOption(\"displayIndentGuides\", display);\n    };\n    VirtualRenderer.prototype.getHighlightIndentGuides = function () {\n        return this.getOption(\"highlightIndentGuides\");\n    };\n    VirtualRenderer.prototype.setHighlightIndentGuides = function (highlight) {\n        this.setOption(\"highlightIndentGuides\", highlight);\n    };\n    VirtualRenderer.prototype.setShowPrintMargin = function (showPrintMargin) {\n        this.setOption(\"showPrintMargin\", showPrintMargin);\n    };\n    VirtualRenderer.prototype.getShowPrintMargin = function () {\n        return this.getOption(\"showPrintMargin\");\n    };\n    VirtualRenderer.prototype.setPrintMarginColumn = function (printMarginColumn) {\n        this.setOption(\"printMarginColumn\", printMarginColumn);\n    };\n    VirtualRenderer.prototype.getPrintMarginColumn = function () {\n        return this.getOption(\"printMarginColumn\");\n    };\n    VirtualRenderer.prototype.getShowGutter = function () {\n        return this.getOption(\"showGutter\");\n    };\n    VirtualRenderer.prototype.setShowGutter = function (show) {\n        return this.setOption(\"showGutter\", show);\n    };\n    VirtualRenderer.prototype.getFadeFoldWidgets = function () {\n        return this.getOption(\"fadeFoldWidgets\");\n    };\n    VirtualRenderer.prototype.setFadeFoldWidgets = function (show) {\n        this.setOption(\"fadeFoldWidgets\", show);\n    };\n    VirtualRenderer.prototype.setHighlightGutterLine = function (shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    };\n    VirtualRenderer.prototype.getHighlightGutterLine = function () {\n        return this.getOption(\"highlightGutterLine\");\n    };\n    VirtualRenderer.prototype.$updatePrintMargin = function () {\n        if (!this.$showPrintMargin && !this.$printMarginEl)\n            return;\n        if (!this.$printMarginEl) {\n            var containerEl = dom.createElement(\"div\");\n            containerEl.className = \"ace_layer ace_print-margin-layer\";\n            this.$printMarginEl = dom.createElement(\"div\");\n            this.$printMarginEl.className = \"ace_print-margin\";\n            containerEl.appendChild(this.$printMarginEl);\n            this.content.insertBefore(containerEl, this.content.firstChild);\n        }\n        var style = this.$printMarginEl.style;\n        style.left = Math.round(this.characterWidth * this.$printMarginColumn + this.$padding) + \"px\";\n        style.visibility = this.$showPrintMargin ? \"visible\" : \"hidden\";\n        if (this.session && this.session.$wrap == -1)\n            this.adjustWrapLimit();\n    };\n    VirtualRenderer.prototype.getContainerElement = function () {\n        return this.container;\n    };\n    VirtualRenderer.prototype.getMouseEventTarget = function () {\n        return this.scroller;\n    };\n    VirtualRenderer.prototype.getTextAreaContainer = function () {\n        return this.container;\n    };\n    VirtualRenderer.prototype.$moveTextAreaToCursor = function () {\n        if (this.$isMousePressed)\n            return;\n        var style = this.textarea.style;\n        var composition = this.$composition;\n        if (!this.$keepTextAreaAtCursor && !composition) {\n            dom.translate(this.textarea, -100, 0);\n            return;\n        }\n        var pixelPos = this.$cursorLayer.$pixelPos;\n        if (!pixelPos)\n            return;\n        if (composition && composition.markerRange)\n            pixelPos = this.$cursorLayer.getPixelPosition(composition.markerRange.start, true);\n        var config = this.layerConfig;\n        var posTop = pixelPos.top;\n        var posLeft = pixelPos.left;\n        posTop -= config.offset;\n        var h = composition && composition.useTextareaForIME || useragent.isMobile ? this.lineHeight : 1;\n        if (posTop < 0 || posTop > config.height - h) {\n            dom.translate(this.textarea, 0, 0);\n            return;\n        }\n        var w = 1;\n        var maxTop = this.$size.height - h;\n        if (!composition) {\n            posTop += this.lineHeight;\n        }\n        else {\n            if (composition.useTextareaForIME) {\n                var val = this.textarea.value;\n                w = this.characterWidth * (this.session.$getStringScreenWidth(val)[0]);\n            }\n            else {\n                posTop += this.lineHeight + 2;\n            }\n        }\n        posLeft -= this.scrollLeft;\n        if (posLeft > this.$size.scrollerWidth - w)\n            posLeft = this.$size.scrollerWidth - w;\n        posLeft += this.gutterWidth + this.margin.left;\n        dom.setStyle(style, \"height\", h + \"px\");\n        dom.setStyle(style, \"width\", w + \"px\");\n        dom.translate(this.textarea, Math.min(posLeft, this.$size.scrollerWidth - w), Math.min(posTop, maxTop));\n    };\n    VirtualRenderer.prototype.getFirstVisibleRow = function () {\n        return this.layerConfig.firstRow;\n    };\n    VirtualRenderer.prototype.getFirstFullyVisibleRow = function () {\n        return this.layerConfig.firstRow + (this.layerConfig.offset === 0 ? 0 : 1);\n    };\n    VirtualRenderer.prototype.getLastFullyVisibleRow = function () {\n        var config = this.layerConfig;\n        var lastRow = config.lastRow;\n        var top = this.session.documentToScreenRow(lastRow, 0) * config.lineHeight;\n        if (top - this.session.getScrollTop() > config.height - config.lineHeight)\n            return lastRow - 1;\n        return lastRow;\n    };\n    VirtualRenderer.prototype.getLastVisibleRow = function () {\n        return this.layerConfig.lastRow;\n    };\n    VirtualRenderer.prototype.setPadding = function (padding) {\n        this.$padding = padding;\n        this.$textLayer.setPadding(padding);\n        this.$cursorLayer.setPadding(padding);\n        this.$markerFront.setPadding(padding);\n        this.$markerBack.setPadding(padding);\n        this.$loop.schedule(this.CHANGE_FULL);\n        this.$updatePrintMargin();\n    };\n    VirtualRenderer.prototype.setScrollMargin = function (top, bottom, left, right) {\n        var sm = this.scrollMargin;\n        sm.top = top | 0;\n        sm.bottom = bottom | 0;\n        sm.right = right | 0;\n        sm.left = left | 0;\n        sm.v = sm.top + sm.bottom;\n        sm.h = sm.left + sm.right;\n        if (sm.top && this.scrollTop <= 0 && this.session)\n            this.session.setScrollTop(-sm.top);\n        this.updateFull();\n    };\n    VirtualRenderer.prototype.setMargin = function (top, bottom, left, right) {\n        var sm = this.margin;\n        sm.top = top | 0;\n        sm.bottom = bottom | 0;\n        sm.right = right | 0;\n        sm.left = left | 0;\n        sm.v = sm.top + sm.bottom;\n        sm.h = sm.left + sm.right;\n        this.$updateCachedSize(true, this.gutterWidth, this.$size.width, this.$size.height);\n        this.updateFull();\n    };\n    VirtualRenderer.prototype.getHScrollBarAlwaysVisible = function () {\n        return this.$hScrollBarAlwaysVisible;\n    };\n    VirtualRenderer.prototype.setHScrollBarAlwaysVisible = function (alwaysVisible) {\n        this.setOption(\"hScrollBarAlwaysVisible\", alwaysVisible);\n    };\n    VirtualRenderer.prototype.getVScrollBarAlwaysVisible = function () {\n        return this.$vScrollBarAlwaysVisible;\n    };\n    VirtualRenderer.prototype.setVScrollBarAlwaysVisible = function (alwaysVisible) {\n        this.setOption(\"vScrollBarAlwaysVisible\", alwaysVisible);\n    };\n    VirtualRenderer.prototype.$updateScrollBarV = function () {\n        var scrollHeight = this.layerConfig.maxHeight;\n        var scrollerHeight = this.$size.scrollerHeight;\n        if (!this.$maxLines && this.$scrollPastEnd) {\n            scrollHeight -= (scrollerHeight - this.lineHeight) * this.$scrollPastEnd;\n            if (this.scrollTop > scrollHeight - scrollerHeight) {\n                scrollHeight = this.scrollTop + scrollerHeight;\n                this.scrollBarV.scrollTop = null;\n            }\n        }\n        this.scrollBarV.setScrollHeight(scrollHeight + this.scrollMargin.v);\n        this.scrollBarV.setScrollTop(this.scrollTop + this.scrollMargin.top);\n    };\n    VirtualRenderer.prototype.$updateScrollBarH = function () {\n        this.scrollBarH.setScrollWidth(this.layerConfig.width + 2 * this.$padding + this.scrollMargin.h);\n        this.scrollBarH.setScrollLeft(this.scrollLeft + this.scrollMargin.left);\n    };\n    VirtualRenderer.prototype.freeze = function () {\n        this.$frozen = true;\n    };\n    VirtualRenderer.prototype.unfreeze = function () {\n        this.$frozen = false;\n    };\n    VirtualRenderer.prototype.$renderChanges = function (changes, force) {\n        if (this.$changes) {\n            changes |= this.$changes;\n            this.$changes = 0;\n        }\n        if ((!this.session || !this.container.offsetWidth || this.$frozen) || (!changes && !force)) {\n            this.$changes |= changes;\n            return;\n        }\n        if (this.$size.$dirty) {\n            this.$changes |= changes;\n            return this.onResize(true);\n        }\n        if (!this.lineHeight) {\n            this.$textLayer.checkForSizeChanges();\n        }\n        this._signal(\"beforeRender\", changes);\n        if (this.session && this.session.$bidiHandler)\n            this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);\n        var config = this.layerConfig;\n        if (changes & this.CHANGE_FULL ||\n            changes & this.CHANGE_SIZE ||\n            changes & this.CHANGE_TEXT ||\n            changes & this.CHANGE_LINES ||\n            changes & this.CHANGE_SCROLL ||\n            changes & this.CHANGE_H_SCROLL) {\n            changes |= this.$computeLayerConfig() | this.$loop.clear();\n            if (config.firstRow != this.layerConfig.firstRow && config.firstRowScreen == this.layerConfig.firstRowScreen) {\n                var st = this.scrollTop + (config.firstRow - Math.max(this.layerConfig.firstRow, 0)) * this.lineHeight;\n                if (st > 0) {\n                    this.scrollTop = st;\n                    changes = changes | this.CHANGE_SCROLL;\n                    changes |= this.$computeLayerConfig() | this.$loop.clear();\n                }\n            }\n            config = this.layerConfig;\n            this.$updateScrollBarV();\n            if (changes & this.CHANGE_H_SCROLL)\n                this.$updateScrollBarH();\n            dom.translate(this.content, -this.scrollLeft, -config.offset);\n            var width = config.width + 2 * this.$padding + \"px\";\n            var height = config.minHeight + \"px\";\n            dom.setStyle(this.content.style, \"width\", width);\n            dom.setStyle(this.content.style, \"height\", height);\n        }\n        if (changes & this.CHANGE_H_SCROLL) {\n            dom.translate(this.content, -this.scrollLeft, -config.offset);\n            this.scroller.className = this.scrollLeft <= 0 ? \"ace_scroller \" : \"ace_scroller ace_scroll-left \";\n            if (this.enableKeyboardAccessibility)\n                this.scroller.className += this.keyboardFocusClassName;\n        }\n        if (changes & this.CHANGE_FULL) {\n            this.$changedLines = null;\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this._signal(\"afterRender\", changes);\n            return;\n        }\n        if (changes & this.CHANGE_SCROLL) {\n            this.$changedLines = null;\n            if (changes & this.CHANGE_TEXT || changes & this.CHANGE_LINES)\n                this.$textLayer.update(config);\n            else\n                this.$textLayer.scrollLines(config);\n            if (this.$showGutter) {\n                if (changes & this.CHANGE_GUTTER || changes & this.CHANGE_LINES)\n                    this.$gutterLayer.update(config);\n                else\n                    this.$gutterLayer.scrollLines(config);\n            }\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this._signal(\"afterRender\", changes);\n            return;\n        }\n        if (changes & this.CHANGE_TEXT) {\n            this.$changedLines = null;\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_LINES) {\n            if (this.$updateLines() || (changes & this.CHANGE_GUTTER) && this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_TEXT || changes & this.CHANGE_GUTTER) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_CURSOR) {\n            if (this.$highlightGutterLine)\n                this.$gutterLayer.updateLineHighlight(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        if (changes & this.CHANGE_CURSOR) {\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n        }\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_FRONT)) {\n            this.$markerFront.update(config);\n        }\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_BACK)) {\n            this.$markerBack.update(config);\n        }\n        this._signal(\"afterRender\", changes);\n    };\n    VirtualRenderer.prototype.$autosize = function () {\n        var height = this.session.getScreenLength() * this.lineHeight;\n        var maxHeight = this.$maxLines * this.lineHeight;\n        var desiredHeight = Math.min(maxHeight, Math.max((this.$minLines || 1) * this.lineHeight, height)) + this.scrollMargin.v + (this.$extraHeight || 0);\n        if (this.$horizScroll)\n            desiredHeight += this.scrollBarH.getHeight();\n        if (this.$maxPixelHeight && desiredHeight > this.$maxPixelHeight)\n            desiredHeight = this.$maxPixelHeight;\n        var hideScrollbars = desiredHeight <= 2 * this.lineHeight;\n        var vScroll = !hideScrollbars && height > maxHeight;\n        if (desiredHeight != this.desiredHeight ||\n            this.$size.height != this.desiredHeight || vScroll != this.$vScroll) {\n            if (vScroll != this.$vScroll) {\n                this.$vScroll = vScroll;\n                this.scrollBarV.setVisible(vScroll);\n            }\n            var w = this.container.clientWidth;\n            this.container.style.height = desiredHeight + \"px\";\n            this.$updateCachedSize(true, this.$gutterWidth, w, desiredHeight);\n            this.desiredHeight = desiredHeight;\n            this._signal(\"autosize\");\n        }\n    };\n    VirtualRenderer.prototype.$computeLayerConfig = function () {\n        var session = this.session;\n        var size = this.$size;\n        var hideScrollbars = size.height <= 2 * this.lineHeight;\n        var screenLines = this.session.getScreenLength();\n        var maxHeight = screenLines * this.lineHeight;\n        var longestLine = this.$getLongestLine();\n        var horizScroll = !hideScrollbars && (this.$hScrollBarAlwaysVisible ||\n            size.scrollerWidth - longestLine - 2 * this.$padding < 0);\n        var hScrollChanged = this.$horizScroll !== horizScroll;\n        if (hScrollChanged) {\n            this.$horizScroll = horizScroll;\n            this.scrollBarH.setVisible(horizScroll);\n        }\n        var vScrollBefore = this.$vScroll; // autosize can change vscroll value in which case we need to update longestLine\n        if (this.$maxLines && this.lineHeight > 1) {\n            this.$autosize();\n            hideScrollbars = size.height <= 2 * this.lineHeight;\n        }\n        var minHeight = size.scrollerHeight + this.lineHeight;\n        var scrollPastEnd = !this.$maxLines && this.$scrollPastEnd\n            ? (size.scrollerHeight - this.lineHeight) * this.$scrollPastEnd\n            : 0;\n        maxHeight += scrollPastEnd;\n        var sm = this.scrollMargin;\n        this.session.setScrollTop(Math.max(-sm.top, Math.min(this.scrollTop, maxHeight - size.scrollerHeight + sm.bottom)));\n        this.session.setScrollLeft(Math.max(-sm.left, Math.min(this.scrollLeft, longestLine + 2 * this.$padding - size.scrollerWidth + sm.right)));\n        var vScroll = !hideScrollbars && (this.$vScrollBarAlwaysVisible ||\n            size.scrollerHeight - maxHeight + scrollPastEnd < 0 || this.scrollTop > sm.top);\n        var vScrollChanged = vScrollBefore !== vScroll;\n        if (vScrollChanged) {\n            this.$vScroll = vScroll;\n            this.scrollBarV.setVisible(vScroll);\n        }\n        var offset = this.scrollTop % this.lineHeight;\n        var lineCount = Math.ceil(minHeight / this.lineHeight) - 1;\n        var firstRow = Math.max(0, Math.round((this.scrollTop - offset) / this.lineHeight));\n        var lastRow = firstRow + lineCount;\n        var firstRowScreen, firstRowHeight;\n        var lineHeight = this.lineHeight;\n        firstRow = session.screenToDocumentRow(firstRow, 0);\n        var foldLine = session.getFoldLine(firstRow);\n        if (foldLine) {\n            firstRow = foldLine.start.row;\n        }\n        firstRowScreen = session.documentToScreenRow(firstRow, 0);\n        firstRowHeight = session.getRowLength(firstRow) * lineHeight;\n        lastRow = Math.min(session.screenToDocumentRow(lastRow, 0), session.getLength() - 1);\n        minHeight = size.scrollerHeight + session.getRowLength(lastRow) * lineHeight +\n            firstRowHeight;\n        offset = this.scrollTop - firstRowScreen * lineHeight;\n        if (offset < 0 && firstRowScreen > 0) {\n            firstRowScreen = Math.max(0, firstRowScreen + Math.floor(offset / lineHeight));\n            offset = this.scrollTop - firstRowScreen * lineHeight;\n        }\n        var changes = 0;\n        if (this.layerConfig.width != longestLine || hScrollChanged)\n            changes = this.CHANGE_H_SCROLL;\n        if (hScrollChanged || vScrollChanged) {\n            changes |= this.$updateCachedSize(true, this.gutterWidth, size.width, size.height);\n            this._signal(\"scrollbarVisibilityChanged\");\n            if (vScrollChanged)\n                longestLine = this.$getLongestLine();\n        }\n        this.layerConfig = {\n            width: longestLine,\n            padding: this.$padding,\n            firstRow: firstRow,\n            firstRowScreen: firstRowScreen,\n            lastRow: lastRow,\n            lineHeight: lineHeight,\n            characterWidth: this.characterWidth,\n            minHeight: minHeight,\n            maxHeight: maxHeight,\n            offset: offset,\n            gutterOffset: lineHeight ? Math.max(0, Math.ceil((offset + size.height - size.scrollerHeight) / lineHeight)) : 0,\n            height: this.$size.scrollerHeight\n        };\n        if (this.session.$bidiHandler)\n            this.session.$bidiHandler.setContentWidth(longestLine - this.$padding);\n        return changes;\n    };\n    VirtualRenderer.prototype.$updateLines = function () {\n        if (!this.$changedLines)\n            return;\n        var firstRow = this.$changedLines.firstRow;\n        var lastRow = this.$changedLines.lastRow;\n        this.$changedLines = null;\n        var layerConfig = this.layerConfig;\n        if (firstRow > layerConfig.lastRow + 1) {\n            return;\n        }\n        if (lastRow < layerConfig.firstRow) {\n            return;\n        }\n        if (lastRow === Infinity) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(layerConfig);\n            this.$textLayer.update(layerConfig);\n            return;\n        }\n        this.$textLayer.updateLines(layerConfig, firstRow, lastRow);\n        return true;\n    };\n    VirtualRenderer.prototype.$getLongestLine = function () {\n        var charCount = this.session.getScreenWidth();\n        if (this.showInvisibles && !this.session.$useWrapMode)\n            charCount += 1;\n        if (this.$textLayer && charCount > this.$textLayer.MAX_LINE_LENGTH)\n            charCount = this.$textLayer.MAX_LINE_LENGTH + 30;\n        return Math.max(this.$size.scrollerWidth - 2 * this.$padding, Math.round(charCount * this.characterWidth));\n    };\n    VirtualRenderer.prototype.updateFrontMarkers = function () {\n        this.$markerFront.setMarkers(this.session.getMarkers(true));\n        this.$loop.schedule(this.CHANGE_MARKER_FRONT);\n    };\n    VirtualRenderer.prototype.updateBackMarkers = function () {\n        this.$markerBack.setMarkers(this.session.getMarkers());\n        this.$loop.schedule(this.CHANGE_MARKER_BACK);\n    };\n    VirtualRenderer.prototype.addGutterDecoration = function (row, className) {\n        this.$gutterLayer.addGutterDecoration(row, className);\n    };\n    VirtualRenderer.prototype.removeGutterDecoration = function (row, className) {\n        this.$gutterLayer.removeGutterDecoration(row, className);\n    };\n    VirtualRenderer.prototype.updateBreakpoints = function (rows) {\n        this._rows = rows;\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    };\n    VirtualRenderer.prototype.setAnnotations = function (annotations) {\n        this.$gutterLayer.setAnnotations(annotations);\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    };\n    VirtualRenderer.prototype.updateCursor = function () {\n        this.$loop.schedule(this.CHANGE_CURSOR);\n    };\n    VirtualRenderer.prototype.hideCursor = function () {\n        this.$cursorLayer.hideCursor();\n    };\n    VirtualRenderer.prototype.showCursor = function () {\n        this.$cursorLayer.showCursor();\n    };\n    VirtualRenderer.prototype.scrollSelectionIntoView = function (anchor, lead, offset) {\n        this.scrollCursorIntoView(anchor, offset);\n        this.scrollCursorIntoView(lead, offset);\n    };\n    VirtualRenderer.prototype.scrollCursorIntoView = function (cursor, offset, $viewMargin) {\n        if (this.$size.scrollerHeight === 0)\n            return;\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n        var newLeft = pos.left;\n        var newTop = pos.top;\n        var topMargin = $viewMargin && $viewMargin.top || 0;\n        var bottomMargin = $viewMargin && $viewMargin.bottom || 0;\n        if (this.$scrollAnimation) {\n            this.$stopAnimation = true;\n        }\n        var currentTop = this.$scrollAnimation ? this.session.getScrollTop() : this.scrollTop;\n        if (currentTop + topMargin > newTop) {\n            if (offset && currentTop + topMargin > newTop + this.lineHeight)\n                newTop -= offset * this.$size.scrollerHeight;\n            if (newTop === 0)\n                newTop = -this.scrollMargin.top;\n            this.session.setScrollTop(newTop);\n        }\n        else if (currentTop + this.$size.scrollerHeight - bottomMargin < newTop + this.lineHeight) {\n            if (offset && currentTop + this.$size.scrollerHeight - bottomMargin < newTop - this.lineHeight)\n                newTop += offset * this.$size.scrollerHeight;\n            this.session.setScrollTop(newTop + this.lineHeight + bottomMargin - this.$size.scrollerHeight);\n        }\n        var currentLeft = this.scrollLeft;\n        var twoCharsWidth = 2 * this.layerConfig.characterWidth;\n        if (newLeft - twoCharsWidth < currentLeft) {\n            newLeft -= twoCharsWidth;\n            if (newLeft < this.$padding + twoCharsWidth) {\n                newLeft = -this.scrollMargin.left;\n            }\n            this.session.setScrollLeft(newLeft);\n        }\n        else {\n            newLeft += twoCharsWidth;\n            if (currentLeft + this.$size.scrollerWidth < newLeft + this.characterWidth) {\n                this.session.setScrollLeft(Math.round(newLeft + this.characterWidth - this.$size.scrollerWidth));\n            }\n            else if (currentLeft <= this.$padding && newLeft - currentLeft < this.characterWidth) {\n                this.session.setScrollLeft(0);\n            }\n        }\n    };\n    VirtualRenderer.prototype.getScrollTop = function () {\n        return this.session.getScrollTop();\n    };\n    VirtualRenderer.prototype.getScrollLeft = function () {\n        return this.session.getScrollLeft();\n    };\n    VirtualRenderer.prototype.getScrollTopRow = function () {\n        return this.scrollTop / this.lineHeight;\n    };\n    VirtualRenderer.prototype.getScrollBottomRow = function () {\n        return Math.max(0, Math.floor((this.scrollTop + this.$size.scrollerHeight) / this.lineHeight) - 1);\n    };\n    VirtualRenderer.prototype.scrollToRow = function (row) {\n        this.session.setScrollTop(row * this.lineHeight);\n    };\n    VirtualRenderer.prototype.alignCursor = function (cursor, alignment) {\n        if (typeof cursor == \"number\")\n            cursor = { row: cursor, column: 0 };\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n        var h = this.$size.scrollerHeight - this.lineHeight;\n        var offset = pos.top - h * (alignment || 0);\n        this.session.setScrollTop(offset);\n        return offset;\n    };\n    VirtualRenderer.prototype.$calcSteps = function (fromValue, toValue) {\n        var i = 0;\n        var l = this.STEPS;\n        var steps = [];\n        var func = function (t, x_min, dx) {\n            return dx * (Math.pow(t - 1, 3) + 1) + x_min;\n        };\n        for (i = 0; i < l; ++i)\n            steps.push(func(i / this.STEPS, fromValue, toValue - fromValue));\n        return steps;\n    };\n    VirtualRenderer.prototype.scrollToLine = function (line, center, animate, callback) {\n        var pos = this.$cursorLayer.getPixelPosition({ row: line, column: 0 });\n        var offset = pos.top;\n        if (center)\n            offset -= this.$size.scrollerHeight / 2;\n        var initialScroll = this.scrollTop;\n        this.session.setScrollTop(offset);\n        if (animate !== false)\n            this.animateScrolling(initialScroll, callback);\n    };\n    VirtualRenderer.prototype.animateScrolling = function (fromValue, callback) {\n        var toValue = this.scrollTop;\n        if (!this.$animatedScroll)\n            return;\n        var _self = this;\n        if (fromValue == toValue)\n            return;\n        if (this.$scrollAnimation) {\n            var oldSteps = this.$scrollAnimation.steps;\n            if (oldSteps.length) {\n                fromValue = oldSteps[0];\n                if (fromValue == toValue)\n                    return;\n            }\n        }\n        var steps = _self.$calcSteps(fromValue, toValue);\n        this.$scrollAnimation = { from: fromValue, to: toValue, steps: steps };\n        clearInterval(this.$timer);\n        _self.session.setScrollTop(steps.shift());\n        _self.session.$scrollTop = toValue;\n        function endAnimation() {\n            _self.$timer = clearInterval(_self.$timer);\n            _self.$scrollAnimation = null;\n            _self.$stopAnimation = false;\n            callback && callback();\n        }\n        this.$timer = setInterval(function () {\n            if (_self.$stopAnimation) {\n                endAnimation();\n                return;\n            }\n            if (!_self.session)\n                return clearInterval(_self.$timer);\n            if (steps.length) {\n                _self.session.setScrollTop(steps.shift());\n                _self.session.$scrollTop = toValue;\n            }\n            else if (toValue != null) {\n                _self.session.$scrollTop = -1;\n                _self.session.setScrollTop(toValue);\n                toValue = null;\n            }\n            else {\n                endAnimation();\n            }\n        }, 10);\n    };\n    VirtualRenderer.prototype.scrollToY = function (scrollTop) {\n        if (this.scrollTop !== scrollTop) {\n            this.$loop.schedule(this.CHANGE_SCROLL);\n            this.scrollTop = scrollTop;\n        }\n    };\n    VirtualRenderer.prototype.scrollToX = function (scrollLeft) {\n        if (this.scrollLeft !== scrollLeft)\n            this.scrollLeft = scrollLeft;\n        this.$loop.schedule(this.CHANGE_H_SCROLL);\n    };\n    VirtualRenderer.prototype.scrollTo = function (x, y) {\n        this.session.setScrollTop(y);\n        this.session.setScrollLeft(x);\n    };\n    VirtualRenderer.prototype.scrollBy = function (deltaX, deltaY) {\n        deltaY && this.session.setScrollTop(this.session.getScrollTop() + deltaY);\n        deltaX && this.session.setScrollLeft(this.session.getScrollLeft() + deltaX);\n    };\n    VirtualRenderer.prototype.isScrollableBy = function (deltaX, deltaY) {\n        if (deltaY < 0 && this.session.getScrollTop() >= 1 - this.scrollMargin.top)\n            return true;\n        if (deltaY > 0 && this.session.getScrollTop() + this.$size.scrollerHeight\n            - this.layerConfig.maxHeight < -1 + this.scrollMargin.bottom)\n            return true;\n        if (deltaX < 0 && this.session.getScrollLeft() >= 1 - this.scrollMargin.left)\n            return true;\n        if (deltaX > 0 && this.session.getScrollLeft() + this.$size.scrollerWidth\n            - this.layerConfig.width < -1 + this.scrollMargin.right)\n            return true;\n    };\n    VirtualRenderer.prototype.pixelToScreenCoordinates = function (x, y) {\n        var canvasPos;\n        if (this.$hasCssTransforms) {\n            canvasPos = { top: 0, left: 0 };\n            var p = this.$fontMetrics.transformCoordinates([x, y]);\n            x = p[1] - this.gutterWidth - this.margin.left;\n            y = p[0];\n        }\n        else {\n            canvasPos = this.scroller.getBoundingClientRect();\n        }\n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n        var offset = offsetX / this.characterWidth;\n        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);\n        var col = this.$blockCursor ? Math.floor(offset) : Math.round(offset);\n        return { row: row, column: col, side: offset - col > 0 ? 1 : -1, offsetX: offsetX };\n    };\n    VirtualRenderer.prototype.screenToTextCoordinates = function (x, y) {\n        var canvasPos;\n        if (this.$hasCssTransforms) {\n            canvasPos = { top: 0, left: 0 };\n            var p = this.$fontMetrics.transformCoordinates([x, y]);\n            x = p[1] - this.gutterWidth - this.margin.left;\n            y = p[0];\n        }\n        else {\n            canvasPos = this.scroller.getBoundingClientRect();\n        }\n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n        var offset = offsetX / this.characterWidth;\n        var col = this.$blockCursor ? Math.floor(offset) : Math.round(offset);\n        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);\n        return this.session.screenToDocumentPosition(row, Math.max(col, 0), offsetX);\n    };\n    VirtualRenderer.prototype.textToScreenCoordinates = function (row, column) {\n        var canvasPos = this.scroller.getBoundingClientRect();\n        var pos = this.session.documentToScreenPosition(row, column);\n        var x = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, row)\n            ? this.session.$bidiHandler.getPosLeft(pos.column)\n            : Math.round(pos.column * this.characterWidth));\n        var y = pos.row * this.lineHeight;\n        return {\n            pageX: canvasPos.left + x - this.scrollLeft,\n            pageY: canvasPos.top + y - this.scrollTop\n        };\n    };\n    VirtualRenderer.prototype.visualizeFocus = function () {\n        dom.addCssClass(this.container, \"ace_focus\");\n    };\n    VirtualRenderer.prototype.visualizeBlur = function () {\n        dom.removeCssClass(this.container, \"ace_focus\");\n    };\n    VirtualRenderer.prototype.showComposition = function (composition) {\n        this.$composition = composition;\n        if (!composition.cssText) {\n            composition.cssText = this.textarea.style.cssText;\n        }\n        if (composition.useTextareaForIME == undefined)\n            composition.useTextareaForIME = this.$useTextareaForIME;\n        if (this.$useTextareaForIME) {\n            dom.addCssClass(this.textarea, \"ace_composition\");\n            this.textarea.style.cssText = \"\";\n            this.$moveTextAreaToCursor();\n            this.$cursorLayer.element.style.display = \"none\";\n        }\n        else {\n            composition.markerId = this.session.addMarker(composition.markerRange, \"ace_composition_marker\", \"text\");\n        }\n    };\n    VirtualRenderer.prototype.setCompositionText = function (text) {\n        var cursor = this.session.selection.cursor;\n        this.addToken(text, \"composition_placeholder\", cursor.row, cursor.column);\n        this.$moveTextAreaToCursor();\n    };\n    VirtualRenderer.prototype.hideComposition = function () {\n        if (!this.$composition)\n            return;\n        if (this.$composition.markerId)\n            this.session.removeMarker(this.$composition.markerId);\n        dom.removeCssClass(this.textarea, \"ace_composition\");\n        this.textarea.style.cssText = this.$composition.cssText;\n        var cursor = this.session.selection.cursor;\n        this.removeExtraToken(cursor.row, cursor.column);\n        this.$composition = null;\n        this.$cursorLayer.element.style.display = \"\";\n    };\n    VirtualRenderer.prototype.setGhostText = function (text, position) {\n        var cursor = this.session.selection.cursor;\n        var insertPosition = position || { row: cursor.row, column: cursor.column };\n        this.removeGhostText();\n        var textChunks = this.$calculateWrappedTextChunks(text, insertPosition);\n        this.addToken(textChunks[0].text, \"ghost_text\", insertPosition.row, insertPosition.column);\n        this.$ghostText = {\n            text: text,\n            position: {\n                row: insertPosition.row,\n                column: insertPosition.column\n            }\n        };\n        var widgetDiv = dom.createElement(\"div\");\n        if (textChunks.length > 1) {\n            var hiddenTokens = this.hideTokensAfterPosition(insertPosition.row, insertPosition.column);\n            var lastLineDiv;\n            textChunks.slice(1).forEach(function (el) {\n                var chunkDiv = dom.createElement(\"div\");\n                var chunkSpan = dom.createElement(\"span\");\n                chunkSpan.className = \"ace_ghost_text\";\n                if (el.wrapped)\n                    chunkDiv.className = \"ghost_text_line_wrapped\";\n                if (el.text.length === 0)\n                    el.text = \" \";\n                chunkSpan.appendChild(dom.createTextNode(el.text));\n                chunkDiv.appendChild(chunkSpan);\n                widgetDiv.appendChild(chunkDiv);\n                lastLineDiv = chunkDiv;\n            });\n            hiddenTokens.forEach(function (token) {\n                var element = dom.createElement(\"span\");\n                if (!isTextToken(token.type))\n                    element.className = \"ace_\" + token.type.replace(/\\./g, \" ace_\");\n                element.appendChild(dom.createTextNode(token.value));\n                lastLineDiv.appendChild(element);\n            });\n            this.$ghostTextWidget = {\n                el: widgetDiv,\n                row: insertPosition.row,\n                column: insertPosition.column,\n                className: \"ace_ghost_text_container\"\n            };\n            this.session.widgetManager.addLineWidget(this.$ghostTextWidget);\n            var pixelPosition = this.$cursorLayer.getPixelPosition(insertPosition, true);\n            var el = this.container;\n            var height = el.getBoundingClientRect().height;\n            var ghostTextHeight = textChunks.length * this.lineHeight;\n            var fitsY = ghostTextHeight < (height - pixelPosition.top);\n            if (fitsY)\n                return;\n            if (ghostTextHeight < height) {\n                this.scrollBy(0, (textChunks.length - 1) * this.lineHeight);\n            }\n            else {\n                this.scrollToRow(insertPosition.row);\n            }\n        }\n    };\n    VirtualRenderer.prototype.$calculateWrappedTextChunks = function (text, position) {\n        var availableWidth = this.$size.scrollerWidth - this.$padding * 2;\n        var limit = Math.floor(availableWidth / this.characterWidth) - 2;\n        limit = limit <= 0 ? 60 : limit; // this is a hack to prevent the editor from crashing when the window is too small\n        var textLines = text.split(/\\r?\\n/);\n        var textChunks = [];\n        for (var i = 0; i < textLines.length; i++) {\n            var displayTokens = this.session.$getDisplayTokens(textLines[i], position.column);\n            var wrapSplits = this.session.$computeWrapSplits(displayTokens, limit, this.session.$tabSize);\n            if (wrapSplits.length > 0) {\n                var start = 0;\n                wrapSplits.push(textLines[i].length);\n                for (var j = 0; j < wrapSplits.length; j++) {\n                    var textSlice = textLines[i].slice(start, wrapSplits[j]);\n                    textChunks.push({ text: textSlice, wrapped: true });\n                    start = wrapSplits[j];\n                }\n            }\n            else {\n                textChunks.push({ text: textLines[i], wrapped: false });\n            }\n        }\n        return textChunks;\n    };\n    VirtualRenderer.prototype.removeGhostText = function () {\n        if (!this.$ghostText)\n            return;\n        var position = this.$ghostText.position;\n        this.removeExtraToken(position.row, position.column);\n        if (this.$ghostTextWidget) {\n            this.session.widgetManager.removeLineWidget(this.$ghostTextWidget);\n            this.$ghostTextWidget = null;\n        }\n        this.$ghostText = null;\n    };\n    VirtualRenderer.prototype.addToken = function (text, type, row, column) {\n        var session = this.session;\n        session.bgTokenizer.lines[row] = null;\n        var newToken = { type: type, value: text };\n        var tokens = session.getTokens(row);\n        if (column == null || !tokens.length) {\n            tokens.push(newToken);\n        }\n        else {\n            var l = 0;\n            for (var i = 0; i < tokens.length; i++) {\n                var token = tokens[i];\n                l += token.value.length;\n                if (column <= l) {\n                    var diff = token.value.length - (l - column);\n                    var before = token.value.slice(0, diff);\n                    var after = token.value.slice(diff);\n                    tokens.splice(i, 1, { type: token.type, value: before }, newToken, { type: token.type, value: after });\n                    break;\n                }\n            }\n        }\n        this.updateLines(row, row);\n    };\n    VirtualRenderer.prototype.hideTokensAfterPosition = function (row, column) {\n        var tokens = this.session.getTokens(row);\n        var l = 0;\n        var hasPassedCursor = false;\n        var hiddenTokens = [];\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            l += token.value.length;\n            if (token.type === \"ghost_text\")\n                continue;\n            if (hasPassedCursor) {\n                hiddenTokens.push({ type: token.type, value: token.value });\n                token.type = \"hidden_token\";\n                continue;\n            }\n            if (l === column) {\n                hasPassedCursor = true;\n            }\n        }\n        this.updateLines(row, row);\n        return hiddenTokens;\n    };\n    VirtualRenderer.prototype.removeExtraToken = function (row, column) {\n        this.session.bgTokenizer.lines[row] = null;\n        this.updateLines(row, row);\n    };\n    VirtualRenderer.prototype.setTheme = function (theme, cb) {\n        var _self = this;\n        this.$themeId = theme;\n        _self._dispatchEvent('themeChange', { theme: theme });\n        if (!theme || typeof theme == \"string\") {\n            var moduleName = theme || this.$options.theme.initialValue;\n            config.loadModule([\"theme\", moduleName], afterLoad);\n        }\n        else {\n            afterLoad(theme);\n        }\n        function afterLoad(module) {\n            if (_self.$themeId != theme)\n                return cb && cb();\n            if (!module || !module.cssClass)\n                throw new Error(\"couldn't load module \" + theme + \" or it didn't call define\");\n            if (module.$id)\n                _self.$themeId = module.$id;\n            dom.importCssString(module.cssText, module.cssClass, _self.container);\n            if (_self.theme)\n                dom.removeCssClass(_self.container, _self.theme.cssClass);\n            var padding = \"padding\" in module ? module.padding\n                : \"padding\" in (_self.theme || {}) ? 4 : _self.$padding;\n            if (_self.$padding && padding != _self.$padding)\n                _self.setPadding(padding);\n            if (_self.$gutterLayer) {\n                var showGutterCursor = module[\"$showGutterCursorMarker\"];\n                if (showGutterCursor && !_self.$gutterLayer.$showCursorMarker) {\n                    _self.$gutterLayer.$showCursorMarker = \"theme\";\n                }\n                else if (!showGutterCursor && _self.$gutterLayer.$showCursorMarker == \"theme\") {\n                    _self.$gutterLayer.$showCursorMarker = null;\n                }\n            }\n            _self.$theme = module.cssClass;\n            _self.theme = module;\n            dom.addCssClass(_self.container, module.cssClass);\n            dom.setCssClass(_self.container, \"ace_dark\", module.isDark);\n            if (_self.$size) {\n                _self.$size.width = 0;\n                _self.$updateSizeAsync();\n            }\n            _self._dispatchEvent('themeLoaded', { theme: module });\n            cb && cb();\n            if (useragent.isSafari && _self.scroller) {\n                _self.scroller.style.background = \"red\";\n                _self.scroller.style.background = \"\";\n            }\n        }\n    };\n    VirtualRenderer.prototype.getTheme = function () {\n        return this.$themeId;\n    };\n    VirtualRenderer.prototype.setStyle = function (style, include) {\n        dom.setCssClass(this.container, style, include !== false);\n    };\n    VirtualRenderer.prototype.unsetStyle = function (style) {\n        dom.removeCssClass(this.container, style);\n    };\n    VirtualRenderer.prototype.setCursorStyle = function (style) {\n        dom.setStyle(this.scroller.style, \"cursor\", style);\n    };\n    VirtualRenderer.prototype.setMouseCursor = function (cursorStyle) {\n        dom.setStyle(this.scroller.style, \"cursor\", cursorStyle);\n    };\n    VirtualRenderer.prototype.attachToShadowRoot = function () {\n        dom.importCssString(editorCss, \"ace_editor.css\", this.container);\n    };\n    VirtualRenderer.prototype.destroy = function () {\n        this.freeze();\n        this.$fontMetrics.destroy();\n        this.$cursorLayer.destroy();\n        this.removeAllListeners();\n        this.container.textContent = \"\";\n        this.setOption(\"useResizeObserver\", false);\n    };\n    VirtualRenderer.prototype.$updateCustomScrollbar = function (val) {\n        var _self = this;\n        this.$horizScroll = this.$vScroll = null;\n        this.scrollBarV.element.remove();\n        this.scrollBarH.element.remove();\n        if (val === true) {\n            this.scrollBarV = new VScrollBarCustom(this.container, this);\n            this.scrollBarH = new HScrollBarCustom(this.container, this);\n            this.scrollBarV.setHeight(this.$size.scrollerHeight);\n            this.scrollBarH.setWidth(this.$size.scrollerWidth);\n            this.scrollBarV.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation)\n                    _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n            });\n            this.scrollBarH.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation)\n                    _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n            });\n            if (!this.$scrollDecorator) {\n                this.$scrollDecorator = new Decorator(this.scrollBarV, this);\n                this.$scrollDecorator.$updateDecorators();\n            }\n            else {\n                this.$scrollDecorator.setScrollBarV(this.scrollBarV);\n                this.$scrollDecorator.$updateDecorators();\n            }\n        }\n        else {\n            this.scrollBarV = new VScrollBar(this.container, this);\n            this.scrollBarH = new HScrollBar(this.container, this);\n            this.scrollBarV.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation)\n                    _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n            });\n            this.scrollBarH.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation)\n                    _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n            });\n        }\n    };\n    VirtualRenderer.prototype.$addResizeObserver = function () {\n        if (!window.ResizeObserver || this.$resizeObserver)\n            return;\n        var self = this;\n        this.$resizeTimer = lang.delayedCall(function () {\n            if (!self.destroyed)\n                self.onResize();\n        }, 50);\n        this.$resizeObserver = new window.ResizeObserver(function (e) {\n            var w = e[0].contentRect.width;\n            var h = e[0].contentRect.height;\n            if (Math.abs(self.$size.width - w) > 1\n                || Math.abs(self.$size.height - h) > 1) {\n                self.$resizeTimer.delay();\n            }\n            else {\n                self.$resizeTimer.cancel();\n            }\n        });\n        this.$resizeObserver.observe(this.container);\n    };\n    return VirtualRenderer;\n}());\nVirtualRenderer.prototype.CHANGE_CURSOR = 1;\nVirtualRenderer.prototype.CHANGE_MARKER = 2;\nVirtualRenderer.prototype.CHANGE_GUTTER = 4;\nVirtualRenderer.prototype.CHANGE_SCROLL = 8;\nVirtualRenderer.prototype.CHANGE_LINES = 16;\nVirtualRenderer.prototype.CHANGE_TEXT = 32;\nVirtualRenderer.prototype.CHANGE_SIZE = 64;\nVirtualRenderer.prototype.CHANGE_MARKER_BACK = 128;\nVirtualRenderer.prototype.CHANGE_MARKER_FRONT = 256;\nVirtualRenderer.prototype.CHANGE_FULL = 512;\nVirtualRenderer.prototype.CHANGE_H_SCROLL = 1024;\nVirtualRenderer.prototype.$changes = 0;\nVirtualRenderer.prototype.$padding = null;\nVirtualRenderer.prototype.$frozen = false;\nVirtualRenderer.prototype.STEPS = 8;\noop.implement(VirtualRenderer.prototype, EventEmitter);\nconfig.defineOptions(VirtualRenderer.prototype, \"renderer\", {\n    useResizeObserver: {\n        set: function (value) {\n            if (!value && this.$resizeObserver) {\n                this.$resizeObserver.disconnect();\n                this.$resizeTimer.cancel();\n                this.$resizeTimer = this.$resizeObserver = null;\n            }\n            else if (value && !this.$resizeObserver) {\n                this.$addResizeObserver();\n            }\n        }\n    },\n    animatedScroll: { initialValue: false },\n    showInvisibles: {\n        set: function (value) {\n            if (this.$textLayer.setShowInvisibles(value))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: false\n    },\n    showPrintMargin: {\n        set: function () { this.$updatePrintMargin(); },\n        initialValue: true\n    },\n    printMarginColumn: {\n        set: function () { this.$updatePrintMargin(); },\n        initialValue: 80\n    },\n    printMargin: {\n        set: function (val) {\n            if (typeof val == \"number\")\n                this.$printMarginColumn = val;\n            this.$showPrintMargin = !!val;\n            this.$updatePrintMargin();\n        },\n        get: function () {\n            return this.$showPrintMargin && this.$printMarginColumn;\n        }\n    },\n    showGutter: {\n        set: function (show) {\n            this.$gutter.style.display = show ? \"block\" : \"none\";\n            this.$loop.schedule(this.CHANGE_FULL);\n            this.onGutterResize();\n        },\n        initialValue: true\n    },\n    useSvgGutterIcons: {\n        set: function (value) {\n            this.$gutterLayer.$useSvgGutterIcons = value;\n        },\n        initialValue: false\n    },\n    showFoldedAnnotations: {\n        set: function (value) {\n            this.$gutterLayer.$showFoldedAnnotations = value;\n        },\n        initialValue: false\n    },\n    fadeFoldWidgets: {\n        set: function (show) {\n            dom.setCssClass(this.$gutter, \"ace_fade-fold-widgets\", show);\n        },\n        initialValue: false\n    },\n    showFoldWidgets: {\n        set: function (show) {\n            this.$gutterLayer.setShowFoldWidgets(show);\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        },\n        initialValue: true\n    },\n    displayIndentGuides: {\n        set: function (show) {\n            if (this.$textLayer.setDisplayIndentGuides(show))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: true\n    },\n    highlightIndentGuides: {\n        set: function (show) {\n            if (this.$textLayer.setHighlightIndentGuides(show) == true) {\n                this.$textLayer.$highlightIndentGuide();\n            }\n            else {\n                this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells);\n            }\n        },\n        initialValue: true\n    },\n    highlightGutterLine: {\n        set: function (shouldHighlight) {\n            this.$gutterLayer.setHighlightGutterLine(shouldHighlight);\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        },\n        initialValue: true\n    },\n    hScrollBarAlwaysVisible: {\n        set: function (val) {\n            if (!this.$hScrollBarAlwaysVisible || !this.$horizScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    vScrollBarAlwaysVisible: {\n        set: function (val) {\n            if (!this.$vScrollBarAlwaysVisible || !this.$vScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    fontSize: {\n        set: function (size) {\n            if (typeof size == \"number\")\n                size = size + \"px\";\n            this.container.style.fontSize = size;\n            this.updateFontSize();\n        },\n        initialValue: 12\n    },\n    fontFamily: {\n        set: function (name) {\n            this.container.style.fontFamily = name;\n            this.updateFontSize();\n        }\n    },\n    maxLines: {\n        set: function (val) {\n            this.updateFull();\n        }\n    },\n    minLines: {\n        set: function (val) {\n            if (!(this.$minLines < 0x1ffffffffffff))\n                this.$minLines = 0;\n            this.updateFull();\n        }\n    },\n    maxPixelHeight: {\n        set: function (val) {\n            this.updateFull();\n        },\n        initialValue: 0\n    },\n    scrollPastEnd: {\n        set: function (val) {\n            val = +val || 0;\n            if (this.$scrollPastEnd == val)\n                return;\n            this.$scrollPastEnd = val;\n            this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: 0,\n        handlesSet: true\n    },\n    fixedWidthGutter: {\n        set: function (val) {\n            this.$gutterLayer.$fixedWidth = !!val;\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        }\n    },\n    customScrollbar: {\n        set: function (val) {\n            this.$updateCustomScrollbar(val);\n        },\n        initialValue: false\n    },\n    theme: {\n        set: function (val) { this.setTheme(val); },\n        get: function () { return this.$themeId || this.theme; },\n        initialValue: \"./theme/textmate\",\n        handlesSet: true\n    },\n    hasCssTransforms: {},\n    useTextareaForIME: {\n        initialValue: !useragent.isMobile && !useragent.isIE\n    }\n});\nexports.VirtualRenderer = VirtualRenderer;\n\n});\n\nace.define(\"ace/worker/worker_client\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/net\",\"ace/lib/event_emitter\",\"ace/config\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar net = require(\"../lib/net\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar config = require(\"../config\");\n\nfunction $workerBlob(workerUrl) {\n    var script = \"importScripts('\" + net.qualifyURL(workerUrl) + \"');\";\n    try {\n        return new Blob([script], {\"type\": \"application/javascript\"});\n    } catch (e) { // Backwards-compatibility\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n        var blobBuilder = new BlobBuilder();\n        blobBuilder.append(script);\n        return blobBuilder.getBlob(\"application/javascript\");\n    }\n}\n\nfunction createWorker(workerUrl) {\n    if (typeof Worker == \"undefined\")\n        return { postMessage: function() {}, terminate: function() {} };\n    if (config.get(\"loadWorkerFromBlob\")) {\n        var blob = $workerBlob(workerUrl);\n        var URL = window.URL || window.webkitURL;\n        var blobURL = URL.createObjectURL(blob);\n        return new Worker(blobURL);\n    }\n    return new Worker(workerUrl);\n}\n\nvar WorkerClient = function(worker) {\n    if (!worker.postMessage)\n        worker = this.$createWorkerFromOldConfig.apply(this, arguments);\n\n    this.$worker = worker;\n    this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);\n    this.changeListener = this.changeListener.bind(this);\n    this.onMessage = this.onMessage.bind(this);\n\n    this.callbackId = 1;\n    this.callbacks = {};\n\n    this.$worker.onmessage = this.onMessage;\n};\n\n(function(){\n\n    oop.implement(this, EventEmitter);\n\n    this.$createWorkerFromOldConfig = function(topLevelNamespaces, mod, classname, workerUrl, importScripts) {\n        if (require.nameToUrl && !require.toUrl)\n            require.toUrl = require.nameToUrl;\n\n        if (config.get(\"packaged\") || !require.toUrl) {\n            workerUrl = workerUrl || config.moduleUrl(mod, \"worker\");\n        } else {\n            var normalizePath = this.$normalizePath;\n            workerUrl = workerUrl || normalizePath(require.toUrl(\"ace/worker/worker.js\", null, \"_\"));\n\n            var tlns = {};\n            topLevelNamespaces.forEach(function(ns) {\n                tlns[ns] = normalizePath(require.toUrl(ns, null, \"_\").replace(/(\\.js)?(\\?.*)?$/, \"\"));\n            });\n        }\n\n        this.$worker = createWorker(workerUrl);\n        if (importScripts) {\n            this.send(\"importScripts\", importScripts);\n        }\n        this.$worker.postMessage({\n            init : true,\n            tlns : tlns,\n            module : mod,\n            classname : classname\n        });\n        return this.$worker;\n    };\n\n    this.onMessage = function(e) {\n        var msg = e.data;\n        switch (msg.type) {\n            case \"event\":\n                this._signal(msg.name, {data: msg.data});\n                break;\n            case \"call\":\n                var callback = this.callbacks[msg.id];\n                if (callback) {\n                    callback(msg.data);\n                    delete this.callbacks[msg.id];\n                }\n                break;\n            case \"error\":\n                this.reportError(msg.data);\n                break;\n            case \"log\":\n                window.console && console.log && console.log.apply(console, msg.data);\n                break;\n        }\n    };\n    \n    this.reportError = function(err) {\n        window.console && console.error && console.error(err);\n    };\n\n    this.$normalizePath = function(path) {\n        return net.qualifyURL(path);\n    };\n\n    this.terminate = function() {\n        this._signal(\"terminate\", {});\n        this.deltaQueue = null;\n        this.$worker.terminate();\n        this.$worker.onerror = function(e) {\n            e.preventDefault();\n        };\n        this.$worker = null;\n        if (this.$doc)\n            this.$doc.off(\"change\", this.changeListener);\n        this.$doc = null;\n    };\n\n    this.send = function(cmd, args) {\n        this.$worker.postMessage({command: cmd, args: args});\n    };\n\n    this.call = function(cmd, args, callback) {\n        if (callback) {\n            var id = this.callbackId++;\n            this.callbacks[id] = callback;\n            args.push(id);\n        }\n        this.send(cmd, args);\n    };\n\n    this.emit = function(event, data) {\n        try {\n            if (data.data && data.data.err)\n                data.data.err = {message: data.data.err.message, stack: data.data.err.stack, code: data.data.err.code};\n                this.$worker && this.$worker.postMessage({event: event, data: {data: data.data}});\n        }\n        catch(ex) {\n            console.error(ex.stack);\n        }\n    };\n\n    this.attachToDocument = function(doc) {\n        if (this.$doc)\n            this.terminate();\n\n        this.$doc = doc;\n        this.call(\"setValue\", [doc.getValue()]);\n        doc.on(\"change\", this.changeListener, true);\n    };\n\n    this.changeListener = function(delta) {\n        if (!this.deltaQueue) {\n            this.deltaQueue = [];\n            setTimeout(this.$sendDeltaQueue, 0);\n        }\n        if (delta.action == \"insert\")\n            this.deltaQueue.push(delta.start, delta.lines);\n        else\n            this.deltaQueue.push(delta.start, delta.end);\n    };\n\n    this.$sendDeltaQueue = function() {\n        var q = this.deltaQueue;\n        if (!q) return;\n        this.deltaQueue = null;\n        if (q.length > 50 && q.length > this.$doc.getLength() >> 1) {\n            this.call(\"setValue\", [this.$doc.getValue()]);\n        } else\n            this.emit(\"change\", {data: q});\n    };\n\n}).call(WorkerClient.prototype);\n\n\nvar UIWorkerClient = function(topLevelNamespaces, mod, classname) {\n    var main = null;\n    var emitSync = false;\n    var sender = Object.create(EventEmitter);\n\n    var messageBuffer = [];\n    var workerClient = new WorkerClient({\n        messageBuffer: messageBuffer,\n        terminate: function() {},\n        postMessage: function(e) {\n            messageBuffer.push(e);\n            if (!main) return;\n            if (emitSync)\n                setTimeout(processNext);\n            else\n                processNext();\n        }\n    });\n\n    workerClient.setEmitSync = function(val) { emitSync = val; };\n\n    var processNext = function() {\n        var msg = messageBuffer.shift();\n        if (msg.command)\n            main[msg.command].apply(main, msg.args);\n        else if (msg.event)\n            sender._signal(msg.event, msg.data);\n    };\n\n    sender.postMessage = function(msg) {\n        workerClient.onMessage({data: msg});\n    };\n    sender.callback = function(data, callbackId) {\n        this.postMessage({type: \"call\", id: callbackId, data: data});\n    };\n    sender.emit = function(name, data) {\n        this.postMessage({type: \"event\", name: name, data: data});\n    };\n\n    config.loadModule([\"worker\", mod], function(Main) {\n        main = new Main[classname](sender);\n        while (messageBuffer.length)\n            processNext();\n    });\n\n    return workerClient;\n};\n\nexports.UIWorkerClient = UIWorkerClient;\nexports.WorkerClient = WorkerClient;\nexports.createWorker = createWorker;\n\n\n});\n\nace.define(\"ace/placeholder\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/lib/event_emitter\",\"ace/lib/oop\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"./range\").Range;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar oop = require(\"./lib/oop\");\nvar PlaceHolder = /** @class */ (function () {\n    function PlaceHolder(session, length, pos, others, mainClass, othersClass) {\n        var _self = this;\n        this.length = length;\n        this.session = session;\n        this.doc = session.getDocument();\n        this.mainClass = mainClass;\n        this.othersClass = othersClass;\n        this.$onUpdate = this.onUpdate.bind(this);\n        this.doc.on(\"change\", this.$onUpdate, true);\n        this.$others = others;\n        this.$onCursorChange = function () {\n            setTimeout(function () {\n                _self.onCursorChange();\n            });\n        };\n        this.$pos = pos;\n        var undoStack = session.getUndoManager().$undoStack || session.getUndoManager()[\"$undostack\"] || { length: -1 };\n        this.$undoStackDepth = undoStack.length;\n        this.setup();\n        session.selection.on(\"changeCursor\", this.$onCursorChange);\n    }\n    PlaceHolder.prototype.setup = function () {\n        var _self = this;\n        var doc = this.doc;\n        var session = this.session;\n        this.selectionBefore = session.selection.toJSON();\n        if (session.selection.inMultiSelectMode)\n            session.selection.toSingleRange();\n        this.pos = doc.createAnchor(this.$pos.row, this.$pos.column);\n        var pos = this.pos;\n        pos.$insertRight = true;\n        pos.detach();\n        pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column + this.length), this.mainClass, null, false);\n        this.others = [];\n        this.$others.forEach(function (other) {\n            var anchor = doc.createAnchor(other.row, other.column);\n            anchor.$insertRight = true;\n            anchor.detach();\n            _self.others.push(anchor);\n        });\n        session.setUndoSelect(false);\n    };\n    PlaceHolder.prototype.showOtherMarkers = function () {\n        if (this.othersActive)\n            return;\n        var session = this.session;\n        var _self = this;\n        this.othersActive = true;\n        this.others.forEach(function (anchor) {\n            anchor.markerId = session.addMarker(new Range(anchor.row, anchor.column, anchor.row, anchor.column + _self.length), _self.othersClass, null, false);\n        });\n    };\n    PlaceHolder.prototype.hideOtherMarkers = function () {\n        if (!this.othersActive)\n            return;\n        this.othersActive = false;\n        for (var i = 0; i < this.others.length; i++) {\n            this.session.removeMarker(this.others[i].markerId);\n        }\n    };\n    PlaceHolder.prototype.onUpdate = function (delta) {\n        if (this.$updating)\n            return this.updateAnchors(delta);\n        var range = delta;\n        if (range.start.row !== range.end.row)\n            return;\n        if (range.start.row !== this.pos.row)\n            return;\n        this.$updating = true;\n        var lengthDiff = delta.action === \"insert\" ? range.end.column - range.start.column : range.start.column - range.end.column;\n        var inMainRange = range.start.column >= this.pos.column && range.start.column <= this.pos.column + this.length + 1;\n        var distanceFromStart = range.start.column - this.pos.column;\n        this.updateAnchors(delta);\n        if (inMainRange)\n            this.length += lengthDiff;\n        if (inMainRange && !this.session.$fromUndo) {\n            if (delta.action === 'insert') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = { row: otherPos.row, column: otherPos.column + distanceFromStart };\n                    this.doc.insertMergedLines(newPos, delta.lines);\n                }\n            }\n            else if (delta.action === 'remove') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = { row: otherPos.row, column: otherPos.column + distanceFromStart };\n                    this.doc.remove(new Range(newPos.row, newPos.column, newPos.row, newPos.column - lengthDiff));\n                }\n            }\n        }\n        this.$updating = false;\n        this.updateMarkers();\n    };\n    PlaceHolder.prototype.updateAnchors = function (delta) {\n        this.pos.onChange(delta);\n        for (var i = this.others.length; i--;)\n            this.others[i].onChange(delta);\n        this.updateMarkers();\n    };\n    PlaceHolder.prototype.updateMarkers = function () {\n        if (this.$updating)\n            return;\n        var _self = this;\n        var session = this.session;\n        var updateMarker = function (pos, className) {\n            session.removeMarker(pos.markerId);\n            pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column + _self.length), className, null, false);\n        };\n        updateMarker(this.pos, this.mainClass);\n        for (var i = this.others.length; i--;)\n            updateMarker(this.others[i], this.othersClass);\n    };\n    PlaceHolder.prototype.onCursorChange = function (event) {\n        if (this.$updating || !this.session)\n            return;\n        var pos = this.session.selection.getCursor();\n        if (pos.row === this.pos.row && pos.column >= this.pos.column && pos.column <= this.pos.column + this.length) {\n            this.showOtherMarkers();\n            this._emit(\"cursorEnter\", event);\n        }\n        else {\n            this.hideOtherMarkers();\n            this._emit(\"cursorLeave\", event);\n        }\n    };\n    PlaceHolder.prototype.detach = function () {\n        this.session.removeMarker(this.pos && this.pos.markerId);\n        this.hideOtherMarkers();\n        this.doc.off(\"change\", this.$onUpdate);\n        this.session.selection.off(\"changeCursor\", this.$onCursorChange);\n        this.session.setUndoSelect(true);\n        this.session = null;\n    };\n    PlaceHolder.prototype.cancel = function () {\n        if (this.$undoStackDepth === -1)\n            return;\n        var undoManager = this.session.getUndoManager();\n        var undosRequired = (undoManager.$undoStack || undoManager[\"$undostack\"]).length - this.$undoStackDepth;\n        for (var i = 0; i < undosRequired; i++) {\n            undoManager.undo(this.session, true);\n        }\n        if (this.selectionBefore)\n            this.session.selection.fromJSON(this.selectionBefore);\n    };\n    return PlaceHolder;\n}());\noop.implement(PlaceHolder.prototype, EventEmitter);\nexports.PlaceHolder = PlaceHolder;\n\n});\n\nace.define(\"ace/mouse/multi_select_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\"], function(require, exports, module){var event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\nfunction onMouseDown(e) {\n    var ev = e.domEvent;\n    var alt = ev.altKey;\n    var shift = ev.shiftKey;\n    var ctrl = ev.ctrlKey;\n    var accel = e.getAccelKey();\n    var button = e.getButton();\n    if (ctrl && useragent.isMac)\n        button = ev.button;\n    if (e.editor.inMultiSelectMode && button == 2) {\n        e.editor.textInput.onContextMenu(e.domEvent);\n        return;\n    }\n    if (!ctrl && !alt && !accel) {\n        if (button === 0 && e.editor.inMultiSelectMode)\n            e.editor.exitMultiSelectMode();\n        return;\n    }\n    if (button !== 0)\n        return;\n    var editor = e.editor;\n    var selection = editor.selection;\n    var isMultiSelect = editor.inMultiSelectMode;\n    var pos = e.getDocumentPosition();\n    var cursor = selection.getCursor();\n    var inSelection = e.inSelection() || (selection.isEmpty() && isSamePoint(pos, cursor));\n    var mouseX = e.x, mouseY = e.y;\n    var onMouseSelection = function (e) {\n        mouseX = e.clientX;\n        mouseY = e.clientY;\n    };\n    var session = editor.session;\n    var screenAnchor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n    var screenCursor = screenAnchor;\n    var selectionMode;\n    if (editor.$mouseHandler.$enableJumpToDef) {\n        if (ctrl && alt || accel && alt)\n            selectionMode = shift ? \"block\" : \"add\";\n        else if (alt && editor.$blockSelectEnabled)\n            selectionMode = \"block\";\n    }\n    else {\n        if (accel && !alt) {\n            selectionMode = \"add\";\n            if (!isMultiSelect && shift)\n                return;\n        }\n        else if (alt && editor.$blockSelectEnabled) {\n            selectionMode = \"block\";\n        }\n    }\n    if (selectionMode && useragent.isMac && ev.ctrlKey) {\n        editor.$mouseHandler.cancelContextMenu();\n    }\n    if (selectionMode == \"add\") {\n        if (!isMultiSelect && inSelection)\n            return; // dragging\n        if (!isMultiSelect) {\n            var range = selection.toOrientedRange();\n            editor.addSelectionMarker(range);\n        }\n        var oldRange = selection.rangeList.rangeAtPoint(pos);\n        editor.inVirtualSelectionMode = true;\n        if (shift) {\n            oldRange = null;\n            range = selection.ranges[0] || range;\n            editor.removeSelectionMarker(range);\n        }\n        editor.once(\"mouseup\", function () {\n            var tmpSel = selection.toOrientedRange();\n            if (oldRange && tmpSel.isEmpty() && isSamePoint(oldRange.cursor, tmpSel.cursor))\n                selection.substractPoint(tmpSel.cursor);\n            else {\n                if (shift) {\n                    selection.substractPoint(range.cursor);\n                }\n                else if (range) {\n                    editor.removeSelectionMarker(range);\n                    selection.addRange(range);\n                }\n                selection.addRange(tmpSel);\n            }\n            editor.inVirtualSelectionMode = false;\n        });\n    }\n    else if (selectionMode == \"block\") {\n        e.stop();\n        editor.inVirtualSelectionMode = true;\n        var initialRange;\n        var rectSel = [];\n        var blockSelect = function () {\n            var newCursor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n            var cursor = session.screenToDocumentPosition(newCursor.row, newCursor.column, newCursor.offsetX);\n            if (isSamePoint(screenCursor, newCursor) && isSamePoint(cursor, selection.lead))\n                return;\n            screenCursor = newCursor;\n            editor.selection.moveToPosition(cursor);\n            editor.renderer.scrollCursorIntoView();\n            editor.removeSelectionMarkers(rectSel);\n            rectSel = selection.rectangularRangeBlock(screenCursor, screenAnchor);\n            if (editor.$mouseHandler.$clickSelection && rectSel.length == 1 && rectSel[0].isEmpty())\n                rectSel[0] = editor.$mouseHandler.$clickSelection.clone();\n            rectSel.forEach(editor.addSelectionMarker, editor);\n            editor.updateSelectionMarkers();\n        };\n        if (isMultiSelect && !accel) {\n            selection.toSingleRange();\n        }\n        else if (!isMultiSelect && accel) {\n            initialRange = selection.toOrientedRange();\n            editor.addSelectionMarker(initialRange);\n        }\n        if (shift)\n            screenAnchor = session.documentToScreenPosition(selection.lead);\n        else\n            selection.moveToPosition(pos);\n        screenCursor = { row: -1, column: -1 };\n        var onMouseSelectionEnd = function (e) {\n            blockSelect();\n            clearInterval(timerId);\n            editor.removeSelectionMarkers(rectSel);\n            if (!rectSel.length)\n                rectSel = [selection.toOrientedRange()];\n            if (initialRange) {\n                editor.removeSelectionMarker(initialRange);\n                selection.toSingleRange(initialRange);\n            }\n            for (var i = 0; i < rectSel.length; i++)\n                selection.addRange(rectSel[i]);\n            editor.inVirtualSelectionMode = false;\n            editor.$mouseHandler.$clickSelection = null;\n        };\n        var onSelectionInterval = blockSelect;\n        event.capture(editor.container, onMouseSelection, onMouseSelectionEnd);\n        var timerId = setInterval(function () { onSelectionInterval(); }, 20);\n        return e.preventDefault();\n    }\n}\nexports.onMouseDown = onMouseDown;\n\n});\n\nace.define(\"ace/commands/multi_select_commands\",[\"require\",\"exports\",\"module\",\"ace/keyboard/hash_handler\"], function(require, exports, module){/**\n * commands to enter multiselect mode\n * @type {import(\"../../ace-internal\").Ace.Command[]}\n */\nexports.defaultCommands = [{\n        name: \"addCursorAbove\",\n        description: \"Add cursor above\",\n        exec: function (editor) { editor.selectMoreLines(-1); },\n        bindKey: { win: \"Ctrl-Alt-Up\", mac: \"Ctrl-Alt-Up\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"addCursorBelow\",\n        description: \"Add cursor below\",\n        exec: function (editor) { editor.selectMoreLines(1); },\n        bindKey: { win: \"Ctrl-Alt-Down\", mac: \"Ctrl-Alt-Down\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"addCursorAboveSkipCurrent\",\n        description: \"Add cursor above (skip current)\",\n        exec: function (editor) { editor.selectMoreLines(-1, true); },\n        bindKey: { win: \"Ctrl-Alt-Shift-Up\", mac: \"Ctrl-Alt-Shift-Up\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"addCursorBelowSkipCurrent\",\n        description: \"Add cursor below (skip current)\",\n        exec: function (editor) { editor.selectMoreLines(1, true); },\n        bindKey: { win: \"Ctrl-Alt-Shift-Down\", mac: \"Ctrl-Alt-Shift-Down\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectMoreBefore\",\n        description: \"Select more before\",\n        exec: function (editor) { editor.selectMore(-1); },\n        bindKey: { win: \"Ctrl-Alt-Left\", mac: \"Ctrl-Alt-Left\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectMoreAfter\",\n        description: \"Select more after\",\n        exec: function (editor) { editor.selectMore(1); },\n        bindKey: { win: \"Ctrl-Alt-Right\", mac: \"Ctrl-Alt-Right\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectNextBefore\",\n        description: \"Select next before\",\n        exec: function (editor) { editor.selectMore(-1, true); },\n        bindKey: { win: \"Ctrl-Alt-Shift-Left\", mac: \"Ctrl-Alt-Shift-Left\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"selectNextAfter\",\n        description: \"Select next after\",\n        exec: function (editor) { editor.selectMore(1, true); },\n        bindKey: { win: \"Ctrl-Alt-Shift-Right\", mac: \"Ctrl-Alt-Shift-Right\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }, {\n        name: \"toggleSplitSelectionIntoLines\",\n        description: \"Split selection into lines\",\n        exec: function (editor) {\n            if (editor.multiSelect.rangeCount > 1)\n                editor.multiSelect.joinSelections();\n            else\n                editor.multiSelect.splitIntoLines();\n        },\n        bindKey: { win: \"Ctrl-Alt-L\", mac: \"Ctrl-Alt-L\" },\n        readOnly: true\n    }, {\n        name: \"splitSelectionIntoLines\",\n        description: \"Split into lines\",\n        exec: function (editor) { editor.multiSelect.splitIntoLines(); },\n        readOnly: true\n    }, {\n        name: \"alignCursors\",\n        description: \"Align cursors\",\n        exec: function (editor) { editor.alignCursors(); },\n        bindKey: { win: \"Ctrl-Alt-A\", mac: \"Ctrl-Alt-A\" },\n        scrollIntoView: \"cursor\"\n    }, {\n        name: \"findAll\",\n        description: \"Find all\",\n        exec: function (editor) { editor.findAll(); },\n        bindKey: { win: \"Ctrl-Alt-K\", mac: \"Ctrl-Alt-G\" },\n        scrollIntoView: \"cursor\",\n        readOnly: true\n    }];\nexports.multiSelectCommands = [{\n        name: \"singleSelection\",\n        description: \"Single selection\",\n        bindKey: \"esc\",\n        exec: function (editor) { editor.exitMultiSelectMode(); },\n        scrollIntoView: \"cursor\",\n        readOnly: true,\n        isAvailable: function (editor) { return editor && editor.inMultiSelectMode; }\n    }];\nvar HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\nexports.keyboardHandler = new HashHandler(exports.multiSelectCommands);\n\n});\n\nace.define(\"ace/multi_select\",[\"require\",\"exports\",\"module\",\"ace/range_list\",\"ace/range\",\"ace/selection\",\"ace/mouse/multi_select_handler\",\"ace/lib/event\",\"ace/lib/lang\",\"ace/commands/multi_select_commands\",\"ace/search\",\"ace/edit_session\",\"ace/editor\",\"ace/config\"], function(require, exports, module){/**\n * @typedef {import(\"./anchor\").Anchor} Anchor\n * @typedef {import(\"../ace-internal\").Ace.Point} Point\n * @typedef {import(\"../ace-internal\").Ace.ScreenCoordinates} ScreenCoordinates\n */\nvar RangeList = require(\"./range_list\").RangeList;\nvar Range = require(\"./range\").Range;\nvar Selection = require(\"./selection\").Selection;\nvar onMouseDown = require(\"./mouse/multi_select_handler\").onMouseDown;\nvar event = require(\"./lib/event\");\nvar lang = require(\"./lib/lang\");\nvar commands = require(\"./commands/multi_select_commands\");\nexports.commands = commands.defaultCommands.concat(commands.multiSelectCommands);\nvar Search = require(\"./search\").Search;\nvar search = new Search();\nfunction find(session, needle, dir) {\n    search.$options.wrap = true;\n    search.$options.needle = needle;\n    search.$options.backwards = dir == -1;\n    return search.find(session);\n}\nvar EditSession = require(\"./edit_session\").EditSession;\n(function () {\n    this.getSelectionMarkers = function () {\n        return this.$selectionMarkers;\n    };\n}).call(EditSession.prototype);\n(function () {\n    this.ranges = null;\n    this.rangeList = null;\n    this.addRange = function (range, $blockChangeEvents) {\n        if (!range)\n            return;\n        if (!this.inMultiSelectMode && this.rangeCount === 0) {\n            var oldRange = this.toOrientedRange();\n            this.rangeList.add(oldRange);\n            this.rangeList.add(range);\n            if (this.rangeList.ranges.length != 2) {\n                this.rangeList.removeAll();\n                return $blockChangeEvents || this.fromOrientedRange(range);\n            }\n            this.rangeList.removeAll();\n            this.rangeList.add(oldRange);\n            this.$onAddRange(oldRange);\n        }\n        if (!range.cursor)\n            range.cursor = range.end;\n        var removed = this.rangeList.add(range);\n        this.$onAddRange(range);\n        if (removed.length)\n            this.$onRemoveRange(removed);\n        if (this.rangeCount > 1 && !this.inMultiSelectMode) {\n            this._signal(\"multiSelect\");\n            this.inMultiSelectMode = true;\n            this.session.$undoSelect = false;\n            this.rangeList.attach(this.session);\n        }\n        return $blockChangeEvents || this.fromOrientedRange(range);\n    };\n    this.toSingleRange = function (range) {\n        range = range || this.ranges[0];\n        var removed = this.rangeList.removeAll();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n        range && this.fromOrientedRange(range);\n    };\n    this.substractPoint = function (pos) {\n        var removed = this.rangeList.substractPoint(pos);\n        if (removed) {\n            this.$onRemoveRange(removed);\n            return removed[0];\n        }\n    };\n    this.mergeOverlappingRanges = function () {\n        var removed = this.rangeList.merge();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n    };\n    this.$onAddRange = function (range) {\n        this.rangeCount = this.rangeList.ranges.length;\n        this.ranges.unshift(range);\n        this._signal(\"addRange\", { range: range });\n    };\n    this.$onRemoveRange = function (removed) {\n        this.rangeCount = this.rangeList.ranges.length;\n        if (this.rangeCount == 1 && this.inMultiSelectMode) {\n            var lastRange = this.rangeList.ranges.pop();\n            removed.push(lastRange);\n            this.rangeCount = 0;\n        }\n        for (var i = removed.length; i--;) {\n            var index = this.ranges.indexOf(removed[i]);\n            this.ranges.splice(index, 1);\n        }\n        this._signal(\"removeRange\", { ranges: removed });\n        if (this.rangeCount === 0 && this.inMultiSelectMode) {\n            this.inMultiSelectMode = false;\n            this._signal(\"singleSelect\");\n            this.session.$undoSelect = true;\n            this.rangeList.detach(this.session);\n        }\n        lastRange = lastRange || this.ranges[0];\n        if (lastRange && !lastRange.isEqual(this.getRange()))\n            this.fromOrientedRange(lastRange);\n    };\n    this.$initRangeList = function () {\n        if (this.rangeList)\n            return;\n        this.rangeList = new RangeList();\n        this.ranges = [];\n        this.rangeCount = 0;\n    };\n    this.getAllRanges = function () {\n        return this.rangeCount ? this.rangeList.ranges.concat() : [this.getRange()];\n    };\n    this.splitIntoLines = function () {\n        var ranges = this.ranges.length ? this.ranges : [this.getRange()];\n        var newRanges = [];\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            var row = range.start.row;\n            var endRow = range.end.row;\n            if (row === endRow) {\n                newRanges.push(range.clone());\n            }\n            else {\n                newRanges.push(new Range(row, range.start.column, row, this.session.getLine(row).length));\n                while (++row < endRow)\n                    newRanges.push(this.getLineRange(row, true));\n                newRanges.push(new Range(endRow, 0, endRow, range.end.column));\n            }\n            if (i == 0 && !this.isBackwards())\n                newRanges = newRanges.reverse();\n        }\n        this.toSingleRange();\n        for (var i = newRanges.length; i--;)\n            this.addRange(newRanges[i]);\n    };\n    this.joinSelections = function () {\n        var ranges = this.rangeList.ranges;\n        var lastRange = ranges[ranges.length - 1];\n        var range = Range.fromPoints(ranges[0].start, lastRange.end);\n        this.toSingleRange();\n        this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n    };\n    this.toggleBlockSelection = function () {\n        if (this.rangeCount > 1) {\n            var ranges = this.rangeList.ranges;\n            var lastRange = ranges[ranges.length - 1];\n            var range = Range.fromPoints(ranges[0].start, lastRange.end);\n            this.toSingleRange();\n            this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n        }\n        else {\n            var cursor = this.session.documentToScreenPosition(this.cursor);\n            var anchor = this.session.documentToScreenPosition(this.anchor);\n            var rectSel = this.rectangularRangeBlock(cursor, anchor);\n            rectSel.forEach(this.addRange, this);\n        }\n    };\n    this.rectangularRangeBlock = function (screenCursor, screenAnchor, includeEmptyLines) {\n        var rectSel = [];\n        var xBackwards = screenCursor.column < screenAnchor.column;\n        if (xBackwards) {\n            var startColumn = screenCursor.column;\n            var endColumn = screenAnchor.column;\n            var startOffsetX = screenCursor.offsetX;\n            var endOffsetX = screenAnchor.offsetX;\n        }\n        else {\n            var startColumn = screenAnchor.column;\n            var endColumn = screenCursor.column;\n            var startOffsetX = screenAnchor.offsetX;\n            var endOffsetX = screenCursor.offsetX;\n        }\n        var yBackwards = screenCursor.row < screenAnchor.row;\n        if (yBackwards) {\n            var startRow = screenCursor.row;\n            var endRow = screenAnchor.row;\n        }\n        else {\n            var startRow = screenAnchor.row;\n            var endRow = screenCursor.row;\n        }\n        if (startColumn < 0)\n            startColumn = 0;\n        if (startRow < 0)\n            startRow = 0;\n        if (startRow == endRow)\n            includeEmptyLines = true;\n        var docEnd;\n        for (var row = startRow; row <= endRow; row++) {\n            var range = Range.fromPoints(this.session.screenToDocumentPosition(row, startColumn, startOffsetX), this.session.screenToDocumentPosition(row, endColumn, endOffsetX));\n            if (range.isEmpty()) {\n                if (docEnd && isSamePoint(range.end, docEnd))\n                    break;\n                docEnd = range.end;\n            }\n            range.cursor = xBackwards ? range.start : range.end;\n            rectSel.push(range);\n        }\n        if (yBackwards)\n            rectSel.reverse();\n        if (!includeEmptyLines) {\n            var end = rectSel.length - 1;\n            while (rectSel[end].isEmpty() && end > 0)\n                end--;\n            if (end > 0) {\n                var start = 0;\n                while (rectSel[start].isEmpty())\n                    start++;\n            }\n            for (var i = end; i >= start; i--) {\n                if (rectSel[i].isEmpty())\n                    rectSel.splice(i, 1);\n            }\n        }\n        return rectSel;\n    };\n}).call(Selection.prototype);\nvar Editor = require(\"./editor\").Editor;\n(function () {\n    this.updateSelectionMarkers = function () {\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n    this.addSelectionMarker = function (orientedRange) {\n        if (!orientedRange.cursor)\n            orientedRange.cursor = orientedRange.end;\n        var style = this.getSelectionStyle();\n        orientedRange.marker = this.session.addMarker(orientedRange, \"ace_selection\", style);\n        this.session.$selectionMarkers.push(orientedRange);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n        return orientedRange;\n    };\n    this.removeSelectionMarker = function (range) {\n        if (!range.marker)\n            return;\n        this.session.removeMarker(range.marker);\n        var index = this.session.$selectionMarkers.indexOf(range);\n        if (index != -1)\n            this.session.$selectionMarkers.splice(index, 1);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n    };\n    this.removeSelectionMarkers = function (ranges) {\n        var markerList = this.session.$selectionMarkers;\n        for (var i = ranges.length; i--;) {\n            var range = ranges[i];\n            if (!range.marker)\n                continue;\n            this.session.removeMarker(range.marker);\n            var index = markerList.indexOf(range);\n            if (index != -1)\n                markerList.splice(index, 1);\n        }\n        this.session.selectionMarkerCount = markerList.length;\n    };\n    this.$onAddRange = function (e) {\n        this.addSelectionMarker(e.range);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n    this.$onRemoveRange = function (e) {\n        this.removeSelectionMarkers(e.ranges);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n    this.$onMultiSelect = function (e) {\n        if (this.inMultiSelectMode)\n            return;\n        this.inMultiSelectMode = true;\n        this.setStyle(\"ace_multiselect\");\n        this.keyBinding.addKeyboardHandler(commands.keyboardHandler);\n        this.commands.setDefaultHandler(\"exec\", this.$onMultiSelectExec);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n    this.$onSingleSelect = function (e) {\n        if (this.session.multiSelect.inVirtualMode)\n            return;\n        this.inMultiSelectMode = false;\n        this.unsetStyle(\"ace_multiselect\");\n        this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);\n        this.commands.removeDefaultHandler(\"exec\", this.$onMultiSelectExec);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n        this._emit(\"changeSelection\");\n    };\n    this.$onMultiSelectExec = function (e) {\n        var command = e.command;\n        var editor = e.editor;\n        if (!editor.multiSelect)\n            return;\n        if (!command.multiSelectAction) {\n            var result = command.exec(editor, e.args || {});\n            editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());\n            editor.multiSelect.mergeOverlappingRanges();\n        }\n        else if (command.multiSelectAction == \"forEach\") {\n            result = editor.forEachSelection(command, e.args);\n        }\n        else if (command.multiSelectAction == \"forEachLine\") {\n            result = editor.forEachSelection(command, e.args, true);\n        }\n        else if (command.multiSelectAction == \"single\") {\n            editor.exitMultiSelectMode();\n            result = command.exec(editor, e.args || {});\n        }\n        else {\n            result = command.multiSelectAction(editor, e.args || {});\n        }\n        return result;\n    };\n    this.forEachSelection = function (cmd, args, options) {\n        if (this.inVirtualSelectionMode)\n            return;\n        var keepOrder = options && options.keepOrder;\n        var $byLines = options == true || options && options.$byLines;\n        var session = this.session;\n        var selection = this.selection;\n        var rangeList = selection.rangeList;\n        var ranges = (keepOrder ? selection : rangeList).ranges;\n        var result;\n        if (!ranges.length)\n            return cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n        var reg = selection._eventRegistry;\n        selection._eventRegistry = {};\n        var tmpSel = new Selection(session);\n        this.inVirtualSelectionMode = true;\n        for (var i = ranges.length; i--;) {\n            if ($byLines) {\n                while (i > 0 && ranges[i].start.row == ranges[i - 1].end.row)\n                    i--;\n            }\n            tmpSel.fromOrientedRange(ranges[i]);\n            tmpSel.index = i;\n            this.selection = session.selection = tmpSel;\n            var cmdResult = cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n            if (!result && cmdResult !== undefined)\n                result = cmdResult;\n            tmpSel.toOrientedRange(ranges[i]);\n        }\n        tmpSel.detach();\n        this.selection = session.selection = selection;\n        this.inVirtualSelectionMode = false;\n        selection._eventRegistry = reg;\n        selection.mergeOverlappingRanges();\n        if (selection.ranges[0])\n            selection.fromOrientedRange(selection.ranges[0]);\n        var anim = this.renderer.$scrollAnimation;\n        this.onCursorChange();\n        this.onSelectionChange();\n        if (anim && anim.from == anim.to)\n            this.renderer.animateScrolling(anim.from);\n        return result;\n    };\n    this.exitMultiSelectMode = function () {\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode)\n            return;\n        this.multiSelect.toSingleRange();\n    };\n    this.getSelectedText = function () {\n        var text = \"\";\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var ranges = this.multiSelect.rangeList.ranges;\n            var buf = [];\n            for (var i = 0; i < ranges.length; i++) {\n                buf.push(this.session.getTextRange(ranges[i]));\n            }\n            var nl = this.session.getDocument().getNewLineCharacter();\n            text = buf.join(nl);\n            if (text.length == (buf.length - 1) * nl.length)\n                text = \"\";\n        }\n        else if (!this.selection.isEmpty()) {\n            text = this.session.getTextRange(this.getSelectionRange());\n        }\n        return text;\n    };\n    this.$checkMultiselectChange = function (e, anchor) {\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var range = this.multiSelect.ranges[0];\n            if (this.multiSelect.isEmpty() && anchor == this.multiSelect.anchor)\n                return;\n            var pos = anchor == this.multiSelect.anchor\n                ? range.cursor == range.start ? range.end : range.start\n                : range.cursor;\n            if (pos.row != anchor.row\n                || this.session.$clipPositionToDocument(pos.row, pos.column).column != anchor.column)\n                this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange());\n            else\n                this.multiSelect.mergeOverlappingRanges();\n        }\n    };\n    this.findAll = function (needle, options, additive) {\n        options = options || {};\n        options.needle = needle || options.needle;\n        if (options.needle == undefined) {\n            var range = this.selection.isEmpty()\n                ? this.selection.getWordRange()\n                : this.selection.getRange();\n            options.needle = this.session.getTextRange(range);\n        }\n        this.$search.set(options);\n        var ranges = this.$search.findAll(this.session);\n        if (!ranges.length)\n            return 0;\n        var selection = this.multiSelect;\n        if (!additive)\n            selection.toSingleRange(ranges[0]);\n        for (var i = ranges.length; i--;)\n            selection.addRange(ranges[i], true);\n        if (range && selection.rangeList.rangeAtPoint(range.start))\n            selection.addRange(range, true);\n        return ranges.length;\n    };\n    this.selectMoreLines = function (dir, skip) {\n        var range = this.selection.toOrientedRange();\n        var isBackwards = range.cursor == range.end;\n        var screenLead = this.session.documentToScreenPosition(range.cursor);\n        if (this.selection.$desiredColumn)\n            screenLead.column = this.selection.$desiredColumn;\n        var lead = this.session.screenToDocumentPosition(screenLead.row + dir, screenLead.column);\n        if (!range.isEmpty()) {\n            var screenAnchor = this.session.documentToScreenPosition(isBackwards ? range.end : range.start);\n            var anchor = this.session.screenToDocumentPosition(screenAnchor.row + dir, screenAnchor.column);\n        }\n        else {\n            var anchor = lead;\n        }\n        if (isBackwards) {\n            var newRange = Range.fromPoints(lead, anchor);\n            newRange.cursor = newRange.start;\n        }\n        else {\n            var newRange = Range.fromPoints(anchor, lead);\n            newRange.cursor = newRange.end;\n        }\n        newRange.desiredColumn = screenLead.column;\n        if (!this.selection.inMultiSelectMode) {\n            this.selection.addRange(range);\n        }\n        else {\n            if (skip)\n                var toRemove = range.cursor;\n        }\n        this.selection.addRange(newRange);\n        if (toRemove)\n            this.selection.substractPoint(toRemove);\n    };\n    this.transposeSelections = function (dir) {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var all = sel.ranges;\n        for (var i = all.length; i--;) {\n            var range = all[i];\n            if (range.isEmpty()) {\n                var tmp_1 = session.getWordRange(range.start.row, range.start.column);\n                range.start.row = tmp_1.start.row;\n                range.start.column = tmp_1.start.column;\n                range.end.row = tmp_1.end.row;\n                range.end.column = tmp_1.end.column;\n            }\n        }\n        sel.mergeOverlappingRanges();\n        var words = [];\n        for (var i = all.length; i--;) {\n            var range = all[i];\n            words.unshift(session.getTextRange(range));\n        }\n        if (dir < 0)\n            words.unshift(words.pop());\n        else\n            words.push(words.shift());\n        for (var i = all.length; i--;) {\n            var range = all[i];\n            var tmp = range.clone();\n            session.replace(range, words[i]);\n            range.start.row = tmp.start.row;\n            range.start.column = tmp.start.column;\n        }\n        sel.fromOrientedRange(sel.ranges[0]);\n    };\n    this.selectMore = function (dir, skip, stopAtFirst) {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var range = sel.toOrientedRange();\n        if (range.isEmpty()) {\n            range = session.getWordRange(range.start.row, range.start.column);\n            range.cursor = dir == -1 ? range.start : range.end;\n            this.multiSelect.addRange(range);\n            if (stopAtFirst)\n                return;\n        }\n        var needle = session.getTextRange(range);\n        var newRange = find(session, needle, dir);\n        if (newRange) {\n            newRange.cursor = dir == -1 ? newRange.start : newRange.end;\n            this.session.unfold(newRange);\n            this.multiSelect.addRange(newRange);\n            this.renderer.scrollCursorIntoView(null, 0.5);\n        }\n        if (skip)\n            this.multiSelect.substractPoint(range.cursor);\n    };\n    this.alignCursors = function () {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var ranges = sel.ranges;\n        var row = -1;\n        var sameRowRanges = ranges.filter(function (r) {\n            if (r.cursor.row == row)\n                return true;\n            row = r.cursor.row;\n        });\n        if (!ranges.length || sameRowRanges.length == ranges.length - 1) {\n            var range = this.selection.getRange();\n            var fr = range.start.row, lr = range.end.row;\n            var guessRange = fr == lr;\n            if (guessRange) {\n                var max = this.session.getLength();\n                var line;\n                do {\n                    line = this.session.getLine(lr);\n                } while (/[=:]/.test(line) && ++lr < max);\n                do {\n                    line = this.session.getLine(fr);\n                } while (/[=:]/.test(line) && --fr > 0);\n                if (fr < 0)\n                    fr = 0;\n                if (lr >= max)\n                    lr = max - 1;\n            }\n            var lines = this.session.removeFullLines(fr, lr);\n            lines = this.$reAlignText(lines, guessRange);\n            this.session.insert({ row: fr, column: 0 }, lines.join(\"\\n\") + \"\\n\");\n            if (!guessRange) {\n                range.start.column = 0;\n                range.end.column = lines[lines.length - 1].length;\n            }\n            this.selection.setRange(range);\n        }\n        else {\n            sameRowRanges.forEach(function (r) {\n                sel.substractPoint(r.cursor);\n            });\n            var maxCol = 0;\n            var minSpace = Infinity;\n            var spaceOffsets = ranges.map(function (r) {\n                var p = r.cursor;\n                var line = session.getLine(p.row);\n                var spaceOffset = line.substr(p.column).search(/\\S/g);\n                if (spaceOffset == -1)\n                    spaceOffset = 0;\n                if (p.column > maxCol)\n                    maxCol = p.column;\n                if (spaceOffset < minSpace)\n                    minSpace = spaceOffset;\n                return spaceOffset;\n            });\n            ranges.forEach(function (r, i) {\n                var p = r.cursor;\n                var l = maxCol - p.column;\n                var d = spaceOffsets[i] - minSpace;\n                if (l > d)\n                    session.insert(p, lang.stringRepeat(\" \", l - d));\n                else\n                    session.remove(new Range(p.row, p.column, p.row, p.column - l + d));\n                r.start.column = r.end.column = maxCol;\n                r.start.row = r.end.row = p.row;\n                r.cursor = r.end;\n            });\n            sel.fromOrientedRange(ranges[0]);\n            this.renderer.updateCursor();\n            this.renderer.updateBackMarkers();\n        }\n    };\n    this.$reAlignText = function (lines, forceLeft) {\n        var isLeftAligned = true, isRightAligned = true;\n        var startW, textW, endW;\n        return lines.map(function (line) {\n            var m = line.match(/(\\s*)(.*?)(\\s*)([=:].*)/);\n            if (!m)\n                return [line];\n            if (startW == null) {\n                startW = m[1].length;\n                textW = m[2].length;\n                endW = m[3].length;\n                return m;\n            }\n            if (startW + textW + endW != m[1].length + m[2].length + m[3].length)\n                isRightAligned = false;\n            if (startW != m[1].length)\n                isLeftAligned = false;\n            if (startW > m[1].length)\n                startW = m[1].length;\n            if (textW < m[2].length)\n                textW = m[2].length;\n            if (endW > m[3].length)\n                endW = m[3].length;\n            return m;\n        }).map(forceLeft ? alignLeft :\n            isLeftAligned ? isRightAligned ? alignRight : alignLeft : unAlign);\n        function spaces(n) {\n            return lang.stringRepeat(\" \", n);\n        }\n        function alignLeft(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(textW - m[2].length + endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function alignRight(m) {\n            return !m[2] ? m[0] : spaces(startW + textW - m[2].length) + m[2]\n                + spaces(endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function unAlign(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n    };\n}).call(Editor.prototype);\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\nexports.onSessionChange = function (e) {\n    var session = e.session;\n    if (session && !session.multiSelect) {\n        session.$selectionMarkers = [];\n        session.selection.$initRangeList();\n        session.multiSelect = session.selection;\n    }\n    this.multiSelect = session && session.multiSelect;\n    var oldSession = e.oldSession;\n    if (oldSession) {\n        oldSession.multiSelect.off(\"addRange\", this.$onAddRange);\n        oldSession.multiSelect.off(\"removeRange\", this.$onRemoveRange);\n        oldSession.multiSelect.off(\"multiSelect\", this.$onMultiSelect);\n        oldSession.multiSelect.off(\"singleSelect\", this.$onSingleSelect);\n        oldSession.multiSelect.lead.off(\"change\", this.$checkMultiselectChange);\n        oldSession.multiSelect.anchor.off(\"change\", this.$checkMultiselectChange);\n    }\n    if (session) {\n        session.multiSelect.on(\"addRange\", this.$onAddRange);\n        session.multiSelect.on(\"removeRange\", this.$onRemoveRange);\n        session.multiSelect.on(\"multiSelect\", this.$onMultiSelect);\n        session.multiSelect.on(\"singleSelect\", this.$onSingleSelect);\n        session.multiSelect.lead.on(\"change\", this.$checkMultiselectChange);\n        session.multiSelect.anchor.on(\"change\", this.$checkMultiselectChange);\n    }\n    if (session && this.inMultiSelectMode != session.selection.inMultiSelectMode) {\n        if (session.selection.inMultiSelectMode)\n            this.$onMultiSelect();\n        else\n            this.$onSingleSelect();\n    }\n};\nfunction MultiSelect(editor) {\n    if (editor.$multiselectOnSessionChange)\n        return;\n    editor.$onAddRange = editor.$onAddRange.bind(editor);\n    editor.$onRemoveRange = editor.$onRemoveRange.bind(editor);\n    editor.$onMultiSelect = editor.$onMultiSelect.bind(editor);\n    editor.$onSingleSelect = editor.$onSingleSelect.bind(editor);\n    editor.$multiselectOnSessionChange = exports.onSessionChange.bind(editor);\n    editor.$checkMultiselectChange = editor.$checkMultiselectChange.bind(editor);\n    editor.$multiselectOnSessionChange(editor);\n    editor.on(\"changeSession\", editor.$multiselectOnSessionChange);\n    editor.on(\"mousedown\", onMouseDown);\n    editor.commands.addCommands(commands.defaultCommands);\n    addAltCursorListeners(editor);\n}\nfunction addAltCursorListeners(editor) {\n    if (!editor.textInput)\n        return;\n    var el = editor.textInput.getElement();\n    var altCursor = false;\n    event.addListener(el, \"keydown\", function (e) {\n        var altDown = e.keyCode == 18 && !(e.ctrlKey || e.shiftKey || e.metaKey);\n        if (editor.$blockSelectEnabled && altDown) {\n            if (!altCursor) {\n                editor.renderer.setMouseCursor(\"crosshair\");\n                altCursor = true;\n            }\n        }\n        else if (altCursor) {\n            reset();\n        }\n    }, editor);\n    event.addListener(el, \"keyup\", reset, editor);\n    event.addListener(el, \"blur\", reset, editor);\n    function reset(e) {\n        if (altCursor) {\n            editor.renderer.setMouseCursor(\"\");\n            altCursor = false;\n        }\n    }\n}\nexports.MultiSelect = MultiSelect;\nrequire(\"./config\").defineOptions(Editor.prototype, \"editor\", {\n    enableMultiselect: {\n        set: function (val) {\n            MultiSelect(this);\n            if (val) {\n                this.on(\"mousedown\", onMouseDown);\n            }\n            else {\n                this.off(\"mousedown\", onMouseDown);\n            }\n        },\n        value: true\n    },\n    enableBlockSelect: {\n        set: function (val) {\n            this.$blockSelectEnabled = val;\n        },\n        value: true\n    }\n});\n\n});\n\nace.define(\"ace/mode/folding/fold_mode\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){\"use strict\";\nvar Range = require(\"../../range\").Range;\nvar FoldMode = exports.FoldMode = function () { };\n(function () {\n    this.foldingStartMarker = null;\n    this.foldingStopMarker = null;\n    this.getFoldWidget = function (session, foldStyle, row) {\n        var line = session.getLine(row);\n        if (this.foldingStartMarker.test(line))\n            return \"start\";\n        if (foldStyle == \"markbeginend\"\n            && this.foldingStopMarker\n            && this.foldingStopMarker.test(line))\n            return \"end\";\n        return \"\";\n    };\n    this.getFoldWidgetRange = function (session, foldStyle, row) {\n        return null;\n    };\n    this.indentationBlock = function (session, row, column) {\n        var re = /\\S/;\n        var line = session.getLine(row);\n        var startLevel = line.search(re);\n        if (startLevel == -1)\n            return;\n        var startColumn = column || line.length;\n        var maxRow = session.getLength();\n        var startRow = row;\n        var endRow = row;\n        while (++row < maxRow) {\n            var level = session.getLine(row).search(re);\n            if (level == -1)\n                continue;\n            if (level <= startLevel) {\n                var token = session.getTokenAt(row, 0);\n                if (!token || token.type !== \"string\")\n                    break;\n            }\n            endRow = row;\n        }\n        if (endRow > startRow) {\n            var endColumn = session.getLine(endRow).length;\n            return new Range(startRow, startColumn, endRow, endColumn);\n        }\n    };\n    this.openingBracketBlock = function (session, bracket, row, column, typeRe) {\n        var start = { row: row, column: column + 1 };\n        var end = session.$findClosingBracket(bracket, start, typeRe);\n        if (!end)\n            return;\n        var fw = session.foldWidgets[end.row];\n        if (fw == null)\n            fw = session.getFoldWidget(end.row);\n        if (fw == \"start\" && end.row > start.row) {\n            end.row--;\n            end.column = session.getLine(end.row).length;\n        }\n        return Range.fromPoints(start, end);\n    };\n    this.closingBracketBlock = function (session, bracket, row, column, typeRe) {\n        var end = { row: row, column: column };\n        var start = session.$findOpeningBracket(bracket, end);\n        if (!start)\n            return;\n        start.column++;\n        end.column--;\n        return Range.fromPoints(start, end);\n    };\n}).call(FoldMode.prototype);\n\n});\n\nace.define(\"ace/ext/error_marker\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/range\",\"ace/config\"], function(require, exports, module){/**\n * ## Error Marker extension\n *\n * Provides inline error display functionality for Ace editor. Creates visual error markers that appear as tooltips\n * below editor lines containing annotations (errors, warnings, info). Enables navigation between error locations with\n * keyboard shortcuts and displays context-sensitive messages with proper styling based on annotation severity.\n *\n * @module\n */\n\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar Range = require(\"../range\").Range;\nvar nls = require(\"../config\").nls;\nfunction binarySearch(array, needle, comparator) {\n    var first = 0;\n    var last = array.length - 1;\n    while (first <= last) {\n        var mid = (first + last) >> 1;\n        var c = comparator(needle, array[mid]);\n        if (c > 0)\n            first = mid + 1;\n        else if (c < 0)\n            last = mid - 1;\n        else\n            return mid;\n    }\n    return -(first + 1);\n}\nfunction findAnnotations(session, row, dir) {\n    var annotations = session.getAnnotations().sort(Range.comparePoints);\n    if (!annotations.length)\n        return;\n    var i = binarySearch(annotations, { row: row, column: -1 }, Range.comparePoints);\n    if (i < 0)\n        i = -i - 1;\n    if (i >= annotations.length)\n        i = dir > 0 ? 0 : annotations.length - 1;\n    else if (i === 0 && dir < 0)\n        i = annotations.length - 1;\n    var annotation = annotations[i];\n    if (!annotation || !dir)\n        return;\n    if (annotation.row === row) {\n        do {\n            annotation = annotations[i += dir];\n        } while (annotation && annotation.row === row);\n        if (!annotation)\n            return annotations.slice();\n    }\n    var matched = [];\n    row = annotation.row;\n    do {\n        matched[dir < 0 ? \"unshift\" : \"push\"](annotation);\n        annotation = annotations[i += dir];\n    } while (annotation && annotation.row == row);\n    return matched.length && matched;\n}\nexports.showErrorMarker = function (editor, dir) {\n    var session = editor.session;\n    var pos = editor.getCursorPosition();\n    var row = pos.row;\n    var oldWidget = session.widgetManager.getWidgetsAtRow(row).filter(function (w) {\n        return w.type == \"errorMarker\";\n    })[0];\n    if (oldWidget) {\n        oldWidget.destroy();\n    }\n    else {\n        row -= dir;\n    }\n    var annotations = findAnnotations(session, row, dir);\n    var gutterAnno;\n    if (annotations) {\n        var annotation = annotations[0];\n        pos.column = (annotation.pos && typeof annotation.column != \"number\"\n            ? annotation.pos.sc\n            : annotation.column) || 0;\n        pos.row = annotation.row;\n        gutterAnno = editor.renderer.$gutterLayer.$annotations[pos.row];\n    }\n    else if (oldWidget) {\n        return;\n    }\n    else {\n        gutterAnno = {\n            displayText: [nls(\"error-marker.good-state\", \"Looks good!\")],\n            className: \"ace_ok\"\n        };\n    }\n    editor.session.unfold(pos.row);\n    editor.selection.moveToPosition(pos);\n    var w = {\n        row: pos.row,\n        fixedWidth: true,\n        coverGutter: true,\n        el: dom.createElement(\"div\"),\n        type: \"errorMarker\"\n    };\n    var el = w.el.appendChild(dom.createElement(\"div\"));\n    var arrow = w.el.appendChild(dom.createElement(\"div\"));\n    arrow.className = \"error_widget_arrow \" + gutterAnno.className;\n    var left = editor.renderer.$cursorLayer\n        .getPixelPosition(pos).left;\n    arrow.style.left = left + editor.renderer.gutterWidth - 5 + \"px\";\n    w.el.className = \"error_widget_wrapper\";\n    el.className = \"error_widget \" + gutterAnno.className;\n    gutterAnno.displayText.forEach(function (annoTextLine, i) {\n        el.appendChild(dom.createTextNode(annoTextLine));\n        if (i < gutterAnno.displayText.length - 1) {\n            el.appendChild(dom.createElement(\"br\"));\n        }\n    });\n    el.appendChild(dom.createElement(\"div\"));\n    var kb = function (_, hashId, keyString) {\n        if (hashId === 0 && (keyString === \"esc\" || keyString === \"return\")) {\n            w.destroy();\n            return { command: \"null\" };\n        }\n    };\n    w.destroy = function () {\n        if (editor.$mouseHandler.isMousePressed)\n            return;\n        editor.keyBinding.removeKeyboardHandler(kb);\n        session.widgetManager.removeLineWidget(w);\n        editor.off(\"changeSelection\", w.destroy);\n        editor.off(\"changeSession\", w.destroy);\n        editor.off(\"mouseup\", w.destroy);\n        editor.off(\"change\", w.destroy);\n    };\n    editor.keyBinding.addKeyboardHandler(kb);\n    editor.on(\"changeSelection\", w.destroy);\n    editor.on(\"changeSession\", w.destroy);\n    editor.on(\"mouseup\", w.destroy);\n    editor.on(\"change\", w.destroy);\n    editor.session.widgetManager.addLineWidget(w);\n    w.el.onmousedown = editor.focus.bind(editor);\n    editor.renderer.scrollCursorIntoView(null, 0.5, { bottom: w.el.offsetHeight });\n};\ndom.importCssString(\"\\n    .error_widget_wrapper {\\n        background: inherit;\\n        color: inherit;\\n        border:none\\n    }\\n    .error_widget {\\n        border-top: solid 2px;\\n        border-bottom: solid 2px;\\n        margin: 5px 0;\\n        padding: 10px 40px;\\n        white-space: pre-wrap;\\n    }\\n    .error_widget.ace_error, .error_widget_arrow.ace_error{\\n        border-color: #ff5a5a\\n    }\\n    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\\n        border-color: #F1D817\\n    }\\n    .error_widget.ace_info, .error_widget_arrow.ace_info{\\n        border-color: #5a5a5a\\n    }\\n    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\\n        border-color: #5aaa5a\\n    }\\n    .error_widget_arrow {\\n        position: absolute;\\n        border: solid 5px;\\n        border-top-color: transparent!important;\\n        border-right-color: transparent!important;\\n        border-left-color: transparent!important;\\n        top: -5px;\\n    }\\n\", \"error_marker.css\", false);\n\n});\n\nace.define(\"ace/ace\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/range\",\"ace/editor\",\"ace/edit_session\",\"ace/undomanager\",\"ace/virtual_renderer\",\"ace/worker/worker_client\",\"ace/keyboard/hash_handler\",\"ace/placeholder\",\"ace/multi_select\",\"ace/mode/folding/fold_mode\",\"ace/theme/textmate\",\"ace/ext/error_marker\",\"ace/config\",\"ace/loader_build\"], function(require, exports, module){/**\n * The main class required to set up an Ace instance in the browser.\n *\n * @namespace Ace\n **/\n\"use strict\";\nrequire(\"./loader_build\")(exports)\nvar dom = require(\"./lib/dom\");\nvar Range = require(\"./range\").Range;\nvar Editor = require(\"./editor\").Editor;\nvar EditSession = require(\"./edit_session\").EditSession;\nvar UndoManager = require(\"./undomanager\").UndoManager;\nvar Renderer = require(\"./virtual_renderer\").VirtualRenderer;\nrequire(\"./worker/worker_client\");\nrequire(\"./keyboard/hash_handler\");\nrequire(\"./placeholder\");\nrequire(\"./multi_select\");\nrequire(\"./mode/folding/fold_mode\");\nrequire(\"./theme/textmate\");\nrequire(\"./ext/error_marker\");\nexports.config = require(\"./config\");\nexports.edit = function (el, options) {\n    if (typeof el == \"string\") {\n        var _id = el;\n        el = document.getElementById(_id);\n        if (!el)\n            throw new Error(\"ace.edit can't find div #\" + _id);\n    }\n    if (el && el.env && el.env.editor instanceof Editor)\n        return el.env.editor;\n    var value = \"\";\n    if (el && /input|textarea/i.test(el.tagName)) {\n        var oldNode = el;\n        value = oldNode.value;\n        el = dom.createElement(\"pre\");\n        oldNode.parentNode.replaceChild(el, oldNode);\n    }\n    else if (el) {\n        value = el.textContent;\n        el.innerHTML = \"\";\n    }\n    var doc = exports.createEditSession(value);\n    var editor = new Editor(new Renderer(el), doc, options);\n    var env = {\n        document: doc,\n        editor: editor,\n        onResize: editor.resize.bind(editor, null)\n    };\n    if (oldNode)\n        env.textarea = oldNode;\n    editor.on(\"destroy\", function () {\n        env.editor.container.env = null; // prevent memory leak on old ie\n    });\n    editor.container.env = editor.env = env;\n    return editor;\n};\nexports.createEditSession = function (text, mode) {\n    var doc = new EditSession(text, mode);\n    doc.setUndoManager(new UndoManager());\n    return doc;\n};\nexports.Range = Range;\nexports.Editor = Editor;\nexports.EditSession = EditSession;\nexports.UndoManager = UndoManager;\nexports.VirtualRenderer = Renderer;\nvar version = exports.config.version;\nexports.version = version;\n\n});            (function() {\n                ace.require([\"ace/ace\"], function(a) {\n                    if (a) {\n                        a.config.init(true);\n                        a.define = ace.define;\n                    }\n                    var global = (function () {\n                        return this;\n                    })();\n                    if (!global && typeof window != \"undefined\") global = window; // can happen in strict mode\n                    if (!global && typeof self != \"undefined\") global = self; // can happen in webworker\n                    \n                    if (!global.ace)\n                        global.ace = a;\n                    for (var key in a) if (a.hasOwnProperty(key))\n                        global.ace[key] = a[key];\n                    global.ace[\"default\"] = global.ace;\n                    if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                        module.exports = global.ace;\n                    }\n                });\n            })();\n        ","import ace from 'ace-builds';\n\nexport function registerNcMode() {\n  (ace as any).define('ace/mode/nc_highlight_rules', ['require', 'exports', 'module', 'ace/lib/oop', 'ace/mode/text_highlight_rules'], (require: any, exports: any, _module: any) => {\n    const oop = require('../lib/oop');\n    const TextHighlightRules = require('./text_highlight_rules').TextHighlightRules;\n\n    const NCHighlightRules = function(this: any) {\n      this.$rules = {\n        start: [\n          {\n            token: 'comment',\n            regex: '\\\\(.*\\\\)',\n            comment: 'Comment'\n          },\n          {\n            token: 'string', // Program number\n            regex: 'O[0-9]+',\n            comment: 'Program Number'\n          },\n          {\n            token: 'keyword', // Tool number\n            regex: 'T[0-9]+',\n            comment: 'ToolNumber'\n          },\n          {\n            token: 'keyword.control', // G-codes\n            regex: 'G[0-9]+(\\\\.[0-9]+)?',\n            comment: 'G Codes'\n          },\n          {\n            token: 'keyword.control', // M-codes\n            regex: 'M[0-9]+',\n            comment: 'M Codes'\n          },\n          {\n            token: 'variable.parameter', // Axes\n            regex: '[XYZABCUVWxyzabcuvw]',\n            comment: 'Axis'\n          },\n          {\n            token: 'constant.numeric', // Numbers\n            regex: '[-+]?[0-9]*\\\\.?[0-9]+',\n            comment: 'Number'\n          },\n          {\n            token: 'support.function', // F, S, P, Q, R\n            regex: '[FSPQRfspqr]',\n            comment: 'Parameters'\n          }\n        ]\n      };\n      this.normalizeRules();\n    };\n\n    oop.inherits(NCHighlightRules, TextHighlightRules);\n    exports.NCHighlightRules = NCHighlightRules;\n  });\n\n  (ace as any).define('ace/mode/nc', ['require', 'exports', 'module', 'ace/lib/oop', 'ace/mode/text', 'ace/mode/nc_highlight_rules'], (require: any, exports: any, _module: any) => {\n    const oop = require('../lib/oop');\n    const TextMode = require('./text').Mode;\n    const NCHighlightRules = require('./nc_highlight_rules').NCHighlightRules;\n\n    const Mode = function(this: any) {\n      this.HighlightRules = NCHighlightRules;\n      this.$behaviour = this.$defaultBehaviour;\n    };\n    oop.inherits(Mode, TextMode);\n\n    (function(this: any) {\n      this.lineCommentStart = \";\"; \n      this.blockComment = {start: \"(\", end: \")\"};\n      this.$id = \"ace/mode/nc\";\n    }).call(Mode.prototype);\n\n    exports.Mode = Mode;\n  });\n}\n","export class TimeGutter {\n  private times: Map<number, number> = new Map(); // line -> time (seconds)\n\n  getWidth(_session: any, _lastLineNumber: number, config: any) {\n    return 6 * config.characterWidth; // Approximate width\n  }\n\n  getText(_session: any, row: number) {\n    const time = this.times.get(row);\n    return time !== undefined ? time.toFixed(1) : '';\n  }\n\n  updateTimes(times: Map<number, number> | Record<string, number>) {\n    if (times instanceof Map) {\n      this.times = times;\n    } else {\n      this.times = new Map();\n      Object.entries(times).forEach(([line, time]) => {\n        this.times.set(parseInt(line, 10), time);\n      });\n    }\n  }\n}\n","\n;                (function() {\n                    ace.require([\"ace/mode/text\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            ","ace.define(\"ace/theme/monokai-css\",[\"require\",\"exports\",\"module\"], function(require, exports, module){module.exports = \".ace-monokai .ace_gutter {\\n  background: #2F3129;\\n  color: #8F908A\\n}\\n\\n.ace-monokai .ace_print-margin {\\n  width: 1px;\\n  background: #555651\\n}\\n\\n.ace-monokai {\\n  background-color: #272822;\\n  color: #F8F8F2\\n}\\n\\n.ace-monokai .ace_cursor {\\n  color: #F8F8F0\\n}\\n\\n.ace-monokai .ace_marker-layer .ace_selection {\\n  background: #49483E\\n}\\n\\n.ace-monokai.ace_multiselect .ace_selection.ace_start {\\n  box-shadow: 0 0 3px 0px #272822;\\n}\\n\\n.ace-monokai .ace_marker-layer .ace_step {\\n  background: rgb(102, 82, 0)\\n}\\n\\n.ace-monokai .ace_marker-layer .ace_bracket {\\n  margin: -1px 0 0 -1px;\\n  border: 1px solid #49483E\\n}\\n\\n.ace-monokai .ace_marker-layer .ace_active-line {\\n  background: #202020\\n}\\n\\n.ace-monokai .ace_gutter-active-line {\\n  background-color: #272727\\n}\\n\\n.ace-monokai .ace_marker-layer .ace_selected-word {\\n  border: 1px solid #49483E\\n}\\n\\n.ace-monokai .ace_invisible {\\n  color: #52524d\\n}\\n\\n.ace-monokai .ace_entity.ace_name.ace_tag,\\n.ace-monokai .ace_keyword,\\n.ace-monokai .ace_meta.ace_tag,\\n.ace-monokai .ace_storage {\\n  color: #F92672\\n}\\n\\n.ace-monokai .ace_punctuation,\\n.ace-monokai .ace_punctuation.ace_tag {\\n  color: #fff\\n}\\n\\n.ace-monokai .ace_constant.ace_character,\\n.ace-monokai .ace_constant.ace_language,\\n.ace-monokai .ace_constant.ace_numeric,\\n.ace-monokai .ace_constant.ace_other {\\n  color: #AE81FF\\n}\\n\\n.ace-monokai .ace_invalid {\\n  color: #F8F8F0;\\n  background-color: #F92672\\n}\\n\\n.ace-monokai .ace_invalid.ace_deprecated {\\n  color: #F8F8F0;\\n  background-color: #AE81FF\\n}\\n\\n.ace-monokai .ace_support.ace_constant,\\n.ace-monokai .ace_support.ace_function {\\n  color: #66D9EF\\n}\\n\\n.ace-monokai .ace_fold {\\n  background-color: #A6E22E;\\n  border-color: #F8F8F2\\n}\\n\\n.ace-monokai .ace_storage.ace_type,\\n.ace-monokai .ace_support.ace_class,\\n.ace-monokai .ace_support.ace_type {\\n  font-style: italic;\\n  color: #66D9EF\\n}\\n\\n.ace-monokai .ace_entity.ace_name.ace_function,\\n.ace-monokai .ace_entity.ace_other,\\n.ace-monokai .ace_entity.ace_other.ace_attribute-name,\\n.ace-monokai .ace_variable {\\n  color: #A6E22E\\n}\\n\\n.ace-monokai .ace_variable.ace_parameter {\\n  font-style: italic;\\n  color: #FD971F\\n}\\n\\n.ace-monokai .ace_string {\\n  color: #E6DB74\\n}\\n\\n.ace-monokai .ace_comment {\\n  color: #75715E\\n}\\n\\n.ace-monokai .ace_indent-guide {\\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y\\n}\\n\\n.ace-monokai .ace_indent-guide-active {\\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;\\n}\\n\";\n\n});\n\nace.define(\"ace/theme/monokai\",[\"require\",\"exports\",\"module\",\"ace/theme/monokai-css\",\"ace/lib/dom\"], function(require, exports, module){exports.isDark = true;\nexports.cssClass = \"ace-monokai\";\nexports.cssText = require(\"./monokai-css\");\nvar dom = require(\"../lib/dom\");\ndom.importCssString(exports.cssText, exports.cssClass, false);\n\n});                (function() {\n                    ace.require([\"ace/theme/monokai\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            ","ace.define(\"ace/snippets\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/event_emitter\",\"ace/lib/lang\",\"ace/range\",\"ace/range_list\",\"ace/keyboard/hash_handler\",\"ace/tokenizer\",\"ace/clipboard\",\"ace/editor\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"./lib/dom\");\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar lang = require(\"./lib/lang\");\nvar Range = require(\"./range\").Range;\nvar RangeList = require(\"./range_list\").RangeList;\nvar HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\nvar Tokenizer = require(\"./tokenizer\").Tokenizer;\nvar clipboard = require(\"./clipboard\");\nvar VARIABLES = {\n    CURRENT_WORD: function (editor) {\n        return editor.session.getTextRange(editor.session.getWordRange());\n    },\n    SELECTION: function (editor, name, indentation) {\n        var text = editor.session.getTextRange();\n        if (indentation)\n            return text.replace(/\\n\\r?([ \\t]*\\S)/g, \"\\n\" + indentation + \"$1\");\n        return text;\n    },\n    CURRENT_LINE: function (editor) {\n        return editor.session.getLine(editor.getCursorPosition().row);\n    },\n    PREV_LINE: function (editor) {\n        return editor.session.getLine(editor.getCursorPosition().row - 1);\n    },\n    LINE_INDEX: function (editor) {\n        return editor.getCursorPosition().row;\n    },\n    LINE_NUMBER: function (editor) {\n        return editor.getCursorPosition().row + 1;\n    },\n    SOFT_TABS: function (editor) {\n        return editor.session.getUseSoftTabs() ? \"YES\" : \"NO\";\n    },\n    TAB_SIZE: function (editor) {\n        return editor.session.getTabSize();\n    },\n    CLIPBOARD: function (editor) {\n        return clipboard.getText && clipboard.getText();\n    },\n    FILENAME: function (editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0];\n    },\n    FILENAME_BASE: function (editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0].replace(/\\.[^.]*$/, \"\");\n    },\n    DIRECTORY: function (editor) {\n        return this.FILEPATH(editor).replace(/[^/\\\\]*$/, \"\");\n    },\n    FILEPATH: function (editor) { return \"/not implemented.txt\"; },\n    WORKSPACE_NAME: function () { return \"Unknown\"; },\n    FULLNAME: function () { return \"Unknown\"; },\n    BLOCK_COMMENT_START: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.start || \"\";\n    },\n    BLOCK_COMMENT_END: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.end || \"\";\n    },\n    LINE_COMMENT: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.lineCommentStart || \"\";\n    },\n    CURRENT_YEAR: date.bind(null, { year: \"numeric\" }),\n    CURRENT_YEAR_SHORT: date.bind(null, { year: \"2-digit\" }),\n    CURRENT_MONTH: date.bind(null, { month: \"numeric\" }),\n    CURRENT_MONTH_NAME: date.bind(null, { month: \"long\" }),\n    CURRENT_MONTH_NAME_SHORT: date.bind(null, { month: \"short\" }),\n    CURRENT_DATE: date.bind(null, { day: \"2-digit\" }),\n    CURRENT_DAY_NAME: date.bind(null, { weekday: \"long\" }),\n    CURRENT_DAY_NAME_SHORT: date.bind(null, { weekday: \"short\" }),\n    CURRENT_HOUR: date.bind(null, { hour: \"2-digit\", hour12: false }),\n    CURRENT_MINUTE: date.bind(null, { minute: \"2-digit\" }),\n    CURRENT_SECOND: date.bind(null, { second: \"2-digit\" })\n};\nVARIABLES.SELECTED_TEXT = VARIABLES.SELECTION;\nfunction date(dateFormat) {\n    var str = new Date().toLocaleString(\"en-us\", dateFormat);\n    return str.length == 1 ? \"0\" + str : str;\n}\nvar SnippetManager = /** @class */ (function () {\n    function SnippetManager() {\n        this.snippetMap = {};\n        this.snippetNameMap = {};\n        this.variables = VARIABLES;\n    }\n    SnippetManager.prototype.getTokenizer = function () {\n        return SnippetManager[\"$tokenizer\"] || this.createTokenizer();\n    };\n    SnippetManager.prototype.createTokenizer = function () {\n        function TabstopToken(str) {\n            str = str.substr(1);\n            if (/^\\d+$/.test(str))\n                return [{ tabstopId: parseInt(str, 10) }];\n            return [{ text: str }];\n        }\n        function escape(ch) {\n            return \"(?:[^\\\\\\\\\" + ch + \"]|\\\\\\\\.)\";\n        }\n        var formatMatcher = {\n            regex: \"/(\" + escape(\"/\") + \"+)/\",\n            onMatch: function (val, state, stack) {\n                var ts = stack[0];\n                ts.fmtString = true;\n                ts.guard = val.slice(1, -1);\n                ts.flag = \"\";\n                return \"\";\n            },\n            next: \"formatString\"\n        };\n        SnippetManager[\"$tokenizer\"] = new Tokenizer({\n            start: [\n                { regex: /\\\\./, onMatch: function (val, state, stack) {\n                        var ch = val[1];\n                        if (ch == \"}\" && stack.length) {\n                            val = ch;\n                        }\n                        else if (\"`$\\\\\".indexOf(ch) != -1) {\n                            val = ch;\n                        }\n                        return [val];\n                    } },\n                { regex: /}/, onMatch: function (val, state, stack) {\n                        return [stack.length ? stack.shift() : val];\n                    } },\n                { regex: /\\$(?:\\d+|\\w+)/, onMatch: TabstopToken },\n                { regex: /\\$\\{[\\dA-Z_a-z]+/, onMatch: function (str, state, stack) {\n                        var t = TabstopToken(str.substr(1));\n                        stack.unshift(t[0]);\n                        return t;\n                    }, next: \"snippetVar\" },\n                { regex: /\\n/, token: \"newline\", merge: false }\n            ],\n            snippetVar: [\n                { regex: \"\\\\|\" + escape(\"\\\\|\") + \"*\\\\|\", onMatch: function (val, state, stack) {\n                        var choices = val.slice(1, -1).replace(/\\\\[,|\\\\]|,/g, function (operator) {\n                            return operator.length == 2 ? operator[1] : \"\\x00\";\n                        }).split(\"\\x00\").map(function (value) {\n                            return { value: value };\n                        });\n                        stack[0].choices = choices;\n                        return [choices[0]];\n                    }, next: \"start\" },\n                formatMatcher,\n                { regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"start\" }\n            ],\n            formatString: [\n                { regex: /:/, onMatch: function (val, state, stack) {\n                        if (stack.length && stack[0].expectElse) {\n                            stack[0].expectElse = false;\n                            stack[0].ifEnd = { elseEnd: stack[0] };\n                            return [stack[0].ifEnd];\n                        }\n                        return \":\";\n                    } },\n                { regex: /\\\\./, onMatch: function (val, state, stack) {\n                        var ch = val[1];\n                        if (ch == \"}\" && stack.length)\n                            val = ch;\n                        else if (\"`$\\\\\".indexOf(ch) != -1)\n                            val = ch;\n                        else if (ch == \"n\")\n                            val = \"\\n\";\n                        else if (ch == \"t\")\n                            val = \"\\t\";\n                        else if (\"ulULE\".indexOf(ch) != -1)\n                            val = { changeCase: ch, local: ch > \"a\" };\n                        return [val];\n                    } },\n                { regex: \"/\\\\w*}\", onMatch: function (val, state, stack) {\n                        var next = stack.shift();\n                        if (next)\n                            next.flag = val.slice(1, -1);\n                        this.next = next && next.tabstopId ? \"start\" : \"\";\n                        return [next || val];\n                    }, next: \"start\" },\n                { regex: /\\$(?:\\d+|\\w+)/, onMatch: function (val, state, stack) {\n                        return [{ text: val.slice(1) }];\n                    } },\n                { regex: /\\${\\w+/, onMatch: function (val, state, stack) {\n                        var token = { text: val.slice(2) };\n                        stack.unshift(token);\n                        return [token];\n                    }, next: \"formatStringVar\" },\n                { regex: /\\n/, token: \"newline\", merge: false },\n                { regex: /}/, onMatch: function (val, state, stack) {\n                        var next = stack.shift();\n                        this.next = next && next.tabstopId ? \"start\" : \"\";\n                        return [next || val];\n                    }, next: \"start\" }\n            ],\n            formatStringVar: [\n                { regex: /:\\/\\w+}/, onMatch: function (val, state, stack) {\n                        var ts = stack[0];\n                        ts.formatFunction = val.slice(2, -1);\n                        return [stack.shift()];\n                    }, next: \"formatString\" },\n                formatMatcher,\n                { regex: /:[\\?\\-+]?/, onMatch: function (val, state, stack) {\n                        if (val[1] == \"+\")\n                            stack[0].ifEnd = stack[0];\n                        if (val[1] == \"?\")\n                            stack[0].expectElse = true;\n                    }, next: \"formatString\" },\n                { regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"formatString\" }\n            ]\n        });\n        return SnippetManager[\"$tokenizer\"];\n    };\n    SnippetManager.prototype.tokenizeTmSnippet = function (str, startState) {\n        return this.getTokenizer().getLineTokens(str, startState).tokens.map(function (x) {\n            return x.value || x;\n        });\n    };\n    SnippetManager.prototype.getVariableValue = function (editor, name, indentation) {\n        if (/^\\d+$/.test(name))\n            return (this.variables.__ || {})[name] || \"\";\n        if (/^[A-Z]\\d+$/.test(name))\n            return (this.variables[name[0] + \"__\"] || {})[name.substr(1)] || \"\";\n        name = name.replace(/^TM_/, \"\");\n        if (!this.variables.hasOwnProperty(name))\n            return \"\";\n        var value = this.variables[name];\n        if (typeof value == \"function\")\n            value = this.variables[name](editor, name, indentation);\n        return value == null ? \"\" : value;\n    };\n    SnippetManager.prototype.tmStrFormat = function (str, ch, editor) {\n        if (!ch.fmt)\n            return str;\n        var flag = ch.flag || \"\";\n        var re = ch.guard;\n        re = new RegExp(re, flag.replace(/[^gim]/g, \"\"));\n        var fmtTokens = typeof ch.fmt == \"string\" ? this.tokenizeTmSnippet(ch.fmt, \"formatString\") : ch.fmt;\n        var _self = this;\n        var formatted = str.replace(re, function () {\n            var oldArgs = _self.variables.__;\n            _self.variables.__ = [].slice.call(arguments);\n            var fmtParts = _self.resolveVariables(fmtTokens, editor);\n            var gChangeCase = \"E\";\n            for (var i = 0; i < fmtParts.length; i++) {\n                var ch = fmtParts[i];\n                if (typeof ch == \"object\") {\n                    fmtParts[i] = \"\";\n                    if (ch.changeCase && ch.local) {\n                        var next = fmtParts[i + 1];\n                        if (next && typeof next == \"string\") {\n                            if (ch.changeCase == \"u\")\n                                fmtParts[i] = next[0].toUpperCase();\n                            else\n                                fmtParts[i] = next[0].toLowerCase();\n                            fmtParts[i + 1] = next.substr(1);\n                        }\n                    }\n                    else if (ch.changeCase) {\n                        gChangeCase = ch.changeCase;\n                    }\n                }\n                else if (gChangeCase == \"U\") {\n                    fmtParts[i] = ch.toUpperCase();\n                }\n                else if (gChangeCase == \"L\") {\n                    fmtParts[i] = ch.toLowerCase();\n                }\n            }\n            _self.variables.__ = oldArgs;\n            return fmtParts.join(\"\");\n        });\n        return formatted;\n    };\n    SnippetManager.prototype.tmFormatFunction = function (str, ch, editor) {\n        if (ch.formatFunction == \"upcase\")\n            return str.toUpperCase();\n        if (ch.formatFunction == \"downcase\")\n            return str.toLowerCase();\n        return str;\n    };\n    SnippetManager.prototype.resolveVariables = function (snippet, editor) {\n        var result = [];\n        var indentation = \"\";\n        var afterNewLine = true;\n        for (var i = 0; i < snippet.length; i++) {\n            var ch = snippet[i];\n            if (typeof ch == \"string\") {\n                result.push(ch);\n                if (ch == \"\\n\") {\n                    afterNewLine = true;\n                    indentation = \"\";\n                }\n                else if (afterNewLine) {\n                    indentation = /^\\t*/.exec(ch)[0];\n                    afterNewLine = /\\S/.test(ch);\n                }\n                continue;\n            }\n            if (!ch)\n                continue;\n            afterNewLine = false;\n            if (ch.fmtString) {\n                var j = snippet.indexOf(ch, i + 1);\n                if (j == -1)\n                    j = snippet.length;\n                ch.fmt = snippet.slice(i + 1, j);\n                i = j;\n            }\n            if (ch.text) {\n                var value = this.getVariableValue(editor, ch.text, indentation) + \"\";\n                if (ch.fmtString)\n                    value = this.tmStrFormat(value, ch, editor);\n                if (ch.formatFunction)\n                    value = this.tmFormatFunction(value, ch, editor);\n                if (value && !ch.ifEnd) {\n                    result.push(value);\n                    gotoNext(ch);\n                }\n                else if (!value && ch.ifEnd) {\n                    gotoNext(ch.ifEnd);\n                }\n            }\n            else if (ch.elseEnd) {\n                gotoNext(ch.elseEnd);\n            }\n            else if (ch.tabstopId != null) {\n                result.push(ch);\n            }\n            else if (ch.changeCase != null) {\n                result.push(ch);\n            }\n        }\n        function gotoNext(ch) {\n            var i1 = snippet.indexOf(ch, i + 1);\n            if (i1 != -1)\n                i = i1;\n        }\n        return result;\n    };\n    SnippetManager.prototype.getDisplayTextForSnippet = function (editor, snippetText) {\n        var processedSnippet = processSnippetText.call(this, editor, snippetText);\n        return processedSnippet.text;\n    };\n    SnippetManager.prototype.insertSnippetForSelection = function (editor, snippetText, options) {\n        if (options === void 0) { options = {}; }\n        var processedSnippet = processSnippetText.call(this, editor, snippetText, options);\n        var range = editor.getSelectionRange();\n        var end = editor.session.replace(range, processedSnippet.text);\n        var tabstopManager = new TabstopManager(editor);\n        var selectionId = editor.inVirtualSelectionMode && editor.selection.index;\n        tabstopManager.addTabstops(processedSnippet.tabstops, range.start, end, selectionId);\n    };\n    SnippetManager.prototype.insertSnippet = function (editor, snippetText, options) {\n        if (options === void 0) { options = {}; }\n        var self = this;\n        if (editor.inVirtualSelectionMode)\n            return self.insertSnippetForSelection(editor, snippetText, options);\n        editor.forEachSelection(function () {\n            self.insertSnippetForSelection(editor, snippetText, options);\n        }, null, { keepOrder: true });\n        if (editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n    };\n    SnippetManager.prototype.$getScope = function (editor) {\n        var scope = editor.session.$mode.$id || \"\";\n        scope = scope.split(\"/\").pop();\n        if (scope === \"html\" || scope === \"php\") {\n            if (scope === \"php\" && !editor.session.$mode.inlinePhp)\n                scope = \"html\";\n            var c = editor.getCursorPosition();\n            var state = editor.session.getState(c.row);\n            if (typeof state === \"object\") {\n                state = state[0];\n            }\n            if (state.substring) {\n                if (state.substring(0, 3) == \"js-\")\n                    scope = \"javascript\";\n                else if (state.substring(0, 4) == \"css-\")\n                    scope = \"css\";\n                else if (state.substring(0, 4) == \"php-\")\n                    scope = \"php\";\n            }\n        }\n        return scope;\n    };\n    SnippetManager.prototype.getActiveScopes = function (editor) {\n        var scope = this.$getScope(editor);\n        var scopes = [scope];\n        var snippetMap = this.snippetMap;\n        if (snippetMap[scope] && snippetMap[scope].includeScopes) {\n            scopes.push.apply(scopes, snippetMap[scope].includeScopes);\n        }\n        scopes.push(\"_\");\n        return scopes;\n    };\n    SnippetManager.prototype.expandWithTab = function (editor, options) {\n        var self = this;\n        var result = editor.forEachSelection(function () {\n            return self.expandSnippetForSelection(editor, options);\n        }, null, { keepOrder: true });\n        if (result && editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n        return result;\n    };\n    SnippetManager.prototype.expandSnippetForSelection = function (editor, options) {\n        var cursor = editor.getCursorPosition();\n        var line = editor.session.getLine(cursor.row);\n        var before = line.substring(0, cursor.column);\n        var after = line.substr(cursor.column);\n        var snippetMap = this.snippetMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function (scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = this.findMatchingSnippet(snippets, before, after);\n            return !!snippet;\n        }, this);\n        if (!snippet)\n            return false;\n        if (options && options.dryRun)\n            return true;\n        editor.session.doc.removeInLine(cursor.row, cursor.column - snippet.replaceBefore.length, cursor.column + snippet.replaceAfter.length);\n        this.variables.M__ = snippet.matchBefore;\n        this.variables.T__ = snippet.matchAfter;\n        this.insertSnippetForSelection(editor, snippet.content);\n        this.variables.M__ = this.variables.T__ = null;\n        return true;\n    };\n    SnippetManager.prototype.findMatchingSnippet = function (snippetList, before, after) {\n        for (var i = snippetList.length; i--;) {\n            var s = snippetList[i];\n            if (s.startRe && !s.startRe.test(before))\n                continue;\n            if (s.endRe && !s.endRe.test(after))\n                continue;\n            if (!s.startRe && !s.endRe)\n                continue;\n            s.matchBefore = s.startRe ? s.startRe.exec(before) : [\"\"];\n            s.matchAfter = s.endRe ? s.endRe.exec(after) : [\"\"];\n            s.replaceBefore = s.triggerRe ? s.triggerRe.exec(before)[0] : \"\";\n            s.replaceAfter = s.endTriggerRe ? s.endTriggerRe.exec(after)[0] : \"\";\n            return s;\n        }\n    };\n    SnippetManager.prototype.register = function (snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n        var self = this;\n        if (!snippets)\n            snippets = [];\n        function wrapRegexp(src) {\n            if (src && !/^\\^?\\(.*\\)\\$?$|^\\\\b$/.test(src))\n                src = \"(?:\" + src + \")\";\n            return src || \"\";\n        }\n        function guardedRegexp(re, guard, opening) {\n            re = wrapRegexp(re);\n            guard = wrapRegexp(guard);\n            if (opening) {\n                re = guard + re;\n                if (re && re[re.length - 1] != \"$\")\n                    re = re + \"$\";\n            }\n            else {\n                re = re + guard;\n                if (re && re[0] != \"^\")\n                    re = \"^\" + re;\n            }\n            return new RegExp(re);\n        }\n        function addSnippet(s) {\n            if (!s.scope)\n                s.scope = scope || \"_\";\n            scope = s.scope;\n            if (!snippetMap[scope]) {\n                snippetMap[scope] = [];\n                snippetNameMap[scope] = {};\n            }\n            var map = snippetNameMap[scope];\n            if (s.name) {\n                var old = map[s.name];\n                if (old)\n                    self.unregister(old);\n                map[s.name] = s;\n            }\n            snippetMap[scope].push(s);\n            if (s.prefix)\n                s.tabTrigger = s.prefix;\n            if (!s.content && s.body)\n                s.content = Array.isArray(s.body) ? s.body.join(\"\\n\") : s.body;\n            if (s.tabTrigger && !s.trigger) {\n                if (!s.guard && /^\\w/.test(s.tabTrigger))\n                    s.guard = \"\\\\b\";\n                s.trigger = lang.escapeRegExp(s.tabTrigger);\n            }\n            if (!s.trigger && !s.guard && !s.endTrigger && !s.endGuard)\n                return;\n            s.startRe = guardedRegexp(s.trigger, s.guard, true);\n            s.triggerRe = new RegExp(s.trigger);\n            s.endRe = guardedRegexp(s.endTrigger, s.endGuard, true);\n            s.endTriggerRe = new RegExp(s.endTrigger);\n        }\n        if (Array.isArray(snippets)) {\n            snippets.forEach(addSnippet);\n        }\n        else {\n            Object.keys(snippets).forEach(function (key) {\n                addSnippet(snippets[key]);\n            });\n        }\n        this._signal(\"registerSnippets\", { scope: scope });\n    };\n    SnippetManager.prototype.unregister = function (snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n        function removeSnippet(s) {\n            var nameMap = snippetNameMap[s.scope || scope];\n            if (nameMap && nameMap[s.name]) {\n                delete nameMap[s.name];\n                var map = snippetMap[s.scope || scope];\n                var i = map && map.indexOf(s);\n                if (i >= 0)\n                    map.splice(i, 1);\n            }\n        }\n        if (snippets.content)\n            removeSnippet(snippets);\n        else if (Array.isArray(snippets))\n            snippets.forEach(removeSnippet);\n    };\n    SnippetManager.prototype.parseSnippetFile = function (str) {\n        str = str.replace(/\\r/g, \"\");\n        var list = [], /**@type{Snippet}*/ snippet = {};\n        var re = /^#.*|^({[\\s\\S]*})\\s*$|^(\\S+) (.*)$|^((?:\\n*\\t.*)+)/gm;\n        var m;\n        while (m = re.exec(str)) {\n            if (m[1]) {\n                try {\n                    snippet = JSON.parse(m[1]);\n                    list.push(snippet);\n                }\n                catch (e) { }\n            }\n            if (m[4]) {\n                snippet.content = m[4].replace(/^\\t/gm, \"\");\n                list.push(snippet);\n                snippet = {};\n            }\n            else {\n                var key = m[2], val = m[3];\n                if (key == \"regex\") {\n                    var guardRe = /\\/((?:[^\\/\\\\]|\\\\.)*)|$/g;\n                    snippet.guard = guardRe.exec(val)[1];\n                    snippet.trigger = guardRe.exec(val)[1];\n                    snippet.endTrigger = guardRe.exec(val)[1];\n                    snippet.endGuard = guardRe.exec(val)[1];\n                }\n                else if (key == \"snippet\") {\n                    snippet.tabTrigger = val.match(/^\\S*/)[0];\n                    if (!snippet.name)\n                        snippet.name = val;\n                }\n                else if (key) {\n                    snippet[key] = val;\n                }\n            }\n        }\n        return list;\n    };\n    SnippetManager.prototype.getSnippetByName = function (name, editor) {\n        var snippetMap = this.snippetNameMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function (scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = snippets[name];\n            return !!snippet;\n        }, this);\n        return snippet;\n    };\n    return SnippetManager;\n}());\noop.implement(SnippetManager.prototype, EventEmitter);\nvar processSnippetText = function (editor, snippetText, options) {\n    if (options === void 0) { options = {}; }\n    var cursor = editor.getCursorPosition();\n    var line = editor.session.getLine(cursor.row);\n    var tabString = editor.session.getTabString();\n    var indentString = line.match(/^\\s*/)[0];\n    if (cursor.column < indentString.length)\n        indentString = indentString.slice(0, cursor.column);\n    snippetText = snippetText.replace(/\\r/g, \"\");\n    var tokens = this.tokenizeTmSnippet(snippetText);\n    tokens = this.resolveVariables(tokens, editor);\n    tokens = tokens.map(function (x) {\n        if (x == \"\\n\" && !options.excludeExtraIndent)\n            return x + indentString;\n        if (typeof x == \"string\")\n            return x.replace(/\\t/g, tabString);\n        return x;\n    });\n    var tabstops = [];\n    tokens.forEach(function (p, i) {\n        if (typeof p != \"object\")\n            return;\n        var id = p.tabstopId;\n        var ts = tabstops[id];\n        if (!ts) {\n            ts = tabstops[id] = [];\n            ts.index = id;\n            ts.value = \"\";\n            ts.parents = {};\n        }\n        if (ts.indexOf(p) !== -1)\n            return;\n        if (p.choices && !ts.choices)\n            ts.choices = p.choices;\n        ts.push(p);\n        var i1 = tokens.indexOf(p, i + 1);\n        if (i1 === -1)\n            return;\n        var value = tokens.slice(i + 1, i1);\n        var isNested = value.some(function (t) { return typeof t === \"object\"; });\n        if (isNested && !ts.value) {\n            ts.value = value;\n        }\n        else if (value.length && (!ts.value || typeof ts.value !== \"string\")) {\n            ts.value = value.join(\"\");\n        }\n    });\n    tabstops.forEach(function (ts) { ts.length = 0; });\n    var expanding = {};\n    function copyValue(val) {\n        var copy = [];\n        for (var i = 0; i < val.length; i++) {\n            var p = val[i];\n            if (typeof p == \"object\") {\n                if (expanding[p.tabstopId])\n                    continue;\n                var j = val.lastIndexOf(p, i - 1);\n                p = copy[j] || { tabstopId: p.tabstopId };\n            }\n            copy[i] = p;\n        }\n        return copy;\n    }\n    for (var i = 0; i < tokens.length; i++) {\n        var p = tokens[i];\n        if (typeof p != \"object\")\n            continue;\n        var id = p.tabstopId;\n        var ts = tabstops[id];\n        var i1 = tokens.indexOf(p, i + 1);\n        if (expanding[id]) {\n            if (expanding[id] === p) {\n                delete expanding[id];\n                Object.keys(expanding).forEach(function (parentId) {\n                    ts.parents[parentId] = true;\n                });\n            }\n            continue;\n        }\n        expanding[id] = p;\n        var value = ts.value;\n        if (typeof value !== \"string\")\n            value = copyValue(value);\n        else if (p.fmt)\n            value = this.tmStrFormat(value, p, editor);\n        tokens.splice.apply(tokens, [i + 1, Math.max(0, i1 - i)].concat(value, p));\n        if (ts.indexOf(p) === -1)\n            ts.push(p);\n    }\n    var row = 0, column = 0;\n    var text = \"\";\n    tokens.forEach(function (t) {\n        if (typeof t === \"string\") {\n            var lines = t.split(\"\\n\");\n            if (lines.length > 1) {\n                column = lines[lines.length - 1].length;\n                row += lines.length - 1;\n            }\n            else\n                column += t.length;\n            text += t;\n        }\n        else if (t) {\n            if (!t.start)\n                t.start = { row: row, column: column };\n            else\n                t.end = { row: row, column: column };\n        }\n    });\n    return {\n        text: text,\n        tabstops: tabstops,\n        tokens: tokens\n    };\n};\nvar TabstopManager = /** @class */ (function () {\n    function TabstopManager(editor) {\n        this.index = 0;\n        this.ranges = [];\n        this.tabstops = [];\n        if (editor.tabstopManager)\n            return editor.tabstopManager;\n        editor.tabstopManager = this;\n        this.$onChange = this.onChange.bind(this);\n        this.$onChangeSelection = lang.delayedCall(this.onChangeSelection.bind(this)).schedule;\n        this.$onChangeSession = this.onChangeSession.bind(this);\n        this.$onAfterExec = this.onAfterExec.bind(this);\n        this.attach(editor);\n    }\n    TabstopManager.prototype.attach = function (editor) {\n        this.$openTabstops = null;\n        this.selectedTabstop = null;\n        this.editor = editor;\n        this.session = editor.session;\n        this.editor.on(\"change\", this.$onChange);\n        this.editor.on(\"changeSelection\", this.$onChangeSelection);\n        this.editor.on(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.on(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n    };\n    TabstopManager.prototype.detach = function () {\n        this.tabstops.forEach(this.removeTabstopMarkers, this);\n        this.ranges.length = 0;\n        this.tabstops.length = 0;\n        this.selectedTabstop = null;\n        this.editor.off(\"change\", this.$onChange);\n        this.editor.off(\"changeSelection\", this.$onChangeSelection);\n        this.editor.off(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.off(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n        this.editor.tabstopManager = null;\n        this.session = null;\n        this.editor = null;\n    };\n    TabstopManager.prototype.onChange = function (delta) {\n        var isRemove = delta.action[0] == \"r\";\n        var selectedTabstop = this.selectedTabstop || {};\n        var parents = selectedTabstop.parents || {};\n        var tabstops = this.tabstops.slice();\n        for (var i = 0; i < tabstops.length; i++) {\n            var ts = tabstops[i];\n            var active = ts == selectedTabstop || parents[ts.index];\n            ts.rangeList.$bias = active ? 0 : 1;\n            if (delta.action == \"remove\" && ts !== selectedTabstop) {\n                var parentActive = ts.parents && ts.parents[selectedTabstop.index];\n                var startIndex = ts.rangeList.pointIndex(delta.start, parentActive);\n                startIndex = startIndex < 0 ? -startIndex - 1 : startIndex + 1;\n                var endIndex = ts.rangeList.pointIndex(delta.end, parentActive);\n                endIndex = endIndex < 0 ? -endIndex - 1 : endIndex - 1;\n                var toRemove = ts.rangeList.ranges.slice(startIndex, endIndex);\n                for (var j = 0; j < toRemove.length; j++)\n                    this.removeRange(toRemove[j]);\n            }\n            ts.rangeList.$onChange(delta);\n        }\n        var session = this.session;\n        if (!this.$inChange && isRemove && session.getLength() == 1 && !session.getValue())\n            this.detach();\n    };\n    TabstopManager.prototype.updateLinkedFields = function () {\n        var ts = this.selectedTabstop;\n        if (!ts || !ts.hasLinkedRanges || !ts.firstNonLinked)\n            return;\n        this.$inChange = true;\n        var session = this.session;\n        var text = session.getTextRange(ts.firstNonLinked);\n        for (var i = 0; i < ts.length; i++) {\n            var range = ts[i];\n            if (!range.linked)\n                continue;\n            var original = range.original;\n            var fmt = exports.snippetManager.tmStrFormat(text, original, this.editor);\n            session.replace(range, fmt);\n        }\n        this.$inChange = false;\n    };\n    TabstopManager.prototype.onAfterExec = function (e) {\n        if (e.command && !e.command.readOnly)\n            this.updateLinkedFields();\n    };\n    TabstopManager.prototype.onChangeSelection = function () {\n        if (!this.editor)\n            return;\n        var lead = this.editor.selection.lead;\n        var anchor = this.editor.selection.anchor;\n        var isEmpty = this.editor.selection.isEmpty();\n        for (var i = 0; i < this.ranges.length; i++) {\n            if (this.ranges[i].linked)\n                continue;\n            var containsLead = this.ranges[i].contains(lead.row, lead.column);\n            var containsAnchor = isEmpty || this.ranges[i].contains(anchor.row, anchor.column);\n            if (containsLead && containsAnchor)\n                return;\n        }\n        this.detach();\n    };\n    TabstopManager.prototype.onChangeSession = function () {\n        this.detach();\n    };\n    TabstopManager.prototype.tabNext = function (dir) {\n        var max = this.tabstops.length;\n        var index = this.index + (dir || 1);\n        index = Math.min(Math.max(index, 1), max);\n        if (index == max)\n            index = 0;\n        this.selectTabstop(index);\n        this.updateTabstopMarkers();\n        if (index === 0) {\n            this.detach();\n        }\n    };\n    TabstopManager.prototype.selectTabstop = function (index) {\n        this.$openTabstops = null;\n        var ts = this.tabstops[this.index];\n        if (ts)\n            this.addTabstopMarkers(ts);\n        this.index = index;\n        ts = this.tabstops[this.index];\n        if (!ts || !ts.length)\n            return;\n        this.selectedTabstop = ts;\n        var range = ts.firstNonLinked || ts;\n        if (ts.choices)\n            range.cursor = range.start;\n        if (!this.editor.inVirtualSelectionMode) {\n            var sel = this.editor.multiSelect;\n            sel.toSingleRange(range);\n            for (var i = 0; i < ts.length; i++) {\n                if (ts.hasLinkedRanges && ts[i].linked)\n                    continue;\n                sel.addRange(ts[i].clone(), true);\n            }\n        }\n        else {\n            this.editor.selection.fromOrientedRange(range);\n        }\n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n        if (this.selectedTabstop && this.selectedTabstop.choices)\n            this.editor.execCommand(\"startAutocomplete\", { matches: this.selectedTabstop.choices });\n    };\n    TabstopManager.prototype.addTabstops = function (tabstops, start, end) {\n        var useLink = this.useLink || !this.editor.getOption(\"enableMultiselect\");\n        if (!this.$openTabstops)\n            this.$openTabstops = [];\n        if (!tabstops[0]) {\n            var p = Range.fromPoints(end, end);\n            moveRelative(p.start, start);\n            moveRelative(p.end, start);\n            tabstops[0] = [p];\n            tabstops[0].index = 0;\n        }\n        var i = this.index;\n        var arg = [i + 1, 0];\n        var ranges = this.ranges;\n        var snippetId = this.snippetId = (this.snippetId || 0) + 1;\n        tabstops.forEach(function (ts, index) {\n            var dest = this.$openTabstops[index] || ts;\n            dest.snippetId = snippetId;\n            for (var i = 0; i < ts.length; i++) {\n                var p = ts[i];\n                var range = Range.fromPoints(p.start, p.end || p.start);\n                movePoint(range.start, start);\n                movePoint(range.end, start);\n                range.original = p;\n                range.tabstop = dest;\n                ranges.push(range);\n                if (dest != ts)\n                    dest.unshift(range);\n                else\n                    dest[i] = range;\n                if (p.fmtString || (dest.firstNonLinked && useLink)) {\n                    range.linked = true;\n                    dest.hasLinkedRanges = true;\n                }\n                else if (!dest.firstNonLinked)\n                    dest.firstNonLinked = range;\n            }\n            if (!dest.firstNonLinked)\n                dest.hasLinkedRanges = false;\n            if (dest === ts) {\n                arg.push(dest);\n                this.$openTabstops[index] = dest;\n            }\n            this.addTabstopMarkers(dest);\n            dest.rangeList = dest.rangeList || new RangeList();\n            dest.rangeList.$bias = 0;\n            dest.rangeList.addList(dest);\n        }, this);\n        if (arg.length > 2) {\n            if (this.tabstops.length)\n                arg.push(arg.splice(2, 1)[0]);\n            this.tabstops.splice.apply(this.tabstops, arg);\n        }\n    };\n    TabstopManager.prototype.addTabstopMarkers = function (ts) {\n        var session = this.session;\n        ts.forEach(function (range) {\n            if (!range.markerId)\n                range.markerId = session.addMarker(range, \"ace_snippet-marker\", \"text\");\n        });\n    };\n    TabstopManager.prototype.removeTabstopMarkers = function (ts) {\n        var session = this.session;\n        ts.forEach(function (range) {\n            session.removeMarker(range.markerId);\n            range.markerId = null;\n        });\n    };\n    TabstopManager.prototype.updateTabstopMarkers = function () {\n        if (!this.selectedTabstop)\n            return;\n        var currentSnippetId = this.selectedTabstop.snippetId;\n        if (this.selectedTabstop.index === 0) {\n            currentSnippetId--;\n        }\n        this.tabstops.forEach(function (ts) {\n            if (ts.snippetId === currentSnippetId)\n                this.addTabstopMarkers(ts);\n            else\n                this.removeTabstopMarkers(ts);\n        }, this);\n    };\n    TabstopManager.prototype.removeRange = function (range) {\n        var i = range.tabstop.indexOf(range);\n        if (i != -1)\n            range.tabstop.splice(i, 1);\n        i = this.ranges.indexOf(range);\n        if (i != -1)\n            this.ranges.splice(i, 1);\n        i = range.tabstop.rangeList.ranges.indexOf(range);\n        if (i != -1)\n            range.tabstop.splice(i, 1);\n        this.session.removeMarker(range.markerId);\n        if (!range.tabstop.length) {\n            i = this.tabstops.indexOf(range.tabstop);\n            if (i != -1)\n                this.tabstops.splice(i, 1);\n            if (!this.tabstops.length)\n                this.detach();\n        }\n    };\n    return TabstopManager;\n}());\nTabstopManager.prototype.keyboardHandler = new HashHandler();\nTabstopManager.prototype.keyboardHandler.bindKeys({\n    \"Tab\": function (editor) {\n        if (exports.snippetManager && exports.snippetManager.expandWithTab(editor))\n            return;\n        editor.tabstopManager.tabNext(1);\n        editor.renderer.scrollCursorIntoView();\n    },\n    \"Shift-Tab\": function (editor) {\n        editor.tabstopManager.tabNext(-1);\n        editor.renderer.scrollCursorIntoView();\n    },\n    \"Esc\": function (editor) {\n        editor.tabstopManager.detach();\n    }\n});\nvar movePoint = function (point, diff) {\n    if (point.row == 0)\n        point.column += diff.column;\n    point.row += diff.row;\n};\nvar moveRelative = function (point, start) {\n    if (point.row == start.row)\n        point.column -= start.column;\n    point.row -= start.row;\n};\ndom.importCssString(\"\\n.ace_snippet-marker {\\n    -moz-box-sizing: border-box;\\n    box-sizing: border-box;\\n    background: rgba(194, 193, 208, 0.09);\\n    border: 1px dotted rgba(211, 208, 235, 0.62);\\n    position: absolute;\\n}\", \"snippets.css\", false);\nexports.snippetManager = new SnippetManager();\nvar Editor = require(\"./editor\").Editor;\n(function () {\n    this.insertSnippet = function (content, options) {\n        return exports.snippetManager.insertSnippet(this, content, options);\n    };\n    this.expandSnippet = function (options) {\n        return exports.snippetManager.expandWithTab(this, options);\n    };\n}).call(Editor.prototype);\n\n});\n\nace.define(\"ace/autocomplete/popup\",[\"require\",\"exports\",\"module\",\"ace/virtual_renderer\",\"ace/editor\",\"ace/range\",\"ace/lib/event\",\"ace/lib/lang\",\"ace/lib/dom\",\"ace/config\",\"ace/lib/useragent\"], function(require, exports, module){\"use strict\";\nvar Renderer = require(\"../virtual_renderer\").VirtualRenderer;\nvar Editor = require(\"../editor\").Editor;\nvar Range = require(\"../range\").Range;\nvar event = require(\"../lib/event\");\nvar lang = require(\"../lib/lang\");\nvar dom = require(\"../lib/dom\");\nvar nls = require(\"../config\").nls;\nvar userAgent = require(\"./../lib/useragent\");\nvar getAriaId = function (index) {\n    return \"suggest-aria-id:\".concat(index);\n};\nvar popupAriaRole = userAgent.isSafari ? \"menu\" : \"listbox\";\nvar optionAriaRole = userAgent.isSafari ? \"menuitem\" : \"option\";\nvar ariaActiveState = userAgent.isSafari ? \"aria-current\" : \"aria-selected\";\nvar $singleLineEditor = function (el) {\n    var renderer = new Renderer(el);\n    renderer.$maxLines = 4;\n    var editor = new Editor(renderer);\n    editor.setHighlightActiveLine(false);\n    editor.setShowPrintMargin(false);\n    editor.renderer.setShowGutter(false);\n    editor.renderer.setHighlightGutterLine(false);\n    editor.$mouseHandler.$focusTimeout = 0;\n    editor.$highlightTagPending = true;\n    return editor;\n};\nvar AcePopup = /** @class */ (function () {\n    function AcePopup(parentNode) {\n        var el = dom.createElement(\"div\");\n        var popup = $singleLineEditor(el);\n        if (parentNode) {\n            parentNode.appendChild(el);\n        }\n        el.style.display = \"none\";\n        popup.renderer.content.style.cursor = \"default\";\n        popup.renderer.setStyle(\"ace_autocomplete\");\n        popup.renderer.$textLayer.element.setAttribute(\"role\", popupAriaRole);\n        popup.renderer.$textLayer.element.setAttribute(\"aria-roledescription\", nls(\"autocomplete.popup.aria-roledescription\", \"Autocomplete suggestions\"));\n        popup.renderer.$textLayer.element.setAttribute(\"aria-label\", nls(\"autocomplete.popup.aria-label\", \"Autocomplete suggestions\"));\n        popup.renderer.textarea.setAttribute(\"aria-hidden\", \"true\");\n        popup.setOption(\"displayIndentGuides\", false);\n        popup.setOption(\"dragDelay\", 150);\n        var noop = function () { };\n        popup.focus = noop;\n        popup.$isFocused = true;\n        popup.renderer.$cursorLayer.restartTimer = noop;\n        popup.renderer.$cursorLayer.element.style.opacity = \"0\";\n        popup.renderer.$maxLines = 8;\n        popup.renderer.$keepTextAreaAtCursor = false;\n        popup.setHighlightActiveLine(false);\n        popup.session.highlight(\"\");\n        popup.session.$searchHighlight.clazz = \"ace_highlight-marker\";\n        popup.on(\"mousedown\", function (e) {\n            var pos = e.getDocumentPosition();\n            popup.selection.moveToPosition(pos);\n            selectionMarker.start.row = selectionMarker.end.row = pos.row;\n            e.stop();\n        });\n        var lastMouseEvent;\n        var hoverMarker = new Range(-1, 0, -1, Infinity);\n        var selectionMarker = new Range(-1, 0, -1, Infinity);\n        selectionMarker.id = popup.session.addMarker(selectionMarker, \"ace_active-line\", \"fullLine\");\n        popup.setSelectOnHover = function (val) {\n            if (!val) {\n                hoverMarker.id = popup.session.addMarker(hoverMarker, \"ace_line-hover\", \"fullLine\");\n            }\n            else if (hoverMarker.id) {\n                popup.session.removeMarker(hoverMarker.id);\n                hoverMarker.id = null;\n            }\n        };\n        popup.setSelectOnHover(false);\n        popup.on(\"mousemove\", function (e) {\n            if (!lastMouseEvent) {\n                lastMouseEvent = e;\n                return;\n            }\n            if (lastMouseEvent.x == e.x && lastMouseEvent.y == e.y) {\n                return;\n            }\n            lastMouseEvent = e;\n            lastMouseEvent.scrollTop = popup.renderer.scrollTop;\n            popup.isMouseOver = true;\n            var row = lastMouseEvent.getDocumentPosition().row;\n            if (hoverMarker.start.row != row) {\n                if (!hoverMarker.id)\n                    popup.setRow(row);\n                setHoverMarker(row);\n            }\n        });\n        popup.renderer.on(\"beforeRender\", function () {\n            if (lastMouseEvent && hoverMarker.start.row != -1) {\n                lastMouseEvent.$pos = null;\n                var row = lastMouseEvent.getDocumentPosition().row;\n                if (!hoverMarker.id)\n                    popup.setRow(row);\n                setHoverMarker(row, true);\n            }\n        });\n        popup.renderer.on(\"afterRender\", function () {\n            var t = popup.renderer.$textLayer;\n            for (var row = t.config.firstRow, l = t.config.lastRow; row <= l; row++) {\n                var popupRowElement = /** @type {HTMLElement|null} */ (t.element.childNodes[row - t.config.firstRow]);\n                popupRowElement.setAttribute(\"role\", optionAriaRole);\n                popupRowElement.setAttribute(\"aria-roledescription\", nls(\"autocomplete.popup.item.aria-roledescription\", \"item\"));\n                popupRowElement.setAttribute(\"aria-setsize\", popup.data.length);\n                popupRowElement.setAttribute(\"aria-describedby\", \"doc-tooltip\");\n                popupRowElement.setAttribute(\"aria-posinset\", row + 1);\n                var rowData = popup.getData(row);\n                if (rowData) {\n                    var ariaLabel = \"\".concat(rowData.caption || rowData.value).concat(rowData.meta ? \", \".concat(rowData.meta) : '');\n                    popupRowElement.setAttribute(\"aria-label\", ariaLabel);\n                }\n                var highlightedSpans = popupRowElement.querySelectorAll(\".ace_completion-highlight\");\n                highlightedSpans.forEach(function (span) {\n                    span.setAttribute(\"role\", \"mark\");\n                });\n            }\n        });\n        popup.renderer.on(\"afterRender\", function () {\n            var row = popup.getRow();\n            var t = popup.renderer.$textLayer;\n            var selected = /** @type {HTMLElement|null} */ (t.element.childNodes[row - t.config.firstRow]);\n            var el = document.activeElement; // Active element is textarea of main editor\n            if (selected !== popup.selectedNode && popup.selectedNode) {\n                dom.removeCssClass(popup.selectedNode, \"ace_selected\");\n                popup.selectedNode.removeAttribute(ariaActiveState);\n                popup.selectedNode.removeAttribute(\"id\");\n            }\n            el.removeAttribute(\"aria-activedescendant\");\n            popup.selectedNode = selected;\n            if (selected) {\n                var ariaId = getAriaId(row);\n                dom.addCssClass(selected, \"ace_selected\");\n                selected.id = ariaId;\n                t.element.setAttribute(\"aria-activedescendant\", ariaId);\n                el.setAttribute(\"aria-activedescendant\", ariaId);\n                selected.setAttribute(ariaActiveState, \"true\");\n            }\n        });\n        var hideHoverMarker = function () { setHoverMarker(-1); };\n        var setHoverMarker = function (row, suppressRedraw) {\n            if (row !== hoverMarker.start.row) {\n                hoverMarker.start.row = hoverMarker.end.row = row;\n                if (!suppressRedraw)\n                    popup.session._emit(\"changeBackMarker\");\n                popup._emit(\"changeHoverMarker\");\n            }\n        };\n        popup.getHoveredRow = function () {\n            return hoverMarker.start.row;\n        };\n        event.addListener(popup.container, \"mouseout\", function () {\n            popup.isMouseOver = false;\n            hideHoverMarker();\n        });\n        popup.on(\"hide\", hideHoverMarker);\n        popup.on(\"changeSelection\", hideHoverMarker);\n        popup.session.doc.getLength = function () {\n            return popup.data.length;\n        };\n        popup.session.doc.getLine = function (i) {\n            var data = popup.data[i];\n            if (typeof data == \"string\")\n                return data;\n            return (data && data.value) || \"\";\n        };\n        var bgTokenizer = popup.session.bgTokenizer;\n        bgTokenizer.$tokenizeRow = function (row) {\n            var data = popup.data[row];\n            var tokens = [];\n            if (!data)\n                return tokens;\n            if (typeof data == \"string\")\n                data = { value: data };\n            var caption = data.caption || data.value || data.name;\n            function addToken(value, className) {\n                value && tokens.push({\n                    type: (data.className || \"\") + (className || \"\"),\n                    value: value\n                });\n            }\n            var lower = caption.toLowerCase();\n            var filterText = (popup.filterText || \"\").toLowerCase();\n            var lastIndex = 0;\n            var lastI = 0;\n            for (var i = 0; i <= filterText.length; i++) {\n                if (i != lastI && (data.matchMask & (1 << i) || i == filterText.length)) {\n                    var sub = filterText.slice(lastI, i);\n                    lastI = i;\n                    var index = lower.indexOf(sub, lastIndex);\n                    if (index == -1)\n                        continue;\n                    addToken(caption.slice(lastIndex, index), \"\");\n                    lastIndex = index + sub.length;\n                    addToken(caption.slice(index, lastIndex), \"completion-highlight\");\n                }\n            }\n            addToken(caption.slice(lastIndex, caption.length), \"\");\n            tokens.push({ type: \"completion-spacer\", value: \" \" });\n            if (data.meta)\n                tokens.push({ type: \"completion-meta\", value: data.meta });\n            if (data.message)\n                tokens.push({ type: \"completion-message\", value: data.message });\n            return tokens;\n        };\n        bgTokenizer.$updateOnChange = noop;\n        bgTokenizer.start = noop;\n        popup.session.$computeWidth = function () {\n            return this.screenWidth = 0;\n        };\n        popup.isOpen = false;\n        popup.isTopdown = false;\n        popup.autoSelect = true;\n        popup.filterText = \"\";\n        popup.isMouseOver = false;\n        popup.data = [];\n        popup.setData = function (list, filterText) {\n            popup.filterText = filterText || \"\";\n            popup.setValue(lang.stringRepeat(\"\\n\", list.length), -1);\n            popup.data = list || [];\n            popup.setRow(0);\n        };\n        popup.getData = function (row) {\n            return popup.data[row];\n        };\n        popup.getRow = function () {\n            return selectionMarker.start.row;\n        };\n        popup.setRow = function (line) {\n            line = Math.max(this.autoSelect ? 0 : -1, Math.min(this.data.length - 1, line));\n            if (selectionMarker.start.row != line) {\n                popup.selection.clearSelection();\n                selectionMarker.start.row = selectionMarker.end.row = line || 0;\n                popup.session._emit(\"changeBackMarker\");\n                popup.moveCursorTo(line || 0, 0);\n                if (popup.isOpen)\n                    popup._signal(\"select\");\n            }\n        };\n        popup.on(\"changeSelection\", function () {\n            if (popup.isOpen)\n                popup.setRow(popup.selection.lead.row);\n            popup.renderer.scrollCursorIntoView();\n        });\n        popup.hide = function () {\n            this.container.style.display = \"none\";\n            popup.anchorPos = null;\n            popup.anchor = null;\n            if (popup.isOpen) {\n                popup.isOpen = false;\n                this._signal(\"hide\");\n            }\n        };\n        popup.tryShow = function (pos, lineHeight, anchor, forceShow) {\n            if (!forceShow && popup.isOpen && popup.anchorPos && popup.anchor &&\n                popup.anchorPos.top === pos.top && popup.anchorPos.left === pos.left &&\n                popup.anchor === anchor) {\n                return true;\n            }\n            var el = this.container;\n            var scrollBarSize = this.renderer.scrollBar.width || 10;\n            var screenHeight = window.innerHeight - scrollBarSize;\n            var screenWidth = window.innerWidth - scrollBarSize;\n            var renderer = this.renderer;\n            var maxH = renderer.$maxLines * lineHeight * 1.4;\n            var dims = { top: 0, bottom: 0, left: 0 };\n            var spaceBelow = screenHeight - pos.top - 3 * this.$borderSize - lineHeight;\n            var spaceAbove = pos.top - 3 * this.$borderSize;\n            if (!anchor) {\n                if (spaceAbove <= spaceBelow || spaceBelow >= maxH) {\n                    anchor = \"bottom\";\n                }\n                else {\n                    anchor = \"top\";\n                }\n            }\n            if (anchor === \"top\") {\n                dims.bottom = pos.top - this.$borderSize;\n                dims.top = dims.bottom - maxH;\n            }\n            else if (anchor === \"bottom\") {\n                dims.top = pos.top + lineHeight + this.$borderSize;\n                dims.bottom = dims.top + maxH;\n            }\n            var fitsX = dims.top >= 0 && dims.bottom <= screenHeight;\n            if (!forceShow && !fitsX) {\n                return false;\n            }\n            if (!fitsX) {\n                if (anchor === \"top\") {\n                    renderer.$maxPixelHeight = spaceAbove;\n                }\n                else {\n                    renderer.$maxPixelHeight = spaceBelow;\n                }\n            }\n            else {\n                renderer.$maxPixelHeight = null;\n            }\n            if (anchor === \"top\") {\n                el.style.top = \"\";\n                el.style.bottom = (screenHeight + scrollBarSize - dims.bottom) + \"px\";\n                popup.isTopdown = false;\n            }\n            else {\n                el.style.top = dims.top + \"px\";\n                el.style.bottom = \"\";\n                popup.isTopdown = true;\n            }\n            el.style.display = \"\";\n            var left = pos.left;\n            if (left + el.offsetWidth > screenWidth)\n                left = screenWidth - el.offsetWidth;\n            el.style.left = left + \"px\";\n            el.style.right = \"\";\n            if (!popup.isOpen) {\n                popup.isOpen = true;\n                this._signal(\"show\");\n                lastMouseEvent = null;\n            }\n            popup.anchorPos = pos;\n            popup.anchor = anchor;\n            dom.$fixPositionBug(el);\n            return true;\n        };\n        popup.show = function (pos, lineHeight, topdownOnly) {\n            this.tryShow(pos, lineHeight, topdownOnly ? \"bottom\" : undefined, true);\n        };\n        popup.goTo = function (where) {\n            var row = this.getRow();\n            var max = this.session.getLength() - 1;\n            switch (where) {\n                case \"up\":\n                    row = row <= 0 ? max : row - 1;\n                    break;\n                case \"down\":\n                    row = row >= max ? -1 : row + 1;\n                    break;\n                case \"start\":\n                    row = 0;\n                    break;\n                case \"end\":\n                    row = max;\n                    break;\n            }\n            this.setRow(row);\n        };\n        popup.getTextLeftOffset = function () {\n            return this.$borderSize + this.renderer.$padding + this.$imageSize;\n        };\n        popup.$imageSize = 0;\n        popup.$borderSize = 1;\n        return popup;\n    }\n    return AcePopup;\n}());\ndom.importCssString(\"\\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\n    background-color: #CAD6FA;\\n    z-index: 1;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\n    background-color: #3a674e;\\n}\\n.ace_editor.ace_autocomplete .ace_line-hover {\\n    border: 1px solid #abbffe;\\n    margin-top: -1px;\\n    background: rgba(233,233,253,0.4);\\n    position: absolute;\\n    z-index: 2;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\\n    border: 1px solid rgba(109, 150, 13, 0.8);\\n    background: rgba(58, 103, 78, 0.62);\\n}\\n.ace_completion-meta {\\n    opacity: 0.5;\\n    margin-left: 0.9em;\\n}\\n.ace_completion-message {\\n    margin-left: 0.9em;\\n    color: blue;\\n}\\n.ace_editor.ace_autocomplete .ace_completion-highlight{\\n    color: #2d69c7;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\\n    color: #93ca12;\\n}\\n.ace_editor.ace_autocomplete {\\n    width: 300px;\\n    z-index: 200000;\\n    border: 1px lightgray solid;\\n    position: fixed;\\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\\n    line-height: 1.4;\\n    background: #fefefe;\\n    color: #111;\\n}\\n.ace_dark.ace_editor.ace_autocomplete {\\n    border: 1px #484747 solid;\\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\\n    line-height: 1.4;\\n    background: #25282c;\\n    color: #c1c1c1;\\n}\\n.ace_autocomplete .ace_text-layer  {\\n    width: calc(100% - 8px);\\n}\\n.ace_autocomplete .ace_line {\\n    display: flex;\\n    align-items: center;\\n}\\n.ace_autocomplete .ace_line > * {\\n    min-width: 0;\\n    flex: 0 0 auto;\\n}\\n.ace_autocomplete .ace_line .ace_ {\\n    flex: 0 1 auto;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n}\\n.ace_autocomplete .ace_completion-spacer {\\n    flex: 1;\\n}\\n.ace_autocomplete.ace_loading:after  {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: 0px;\\n    height: 2px;\\n    width: 8%;\\n    background: blue;\\n    z-index: 100;\\n    animation: ace_progress 3s infinite linear;\\n    animation-delay: 300ms;\\n    transform: translateX(-100%) scaleX(1);\\n}\\n@keyframes ace_progress {\\n    0% { transform: translateX(-100%) scaleX(1) }\\n    50% { transform: translateX(625%) scaleX(2) } \\n    100% { transform: translateX(1500%) scaleX(3) } \\n}\\n@media (prefers-reduced-motion) {\\n    .ace_autocomplete.ace_loading:after {\\n        transform: translateX(625%) scaleX(2);\\n        animation: none;\\n     }\\n}\\n\", \"autocompletion.css\", false);\nexports.AcePopup = AcePopup;\nexports.$singleLineEditor = $singleLineEditor;\nexports.getAriaId = getAriaId;\n\n});\n\nace.define(\"ace/autocomplete/inline_screenreader\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar AceInlineScreenReader = /** @class */ (function () {\n    function AceInlineScreenReader(editor) {\n        this.editor = editor;\n        this.screenReaderDiv = document.createElement(\"div\");\n        this.screenReaderDiv.classList.add(\"ace_screenreader-only\");\n        this.editor.container.appendChild(this.screenReaderDiv);\n    }\n    AceInlineScreenReader.prototype.setScreenReaderContent = function (content) {\n        if (!this.popup && this.editor.completer && /**@type{import(\"../autocomplete\").Autocomplete}*/ (this.editor.completer).popup) {\n            this.popup = /**@type{import(\"../autocomplete\").Autocomplete}*/ (this.editor.completer).popup;\n            this.popup.renderer.on(\"afterRender\", function () {\n                var row = this.popup.getRow();\n                var t = this.popup.renderer.$textLayer;\n                var selected = t.element.childNodes[row - t.config.firstRow];\n                if (selected) {\n                    var idString = \"doc-tooltip \";\n                    for (var lineIndex = 0; lineIndex < this._lines.length; lineIndex++) {\n                        idString += \"ace-inline-screenreader-line-\".concat(lineIndex, \" \");\n                    }\n                    selected.setAttribute(\"aria-describedby\", idString);\n                }\n            }.bind(this));\n        }\n        while (this.screenReaderDiv.firstChild) {\n            this.screenReaderDiv.removeChild(this.screenReaderDiv.firstChild);\n        }\n        this._lines = content.split(/\\r\\n|\\r|\\n/);\n        var codeElement = this.createCodeBlock();\n        this.screenReaderDiv.appendChild(codeElement);\n    };\n    AceInlineScreenReader.prototype.destroy = function () {\n        this.screenReaderDiv.remove();\n    };\n    AceInlineScreenReader.prototype.createCodeBlock = function () {\n        var container = document.createElement(\"pre\");\n        container.setAttribute(\"id\", \"ace-inline-screenreader\");\n        for (var lineIndex = 0; lineIndex < this._lines.length; lineIndex++) {\n            var codeElement = document.createElement(\"code\");\n            codeElement.setAttribute(\"id\", \"ace-inline-screenreader-line-\".concat(lineIndex));\n            var line = document.createTextNode(this._lines[lineIndex]);\n            codeElement.appendChild(line);\n            container.appendChild(codeElement);\n        }\n        return container;\n    };\n    return AceInlineScreenReader;\n}());\nexports.AceInlineScreenReader = AceInlineScreenReader;\n\n});\n\nace.define(\"ace/autocomplete/inline\",[\"require\",\"exports\",\"module\",\"ace/snippets\",\"ace/autocomplete/inline_screenreader\"], function(require, exports, module){\"use strict\";\nvar snippetManager = require(\"../snippets\").snippetManager;\nvar AceInlineScreenReader = require(\"./inline_screenreader\").AceInlineScreenReader;\nvar AceInline = /** @class */ (function () {\n    function AceInline() {\n        this.editor = null;\n    }\n    AceInline.prototype.show = function (editor, completion, prefix) {\n        prefix = prefix || \"\";\n        if (editor && this.editor && this.editor !== editor) {\n            this.hide();\n            this.editor = null;\n            this.inlineScreenReader = null;\n        }\n        if (!editor || !completion) {\n            return false;\n        }\n        if (!this.inlineScreenReader) {\n            this.inlineScreenReader = new AceInlineScreenReader(editor);\n        }\n        var displayText = completion.snippet ? snippetManager.getDisplayTextForSnippet(editor, completion.snippet) : completion.value;\n        if (completion.hideInlinePreview || !displayText || !displayText.startsWith(prefix)) {\n            return false;\n        }\n        this.editor = editor;\n        this.inlineScreenReader.setScreenReaderContent(displayText);\n        displayText = displayText.slice(prefix.length);\n        if (displayText === \"\") {\n            editor.removeGhostText();\n        }\n        else {\n            editor.setGhostText(displayText);\n        }\n        return true;\n    };\n    AceInline.prototype.isOpen = function () {\n        if (!this.editor) {\n            return false;\n        }\n        return !!this.editor.renderer.$ghostText;\n    };\n    AceInline.prototype.hide = function () {\n        if (!this.editor) {\n            return false;\n        }\n        this.editor.removeGhostText();\n        return true;\n    };\n    AceInline.prototype.destroy = function () {\n        this.hide();\n        this.editor = null;\n        if (this.inlineScreenReader) {\n            this.inlineScreenReader.destroy();\n            this.inlineScreenReader = null;\n        }\n    };\n    return AceInline;\n}());\nexports.AceInline = AceInline;\n\n});\n\nace.define(\"ace/autocomplete/util\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nexports.parForEach = function (array, fn, callback) {\n    var completed = 0;\n    var arLength = array.length;\n    if (arLength === 0)\n        callback();\n    for (var i = 0; i < arLength; i++) {\n        fn(array[i], function (result, err) {\n            completed++;\n            if (completed === arLength)\n                callback(result, err);\n        });\n    }\n};\nvar ID_REGEX = /[a-zA-Z_0-9\\$\\-\\u00A2-\\u2000\\u2070-\\uFFFF]/;\nexports.retrievePrecedingIdentifier = function (text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos - 1; i >= 0; i--) {\n        if (regex.test(text[i]))\n            buf.push(text[i]);\n        else\n            break;\n    }\n    return buf.reverse().join(\"\");\n};\nexports.retrieveFollowingIdentifier = function (text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos; i < text.length; i++) {\n        if (regex.test(text[i]))\n            buf.push(text[i]);\n        else\n            break;\n    }\n    return buf;\n};\nexports.getCompletionPrefix = function (editor) {\n    var pos = editor.getCursorPosition();\n    var line = editor.session.getLine(pos.row);\n    var prefix;\n    editor.completers.forEach(function (completer) {\n        if (completer.identifierRegexps) {\n            completer.identifierRegexps.forEach(function (identifierRegex) {\n                if (!prefix && identifierRegex)\n                    prefix = this.retrievePrecedingIdentifier(line, pos.column, identifierRegex);\n            }.bind(this));\n        }\n    }.bind(this));\n    return prefix || this.retrievePrecedingIdentifier(line, pos.column);\n};\nexports.triggerAutocomplete = function (editor, previousChar) {\n    var previousChar = previousChar == null\n        ? editor.session.getPrecedingCharacter()\n        : previousChar;\n    return editor.completers.some(function (completer) {\n        if (completer.triggerCharacters && Array.isArray(completer.triggerCharacters)) {\n            return completer.triggerCharacters.includes(previousChar);\n        }\n    });\n};\n\n});\n\nace.define(\"ace/autocomplete\",[\"require\",\"exports\",\"module\",\"ace/keyboard/hash_handler\",\"ace/autocomplete/popup\",\"ace/autocomplete/inline\",\"ace/autocomplete/popup\",\"ace/autocomplete/util\",\"ace/lib/lang\",\"ace/lib/dom\",\"ace/snippets\",\"ace/config\",\"ace/lib/event\",\"ace/lib/scroll\"], function(require, exports, module){\"use strict\";\nvar HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\nvar AcePopup = require(\"./autocomplete/popup\").AcePopup;\nvar AceInline = require(\"./autocomplete/inline\").AceInline;\nvar getAriaId = require(\"./autocomplete/popup\").getAriaId;\nvar util = require(\"./autocomplete/util\");\nvar lang = require(\"./lib/lang\");\nvar dom = require(\"./lib/dom\");\nvar snippetManager = require(\"./snippets\").snippetManager;\nvar config = require(\"./config\");\nvar event = require(\"./lib/event\");\nvar preventParentScroll = require(\"./lib/scroll\").preventParentScroll;\nvar destroyCompleter = function (e, editor) {\n    editor.completer && editor.completer.destroy();\n};\nvar Autocomplete = /** @class */ (function () {\n    function Autocomplete() {\n        this.autoInsert = false;\n        this.autoSelect = true;\n        this.autoShown = false;\n        this.exactMatch = false;\n        this.inlineEnabled = false;\n        this.keyboardHandler = new HashHandler();\n        this.keyboardHandler.bindKeys(this.commands);\n        this.parentNode = null;\n        this.setSelectOnHover = false;\n        this.hasSeen = new Set();\n        this.showLoadingState = false;\n        this.stickySelectionDelay = 500;\n        this.blurListener = this.blurListener.bind(this);\n        this.changeListener = this.changeListener.bind(this);\n        this.mousedownListener = this.mousedownListener.bind(this);\n        this.mousewheelListener = this.mousewheelListener.bind(this);\n        this.onLayoutChange = this.onLayoutChange.bind(this);\n        this.changeTimer = lang.delayedCall(function () {\n            this.updateCompletions(true);\n        }.bind(this));\n        this.tooltipTimer = lang.delayedCall(this.updateDocTooltip.bind(this), 50);\n        this.popupTimer = lang.delayedCall(this.$updatePopupPosition.bind(this), 50);\n        this.stickySelectionTimer = lang.delayedCall(function () {\n            this.stickySelection = true;\n        }.bind(this), this.stickySelectionDelay);\n        this.$firstOpenTimer = lang.delayedCall(/**@this{Autocomplete}*/ function () {\n            var initialPosition = this.completionProvider && this.completionProvider.initialPosition;\n            if (this.autoShown || (this.popup && this.popup.isOpen) || !initialPosition || this.editor.completers.length === 0)\n                return;\n            this.completions = new FilteredList(Autocomplete.completionsForLoading);\n            this.openPopup(this.editor, initialPosition.prefix, false);\n            this.popup.renderer.setStyle(\"ace_loading\", true);\n        }.bind(this), this.stickySelectionDelay);\n    }\n    Object.defineProperty(Autocomplete, \"completionsForLoading\", {\n        get: function () {\n            return [{\n                    caption: config.nls(\"autocomplete.loading\", \"Loading...\"),\n                    value: \"\"\n                }];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Autocomplete.prototype.$init = function () {\n        this.popup = new AcePopup(this.parentNode || document.body || document.documentElement);\n        this.popup.on(\"click\", function (e) {\n            this.insertMatch();\n            e.stop();\n        }.bind(this));\n        this.popup.focus = this.editor.focus.bind(this.editor);\n        this.popup.on(\"show\", this.$onPopupShow.bind(this));\n        this.popup.on(\"hide\", this.$onHidePopup.bind(this));\n        this.popup.on(\"select\", this.$onPopupChange.bind(this));\n        event.addListener(this.popup.container, \"mouseout\", this.mouseOutListener.bind(this));\n        this.popup.on(\"changeHoverMarker\", this.tooltipTimer.bind(null, null));\n        this.popup.renderer.on(\"afterRender\", this.$onPopupRender.bind(this));\n        return this.popup;\n    };\n    Autocomplete.prototype.$initInline = function () {\n        if (!this.inlineEnabled || this.inlineRenderer)\n            return;\n        this.inlineRenderer = new AceInline();\n        return this.inlineRenderer;\n    };\n    Autocomplete.prototype.getPopup = function () {\n        return this.popup || this.$init();\n    };\n    Autocomplete.prototype.$onHidePopup = function () {\n        if (this.inlineRenderer) {\n            this.inlineRenderer.hide();\n        }\n        this.hideDocTooltip();\n        this.stickySelectionTimer.cancel();\n        this.popupTimer.cancel();\n        this.stickySelection = false;\n    };\n    Autocomplete.prototype.$seen = function (completion) {\n        if (!this.hasSeen.has(completion) && completion && completion.completer && completion.completer.onSeen && typeof completion.completer.onSeen === \"function\") {\n            completion.completer.onSeen(this.editor, completion);\n            this.hasSeen.add(completion);\n        }\n    };\n    Autocomplete.prototype.$onPopupChange = function (hide) {\n        if (this.inlineRenderer && this.inlineEnabled) {\n            var completion = hide ? null : this.popup.getData(this.popup.getRow());\n            this.$updateGhostText(completion);\n            if (this.popup.isMouseOver && this.setSelectOnHover) {\n                this.tooltipTimer.call(null, null);\n                return;\n            }\n            this.popupTimer.schedule();\n            this.tooltipTimer.schedule();\n        }\n        else {\n            this.popupTimer.call(null, null);\n            this.tooltipTimer.call(null, null);\n        }\n    };\n    Autocomplete.prototype.$updateGhostText = function (completion) {\n        var row = this.base.row;\n        var column = this.base.column;\n        var cursorColumn = this.editor.getCursorPosition().column;\n        var prefix = this.editor.session.getLine(row).slice(column, cursorColumn);\n        if (!this.inlineRenderer.show(this.editor, completion, prefix)) {\n            this.inlineRenderer.hide();\n        }\n        else {\n            this.$seen(completion);\n        }\n    };\n    Autocomplete.prototype.$onPopupRender = function () {\n        var inlineEnabled = this.inlineRenderer && this.inlineEnabled;\n        if (this.completions && this.completions.filtered && this.completions.filtered.length > 0) {\n            for (var i = this.popup.getFirstVisibleRow(); i <= this.popup.getLastVisibleRow(); i++) {\n                var completion = this.popup.getData(i);\n                if (completion && (!inlineEnabled || completion.hideInlinePreview)) {\n                    this.$seen(completion);\n                }\n            }\n        }\n    };\n    Autocomplete.prototype.$onPopupShow = function (hide) {\n        this.$onPopupChange(hide);\n        this.stickySelection = false;\n        if (this.stickySelectionDelay >= 0)\n            this.stickySelectionTimer.schedule(this.stickySelectionDelay);\n    };\n    Autocomplete.prototype.observeLayoutChanges = function () {\n        if (this.$elements || !this.editor)\n            return;\n        window.addEventListener(\"resize\", this.onLayoutChange, { passive: true });\n        window.addEventListener(\"wheel\", this.mousewheelListener);\n        var el = this.editor.container.parentNode;\n        var elements = [];\n        while (el) {\n            elements.push(el);\n            el.addEventListener(\"scroll\", this.onLayoutChange, { passive: true });\n            el = el.parentNode;\n        }\n        this.$elements = elements;\n    };\n    Autocomplete.prototype.unObserveLayoutChanges = function () {\n        var _this = this;\n        window.removeEventListener(\"resize\", this.onLayoutChange, { passive: true });\n        window.removeEventListener(\"wheel\", this.mousewheelListener);\n        this.$elements && this.$elements.forEach(function (el) {\n            el.removeEventListener(\"scroll\", _this.onLayoutChange, { passive: true });\n        });\n        this.$elements = null;\n    };\n    Autocomplete.prototype.onLayoutChange = function () {\n        if (!this.popup.isOpen)\n            return this.unObserveLayoutChanges();\n        this.$updatePopupPosition();\n        this.updateDocTooltip();\n    };\n    Autocomplete.prototype.$updatePopupPosition = function () {\n        var editor = this.editor;\n        var renderer = editor.renderer;\n        var lineHeight = renderer.layerConfig.lineHeight;\n        var pos = renderer.$cursorLayer.getPixelPosition(this.base, true);\n        pos.left -= this.popup.getTextLeftOffset();\n        var rect = editor.container.getBoundingClientRect();\n        pos.top += rect.top - renderer.layerConfig.offset;\n        pos.left += rect.left - editor.renderer.scrollLeft;\n        pos.left += renderer.gutterWidth;\n        var posGhostText = {\n            top: pos.top,\n            left: pos.left\n        };\n        if (renderer.$ghostText && renderer.$ghostTextWidget) {\n            if (this.base.row === renderer.$ghostText.position.row) {\n                posGhostText.top += renderer.$ghostTextWidget.el.offsetHeight;\n            }\n        }\n        var editorContainerBottom = editor.container.getBoundingClientRect().bottom - lineHeight;\n        var lowestPosition = editorContainerBottom < posGhostText.top ?\n            { top: editorContainerBottom, left: posGhostText.left } :\n            posGhostText;\n        if (this.popup.tryShow(lowestPosition, lineHeight, \"bottom\")) {\n            return;\n        }\n        if (this.popup.tryShow(pos, lineHeight, \"top\")) {\n            return;\n        }\n        this.popup.show(pos, lineHeight);\n    };\n    Autocomplete.prototype.openPopup = function (editor, prefix, keepPopupPosition) {\n        this.$firstOpenTimer.cancel();\n        if (!this.popup)\n            this.$init();\n        if (this.inlineEnabled && !this.inlineRenderer)\n            this.$initInline();\n        this.popup.autoSelect = this.autoSelect;\n        this.popup.setSelectOnHover(this.setSelectOnHover);\n        var oldRow = this.popup.getRow();\n        var previousSelectedItem = this.popup.data[oldRow];\n        this.popup.setData(this.completions.filtered, this.completions.filterText);\n        if (this.editor.textInput.setAriaOptions) {\n            this.editor.textInput.setAriaOptions({\n                activeDescendant: getAriaId(this.popup.getRow()),\n                inline: this.inlineEnabled\n            });\n        }\n        editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n        var newRow;\n        if (this.stickySelection)\n            newRow = this.popup.data.indexOf(previousSelectedItem);\n        if (!newRow || newRow === -1)\n            newRow = 0;\n        this.popup.setRow(this.autoSelect ? newRow : -1);\n        if (newRow === oldRow && previousSelectedItem !== this.completions.filtered[newRow])\n            this.$onPopupChange();\n        var inlineEnabled = this.inlineRenderer && this.inlineEnabled;\n        if (newRow === oldRow && inlineEnabled) {\n            var completion = this.popup.getData(this.popup.getRow());\n            this.$updateGhostText(completion);\n        }\n        if (!keepPopupPosition) {\n            this.popup.setTheme(editor.getTheme());\n            this.popup.setFontSize(editor.getFontSize());\n            this.$updatePopupPosition();\n            if (this.tooltipNode) {\n                this.updateDocTooltip();\n            }\n        }\n        this.changeTimer.cancel();\n        this.observeLayoutChanges();\n    };\n    Autocomplete.prototype.detach = function () {\n        if (this.editor) {\n            this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n            this.editor.off(\"changeSelection\", this.changeListener);\n            this.editor.off(\"blur\", this.blurListener);\n            this.editor.off(\"mousedown\", this.mousedownListener);\n            this.editor.off(\"mousewheel\", this.mousewheelListener);\n        }\n        this.$firstOpenTimer.cancel();\n        this.changeTimer.cancel();\n        this.hideDocTooltip();\n        if (this.completionProvider) {\n            this.completionProvider.detach();\n        }\n        if (this.popup && this.popup.isOpen)\n            this.popup.hide();\n        if (this.popup && this.popup.renderer) {\n            this.popup.renderer.off(\"afterRender\", this.$onPopupRender);\n        }\n        if (this.base)\n            this.base.detach();\n        this.activated = false;\n        this.completionProvider = this.completions = this.base = null;\n        this.unObserveLayoutChanges();\n    };\n    Autocomplete.prototype.changeListener = function (e) {\n        var cursor = this.editor.selection.lead;\n        if (cursor.row != this.base.row || cursor.column < this.base.column) {\n            this.detach();\n        }\n        if (this.activated)\n            this.changeTimer.schedule();\n        else\n            this.detach();\n    };\n    Autocomplete.prototype.blurListener = function (e) {\n        var el = document.activeElement;\n        var text = this.editor.textInput.getElement();\n        var fromTooltip = e.relatedTarget && this.tooltipNode && this.tooltipNode.contains(e.relatedTarget);\n        var container = this.popup && this.popup.container;\n        if (el != text && el.parentNode != container && !fromTooltip\n            && el != this.tooltipNode && e.relatedTarget != text) {\n            this.detach();\n        }\n    };\n    Autocomplete.prototype.mousedownListener = function (e) {\n        this.detach();\n    };\n    Autocomplete.prototype.mousewheelListener = function (e) {\n        if (this.popup && !this.popup.isMouseOver)\n            this.detach();\n    };\n    Autocomplete.prototype.mouseOutListener = function (e) {\n        if (this.popup.isOpen)\n            this.$updatePopupPosition();\n    };\n    Autocomplete.prototype.goTo = function (where) {\n        this.popup.goTo(where);\n    };\n    Autocomplete.prototype.insertMatch = function (data, options) {\n        if (!data)\n            data = this.popup.getData(this.popup.getRow());\n        if (!data)\n            return false;\n        if (data.value === \"\") // Explicitly given nothing to insert, e.g. \"No suggestion state\"\n            return this.detach();\n        var completions = this.completions;\n        var result = this.getCompletionProvider().insertMatch(this.editor, data, completions.filterText, options);\n        if (this.completions == completions)\n            this.detach();\n        return result;\n    };\n    Autocomplete.prototype.showPopup = function (editor, options) {\n        if (this.editor)\n            this.detach();\n        this.activated = true;\n        this.editor = editor;\n        if (editor.completer != this) {\n            if (editor.completer)\n                editor.completer.detach();\n            editor.completer = this;\n        }\n        editor.on(\"changeSelection\", this.changeListener);\n        editor.on(\"blur\", this.blurListener);\n        editor.on(\"mousedown\", this.mousedownListener);\n        editor.on(\"mousewheel\", this.mousewheelListener);\n        this.updateCompletions(false, options);\n    };\n    Autocomplete.prototype.getCompletionProvider = function (initialPosition) {\n        if (!this.completionProvider)\n            this.completionProvider = new CompletionProvider(initialPosition);\n        return this.completionProvider;\n    };\n    Autocomplete.prototype.gatherCompletions = function (editor, callback) {\n        return this.getCompletionProvider().gatherCompletions(editor, callback);\n    };\n    Autocomplete.prototype.updateCompletions = function (keepPopupPosition, options) {\n        if (keepPopupPosition && this.base && this.completions) {\n            var pos = this.editor.getCursorPosition();\n            var prefix = this.editor.session.getTextRange({ start: this.base, end: pos });\n            if (prefix == this.completions.filterText)\n                return;\n            this.completions.setFilter(prefix);\n            if (!this.completions.filtered.length)\n                return this.detach();\n            if (this.completions.filtered.length == 1\n                && this.completions.filtered[0].value == prefix\n                && !this.completions.filtered[0].snippet)\n                return this.detach();\n            this.openPopup(this.editor, prefix, keepPopupPosition);\n            return;\n        }\n        if (options && options.matches) {\n            var pos = this.editor.getSelectionRange().start;\n            this.base = this.editor.session.doc.createAnchor(pos.row, pos.column);\n            this.base.$insertRight = true;\n            this.completions = new FilteredList(options.matches);\n            this.getCompletionProvider().completions = this.completions;\n            return this.openPopup(this.editor, \"\", keepPopupPosition);\n        }\n        var session = this.editor.getSession();\n        var pos = this.editor.getCursorPosition();\n        var prefix = util.getCompletionPrefix(this.editor);\n        this.base = session.doc.createAnchor(pos.row, pos.column - prefix.length);\n        this.base.$insertRight = true;\n        var completionOptions = {\n            exactMatch: this.exactMatch,\n            ignoreCaption: this.ignoreCaption\n        };\n        this.getCompletionProvider({\n            prefix: prefix,\n            pos: pos\n        }).provideCompletions(this.editor, completionOptions, \n        function (err, completions, finished) {\n            var filtered = completions.filtered;\n            var prefix = util.getCompletionPrefix(this.editor);\n            this.$firstOpenTimer.cancel();\n            if (finished) {\n                if (!filtered.length) {\n                    var emptyMessage = !this.autoShown && this.emptyMessage;\n                    if (typeof emptyMessage == \"function\")\n                        emptyMessage = this.emptyMessage(prefix);\n                    if (emptyMessage) {\n                        var completionsForEmpty = [{\n                                caption: emptyMessage,\n                                value: \"\"\n                            }\n                        ];\n                        this.completions = new FilteredList(completionsForEmpty);\n                        this.openPopup(this.editor, prefix, keepPopupPosition);\n                        this.popup.renderer.setStyle(\"ace_loading\", false);\n                        this.popup.renderer.setStyle(\"ace_empty-message\", true);\n                        return;\n                    }\n                    return this.detach();\n                }\n                if (filtered.length == 1 && filtered[0].value == prefix\n                    && !filtered[0].snippet)\n                    return this.detach();\n                if (this.autoInsert && !this.autoShown && filtered.length == 1)\n                    return this.insertMatch(filtered[0]);\n            }\n            this.completions = !finished && this.showLoadingState ?\n                new FilteredList(Autocomplete.completionsForLoading.concat(filtered), completions.filterText) :\n                completions;\n            this.openPopup(this.editor, prefix, keepPopupPosition);\n            this.popup.renderer.setStyle(\"ace_empty-message\", false);\n            this.popup.renderer.setStyle(\"ace_loading\", !finished);\n        }.bind(this));\n        if (this.showLoadingState && !this.autoShown && !(this.popup && this.popup.isOpen)) {\n            this.$firstOpenTimer.delay(this.stickySelectionDelay / 2);\n        }\n    };\n    Autocomplete.prototype.cancelContextMenu = function () {\n        this.editor.$mouseHandler.cancelContextMenu();\n    };\n    Autocomplete.prototype.updateDocTooltip = function () {\n        var popup = this.popup;\n        var all = this.completions && this.completions.filtered;\n        var selected = all && (all[popup.getHoveredRow()] || all[popup.getRow()]);\n        var doc = null;\n        if (!selected || !this.editor || !this.popup.isOpen)\n            return this.hideDocTooltip();\n        var completersLength = this.editor.completers.length;\n        for (var i = 0; i < completersLength; i++) {\n            var completer = this.editor.completers[i];\n            if (completer.getDocTooltip && selected.completerId === completer.id) {\n                doc = completer.getDocTooltip(selected);\n                break;\n            }\n        }\n        if (!doc && typeof selected != \"string\")\n            doc = selected;\n        if (typeof doc == \"string\")\n            doc = { docText: doc };\n        if (!doc || !(doc.docHTML || doc.docText))\n            return this.hideDocTooltip();\n        this.showDocTooltip(doc);\n    };\n    Autocomplete.prototype.showDocTooltip = function (item) {\n        if (!this.tooltipNode) {\n            this.tooltipNode = dom.createElement(\"div\");\n            this.tooltipNode.style.margin = \"0\";\n            this.tooltipNode.style.pointerEvents = \"auto\";\n            this.tooltipNode.style.overscrollBehavior = \"contain\";\n            this.tooltipNode.tabIndex = -1;\n            this.tooltipNode.onblur = this.blurListener.bind(this);\n            this.tooltipNode.onclick = this.onTooltipClick.bind(this);\n            this.tooltipNode.id = \"doc-tooltip\";\n            this.tooltipNode.setAttribute(\"role\", \"tooltip\");\n            this.tooltipNode.addEventListener(\"wheel\", preventParentScroll);\n        }\n        var theme = this.editor.renderer.theme;\n        this.tooltipNode.className = \"ace_tooltip ace_doc-tooltip \" +\n            (theme.isDark ? \"ace_dark \" : \"\") + (theme.cssClass || \"\");\n        var tooltipNode = this.tooltipNode;\n        if (item.docHTML) {\n            tooltipNode.innerHTML = item.docHTML;\n        }\n        else if (item.docText) {\n            tooltipNode.textContent = item.docText;\n        }\n        if (!tooltipNode.parentNode)\n            this.popup.container.appendChild(this.tooltipNode);\n        var popup = this.popup;\n        var rect = popup.container.getBoundingClientRect();\n        var targetWidth = 400;\n        var targetHeight = 300;\n        var scrollBarSize = popup.renderer.scrollBar.width || 10;\n        var leftSize = rect.left;\n        var rightSize = window.innerWidth - rect.right - scrollBarSize;\n        var topSize = popup.isTopdown ? rect.top : window.innerHeight - scrollBarSize - rect.bottom;\n        var scores = [\n            Math.min(rightSize / targetWidth, 1),\n            Math.min(leftSize / targetWidth, 1),\n            Math.min(topSize / targetHeight * 0.9),\n        ];\n        var max = Math.max.apply(Math, scores);\n        var tooltipStyle = tooltipNode.style;\n        tooltipStyle.display = \"block\";\n        if (max == scores[0]) {\n            tooltipStyle.left = (rect.right + 1) + \"px\";\n            tooltipStyle.right = \"\";\n            tooltipStyle.maxWidth = targetWidth * max + \"px\";\n            tooltipStyle.top = rect.top + \"px\";\n            tooltipStyle.bottom = \"\";\n            tooltipStyle.maxHeight = Math.min(window.innerHeight - scrollBarSize - rect.top, targetHeight) + \"px\";\n        }\n        else if (max == scores[1]) {\n            tooltipStyle.right = window.innerWidth - rect.left + \"px\";\n            tooltipStyle.left = \"\";\n            tooltipStyle.maxWidth = targetWidth * max + \"px\";\n            tooltipStyle.top = rect.top + \"px\";\n            tooltipStyle.bottom = \"\";\n            tooltipStyle.maxHeight = Math.min(window.innerHeight - scrollBarSize - rect.top, targetHeight) + \"px\";\n        }\n        else if (max == scores[2]) {\n            tooltipStyle.left = window.innerWidth - rect.left + \"px\";\n            tooltipStyle.maxWidth = Math.min(targetWidth, window.innerWidth) + \"px\";\n            if (popup.isTopdown) {\n                tooltipStyle.top = rect.bottom + \"px\";\n                tooltipStyle.left = rect.left + \"px\";\n                tooltipStyle.right = \"\";\n                tooltipStyle.bottom = \"\";\n                tooltipStyle.maxHeight = Math.min(window.innerHeight - scrollBarSize - rect.bottom, targetHeight) + \"px\";\n            }\n            else {\n                tooltipStyle.top = popup.container.offsetTop - tooltipNode.offsetHeight + \"px\";\n                tooltipStyle.left = rect.left + \"px\";\n                tooltipStyle.right = \"\";\n                tooltipStyle.bottom = \"\";\n                tooltipStyle.maxHeight = Math.min(popup.container.offsetTop, targetHeight) + \"px\";\n            }\n        }\n    };\n    Autocomplete.prototype.hideDocTooltip = function () {\n        this.tooltipTimer.cancel();\n        if (!this.tooltipNode)\n            return;\n        var el = this.tooltipNode;\n        if (!this.editor.isFocused() && document.activeElement == el)\n            this.editor.focus();\n        this.tooltipNode = null;\n        if (el.parentNode)\n            el.parentNode.removeChild(el);\n    };\n    Autocomplete.prototype.onTooltipClick = function (e) {\n        var a = e.target;\n        while (a && a != this.tooltipNode) {\n            if (a.nodeName == \"A\" && a.href) {\n                a.rel = \"noreferrer\";\n                a.target = \"_blank\";\n                break;\n            }\n            a = a.parentNode;\n        }\n    };\n    Autocomplete.prototype.destroy = function () {\n        this.detach();\n        if (this.popup) {\n            this.popup.destroy();\n            var el = this.popup.container;\n            if (el && el.parentNode)\n                el.parentNode.removeChild(el);\n        }\n        if (this.editor && this.editor.completer == this) {\n            this.editor.off(\"destroy\", destroyCompleter);\n            this.editor.completer = null;\n        }\n        this.inlineRenderer = this.popup = this.editor = null;\n    };\n    Autocomplete.for = function (editor) {\n        if (editor.completer instanceof Autocomplete) {\n            return editor.completer;\n        }\n        if (editor.completer) {\n            editor.completer.destroy();\n            editor.completer = null;\n        }\n        if (config.get(\"sharedPopups\")) {\n            if (!Autocomplete[\"$sharedInstance\"])\n                Autocomplete[\"$sharedInstance\"] = new Autocomplete();\n            editor.completer = Autocomplete[\"$sharedInstance\"];\n        }\n        else {\n            editor.completer = new Autocomplete();\n            editor.once(\"destroy\", destroyCompleter);\n        }\n        return editor.completer;\n    };\n    return Autocomplete;\n}());\nAutocomplete.prototype.commands = {\n    \"Up\": function (editor) { editor.completer.goTo(\"up\"); },\n    \"Down\": function (editor) { editor.completer.goTo(\"down\"); },\n    \"Ctrl-Up|Ctrl-Home\": function (editor) { editor.completer.goTo(\"start\"); },\n    \"Ctrl-Down|Ctrl-End\": function (editor) { editor.completer.goTo(\"end\"); },\n    \"Esc\": function (editor) { editor.completer.detach(); },\n    \"Return\": function (editor) { return editor.completer.insertMatch(); },\n    \"Shift-Return\": function (editor) { editor.completer.insertMatch(null, { deleteSuffix: true }); },\n    \"Tab\": function (editor) {\n        var result = editor.completer.insertMatch();\n        if (!result && !editor.tabstopManager)\n            editor.completer.goTo(\"down\");\n        else\n            return result;\n    },\n    \"Backspace\": function (editor) {\n        editor.execCommand(\"backspace\");\n        var prefix = util.getCompletionPrefix(editor);\n        if (!prefix && editor.completer)\n            editor.completer.detach();\n    },\n    \"PageUp\": function (editor) { editor.completer.popup.gotoPageUp(); },\n    \"PageDown\": function (editor) { editor.completer.popup.gotoPageDown(); }\n};\nAutocomplete.startCommand = {\n    name: \"startAutocomplete\",\n    exec: function (editor, options) {\n        var completer = Autocomplete.for(editor);\n        completer.autoInsert = false;\n        completer.autoSelect = true;\n        completer.autoShown = false;\n        completer.showPopup(editor, options);\n        completer.cancelContextMenu();\n    },\n    bindKey: \"Ctrl-Space|Ctrl-Shift-Space|Alt-Space\"\n};\nvar CompletionProvider = /** @class */ (function () {\n    function CompletionProvider(initialPosition) {\n        this.initialPosition = initialPosition;\n        this.active = true;\n    }\n    CompletionProvider.prototype.insertByIndex = function (editor, index, options) {\n        if (!this.completions || !this.completions.filtered) {\n            return false;\n        }\n        return this.insertMatch(editor, this.completions.filtered[index], options);\n    };\n    CompletionProvider.prototype.insertMatch = function (editor, data, options) {\n        if (!data)\n            return false;\n        editor.startOperation({ command: { name: \"insertMatch\" } });\n        if (data.completer && data.completer.insertMatch) {\n            data.completer.insertMatch(editor, data);\n        }\n        else {\n            if (!this.completions)\n                return false;\n            var replaceBefore = this.completions.filterText.length;\n            var replaceAfter = 0;\n            if (data.range && data.range.start.row === data.range.end.row) {\n                replaceBefore -= this.initialPosition.prefix.length;\n                replaceBefore += this.initialPosition.pos.column - data.range.start.column;\n                replaceAfter += data.range.end.column - this.initialPosition.pos.column;\n            }\n            if (replaceBefore || replaceAfter) {\n                var ranges;\n                if (editor.selection.getAllRanges) {\n                    ranges = editor.selection.getAllRanges();\n                }\n                else {\n                    ranges = [editor.getSelectionRange()];\n                }\n                for (var i = 0, range; range = ranges[i]; i++) {\n                    range.start.column -= replaceBefore;\n                    range.end.column += replaceAfter;\n                    editor.session.remove(range);\n                }\n            }\n            if (data.snippet) {\n                snippetManager.insertSnippet(editor, data.snippet);\n            }\n            else {\n                this.$insertString(editor, data);\n            }\n            if (data.completer && data.completer.onInsert && typeof data.completer.onInsert == \"function\") {\n                data.completer.onInsert(editor, data);\n            }\n            if (data.command && data.command === \"startAutocomplete\") {\n                editor.execCommand(data.command);\n            }\n        }\n        editor.endOperation();\n        return true;\n    };\n    CompletionProvider.prototype.$insertString = function (editor, data) {\n        var text = data.value || data;\n        editor.execCommand(\"insertstring\", text);\n    };\n    CompletionProvider.prototype.gatherCompletions = function (editor, callback) {\n        var session = editor.getSession();\n        var pos = editor.getCursorPosition();\n        var prefix = util.getCompletionPrefix(editor);\n        var matches = [];\n        this.completers = editor.completers;\n        var total = editor.completers.length;\n        editor.completers.forEach(function (completer, i) {\n            completer.getCompletions(editor, session, pos, prefix, function (err, results) {\n                if (completer.hideInlinePreview)\n                    results = results.map(function (result) {\n                        return Object.assign(result, { hideInlinePreview: completer.hideInlinePreview });\n                    });\n                if (!err && results)\n                    matches = matches.concat(results);\n                callback(null, {\n                    prefix: util.getCompletionPrefix(editor),\n                    matches: matches,\n                    finished: (--total === 0)\n                });\n            });\n        });\n        return true;\n    };\n    CompletionProvider.prototype.provideCompletions = function (editor, options, callback) {\n        var processResults = function (results) {\n            var prefix = results.prefix;\n            var matches = results.matches;\n            this.completions = new FilteredList(matches);\n            if (options.exactMatch)\n                this.completions.exactMatch = true;\n            if (options.ignoreCaption)\n                this.completions.ignoreCaption = true;\n            this.completions.setFilter(prefix);\n            if (results.finished || this.completions.filtered.length)\n                callback(null, this.completions, results.finished);\n        }.bind(this);\n        var isImmediate = true;\n        var immediateResults = null;\n        this.gatherCompletions(editor, function (err, results) {\n            if (!this.active) {\n                return;\n            }\n            if (err) {\n                callback(err, [], true);\n                this.detach();\n            }\n            var prefix = results.prefix;\n            if (prefix.indexOf(results.prefix) !== 0)\n                return;\n            if (isImmediate) {\n                immediateResults = results;\n                return;\n            }\n            processResults(results);\n        }.bind(this));\n        isImmediate = false;\n        if (immediateResults) {\n            var results = immediateResults;\n            immediateResults = null;\n            processResults(results);\n        }\n    };\n    CompletionProvider.prototype.detach = function () {\n        this.active = false;\n        this.completers && this.completers.forEach(function (completer) {\n            if (typeof completer.cancel === \"function\") {\n                completer.cancel();\n            }\n        });\n    };\n    return CompletionProvider;\n}());\nvar FilteredList = /** @class */ (function () {\n    function FilteredList(array, filterText) {\n        this.all = array;\n        this.filtered = array;\n        this.filterText = filterText || \"\";\n        this.exactMatch = false;\n        this.ignoreCaption = false;\n    }\n    FilteredList.prototype.setFilter = function (str) {\n        if (str.length > this.filterText && str.lastIndexOf(this.filterText, 0) === 0)\n            var matches = this.filtered;\n        else\n            var matches = this.all;\n        this.filterText = str;\n        matches = this.filterCompletions(matches, this.filterText);\n        matches = matches.sort(function (a, b) {\n            return b.exactMatch - a.exactMatch || b.$score - a.$score\n                || (a.caption || a.value).localeCompare(b.caption || b.value);\n        });\n        var prev = null;\n        matches = matches.filter(function (item) {\n            var caption = item.snippet || item.caption || item.value;\n            if (caption === prev)\n                return false;\n            prev = caption;\n            return true;\n        });\n        this.filtered = matches;\n    };\n    FilteredList.prototype.filterCompletions = function (items, needle) {\n        var results = [];\n        var upper = needle.toUpperCase();\n        var lower = needle.toLowerCase();\n        loop: for (var i = 0, item; item = items[i]; i++) {\n            if (item.skipFilter) {\n                item.$score = item.score;\n                results.push(item);\n                continue;\n            }\n            var caption = (!this.ignoreCaption && item.caption) || item.value || item.snippet;\n            if (!caption)\n                continue;\n            var lastIndex = -1;\n            var matchMask = 0;\n            var penalty = 0;\n            var index, distance;\n            if (this.exactMatch) {\n                if (needle !== caption.substr(0, needle.length))\n                    continue loop;\n            }\n            else {\n                var fullMatchIndex = caption.toLowerCase().indexOf(lower);\n                if (fullMatchIndex > -1) {\n                    penalty = fullMatchIndex;\n                }\n                else {\n                    for (var j = 0; j < needle.length; j++) {\n                        var i1 = caption.indexOf(lower[j], lastIndex + 1);\n                        var i2 = caption.indexOf(upper[j], lastIndex + 1);\n                        index = (i1 >= 0) ? ((i2 < 0 || i1 < i2) ? i1 : i2) : i2;\n                        if (index < 0)\n                            continue loop;\n                        distance = index - lastIndex - 1;\n                        if (distance > 0) {\n                            if (lastIndex === -1)\n                                penalty += 10;\n                            penalty += distance;\n                            matchMask = matchMask | (1 << j);\n                        }\n                        lastIndex = index;\n                    }\n                }\n            }\n            item.matchMask = matchMask;\n            item.exactMatch = penalty ? 0 : 1;\n            item.$score = (item.score || 0) - penalty;\n            results.push(item);\n        }\n        return results;\n    };\n    return FilteredList;\n}());\nexports.Autocomplete = Autocomplete;\nexports.CompletionProvider = CompletionProvider;\nexports.FilteredList = FilteredList;\n\n});\n\nace.define(\"ace/marker_group\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nvar MarkerGroup = /** @class */ (function () {\n    function MarkerGroup(session, options) {\n        if (options)\n            this.markerType = options.markerType;\n        this.markers = [];\n        this.session = session;\n        session.addDynamicMarker(this);\n    }\n    MarkerGroup.prototype.getMarkerAtPosition = function (pos) {\n        return this.markers.find(function (marker) {\n            return marker.range.contains(pos.row, pos.column);\n        });\n    };\n    MarkerGroup.prototype.markersComparator = function (a, b) {\n        return a.range.start.row - b.range.start.row;\n    };\n    MarkerGroup.prototype.setMarkers = function (markers) {\n        this.markers = markers.sort(this.markersComparator).slice(0, this.MAX_MARKERS);\n        this.session._signal(\"changeBackMarker\");\n    };\n    MarkerGroup.prototype.update = function (html, markerLayer, session, config) {\n        if (!this.markers || !this.markers.length)\n            return;\n        var visibleRangeStartRow = config.firstRow, visibleRangeEndRow = config.lastRow;\n        var foldLine;\n        var markersOnOneLine = 0;\n        var lastRow = 0;\n        for (var i = 0; i < this.markers.length; i++) {\n            var marker = this.markers[i];\n            if (marker.range.end.row < visibleRangeStartRow)\n                continue;\n            if (marker.range.start.row > visibleRangeEndRow)\n                continue;\n            if (marker.range.start.row === lastRow) {\n                markersOnOneLine++;\n            }\n            else {\n                lastRow = marker.range.start.row;\n                markersOnOneLine = 0;\n            }\n            if (markersOnOneLine > 200) {\n                continue;\n            }\n            var markerVisibleRange = marker.range.clipRows(visibleRangeStartRow, visibleRangeEndRow);\n            if (markerVisibleRange.start.row === markerVisibleRange.end.row\n                && markerVisibleRange.start.column === markerVisibleRange.end.column) {\n                continue; // visible range is empty\n            }\n            var screenRange = markerVisibleRange.toScreenRange(session);\n            if (screenRange.isEmpty()) {\n                foldLine = session.getNextFoldLine(markerVisibleRange.end.row, foldLine);\n                if (foldLine && foldLine.end.row > markerVisibleRange.end.row) {\n                    visibleRangeStartRow = foldLine.end.row;\n                }\n                continue;\n            }\n            if (this.markerType === \"fullLine\") {\n                markerLayer.drawFullLineMarker(html, screenRange, marker.className, config);\n            }\n            else if (screenRange.isMultiLine()) {\n                if (this.markerType === \"line\")\n                    markerLayer.drawMultiLineMarker(html, screenRange, marker.className, config);\n                else\n                    markerLayer.drawTextMarker(html, screenRange, marker.className, config);\n            }\n            else {\n                markerLayer.drawSingleLineMarker(html, screenRange, marker.className + \" ace_br15\", config);\n            }\n        }\n    };\n    return MarkerGroup;\n}());\nMarkerGroup.prototype.MAX_MARKERS = 10000;\nexports.MarkerGroup = MarkerGroup;\n\n});\n\nace.define(\"ace/autocomplete/text_completer\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){var Range = require(\"../range\").Range;\nvar splitRegex = /[^a-zA-Z_0-9\\$\\-\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w]+/;\nfunction getWordIndex(doc, pos) {\n    var textBefore = doc.getTextRange(Range.fromPoints({\n        row: 0,\n        column: 0\n    }, pos));\n    return textBefore.split(splitRegex).length - 1;\n}\nfunction wordDistance(doc, pos) {\n    var prefixPos = getWordIndex(doc, pos);\n    var words = doc.getValue().split(splitRegex);\n    var wordScores = Object.create(null);\n    var currentWord = words[prefixPos];\n    words.forEach(function (word, idx) {\n        if (!word || word === currentWord)\n            return;\n        var distance = Math.abs(prefixPos - idx);\n        var score = words.length - distance;\n        if (wordScores[word]) {\n            wordScores[word] = Math.max(score, wordScores[word]);\n        }\n        else {\n            wordScores[word] = score;\n        }\n    });\n    return wordScores;\n}\nexports.getCompletions = function (editor, session, pos, prefix, callback) {\n    var wordScore = wordDistance(session, pos);\n    var wordList = Object.keys(wordScore);\n    callback(null, wordList.map(function (word) {\n        return {\n            caption: word,\n            value: word,\n            score: wordScore[word],\n            meta: \"local\"\n        };\n    }));\n};\n\n});\n\nace.define(\"ace/ext/language_tools\",[\"require\",\"exports\",\"module\",\"ace/snippets\",\"ace/autocomplete\",\"ace/config\",\"ace/lib/lang\",\"ace/autocomplete/util\",\"ace/marker_group\",\"ace/autocomplete/text_completer\",\"ace/editor\",\"ace/config\"], function(require, exports, module){/**\n * ## Language Tools extension for Ace Editor\n *\n * Provides autocompletion, snippets, and language intelligence features for the Ace code editor.\n * This extension integrates multiple completion providers including keyword completion, snippet expansion,\n * and text-based completion to enhance the coding experience with contextual suggestions and automated code generation.\n *\n * **Configuration Options:**\n * - `enableBasicAutocompletion`: Enable/disable basic completion functionality\n * - `enableLiveAutocompletion`: Enable/disable real-time completion suggestions\n * - `enableSnippets`: Enable/disable snippet expansion with Tab key\n * - `liveAutocompletionDelay`: Delay before showing live completion popup\n * - `liveAutocompletionThreshold`: Minimum prefix length to trigger completion\n *\n * **Usage:**\n * ```javascript\n * editor.setOptions({\n *   enableBasicAutocompletion: true,\n *   enableLiveAutocompletion: true,\n *   enableSnippets: true\n * });\n * ```\n *\n * @module\n */\n\"use strict\";\nvar snippetManager = require(\"../snippets\").snippetManager;\nvar Autocomplete = require(\"../autocomplete\").Autocomplete;\nvar config = require(\"../config\");\nvar lang = require(\"../lib/lang\");\nvar util = require(\"../autocomplete/util\");\nvar MarkerGroup = require(\"../marker_group\").MarkerGroup;\nvar textCompleter = require(\"../autocomplete/text_completer\");\nvar keyWordCompleter = {\n    getCompletions: function (editor, session, pos, prefix, callback) {\n        if (session.$mode.completer) {\n            return session.$mode.completer.getCompletions(editor, session, pos, prefix, callback);\n        }\n        var state = editor.session.getState(pos.row);\n        var completions = session.$mode.getCompletions(state, session, pos, prefix);\n        completions = completions.map(function (el) {\n            el.completerId = keyWordCompleter.id;\n            return el;\n        });\n        callback(null, completions);\n    },\n    id: \"keywordCompleter\"\n};\nvar transformSnippetTooltip = function (str) {\n    var record = {};\n    return str.replace(/\\${(\\d+)(:(.*?))?}/g, function (_, p1, p2, p3) {\n        return (record[p1] = p3 || '');\n    }).replace(/\\$(\\d+?)/g, function (_, p1) {\n        return record[p1];\n    });\n};\nvar snippetCompleter = {\n    getCompletions: function (editor, session, pos, prefix, callback) {\n        var scopes = [];\n        var token = session.getTokenAt(pos.row, pos.column);\n        if (token && token.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\\.xml$/))\n            scopes.push('html-tag');\n        else\n            scopes = snippetManager.getActiveScopes(editor);\n        var snippetMap = snippetManager.snippetMap;\n        var completions = [];\n        scopes.forEach(function (scope) {\n            var snippets = snippetMap[scope] || [];\n            for (var i = snippets.length; i--;) {\n                var s = snippets[i];\n                var caption = s.name || s.tabTrigger;\n                if (!caption)\n                    continue;\n                completions.push({\n                    caption: caption,\n                    snippet: s.content,\n                    meta: s.tabTrigger && !s.name ? s.tabTrigger + \"\\u21E5 \" : \"snippet\",\n                    completerId: snippetCompleter.id\n                });\n            }\n        }, this);\n        callback(null, completions);\n    },\n    getDocTooltip: function (item) {\n        if (item.snippet && !item.docHTML) {\n            item.docHTML = [\n                \"<b>\", lang.escapeHTML(item.caption), \"</b>\", \"<hr></hr>\",\n                lang.escapeHTML(transformSnippetTooltip(item.snippet))\n            ].join(\"\");\n        }\n    },\n    id: \"snippetCompleter\"\n};\nvar completers = [snippetCompleter, textCompleter, keyWordCompleter];\nexports.setCompleters = function (val) {\n    completers.length = 0;\n    if (val)\n        completers.push.apply(completers, val);\n};\nexports.addCompleter = function (completer) {\n    completers.push(completer);\n};\nexports.textCompleter = textCompleter;\nexports.keyWordCompleter = keyWordCompleter;\nexports.snippetCompleter = snippetCompleter;\nvar expandSnippet = {\n    name: \"expandSnippet\",\n    exec: function (editor) {\n        return snippetManager.expandWithTab(editor);\n    },\n    bindKey: \"Tab\"\n};\nvar onChangeMode = function (e, editor) {\n    loadSnippetsForMode(editor.session.$mode);\n};\nvar loadSnippetsForMode = function (mode) {\n    if (typeof mode == \"string\")\n        mode = config.$modes[mode];\n    if (!mode)\n        return;\n    if (!snippetManager.files)\n        snippetManager.files = {};\n    loadSnippetFile(mode.$id, mode.snippetFileId);\n    if (mode.modes)\n        mode.modes.forEach(loadSnippetsForMode);\n};\nvar loadSnippetFile = function (id, snippetFilePath) {\n    if (!snippetFilePath || !id || snippetManager.files[id])\n        return;\n    snippetManager.files[id] = {};\n    config.loadModule(snippetFilePath, function (m) {\n        if (!m)\n            return;\n        snippetManager.files[id] = m;\n        if (!m.snippets && m.snippetText)\n            m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n        snippetManager.register(m.snippets || [], m.scope);\n        if (m.includeScopes) {\n            snippetManager.snippetMap[m.scope].includeScopes = m.includeScopes;\n            m.includeScopes.forEach(function (x) {\n                loadSnippetsForMode(\"ace/mode/\" + x);\n            });\n        }\n    });\n};\nvar doLiveAutocomplete = function (e) {\n    var editor = e.editor;\n    var hasCompleter = editor.completer && editor.completer.activated;\n    if (e.command.name === \"backspace\") {\n        if (hasCompleter && !util.getCompletionPrefix(editor))\n            editor.completer.detach();\n    }\n    else if (e.command.name === \"insertstring\" && !hasCompleter) {\n        lastExecEvent = e;\n        var delay = e.editor.$liveAutocompletionDelay;\n        if (delay) {\n            liveAutocompleteTimer.delay(delay);\n        }\n        else {\n            showLiveAutocomplete(e);\n        }\n    }\n};\nvar lastExecEvent;\nvar liveAutocompleteTimer = lang.delayedCall(function () {\n    showLiveAutocomplete(lastExecEvent);\n}, 0);\nvar showLiveAutocomplete = function (e) {\n    var editor = e.editor;\n    var prefix = util.getCompletionPrefix(editor);\n    var previousChar = e.args;\n    var triggerAutocomplete = util.triggerAutocomplete(editor, previousChar);\n    if (prefix && prefix.length >= editor.$liveAutocompletionThreshold || triggerAutocomplete) {\n        var completer = Autocomplete.for(editor);\n        completer.autoShown = true;\n        completer.showPopup(editor);\n    }\n};\nvar Editor = require(\"../editor\").Editor;\nrequire(\"../config\").defineOptions(Editor.prototype, \"editor\", {\n    enableBasicAutocompletion: {\n        set: function (val) {\n            if (val) {\n                Autocomplete.for(this);\n                if (!this.completers)\n                    this.completers = Array.isArray(val) ? val : completers;\n                this.commands.addCommand(Autocomplete.startCommand);\n            }\n            else {\n                this.commands.removeCommand(Autocomplete.startCommand);\n            }\n        },\n        value: false\n    },\n    enableLiveAutocompletion: {\n        set: function (val) {\n            if (val) {\n                if (!this.completers)\n                    this.completers = Array.isArray(val) ? val : completers;\n                this.commands.on('afterExec', doLiveAutocomplete);\n            }\n            else {\n                this.commands.off('afterExec', doLiveAutocomplete);\n            }\n        },\n        value: false\n    },\n    liveAutocompletionDelay: {\n        initialValue: 0\n    },\n    liveAutocompletionThreshold: {\n        initialValue: 0\n    },\n    enableSnippets: {\n        set: function (val) {\n            if (val) {\n                this.commands.addCommand(expandSnippet);\n                this.on(\"changeMode\", onChangeMode);\n                onChangeMode(null, this);\n            }\n            else {\n                this.commands.removeCommand(expandSnippet);\n                this.off(\"changeMode\", onChangeMode);\n            }\n        },\n        value: false\n    }\n});\nexports.MarkerGroup = MarkerGroup;\n\n});                (function() {\n                    ace.require([\"ace/ext/language_tools\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            ","/**\n * NCCodePane - ACE editor wrapper component\n * Integrates ACE editor with ParserService, markers, and time gutter\n */\n\nimport { BaseComponent } from './BaseComponent';\nimport { getServiceRegistry } from '@core/ServiceRegistry';\nimport { SERVICE_TOKENS, type ChannelId, type FaultDetail } from '@core/types';\nimport type { StateService } from '@services/StateService';\nimport type { ParserService } from '@services/ParserService';\nimport type { EventBus } from '@services/EventBus';\nimport ace from 'ace-builds';\nimport { registerNcMode } from '../ace/mode-nc';\nimport { TimeGutter } from '../ace/TimeGutter';\n\n// Import ACE modules\nimport 'ace-builds/src-noconflict/mode-text';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/ext-language_tools';\n\nexport class NCCodePane extends BaseComponent {\n  private channelId!: ChannelId;\n  private editor?: ace.Ace.Editor;\n  private programSession?: ace.Ace.EditSession;\n  private executedSession?: ace.Ace.EditSession;\n  private stateService!: StateService;\n  private parserService!: ParserService;\n  private eventBus!: EventBus;\n  private parseDebounceTimer?: number;\n  private timeGutterSide: 'left' | 'right' = 'right';\n  private activeTab: 'program' | 'executed' = 'program';\n  private suppressProgramChange = false;\n  private timeGutter: TimeGutter;\n\n  constructor() {\n    super();\n    this.timeGutter = new TimeGutter();\n  }\n\n  static get observedAttributes() {\n    return ['channel-id', 'time-gutter-side', 'active-tab'];\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'channel-id':\n        this.channelId = newValue;\n        this.loadChannelProgram();\n        break;\n      case 'time-gutter-side':\n        this.timeGutterSide = (newValue as 'left' | 'right') || 'right';\n        this.updateTimeGutterPosition();\n        break;\n      case 'active-tab':\n        this.activeTab = (newValue as 'program' | 'executed') || 'program';\n        this.switchTab();\n        break;\n    }\n  }\n\n  protected onConnected(): void {\n    const registry = getServiceRegistry();\n    this.stateService = registry.get<StateService>(SERVICE_TOKENS.StateService);\n    this.parserService = registry.get<ParserService>(SERVICE_TOKENS.ParserService);\n    this.eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n\n    this.channelId = this.getAttribute('channel-id') || 'channel-1';\n    this.timeGutterSide = (this.getAttribute('time-gutter-side') as 'left' | 'right') || 'right';\n\n    registerNcMode();\n    this.setupEventListeners();\n    this.initializeEditor();\n  }\n\n  protected onDisconnected(): void {\n    if (this.editor) {\n      this.editor.destroy();\n    }\n    if (this.parseDebounceTimer) {\n      window.clearTimeout(this.parseDebounceTimer);\n    }\n  }\n\n  private setupEventListeners(): void {\n    this.eventBus.on('parse:completed', (event) => {\n      const payload = event.payload as {\n        channelId: ChannelId;\n        result: { faultDetected: boolean; faults?: FaultDetail[] };\n        artifacts?: any;\n      };\n      if (payload.channelId === this.channelId) {\n        this.updateMarkers(payload.result.faults);\n        if (payload.artifacts?.timingMetadata) {\n             this.timeGutter.updateTimes(payload.artifacts.timingMetadata);\n             this.programSession?.bgTokenizer.fireUpdateEvent(0, this.programSession.getLength());\n        }\n      }\n    });\n\n    this.eventBus.on('channel:state-changed', (event) => {\n      const payload = event.payload as { channelId: ChannelId };\n      if (payload.channelId === this.channelId) {\n        this.loadChannelProgram();\n      }\n    });\n\n    // Listen for keyword clicks to scroll to line\n    this.eventBus.on('keyword:clicked', (event) => {\n      const payload = event.payload as { channelId: ChannelId; lineNumber: number };\n      if (payload.channelId === this.channelId) {\n        this.scrollToLine(payload.lineNumber);\n      }\n    });\n\n    // Listen for tool clicks to scroll to line\n    this.eventBus.on('tool:clicked', (event) => {\n      const payload = event.payload as { channelId: ChannelId; lineNumber: number };\n      if (payload.channelId === this.channelId) {\n        this.scrollToLine(payload.lineNumber);\n      }\n    });\n  }\n\n  private initializeEditor(): void {\n    const editorContainer = this.query<HTMLDivElement>('.ace-editor-container');\n    if (!editorContainer) return;\n\n    // Initialize ACE editor\n    this.editor = ace.edit(editorContainer, {\n      theme: 'ace/theme/monokai',\n      fontSize: 14,\n      showPrintMargin: false,\n      highlightActiveLine: true,\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: false,\n    });\n\n    // Create sessions\n    const EditSession = ace.require('ace/edit_session').EditSession;\n    this.programSession = new EditSession('', 'ace/mode/nc');\n    (this.programSession as any).gutterRenderer = this.timeGutter;\n    this.executedSession = new EditSession('', 'ace/mode/nc');\n\n    // Set up event handlers for program session\n    this.programSession!.on('change', () => {\n        if (this.activeTab === 'program') {\n            this.handleProgramChange();\n        }\n    });\n\n    this.programSession!.on('changeSelection', () => {\n         if (this.activeTab === 'program') {\n            this.handleSelectionChange();\n         }\n    });\n\n    // Load initial program\n    this.loadChannelProgram();\n    this.switchTab();\n  }\n\n  private loadChannelProgram(): void {\n    if (!this.programSession || !this.channelId) return;\n\n    const channel = this.stateService.getChannel(this.channelId);\n    if (channel) {\n      const currentValue = this.programSession.getValue();\n      if (currentValue !== channel.program) {\n        this.suppressProgramChange = true;\n        this.programSession.setValue(channel.program || '');\n        this.suppressProgramChange = false;\n      }\n      \n      if (channel.executedResult && this.executedSession) {\n          // TODO: Format executed result properly\n          // this.executedSession.setValue(channel.executedResult.program);\n      }\n    }\n  }\n\n  private handleProgramChange(): void {\n    if (!this.programSession) return;\n\n    const program = this.programSession.getValue();\n\n    if (this.suppressProgramChange) {\n      return;\n    }\n\n    // Update channel state\n    this.stateService.updateChannel(this.channelId, { program });\n\n    // Debounce parsing\n    if (this.parseDebounceTimer) {\n      window.clearTimeout(this.parseDebounceTimer);\n    }\n\n    this.parseDebounceTimer = window.setTimeout(() => {\n      this.parseProgram(program);\n    }, 500);\n  }\n\n  private async parseProgram(program: string): Promise<void> {\n    try {\n      const { result, artifacts } = await this.parserService.parse(this.channelId, program);\n\n      // Update channel with parse results\n      this.stateService.updateChannel(this.channelId, {\n        parseResult: result,\n        parseArtifacts: artifacts,\n      });\n    } catch (error) {\n      console.error('Failed to parse program:', error);\n    }\n  }\n\n  private handleSelectionChange(): void {\n    if (!this.editor) return;\n\n    const selection = this.editor.getSelection();\n    const cursor = selection.getCursor();\n\n    // Emit selection change event\n    this.eventBus.emit({\n      type: 'editor:selection-changed',\n      timestamp: Date.now(),\n      payload: {\n        channelId: this.channelId,\n        line: cursor.row + 1,\n        column: cursor.column,\n      },\n    });\n  }\n\n  private updateMarkers(faults?: FaultDetail[]): void {\n    if (!this.programSession) return;\n\n    const session = this.programSession;\n\n    // Clear existing markers\n    const markers = session.getMarkers(false);\n    if (markers) {\n      Object.keys(markers).forEach((id) => {\n        session.removeMarker(parseInt(id, 10));\n      });\n    }\n\n    // Clear annotations\n    session.clearAnnotations();\n\n    if (!faults || faults.length === 0) return;\n\n    // Add new markers and annotations\n    const annotations: ace.Ace.Annotation[] = [];\n\n    faults.forEach((fault) => {\n      const row = fault.lineNumber - 1; // ACE uses 0-based indexing\n\n      // Add marker for the line\n      const Range = ace.require('ace/range').Range;\n      const range = new Range(row, 0, row, Infinity);\n      const className = fault.severity === 'ERROR' ? 'ace-error-marker' : 'ace-warning-marker';\n      session.addMarker(range, className, 'fullLine', false);\n\n      // Add annotation\n      annotations.push({\n        row,\n        column: fault.column,\n        text: fault.message,\n        type: fault.severity === 'ERROR' ? 'error' : 'warning',\n      });\n    });\n\n    session.setAnnotations(annotations);\n  }\n\n  private updateTimeGutterPosition(): void {\n    // TODO: Implement custom time gutter renderer\n    // This will show cycle times on the left or right side\n    console.log('Time gutter position:', this.timeGutterSide);\n  }\n\n  private switchTab(): void {\n    if (!this.editor || !this.programSession || !this.executedSession) return;\n\n    if (this.activeTab === 'executed') {\n      // Load executed program\n      this.editor.setSession(this.executedSession);\n      this.editor.setReadOnly(true);\n    } else {\n      // Load program for editing\n      this.editor.setSession(this.programSession);\n      this.editor.setReadOnly(false);\n    }\n\n    this.updateTabStyles();\n  }\n\n  private updateTabStyles() {\n      const tabs = this.shadow.querySelectorAll('.tab');\n      tabs.forEach(tab => {\n          if (tab.getAttribute('data-tab') === this.activeTab) {\n              tab.classList.add('active');\n          } else {\n              tab.classList.remove('active');\n          }\n      });\n  }\n\n  /**\n   * Scroll to a specific line\n   */\n  scrollToLine(lineNumber: number): void {\n    if (!this.editor) return;\n\n    this.editor.scrollToLine(lineNumber - 1, true, true, () => {\n      // Highlight the line temporarily\n      this.editor?.gotoLine(lineNumber, 0, true);\n    });\n  }\n\n  /**\n   * Get current program content\n   */\n  getValue(): string {\n    return this.programSession?.getValue() || '';\n  }\n\n  /**\n   * Set program content\n   */\n  setValue(value: string): void {\n    if (this.programSession) {\n      this.programSession.setValue(value);\n    }\n  }\n\n  protected render(): void {\n    this.shadow.innerHTML = '';\n    this.shadow.appendChild(this.createStyles(this.getStyles()));\n\n    const container = document.createElement('div');\n    container.className = 'nc-code-pane';\n\n    // Tab bar\n    const tabBar = this.createTabBar();\n    container.appendChild(tabBar);\n\n    // Editor container\n    const editorContainer = document.createElement('div');\n    editorContainer.className = 'ace-editor-container';\n    container.appendChild(editorContainer);\n\n    this.shadow.appendChild(container);\n\n    // Initialize editor after rendering\n    setTimeout(() => {\n      if (!this.editor) {\n        this.initializeEditor();\n      }\n    }, 0);\n  }\n\n  private createTabBar(): HTMLElement {\n    const tabBar = document.createElement('div');\n    tabBar.className = 'tab-bar';\n\n    const programTab = document.createElement('button');\n    programTab.className = `tab ${this.activeTab === 'program' ? 'active' : ''}`;\n    programTab.textContent = 'Program';\n    programTab.setAttribute('data-tab', 'program');\n    programTab.addEventListener('click', () => {\n      this.setAttribute('active-tab', 'program');\n    });\n\n    const executedTab = document.createElement('button');\n    executedTab.className = `tab ${this.activeTab === 'executed' ? 'active' : ''}`;\n    executedTab.textContent = 'Executed';\n    executedTab.setAttribute('data-tab', 'executed');\n    executedTab.addEventListener('click', () => {\n      this.setAttribute('active-tab', 'executed');\n    });\n\n    tabBar.appendChild(programTab);\n    tabBar.appendChild(executedTab);\n\n    return tabBar;\n  }\n\n  private getStyles(): string {\n    return `\n      :host {\n        display: block;\n        width: 100%;\n        height: 100%;\n      }\n\n      .nc-code-pane {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: 100%;\n        background: #272822;\n      }\n\n      .tab-bar {\n        display: flex;\n        background: #1e1e1e;\n        border-bottom: 1px solid #3e3e42;\n      }\n\n      .tab {\n        padding: 8px 16px;\n        background: transparent;\n        border: none;\n        color: #888;\n        cursor: pointer;\n        font-size: 13px;\n        font-family: inherit;\n        border-bottom: 2px solid transparent;\n        transition: all 0.2s;\n      }\n\n      .tab:hover {\n        background: #2a2a2a;\n        color: #d4d4d4;\n      }\n\n      .tab.active {\n        color: #569cd6;\n        border-bottom-color: #569cd6;\n      }\n\n      .ace-editor-container {\n        flex: 1;\n        width: 100%;\n        height: 100%;\n        position: relative;\n      }\n\n      /* Custom marker styles */\n      :host ::ng-deep .ace-error-marker {\n        position: absolute;\n        background-color: rgba(255, 0, 0, 0.1);\n        border-left: 3px solid #f44336;\n      }\n\n      :host ::ng-deep .ace-warning-marker {\n        position: absolute;\n        background-color: rgba(255, 152, 0, 0.1);\n        border-left: 3px solid #ff9800;\n      }\n    `;\n  }\n}\n\n// Register the custom element\ncustomElements.define('nc-code-pane', NCCodePane);\n","/**\n * NCKeywordPanel - Displays keywords and sync codes from parsed NC program\n */\n\nimport { BaseComponent } from './BaseComponent';\nimport { getServiceRegistry } from '@core/ServiceRegistry';\nimport { SERVICE_TOKENS, type ChannelId, type KeywordEntry } from '@core/types';\nimport type { StateService } from '@services/StateService';\nimport type { EventBus } from '@services/EventBus';\n\nexport class NCKeywordPanel extends BaseComponent {\n  private channelId!: ChannelId;\n  private stateService!: StateService;\n  private eventBus!: EventBus;\n  private keywords: KeywordEntry[] = [];\n  private selectedKeyword: KeywordEntry | null = null;\n\n  static get observedAttributes() {\n    return ['channel-id'];\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return;\n\n    if (name === 'channel-id') {\n      this.channelId = newValue;\n      this.loadKeywords();\n    }\n  }\n\n  protected onConnected(): void {\n    const registry = getServiceRegistry();\n    this.stateService = registry.get<StateService>(SERVICE_TOKENS.StateService);\n    this.eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n\n    this.channelId = this.getAttribute('channel-id') || 'channel-1';\n\n    this.setupEventListeners();\n    this.loadKeywords();\n  }\n\n  private setupEventListeners(): void {\n    this.eventBus.on('parse:completed', (event) => {\n      const payload = event.payload as {\n        channelId: ChannelId;\n        artifacts: { keywords: KeywordEntry[] };\n      };\n      if (payload.channelId === this.channelId) {\n        this.keywords = payload.artifacts.keywords;\n        this.requestRender();\n      }\n    });\n\n    this.eventBus.on('editor:selection-changed', (event) => {\n      const payload = event.payload as { channelId: ChannelId; line: number };\n      if (payload.channelId === this.channelId) {\n        // Clear selection when cursor moves\n        this.selectedKeyword = null;\n        this.requestRender();\n      }\n    });\n  }\n\n  private loadKeywords(): void {\n    if (!this.channelId || !this.stateService) return;\n\n    const channel = this.stateService.getChannel(this.channelId);\n    if (channel?.parseArtifacts) {\n      this.keywords = channel.parseArtifacts.keywords;\n      this.requestRender();\n    }\n  }\n\n  private handleKeywordClick(keyword: KeywordEntry): void {\n    this.selectedKeyword = keyword;\n\n    // Emit event to scroll editor to this line\n    this.eventBus.emit({\n      type: 'keyword:clicked',\n      timestamp: Date.now(),\n      payload: {\n        channelId: this.channelId,\n        keyword: keyword.keyword,\n        lineNumber: keyword.lineNumber,\n      },\n    });\n\n    this.requestRender();\n  }\n\n  protected render(): void {\n    this.shadow.innerHTML = '';\n    this.shadow.appendChild(this.createStyles(this.getStyles()));\n\n    const container = document.createElement('div');\n    container.className = 'nc-keyword-panel';\n\n    const header = document.createElement('div');\n    header.className = 'panel-header';\n    header.textContent = 'Keywords & Sync Codes';\n    container.appendChild(header);\n\n    if (this.keywords.length === 0) {\n      const empty = document.createElement('div');\n      empty.className = 'empty-state';\n      empty.textContent = 'No keywords found. Enter NC code in the editor.';\n      container.appendChild(empty);\n    } else {\n      const list = document.createElement('div');\n      list.className = 'keyword-list';\n\n      // Group keywords by type\n      const grouped = this.groupKeywords(this.keywords);\n\n      for (const [group, items] of Object.entries(grouped)) {\n        if (items.length === 0) continue;\n\n        const groupHeader = document.createElement('div');\n        groupHeader.className = 'group-header';\n        groupHeader.textContent = group;\n        list.appendChild(groupHeader);\n\n        items.forEach((keyword) => {\n          const item = document.createElement('div');\n          item.className = 'keyword-item';\n          if (this.selectedKeyword === keyword) {\n            item.classList.add('selected');\n          }\n\n          const keywordText = document.createElement('span');\n          keywordText.className = 'keyword-text';\n          keywordText.textContent = keyword.keyword;\n\n          const lineNumber = document.createElement('span');\n          lineNumber.className = 'line-number';\n          lineNumber.textContent = `L${keyword.lineNumber}`;\n\n          item.appendChild(keywordText);\n          item.appendChild(lineNumber);\n\n          item.addEventListener('click', () => {\n            this.handleKeywordClick(keyword);\n          });\n\n          list.appendChild(item);\n        });\n      }\n\n      container.appendChild(list);\n    }\n\n    this.shadow.appendChild(container);\n  }\n\n  private groupKeywords(keywords: KeywordEntry[]): Record<string, KeywordEntry[]> {\n    const groups: Record<string, KeywordEntry[]> = {\n      Motion: [],\n      Spindle: [],\n      Tool: [],\n      Misc: [],\n    };\n\n    keywords.forEach((keyword) => {\n      const code = keyword.keyword.toUpperCase();\n\n      if (/^G[0-3]$/.test(code)) {\n        groups['Motion']?.push(keyword);\n      } else if (/^M[3-5]$/.test(code)) {\n        groups['Spindle']?.push(keyword);\n      } else if (/^T\\d+$/.test(code)) {\n        groups['Tool']?.push(keyword);\n      } else {\n        groups['Misc']?.push(keyword);\n      }\n    });\n\n    return groups;\n  }\n\n  private getStyles(): string {\n    return `\n      :host {\n        display: block;\n        width: 100%;\n        height: 100%;\n        overflow: auto;\n      }\n\n      .nc-keyword-panel {\n        width: 100%;\n        height: 100%;\n        background: #1e1e1e;\n        color: #d4d4d4;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      }\n\n      .panel-header {\n        padding: 10px 15px;\n        background: #2d2d30;\n        border-bottom: 1px solid #3e3e42;\n        font-weight: 500;\n        font-size: 13px;\n        text-transform: uppercase;\n        color: #888;\n      }\n\n      .empty-state {\n        padding: 20px;\n        text-align: center;\n        color: #666;\n        font-size: 13px;\n      }\n\n      .keyword-list {\n        padding: 5px 0;\n      }\n\n      .group-header {\n        padding: 8px 15px;\n        font-size: 11px;\n        font-weight: 600;\n        color: #888;\n        text-transform: uppercase;\n        background: #252526;\n        border-bottom: 1px solid #3e3e42;\n        border-top: 1px solid #3e3e42;\n        margin-top: 5px;\n      }\n\n      .keyword-item {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 6px 15px;\n        cursor: pointer;\n        transition: background 0.2s;\n        font-size: 13px;\n      }\n\n      .keyword-item:hover {\n        background: #2a2d2e;\n      }\n\n      .keyword-item.selected {\n        background: #094771;\n        border-left: 3px solid #569cd6;\n      }\n\n      .keyword-text {\n        font-family: 'Courier New', monospace;\n        color: #4ec9b0;\n        font-weight: 500;\n      }\n\n      .line-number {\n        font-size: 11px;\n        color: #858585;\n        font-family: 'Courier New', monospace;\n      }\n    `;\n  }\n}\n\n// Register the custom element\ncustomElements.define('nc-keyword-panel', NCKeywordPanel);\n","/**\n * NCVariableList - Displays NC variables/registers (1-999)\n */\n\nimport { BaseComponent } from './BaseComponent';\nimport { getServiceRegistry } from '@core/ServiceRegistry';\nimport { SERVICE_TOKENS, type ChannelId } from '@core/types';\nimport type { StateService } from '@services/StateService';\nimport type { EventBus } from '@services/EventBus';\n\ninterface VariableEntry {\n  register: number;\n  value: number;\n  updated?: boolean;\n}\n\nexport class NCVariableList extends BaseComponent {\n  private channelId!: ChannelId;\n  private stateService!: StateService;\n  private eventBus!: EventBus;\n  private variables: VariableEntry[] = [];\n  private filterText = '';\n  private isOpen = false;\n\n  static get observedAttributes() {\n    return ['channel-id', 'open'];\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'channel-id':\n        this.channelId = newValue;\n        this.loadVariables();\n        break;\n      case 'open':\n        this.isOpen = newValue === 'true';\n        this.requestRender();\n        break;\n    }\n  }\n\n  protected onConnected(): void {\n    const registry = getServiceRegistry();\n    this.stateService = registry.get<StateService>(SERVICE_TOKENS.StateService);\n    this.eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n\n    this.channelId = this.getAttribute('channel-id') || 'channel-1';\n    this.isOpen = this.getAttribute('open') === 'true';\n\n    this.setupEventListeners();\n    this.loadVariables();\n  }\n\n  private setupEventListeners(): void {\n    this.eventBus.on('parse:completed', (event) => {\n      const payload = event.payload as {\n        channelId: ChannelId;\n        artifacts: { variableSnapshot: { registers: Map<number, number> } };\n      };\n      if (payload.channelId === this.channelId) {\n        this.updateVariables(payload.artifacts.variableSnapshot.registers, false);\n      }\n    });\n\n    this.eventBus.on('execution:completed', (event) => {\n      const payload = event.payload as {\n        channelId: ChannelId;\n        result: { variableDeltas: { registers: Map<number, number> } };\n      };\n      if (payload.channelId === this.channelId) {\n        this.updateVariables(payload.result.variableDeltas.registers, true);\n      }\n    });\n  }\n\n  private loadVariables(): void {\n    if (!this.channelId || !this.stateService) return;\n\n    const channel = this.stateService.getChannel(this.channelId);\n    if (channel?.parseArtifacts?.variableSnapshot) {\n      this.updateVariables(channel.parseArtifacts.variableSnapshot.registers, false);\n    }\n  }\n\n  private updateVariables(registers: Map<number, number>, markUpdated: boolean): void {\n    const newVariables: VariableEntry[] = [];\n\n    registers.forEach((value, register) => {\n      newVariables.push({\n        register,\n        value,\n        updated: markUpdated,\n      });\n    });\n\n    this.variables = newVariables.sort((a, b) => a.register - b.register);\n    this.requestRender();\n  }\n\n  private handleFilterChange(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    this.filterText = input.value;\n    this.requestRender();\n  }\n\n  private handleToggle(): void {\n    this.isOpen = !this.isOpen;\n    this.setAttribute('open', String(this.isOpen));\n  }\n\n  private getFilteredVariables(): VariableEntry[] {\n    if (!this.filterText) {\n      return this.variables;\n    }\n\n    const filter = this.filterText.toLowerCase();\n    return this.variables.filter((v) => {\n      return v.register.toString().includes(filter) || v.value.toString().includes(filter);\n    });\n  }\n\n  protected render(): void {\n    this.shadow.innerHTML = '';\n    this.shadow.appendChild(this.createStyles(this.getStyles()));\n\n    const container = document.createElement('div');\n    container.className = `nc-variable-list ${this.isOpen ? 'open' : 'closed'}`;\n\n    // Header with toggle\n    const header = document.createElement('div');\n    header.className = 'panel-header';\n    header.addEventListener('click', () => this.handleToggle());\n\n    const title = document.createElement('span');\n    title.textContent = `Variables (${this.variables.length})`;\n    header.appendChild(title);\n\n    const arrow = document.createElement('span');\n    arrow.className = 'arrow';\n    arrow.textContent = this.isOpen ? '' : '';\n    header.appendChild(arrow);\n\n    container.appendChild(header);\n\n    if (this.isOpen) {\n      // Filter input\n      const filterContainer = document.createElement('div');\n      filterContainer.className = 'filter-container';\n\n      const filterInput = document.createElement('input');\n      filterInput.type = 'text';\n      filterInput.className = 'filter-input';\n      filterInput.placeholder = 'Filter variables...';\n      filterInput.value = this.filterText;\n      filterInput.addEventListener('input', (e) => this.handleFilterChange(e));\n\n      filterContainer.appendChild(filterInput);\n      container.appendChild(filterContainer);\n\n      // Variable list\n      const filteredVars = this.getFilteredVariables();\n\n      if (filteredVars.length === 0) {\n        const empty = document.createElement('div');\n        empty.className = 'empty-state';\n        empty.textContent = this.filterText ? 'No variables match filter' : 'No variables defined';\n        container.appendChild(empty);\n      } else {\n        const list = document.createElement('div');\n        list.className = 'variable-list';\n\n        // Render in chunks for performance (lazy rendering)\n        const visibleCount = Math.min(filteredVars.length, 100);\n        for (let i = 0; i < visibleCount; i++) {\n          const variable = filteredVars[i];\n          if (!variable) continue;\n\n          const item = document.createElement('div');\n          item.className = `variable-item ${variable.updated ? 'updated' : ''}`;\n\n          const registerSpan = document.createElement('span');\n          registerSpan.className = 'register';\n          registerSpan.textContent = `#${variable.register}`;\n\n          const valueSpan = document.createElement('span');\n          valueSpan.className = 'value';\n          valueSpan.textContent = variable.value.toFixed(3);\n\n          item.appendChild(registerSpan);\n          item.appendChild(valueSpan);\n          list.appendChild(item);\n        }\n\n        if (filteredVars.length > visibleCount) {\n          const more = document.createElement('div');\n          more.className = 'more-items';\n          more.textContent = `... and ${filteredVars.length - visibleCount} more`;\n          list.appendChild(more);\n        }\n\n        container.appendChild(list);\n      }\n    }\n\n    this.shadow.appendChild(container);\n  }\n\n  private getStyles(): string {\n    return `\n      :host {\n        display: block;\n        width: 100%;\n      }\n\n      .nc-variable-list {\n        width: 100%;\n        background: #1e1e1e;\n        color: #d4d4d4;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        border-top: 1px solid #3e3e42;\n      }\n\n      .nc-variable-list.closed {\n        max-height: 40px;\n      }\n\n      .nc-variable-list.open {\n        max-height: 400px;\n      }\n\n      .panel-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 10px 15px;\n        background: #2d2d30;\n        border-bottom: 1px solid #3e3e42;\n        cursor: pointer;\n        user-select: none;\n        font-size: 13px;\n        font-weight: 500;\n      }\n\n      .panel-header:hover {\n        background: #333;\n      }\n\n      .arrow {\n        font-size: 10px;\n        color: #888;\n      }\n\n      .filter-container {\n        padding: 10px;\n        background: #252526;\n      }\n\n      .filter-input {\n        width: 100%;\n        padding: 6px 10px;\n        background: #3c3c3c;\n        border: 1px solid #555;\n        border-radius: 3px;\n        color: #d4d4d4;\n        font-size: 13px;\n        outline: none;\n      }\n\n      .filter-input:focus {\n        border-color: #569cd6;\n      }\n\n      .empty-state {\n        padding: 20px;\n        text-align: center;\n        color: #666;\n        font-size: 13px;\n      }\n\n      .variable-list {\n        max-height: 300px;\n        overflow-y: auto;\n      }\n\n      .variable-item {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 6px 15px;\n        font-size: 13px;\n        border-bottom: 1px solid #2d2d30;\n      }\n\n      .variable-item:hover {\n        background: #2a2d2e;\n      }\n\n      .variable-item.updated {\n        background: #1a3a1a;\n        animation: highlight 2s ease-out;\n      }\n\n      @keyframes highlight {\n        from {\n          background: #2a5a2a;\n        }\n        to {\n          background: #1a3a1a;\n        }\n      }\n\n      .register {\n        font-family: 'Courier New', monospace;\n        color: #4ec9b0;\n        font-weight: 500;\n      }\n\n      .value {\n        font-family: 'Courier New', monospace;\n        color: #b5cea8;\n      }\n\n      .more-items {\n        padding: 10px 15px;\n        text-align: center;\n        color: #888;\n        font-size: 12px;\n        font-style: italic;\n      }\n    `;\n  }\n}\n\n// Register the custom element\ncustomElements.define('nc-variable-list', NCVariableList);\n","/**\n * NCToolList - Displays tool information with Q/R parameters\n */\n\nimport { BaseComponent } from './BaseComponent';\nimport { getServiceRegistry } from '@core/ServiceRegistry';\nimport { SERVICE_TOKENS, type ChannelId, type ToolRegisterEntry } from '@core/types';\nimport type { StateService } from '@services/StateService';\nimport type { EventBus } from '@services/EventBus';\n\nexport class NCToolList extends BaseComponent {\n  private channelId!: ChannelId;\n  private stateService!: StateService;\n  private eventBus!: EventBus;\n  private tools: ToolRegisterEntry[] = [];\n\n  static get observedAttributes() {\n    return ['channel-id'];\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return;\n\n    if (name === 'channel-id') {\n      this.channelId = newValue;\n      this.loadTools();\n    }\n  }\n\n  protected onConnected(): void {\n    const registry = getServiceRegistry();\n    this.stateService = registry.get<StateService>(SERVICE_TOKENS.StateService);\n    this.eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n\n    this.channelId = this.getAttribute('channel-id') || 'channel-1';\n\n    this.setupEventListeners();\n    this.loadTools();\n  }\n\n  private setupEventListeners(): void {\n    this.eventBus.on('parse:completed', (event) => {\n      const payload = event.payload as {\n        channelId: ChannelId;\n        artifacts: { toolRegisters: ToolRegisterEntry[] };\n      };\n      if (payload.channelId === this.channelId) {\n        this.tools = payload.artifacts.toolRegisters;\n        this.requestRender();\n      }\n    });\n  }\n\n  private loadTools(): void {\n    if (!this.channelId || !this.stateService) return;\n\n    const channel = this.stateService.getChannel(this.channelId);\n    if (channel?.parseArtifacts?.toolRegisters) {\n      this.tools = channel.parseArtifacts.toolRegisters;\n      this.requestRender();\n    }\n  }\n\n  private handleToolClick(tool: ToolRegisterEntry): void {\n    // Emit event to scroll editor to this line\n    this.eventBus.emit({\n      type: 'tool:clicked',\n      timestamp: Date.now(),\n      payload: {\n        channelId: this.channelId,\n        toolNumber: tool.toolNumber,\n        lineNumber: tool.lineNumber,\n      },\n    });\n  }\n\n  protected render(): void {\n    this.shadow.innerHTML = '';\n    this.shadow.appendChild(this.createStyles(this.getStyles()));\n\n    const container = document.createElement('div');\n    container.className = 'nc-tool-list';\n\n    const header = document.createElement('div');\n    header.className = 'panel-header';\n    header.textContent = `Tools (${this.tools.length})`;\n    container.appendChild(header);\n\n    if (this.tools.length === 0) {\n      const empty = document.createElement('div');\n      empty.className = 'empty-state';\n      empty.textContent = 'No tool changes found';\n      container.appendChild(empty);\n    } else {\n      const list = document.createElement('div');\n      list.className = 'tool-list';\n\n      this.tools.forEach((tool) => {\n        const item = document.createElement('div');\n        item.className = 'tool-item';\n        item.addEventListener('click', () => this.handleToolClick(tool));\n\n        const toolHeader = document.createElement('div');\n        toolHeader.className = 'tool-header';\n\n        const toolNumber = document.createElement('span');\n        toolNumber.className = 'tool-number';\n        toolNumber.textContent = `T${tool.toolNumber}`;\n\n        const lineNumber = document.createElement('span');\n        lineNumber.className = 'line-number';\n        lineNumber.textContent = `L${tool.lineNumber}`;\n\n        toolHeader.appendChild(toolNumber);\n        toolHeader.appendChild(lineNumber);\n        item.appendChild(toolHeader);\n\n        // Parameters\n        if (tool.qParameter !== undefined || tool.rParameter !== undefined) {\n          const params = document.createElement('div');\n          params.className = 'tool-params';\n\n          if (tool.qParameter !== undefined) {\n            const qParam = document.createElement('span');\n            qParam.className = 'param';\n            qParam.innerHTML = `<span class=\"param-name\">Q:</span> ${tool.qParameter.toFixed(3)}`;\n            params.appendChild(qParam);\n          }\n\n          if (tool.rParameter !== undefined) {\n            const rParam = document.createElement('span');\n            rParam.className = 'param';\n            rParam.innerHTML = `<span class=\"param-name\">R:</span> ${tool.rParameter.toFixed(3)}`;\n            params.appendChild(rParam);\n          }\n\n          item.appendChild(params);\n        }\n\n        list.appendChild(item);\n      });\n\n      container.appendChild(list);\n    }\n\n    this.shadow.appendChild(container);\n  }\n\n  private getStyles(): string {\n    return `\n      :host {\n        display: block;\n        width: 100%;\n        height: 100%;\n        overflow: auto;\n      }\n\n      .nc-tool-list {\n        width: 100%;\n        height: 100%;\n        background: #1e1e1e;\n        color: #d4d4d4;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      }\n\n      .panel-header {\n        padding: 10px 15px;\n        background: #2d2d30;\n        border-bottom: 1px solid #3e3e42;\n        font-weight: 500;\n        font-size: 13px;\n        text-transform: uppercase;\n        color: #888;\n      }\n\n      .empty-state {\n        padding: 20px;\n        text-align: center;\n        color: #666;\n        font-size: 13px;\n      }\n\n      .tool-list {\n        padding: 5px 0;\n      }\n\n      .tool-item {\n        padding: 10px 15px;\n        border-bottom: 1px solid #2d2d30;\n        cursor: pointer;\n        transition: background 0.2s;\n      }\n\n      .tool-item:hover {\n        background: #2a2d2e;\n      }\n\n      .tool-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 5px;\n      }\n\n      .tool-number {\n        font-family: 'Courier New', monospace;\n        color: #dcdcaa;\n        font-weight: 600;\n        font-size: 14px;\n      }\n\n      .line-number {\n        font-size: 11px;\n        color: #858585;\n        font-family: 'Courier New', monospace;\n      }\n\n      .tool-params {\n        display: flex;\n        gap: 15px;\n        font-size: 12px;\n        font-family: 'Courier New', monospace;\n      }\n\n      .param {\n        color: #ce9178;\n      }\n\n      .param-name {\n        color: #9cdcfe;\n        font-weight: 500;\n      }\n    `;\n  }\n}\n\n// Register the custom element\ncustomElements.define('nc-tool-list', NCToolList);\n","/**\n * @license\n * Copyright 2010-2023 Three.js Authors\n * SPDX-License-Identifier: MIT\n */\nconst REVISION = '161';\n\nconst MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nconst TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nconst CullFaceNone = 0;\nconst CullFaceBack = 1;\nconst CullFaceFront = 2;\nconst CullFaceFrontBack = 3;\nconst BasicShadowMap = 0;\nconst PCFShadowMap = 1;\nconst PCFSoftShadowMap = 2;\nconst VSMShadowMap = 3;\nconst FrontSide = 0;\nconst BackSide = 1;\nconst DoubleSide = 2;\nconst NoBlending = 0;\nconst NormalBlending = 1;\nconst AdditiveBlending = 2;\nconst SubtractiveBlending = 3;\nconst MultiplyBlending = 4;\nconst CustomBlending = 5;\nconst AddEquation = 100;\nconst SubtractEquation = 101;\nconst ReverseSubtractEquation = 102;\nconst MinEquation = 103;\nconst MaxEquation = 104;\nconst ZeroFactor = 200;\nconst OneFactor = 201;\nconst SrcColorFactor = 202;\nconst OneMinusSrcColorFactor = 203;\nconst SrcAlphaFactor = 204;\nconst OneMinusSrcAlphaFactor = 205;\nconst DstAlphaFactor = 206;\nconst OneMinusDstAlphaFactor = 207;\nconst DstColorFactor = 208;\nconst OneMinusDstColorFactor = 209;\nconst SrcAlphaSaturateFactor = 210;\nconst ConstantColorFactor = 211;\nconst OneMinusConstantColorFactor = 212;\nconst ConstantAlphaFactor = 213;\nconst OneMinusConstantAlphaFactor = 214;\nconst NeverDepth = 0;\nconst AlwaysDepth = 1;\nconst LessDepth = 2;\nconst LessEqualDepth = 3;\nconst EqualDepth = 4;\nconst GreaterEqualDepth = 5;\nconst GreaterDepth = 6;\nconst NotEqualDepth = 7;\nconst MultiplyOperation = 0;\nconst MixOperation = 1;\nconst AddOperation = 2;\nconst NoToneMapping = 0;\nconst LinearToneMapping = 1;\nconst ReinhardToneMapping = 2;\nconst CineonToneMapping = 3;\nconst ACESFilmicToneMapping = 4;\nconst CustomToneMapping = 5;\nconst AgXToneMapping = 6;\nconst AttachedBindMode = 'attached';\nconst DetachedBindMode = 'detached';\n\nconst UVMapping = 300;\nconst CubeReflectionMapping = 301;\nconst CubeRefractionMapping = 302;\nconst EquirectangularReflectionMapping = 303;\nconst EquirectangularRefractionMapping = 304;\nconst CubeUVReflectionMapping = 306;\nconst RepeatWrapping = 1000;\nconst ClampToEdgeWrapping = 1001;\nconst MirroredRepeatWrapping = 1002;\nconst NearestFilter = 1003;\nconst NearestMipmapNearestFilter = 1004;\nconst NearestMipMapNearestFilter = 1004;\nconst NearestMipmapLinearFilter = 1005;\nconst NearestMipMapLinearFilter = 1005;\nconst LinearFilter = 1006;\nconst LinearMipmapNearestFilter = 1007;\nconst LinearMipMapNearestFilter = 1007;\nconst LinearMipmapLinearFilter = 1008;\nconst LinearMipMapLinearFilter = 1008;\nconst UnsignedByteType = 1009;\nconst ByteType = 1010;\nconst ShortType = 1011;\nconst UnsignedShortType = 1012;\nconst IntType = 1013;\nconst UnsignedIntType = 1014;\nconst FloatType = 1015;\nconst HalfFloatType = 1016;\nconst UnsignedShort4444Type = 1017;\nconst UnsignedShort5551Type = 1018;\nconst UnsignedInt248Type = 1020;\nconst AlphaFormat = 1021;\nconst RGBAFormat = 1023;\nconst LuminanceFormat = 1024;\nconst LuminanceAlphaFormat = 1025;\nconst DepthFormat = 1026;\nconst DepthStencilFormat = 1027;\nconst RedFormat = 1028;\nconst RedIntegerFormat = 1029;\nconst RGFormat = 1030;\nconst RGIntegerFormat = 1031;\nconst RGBAIntegerFormat = 1033;\n\nconst RGB_S3TC_DXT1_Format = 33776;\nconst RGBA_S3TC_DXT1_Format = 33777;\nconst RGBA_S3TC_DXT3_Format = 33778;\nconst RGBA_S3TC_DXT5_Format = 33779;\nconst RGB_PVRTC_4BPPV1_Format = 35840;\nconst RGB_PVRTC_2BPPV1_Format = 35841;\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\nconst RGB_ETC1_Format = 36196;\nconst RGB_ETC2_Format = 37492;\nconst RGBA_ETC2_EAC_Format = 37496;\nconst RGBA_ASTC_4x4_Format = 37808;\nconst RGBA_ASTC_5x4_Format = 37809;\nconst RGBA_ASTC_5x5_Format = 37810;\nconst RGBA_ASTC_6x5_Format = 37811;\nconst RGBA_ASTC_6x6_Format = 37812;\nconst RGBA_ASTC_8x5_Format = 37813;\nconst RGBA_ASTC_8x6_Format = 37814;\nconst RGBA_ASTC_8x8_Format = 37815;\nconst RGBA_ASTC_10x5_Format = 37816;\nconst RGBA_ASTC_10x6_Format = 37817;\nconst RGBA_ASTC_10x8_Format = 37818;\nconst RGBA_ASTC_10x10_Format = 37819;\nconst RGBA_ASTC_12x10_Format = 37820;\nconst RGBA_ASTC_12x12_Format = 37821;\nconst RGBA_BPTC_Format = 36492;\nconst RGB_BPTC_SIGNED_Format = 36494;\nconst RGB_BPTC_UNSIGNED_Format = 36495;\nconst RED_RGTC1_Format = 36283;\nconst SIGNED_RED_RGTC1_Format = 36284;\nconst RED_GREEN_RGTC2_Format = 36285;\nconst SIGNED_RED_GREEN_RGTC2_Format = 36286;\nconst LoopOnce = 2200;\nconst LoopRepeat = 2201;\nconst LoopPingPong = 2202;\nconst InterpolateDiscrete = 2300;\nconst InterpolateLinear = 2301;\nconst InterpolateSmooth = 2302;\nconst ZeroCurvatureEnding = 2400;\nconst ZeroSlopeEnding = 2401;\nconst WrapAroundEnding = 2402;\nconst NormalAnimationBlendMode = 2500;\nconst AdditiveAnimationBlendMode = 2501;\nconst TrianglesDrawMode = 0;\nconst TriangleStripDrawMode = 1;\nconst TriangleFanDrawMode = 2;\n/** @deprecated Use LinearSRGBColorSpace or NoColorSpace in three.js r152+. */\nconst LinearEncoding = 3000;\n/** @deprecated Use SRGBColorSpace in three.js r152+. */\nconst sRGBEncoding = 3001;\nconst BasicDepthPacking = 3200;\nconst RGBADepthPacking = 3201;\nconst TangentSpaceNormalMap = 0;\nconst ObjectSpaceNormalMap = 1;\n\n// Color space string identifiers, matching CSS Color Module Level 4 and WebGPU names where available.\nconst NoColorSpace = '';\nconst SRGBColorSpace = 'srgb';\nconst LinearSRGBColorSpace = 'srgb-linear';\nconst DisplayP3ColorSpace = 'display-p3';\nconst LinearDisplayP3ColorSpace = 'display-p3-linear';\n\nconst LinearTransfer = 'linear';\nconst SRGBTransfer = 'srgb';\n\nconst Rec709Primaries = 'rec709';\nconst P3Primaries = 'p3';\n\nconst ZeroStencilOp = 0;\nconst KeepStencilOp = 7680;\nconst ReplaceStencilOp = 7681;\nconst IncrementStencilOp = 7682;\nconst DecrementStencilOp = 7683;\nconst IncrementWrapStencilOp = 34055;\nconst DecrementWrapStencilOp = 34056;\nconst InvertStencilOp = 5386;\n\nconst NeverStencilFunc = 512;\nconst LessStencilFunc = 513;\nconst EqualStencilFunc = 514;\nconst LessEqualStencilFunc = 515;\nconst GreaterStencilFunc = 516;\nconst NotEqualStencilFunc = 517;\nconst GreaterEqualStencilFunc = 518;\nconst AlwaysStencilFunc = 519;\n\nconst NeverCompare = 512;\nconst LessCompare = 513;\nconst EqualCompare = 514;\nconst LessEqualCompare = 515;\nconst GreaterCompare = 516;\nconst NotEqualCompare = 517;\nconst GreaterEqualCompare = 518;\nconst AlwaysCompare = 519;\n\nconst StaticDrawUsage = 35044;\nconst DynamicDrawUsage = 35048;\nconst StreamDrawUsage = 35040;\nconst StaticReadUsage = 35045;\nconst DynamicReadUsage = 35049;\nconst StreamReadUsage = 35041;\nconst StaticCopyUsage = 35046;\nconst DynamicCopyUsage = 35050;\nconst StreamCopyUsage = 35042;\n\nconst GLSL1 = '100';\nconst GLSL3 = '300 es';\n\nconst _SRGBAFormat = 1035; // fallback for WebGL 1\n\nconst WebGLCoordinateSystem = 2000;\nconst WebGPUCoordinateSystem = 2001;\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nclass EventDispatcher {\n\n\taddEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t}\n\n\thasEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t}\n\n\tremoveEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tdispatchEvent( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t\tevent.target = null;\n\n\t\t}\n\n\t}\n\n}\n\nconst _lut = [ '00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '0a', '0b', '0c', '0d', '0e', '0f', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '1a', '1b', '1c', '1d', '1e', '1f', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '2a', '2b', '2c', '2d', '2e', '2f', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '3a', '3b', '3c', '3d', '3e', '3f', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '4a', '4b', '4c', '4d', '4e', '4f', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '5a', '5b', '5c', '5d', '5e', '5f', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '6a', '6b', '6c', '6d', '6e', '6f', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '7a', '7b', '7c', '7d', '7e', '7f', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '8a', '8b', '8c', '8d', '8e', '8f', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '9a', '9b', '9c', '9d', '9e', '9f', 'a0', 'a1', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7', 'a8', 'a9', 'aa', 'ab', 'ac', 'ad', 'ae', 'af', 'b0', 'b1', 'b2', 'b3', 'b4', 'b5', 'b6', 'b7', 'b8', 'b9', 'ba', 'bb', 'bc', 'bd', 'be', 'bf', 'c0', 'c1', 'c2', 'c3', 'c4', 'c5', 'c6', 'c7', 'c8', 'c9', 'ca', 'cb', 'cc', 'cd', 'ce', 'cf', 'd0', 'd1', 'd2', 'd3', 'd4', 'd5', 'd6', 'd7', 'd8', 'd9', 'da', 'db', 'dc', 'dd', 'de', 'df', 'e0', 'e1', 'e2', 'e3', 'e4', 'e5', 'e6', 'e7', 'e8', 'e9', 'ea', 'eb', 'ec', 'ed', 'ee', 'ef', 'f0', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6', 'f7', 'f8', 'f9', 'fa', 'fb', 'fc', 'fd', 'fe', 'ff' ];\n\nlet _seed = 1234567;\n\n\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 180 / Math.PI;\n\n// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\nfunction generateUUID() {\n\n\tconst d0 = Math.random() * 0xffffffff | 0;\n\tconst d1 = Math.random() * 0xffffffff | 0;\n\tconst d2 = Math.random() * 0xffffffff | 0;\n\tconst d3 = Math.random() * 0xffffffff | 0;\n\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t// .toLowerCase() here flattens concatenated strings to save heap memory space.\n\treturn uuid.toLowerCase();\n\n}\n\nfunction clamp( value, min, max ) {\n\n\treturn Math.max( min, Math.min( max, value ) );\n\n}\n\n// compute euclidean modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\nfunction euclideanModulo( n, m ) {\n\n\treturn ( ( n % m ) + m ) % m;\n\n}\n\n// Linear mapping from range <a1, a2> to range <b1, b2>\nfunction mapLinear( x, a1, a2, b1, b2 ) {\n\n\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n}\n\n// https://www.gamedev.net/tutorials/programming/general-and-gameplay-programming/inverse-lerp-a-super-useful-yet-often-overlooked-function-r5230/\nfunction inverseLerp( x, y, value ) {\n\n\tif ( x !== y ) {\n\n\t\treturn ( value - x ) / ( y - x );\n\n\t} else {\n\n\t\treturn 0;\n\n\t}\n\n}\n\n// https://en.wikipedia.org/wiki/Linear_interpolation\nfunction lerp( x, y, t ) {\n\n\treturn ( 1 - t ) * x + t * y;\n\n}\n\n// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\nfunction damp( x, y, lambda, dt ) {\n\n\treturn lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n}\n\n// https://www.desmos.com/calculator/vcsjnyz7x4\nfunction pingpong( x, length = 1 ) {\n\n\treturn length - Math.abs( euclideanModulo( x, length * 2 ) - length );\n\n}\n\n// http://en.wikipedia.org/wiki/Smoothstep\nfunction smoothstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * ( 3 - 2 * x );\n\n}\n\nfunction smootherstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n}\n\n// Random integer from <low, high> interval\nfunction randInt( low, high ) {\n\n\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n}\n\n// Random float from <low, high> interval\nfunction randFloat( low, high ) {\n\n\treturn low + Math.random() * ( high - low );\n\n}\n\n// Random float from <-range/2, range/2> interval\nfunction randFloatSpread( range ) {\n\n\treturn range * ( 0.5 - Math.random() );\n\n}\n\n// Deterministic pseudo-random float in the interval [ 0, 1 ]\nfunction seededRandom( s ) {\n\n\tif ( s !== undefined ) _seed = s;\n\n\t// Mulberry32 generator\n\n\tlet t = _seed += 0x6D2B79F5;\n\n\tt = Math.imul( t ^ t >>> 15, t | 1 );\n\n\tt ^= t + Math.imul( t ^ t >>> 7, t | 61 );\n\n\treturn ( ( t ^ t >>> 14 ) >>> 0 ) / 4294967296;\n\n}\n\nfunction degToRad( degrees ) {\n\n\treturn degrees * DEG2RAD;\n\n}\n\nfunction radToDeg( radians ) {\n\n\treturn radians * RAD2DEG;\n\n}\n\nfunction isPowerOfTwo( value ) {\n\n\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n}\n\nfunction ceilPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction floorPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction setQuaternionFromProperEuler( q, a, b, c, order ) {\n\n\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t// rotations are applied to the axes in the order specified by 'order'\n\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t// angles are in radians\n\n\tconst cos = Math.cos;\n\tconst sin = Math.sin;\n\n\tconst c2 = cos( b / 2 );\n\tconst s2 = sin( b / 2 );\n\n\tconst c13 = cos( ( a + c ) / 2 );\n\tconst s13 = sin( ( a + c ) / 2 );\n\n\tconst c1_3 = cos( ( a - c ) / 2 );\n\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\tconst c3_1 = cos( ( c - a ) / 2 );\n\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\tswitch ( order ) {\n\n\t\tcase 'XYX':\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YZY':\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZXZ':\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'XZX':\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YXY':\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZYZ':\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t}\n\n}\n\nfunction denormalize( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint32Array:\n\n\t\t\treturn value / 4294967295.0;\n\n\t\tcase Uint16Array:\n\n\t\t\treturn value / 65535.0;\n\n\t\tcase Uint8Array:\n\n\t\t\treturn value / 255.0;\n\n\t\tcase Int32Array:\n\n\t\t\treturn Math.max( value / 2147483647.0, - 1.0 );\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.max( value / 32767.0, - 1.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.max( value / 127.0, - 1.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nfunction normalize( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint32Array:\n\n\t\t\treturn Math.round( value * 4294967295.0 );\n\n\t\tcase Uint16Array:\n\n\t\t\treturn Math.round( value * 65535.0 );\n\n\t\tcase Uint8Array:\n\n\t\t\treturn Math.round( value * 255.0 );\n\n\t\tcase Int32Array:\n\n\t\t\treturn Math.round( value * 2147483647.0 );\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.round( value * 32767.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.round( value * 127.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nconst MathUtils = {\n\tDEG2RAD: DEG2RAD,\n\tRAD2DEG: RAD2DEG,\n\tgenerateUUID: generateUUID,\n\tclamp: clamp,\n\teuclideanModulo: euclideanModulo,\n\tmapLinear: mapLinear,\n\tinverseLerp: inverseLerp,\n\tlerp: lerp,\n\tdamp: damp,\n\tpingpong: pingpong,\n\tsmoothstep: smoothstep,\n\tsmootherstep: smootherstep,\n\trandInt: randInt,\n\trandFloat: randFloat,\n\trandFloatSpread: randFloatSpread,\n\tseededRandom: seededRandom,\n\tdegToRad: degToRad,\n\tradToDeg: radToDeg,\n\tisPowerOfTwo: isPowerOfTwo,\n\tceilPowerOfTwo: ceilPowerOfTwo,\n\tfloorPowerOfTwo: floorPowerOfTwo,\n\tsetQuaternionFromProperEuler: setQuaternionFromProperEuler,\n\tnormalize: normalize,\n\tdenormalize: denormalize\n};\n\nclass Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tVector2.prototype.isVector2 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = Math.trunc( this.x );\n\t\tthis.y = Math.trunc( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\n\t}\n\n}\n\nclass Matrix3 {\n\n\tconstructor( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tMatrix3.prototype.isMatrix3 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t\tif ( n11 !== undefined ) {\n\n\t\t\tthis.set( n11, n12, n13, n21, n22, n23, n31, n32, n33 );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tinvert() {\n\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ],\n\t\t\tn12 = te[ 3 ], n22 = te[ 4 ], n32 = te[ 5 ],\n\t\t\tn13 = te[ 6 ], n23 = te[ 7 ], n33 = te[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).invert().transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\t//\n\n\tscale( sx, sy ) {\n\n\t\tthis.premultiply( _m3.makeScale( sx, sy ) );\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tthis.premultiply( _m3.makeRotation( - theta ) );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tthis.premultiply( _m3.makeTranslation( tx, ty ) );\n\n\t\treturn this;\n\n\t}\n\n\t// for 2D Transforms\n\n\tmakeTranslation( x, y ) {\n\n\t\tif ( x.isVector2 ) {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, x.x,\n\t\t\t\t0, 1, x.y,\n\t\t\t\t0, 0, 1\n\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, x,\n\t\t\t\t0, 1, y,\n\t\t\t\t0, 0, 1\n\n\t\t\t);\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotation( theta ) {\n\n\t\t// counterclockwise\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0,\n\t\t\ts, c, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0,\n\t\t\t0, y, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\t//\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n}\n\nconst _m3 = /*@__PURE__*/ new Matrix3();\n\nfunction arrayNeedsUint32( array ) {\n\n\t// assumes larger values usually on last\n\n\tfor ( let i = array.length - 1; i >= 0; -- i ) {\n\n\t\tif ( array[ i ] >= 65535 ) return true; // account for PRIMITIVE_RESTART_FIXED_INDEX, #24565\n\n\t}\n\n\treturn false;\n\n}\n\nconst TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\tUint8ClampedArray: Uint8ClampedArray,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\nfunction getTypedArray( type, buffer ) {\n\n\treturn new TYPED_ARRAYS[ type ]( buffer );\n\n}\n\nfunction createElementNS( name ) {\n\n\treturn document.createElementNS( 'http://www.w3.org/1999/xhtml', name );\n\n}\n\nfunction createCanvasElement() {\n\n\tconst canvas = createElementNS( 'canvas' );\n\tcanvas.style.display = 'block';\n\treturn canvas;\n\n}\n\nconst _cache = {};\n\nfunction warnOnce( message ) {\n\n\tif ( message in _cache ) return;\n\n\t_cache[ message ] = true;\n\n\tconsole.warn( message );\n\n}\n\n/**\n * Matrices converting P3 <-> Rec. 709 primaries, without gamut mapping\n * or clipping. Based on W3C specifications for sRGB and Display P3,\n * and ICC specifications for the D50 connection space. Values in/out\n * are _linear_ sRGB and _linear_ Display P3.\n *\n * Note that both sRGB and Display P3 use the sRGB transfer functions.\n *\n * Reference:\n * - http://www.russellcottrell.com/photo/matrixCalculator.htm\n */\n\nconst LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = /*@__PURE__*/ new Matrix3().set(\n\t0.8224621, 0.177538, 0.0,\n\t0.0331941, 0.9668058, 0.0,\n\t0.0170827, 0.0723974, 0.9105199,\n);\n\nconst LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = /*@__PURE__*/ new Matrix3().set(\n\t1.2249401, - 0.2249404, 0.0,\n\t- 0.0420569, 1.0420571, 0.0,\n\t- 0.0196376, - 0.0786361, 1.0982735\n);\n\n/**\n * Defines supported color spaces by transfer function and primaries,\n * and provides conversions to/from the Linear-sRGB reference space.\n */\nconst COLOR_SPACES = {\n\t[ LinearSRGBColorSpace ]: {\n\t\ttransfer: LinearTransfer,\n\t\tprimaries: Rec709Primaries,\n\t\ttoReference: ( color ) => color,\n\t\tfromReference: ( color ) => color,\n\t},\n\t[ SRGBColorSpace ]: {\n\t\ttransfer: SRGBTransfer,\n\t\tprimaries: Rec709Primaries,\n\t\ttoReference: ( color ) => color.convertSRGBToLinear(),\n\t\tfromReference: ( color ) => color.convertLinearToSRGB(),\n\t},\n\t[ LinearDisplayP3ColorSpace ]: {\n\t\ttransfer: LinearTransfer,\n\t\tprimaries: P3Primaries,\n\t\ttoReference: ( color ) => color.applyMatrix3( LINEAR_DISPLAY_P3_TO_LINEAR_SRGB ),\n\t\tfromReference: ( color ) => color.applyMatrix3( LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 ),\n\t},\n\t[ DisplayP3ColorSpace ]: {\n\t\ttransfer: SRGBTransfer,\n\t\tprimaries: P3Primaries,\n\t\ttoReference: ( color ) => color.convertSRGBToLinear().applyMatrix3( LINEAR_DISPLAY_P3_TO_LINEAR_SRGB ),\n\t\tfromReference: ( color ) => color.applyMatrix3( LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 ).convertLinearToSRGB(),\n\t},\n};\n\nconst SUPPORTED_WORKING_COLOR_SPACES = new Set( [ LinearSRGBColorSpace, LinearDisplayP3ColorSpace ] );\n\nconst ColorManagement = {\n\n\tenabled: true,\n\n\t_workingColorSpace: LinearSRGBColorSpace,\n\n\tget workingColorSpace() {\n\n\t\treturn this._workingColorSpace;\n\n\t},\n\n\tset workingColorSpace( colorSpace ) {\n\n\t\tif ( ! SUPPORTED_WORKING_COLOR_SPACES.has( colorSpace ) ) {\n\n\t\t\tthrow new Error( `Unsupported working color space, \"${ colorSpace }\".` );\n\n\t\t}\n\n\t\tthis._workingColorSpace = colorSpace;\n\n\t},\n\n\tconvert: function ( color, sourceColorSpace, targetColorSpace ) {\n\n\t\tif ( this.enabled === false || sourceColorSpace === targetColorSpace || ! sourceColorSpace || ! targetColorSpace ) {\n\n\t\t\treturn color;\n\n\t\t}\n\n\t\tconst sourceToReference = COLOR_SPACES[ sourceColorSpace ].toReference;\n\t\tconst targetFromReference = COLOR_SPACES[ targetColorSpace ].fromReference;\n\n\t\treturn targetFromReference( sourceToReference( color ) );\n\n\t},\n\n\tfromWorkingColorSpace: function ( color, targetColorSpace ) {\n\n\t\treturn this.convert( color, this._workingColorSpace, targetColorSpace );\n\n\t},\n\n\ttoWorkingColorSpace: function ( color, sourceColorSpace ) {\n\n\t\treturn this.convert( color, sourceColorSpace, this._workingColorSpace );\n\n\t},\n\n\tgetPrimaries: function ( colorSpace ) {\n\n\t\treturn COLOR_SPACES[ colorSpace ].primaries;\n\n\t},\n\n\tgetTransfer: function ( colorSpace ) {\n\n\t\tif ( colorSpace === NoColorSpace ) return LinearTransfer;\n\n\t\treturn COLOR_SPACES[ colorSpace ].transfer;\n\n\t},\n\n};\n\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nlet _canvas;\n\nclass ImageUtils {\n\n\tstatic getDataURL( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement === 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = createElementNS( 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons', image );\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n\tstatic sRGBToLinear( image ) {\n\n\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\tconst canvas = createElementNS( 'canvas' );\n\n\t\t\tcanvas.width = image.width;\n\t\t\tcanvas.height = image.height;\n\n\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\tconst imageData = context.getImageData( 0, 0, image.width, image.height );\n\t\t\tconst data = imageData.data;\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] / 255 ) * 255;\n\n\t\t\t}\n\n\t\t\tcontext.putImageData( imageData, 0, 0 );\n\n\t\t\treturn canvas;\n\n\t\t} else if ( image.data ) {\n\n\t\t\tconst data = image.data.slice( 0 );\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tif ( data instanceof Uint8Array || data instanceof Uint8ClampedArray ) {\n\n\t\t\t\t\tdata[ i ] = Math.floor( SRGBToLinear( data[ i ] / 255 ) * 255 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// assuming float\n\n\t\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdata: data,\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.' );\n\t\t\treturn image;\n\n\t\t}\n\n\t}\n\n}\n\nlet _sourceId = 0;\n\nclass Source {\n\n\tconstructor( data = null ) {\n\n\t\tthis.isSource = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _sourceId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.data = data;\n\t\tthis.dataReady = true;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.images[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.images[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\t\t\tuuid: this.uuid,\n\t\t\turl: ''\n\t\t};\n\n\t\tconst data = this.data;\n\n\t\tif ( data !== null ) {\n\n\t\t\tlet url;\n\n\t\t\tif ( Array.isArray( data ) ) {\n\n\t\t\t\t// cube texture\n\n\t\t\t\turl = [];\n\n\t\t\t\tfor ( let i = 0, l = data.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( data[ i ].isDataTexture ) {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ].image ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// texture\n\n\t\t\t\turl = serializeImage( data );\n\n\t\t\t}\n\n\t\t\toutput.url = url;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.images[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n}\n\nfunction serializeImage( image ) {\n\n\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t// default images\n\n\t\treturn ImageUtils.getDataURL( image );\n\n\t} else {\n\n\t\tif ( image.data ) {\n\n\t\t\t// images of DataTexture\n\n\t\t\treturn {\n\t\t\t\tdata: Array.from( image.data ),\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height,\n\t\t\t\ttype: image.data.constructor.name\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Texture: Unable to serialize Texture.' );\n\t\t\treturn {};\n\n\t\t}\n\n\t}\n\n}\n\nlet _textureId = 0;\n\nclass Texture extends EventDispatcher {\n\n\tconstructor( image = Texture.DEFAULT_IMAGE, mapping = Texture.DEFAULT_MAPPING, wrapS = ClampToEdgeWrapping, wrapT = ClampToEdgeWrapping, magFilter = LinearFilter, minFilter = LinearMipmapLinearFilter, format = RGBAFormat, type = UnsignedByteType, anisotropy = Texture.DEFAULT_ANISOTROPY, colorSpace = NoColorSpace ) {\n\n\t\tsuper();\n\n\t\tthis.isTexture = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _textureId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\n\t\tthis.source = new Source( image );\n\t\tthis.mipmaps = [];\n\n\t\tthis.mapping = mapping;\n\t\tthis.channel = 0;\n\n\t\tthis.wrapS = wrapS;\n\t\tthis.wrapT = wrapT;\n\n\t\tthis.magFilter = magFilter;\n\t\tthis.minFilter = minFilter;\n\n\t\tthis.anisotropy = anisotropy;\n\n\t\tthis.format = format;\n\t\tthis.internalFormat = null;\n\t\tthis.type = type;\n\n\t\tthis.offset = new Vector2( 0, 0 );\n\t\tthis.repeat = new Vector2( 1, 1 );\n\t\tthis.center = new Vector2( 0, 0 );\n\t\tthis.rotation = 0;\n\n\t\tthis.matrixAutoUpdate = true;\n\t\tthis.matrix = new Matrix3();\n\n\t\tthis.generateMipmaps = true;\n\t\tthis.premultiplyAlpha = false;\n\t\tthis.flipY = true;\n\t\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t\tif ( typeof colorSpace === 'string' ) {\n\n\t\t\tthis.colorSpace = colorSpace;\n\n\t\t} else { // @deprecated, r152\n\n\t\t\twarnOnce( 'THREE.Texture: Property .encoding has been replaced by .colorSpace.' );\n\t\t\tthis.colorSpace = colorSpace === sRGBEncoding ? SRGBColorSpace : NoColorSpace;\n\n\t\t}\n\n\n\t\tthis.userData = {};\n\n\t\tthis.version = 0;\n\t\tthis.onUpdate = null;\n\n\t\tthis.isRenderTargetTexture = false; // indicates whether a texture belongs to a render target or not\n\t\tthis.needsPMREMUpdate = false; // indicates whether this texture should be processed by PMREMGenerator or not (only relevant for render target textures)\n\n\t}\n\n\tget image() {\n\n\t\treturn this.source.data;\n\n\t}\n\n\tset image( value = null ) {\n\n\t\tthis.source.data = value;\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.source = source.source;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\t\tthis.channel = source.channel;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.colorSpace = source.colorSpace;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tthis.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\timage: this.source.toJSON( meta ).uuid,\n\n\t\t\tmapping: this.mapping,\n\t\t\tchannel: this.channel,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\tinternalFormat: this.internalFormat,\n\t\t\ttype: this.type,\n\t\t\tcolorSpace: this.colorSpace,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tgenerateMipmaps: this.generateMipmaps,\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( Object.keys( this.userData ).length > 0 ) output.userData = this.userData;\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\ttransformUv( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) {\n\n\t\t\tthis.version ++;\n\t\t\tthis.source.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tget encoding() { // @deprecated, r152\n\n\t\twarnOnce( 'THREE.Texture: Property .encoding has been replaced by .colorSpace.' );\n\t\treturn this.colorSpace === SRGBColorSpace ? sRGBEncoding : LinearEncoding;\n\n\t}\n\n\tset encoding( encoding ) { // @deprecated, r152\n\n\t\twarnOnce( 'THREE.Texture: Property .encoding has been replaced by .colorSpace.' );\n\t\tthis.colorSpace = encoding === sRGBEncoding ? SRGBColorSpace : NoColorSpace;\n\n\t}\n\n}\n\nTexture.DEFAULT_IMAGE = null;\nTexture.DEFAULT_MAPPING = UVMapping;\nTexture.DEFAULT_ANISOTROPY = 1;\n\nclass Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tVector4.prototype.isVector4 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\tthis.w *= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = Math.trunc( this.x );\n\t\tthis.y = Math.trunc( this.y );\n\t\tthis.z = Math.trunc( this.z );\n\t\tthis.w = Math.trunc( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\t\tyield this.w;\n\n\t}\n\n}\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nclass RenderTarget extends EventDispatcher {\n\n\tconstructor( width = 1, height = 1, options = {} ) {\n\n\t\tsuper();\n\n\t\tthis.isRenderTarget = true;\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = 1;\n\n\t\tthis.scissor = new Vector4( 0, 0, width, height );\n\t\tthis.scissorTest = false;\n\n\t\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\t\tconst image = { width: width, height: height, depth: 1 };\n\n\t\tif ( options.encoding !== undefined ) {\n\n\t\t\t// @deprecated, r152\n\t\t\twarnOnce( 'THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace.' );\n\t\t\toptions.colorSpace = options.encoding === sRGBEncoding ? SRGBColorSpace : NoColorSpace;\n\n\t\t}\n\n\t\toptions = Object.assign( {\n\t\t\tgenerateMipmaps: false,\n\t\t\tinternalFormat: null,\n\t\t\tminFilter: LinearFilter,\n\t\t\tdepthBuffer: true,\n\t\t\tstencilBuffer: false,\n\t\t\tdepthTexture: null,\n\t\t\tsamples: 0\n\t\t}, options );\n\n\t\tthis.texture = new Texture( image, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.colorSpace );\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\tthis.texture.flipY = false;\n\t\tthis.texture.generateMipmaps = options.generateMipmaps;\n\t\tthis.texture.internalFormat = options.internalFormat;\n\n\t\tthis.depthBuffer = options.depthBuffer;\n\t\tthis.stencilBuffer = options.stencilBuffer;\n\n\t\tthis.depthTexture = options.depthTexture;\n\n\t\tthis.samples = options.samples;\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\t\t\tthis.texture.image.depth = depth;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.scissor.copy( source.scissor );\n\t\tthis.scissorTest = source.scissorTest;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\t// ensure image object is not shared, see #20328\n\n\t\tconst image = Object.assign( {}, source.texture.image );\n\t\tthis.texture.source = new Source( image );\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\n\t\tif ( source.depthTexture !== null ) this.depthTexture = source.depthTexture.clone();\n\n\t\tthis.samples = source.samples;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nclass WebGLRenderTarget extends RenderTarget {\n\n\tconstructor( width = 1, height = 1, options = {} ) {\n\n\t\tsuper( width, height, options );\n\n\t\tthis.isWebGLRenderTarget = true;\n\n\t}\n\n}\n\nclass DataArrayTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\tsuper( null );\n\n\t\tthis.isDataArrayTexture = true;\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nclass WebGLArrayRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width = 1, height = 1, depth = 1, options = {} ) {\n\n\t\tsuper( width, height, options );\n\n\t\tthis.isWebGLArrayRenderTarget = true;\n\n\t\tthis.depth = depth;\n\n\t\tthis.texture = new DataArrayTexture( null, width, height, depth );\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t}\n\n}\n\nclass Data3DTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\t// We're going to add .setXXX() methods for setting properties later.\n\t\t// Users can still set in DataTexture3D directly.\n\t\t//\n\t\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n\t\t// \ttexture.anisotropy = 16;\n\t\t//\n\t\t// See #14839\n\n\t\tsuper( null );\n\n\t\tthis.isData3DTexture = true;\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nclass WebGL3DRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width = 1, height = 1, depth = 1, options = {} ) {\n\n\t\tsuper( width, height, options );\n\n\t\tthis.isWebGL3DRenderTarget = true;\n\n\t\tthis.depth = depth;\n\n\t\tthis.texture = new Data3DTexture( null, width, height, depth );\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t}\n\n}\n\nclass WebGLMultipleRenderTargets extends WebGLRenderTarget {\n\n\tconstructor( width = 1, height = 1, count = 1, options = {} ) {\n\n\t\tsuper( width, height, options );\n\n\t\tthis.isWebGLMultipleRenderTargets = true;\n\n\t\tconst texture = this.texture;\n\n\t\tthis.texture = [];\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.texture[ i ] = texture.clone();\n\t\t\tthis.texture[ i ].isRenderTargetTexture = true;\n\n\t\t}\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tfor ( let i = 0, il = this.texture.length; i < il; i ++ ) {\n\n\t\t\t\tthis.texture[ i ].image.width = width;\n\t\t\t\tthis.texture[ i ].image.height = height;\n\t\t\t\tthis.texture[ i ].image.depth = depth;\n\n\t\t\t}\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.dispose();\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.scissor.copy( source.scissor );\n\t\tthis.scissorTest = source.scissorTest;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\n\t\tif ( source.depthTexture !== null ) this.depthTexture = source.depthTexture.clone();\n\n\t\tthis.texture.length = 0;\n\n\t\tfor ( let i = 0, il = source.texture.length; i < il; i ++ ) {\n\n\t\t\tthis.texture[ i ] = source.texture[ i ].clone();\n\t\t\tthis.texture[ i ].isRenderTargetTexture = true;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis.isQuaternion = true;\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update = true ) {\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update === true ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < Number.EPSILON ) {\n\n\t\t\t// vFrom and vTo point in opposite directions\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize(); // normalize calls _onChangeCallback()\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerpQuaternions( qa, qb, t ) {\n\n\t\treturn this.copy( qa ).slerp( qb, t );\n\n\t}\n\n\trandom() {\n\n\t\t// Derived from http://planning.cs.uiuc.edu/node198.html\n\t\t// Note, this source uses w, x, y, z ordering,\n\t\t// so we swap the order below.\n\n\t\tconst u1 = Math.random();\n\t\tconst sqrt1u1 = Math.sqrt( 1 - u1 );\n\t\tconst sqrtu1 = Math.sqrt( u1 );\n\n\t\tconst u2 = 2 * Math.PI * Math.random();\n\n\t\tconst u3 = 2 * Math.PI * Math.random();\n\n\t\treturn this.set(\n\t\t\tsqrt1u1 * Math.cos( u2 ),\n\t\t\tsqrtu1 * Math.sin( u3 ),\n\t\t\tsqrtu1 * Math.cos( u3 ),\n\t\t\tsqrt1u1 * Math.sin( u2 ),\n\t\t);\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.toArray();\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this._x;\n\t\tyield this._y;\n\t\tyield this._z;\n\t\tyield this._w;\n\n\t}\n\n}\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tVector3.prototype.isVector3 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\treturn this.applyQuaternion( _quaternion$4.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion$4.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\t// quaternion q is assumed to have unit length\n\n\t\tconst vx = this.x, vy = this.y, vz = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// t = 2 * cross( q.xyz, v );\n\t\tconst tx = 2 * ( qy * vz - qz * vy );\n\t\tconst ty = 2 * ( qz * vx - qx * vz );\n\t\tconst tz = 2 * ( qx * vy - qy * vx );\n\n\t\t// v + q.w * t + cross( q.xyz, t );\n\t\tthis.x = vx + qw * tx + qy * tz - qz * ty;\n\t\tthis.y = vy + qw * ty + qz * tx - qx * tz;\n\t\tthis.z = vz + qw * tz + qx * ty - qy * tx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = Math.trunc( this.x );\n\t\tthis.y = Math.trunc( this.y );\n\t\tthis.z = Math.trunc( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector$c.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector$c );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector$c.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tsetFromEuler( e ) {\n\n\t\tthis.x = e._x;\n\t\tthis.y = e._y;\n\t\tthis.z = e._z;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromColor( c ) {\n\n\t\tthis.x = c.r;\n\t\tthis.y = c.g;\n\t\tthis.z = c.b;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\trandomDirection() {\n\n\t\t// Derived from https://mathworld.wolfram.com/SpherePointPicking.html\n\n\t\tconst u = ( Math.random() - 0.5 ) * 2;\n\t\tconst t = Math.random() * Math.PI * 2;\n\t\tconst f = Math.sqrt( 1 - u ** 2 );\n\n\t\tthis.x = f * Math.cos( t );\n\t\tthis.y = f * Math.sin( t );\n\t\tthis.z = u;\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\n\t}\n\n}\n\nconst _vector$c = /*@__PURE__*/ new Vector3();\nconst _quaternion$4 = /*@__PURE__*/ new Quaternion();\n\nclass Box3 {\n\n\tconstructor( min = new Vector3( + Infinity, + Infinity, + Infinity ), max = new Vector3( - Infinity, - Infinity, - Infinity ) ) {\n\n\t\tthis.isBox3 = true;\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromArray( array ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = array.length; i < il; i += 3 ) {\n\n\t\t\tthis.expandByPoint( _vector$b.fromArray( array, i ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromBufferAttribute( attribute ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( _vector$b.fromBufferAttribute( attribute, i ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$b.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object, precise = false ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object, precise );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\texpandByObject( object, precise = false ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\n\t\t\t// precise AABB computation based on vertex data requires at least a position attribute.\n\t\t\t// instancing isn't supported so far and uses the normal (conservative) code path.\n\n\t\t\tif ( precise === true && positionAttribute !== undefined && object.isInstancedMesh !== true ) {\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\tif ( object.isMesh === true ) {\n\n\t\t\t\t\t\tobject.getVertexPosition( i, _vector$b );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_vector$b.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_vector$b.applyMatrix4( object.matrixWorld );\n\t\t\t\t\tthis.expandByPoint( _vector$b );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( object.boundingBox !== undefined ) {\n\n\t\t\t\t\t// object-level bounding box\n\n\t\t\t\t\tif ( object.boundingBox === null ) {\n\n\t\t\t\t\t\tobject.computeBoundingBox();\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_box$4.copy( object.boundingBox );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// geometry-level bounding box\n\n\t\t\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_box$4.copy( geometry.boundingBox );\n\n\t\t\t\t}\n\n\t\t\t\t_box$4.applyMatrix4( object.matrixWorld );\n\n\t\t\t\tthis.union( _box$4 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ], precise );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector$b );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector$b.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tlet min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t}\n\n\tintersectsTriangle( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0$2.subVectors( triangle.a, _center );\n\t\t_v1$7.subVectors( triangle.b, _center );\n\t\t_v2$4.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1$7, _v0$2 );\n\t\t_f1.subVectors( _v2$4, _v1$7 );\n\t\t_f2.subVectors( _v0$2, _v2$4 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tlet axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0$2, _v1$7, _v2$4, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0$2, _v1$7, _v2$4, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0$2, _v1$7, _v2$4, _extents );\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.clampPoint( point, _vector$b ).distanceTo( point );\n\n\t}\n\n\tgetBoundingSphere( target ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\ttarget.makeEmpty();\n\n\t\t} else {\n\n\t\t\tthis.getCenter( target.center );\n\n\t\t\ttarget.radius = this.getSize( _vector$b ).length() * 0.5;\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nconst _points = [\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3()\n];\n\nconst _vector$b = /*@__PURE__*/ new Vector3();\n\nconst _box$4 = /*@__PURE__*/ new Box3();\n\n// triangle centered vertices\n\nconst _v0$2 = /*@__PURE__*/ new Vector3();\nconst _v1$7 = /*@__PURE__*/ new Vector3();\nconst _v2$4 = /*@__PURE__*/ new Vector3();\n\n// triangle edge vectors\n\nconst _f0 = /*@__PURE__*/ new Vector3();\nconst _f1 = /*@__PURE__*/ new Vector3();\nconst _f2 = /*@__PURE__*/ new Vector3();\n\nconst _center = /*@__PURE__*/ new Vector3();\nconst _extents = /*@__PURE__*/ new Vector3();\nconst _triangleNormal = /*@__PURE__*/ new Vector3();\nconst _testAxis = /*@__PURE__*/ new Vector3();\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the separating axis\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the separating axis\n\t\tconst p0 = v0.dot( _testAxis );\n\t\tconst p1 = v1.dot( _testAxis );\n\t\tconst p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is separating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nconst _box$3 = /*@__PURE__*/ new Box3();\nconst _v1$6 = /*@__PURE__*/ new Vector3();\nconst _v2$3 = /*@__PURE__*/ new Vector3();\n\nclass Sphere {\n\n\tconstructor( center = new Vector3(), radius = - 1 ) {\n\n\t\tthis.isSphere = true;\n\n\t\tthis.center = center;\n\t\tthis.radius = radius;\n\n\t}\n\n\tset( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points, optionalCenter ) {\n\n\t\tconst center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box$3.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tlet maxRadiusSq = 0;\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn ( this.radius < 0 );\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.center.set( 0, 0, 0 );\n\t\tthis.radius = - 1;\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\t// Empty sphere produces empty bounding box\n\t\t\ttarget.makeEmpty();\n\t\t\treturn target;\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\tthis.center.copy( point );\n\n\t\t\tthis.radius = 0;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t_v1$6.subVectors( point, this.center );\n\n\t\tconst lengthSq = _v1$6.lengthSq();\n\n\t\tif ( lengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\t// calculate the minimal sphere\n\n\t\t\tconst length = Math.sqrt( lengthSq );\n\n\t\t\tconst delta = ( length - this.radius ) * 0.5;\n\n\t\t\tthis.center.addScaledVector( _v1$6, delta / length );\n\n\t\t\tthis.radius += delta;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunion( sphere ) {\n\n\t\tif ( sphere.isEmpty() ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\tthis.copy( sphere );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( this.center.equals( sphere.center ) === true ) {\n\n\t\t\t this.radius = Math.max( this.radius, sphere.radius );\n\n\t\t} else {\n\n\t\t\t_v2$3.subVectors( sphere.center, this.center ).setLength( sphere.radius );\n\n\t\t\tthis.expandByPoint( _v1$6.copy( sphere.center ).add( _v2$3 ) );\n\n\t\t\tthis.expandByPoint( _v1$6.copy( sphere.center ).sub( _v2$3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tequals( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$a = /*@__PURE__*/ new Vector3();\nconst _segCenter = /*@__PURE__*/ new Vector3();\nconst _segDir = /*@__PURE__*/ new Vector3();\nconst _diff = /*@__PURE__*/ new Vector3();\n\nconst _edge1 = /*@__PURE__*/ new Vector3();\nconst _edge2 = /*@__PURE__*/ new Vector3();\nconst _normal$1 = /*@__PURE__*/ new Vector3();\n\nclass Ray {\n\n\tconstructor( origin = new Vector3(), direction = new Vector3( 0, 0, - 1 ) ) {\n\n\t\tthis.origin = origin;\n\t\tthis.direction = direction;\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t}\n\n\tat( t, target ) {\n\n\t\treturn target.copy( this.origin ).addScaledVector( this.direction, t );\n\n\t}\n\n\tlookAt( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\trecast( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector$a ) );\n\n\t\treturn this;\n\n\t}\n\n\tclosestPointToPoint( point, target ) {\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tconst directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.origin ).addScaledVector( this.direction, directionDistance );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t}\n\n\tdistanceSqToPoint( point ) {\n\n\t\tconst directionDistance = _vector$a.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector$a.copy( this.origin ).addScaledVector( this.direction, directionDistance );\n\n\t\treturn _vector$a.distanceToSquared( point );\n\n\t}\n\n\tdistanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tconst a01 = - this.direction.dot( _segDir );\n\t\tconst b0 = _diff.dot( this.direction );\n\t\tconst b1 = - _diff.dot( _segDir );\n\t\tconst c = _diff.lengthSq();\n\t\tconst det = Math.abs( 1 - a01 * a01 );\n\t\tlet s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tconst invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.origin ).addScaledVector( this.direction, s0 );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segCenter ).addScaledVector( _segDir, s1 );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t}\n\n\tintersectSphere( sphere, target ) {\n\n\t\t_vector$a.subVectors( sphere.center, this.origin );\n\t\tconst tca = _vector$a.dot( this.direction );\n\t\tconst d2 = _vector$a.dot( _vector$a ) - tca * tca;\n\t\tconst radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tconst thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tconst t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tconst t1 = tca + thc;\n\n\t\t// test to see if t1 is behind the ray - if so, return null\n\t\tif ( t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tdistanceToPlane( plane ) {\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t}\n\n\tintersectPlane( plane, target ) {\n\n\t\tconst t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t}\n\n\tintersectBox( box, target ) {\n\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tconst invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tconst origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\tif ( tymin > tmin || isNaN( tmin ) ) tmin = tymin;\n\n\t\tif ( tymax < tmax || isNaN( tmax ) ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn this.intersectBox( box, _vector$a ) !== null;\n\n\t}\n\n\tintersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal$1.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tlet DdN = this.direction.dot( _normal$1 );\n\t\tlet sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tconst QdN = - sign * _diff.dot( _normal$1 );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t}\n\n\tapplyMatrix4( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t}\n\n\tequals( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass Matrix4 {\n\n\tconstructor( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tMatrix4.prototype.isMatrix4 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( n11 !== undefined ) {\n\n\t\t\tthis.set( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1$5.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1$5.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1$5.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, 0, x.x,\n\t\t\t\t0, 1, 0, x.y,\n\t\t\t\t0, 0, 1, x.z,\n\t\t\t\t0, 0, 0, 1\n\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, 0, x,\n\t\t\t\t0, 1, 0, y,\n\t\t\t\t0, 0, 1, z,\n\t\t\t\t0, 0, 0, 1\n\n\t\t\t);\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( xy, xz, yx, yz, zx, zy ) {\n\n\t\tthis.set(\n\n\t\t\t1, yx, zx, 0,\n\t\t\txy, 1, zy, 0,\n\t\t\txz, yz, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1$5.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1$5.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1$5.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1$2.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1$2.elements[ 0 ] *= invSX;\n\t\t_m1$2.elements[ 1 ] *= invSX;\n\t\t_m1$2.elements[ 2 ] *= invSX;\n\n\t\t_m1$2.elements[ 4 ] *= invSY;\n\t\t_m1$2.elements[ 5 ] *= invSY;\n\t\t_m1$2.elements[ 6 ] *= invSY;\n\n\t\t_m1$2.elements[ 8 ] *= invSZ;\n\t\t_m1$2.elements[ 9 ] *= invSZ;\n\t\t_m1$2.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1$2 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far, coordinateSystem = WebGLCoordinateSystem ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\n\t\tlet c, d;\n\n\t\tif ( coordinateSystem === WebGLCoordinateSystem ) {\n\n\t\t\tc = - ( far + near ) / ( far - near );\n\t\t\td = ( - 2 * far * near ) / ( far - near );\n\n\t\t} else if ( coordinateSystem === WebGPUCoordinateSystem ) {\n\n\t\t\tc = - far / ( far - near );\n\t\t\td = ( - far * near ) / ( far - near );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.Matrix4.makePerspective(): Invalid coordinate system: ' + coordinateSystem );\n\n\t\t}\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a; \tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b; \tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c; \tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far, coordinateSystem = WebGLCoordinateSystem ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\n\t\tlet z, zInv;\n\n\t\tif ( coordinateSystem === WebGLCoordinateSystem ) {\n\n\t\t\tz = ( far + near ) * p;\n\t\t\tzInv = - 2 * p;\n\n\t\t} else if ( coordinateSystem === WebGPUCoordinateSystem ) {\n\n\t\t\tz = near * p;\n\t\t\tzInv = - 1 * p;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.Matrix4.makeOrthographic(): Invalid coordinate system: ' + coordinateSystem );\n\n\t\t}\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\t\tte[ 8 ] = 0; \t\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0; \t\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0; \t\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0; \t\tte[ 6 ] = 0;\t\tte[ 10 ] = zInv;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0; \t\tte[ 7 ] = 0;\t\tte[ 11 ] = 0;\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nconst _v1$5 = /*@__PURE__*/ new Vector3();\nconst _m1$2 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nconst _matrix$1 = /*@__PURE__*/ new Matrix4();\nconst _quaternion$3 = /*@__PURE__*/ new Quaternion();\n\nclass Euler {\n\n\tconstructor( x = 0, y = 0, z = 0, order = Euler.DEFAULT_ORDER ) {\n\n\t\tthis.isEuler = true;\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget order() {\n\n\t\treturn this._order;\n\n\t}\n\n\tset order( value ) {\n\n\t\tthis._order = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, order = this._order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t}\n\n\tcopy( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m, order = this._order, update = true ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update === true ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromQuaternion( q, order, update ) {\n\n\t\t_matrix$1.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix$1, order, update );\n\n\t}\n\n\tsetFromVector3( v, order = this._order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order );\n\n\t}\n\n\treorder( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion$3.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion$3, newOrder );\n\n\t}\n\n\tequals( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t}\n\n\tfromArray( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this._x;\n\t\tyield this._y;\n\t\tyield this._z;\n\t\tyield this._order;\n\n\t}\n\n}\n\nEuler.DEFAULT_ORDER = 'XYZ';\n\nclass Layers {\n\n\tconstructor() {\n\n\t\tthis.mask = 1 | 0;\n\n\t}\n\n\tset( channel ) {\n\n\t\tthis.mask = ( 1 << channel | 0 ) >>> 0;\n\n\t}\n\n\tenable( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t}\n\n\tenableAll() {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t}\n\n\ttoggle( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t}\n\n\tdisable( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t}\n\n\tdisableAll() {\n\n\t\tthis.mask = 0;\n\n\t}\n\n\ttest( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n\tisEnabled( channel ) {\n\n\t\treturn ( this.mask & ( 1 << channel | 0 ) ) !== 0;\n\n\t}\n\n}\n\nlet _object3DId = 0;\n\nconst _v1$4 = /*@__PURE__*/ new Vector3();\nconst _q1 = /*@__PURE__*/ new Quaternion();\nconst _m1$1 = /*@__PURE__*/ new Matrix4();\nconst _target = /*@__PURE__*/ new Vector3();\n\nconst _position$3 = /*@__PURE__*/ new Vector3();\nconst _scale$2 = /*@__PURE__*/ new Vector3();\nconst _quaternion$2 = /*@__PURE__*/ new Quaternion();\n\nconst _xAxis = /*@__PURE__*/ new Vector3( 1, 0, 0 );\nconst _yAxis = /*@__PURE__*/ new Vector3( 0, 1, 0 );\nconst _zAxis = /*@__PURE__*/ new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\nclass Object3D extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isObject3D = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Object3D';\n\n\t\tthis.parent = null;\n\t\tthis.children = [];\n\n\t\tthis.up = Object3D.DEFAULT_UP.clone();\n\n\t\tconst position = new Vector3();\n\t\tconst rotation = new Euler();\n\t\tconst quaternion = new Quaternion();\n\t\tconst scale = new Vector3( 1, 1, 1 );\n\n\t\tfunction onRotationChange() {\n\n\t\t\tquaternion.setFromEuler( rotation, false );\n\n\t\t}\n\n\t\tfunction onQuaternionChange() {\n\n\t\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t\t}\n\n\t\trotation._onChange( onRotationChange );\n\t\tquaternion._onChange( onQuaternionChange );\n\n\t\tObject.defineProperties( this, {\n\t\t\tposition: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: position\n\t\t\t},\n\t\t\trotation: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: rotation\n\t\t\t},\n\t\t\tquaternion: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: quaternion\n\t\t\t},\n\t\t\tscale: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: scale\n\t\t\t},\n\t\t\tmodelViewMatrix: {\n\t\t\t\tvalue: new Matrix4()\n\t\t\t},\n\t\t\tnormalMatrix: {\n\t\t\t\tvalue: new Matrix3()\n\t\t\t}\n\t\t} );\n\n\t\tthis.matrix = new Matrix4();\n\t\tthis.matrixWorld = new Matrix4();\n\n\t\tthis.matrixAutoUpdate = Object3D.DEFAULT_MATRIX_AUTO_UPDATE;\n\n\t\tthis.matrixWorldAutoUpdate = Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE; // checked by the renderer\n\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\tthis.layers = new Layers();\n\t\tthis.visible = true;\n\n\t\tthis.castShadow = false;\n\t\tthis.receiveShadow = false;\n\n\t\tthis.frustumCulled = true;\n\t\tthis.renderOrder = 0;\n\n\t\tthis.animations = [];\n\n\t\tthis.userData = {};\n\n\t}\n\n\tonBeforeShadow( /* renderer, object, camera, shadowCamera, geometry, depthMaterial, group */ ) {}\n\n\tonAfterShadow( /* renderer, object, camera, shadowCamera, geometry, depthMaterial, group */ ) {}\n\n\tonBeforeRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tonAfterRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t}\n\n\tsetRotationFromAxisAngle( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t}\n\n\tsetRotationFromEuler( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t}\n\n\tsetRotationFromMatrix( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t}\n\n\tsetRotationFromQuaternion( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t}\n\n\trotateOnAxis( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateOnWorldAxis( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t}\n\n\trotateY( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t}\n\n\ttranslateOnAxis( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1$4.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1$4.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t}\n\n\ttranslateX( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t}\n\n\ttranslateY( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t}\n\n\ttranslateZ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t}\n\n\tlocalToWorld( vector ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t}\n\n\tworldToLocal( vector ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn vector.applyMatrix4( _m1$1.copy( this.matrixWorld ).invert() );\n\n\t}\n\n\tlookAt( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position$3.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1$1.lookAt( _position$3, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1$1.lookAt( _target, _position$3, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\n\t\t\tthis.quaternion.premultiply( _q1.invert() );\n\n\t\t}\n\n\t}\n\n\tadd( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object can\\'t be added as a child of itself.', object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object && object.isObject3D ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object not an instance of THREE.Object3D.', object );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremove( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremoveFromParent() {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tparent.remove( this );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclear() {\n\n\t\treturn this.remove( ... this.children );\n\n\t}\n\n\tattach( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\t// Note: This method does not support scene graphs having non-uniformly-scaled nodes(s)\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1$1.copy( this.matrixWorld ).invert();\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1$1 );\n\n\t\tthis.add( object );\n\n\t\tobject.updateWorldMatrix( false, true );\n\n\t\treturn this;\n\n\t}\n\n\tgetObjectById( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t}\n\n\tgetObjectByName( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t}\n\n\tgetObjectByProperty( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = this.children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tgetObjectsByProperty( name, value, result = [] ) {\n\n\t\tif ( this[ name ] === value ) result.push( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].getObjectsByProperty( name, value, result );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tgetWorldPosition( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t}\n\n\tgetWorldQuaternion( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position$3, target, _scale$2 );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldScale( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position$3, _quaternion$2, target );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldDirection( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t}\n\n\traycast( /* raycaster, intersects */ ) {}\n\n\ttraverse( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseVisible( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseAncestors( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tconst child = children[ i ];\n\n\t\t\tif ( child.matrixWorldAutoUpdate === true || force === true ) {\n\n\t\t\t\tchild.updateMatrixWorld( force );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateWorldMatrix( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null && parent.matrixWorldAutoUpdate === true ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tconst child = children[ i ];\n\n\t\t\t\tif ( child.matrixWorldAutoUpdate === true ) {\n\n\t\t\t\t\tchild.updateWorldMatrix( false, true );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tconst output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {},\n\t\t\t\tskeletons: {},\n\t\t\t\tanimations: {},\n\t\t\t\tnodes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tconst object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( Object.keys( this.userData ).length > 0 ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\t\tobject.up = this.up.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\t\t\tif ( this.instanceColor !== null ) object.instanceColor = this.instanceColor.toJSON();\n\n\t\t}\n\n\t\tif ( this.isBatchedMesh ) {\n\n\t\t\tobject.type = 'BatchedMesh';\n\t\t\tobject.perObjectFrustumCulled = this.perObjectFrustumCulled;\n\t\t\tobject.sortObjects = this.sortObjects;\n\n\t\t\tobject.drawRanges = this._drawRanges;\n\t\t\tobject.reservedRanges = this._reservedRanges;\n\n\t\t\tobject.visibility = this._visibility;\n\t\t\tobject.active = this._active;\n\t\t\tobject.bounds = this._bounds.map( bound => ( {\n\t\t\t\tboxInitialized: bound.boxInitialized,\n\t\t\t\tboxMin: bound.box.min.toArray(),\n\t\t\t\tboxMax: bound.box.max.toArray(),\n\n\t\t\t\tsphereInitialized: bound.sphereInitialized,\n\t\t\t\tsphereRadius: bound.sphere.radius,\n\t\t\t\tsphereCenter: bound.sphere.center.toArray()\n\t\t\t} ) );\n\n\t\t\tobject.maxGeometryCount = this._maxGeometryCount;\n\t\t\tobject.maxVertexCount = this._maxVertexCount;\n\t\t\tobject.maxIndexCount = this._maxIndexCount;\n\n\t\t\tobject.geometryInitialized = this._geometryInitialized;\n\t\t\tobject.geometryCount = this._geometryCount;\n\n\t\t\tobject.matricesTexture = this._matricesTexture.toJSON( meta );\n\n\t\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\t\tobject.boundingSphere = {\n\t\t\t\t\tcenter: object.boundingSphere.center.toArray(),\n\t\t\t\t\tradius: object.boundingSphere.radius\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tif ( this.boundingBox !== null ) {\n\n\t\t\t\tobject.boundingBox = {\n\t\t\t\t\tmin: object.boundingBox.min.toArray(),\n\t\t\t\t\tmax: object.boundingBox.max.toArray()\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isScene ) {\n\n\t\t\tif ( this.background ) {\n\n\t\t\t\tif ( this.background.isColor ) {\n\n\t\t\t\t\tobject.background = this.background.toJSON();\n\n\t\t\t\t} else if ( this.background.isTexture ) {\n\n\t\t\t\t\tobject.background = this.background.toJSON( meta ).uuid;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.environment && this.environment.isTexture && this.environment.isRenderTargetTexture !== true ) {\n\n\t\t\t\tobject.environment = this.environment.toJSON( meta ).uuid;\n\n\t\t\t}\n\n\t\t} else if ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tconst parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tconst shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.isSkinnedMesh ) {\n\n\t\t\tobject.bindMode = this.bindMode;\n\t\t\tobject.bindMatrix = this.bindMatrix.toArray();\n\n\t\t\tif ( this.skeleton !== undefined ) {\n\n\t\t\t\tserialize( meta.skeletons, this.skeleton );\n\n\t\t\t\tobject.skeleton = this.skeleton.uuid;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tconst uuids = [];\n\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.animations.length > 0 ) {\n\n\t\t\tobject.animations = [];\n\n\t\t\tfor ( let i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\t\tconst animation = this.animations[ i ];\n\n\t\t\t\tobject.animations.push( serialize( meta.animations, animation ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst geometries = extractFromCache( meta.geometries );\n\t\t\tconst materials = extractFromCache( meta.materials );\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst shapes = extractFromCache( meta.shapes );\n\t\t\tconst skeletons = extractFromCache( meta.skeletons );\n\t\t\tconst animations = extractFromCache( meta.animations );\n\t\t\tconst nodes = extractFromCache( meta.nodes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\t\t\tif ( skeletons.length > 0 ) output.skeletons = skeletons;\n\t\t\tif ( animations.length > 0 ) output.animations = animations;\n\t\t\tif ( nodes.length > 0 ) output.nodes = nodes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t}\n\n\tclone( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t}\n\n\tcopy( source, recursive = true ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.rotation.order = source.rotation.order;\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\tthis.matrixWorldAutoUpdate = source.matrixWorldAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.animations = source.animations.slice();\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tconst child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nObject3D.DEFAULT_UP = /*@__PURE__*/ new Vector3( 0, 1, 0 );\nObject3D.DEFAULT_MATRIX_AUTO_UPDATE = true;\nObject3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = true;\n\nconst _v0$1 = /*@__PURE__*/ new Vector3();\nconst _v1$3 = /*@__PURE__*/ new Vector3();\nconst _v2$2 = /*@__PURE__*/ new Vector3();\nconst _v3$2 = /*@__PURE__*/ new Vector3();\n\nconst _vab = /*@__PURE__*/ new Vector3();\nconst _vac = /*@__PURE__*/ new Vector3();\nconst _vbc = /*@__PURE__*/ new Vector3();\nconst _vap = /*@__PURE__*/ new Vector3();\nconst _vbp = /*@__PURE__*/ new Vector3();\nconst _vcp = /*@__PURE__*/ new Vector3();\n\nclass Triangle {\n\n\tconstructor( a = new Vector3(), b = new Vector3(), c = new Vector3() ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t}\n\n\tstatic getNormal( a, b, c, target ) {\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0$1.subVectors( a, b );\n\t\ttarget.cross( _v0$1 );\n\n\t\tconst targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t}\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tstatic getBarycoord( point, a, b, c, target ) {\n\n\t\t_v0$1.subVectors( c, a );\n\t\t_v1$3.subVectors( b, a );\n\t\t_v2$2.subVectors( point, a );\n\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\n\t\tconst dot02 = _v0$1.dot( _v2$2 );\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\n\t\tconst dot12 = _v1$3.dot( _v2$2 );\n\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\ttarget.set( 0, 0, 0 );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst invDenom = 1 / denom;\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t}\n\n\tstatic containsPoint( point, a, b, c ) {\n\n\t\t// if the triangle is degenerate then we can't contain a point\n\t\tif ( this.getBarycoord( point, a, b, c, _v3$2 ) === null ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn ( _v3$2.x >= 0 ) && ( _v3$2.y >= 0 ) && ( ( _v3$2.x + _v3$2.y ) <= 1 );\n\n\t}\n\n\tstatic getInterpolation( point, p1, p2, p3, v1, v2, v3, target ) {\n\n\t\tif ( this.getBarycoord( point, p1, p2, p3, _v3$2 ) === null ) {\n\n\t\t\ttarget.x = 0;\n\t\t\ttarget.y = 0;\n\t\t\tif ( 'z' in target ) target.z = 0;\n\t\t\tif ( 'w' in target ) target.w = 0;\n\t\t\treturn null;\n\n\t\t}\n\n\t\ttarget.setScalar( 0 );\n\t\ttarget.addScaledVector( v1, _v3$2.x );\n\t\ttarget.addScaledVector( v2, _v3$2.y );\n\t\ttarget.addScaledVector( v3, _v3$2.z );\n\n\t\treturn target;\n\n\t}\n\n\tstatic isFrontFacing( a, b, c, direction ) {\n\n\t\t_v0$1.subVectors( c, b );\n\t\t_v1$3.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n\tset( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPointsAndIndices( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAttributeAndIndices( attribute, i0, i1, i2 ) {\n\n\t\tthis.a.fromBufferAttribute( attribute, i0 );\n\t\tthis.b.fromBufferAttribute( attribute, i1 );\n\t\tthis.c.fromBufferAttribute( attribute, i2 );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t}\n\n\tgetArea() {\n\n\t\t_v0$1.subVectors( this.c, this.b );\n\t\t_v1$3.subVectors( this.a, this.b );\n\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\n\n\t}\n\n\tgetMidpoint( target ) {\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t}\n\n\tgetNormal( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t}\n\n\tgetPlane( target ) {\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t}\n\n\tgetBarycoord( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t}\n\n\tgetInterpolation( point, v1, v2, v3, target ) {\n\n\t\treturn Triangle.getInterpolation( point, this.a, this.b, this.c, v1, v2, v3, target );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t}\n\n\tisFrontFacing( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t}\n\n\tclosestPointToPoint( p, target ) {\n\n\t\tconst a = this.a, b = this.b, c = this.c;\n\t\tlet v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tconst d1 = _vab.dot( _vap );\n\t\tconst d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tconst d3 = _vab.dot( _vbp );\n\t\tconst d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tconst vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tconst d5 = _vab.dot( _vcp );\n\t\tconst d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tconst vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tconst va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tconst denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t}\n\n\tequals( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n}\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nclass Color {\n\n\tconstructor( r, g, b ) {\n\n\t\tthis.isColor = true;\n\n\t\tthis.r = 1;\n\t\tthis.g = 1;\n\t\tthis.b = 1;\n\n\t\treturn this.set( r, g, b );\n\n\t}\n\n\tset( r, g, b ) {\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\n\t\t\tconst value = r;\n\n\t\t\tif ( value && value.isColor ) {\n\n\t\t\t\tthis.copy( value );\n\n\t\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\t\tthis.setHex( value );\n\n\t\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\t\tthis.setStyle( value );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.setRGB( r, g, b );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetHex( hex, colorSpace = SRGBColorSpace ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetRGB( r, g, b, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetHSL( h, s, l, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = euclideanModulo( h, 1 );\n\t\ts = clamp( s, 0, 1 );\n\t\tl = clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetStyle( style, colorSpace = SRGBColorSpace ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^(\\w+)\\(([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setRGB(\n\t\t\t\t\t\t\tMath.min( 255, parseInt( color[ 1 ], 10 ) ) / 255,\n\t\t\t\t\t\t\tMath.min( 255, parseInt( color[ 2 ], 10 ) ) / 255,\n\t\t\t\t\t\t\tMath.min( 255, parseInt( color[ 3 ], 10 ) ) / 255,\n\t\t\t\t\t\t\tcolorSpace\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setRGB(\n\t\t\t\t\t\t\tMath.min( 100, parseInt( color[ 1 ], 10 ) ) / 100,\n\t\t\t\t\t\t\tMath.min( 100, parseInt( color[ 2 ], 10 ) ) / 100,\n\t\t\t\t\t\t\tMath.min( 100, parseInt( color[ 3 ], 10 ) ) / 100,\n\t\t\t\t\t\t\tcolorSpace\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d*\\.?\\d+)\\%\\s*,\\s*(\\d*\\.?\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setHSL(\n\t\t\t\t\t\t\tparseFloat( color[ 1 ] ) / 360,\n\t\t\t\t\t\t\tparseFloat( color[ 2 ] ) / 100,\n\t\t\t\t\t\t\tparseFloat( color[ 3 ] ) / 100,\n\t\t\t\t\t\t\tcolorSpace\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.warn( 'THREE.Color: Unknown color model ' + style );\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f\\d]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\treturn this.setRGB(\n\t\t\t\t\tparseInt( hex.charAt( 0 ), 16 ) / 15,\n\t\t\t\t\tparseInt( hex.charAt( 1 ), 16 ) / 15,\n\t\t\t\t\tparseInt( hex.charAt( 2 ), 16 ) / 15,\n\t\t\t\t\tcolorSpace\n\t\t\t\t);\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\treturn this.setHex( parseInt( hex, 16 ), colorSpace );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Invalid hex color ' + style );\n\n\t\t\t}\n\n\t\t} else if ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style, colorSpace );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetColorName( style, colorSpace = SRGBColorSpace ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style.toLowerCase() ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex, colorSpace );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t}\n\n\tcopy( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t}\n\n\tcopySRGBToLinear( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToSRGB( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tconvertSRGBToLinear() {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToSRGB() {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetHex( colorSpace = SRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( _color.copy( this ), colorSpace );\n\n\t\treturn Math.round( clamp( _color.r * 255, 0, 255 ) ) * 65536 + Math.round( clamp( _color.g * 255, 0, 255 ) ) * 256 + Math.round( clamp( _color.b * 255, 0, 255 ) );\n\n\t}\n\n\tgetHexString( colorSpace = SRGBColorSpace ) {\n\n\t\treturn ( '000000' + this.getHex( colorSpace ).toString( 16 ) ).slice( - 6 );\n\n\t}\n\n\tgetHSL( target, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tColorManagement.fromWorkingColorSpace( _color.copy( this ), colorSpace );\n\n\t\tconst r = _color.r, g = _color.g, b = _color.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t}\n\n\tgetRGB( target, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( _color.copy( this ), colorSpace );\n\n\t\ttarget.r = _color.r;\n\t\ttarget.g = _color.g;\n\t\ttarget.b = _color.b;\n\n\t\treturn target;\n\n\t}\n\n\tgetStyle( colorSpace = SRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( _color.copy( this ), colorSpace );\n\n\t\tconst r = _color.r, g = _color.g, b = _color.b;\n\n\t\tif ( colorSpace !== SRGBColorSpace ) {\n\n\t\t\t// Requires CSS Color Module Level 4 (https://www.w3.org/TR/css-color-4/).\n\t\t\treturn `color(${ colorSpace } ${ r.toFixed( 3 ) } ${ g.toFixed( 3 ) } ${ b.toFixed( 3 ) })`;\n\n\t\t}\n\n\t\treturn `rgb(${ Math.round( r * 255 ) },${ Math.round( g * 255 ) },${ Math.round( b * 255 ) })`;\n\n\t}\n\n\toffsetHSL( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\treturn this.setHSL( _hslA.h + h, _hslA.s + s, _hslA.l + l );\n\n\t}\n\n\tadd( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t}\n\n\taddColors( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t}\n\n\tlerp( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpColors( color1, color2, alpha ) {\n\n\t\tthis.r = color1.r + ( color2.r - color1.r ) * alpha;\n\t\tthis.g = color1.g + ( color2.g - color1.g ) * alpha;\n\t\tthis.b = color1.b + ( color2.b - color1.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpHSL( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\tthis.r = v.x;\n\t\tthis.g = v.y;\n\t\tthis.b = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst r = this.r, g = this.g, b = this.b;\n\t\tconst e = m.elements;\n\n\t\tthis.r = e[ 0 ] * r + e[ 3 ] * g + e[ 6 ] * b;\n\t\tthis.g = e[ 1 ] * r + e[ 4 ] * g + e[ 7 ] * b;\n\t\tthis.b = e[ 2 ] * r + e[ 5 ] * g + e[ 8 ] * b;\n\n\t\treturn this;\n\n\t}\n\n\tequals( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.getHex();\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.r;\n\t\tyield this.g;\n\t\tyield this.b;\n\n\t}\n\n}\n\nconst _color = /*@__PURE__*/ new Color();\n\nColor.NAMES = _colorKeywords;\n\nlet _materialId = 0;\n\nclass Material extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isMaterial = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _materialId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Material';\n\n\t\tthis.blending = NormalBlending;\n\t\tthis.side = FrontSide;\n\t\tthis.vertexColors = false;\n\n\t\tthis.opacity = 1;\n\t\tthis.transparent = false;\n\t\tthis.alphaHash = false;\n\n\t\tthis.blendSrc = SrcAlphaFactor;\n\t\tthis.blendDst = OneMinusSrcAlphaFactor;\n\t\tthis.blendEquation = AddEquation;\n\t\tthis.blendSrcAlpha = null;\n\t\tthis.blendDstAlpha = null;\n\t\tthis.blendEquationAlpha = null;\n\t\tthis.blendColor = new Color( 0, 0, 0 );\n\t\tthis.blendAlpha = 0;\n\n\t\tthis.depthFunc = LessEqualDepth;\n\t\tthis.depthTest = true;\n\t\tthis.depthWrite = true;\n\n\t\tthis.stencilWriteMask = 0xff;\n\t\tthis.stencilFunc = AlwaysStencilFunc;\n\t\tthis.stencilRef = 0;\n\t\tthis.stencilFuncMask = 0xff;\n\t\tthis.stencilFail = KeepStencilOp;\n\t\tthis.stencilZFail = KeepStencilOp;\n\t\tthis.stencilZPass = KeepStencilOp;\n\t\tthis.stencilWrite = false;\n\n\t\tthis.clippingPlanes = null;\n\t\tthis.clipIntersection = false;\n\t\tthis.clipShadows = false;\n\n\t\tthis.shadowSide = null;\n\n\t\tthis.colorWrite = true;\n\n\t\tthis.precision = null; // override the renderer's default precision for this material\n\n\t\tthis.polygonOffset = false;\n\t\tthis.polygonOffsetFactor = 0;\n\t\tthis.polygonOffsetUnits = 0;\n\n\t\tthis.dithering = false;\n\n\t\tthis.alphaToCoverage = false;\n\t\tthis.premultipliedAlpha = false;\n\t\tthis.forceSinglePass = false;\n\n\t\tthis.visible = true;\n\n\t\tthis.toneMapped = true;\n\n\t\tthis.userData = {};\n\n\t\tthis.version = 0;\n\n\t\tthis._alphaTest = 0;\n\n\t}\n\n\tget alphaTest() {\n\n\t\treturn this._alphaTest;\n\n\t}\n\n\tset alphaTest( value ) {\n\n\t\tif ( this._alphaTest > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._alphaTest = value;\n\n\t}\n\n\tonBuild( /* shaderobject, renderer */ ) {}\n\n\tonBeforeRender( /* renderer, scene, camera, geometry, object, group */ ) {}\n\n\tonBeforeCompile( /* shaderobject, renderer */ ) {}\n\n\tcustomProgramCacheKey() {\n\n\t\treturn this.onBeforeCompile.toString();\n\n\t}\n\n\tsetValues( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( const key in values ) {\n\n\t\t\tconst newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( `THREE.Material: parameter '${ key }' has value of undefined.` );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( `THREE.Material: '${ key }' is not a property of THREE.${ this.type }.` );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRootObject ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen !== undefined ) data.sheen = this.sheen;\n\t\tif ( this.sheenColor && this.sheenColor.isColor ) data.sheenColor = this.sheenColor.getHex();\n\t\tif ( this.sheenRoughness !== undefined ) data.sheenRoughness = this.sheenRoughness;\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.specularIntensity !== undefined ) data.specularIntensity = this.specularIntensity;\n\t\tif ( this.specularColor && this.specularColor.isColor ) data.specularColor = this.specularColor.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.iridescence !== undefined ) data.iridescence = this.iridescence;\n\t\tif ( this.iridescenceIOR !== undefined ) data.iridescenceIOR = this.iridescenceIOR;\n\t\tif ( this.iridescenceThicknessRange !== undefined ) data.iridescenceThicknessRange = this.iridescenceThicknessRange;\n\n\t\tif ( this.iridescenceMap && this.iridescenceMap.isTexture ) {\n\n\t\t\tdata.iridescenceMap = this.iridescenceMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.iridescenceThicknessMap && this.iridescenceThicknessMap.isTexture ) {\n\n\t\t\tdata.iridescenceThicknessMap = this.iridescenceThicknessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.anisotropy !== undefined ) data.anisotropy = this.anisotropy;\n\t\tif ( this.anisotropyRotation !== undefined ) data.anisotropyRotation = this.anisotropyRotation;\n\n\t\tif ( this.anisotropyMap && this.anisotropyMap.isTexture ) {\n\n\t\t\tdata.anisotropyMap = this.anisotropyMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\n\t\tif ( this.lightMap && this.lightMap.isTexture ) {\n\n\t\t\tdata.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\t\tdata.lightMapIntensity = this.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\t\tif ( this.specularIntensityMap && this.specularIntensityMap.isTexture ) data.specularIntensityMap = this.specularIntensityMap.toJSON( meta ).uuid;\n\t\tif ( this.specularColorMap && this.specularColorMap.isTexture ) data.specularColorMap = this.specularColorMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\n\t\t}\n\n\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\t\tif ( this.reflectivity !== undefined ) data.reflectivity = this.reflectivity;\n\t\tif ( this.refractionRatio !== undefined ) data.refractionRatio = this.refractionRatio;\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.transmission !== undefined ) data.transmission = this.transmission;\n\t\tif ( this.transmissionMap && this.transmissionMap.isTexture ) data.transmissionMap = this.transmissionMap.toJSON( meta ).uuid;\n\t\tif ( this.thickness !== undefined ) data.thickness = this.thickness;\n\t\tif ( this.thicknessMap && this.thicknessMap.isTexture ) data.thicknessMap = this.thicknessMap.toJSON( meta ).uuid;\n\t\tif ( this.attenuationDistance !== undefined && this.attenuationDistance !== Infinity ) data.attenuationDistance = this.attenuationDistance;\n\t\tif ( this.attenuationColor !== undefined ) data.attenuationColor = this.attenuationColor.getHex();\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.shadowSide !== null ) data.shadowSide = this.shadowSide;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors === true ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = true;\n\n\t\tif ( this.blendSrc !== SrcAlphaFactor ) data.blendSrc = this.blendSrc;\n\t\tif ( this.blendDst !== OneMinusSrcAlphaFactor ) data.blendDst = this.blendDst;\n\t\tif ( this.blendEquation !== AddEquation ) data.blendEquation = this.blendEquation;\n\t\tif ( this.blendSrcAlpha !== null ) data.blendSrcAlpha = this.blendSrcAlpha;\n\t\tif ( this.blendDstAlpha !== null ) data.blendDstAlpha = this.blendDstAlpha;\n\t\tif ( this.blendEquationAlpha !== null ) data.blendEquationAlpha = this.blendEquationAlpha;\n\t\tif ( this.blendColor && this.blendColor.isColor ) data.blendColor = this.blendColor.getHex();\n\t\tif ( this.blendAlpha !== 0 ) data.blendAlpha = this.blendAlpha;\n\n\t\tif ( this.depthFunc !== LessEqualDepth ) data.depthFunc = this.depthFunc;\n\t\tif ( this.depthTest === false ) data.depthTest = this.depthTest;\n\t\tif ( this.depthWrite === false ) data.depthWrite = this.depthWrite;\n\t\tif ( this.colorWrite === false ) data.colorWrite = this.colorWrite;\n\n\t\tif ( this.stencilWriteMask !== 0xff ) data.stencilWriteMask = this.stencilWriteMask;\n\t\tif ( this.stencilFunc !== AlwaysStencilFunc ) data.stencilFunc = this.stencilFunc;\n\t\tif ( this.stencilRef !== 0 ) data.stencilRef = this.stencilRef;\n\t\tif ( this.stencilFuncMask !== 0xff ) data.stencilFuncMask = this.stencilFuncMask;\n\t\tif ( this.stencilFail !== KeepStencilOp ) data.stencilFail = this.stencilFail;\n\t\tif ( this.stencilZFail !== KeepStencilOp ) data.stencilZFail = this.stencilZFail;\n\t\tif ( this.stencilZPass !== KeepStencilOp ) data.stencilZPass = this.stencilZPass;\n\t\tif ( this.stencilWrite === true ) data.stencilWrite = this.stencilWrite;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation !== undefined && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth !== undefined && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.alphaHash === true ) data.alphaHash = true;\n\t\tif ( this.alphaToCoverage === true ) data.alphaToCoverage = true;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = true;\n\t\tif ( this.forceSinglePass === true ) data.forceSinglePass = true;\n\n\t\tif ( this.wireframe === true ) data.wireframe = true;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.flatShading === true ) data.flatShading = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( this.fog === false ) data.fog = false;\n\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\t\tthis.blendColor.copy( source.blendColor );\n\t\tthis.blendAlpha = source.blendAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tconst srcPlanes = source.clippingPlanes;\n\t\tlet dstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tconst n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.alphaHash = source.alphaHash;\n\t\tthis.alphaToCoverage = source.alphaToCoverage;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\t\tthis.forceSinglePass = source.forceSinglePass;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n}\n\nclass MeshBasicMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshBasicMaterial = true;\n\n\t\tthis.type = 'MeshBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // emissive\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\n// Fast Half Float Conversions, http://www.fox-toolkit.org/ftp/fasthalffloatconversion.pdf\n\nconst _tables = /*@__PURE__*/ _generateTables();\n\nfunction _generateTables() {\n\n\t// float32 to float16 helpers\n\n\tconst buffer = new ArrayBuffer( 4 );\n\tconst floatView = new Float32Array( buffer );\n\tconst uint32View = new Uint32Array( buffer );\n\n\tconst baseTable = new Uint32Array( 512 );\n\tconst shiftTable = new Uint32Array( 512 );\n\n\tfor ( let i = 0; i < 256; ++ i ) {\n\n\t\tconst e = i - 127;\n\n\t\t// very small number (0, -0)\n\n\t\tif ( e < - 27 ) {\n\n\t\t\tbaseTable[ i ] = 0x0000;\n\t\t\tbaseTable[ i | 0x100 ] = 0x8000;\n\t\t\tshiftTable[ i ] = 24;\n\t\t\tshiftTable[ i | 0x100 ] = 24;\n\n\t\t\t// small number (denorm)\n\n\t\t} else if ( e < - 14 ) {\n\n\t\t\tbaseTable[ i ] = 0x0400 >> ( - e - 14 );\n\t\t\tbaseTable[ i | 0x100 ] = ( 0x0400 >> ( - e - 14 ) ) | 0x8000;\n\t\t\tshiftTable[ i ] = - e - 1;\n\t\t\tshiftTable[ i | 0x100 ] = - e - 1;\n\n\t\t\t// normal number\n\n\t\t} else if ( e <= 15 ) {\n\n\t\t\tbaseTable[ i ] = ( e + 15 ) << 10;\n\t\t\tbaseTable[ i | 0x100 ] = ( ( e + 15 ) << 10 ) | 0x8000;\n\t\t\tshiftTable[ i ] = 13;\n\t\t\tshiftTable[ i | 0x100 ] = 13;\n\n\t\t\t// large number (Infinity, -Infinity)\n\n\t\t} else if ( e < 128 ) {\n\n\t\t\tbaseTable[ i ] = 0x7c00;\n\t\t\tbaseTable[ i | 0x100 ] = 0xfc00;\n\t\t\tshiftTable[ i ] = 24;\n\t\t\tshiftTable[ i | 0x100 ] = 24;\n\n\t\t\t// stay (NaN, Infinity, -Infinity)\n\n\t\t} else {\n\n\t\t\tbaseTable[ i ] = 0x7c00;\n\t\t\tbaseTable[ i | 0x100 ] = 0xfc00;\n\t\t\tshiftTable[ i ] = 13;\n\t\t\tshiftTable[ i | 0x100 ] = 13;\n\n\t\t}\n\n\t}\n\n\t// float16 to float32 helpers\n\n\tconst mantissaTable = new Uint32Array( 2048 );\n\tconst exponentTable = new Uint32Array( 64 );\n\tconst offsetTable = new Uint32Array( 64 );\n\n\tfor ( let i = 1; i < 1024; ++ i ) {\n\n\t\tlet m = i << 13; // zero pad mantissa bits\n\t\tlet e = 0; // zero exponent\n\n\t\t// normalized\n\t\twhile ( ( m & 0x00800000 ) === 0 ) {\n\n\t\t\tm <<= 1;\n\t\t\te -= 0x00800000; // decrement exponent\n\n\t\t}\n\n\t\tm &= ~ 0x00800000; // clear leading 1 bit\n\t\te += 0x38800000; // adjust bias\n\n\t\tmantissaTable[ i ] = m | e;\n\n\t}\n\n\tfor ( let i = 1024; i < 2048; ++ i ) {\n\n\t\tmantissaTable[ i ] = 0x38000000 + ( ( i - 1024 ) << 13 );\n\n\t}\n\n\tfor ( let i = 1; i < 31; ++ i ) {\n\n\t\texponentTable[ i ] = i << 23;\n\n\t}\n\n\texponentTable[ 31 ] = 0x47800000;\n\texponentTable[ 32 ] = 0x80000000;\n\n\tfor ( let i = 33; i < 63; ++ i ) {\n\n\t\texponentTable[ i ] = 0x80000000 + ( ( i - 32 ) << 23 );\n\n\t}\n\n\texponentTable[ 63 ] = 0xc7800000;\n\n\tfor ( let i = 1; i < 64; ++ i ) {\n\n\t\tif ( i !== 32 ) {\n\n\t\t\toffsetTable[ i ] = 1024;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tfloatView: floatView,\n\t\tuint32View: uint32View,\n\t\tbaseTable: baseTable,\n\t\tshiftTable: shiftTable,\n\t\tmantissaTable: mantissaTable,\n\t\texponentTable: exponentTable,\n\t\toffsetTable: offsetTable\n\t};\n\n}\n\n// float32 to float16\n\nfunction toHalfFloat( val ) {\n\n\tif ( Math.abs( val ) > 65504 ) console.warn( 'THREE.DataUtils.toHalfFloat(): Value out of range.' );\n\n\tval = clamp( val, - 65504, 65504 );\n\n\t_tables.floatView[ 0 ] = val;\n\tconst f = _tables.uint32View[ 0 ];\n\tconst e = ( f >> 23 ) & 0x1ff;\n\treturn _tables.baseTable[ e ] + ( ( f & 0x007fffff ) >> _tables.shiftTable[ e ] );\n\n}\n\n// float16 to float32\n\nfunction fromHalfFloat( val ) {\n\n\tconst m = val >> 10;\n\t_tables.uint32View[ 0 ] = _tables.mantissaTable[ _tables.offsetTable[ m ] + ( val & 0x3ff ) ] + _tables.exponentTable[ m ];\n\treturn _tables.floatView[ 0 ];\n\n}\n\nconst DataUtils = {\n\ttoHalfFloat: toHalfFloat,\n\tfromHalfFloat: fromHalfFloat,\n};\n\nconst _vector$9 = /*@__PURE__*/ new Vector3();\nconst _vector2$1 = /*@__PURE__*/ new Vector2();\n\nclass BufferAttribute {\n\n\tconstructor( array, itemSize, normalized = false ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.isBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.array = array;\n\t\tthis.itemSize = itemSize;\n\t\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\t\tthis.normalized = normalized;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis._updateRange = { offset: 0, count: - 1 };\n\t\tthis.updateRanges = [];\n\t\tthis.gpuType = FloatType;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tget updateRange() {\n\n\t\twarnOnce( 'THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead.' ); // @deprecated, r159\n\t\treturn this._updateRange;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\taddUpdateRange( start, count ) {\n\n\t\tthis.updateRanges.push( { start, count } );\n\n\t}\n\n\tclearUpdateRanges() {\n\n\t\tthis.updateRanges.length = 0;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\t\tthis.gpuType = source.gpuType;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyArray( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\n\t\t\t\t_vector2$1.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector$9.fromBufferAttribute( this, i );\n\t\t\t\t_vector$9.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\t// Matching BufferAttribute constructor, do not normalize the array.\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index, component ) {\n\n\t\tlet value = this.array[ index * this.itemSize + component ];\n\n\t\tif ( this.normalized ) value = denormalize( value, this.array );\n\n\t\treturn value;\n\n\t}\n\n\tsetComponent( index, component, value ) {\n\n\t\tif ( this.normalized ) value = normalize( value, this.array );\n\n\t\tthis.array[ index * this.itemSize + component ] = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetX( index ) {\n\n\t\tlet x = this.array[ index * this.itemSize ];\n\n\t\tif ( this.normalized ) x = denormalize( x, this.array );\n\n\t\treturn x;\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tif ( this.normalized ) x = normalize( x, this.array );\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t}\n\n\tgetY( index ) {\n\n\t\tlet y = this.array[ index * this.itemSize + 1 ];\n\n\t\tif ( this.normalized ) y = denormalize( y, this.array );\n\n\t\treturn y;\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tif ( this.normalized ) y = normalize( y, this.array );\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\tlet z = this.array[ index * this.itemSize + 2 ];\n\n\t\tif ( this.normalized ) z = denormalize( z, this.array );\n\n\t\treturn z;\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tif ( this.normalized ) z = normalize( z, this.array );\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tgetW( index ) {\n\n\t\tlet w = this.array[ index * this.itemSize + 3 ];\n\n\t\tif ( this.normalized ) w = denormalize( w, this.array );\n\n\t\treturn w;\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tif ( this.normalized ) w = normalize( w, this.array );\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\t\t\tw = normalize( w, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.from( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( this.usage !== StaticDrawUsage ) data.usage = this.usage;\n\n\t\treturn data;\n\n\t}\n\n}\n\n//\n\nclass Int8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8ClampedBufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8ClampedArray( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t\tthis.isFloat16BufferAttribute = true;\n\n\t}\n\n\tgetX( index ) {\n\n\t\tlet x = fromHalfFloat( this.array[ index * this.itemSize ] );\n\n\t\tif ( this.normalized ) x = denormalize( x, this.array );\n\n\t\treturn x;\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tif ( this.normalized ) x = normalize( x, this.array );\n\n\t\tthis.array[ index * this.itemSize ] = toHalfFloat( x );\n\n\t\treturn this;\n\n\t}\n\n\tgetY( index ) {\n\n\t\tlet y = fromHalfFloat( this.array[ index * this.itemSize + 1 ] );\n\n\t\tif ( this.normalized ) y = denormalize( y, this.array );\n\n\t\treturn y;\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tif ( this.normalized ) y = normalize( y, this.array );\n\n\t\tthis.array[ index * this.itemSize + 1 ] = toHalfFloat( y );\n\n\t\treturn this;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\tlet z = fromHalfFloat( this.array[ index * this.itemSize + 2 ] );\n\n\t\tif ( this.normalized ) z = denormalize( z, this.array );\n\n\t\treturn z;\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tif ( this.normalized ) z = normalize( z, this.array );\n\n\t\tthis.array[ index * this.itemSize + 2 ] = toHalfFloat( z );\n\n\t\treturn this;\n\n\t}\n\n\tgetW( index ) {\n\n\t\tlet w = fromHalfFloat( this.array[ index * this.itemSize + 3 ] );\n\n\t\tif ( this.normalized ) w = denormalize( w, this.array );\n\n\t\treturn w;\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tif ( this.normalized ) w = normalize( w, this.array );\n\n\t\tthis.array[ index * this.itemSize + 3 ] = toHalfFloat( w );\n\n\t\treturn this;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = toHalfFloat( x );\n\t\tthis.array[ index + 1 ] = toHalfFloat( y );\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = toHalfFloat( x );\n\t\tthis.array[ index + 1 ] = toHalfFloat( y );\n\t\tthis.array[ index + 2 ] = toHalfFloat( z );\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\t\t\tw = normalize( w, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = toHalfFloat( x );\n\t\tthis.array[ index + 1 ] = toHalfFloat( y );\n\t\tthis.array[ index + 2 ] = toHalfFloat( z );\n\t\tthis.array[ index + 3 ] = toHalfFloat( w );\n\n\t\treturn this;\n\n\t}\n\n}\n\n\nclass Float32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float64BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float64Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nlet _id$2 = 0;\n\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _obj = /*@__PURE__*/ new Object3D();\nconst _offset = /*@__PURE__*/ new Vector3();\nconst _box$2 = /*@__PURE__*/ new Box3();\nconst _boxMorphTargets = /*@__PURE__*/ new Box3();\nconst _vector$8 = /*@__PURE__*/ new Vector3();\n\nclass BufferGeometry extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isBufferGeometry = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _id$2 ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'BufferGeometry';\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\n\t\tthis.morphAttributes = {};\n\t\tthis.morphTargetsRelative = false;\n\n\t\tthis.groups = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\tthis.drawRange = { start: 0, count: Infinity };\n\n\t\tthis.userData = {};\n\n\t}\n\n\tgetIndex() {\n\n\t\treturn this.index;\n\n\t}\n\n\tsetIndex( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayNeedsUint32( index ) ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetAttribute( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t}\n\n\tsetAttribute( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t}\n\n\tdeleteAttribute( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t}\n\n\thasAttribute( name ) {\n\n\t\treturn this.attributes[ name ] !== undefined;\n\n\t}\n\n\taddGroup( start, count, materialIndex = 0 ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex\n\n\t\t} );\n\n\t}\n\n\tclearGroups() {\n\n\t\tthis.groups = [];\n\n\t}\n\n\tsetDrawRange( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tconst position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tconst normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tconst tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\t_m1.makeRotationFromQuaternion( q );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateY( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tscale( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tlookAt( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t}\n\n\tcenter() {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tconst position = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingBox.set(\n\t\t\t\tnew Vector3( - Infinity, - Infinity, - Infinity ),\n\t\t\t\tnew Vector3( + Infinity, + Infinity, + Infinity )\n\t\t\t);\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box$2.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$8.addVectors( this.boundingBox.min, _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$8 );\n\n\t\t\t\t\t\t_vector$8.addVectors( this.boundingBox.max, _box$2.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$8 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingSphere.set( new Vector3(), Infinity );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\t_box$2.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$8.addVectors( _box$2.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$8 );\n\n\t\t\t\t\t\t_vector$8.addVectors( _box$2.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$8 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box$2.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector$8.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$8 ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector$8.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector$8.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$8 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcomputeTangents() {\n\n\t\tconst index = this.index;\n\t\tconst attributes = this.attributes;\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( index === null ||\n\t\t\t attributes.position === undefined ||\n\t\t\t attributes.normal === undefined ||\n\t\t\t attributes.uv === undefined ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst indices = index.array;\n\t\tconst positions = attributes.position.array;\n\t\tconst normals = attributes.normal.array;\n\t\tconst uvs = attributes.uv.array;\n\n\t\tconst nVertices = positions.length / 3;\n\n\t\tif ( this.hasAttribute( 'tangent' ) === false ) {\n\n\t\t\tthis.setAttribute( 'tangent', new BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tconst tangents = this.getAttribute( 'tangent' ).array;\n\n\t\tconst tan1 = [], tan2 = [];\n\n\t\tfor ( let i = 0; i < nVertices; i ++ ) {\n\n\t\t\ttan1[ i ] = new Vector3();\n\t\t\ttan2[ i ] = new Vector3();\n\n\t\t}\n\n\t\tconst vA = new Vector3(),\n\t\t\tvB = new Vector3(),\n\t\t\tvC = new Vector3(),\n\n\t\t\tuvA = new Vector2(),\n\t\t\tuvB = new Vector2(),\n\t\t\tuvC = new Vector2(),\n\n\t\t\tsdir = new Vector3(),\n\t\t\ttdir = new Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tvB.sub( vA );\n\t\t\tvC.sub( vA );\n\n\t\t\tuvB.sub( uvA );\n\t\t\tuvC.sub( uvA );\n\n\t\t\tconst r = 1.0 / ( uvB.x * uvC.y - uvC.x * uvB.y );\n\n\t\t\t// silently ignore degenerate uv triangles having coincident or colinear vertices\n\n\t\t\tif ( ! isFinite( r ) ) return;\n\n\t\t\tsdir.copy( vB ).multiplyScalar( uvC.y ).addScaledVector( vC, - uvB.y ).multiplyScalar( r );\n\t\t\ttdir.copy( vC ).multiplyScalar( uvB.x ).addScaledVector( vB, - uvC.x ).multiplyScalar( r );\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tlet groups = this.groups;\n\n\t\tif ( groups.length === 0 ) {\n\n\t\t\tgroups = [ {\n\t\t\t\tstart: 0,\n\t\t\t\tcount: indices.length\n\t\t\t} ];\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleTriangle(\n\t\t\t\t\tindices[ j + 0 ],\n\t\t\t\t\tindices[ j + 1 ],\n\t\t\t\t\tindices[ j + 2 ]\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst tmp = new Vector3(), tmp2 = new Vector3();\n\t\tconst n = new Vector3(), n2 = new Vector3();\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tconst t = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\tconst test = tmp2.dot( tan2[ v ] );\n\t\t\tconst w = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4 ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleVertex( indices[ j + 0 ] );\n\t\t\t\thandleVertex( indices[ j + 1 ] );\n\t\t\t\thandleVertex( indices[ j + 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcomputeVertexNormals() {\n\n\t\tconst index = this.index;\n\t\tconst positionAttribute = this.getAttribute( 'position' );\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\n\n\t\t\tif ( normalAttribute === undefined ) {\n\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\n\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tconst vA = index.getX( i + 0 );\n\t\t\t\t\tconst vB = index.getX( i + 1 );\n\t\t\t\t\tconst vC = index.getX( i + 2 );\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\n\n\t\t\t\t\tnA.add( cb );\n\t\t\t\t\tnB.add( cb );\n\t\t\t\t\tnC.add( cb );\n\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tnormalAttribute.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tnormalizeNormals() {\n\n\t\tconst normals = this.attributes.normal;\n\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector$8.fromBufferAttribute( normals, i );\n\n\t\t\t_vector$8.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector$8.x, _vector$8.y, _vector$8.z );\n\n\t\t}\n\n\t}\n\n\ttoNonIndexed() {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\t\t\tconst normalized = attribute.normalized;\n\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tlet index = 0, index2 = 0;\n\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\tindex = indices[ i ] * attribute.data.stride + attribute.offset;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst indices = this.index.array;\n\t\tconst attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = this.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst morphArray = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = morphAttribute[ i ];\n\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = this.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\t// for simplicity the code assumes attributes are not shared across geometries, see #15811\n\n\t\tdata.data = { attributes: {} };\n\n\t\tconst index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tdata.data.attributes[ key ] = attribute.toJSON( data.data );\n\n\t\t}\n\n\t\tconst morphAttributes = {};\n\t\tlet hasMorphAttributes = false;\n\n\t\tfor ( const key in this.morphAttributes ) {\n\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = attributeArray[ i ];\n\n\t\t\t\tarray.push( attribute.toJSON( data.data ) );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tconst groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tconst boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// used for storing cloned, shared data\n\n\t\tconst data = {};\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tconst index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone( data ) );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tconst attributes = source.attributes;\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = source.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = source.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nconst _inverseMatrix$3 = /*@__PURE__*/ new Matrix4();\nconst _ray$3 = /*@__PURE__*/ new Ray();\nconst _sphere$6 = /*@__PURE__*/ new Sphere();\nconst _sphereHitAt = /*@__PURE__*/ new Vector3();\n\nconst _vA$1 = /*@__PURE__*/ new Vector3();\nconst _vB$1 = /*@__PURE__*/ new Vector3();\nconst _vC$1 = /*@__PURE__*/ new Vector3();\n\nconst _tempA = /*@__PURE__*/ new Vector3();\nconst _morphA = /*@__PURE__*/ new Vector3();\n\nconst _uvA$1 = /*@__PURE__*/ new Vector2();\nconst _uvB$1 = /*@__PURE__*/ new Vector2();\nconst _uvC$1 = /*@__PURE__*/ new Vector2();\n\nconst _normalA = /*@__PURE__*/ new Vector3();\nconst _normalB = /*@__PURE__*/ new Vector3();\nconst _normalC = /*@__PURE__*/ new Vector3();\n\nconst _intersectionPoint = /*@__PURE__*/ new Vector3();\nconst _intersectionPointWorld = /*@__PURE__*/ new Vector3();\n\nclass Mesh extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new MeshBasicMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isMesh = true;\n\n\t\tthis.type = 'Mesh';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\tthis.material = Array.isArray( source.material ) ? source.material.slice() : source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgetVertexPosition( index, target ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.attributes.position;\n\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\n\t\ttarget.fromBufferAttribute( position, index );\n\n\t\tconst morphInfluences = this.morphTargetInfluences;\n\n\t\tif ( morphPosition && morphInfluences ) {\n\n\t\t\t_morphA.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\t\tconst influence = morphInfluences[ i ];\n\t\t\t\tconst morphAttribute = morphPosition[ i ];\n\n\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t_tempA.fromBufferAttribute( morphAttribute, index );\n\n\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA.sub( target ), influence );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttarget.add( _morphA );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// test with bounding sphere in world space\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$6.copy( geometry.boundingSphere );\n\t\t_sphere$6.applyMatrix4( matrixWorld );\n\n\t\t// check distance from ray origin to bounding sphere\n\n\t\t_ray$3.copy( raycaster.ray ).recast( raycaster.near );\n\n\t\tif ( _sphere$6.containsPoint( _ray$3.origin ) === false ) {\n\n\t\t\tif ( _ray$3.intersectSphere( _sphere$6, _sphereHitAt ) === null ) return;\n\n\t\t\tif ( _ray$3.origin.distanceToSquared( _sphereHitAt ) > ( raycaster.far - raycaster.near ) ** 2 ) return;\n\n\t\t}\n\n\t\t// convert ray to local space of mesh\n\n\t\t_inverseMatrix$3.copy( matrixWorld ).invert();\n\t\t_ray$3.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$3 );\n\n\t\t// test with bounding box in local space\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray$3.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\t// test for intersections with geometry\n\n\t\tthis._computeIntersections( raycaster, intersects, _ray$3 );\n\n\t}\n\n\t_computeIntersections( raycaster, intersects, rayLocalSpace ) {\n\n\t\tlet intersection;\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\n\t\tconst index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\t\tconst uv = geometry.attributes.uv;\n\t\tconst uv1 = geometry.attributes.uv1;\n\t\tconst normal = geometry.attributes.normal;\n\t\tconst groups = geometry.groups;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\tif ( index !== null ) {\n\n\t\t\t// indexed buffer geometry\n\n\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\tconst end = Math.min( index.count, Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) ) );\n\n\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\tconst a = index.getX( j );\n\t\t\t\t\t\tconst b = index.getX( j + 1 );\n\t\t\t\t\t\tconst c = index.getX( j + 2 );\n\n\t\t\t\t\t\tintersection = checkGeometryIntersection( this, groupMaterial, raycaster, rayLocalSpace, uv, uv1, normal, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\tconst a = index.getX( i );\n\t\t\t\t\tconst b = index.getX( i + 1 );\n\t\t\t\t\tconst c = index.getX( i + 2 );\n\n\t\t\t\t\tintersection = checkGeometryIntersection( this, material, raycaster, rayLocalSpace, uv, uv1, normal, a, b, c );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\t// non-indexed buffer geometry\n\n\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\tconst end = Math.min( position.count, Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) ) );\n\n\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\tconst a = j;\n\t\t\t\t\t\tconst b = j + 1;\n\t\t\t\t\t\tconst c = j + 2;\n\n\t\t\t\t\t\tintersection = checkGeometryIntersection( this, groupMaterial, raycaster, rayLocalSpace, uv, uv1, normal, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\tconst a = i;\n\t\t\t\t\tconst b = i + 1;\n\t\t\t\t\tconst c = i + 2;\n\n\t\t\t\t\tintersection = checkGeometryIntersection( this, material, raycaster, rayLocalSpace, uv, uv1, normal, a, b, c );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tlet intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, ( material.side === FrontSide ), point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkGeometryIntersection( object, material, raycaster, ray, uv, uv1, normal, a, b, c ) {\n\n\tobject.getVertexPosition( a, _vA$1 );\n\tobject.getVertexPosition( b, _vB$1 );\n\tobject.getVertexPosition( c, _vC$1 );\n\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA$1, _vB$1, _vC$1, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA$1.fromBufferAttribute( uv, a );\n\t\t\t_uvB$1.fromBufferAttribute( uv, b );\n\t\t\t_uvC$1.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getInterpolation( _intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv1 ) {\n\n\t\t\t_uvA$1.fromBufferAttribute( uv1, a );\n\t\t\t_uvB$1.fromBufferAttribute( uv1, b );\n\t\t\t_uvC$1.fromBufferAttribute( uv1, c );\n\n\t\t\tintersection.uv1 = Triangle.getInterpolation( _intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() );\n\t\t\tintersection.uv2 = intersection.uv1; // @deprecated, r152\n\n\t\t}\n\n\t\tif ( normal ) {\n\n\t\t\t_normalA.fromBufferAttribute( normal, a );\n\t\t\t_normalB.fromBufferAttribute( normal, b );\n\t\t\t_normalC.fromBufferAttribute( normal, c );\n\n\t\t\tintersection.normal = Triangle.getInterpolation( _intersectionPoint, _vA$1, _vB$1, _vC$1, _normalA, _normalB, _normalC, new Vector3() );\n\n\t\t\tif ( intersection.normal.dot( ray.direction ) > 0 ) {\n\n\t\t\t\tintersection.normal.multiplyScalar( - 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst face = {\n\t\t\ta: a,\n\t\t\tb: b,\n\t\t\tc: c,\n\t\t\tnormal: new Vector3(),\n\t\t\tmaterialIndex: 0\n\t\t};\n\n\t\tTriangle.getNormal( _vA$1, _vB$1, _vC$1, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nclass BoxGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tconst scope = this;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\t\tdepthSegments = Math.floor( depthSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet numberOfVertices = 0;\n\t\tlet groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tconst segmentWidth = width / gridX;\n\t\t\tconst segmentHeight = height / gridY;\n\n\t\t\tconst widthHalf = width / 2;\n\t\t\tconst heightHalf = height / 2;\n\t\t\tconst depthHalf = depth / 2;\n\n\t\t\tconst gridX1 = gridX + 1;\n\t\t\tconst gridY1 = gridY + 1;\n\n\t\t\tlet vertexCounter = 0;\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new BoxGeometry( data.width, data.height, data.depth, data.widthSegments, data.heightSegments, data.depthSegments );\n\n\t}\n\n}\n\n/**\n * Uniform Utilities\n */\n\nfunction cloneUniforms( src ) {\n\n\tconst dst = {};\n\n\tfor ( const u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( const p in src[ u ] ) {\n\n\t\t\tconst property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture || property.isQuaternion ) ) {\n\n\t\t\t\tif ( property.isRenderTargetTexture ) {\n\n\t\t\t\t\tconsole.warn( 'UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms().' );\n\t\t\t\t\tdst[ u ][ p ] = null;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t\t}\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction mergeUniforms( uniforms ) {\n\n\tconst merged = {};\n\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\n\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( const p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\nfunction cloneUniformsGroups( src ) {\n\n\tconst dst = [];\n\n\tfor ( let u = 0; u < src.length; u ++ ) {\n\n\t\tdst.push( src[ u ].clone() );\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction getUnlitUniformColorSpace( renderer ) {\n\n\tif ( renderer.getRenderTarget() === null ) {\n\n\t\t// https://github.com/mrdoob/three.js/pull/23937#issuecomment-1111067398\n\t\treturn renderer.outputColorSpace;\n\n\t}\n\n\treturn ColorManagement.workingColorSpace;\n\n}\n\n// Legacy\n\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\n\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n\nclass ShaderMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isShaderMaterial = true;\n\n\t\tthis.type = 'ShaderMaterial';\n\n\t\tthis.defines = {};\n\t\tthis.uniforms = {};\n\t\tthis.uniformsGroups = [];\n\n\t\tthis.vertexShader = default_vertex;\n\t\tthis.fragmentShader = default_fragment;\n\n\t\tthis.linewidth = 1;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.fog = false; // set to use scene fog\n\t\tthis.lights = false; // set to use scene lights\n\t\tthis.clipping = false; // set to use user-defined clipping planes\n\n\t\tthis.forceSinglePass = true;\n\n\t\tthis.extensions = {\n\t\t\tderivatives: false, // set to use derivatives\n\t\t\tfragDepth: false, // set to use fragment depth values\n\t\t\tdrawBuffers: false, // set to use draw buffers\n\t\t\tshaderTextureLOD: false, // set to use shader texture LOD\n\t\t\tclipCullDistance: false, // set to use vertex shader clipping\n\t\t\tmultiDraw: false // set to use vertex shader multi_draw / enable gl_DrawID\n\t\t};\n\n\t\t// When rendered geometry doesn't include these attributes but the material does,\n\t\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\t\tthis.defaultAttributeValues = {\n\t\t\t'color': [ 1, 1, 1 ],\n\t\t\t'uv': [ 0, 0 ],\n\t\t\t'uv1': [ 0, 0 ]\n\t\t};\n\n\t\tthis.index0AttributeName = undefined;\n\t\tthis.uniformsNeedUpdate = false;\n\n\t\tthis.glslVersion = null;\n\n\t\tif ( parameters !== undefined ) {\n\n\t\t\tthis.setValues( parameters );\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.fragmentShader = source.fragmentShader;\n\t\tthis.vertexShader = source.vertexShader;\n\n\t\tthis.uniforms = cloneUniforms( source.uniforms );\n\t\tthis.uniformsGroups = cloneUniformsGroups( source.uniformsGroups );\n\n\t\tthis.defines = Object.assign( {}, source.defines );\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.fog = source.fog;\n\t\tthis.lights = source.lights;\n\t\tthis.clipping = source.clipping;\n\n\t\tthis.extensions = Object.assign( {}, source.extensions );\n\n\t\tthis.glslVersion = source.glslVersion;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.glslVersion = this.glslVersion;\n\t\tdata.uniforms = {};\n\n\t\tfor ( const name in this.uniforms ) {\n\n\t\t\tconst uniform = this.uniforms[ name ];\n\t\t\tconst value = uniform.value;\n\n\t\t\tif ( value && value.isTexture ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 't',\n\t\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isColor ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'c',\n\t\t\t\t\tvalue: value.getHex()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v2',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v3',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v4',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'm3',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'm4',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\tvalue: value\n\t\t\t\t};\n\n\t\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\t\tdata.vertexShader = this.vertexShader;\n\t\tdata.fragmentShader = this.fragmentShader;\n\n\t\tdata.lights = this.lights;\n\t\tdata.clipping = this.clipping;\n\n\t\tconst extensions = {};\n\n\t\tfor ( const key in this.extensions ) {\n\n\t\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t\t}\n\n\t\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass Camera extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isCamera = true;\n\n\t\tthis.type = 'Camera';\n\n\t\tthis.matrixWorldInverse = new Matrix4();\n\n\t\tthis.projectionMatrix = new Matrix4();\n\t\tthis.projectionMatrixInverse = new Matrix4();\n\n\t\tthis.coordinateSystem = WebGLCoordinateSystem;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\tthis.coordinateSystem = source.coordinateSystem;\n\n\t\treturn this;\n\n\t}\n\n\tgetWorldDirection( target ) {\n\n\t\treturn super.getWorldDirection( target ).negate();\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t}\n\n\tupdateWorldMatrix( updateParents, updateChildren ) {\n\n\t\tsuper.updateWorldMatrix( updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _v3$1 = /*@__PURE__*/ new Vector3();\nconst _minTarget = /*@__PURE__*/ new Vector2();\nconst _maxTarget = /*@__PURE__*/ new Vector2();\n\n\nclass PerspectiveCamera extends Camera {\n\n\tconstructor( fov = 50, aspect = 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.isPerspectiveCamera = true;\n\n\t\tthis.type = 'PerspectiveCamera';\n\n\t\tthis.fov = fov;\n\t\tthis.zoom = 1;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\t\tthis.focus = 10;\n\n\t\tthis.aspect = aspect;\n\t\tthis.view = null;\n\n\t\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\t\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength( focalLength ) {\n\n\t\t/** see {@link http://www.bobatkins.com/photography/technical/field_of_view.html} */\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength() {\n\n\t\tconst vExtentSlope = Math.tan( DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t}\n\n\tgetEffectiveFOV() {\n\n\t\treturn RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t}\n\n\tgetFilmWidth() {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t}\n\n\tgetFilmHeight() {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t}\n\n\t/**\n\t * Computes the 2D bounds of the camera's viewable rectangle at a given distance along the viewing direction.\n\t * Sets minTarget and maxTarget to the coordinates of the lower-left and upper-right corners of the view rectangle.\n\t */\n\tgetViewBounds( distance, minTarget, maxTarget ) {\n\n\t\t_v3$1.set( - 1, - 1, 0.5 ).applyMatrix4( this.projectionMatrixInverse );\n\n\t\tminTarget.set( _v3$1.x, _v3$1.y ).multiplyScalar( - distance / _v3$1.z );\n\n\t\t_v3$1.set( 1, 1, 0.5 ).applyMatrix4( this.projectionMatrixInverse );\n\n\t\tmaxTarget.set( _v3$1.x, _v3$1.y ).multiplyScalar( - distance / _v3$1.z );\n\n\t}\n\n\t/**\n\t * Computes the width and height of the camera's viewable rectangle at a given distance along the viewing direction.\n\t * Copies the result into the target Vector2, where x is width and y is height.\n\t */\n\tgetViewSize( distance, target ) {\n\n\t\tthis.getViewBounds( distance, _minTarget, _maxTarget );\n\n\t\treturn target.subVectors( _maxTarget, _minTarget );\n\n\t}\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   const w = 1920;\n\t *   const h = 1080;\n\t *   const fullWidth = w * 3;\n\t *   const fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst near = this.near;\n\t\tlet top = near * Math.tan( DEG2RAD * 0.5 * this.fov ) / this.zoom;\n\t\tlet height = 2 * top;\n\t\tlet width = this.aspect * height;\n\t\tlet left = - 0.5 * width;\n\t\tconst view = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tconst skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far, this.coordinateSystem );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst fov = - 90; // negative fov is not an error\nconst aspect = 1;\n\nclass CubeCamera extends Object3D {\n\n\tconstructor( near, far, renderTarget ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CubeCamera';\n\n\t\tthis.renderTarget = renderTarget;\n\t\tthis.coordinateSystem = null;\n\t\tthis.activeMipmapLevel = 0;\n\n\t\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPX.layers = this.layers;\n\t\tthis.add( cameraPX );\n\n\t\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNX.layers = this.layers;\n\t\tthis.add( cameraNX );\n\n\t\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPY.layers = this.layers;\n\t\tthis.add( cameraPY );\n\n\t\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNY.layers = this.layers;\n\t\tthis.add( cameraNY );\n\n\t\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPZ.layers = this.layers;\n\t\tthis.add( cameraPZ );\n\n\t\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNZ.layers = this.layers;\n\t\tthis.add( cameraNZ );\n\n\t}\n\n\tupdateCoordinateSystem() {\n\n\t\tconst coordinateSystem = this.coordinateSystem;\n\n\t\tconst cameras = this.children.concat();\n\n\t\tconst [ cameraPX, cameraNX, cameraPY, cameraNY, cameraPZ, cameraNZ ] = cameras;\n\n\t\tfor ( const camera of cameras ) this.remove( camera );\n\n\t\tif ( coordinateSystem === WebGLCoordinateSystem ) {\n\n\t\t\tcameraPX.up.set( 0, 1, 0 );\n\t\t\tcameraPX.lookAt( 1, 0, 0 );\n\n\t\t\tcameraNX.up.set( 0, 1, 0 );\n\t\t\tcameraNX.lookAt( - 1, 0, 0 );\n\n\t\t\tcameraPY.up.set( 0, 0, - 1 );\n\t\t\tcameraPY.lookAt( 0, 1, 0 );\n\n\t\t\tcameraNY.up.set( 0, 0, 1 );\n\t\t\tcameraNY.lookAt( 0, - 1, 0 );\n\n\t\t\tcameraPZ.up.set( 0, 1, 0 );\n\t\t\tcameraPZ.lookAt( 0, 0, 1 );\n\n\t\t\tcameraNZ.up.set( 0, 1, 0 );\n\t\t\tcameraNZ.lookAt( 0, 0, - 1 );\n\n\t\t} else if ( coordinateSystem === WebGPUCoordinateSystem ) {\n\n\t\t\tcameraPX.up.set( 0, - 1, 0 );\n\t\t\tcameraPX.lookAt( - 1, 0, 0 );\n\n\t\t\tcameraNX.up.set( 0, - 1, 0 );\n\t\t\tcameraNX.lookAt( 1, 0, 0 );\n\n\t\t\tcameraPY.up.set( 0, 0, 1 );\n\t\t\tcameraPY.lookAt( 0, 1, 0 );\n\n\t\t\tcameraNY.up.set( 0, 0, - 1 );\n\t\t\tcameraNY.lookAt( 0, - 1, 0 );\n\n\t\t\tcameraPZ.up.set( 0, - 1, 0 );\n\t\t\tcameraPZ.lookAt( 0, 0, 1 );\n\n\t\t\tcameraNZ.up.set( 0, - 1, 0 );\n\t\t\tcameraNZ.lookAt( 0, 0, - 1 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: ' + coordinateSystem );\n\n\t\t}\n\n\t\tfor ( const camera of cameras ) {\n\n\t\t\tthis.add( camera );\n\n\t\t\tcamera.updateMatrixWorld();\n\n\t\t}\n\n\t}\n\n\tupdate( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tconst { renderTarget, activeMipmapLevel } = this;\n\n\t\tif ( this.coordinateSystem !== renderer.coordinateSystem ) {\n\n\t\t\tthis.coordinateSystem = renderer.coordinateSystem;\n\n\t\t\tthis.updateCoordinateSystem();\n\n\t\t}\n\n\t\tconst [ cameraPX, cameraNX, cameraPY, cameraNY, cameraPZ, cameraNZ ] = this.children;\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\t\tconst currentActiveCubeFace = renderer.getActiveCubeFace();\n\t\tconst currentActiveMipmapLevel = renderer.getActiveMipmapLevel();\n\n\t\tconst currentXrEnabled = renderer.xr.enabled;\n\n\t\trenderer.xr.enabled = false;\n\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0, activeMipmapLevel );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1, activeMipmapLevel );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2, activeMipmapLevel );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3, activeMipmapLevel );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4, activeMipmapLevel );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\t// mipmaps are generated during the last call of render()\n\t\t// at this point, all sides of the cube render target are defined\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5, activeMipmapLevel );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget, currentActiveCubeFace, currentActiveMipmapLevel );\n\n\t\trenderer.xr.enabled = currentXrEnabled;\n\n\t\trenderTarget.texture.needsPMREMUpdate = true;\n\n\t}\n\n}\n\nclass CubeTexture extends Texture {\n\n\tconstructor( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, colorSpace ) {\n\n\t\timages = images !== undefined ? images : [];\n\t\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\n\t\tsuper( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, colorSpace );\n\n\t\tthis.isCubeTexture = true;\n\n\t\tthis.flipY = false;\n\n\t}\n\n\tget images() {\n\n\t\treturn this.image;\n\n\t}\n\n\tset images( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n}\n\nclass WebGLCubeRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( size = 1, options = {} ) {\n\n\t\tsuper( size, size, options );\n\n\t\tthis.isWebGLCubeRenderTarget = true;\n\n\t\tconst image = { width: size, height: size, depth: 1 };\n\t\tconst images = [ image, image, image, image, image, image ];\n\n\t\tif ( options.encoding !== undefined ) {\n\n\t\t\t// @deprecated, r152\n\t\t\twarnOnce( 'THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace.' );\n\t\t\toptions.colorSpace = options.encoding === sRGBEncoding ? SRGBColorSpace : NoColorSpace;\n\n\t\t}\n\n\t\tthis.texture = new CubeTexture( images, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.colorSpace );\n\n\t\t// By convention -- likely based on the RenderMan spec from the 1990's -- cube maps are specified by WebGL (and three.js)\n\t\t// in a coordinate system in which positive-x is to the right when looking up the positive-z axis -- in other words,\n\t\t// in a left-handed coordinate system. By continuing this convention, preexisting cube maps continued to render correctly.\n\n\t\t// three.js uses a right-handed coordinate system. So environment maps used in three.js appear to have px and nx swapped\n\t\t// and the flag isRenderTargetTexture controls this conversion. The flip is not required when using WebGLCubeRenderTarget.texture\n\t\t// as a cube texture (this is detected when isRenderTargetTexture is set to true for cube textures).\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t}\n\n\tfromEquirectangularTexture( renderer, texture ) {\n\n\t\tthis.texture.type = texture.type;\n\t\tthis.texture.colorSpace = texture.colorSpace;\n\n\t\tthis.texture.generateMipmaps = texture.generateMipmaps;\n\t\tthis.texture.minFilter = texture.minFilter;\n\t\tthis.texture.magFilter = texture.magFilter;\n\n\t\tconst shader = {\n\n\t\t\tuniforms: {\n\t\t\t\ttEquirect: { value: null },\n\t\t\t},\n\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t`\n\t\t};\n\n\t\tconst geometry = new BoxGeometry( 5, 5, 5 );\n\n\t\tconst material = new ShaderMaterial( {\n\n\t\t\tname: 'CubemapFromEquirect',\n\n\t\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tside: BackSide,\n\t\t\tblending: NoBlending\n\n\t\t} );\n\n\t\tmaterial.uniforms.tEquirect.value = texture;\n\n\t\tconst mesh = new Mesh( geometry, material );\n\n\t\tconst currentMinFilter = texture.minFilter;\n\n\t\t// Avoid blurred poles\n\t\tif ( texture.minFilter === LinearMipmapLinearFilter ) texture.minFilter = LinearFilter;\n\n\t\tconst camera = new CubeCamera( 1, 10, this );\n\t\tcamera.update( renderer, mesh );\n\n\t\ttexture.minFilter = currentMinFilter;\n\n\t\tmesh.geometry.dispose();\n\t\tmesh.material.dispose();\n\n\t\treturn this;\n\n\t}\n\n\tclear( renderer, color, depth, stencil ) {\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( this, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n}\n\nconst _vector1 = /*@__PURE__*/ new Vector3();\nconst _vector2 = /*@__PURE__*/ new Vector3();\nconst _normalMatrix = /*@__PURE__*/ new Matrix3();\n\nclass Plane {\n\n\tconstructor( normal = new Vector3( 1, 0, 0 ), constant = 0 ) {\n\n\t\tthis.isPlane = true;\n\n\t\t// normal is assumed to be normalized\n\n\t\tthis.normal = normal;\n\t\tthis.constant = constant;\n\n\t}\n\n\tset( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponents( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromNormalAndCoplanarPoint( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCoplanarPoints( a, b, c ) {\n\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t}\n\n\tdistanceToSphere( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t}\n\n\tprojectPoint( point, target ) {\n\n\t\treturn target.copy( point ).addScaledVector( this.normal, - this.distanceToPoint( point ) );\n\n\t}\n\n\tintersectLine( line, target ) {\n\n\t\tconst direction = line.delta( _vector1 );\n\n\t\tconst denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn target.copy( line.start ).addScaledVector( direction, t );\n\n\t}\n\n\tintersectsLine( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tconst startSign = this.distanceToPoint( line.start );\n\t\tconst endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t}\n\n\tcoplanarPoint( target ) {\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t}\n\n\tapplyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tequals( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _sphere$5 = /*@__PURE__*/ new Sphere();\nconst _vector$7 = /*@__PURE__*/ new Vector3();\n\nclass Frustum {\n\n\tconstructor( p0 = new Plane(), p1 = new Plane(), p2 = new Plane(), p3 = new Plane(), p4 = new Plane(), p5 = new Plane() ) {\n\n\t\tthis.planes = [ p0, p1, p2, p3, p4, p5 ];\n\n\t}\n\n\tset( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromProjectionMatrix( m, coordinateSystem = WebGLCoordinateSystem ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\n\t\tif ( coordinateSystem === WebGLCoordinateSystem ) {\n\n\t\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\t} else if ( coordinateSystem === WebGPUCoordinateSystem ) {\n\n\t\t\tplanes[ 5 ].setComponents( me2, me6, me10, me14 ).normalize();\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: ' + coordinateSystem );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tintersectsObject( object ) {\n\n\t\tif ( object.boundingSphere !== undefined ) {\n\n\t\t\tif ( object.boundingSphere === null ) object.computeBoundingSphere();\n\n\t\t\t_sphere$5.copy( object.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\t} else {\n\n\t\t\tconst geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\t_sphere$5.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\t}\n\n\t\treturn this.intersectsSphere( _sphere$5 );\n\n\t}\n\n\tintersectsSprite( sprite ) {\n\n\t\t_sphere$5.center.set( 0, 0, 0 );\n\t\t_sphere$5.radius = 0.7071067811865476;\n\t\t_sphere$5.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$5 );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector$7.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector$7.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector$7.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector$7 ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nfunction WebGLAnimation() {\n\n\tlet context = null;\n\tlet isAnimating = false;\n\tlet animationLoop = null;\n\tlet requestId = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tanimationLoop( time, frame );\n\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tcontext.cancelAnimationFrame( requestId );\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLAttributes( gl, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tconst buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst usage = attribute.usage;\n\t\tconst size = array.byteLength;\n\n\t\tconst buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tlet type;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\tif ( attribute.isFloat16BufferAttribute ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\ttype = gl.HALF_FLOAT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t\t}\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t} else if ( array instanceof Uint8ClampedArray ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.WebGLAttributes: Unsupported buffer data format: ' + array );\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version,\n\t\t\tsize: size\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst updateRange = attribute._updateRange; // @deprecated, r159\n\t\tconst updateRanges = attribute.updateRanges;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 && updateRanges.length === 0 ) {\n\n\t\t\t// Not using update ranges\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t}\n\n\t\tif ( updateRanges.length !== 0 ) {\n\n\t\t\tfor ( let i = 0, l = updateRanges.length; i < l; i ++ ) {\n\n\t\t\t\tconst range = updateRanges[ i ];\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tgl.bufferSubData( bufferType, range.start * array.BYTES_PER_ELEMENT,\n\t\t\t\t\t\tarray, range.start, range.count );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.bufferSubData( bufferType, range.start * array.BYTES_PER_ELEMENT,\n\t\t\t\t\t\tarray.subarray( range.start, range.start + range.count ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tattribute.clearUpdateRanges();\n\n\t\t}\n\n\t\t// @deprecated, r159\n\t\tif ( updateRange.count !== - 1 ) {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t\tattribute.onUploadCallback();\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isGLBufferAttribute ) {\n\n\t\t\tconst cached = buffers.get( attribute );\n\n\t\t\tif ( ! cached || cached.version < attribute.version ) {\n\n\t\t\t\tbuffers.set( attribute, {\n\t\t\t\t\tbuffer: attribute.buffer,\n\t\t\t\t\ttype: attribute.type,\n\t\t\t\t\tbytesPerElement: attribute.elementSize,\n\t\t\t\t\tversion: attribute.version\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tif ( data.size !== attribute.array.byteLength ) {\n\n\t\t\t\tthrow new Error( 'THREE.WebGLAttributes: The size of the buffer attribute\\'s array buffer does not match the original size. Resizing buffer attributes is not supported.' );\n\n\t\t\t}\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\nclass PlaneGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, widthSegments = 1, heightSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PlaneGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\tconst width_half = width / 2;\n\t\tconst height_half = height / 2;\n\n\t\tconst gridX = Math.floor( widthSegments );\n\t\tconst gridY = Math.floor( heightSegments );\n\n\t\tconst gridX1 = gridX + 1;\n\t\tconst gridY1 = gridY + 1;\n\n\t\tconst segment_width = width / gridX;\n\t\tconst segment_height = height / gridY;\n\n\t\t//\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tconst y = iy * segment_height - height_half;\n\n\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tconst x = ix * segment_width - width_half;\n\n\t\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tconst a = ix + gridX1 * iy;\n\t\t\t\tconst b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new PlaneGeometry( data.width, data.height, data.widthSegments, data.heightSegments );\n\n\t}\n\n}\n\nvar alphahash_fragment = \"#ifdef USE_ALPHAHASH\\n\\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\\n#endif\";\n\nvar alphahash_pars_fragment = \"#ifdef USE_ALPHAHASH\\n\\tconst float ALPHA_HASH_SCALE = 0.05;\\n\\tfloat hash2D( vec2 value ) {\\n\\t\\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\\n\\t}\\n\\tfloat hash3D( vec3 value ) {\\n\\t\\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\\n\\t}\\n\\tfloat getAlphaHashThreshold( vec3 position ) {\\n\\t\\tfloat maxDeriv = max(\\n\\t\\t\\tlength( dFdx( position.xyz ) ),\\n\\t\\t\\tlength( dFdy( position.xyz ) )\\n\\t\\t);\\n\\t\\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\\n\\t\\tvec2 pixScales = vec2(\\n\\t\\t\\texp2( floor( log2( pixScale ) ) ),\\n\\t\\t\\texp2( ceil( log2( pixScale ) ) )\\n\\t\\t);\\n\\t\\tvec2 alpha = vec2(\\n\\t\\t\\thash3D( floor( pixScales.x * position.xyz ) ),\\n\\t\\t\\thash3D( floor( pixScales.y * position.xyz ) )\\n\\t\\t);\\n\\t\\tfloat lerpFactor = fract( log2( pixScale ) );\\n\\t\\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\\n\\t\\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\\n\\t\\tvec3 cases = vec3(\\n\\t\\t\\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\\n\\t\\t\\t( x - 0.5 * a ) / ( 1.0 - a ),\\n\\t\\t\\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\\n\\t\\t);\\n\\t\\tfloat threshold = ( x < ( 1.0 - a ) )\\n\\t\\t\\t? ( ( x < a ) ? cases.x : cases.y )\\n\\t\\t\\t: cases.z;\\n\\t\\treturn clamp( threshold , 1.0e-6, 1.0 );\\n\\t}\\n#endif\";\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\\n#endif\";\n\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar alphatest_fragment = \"#ifdef USE_ALPHATEST\\n\\t#ifdef ALPHA_TO_COVERAGE\\n\\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\\n\\tif ( diffuseColor.a == 0.0 ) discard;\\n\\t#else\\n\\tif ( diffuseColor.a < alphaTest ) discard;\\n\\t#endif\\n#endif\";\n\nvar alphatest_pars_fragment = \"#ifdef USE_ALPHATEST\\n\\tuniform float alphaTest;\\n#endif\";\n\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_CLEARCOAT ) \\n\\t\\tclearcoatSpecularIndirect *= ambientOcclusion;\\n\\t#endif\\n\\t#if defined( USE_SHEEN ) \\n\\t\\tsheenSpecularIndirect *= ambientOcclusion;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\\n\\t#endif\\n#endif\";\n\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\nvar batching_pars_vertex = \"#ifdef USE_BATCHING\\n\\tattribute float batchId;\\n\\tuniform highp sampler2D batchingTexture;\\n\\tmat4 getBatchingMatrix( const in float i ) {\\n\\t\\tint size = textureSize( batchingTexture, 0 ).x;\\n\\t\\tint j = int( i ) * 4;\\n\\t\\tint x = j % size;\\n\\t\\tint y = j / size;\\n\\t\\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\\n\\t\\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\\n\\t\\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\\n\\t\\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\\n\\t\\treturn mat4( v1, v2, v3, v4 );\\n\\t}\\n#endif\";\n\nvar batching_vertex = \"#ifdef USE_BATCHING\\n\\tmat4 batchingMatrix = getBatchingMatrix( batchId );\\n#endif\";\n\nvar begin_vertex = \"vec3 transformed = vec3( position );\\n#ifdef USE_ALPHAHASH\\n\\tvPosition = vec3( position );\\n#endif\";\n\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\n\nvar bsdfs = \"float G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n} // validated\";\n\nvar iridescence_fragment = \"#ifdef USE_IRIDESCENCE\\n\\tconst mat3 XYZ_TO_REC709 = mat3(\\n\\t\\t 3.2404542, -0.9692660,  0.0556434,\\n\\t\\t-1.5371385,  1.8760108, -0.2040259,\\n\\t\\t-0.4985314,  0.0415560,  1.0572252\\n\\t);\\n\\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\\n\\t\\tvec3 sqrtF0 = sqrt( fresnel0 );\\n\\t\\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\\n\\t}\\n\\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\\n\\t}\\n\\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\\n\\t}\\n\\tvec3 evalSensitivity( float OPD, vec3 shift ) {\\n\\t\\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\\n\\t\\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\\n\\t\\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\\n\\t\\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\\n\\t\\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\\n\\t\\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\\n\\t\\txyz /= 1.0685e-7;\\n\\t\\tvec3 rgb = XYZ_TO_REC709 * xyz;\\n\\t\\treturn rgb;\\n\\t}\\n\\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\\n\\t\\tvec3 I;\\n\\t\\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\\n\\t\\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\\n\\t\\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\\n\\t\\tif ( cosTheta2Sq < 0.0 ) {\\n\\t\\t\\treturn vec3( 1.0 );\\n\\t\\t}\\n\\t\\tfloat cosTheta2 = sqrt( cosTheta2Sq );\\n\\t\\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\\n\\t\\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\\n\\t\\tfloat T121 = 1.0 - R12;\\n\\t\\tfloat phi12 = 0.0;\\n\\t\\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\\n\\t\\tfloat phi21 = PI - phi12;\\n\\t\\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\\t\\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\\n\\t\\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\\n\\t\\tvec3 phi23 = vec3( 0.0 );\\n\\t\\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\\n\\t\\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\\n\\t\\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\\n\\t\\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\\n\\t\\tvec3 phi = vec3( phi21 ) + phi23;\\n\\t\\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\\n\\t\\tvec3 r123 = sqrt( R123 );\\n\\t\\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\\n\\t\\tvec3 C0 = R12 + Rs;\\n\\t\\tI = C0;\\n\\t\\tvec3 Cm = Rs - T121;\\n\\t\\tfor ( int m = 1; m <= 2; ++ m ) {\\n\\t\\t\\tCm *= r123;\\n\\t\\t\\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\\n\\t\\t\\tI += Cm * Sm;\\n\\t\\t}\\n\\t\\treturn max( I, vec3( 0.0 ) );\\n\\t}\\n#endif\";\n\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vBumpMapUv );\\n\\t\\tvec2 dSTdy = dFdy( vBumpMapUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\\n\\t\\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\\n\\t\\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\n\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#ifdef ALPHA_TO_COVERAGE\\n\\t\\tfloat distanceToPlane, distanceGradient;\\n\\t\\tfloat clipOpacity = 1.0;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\\n\\t\\t\\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\\n\\t\\t\\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\\n\\t\\t\\tif ( clipOpacity == 0.0 ) discard;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\t\\tfloat unionClipOpacity = 1.0;\\n\\t\\t\\t#pragma unroll_loop_start\\n\\t\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\t\\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\\n\\t\\t\\t\\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\\n\\t\\t\\t\\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\\n\\t\\t\\t}\\n\\t\\t\\t#pragma unroll_loop_end\\n\\t\\t\\tclipOpacity *= 1.0 - unionClipOpacity;\\n\\t\\t#endif\\n\\t\\tdiffuseColor.a *= clipOpacity;\\n\\t\\tif ( diffuseColor.a == 0.0 ) discard;\\n\\t#else\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\t\\tbool clipped = true;\\n\\t\\t\\t#pragma unroll_loop_start\\n\\t\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t\\t}\\n\\t\\t\\t#pragma unroll_loop_end\\n\\t\\t\\tif ( clipped ) discard;\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\n\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\n\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\n\nvar color_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tdiffuseColor *= vColor;\\n#elif defined( USE_COLOR )\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\nvar color_pars_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_pars_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvColor = vec4( 1.0 );\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor *= color;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\";\n\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nvec3 pow2( const in vec3 x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract( sin( sn ) * c );\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\n#ifdef USE_ALPHAHASH\\n\\tvarying vec3 vPosition;\\n#endif\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat luminance( const in vec3 rgb ) {\\n\\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\\n\\treturn dot( weights, rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n}\\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n} // validated\";\n\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\\n\\t\\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\\n\\t\\tuv.x *= CUBEUV_TEXEL_WIDTH;\\n\\t\\tuv.y *= CUBEUV_TEXEL_HEIGHT;\\n\\t\\t#ifdef texture2DGradEXT\\n\\t\\t\\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn texture2D( envMap, uv ).rgb;\\n\\t\\t#endif\\n\\t}\\n\\t#define cubeUV_r0 1.0\\n\\t#define cubeUV_m0 - 2.0\\n\\t#define cubeUV_r1 0.8\\n\\t#define cubeUV_m1 - 1.0\\n\\t#define cubeUV_r4 0.4\\n\\t#define cubeUV_m4 2.0\\n\\t#define cubeUV_r5 0.305\\n\\t#define cubeUV_m5 3.0\\n\\t#define cubeUV_r6 0.21\\n\\t#define cubeUV_m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= cubeUV_r1 ) {\\n\\t\\t\\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\\n\\t\\t} else if ( roughness >= cubeUV_r4 ) {\\n\\t\\t\\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\\n\\t\\t} else if ( roughness >= cubeUV_r5 ) {\\n\\t\\t\\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\\n\\t\\t} else if ( roughness >= cubeUV_r6 ) {\\n\\t\\t\\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\";\n\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = objectTangent;\\n#endif\\n#ifdef USE_BATCHING\\n\\tmat3 bm = mat3( batchingMatrix );\\n\\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\\n\\ttransformedNormal = bm * transformedNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\ttransformedTangent = bm * transformedTangent;\\n\\t#endif\\n#endif\\n#ifdef USE_INSTANCING\\n\\tmat3 im = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\\n\\ttransformedNormal = im * transformedNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\ttransformedTangent = im * transformedTangent;\\n\\t#endif\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\n\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\n\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\\n#endif\";\n\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\n\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\n\nvar colorspace_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\n\nvar colorspace_pars_fragment = \"\\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\\n\\tvec3( 0.8224621, 0.177538, 0.0 ),\\n\\tvec3( 0.0331941, 0.9668058, 0.0 ),\\n\\tvec3( 0.0170827, 0.0723974, 0.9105199 )\\n);\\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\\n\\tvec3( 1.2249401, - 0.2249404, 0.0 ),\\n\\tvec3( - 0.0420569, 1.0420571, 0.0 ),\\n\\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\\n);\\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\\n\\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\\n}\\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\\n\\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\\n}\\nvec4 LinearTransferOETF( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 sRGBTransferOETF( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn sRGBTransferOETF( value );\\n}\";\n\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\n\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\n\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\n\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\n\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tvFogDepth = - mvPosition.z;\\n#endif\";\n\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float vFogDepth;\\n#endif\";\n\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\n\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float vFogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\n\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn vec3( texture2D( gradientMap, coord ).r );\\n\\t#else\\n\\t\\tvec2 fw = fwidth( coord ) * 0.5;\\n\\t\\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\\n\\t#endif\\n}\";\n\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\\n\\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\\n\\treflectedLight.indirectDiffuse += lightMapIrradiance;\\n#endif\";\n\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\nvar lights_lambert_fragment = \"LambertMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_lambert_pars_fragment = \"varying vec3 vViewPosition;\\nstruct LambertMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Lambert\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Lambert\";\n\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\n#if defined( USE_LIGHT_PROBES )\\n\\tuniform vec3 lightProbe[ 9 ];\\n#endif\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\\n\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\treturn irradiance;\\n}\\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\t#if defined ( LEGACY_LIGHTS )\\n\\t\\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\t\\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t\\t}\\n\\t\\treturn 1.0;\\n\\t#else\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tif ( cutoffDistance > 0.0 ) {\\n\\t\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t}\\n\\t\\treturn distanceFalloff;\\n\\t#endif\\n}\\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\\n\\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\\n\\t\\tlight.color = directionalLight.color;\\n\\t\\tlight.direction = directionalLight.direction;\\n\\t\\tlight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\\n\\t\\tvec3 lVector = pointLight.position - geometryPosition;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tlight.color = pointLight.color;\\n\\t\\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\\n\\t\\tvec3 lVector = spotLight.position - geometryPosition;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat angleCos = dot( light.direction, spotLight.direction );\\n\\t\\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\tif ( spotAttenuation > 0.0 ) {\\n\\t\\t\\tfloat lightDistance = length( lVector );\\n\\t\\t\\tlight.color = spotLight.color * spotAttenuation;\\n\\t\\t\\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t\\t} else {\\n\\t\\t\\tlight.color = vec3( 0.0 );\\n\\t\\t\\tlight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\\n\\t\\tfloat dotNL = dot( normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\n\nvar envmap_physical_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tvec3 getIBLIrradiance( const in vec3 normal ) {\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\tvec3 reflectVec = reflect( - viewDir, normal );\\n\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\\n\\t\\t\\t#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\t\\tvec3 bentNormal = cross( bitangent, viewDir );\\n\\t\\t\\t\\tbentNormal = normalize( cross( bentNormal, bitangent ) );\\n\\t\\t\\t\\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\\n\\t\\t\\t\\treturn getIBLRadiance( viewDir, bentNormal, roughness );\\n\\t\\t\\t#else\\n\\t\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t\\t#endif\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\n\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\";\n\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\";\n\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\\nmaterial.roughness = min( material.roughness, 1.0 );\\n#ifdef IOR\\n\\tmaterial.ior = ior;\\n\\t#ifdef USE_SPECULAR\\n\\t\\tfloat specularIntensityFactor = specularIntensity;\\n\\t\\tvec3 specularColorFactor = specularColor;\\n\\t\\t#ifdef USE_SPECULAR_COLORMAP\\n\\t\\t\\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\\n\\t\\t#endif\\n\\t\\t#ifdef USE_SPECULAR_INTENSITYMAP\\n\\t\\t\\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\\n\\t\\t#endif\\n\\t\\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\\n\\t#else\\n\\t\\tfloat specularIntensityFactor = 1.0;\\n\\t\\tvec3 specularColorFactor = vec3( 1.0 );\\n\\t\\tmaterial.specularF90 = 1.0;\\n\\t#endif\\n\\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.specularF90 = 1.0;\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\tmaterial.clearcoatF0 = vec3( 0.04 );\\n\\tmaterial.clearcoatF90 = 1.0;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tmaterial.iridescence = iridescence;\\n\\tmaterial.iridescenceIOR = iridescenceIOR;\\n\\t#ifdef USE_IRIDESCENCEMAP\\n\\t\\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\t\\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\\n\\t#else\\n\\t\\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\\n\\t#endif\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheenColor;\\n\\t#ifdef USE_SHEEN_COLORMAP\\n\\t\\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\\n\\t#endif\\n\\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\\n\\t#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\t\\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\\n\\t#endif\\n#endif\\n#ifdef USE_ANISOTROPY\\n\\t#ifdef USE_ANISOTROPYMAP\\n\\t\\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\\n\\t\\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\\n\\t\\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\\n\\t#else\\n\\t\\tvec2 anisotropyV = anisotropyVector;\\n\\t#endif\\n\\tmaterial.anisotropy = length( anisotropyV );\\n\\tif( material.anisotropy == 0.0 ) {\\n\\t\\tanisotropyV = vec2( 1.0, 0.0 );\\n\\t} else {\\n\\t\\tanisotropyV /= material.anisotropy;\\n\\t\\tmaterial.anisotropy = saturate( material.anisotropy );\\n\\t}\\n\\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\\n\\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\\n\\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\\n#endif\";\n\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat roughness;\\n\\tvec3 specularColor;\\n\\tfloat specularF90;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat clearcoat;\\n\\t\\tfloat clearcoatRoughness;\\n\\t\\tvec3 clearcoatF0;\\n\\t\\tfloat clearcoatF90;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tfloat iridescence;\\n\\t\\tfloat iridescenceIOR;\\n\\t\\tfloat iridescenceThickness;\\n\\t\\tvec3 iridescenceFresnel;\\n\\t\\tvec3 iridescenceF0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tvec3 sheenColor;\\n\\t\\tfloat sheenRoughness;\\n\\t#endif\\n\\t#ifdef IOR\\n\\t\\tfloat ior;\\n\\t#endif\\n\\t#ifdef USE_TRANSMISSION\\n\\t\\tfloat transmission;\\n\\t\\tfloat transmissionAlpha;\\n\\t\\tfloat thickness;\\n\\t\\tfloat attenuationDistance;\\n\\t\\tvec3 attenuationColor;\\n\\t#endif\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tfloat anisotropy;\\n\\t\\tfloat alphaT;\\n\\t\\tvec3 anisotropyT;\\n\\t\\tvec3 anisotropyB;\\n\\t#endif\\n};\\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\\nvec3 sheenSpecularDirect = vec3( 0.0 );\\nvec3 sheenSpecularIndirect = vec3(0.0 );\\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\\n    float x2 = x * x;\\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\\n}\\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\n#ifdef USE_ANISOTROPY\\n\\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\\n\\t\\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\\n\\t\\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\\n\\t\\tfloat v = 0.5 / ( gv + gl );\\n\\t\\treturn saturate(v);\\n\\t}\\n\\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\\n\\t\\tfloat a2 = alphaT * alphaB;\\n\\t\\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\\n\\t\\thighp float v2 = dot( v, v );\\n\\t\\tfloat w2 = a2 / v2;\\n\\t\\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\\n\\t}\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\\n\\t\\tvec3 f0 = material.clearcoatF0;\\n\\t\\tfloat f90 = material.clearcoatF90;\\n\\t\\tfloat roughness = material.clearcoatRoughness;\\n\\t\\tfloat alpha = pow2( roughness );\\n\\t\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\t\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\t\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\t\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\t\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\t\\tvec3 F = F_Schlick( f0, f90, dotVH );\\n\\t\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\t\\tfloat D = D_GGX( alpha, dotNH );\\n\\t\\treturn F * ( V * D );\\n\\t}\\n#endif\\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\\n\\tvec3 f0 = material.specularColor;\\n\\tfloat f90 = material.specularF90;\\n\\tfloat roughness = material.roughness;\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( f0, f90, dotVH );\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tF = mix( F, material.iridescenceFresnel, material.iridescence );\\n\\t#endif\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tfloat dotTL = dot( material.anisotropyT, lightDir );\\n\\t\\tfloat dotTV = dot( material.anisotropyT, viewDir );\\n\\t\\tfloat dotTH = dot( material.anisotropyT, halfDir );\\n\\t\\tfloat dotBL = dot( material.anisotropyB, lightDir );\\n\\t\\tfloat dotBV = dot( material.anisotropyB, viewDir );\\n\\t\\tfloat dotBH = dot( material.anisotropyB, halfDir );\\n\\t\\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\\n\\t\\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\\n\\t#else\\n\\t\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\t\\tfloat D = D_GGX( alpha, dotNH );\\n\\t#endif\\n\\treturn F * ( V * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie( float roughness, float dotNH ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tfloat invAlpha = 1.0 / alpha;\\n\\tfloat cos2h = dotNH * dotNH;\\n\\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\\n\\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\\n}\\nfloat V_Neubelt( float dotNV, float dotNL ) {\\n\\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\\n}\\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat D = D_Charlie( sheenRoughness, dotNH );\\n\\tfloat V = V_Neubelt( dotNV, dotNL );\\n\\treturn sheenColor * ( D * V );\\n}\\n#endif\\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat r2 = roughness * roughness;\\n\\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\\n\\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\\n\\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\\n\\treturn saturate( DG * RECIPROCAL_PI );\\n}\\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\\n\\treturn fab;\\n}\\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\treturn specularColor * fab.x + specularF90 * fab.y;\\n}\\n#ifdef USE_IRIDESCENCE\\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#else\\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#endif\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\\n\\t#else\\n\\t\\tvec3 Fr = specularColor;\\n\\t#endif\\n\\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\\n\\tfloat Ess = fab.x + fab.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometryNormal;\\n\\t\\tvec3 viewDir = geometryViewDir;\\n\\t\\tvec3 position = geometryPosition;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.roughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = dotNLcc * directLight.color;\\n\\t\\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\\n\\t#endif\\n\\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\\n\\t#endif\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\\n\\t#else\\n\\t\\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\\n\\t#endif\\n\\tvec3 totalScattering = singleScattering + multiScattering;\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\\n\\treflectedLight.indirectSpecular += radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\n\nvar lights_fragment_begin = \"\\nvec3 geometryPosition = - vViewPosition;\\nvec3 geometryNormal = normal;\\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\nvec3 geometryClearcoatNormal = vec3( 0.0 );\\n#ifdef USE_CLEARCOAT\\n\\tgeometryClearcoatNormal = clearcoatNormal;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\\n\\tif ( material.iridescenceThickness == 0.0 ) {\\n\\t\\tmaterial.iridescence = 0.0;\\n\\t} else {\\n\\t\\tmaterial.iridescence = saturate( material.iridescence );\\n\\t}\\n\\tif ( material.iridescence > 0.0 ) {\\n\\t\\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\\n\\t\\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\\n\\t}\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointLightInfo( pointLight, geometryPosition, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tvec4 spotColor;\\n\\tvec3 spotLightCoord;\\n\\tbool inSpotLightMap;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\\n\\t\\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\\n\\t\\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\\n\\t\\t#else\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\\n\\t\\t#endif\\n\\t\\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\\n\\t\\t\\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\\n\\t\\t\\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\\n\\t\\t\\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\\n\\t\\t\\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\\n\\t\\t#endif\\n\\t\\t#undef SPOT_LIGHT_MAP_INDEX\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalLightInfo( directionalLight, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#if defined( USE_LIGHT_PROBES )\\n\\t\\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\n\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getIBLIrradiance( geometryNormal );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\\n\\t#else\\n\\t\\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\\n\\t#endif\\n#endif\";\n\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n#endif\";\n\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\n\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\n\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\n\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\\n\\t\\n\\t#endif\\n\\tdiffuseColor *= sampledDiffuseColor;\\n#endif\";\n\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\n\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\t#if defined( USE_POINTS_UV )\\n\\t\\tvec2 uv = vUv;\\n\\t#else\\n\\t\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\t#endif\\n#endif\\n#ifdef USE_MAP\\n\\tdiffuseColor *= texture2D( map, uv );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\n\nvar map_particle_pars_fragment = \"#if defined( USE_POINTS_UV )\\n\\tvarying vec2 vUv;\\n#else\\n\\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\t\\tuniform mat3 uvTransform;\\n\\t#endif\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\n\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\nvar morphcolor_vertex = \"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\\n\\tvColor *= morphTargetBaseInfluence;\\n\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t#if defined( USE_COLOR_ALPHA )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\\n\\t\\t#elif defined( USE_COLOR )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\t\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\t\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\t\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n\\t#endif\\n#endif\";\n\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\\n\\t\\tuniform sampler2DArray morphTargetsTexture;\\n\\t\\tuniform ivec2 morphTargetsTextureSize;\\n\\t\\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\\n\\t\\t\\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\\n\\t\\t\\tint y = texelIndex / morphTargetsTextureSize.x;\\n\\t\\t\\tint x = texelIndex - y * morphTargetsTextureSize.x;\\n\\t\\t\\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\\n\\t\\t\\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\\n\\t\\t}\\n\\t#else\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t\\t#else\\n\\t\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\t\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\t\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\t\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar normal_fragment_begin = \"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\\n#ifdef FLAT_SHADED\\n\\tvec3 fdx = dFdx( vViewPosition );\\n\\tvec3 fdy = dFdy( vViewPosition );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal *= faceDirection;\\n\\t#endif\\n#endif\\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\\n\\t#ifdef USE_TANGENT\\n\\t\\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\\n\\t#else\\n\\t\\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\\n\\t\\t#if defined( USE_NORMALMAP )\\n\\t\\t\\tvNormalMapUv\\n\\t\\t#elif defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tvClearcoatNormalMapUv\\n\\t\\t#else\\n\\t\\t\\tvUv\\n\\t\\t#endif\\n\\t\\t);\\n\\t#endif\\n\\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\\n\\t\\ttbn[0] *= faceDirection;\\n\\t\\ttbn[1] *= faceDirection;\\n\\t#endif\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\t#ifdef USE_TANGENT\\n\\t\\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\\n\\t#else\\n\\t\\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\\n\\t#endif\\n\\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\\n\\t\\ttbn2[0] *= faceDirection;\\n\\t\\ttbn2[1] *= faceDirection;\\n\\t#endif\\n#endif\\nvec3 nonPerturbedNormal = normal;\";\n\nvar normal_fragment_maps = \"#ifdef USE_NORMALMAP_OBJECTSPACE\\n\\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\tnormal = normalize( tbn * mapN );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\\n#endif\";\n\nvar normal_pars_fragment = \"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\";\n\nvar normal_pars_vertex = \"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\";\n\nvar normal_vertex = \"#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\";\n\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef USE_NORMALMAP_OBJECTSPACE\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\\n\\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\\n\\t\\tvec3 q0 = dFdx( eye_pos.xyz );\\n\\t\\tvec3 q1 = dFdy( eye_pos.xyz );\\n\\t\\tvec2 st0 = dFdx( uv.st );\\n\\t\\tvec2 st1 = dFdy( uv.st );\\n\\t\\tvec3 N = surf_norm;\\n\\t\\tvec3 q1perp = cross( q1, N );\\n\\t\\tvec3 q0perp = cross( N, q0 );\\n\\t\\tvec3 T = q1perp * st0.x + q0perp * st1.x;\\n\\t\\tvec3 B = q1perp * st0.y + q0perp * st1.y;\\n\\t\\tfloat det = max( dot( T, T ), dot( B, B ) );\\n\\t\\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\\n\\t\\treturn mat3( T * scale, B * scale, N );\\n\\t}\\n#endif\";\n\nvar clearcoat_normal_fragment_begin = \"#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal = nonPerturbedNormal;\\n#endif\";\n\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\\n#endif\";\n\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\";\n\nvar iridescence_pars_fragment = \"#ifdef USE_IRIDESCENCEMAP\\n\\tuniform sampler2D iridescenceMap;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tuniform sampler2D iridescenceThicknessMap;\\n#endif\";\n\nvar opaque_fragment = \"#ifdef OPAQUE\\ndiffuseColor.a = 1.0;\\n#endif\\n#ifdef USE_TRANSMISSION\\ndiffuseColor.a *= material.transmissionAlpha;\\n#endif\\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\";\n\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec2 packDepthToRG( in highp float v ) {\\n\\treturn packDepthToRGBA( v ).yx;\\n}\\nfloat unpackRGToDepth( const in highp vec2 v ) {\\n\\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\\n\\treturn depth * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * depth - far );\\n}\";\n\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\n\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_BATCHING\\n\\tmvPosition = batchingMatrix * mvPosition;\\n#endif\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\n\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\n\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\n\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\n\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\nvar shadowmap_pars_fragment = \"#if NUM_SPOT_LIGHT_COORDS > 0\\n\\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\\n#endif\\n#if NUM_SPOT_LIGHT_MAPS > 0\\n\\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\\n#endif\\n#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\\n\\t\\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar shadowmap_pars_vertex = \"#if NUM_SPOT_LIGHT_COORDS > 0\\n\\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\\n\\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\\n#endif\\n#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\n\nvar shadowmap_vertex = \"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\\n\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\tvec4 shadowWorldPosition;\\n#endif\\n#if defined( USE_SHADOWMAP )\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if NUM_SPOT_LIGHT_COORDS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition;\\n\\t\\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\t\\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\\n\\t\\t#endif\\n\\t\\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\";\n\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\n\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\tuniform highp sampler2D boneTexture;\\n\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\tint size = textureSize( boneTexture, 0 ).x;\\n\\t\\tint j = int( i ) * 4;\\n\\t\\tint x = j % size;\\n\\t\\tint y = j / size;\\n\\t\\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\\n\\t\\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\\n\\t\\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\\n\\t\\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\\n\\t\\treturn mat4( v1, v2, v3, v4 );\\n\\t}\\n#endif\";\n\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\n\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\n\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\n\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn saturate( toneMappingExposure * color );\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\\n\\tvec3( 1.6605, - 0.1246, - 0.0182 ),\\n\\tvec3( - 0.5876, 1.1329, - 0.1006 ),\\n\\tvec3( - 0.0728, - 0.0083, 1.1187 )\\n);\\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\\n\\tvec3( 0.6274, 0.0691, 0.0164 ),\\n\\tvec3( 0.3293, 0.9195, 0.0880 ),\\n\\tvec3( 0.0433, 0.0113, 0.8956 )\\n);\\nvec3 agxDefaultContrastApprox( vec3 x ) {\\n\\tvec3 x2 = x * x;\\n\\tvec3 x4 = x2 * x2;\\n\\treturn + 15.5 * x4 * x2\\n\\t\\t- 40.14 * x4 * x\\n\\t\\t+ 31.96 * x4\\n\\t\\t- 6.868 * x2 * x\\n\\t\\t+ 0.4298 * x2\\n\\t\\t+ 0.1191 * x\\n\\t\\t- 0.00232;\\n}\\nvec3 AgXToneMapping( vec3 color ) {\\n\\tconst mat3 AgXInsetMatrix = mat3(\\n\\t\\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\\n\\t\\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\\n\\t\\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\\n\\t);\\n\\tconst mat3 AgXOutsetMatrix = mat3(\\n\\t\\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\\n\\t\\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\\n\\t\\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\\n\\t);\\n\\tconst float AgxMinEv = - 12.47393;\\tconst float AgxMaxEv = 4.026069;\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\\n\\tcolor = AgXInsetMatrix * color;\\n\\tcolor = max( color, 1e-10 );\\tcolor = log2( color );\\n\\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\\n\\tcolor = clamp( color, 0.0, 1.0 );\\n\\tcolor = agxDefaultContrastApprox( color );\\n\\tcolor = AgXOutsetMatrix * color;\\n\\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\\n\\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\\n\\tcolor = clamp( color, 0.0, 1.0 );\\n\\treturn color;\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\n\nvar transmission_fragment = \"#ifdef USE_TRANSMISSION\\n\\tmaterial.transmission = transmission;\\n\\tmaterial.transmissionAlpha = 1.0;\\n\\tmaterial.thickness = thickness;\\n\\tmaterial.attenuationDistance = attenuationDistance;\\n\\tmaterial.attenuationColor = attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\\n\\t#endif\\n\\tvec3 pos = vWorldPosition;\\n\\tvec3 v = normalize( cameraPosition - pos );\\n\\tvec3 n = inverseTransformDirection( normal, viewMatrix );\\n\\tvec4 transmitted = getIBLVolumeRefraction(\\n\\t\\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\\n\\t\\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\\n\\t\\tmaterial.attenuationColor, material.attenuationDistance );\\n\\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\\n\\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\\n#endif\";\n\nvar transmission_pars_fragment = \"#ifdef USE_TRANSMISSION\\n\\tuniform float transmission;\\n\\tuniform float thickness;\\n\\tuniform float attenuationDistance;\\n\\tuniform vec3 attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tuniform sampler2D transmissionMap;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tuniform sampler2D thicknessMap;\\n\\t#endif\\n\\tuniform vec2 transmissionSamplerSize;\\n\\tuniform sampler2D transmissionSamplerMap;\\n\\tuniform mat4 modelMatrix;\\n\\tuniform mat4 projectionMatrix;\\n\\tvarying vec3 vWorldPosition;\\n\\tfloat w0( float a ) {\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\\n\\t}\\n\\tfloat w1( float a ) {\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\\n\\t}\\n\\tfloat w2( float a ){\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\\n\\t}\\n\\tfloat w3( float a ) {\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a * a * a );\\n\\t}\\n\\tfloat g0( float a ) {\\n\\t\\treturn w0( a ) + w1( a );\\n\\t}\\n\\tfloat g1( float a ) {\\n\\t\\treturn w2( a ) + w3( a );\\n\\t}\\n\\tfloat h0( float a ) {\\n\\t\\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\\n\\t}\\n\\tfloat h1( float a ) {\\n\\t\\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\\n\\t}\\n\\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\\n\\t\\tuv = uv * texelSize.zw + 0.5;\\n\\t\\tvec2 iuv = floor( uv );\\n\\t\\tvec2 fuv = fract( uv );\\n\\t\\tfloat g0x = g0( fuv.x );\\n\\t\\tfloat g1x = g1( fuv.x );\\n\\t\\tfloat h0x = h0( fuv.x );\\n\\t\\tfloat h1x = h1( fuv.x );\\n\\t\\tfloat h0y = h0( fuv.y );\\n\\t\\tfloat h1y = h1( fuv.y );\\n\\t\\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\\n\\t\\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\\n\\t\\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\\n\\t\\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\\n\\t\\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\\n\\t\\t\\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\\n\\t}\\n\\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\\n\\t\\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\\n\\t\\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\\n\\t\\tvec2 fLodSizeInv = 1.0 / fLodSize;\\n\\t\\tvec2 cLodSizeInv = 1.0 / cLodSize;\\n\\t\\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\\n\\t\\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\\n\\t\\treturn mix( fSample, cSample, fract( lod ) );\\n\\t}\\n\\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\\n\\t\\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\\n\\t\\tvec3 modelScale;\\n\\t\\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\\n\\t\\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\\n\\t\\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\\n\\t\\treturn normalize( refractionVector ) * thickness * modelScale;\\n\\t}\\n\\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\\n\\t\\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\\n\\t}\\n\\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\\n\\t\\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\\n\\t\\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\\n\\t}\\n\\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tif ( isinf( attenuationDistance ) ) {\\n\\t\\t\\treturn vec3( 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\\n\\t\\t\\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\\t\\t\\treturn transmittance;\\n\\t\\t}\\n\\t}\\n\\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\\n\\t\\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\\n\\t\\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\\n\\t\\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\\n\\t\\tvec3 refractedRayExit = position + transmissionRay;\\n\\t\\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\\n\\t\\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\\n\\t\\trefractionCoords += 1.0;\\n\\t\\trefractionCoords /= 2.0;\\n\\t\\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\\n\\t\\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\\n\\t\\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\\n\\t\\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\\n\\t\\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\\n\\t\\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\\n\\t}\\n#endif\";\n\nvar uv_pars_fragment = \"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\\n\\tvarying vec2 vUv;\\n#endif\\n#ifdef USE_MAP\\n\\tvarying vec2 vMapUv;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tvarying vec2 vAlphaMapUv;\\n#endif\\n#ifdef USE_LIGHTMAP\\n\\tvarying vec2 vLightMapUv;\\n#endif\\n#ifdef USE_AOMAP\\n\\tvarying vec2 vAoMapUv;\\n#endif\\n#ifdef USE_BUMPMAP\\n\\tvarying vec2 vBumpMapUv;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tvarying vec2 vNormalMapUv;\\n#endif\\n#ifdef USE_EMISSIVEMAP\\n\\tvarying vec2 vEmissiveMapUv;\\n#endif\\n#ifdef USE_METALNESSMAP\\n\\tvarying vec2 vMetalnessMapUv;\\n#endif\\n#ifdef USE_ROUGHNESSMAP\\n\\tvarying vec2 vRoughnessMapUv;\\n#endif\\n#ifdef USE_ANISOTROPYMAP\\n\\tvarying vec2 vAnisotropyMapUv;\\n#endif\\n#ifdef USE_CLEARCOATMAP\\n\\tvarying vec2 vClearcoatMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvarying vec2 vClearcoatNormalMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tvarying vec2 vClearcoatRoughnessMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCEMAP\\n\\tvarying vec2 vIridescenceMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tvarying vec2 vIridescenceThicknessMapUv;\\n#endif\\n#ifdef USE_SHEEN_COLORMAP\\n\\tvarying vec2 vSheenColorMapUv;\\n#endif\\n#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\tvarying vec2 vSheenRoughnessMapUv;\\n#endif\\n#ifdef USE_SPECULARMAP\\n\\tvarying vec2 vSpecularMapUv;\\n#endif\\n#ifdef USE_SPECULAR_COLORMAP\\n\\tvarying vec2 vSpecularColorMapUv;\\n#endif\\n#ifdef USE_SPECULAR_INTENSITYMAP\\n\\tvarying vec2 vSpecularIntensityMapUv;\\n#endif\\n#ifdef USE_TRANSMISSIONMAP\\n\\tuniform mat3 transmissionMapTransform;\\n\\tvarying vec2 vTransmissionMapUv;\\n#endif\\n#ifdef USE_THICKNESSMAP\\n\\tuniform mat3 thicknessMapTransform;\\n\\tvarying vec2 vThicknessMapUv;\\n#endif\";\n\nvar uv_pars_vertex = \"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\\n\\tvarying vec2 vUv;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform mat3 mapTransform;\\n\\tvarying vec2 vMapUv;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform mat3 alphaMapTransform;\\n\\tvarying vec2 vAlphaMapUv;\\n#endif\\n#ifdef USE_LIGHTMAP\\n\\tuniform mat3 lightMapTransform;\\n\\tvarying vec2 vLightMapUv;\\n#endif\\n#ifdef USE_AOMAP\\n\\tuniform mat3 aoMapTransform;\\n\\tvarying vec2 vAoMapUv;\\n#endif\\n#ifdef USE_BUMPMAP\\n\\tuniform mat3 bumpMapTransform;\\n\\tvarying vec2 vBumpMapUv;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tuniform mat3 normalMapTransform;\\n\\tvarying vec2 vNormalMapUv;\\n#endif\\n#ifdef USE_DISPLACEMENTMAP\\n\\tuniform mat3 displacementMapTransform;\\n\\tvarying vec2 vDisplacementMapUv;\\n#endif\\n#ifdef USE_EMISSIVEMAP\\n\\tuniform mat3 emissiveMapTransform;\\n\\tvarying vec2 vEmissiveMapUv;\\n#endif\\n#ifdef USE_METALNESSMAP\\n\\tuniform mat3 metalnessMapTransform;\\n\\tvarying vec2 vMetalnessMapUv;\\n#endif\\n#ifdef USE_ROUGHNESSMAP\\n\\tuniform mat3 roughnessMapTransform;\\n\\tvarying vec2 vRoughnessMapUv;\\n#endif\\n#ifdef USE_ANISOTROPYMAP\\n\\tuniform mat3 anisotropyMapTransform;\\n\\tvarying vec2 vAnisotropyMapUv;\\n#endif\\n#ifdef USE_CLEARCOATMAP\\n\\tuniform mat3 clearcoatMapTransform;\\n\\tvarying vec2 vClearcoatMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform mat3 clearcoatNormalMapTransform;\\n\\tvarying vec2 vClearcoatNormalMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform mat3 clearcoatRoughnessMapTransform;\\n\\tvarying vec2 vClearcoatRoughnessMapUv;\\n#endif\\n#ifdef USE_SHEEN_COLORMAP\\n\\tuniform mat3 sheenColorMapTransform;\\n\\tvarying vec2 vSheenColorMapUv;\\n#endif\\n#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\tuniform mat3 sheenRoughnessMapTransform;\\n\\tvarying vec2 vSheenRoughnessMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCEMAP\\n\\tuniform mat3 iridescenceMapTransform;\\n\\tvarying vec2 vIridescenceMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tuniform mat3 iridescenceThicknessMapTransform;\\n\\tvarying vec2 vIridescenceThicknessMapUv;\\n#endif\\n#ifdef USE_SPECULARMAP\\n\\tuniform mat3 specularMapTransform;\\n\\tvarying vec2 vSpecularMapUv;\\n#endif\\n#ifdef USE_SPECULAR_COLORMAP\\n\\tuniform mat3 specularColorMapTransform;\\n\\tvarying vec2 vSpecularColorMapUv;\\n#endif\\n#ifdef USE_SPECULAR_INTENSITYMAP\\n\\tuniform mat3 specularIntensityMapTransform;\\n\\tvarying vec2 vSpecularIntensityMapUv;\\n#endif\\n#ifdef USE_TRANSMISSIONMAP\\n\\tuniform mat3 transmissionMapTransform;\\n\\tvarying vec2 vTransmissionMapUv;\\n#endif\\n#ifdef USE_THICKNESSMAP\\n\\tuniform mat3 thicknessMapTransform;\\n\\tvarying vec2 vThicknessMapUv;\\n#endif\";\n\nvar uv_vertex = \"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\\n\\tvUv = vec3( uv, 1 ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_LIGHTMAP\\n\\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_AOMAP\\n\\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_BUMPMAP\\n\\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_DISPLACEMENTMAP\\n\\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_EMISSIVEMAP\\n\\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_METALNESSMAP\\n\\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_ROUGHNESSMAP\\n\\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_ANISOTROPYMAP\\n\\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_CLEARCOATMAP\\n\\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_IRIDESCENCEMAP\\n\\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SHEEN_COLORMAP\\n\\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SPECULARMAP\\n\\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SPECULAR_COLORMAP\\n\\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SPECULAR_INTENSITYMAP\\n\\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_TRANSMISSIONMAP\\n\\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_THICKNESSMAP\\n\\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\\n#endif\";\n\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_BATCHING\\n\\t\\tworldPosition = batchingMatrix * worldPosition;\\n\\t#endif\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\n\nconst vertex$h = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\n\nconst fragment$h = \"uniform sampler2D t2D;\\nuniform float backgroundIntensity;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\\n\\t#endif\\n\\ttexColor.rgb *= backgroundIntensity;\\n\\tgl_FragColor = texColor;\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\";\n\nconst vertex$g = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nconst fragment$g = \"#ifdef ENVMAP_TYPE_CUBE\\n\\tuniform samplerCube envMap;\\n#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\tuniform sampler2D envMap;\\n#endif\\nuniform float flipEnvMap;\\nuniform float backgroundBlurriness;\\nuniform float backgroundIntensity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\\n\\t#else\\n\\t\\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\t#endif\\n\\ttexColor.rgb *= backgroundIntensity;\\n\\tgl_FragColor = texColor;\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\";\n\nconst vertex$f = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nconst fragment$f = \"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\nvoid main() {\\n\\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\\n\\tgl_FragColor = texColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\";\n\nconst vertex$e = \"#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\n\nconst fragment$e = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <clipping_planes_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\n\nconst vertex$d = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\n\nconst fragment$d = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <clipping_planes_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\n\nconst vertex$c = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\n\nconst fragment$c = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\";\n\nconst vertex$b = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$b = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nconst vertex$a = \"#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinbase_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$a = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$9 = \"#define LAMBERT\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$9 = \"#define LAMBERT\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_lambert_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_lambert_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$8 = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\n\nconst fragment$8 = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$7 = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\n\nconst fragment$7 = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\\n\\t#ifdef OPAQUE\\n\\t\\tgl_FragColor.a = 1.0;\\n\\t#endif\\n}\";\n\nconst vertex$6 = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$6 = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$5 = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifdef USE_TRANSMISSION\\n\\tvarying vec3 vWorldPosition;\\n#endif\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n#ifdef USE_TRANSMISSION\\n\\tvWorldPosition = worldPosition.xyz;\\n#endif\\n}\";\n\nconst fragment$5 = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define IOR\\n\\t#define USE_SPECULAR\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef IOR\\n\\tuniform float ior;\\n#endif\\n#ifdef USE_SPECULAR\\n\\tuniform float specularIntensity;\\n\\tuniform vec3 specularColor;\\n\\t#ifdef USE_SPECULAR_COLORMAP\\n\\t\\tuniform sampler2D specularColorMap;\\n\\t#endif\\n\\t#ifdef USE_SPECULAR_INTENSITYMAP\\n\\t\\tuniform sampler2D specularIntensityMap;\\n\\t#endif\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tuniform float iridescence;\\n\\tuniform float iridescenceIOR;\\n\\tuniform float iridescenceThicknessMinimum;\\n\\tuniform float iridescenceThicknessMaximum;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheenColor;\\n\\tuniform float sheenRoughness;\\n\\t#ifdef USE_SHEEN_COLORMAP\\n\\t\\tuniform sampler2D sheenColorMap;\\n\\t#endif\\n\\t#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\t\\tuniform sampler2D sheenRoughnessMap;\\n\\t#endif\\n#endif\\n#ifdef USE_ANISOTROPY\\n\\tuniform vec2 anisotropyVector;\\n\\t#ifdef USE_ANISOTROPYMAP\\n\\t\\tuniform sampler2D anisotropyMap;\\n\\t#endif\\n#endif\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <iridescence_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_physical_pars_fragment>\\n#include <transmission_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <iridescence_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\\n\\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\\n\\t#include <transmission_fragment>\\n\\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\\n\\t#ifdef USE_SHEEN\\n\\t\\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\\n\\t\\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\\n\\t\\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\\n\\t\\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\\n\\t#endif\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$4 = \"#define TOON\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$4 = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$3 = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n#ifdef USE_POINTS_UV\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n#endif\\nvoid main() {\\n\\t#ifdef USE_POINTS_UV\\n\\t\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\t#endif\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$3 = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nconst vertex$2 = \"#include <common>\\n#include <batching_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$2 = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <logdepthbuf_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nconst vertex$1 = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$1 = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nconst ShaderChunk = {\n\talphahash_fragment: alphahash_fragment,\n\talphahash_pars_fragment: alphahash_pars_fragment,\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\talphatest_pars_fragment: alphatest_pars_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbatching_pars_vertex: batching_pars_vertex,\n\tbatching_vertex: batching_vertex,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tiridescence_fragment: iridescence_fragment,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tcolorspace_fragment: colorspace_fragment,\n\tcolorspace_pars_fragment: colorspace_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_fragment: lights_lambert_fragment,\n\tlights_lambert_pars_fragment: lights_lambert_pars_fragment,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphcolor_vertex: morphcolor_vertex,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormal_pars_fragment: normal_pars_fragment,\n\tnormal_pars_vertex: normal_pars_vertex,\n\tnormal_vertex: normal_vertex,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tiridescence_pars_fragment: iridescence_pars_fragment,\n\topaque_fragment: opaque_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\ttransmission_fragment: transmission_fragment,\n\ttransmission_pars_fragment: transmission_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_vert: vertex$h,\n\tbackground_frag: fragment$h,\n\tbackgroundCube_vert: vertex$g,\n\tbackgroundCube_frag: fragment$g,\n\tcube_vert: vertex$f,\n\tcube_frag: fragment$f,\n\tdepth_vert: vertex$e,\n\tdepth_frag: fragment$e,\n\tdistanceRGBA_vert: vertex$d,\n\tdistanceRGBA_frag: fragment$d,\n\tequirect_vert: vertex$c,\n\tequirect_frag: fragment$c,\n\tlinedashed_vert: vertex$b,\n\tlinedashed_frag: fragment$b,\n\tmeshbasic_vert: vertex$a,\n\tmeshbasic_frag: fragment$a,\n\tmeshlambert_vert: vertex$9,\n\tmeshlambert_frag: fragment$9,\n\tmeshmatcap_vert: vertex$8,\n\tmeshmatcap_frag: fragment$8,\n\tmeshnormal_vert: vertex$7,\n\tmeshnormal_frag: fragment$7,\n\tmeshphong_vert: vertex$6,\n\tmeshphong_frag: fragment$6,\n\tmeshphysical_vert: vertex$5,\n\tmeshphysical_frag: fragment$5,\n\tmeshtoon_vert: vertex$4,\n\tmeshtoon_frag: fragment$4,\n\tpoints_vert: vertex$3,\n\tpoints_frag: fragment$3,\n\tshadow_vert: vertex$2,\n\tshadow_frag: fragment$2,\n\tsprite_vert: vertex$1,\n\tsprite_frag: fragment$1\n};\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nconst UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tmapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\n\t\talphaMap: { value: null },\n\t\talphaMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\n\t\talphaTest: { value: 0 }\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\t\tspecularMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 }, // basic, lambert, phong\n\t\tior: { value: 1.5 }, // physical\n\t\trefractionRatio: { value: 0.98 }, // basic, lambert, phong\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 },\n\t\taoMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 },\n\t\tlightMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\tnormalScale: { value: /*@__PURE__*/ new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null },\n\t\temissiveMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null },\n\t\tmetalnessMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null },\n\t\troughnessMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: /*@__PURE__*/ new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotLightMap: { value: [] },\n\t\tspotShadowMap: { value: [] },\n\t\tspotLightMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} },\n\n\t\tltc_1: { value: null },\n\t\tltc_2: { value: null }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\talphaMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\talphaTest: { value: 0 },\n\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: /*@__PURE__*/ new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\tmapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\talphaMap: { value: null },\n\t\talphaMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\talphaTest: { value: 0 }\n\n\t}\n\n};\n\nconst ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: /*@__PURE__*/ new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 1.0 },\n\t\t\t\tmetalness: { value: 0.0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshnormal_vert,\n\t\tfragmentShader: ShaderChunk.meshnormal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t\tbackgroundIntensity: { value: 1 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\n\tbackgroundCube: {\n\n\t\tuniforms: {\n\t\t\tenvMap: { value: null },\n\t\t\tflipEnvMap: { value: - 1 },\n\t\t\tbackgroundBlurriness: { value: 0 },\n\t\t\tbackgroundIntensity: { value: 1 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.backgroundCube_vert,\n\t\tfragmentShader: ShaderChunk.backgroundCube_frag\n\n\t},\n\n\tcube: {\n\n\t\tuniforms: {\n\t\t\ttCube: { value: null },\n\t\t\ttFlip: { value: - 1 },\n\t\t\topacity: { value: 1.0 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: /*@__PURE__*/ new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: /*@__PURE__*/ new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tclearcoatNormalMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tclearcoatNormalScale: { value: /*@__PURE__*/ new Vector2( 1, 1 ) },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatRoughnessMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tiridescence: { value: 0 },\n\t\t\tiridescenceMap: { value: null },\n\t\t\tiridescenceMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tiridescenceIOR: { value: 1.3 },\n\t\t\tiridescenceThicknessMinimum: { value: 100 },\n\t\t\tiridescenceThicknessMaximum: { value: 400 },\n\t\t\tiridescenceThicknessMap: { value: null },\n\t\t\tiridescenceThicknessMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tsheen: { value: 0 },\n\t\t\tsheenColor: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\tsheenColorMap: { value: null },\n\t\t\tsheenColorMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tsheenRoughness: { value: 1 },\n\t\t\tsheenRoughnessMap: { value: null },\n\t\t\tsheenRoughnessMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\ttransmission: { value: 0 },\n\t\t\ttransmissionMap: { value: null },\n\t\t\ttransmissionMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\ttransmissionSamplerSize: { value: /*@__PURE__*/ new Vector2() },\n\t\t\ttransmissionSamplerMap: { value: null },\n\t\t\tthickness: { value: 0 },\n\t\t\tthicknessMap: { value: null },\n\t\t\tthicknessMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tattenuationDistance: { value: 0 },\n\t\t\tattenuationColor: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\tspecularColor: { value: /*@__PURE__*/ new Color( 1, 1, 1 ) },\n\t\t\tspecularColorMap: { value: null },\n\t\t\tspecularColorMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tspecularIntensity: { value: 1 },\n\t\t\tspecularIntensityMap: { value: null },\n\t\t\tspecularIntensityMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tanisotropyVector: { value: /*@__PURE__*/ new Vector2() },\n\t\t\tanisotropyMap: { value: null },\n\t\t\tanisotropyMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\nconst _rgb = { r: 0, b: 0, g: 0 };\n\nfunction WebGLBackground( renderer, cubemaps, cubeuvmaps, state, objects, alpha, premultipliedAlpha ) {\n\n\tconst clearColor = new Color( 0x000000 );\n\tlet clearAlpha = alpha === true ? 0 : 1;\n\n\tlet planeMesh;\n\tlet boxMesh;\n\n\tlet currentBackground = null;\n\tlet currentBackgroundVersion = 0;\n\tlet currentTonemapping = null;\n\n\tfunction render( renderList, scene ) {\n\n\t\tlet forceClear = false;\n\t\tlet background = scene.isScene === true ? scene.background : null;\n\n\t\tif ( background && background.isTexture ) {\n\n\t\t\tconst usePMREM = scene.backgroundBlurriness > 0; // use PMREM if the user wants to blur the background\n\t\t\tbackground = ( usePMREM ? cubeuvmaps : cubemaps ).get( background );\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tconst environmentBlendMode = renderer.xr.getEnvironmentBlendMode();\n\n\t\tif ( environmentBlendMode === 'additive' ) {\n\n\t\t\tstate.buffers.color.setClear( 0, 0, 0, 1, premultipliedAlpha );\n\n\t\t} else if ( environmentBlendMode === 'alpha-blend' ) {\n\n\t\t\tstate.buffers.color.setClear( 0, 0, 0, 0, premultipliedAlpha );\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.backgroundCube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.backgroundCube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.backgroundCube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// add \"envMap\" material property so the renderer can evaluate it like for built-in materials\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.envMap.value = background;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = ( background.isCubeTexture && background.isRenderTargetTexture === false ) ? - 1 : 1;\n\t\t\tboxMesh.material.uniforms.backgroundBlurriness.value = scene.backgroundBlurriness;\n\t\t\tboxMesh.material.uniforms.backgroundIntensity.value = scene.backgroundIntensity;\n\t\t\tboxMesh.material.toneMapped = ColorManagement.getTransfer( background.colorSpace ) !== SRGBTransfer;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\tboxMesh.layers.enableAll();\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// add \"map\" material property so the renderer can evaluate it like for built-in materials\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\t\t\tplaneMesh.material.uniforms.backgroundIntensity.value = scene.backgroundIntensity;\n\t\t\tplaneMesh.material.toneMapped = ColorManagement.getTransfer( background.colorSpace ) !== SRGBTransfer;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\tplaneMesh.layers.enableAll();\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tcolor.getRGB( _rgb, getUnlitUniformColorSpace( renderer ) );\n\n\t\tstate.buffers.color.setClear( _rgb.r, _rgb.g, _rgb.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha = 1 ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\n\n\tconst maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\tlet forceUpdate = false;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tif ( vaoAvailable ) {\n\n\t\t\tconst state = getBindingState( geometry, program, material );\n\n\t\t\tif ( currentState !== state ) {\n\n\t\t\t\tcurrentState = state;\n\t\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t\t}\n\n\t\t\tupdateBuffers = needsUpdate( object, geometry, program, index );\n\n\t\t\tif ( updateBuffers ) saveCache( object, geometry, program, index );\n\n\t\t} else {\n\n\t\t\tconst wireframe = ( material.wireframe === true );\n\n\t\t\tif ( currentState.geometry !== geometry.id ||\n\t\t\t\tcurrentState.program !== program.id ||\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\n\n\t\t\t\tcurrentState.geometry = geometry.id;\n\t\t\t\tcurrentState.program = program.id;\n\t\t\t\tcurrentState.wireframe = wireframe;\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tif ( updateBuffers || forceUpdate ) {\n\n\t\t\tforceUpdate = false;\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\n\n\t\treturn extension.createVertexArrayOES();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\n\n\t\treturn extension.bindVertexArrayOES( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\n\n\t\treturn extension.deleteVertexArrayOES( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {},\n\t\t\tindex: null\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( object, geometry, program, index ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tconst cachedAttribute = cachedAttributes[ name ];\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( cachedAttribute === undefined ) return true;\n\n\t\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\t\tif ( geometryAttribute && cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( currentState.attributesNum !== attributesNum ) return true;\n\n\t\tif ( currentState.index !== index ) return true;\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( object, geometry, program, index ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet attribute = attributes[ name ];\n\n\t\t\t\tif ( attribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) attribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) attribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tconst data = {};\n\t\t\t\tdata.attribute = attribute;\n\n\t\t\t\tif ( attribute && attribute.data ) {\n\n\t\t\t\t\tdata.data = attribute.data;\n\n\t\t\t\t}\n\n\t\t\t\tcache[ name ] = data;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\t\tcurrentState.attributesNum = attributesNum;\n\n\t\tcurrentState.index = index;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset, integer ) {\n\n\t\tif ( integer === true ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\t// check for integer attributes (WebGL 2 only)\n\n\t\t\t\t\tconst integer = ( capabilities.isWebGL2 === true && ( type === gl.INT || type === gl.UNSIGNED_INT || geometryAttribute.gpuType === IntType ) );\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, data.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tstride * bytesPerElement,\n\t\t\t\t\t\t\t\t( offset + ( size / programAttribute.locationSize ) * i ) * bytesPerElement,\n\t\t\t\t\t\t\t\tinteger\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tsize * bytesPerElement,\n\t\t\t\t\t\t\t\t( size / programAttribute.locationSize ) * i * bytesPerElement,\n\t\t\t\t\t\t\t\tinteger\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute.location, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\t\tforceUpdate = true;\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatibility\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\tfunction renderMultiDraw( starts, counts, drawCount ) {\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\tconst extension = extensions.get( 'WEBGL_multi_draw' );\n\t\tif ( extension === null ) {\n\n\t\t\tfor ( let i = 0; i < drawCount; i ++ ) {\n\n\t\t\t\tthis.render( starts[ i ], counts[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\textension.multiDrawArraysWEBGL( mode, starts, 0, counts, 0, drawCount );\n\n\t\t\tlet elementCount = 0;\n\t\t\tfor ( let i = 0; i < drawCount; i ++ ) {\n\n\t\t\t\telementCount += counts[ i ];\n\n\t\t\t}\n\n\t\t\tinfo.update( elementCount, mode, 1 );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\tthis.renderMultiDraw = renderMultiDraw;\n\n}\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tlet maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\tconst isWebGL2 = typeof WebGL2RenderingContext !== 'undefined' && gl.constructor.name === 'WebGL2RenderingContext';\n\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tconst maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tconst drawBuffers = isWebGL2 || extensions.has( 'WEBGL_draw_buffers' );\n\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tconst maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tconst maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tconst maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tconst maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tconst maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tconst maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tconst maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tconst maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tconst vertexTextures = maxVertexTextures > 0;\n\tconst floatFragmentTextures = isWebGL2 || extensions.has( 'OES_texture_float' );\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tconst maxSamples = isWebGL2 ? gl.getParameter( gl.MAX_SAMPLES ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tdrawBuffers: drawBuffers,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\nfunction WebGLClipping( properties ) {\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping ) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\n\t};\n\n\tthis.setGlobalState = function ( planes, camera ) {\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\n\t};\n\n\tthis.setState = function ( material, camera, useCache ) {\n\n\t\tconst planes = material.clippingPlanes,\n\t\t\tclipIntersection = material.clipIntersection,\n\t\t\tclipShadows = material.clipShadows;\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = materialProperties.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, useCache );\n\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tmaterialProperties.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tconst nPlanes = planes !== null ? planes.length : 0;\n\t\tlet dstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\nfunction WebGLCubeMaps( renderer ) {\n\n\tlet cubemaps = new WeakMap();\n\n\tfunction mapTextureMapping( texture, mapping ) {\n\n\t\tif ( mapping === EquirectangularReflectionMapping ) {\n\n\t\t\ttexture.mapping = CubeReflectionMapping;\n\n\t\t} else if ( mapping === EquirectangularRefractionMapping ) {\n\n\t\t\ttexture.mapping = CubeRefractionMapping;\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tif ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping ) {\n\n\t\t\t\tif ( cubemaps.has( texture ) ) {\n\n\t\t\t\t\tconst cubemap = cubemaps.get( texture ).texture;\n\t\t\t\t\treturn mapTextureMapping( cubemap, texture.mapping );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\tif ( image && image.height > 0 ) {\n\n\t\t\t\t\t\tconst renderTarget = new WebGLCubeRenderTarget( image.height );\n\t\t\t\t\t\trenderTarget.fromEquirectangularTexture( renderer, texture );\n\t\t\t\t\t\tcubemaps.set( texture, renderTarget );\n\n\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\treturn mapTextureMapping( renderTarget.texture, texture.mapping );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemap = cubemaps.get( texture );\n\n\t\tif ( cubemap !== undefined ) {\n\n\t\t\tcubemaps.delete( texture );\n\t\t\tcubemap.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubemaps = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nclass OrthographicCamera extends Camera {\n\n\tconstructor( left = - 1, right = 1, top = 1, bottom = - 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.isOrthographicCamera = true;\n\n\t\tthis.type = 'OrthographicCamera';\n\n\t\tthis.zoom = 1;\n\t\tthis.view = null;\n\n\t\tthis.left = left;\n\t\tthis.right = right;\n\t\tthis.top = top;\n\t\tthis.bottom = bottom;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t}\n\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tconst cx = ( this.right + this.left ) / 2;\n\t\tconst cy = ( this.top + this.bottom ) / 2;\n\n\t\tlet left = cx - dx;\n\t\tlet right = cx + dx;\n\t\tlet top = cy + dy;\n\t\tlet bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far, this.coordinateSystem );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst LOD_MIN = 4;\n\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\n\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nconst MAX_SAMPLES = 20;\n\nconst _flatCamera = /*@__PURE__*/ new OrthographicCamera();\nconst _clearColor = /*@__PURE__*/ new Color();\nlet _oldTarget = null;\nlet _oldActiveCubeFace = 0;\nlet _oldActiveMipmapLevel = 0;\n\n// Golden Ratio\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nconst INV_PHI = 1 / PHI;\n\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nconst _axisDirections = [\n\t/*@__PURE__*/ new Vector3( 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, INV_PHI ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, - INV_PHI ),\n\t/*@__PURE__*/ new Vector3( INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( - INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( PHI, INV_PHI, 0 ),\n\t/*@__PURE__*/ new Vector3( - PHI, INV_PHI, 0 ) ];\n\n/**\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n *\n * Paper: Fast, Accurate Image-Based Lighting\n * https://drive.google.com/file/d/15y8r_UpKlU9SvV4ILb0C3qCPecS8pvLz/view\n*/\n\nclass PMREMGenerator {\n\n\tconstructor( renderer ) {\n\n\t\tthis._renderer = renderer;\n\t\tthis._pingPongRenderTarget = null;\n\n\t\tthis._lodMax = 0;\n\t\tthis._cubeSize = 0;\n\t\tthis._lodPlanes = [];\n\t\tthis._sizeLods = [];\n\t\tthis._sigmas = [];\n\n\t\tthis._blurMaterial = null;\n\t\tthis._cubemapMaterial = null;\n\t\tthis._equirectMaterial = null;\n\n\t\tthis._compileMaterial( this._blurMaterial );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\t_oldActiveCubeFace = this._renderer.getActiveCubeFace();\n\t\t_oldActiveMipmapLevel = this._renderer.getActiveMipmapLevel();\n\n\t\tthis._setSize( 256 );\n\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\n\t\tcubeUVRenderTarget.depthBuffer = true;\n\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\n\t\tif ( sigma > 0 ) {\n\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * or HDR. The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular( equirectangular, renderTarget = null ) {\n\n\t\treturn this._fromTexture( equirectangular, renderTarget );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * or HDR. The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap( cubemap, renderTarget = null ) {\n\n\t\treturn this._fromTexture( cubemap, renderTarget );\n\n\t}\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader() {\n\n\t\tif ( this._cubemapMaterial === null ) {\n\n\t\t\tthis._cubemapMaterial = _getCubemapMaterial();\n\t\t\tthis._compileMaterial( this._cubemapMaterial );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader() {\n\n\t\tif ( this._equirectMaterial === null ) {\n\n\t\t\tthis._equirectMaterial = _getEquirectMaterial();\n\t\t\tthis._compileMaterial( this._equirectMaterial );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose() {\n\n\t\tthis._dispose();\n\n\t\tif ( this._cubemapMaterial !== null ) this._cubemapMaterial.dispose();\n\t\tif ( this._equirectMaterial !== null ) this._equirectMaterial.dispose();\n\n\t}\n\n\t// private interface\n\n\t_setSize( cubeSize ) {\n\n\t\tthis._lodMax = Math.floor( Math.log2( cubeSize ) );\n\t\tthis._cubeSize = Math.pow( 2, this._lodMax );\n\n\t}\n\n\t_dispose() {\n\n\t\tif ( this._blurMaterial !== null ) this._blurMaterial.dispose();\n\n\t\tif ( this._pingPongRenderTarget !== null ) this._pingPongRenderTarget.dispose();\n\n\t\tfor ( let i = 0; i < this._lodPlanes.length; i ++ ) {\n\n\t\t\tthis._lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t}\n\n\t_cleanup( outputTarget ) {\n\n\t\tthis._renderer.setRenderTarget( _oldTarget, _oldActiveCubeFace, _oldActiveMipmapLevel );\n\t\toutputTarget.scissorTest = false;\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\n\n\t}\n\n\t_fromTexture( texture, renderTarget ) {\n\n\t\tif ( texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping ) {\n\n\t\t\tthis._setSize( texture.image.length === 0 ? 16 : ( texture.image[ 0 ].width || texture.image[ 0 ].image.width ) );\n\n\t\t} else { // Equirectangular\n\n\t\t\tthis._setSize( texture.image.width / 4 );\n\n\t\t}\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\t_oldActiveCubeFace = this._renderer.getActiveCubeFace();\n\t\t_oldActiveMipmapLevel = this._renderer.getActiveMipmapLevel();\n\n\t\tconst cubeUVRenderTarget = renderTarget || this._allocateTargets();\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_allocateTargets() {\n\n\t\tconst width = 3 * Math.max( this._cubeSize, 16 * 7 );\n\t\tconst height = 4 * this._cubeSize;\n\n\t\tconst params = {\n\t\t\tmagFilter: LinearFilter,\n\t\t\tminFilter: LinearFilter,\n\t\t\tgenerateMipmaps: false,\n\t\t\ttype: HalfFloatType,\n\t\t\tformat: RGBAFormat,\n\t\t\tcolorSpace: LinearSRGBColorSpace,\n\t\t\tdepthBuffer: false\n\t\t};\n\n\t\tconst cubeUVRenderTarget = _createRenderTarget( width, height, params );\n\n\t\tif ( this._pingPongRenderTarget === null || this._pingPongRenderTarget.width !== width || this._pingPongRenderTarget.height !== height ) {\n\n\t\t\tif ( this._pingPongRenderTarget !== null ) {\n\n\t\t\t\tthis._dispose();\n\n\t\t\t}\n\n\t\t\tthis._pingPongRenderTarget = _createRenderTarget( width, height, params );\n\n\t\t\tconst { _lodMax } = this;\n\t\t\t( { sizeLods: this._sizeLods, lodPlanes: this._lodPlanes, sigmas: this._sigmas } = _createPlanes( _lodMax ) );\n\n\t\t\tthis._blurMaterial = _getBlurShader( _lodMax, width, height );\n\n\t\t}\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_compileMaterial( material ) {\n\n\t\tconst tmpMesh = new Mesh( this._lodPlanes[ 0 ], material );\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\n\n\t}\n\n\t_sceneToCubeUV( scene, near, far, cubeUVRenderTarget ) {\n\n\t\tconst fov = 90;\n\t\tconst aspect = 1;\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\n\t\tconst renderer = this._renderer;\n\n\t\tconst originalAutoClear = renderer.autoClear;\n\t\tconst toneMapping = renderer.toneMapping;\n\t\trenderer.getClearColor( _clearColor );\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.autoClear = false;\n\n\t\tconst backgroundMaterial = new MeshBasicMaterial( {\n\t\t\tname: 'PMREM.Background',\n\t\t\tside: BackSide,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t} );\n\n\t\tconst backgroundBox = new Mesh( new BoxGeometry(), backgroundMaterial );\n\n\t\tlet useSolidColor = false;\n\t\tconst background = scene.background;\n\n\t\tif ( background ) {\n\n\t\t\tif ( background.isColor ) {\n\n\t\t\t\tbackgroundMaterial.color.copy( background );\n\t\t\t\tscene.background = null;\n\t\t\t\tuseSolidColor = true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tbackgroundMaterial.color.copy( _clearColor );\n\t\t\tuseSolidColor = true;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst col = i % 3;\n\n\t\t\tif ( col === 0 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t\t} else if ( col === 1 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t\t}\n\n\t\t\tconst size = this._cubeSize;\n\n\t\t\t_setViewport( cubeUVRenderTarget, col * size, i > 2 ? size : 0, size, size );\n\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\n\t\t\tif ( useSolidColor ) {\n\n\t\t\t\trenderer.render( backgroundBox, cubeCamera );\n\n\t\t\t}\n\n\t\t\trenderer.render( scene, cubeCamera );\n\n\t\t}\n\n\t\tbackgroundBox.geometry.dispose();\n\t\tbackgroundBox.material.dispose();\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.autoClear = originalAutoClear;\n\t\tscene.background = background;\n\n\t}\n\n\t_textureToCubeUV( texture, cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\n\t\tconst isCubeTexture = ( texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping );\n\n\t\tif ( isCubeTexture ) {\n\n\t\t\tif ( this._cubemapMaterial === null ) {\n\n\t\t\t\tthis._cubemapMaterial = _getCubemapMaterial();\n\n\t\t\t}\n\n\t\t\tthis._cubemapMaterial.uniforms.flipEnvMap.value = ( texture.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t} else {\n\n\t\t\tif ( this._equirectMaterial === null ) {\n\n\t\t\t\tthis._equirectMaterial = _getEquirectMaterial();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst material = isCubeTexture ? this._cubemapMaterial : this._equirectMaterial;\n\t\tconst mesh = new Mesh( this._lodPlanes[ 0 ], material );\n\n\t\tconst uniforms = material.uniforms;\n\n\t\tuniforms[ 'envMap' ].value = texture;\n\n\t\tconst size = this._cubeSize;\n\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * size, 2 * size );\n\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\trenderer.render( mesh, _flatCamera );\n\n\t}\n\n\t_applyPMREM( cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tfor ( let i = 1; i < this._lodPlanes.length; i ++ ) {\n\n\t\t\tconst sigma = Math.sqrt( this._sigmas[ i ] * this._sigmas[ i ] - this._sigmas[ i - 1 ] * this._sigmas[ i - 1 ] );\n\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t\t}\n\n\t\trenderer.autoClear = autoClear;\n\n\t}\n\n\t/**\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\n\t * the poles) to approximate the orthogonally-separable blur. It is least\n\t * accurate at the poles, but still does a decent job.\n\t */\n\t_blur( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\n\n\t\tthis._halfBlur(\n\t\t\tcubeUVRenderTarget,\n\t\t\tpingPongRenderTarget,\n\t\t\tlodIn,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'latitudinal',\n\t\t\tpoleAxis );\n\n\t\tthis._halfBlur(\n\t\t\tpingPongRenderTarget,\n\t\t\tcubeUVRenderTarget,\n\t\t\tlodOut,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'longitudinal',\n\t\t\tpoleAxis );\n\n\t}\n\n\t_halfBlur( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst blurMaterial = this._blurMaterial;\n\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\t\tconsole.error(\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t\t}\n\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\n\t\tconst STANDARD_DEVIATIONS = 3;\n\n\t\tconst blurMesh = new Mesh( this._lodPlanes[ lodOut ], blurMaterial );\n\t\tconst blurUniforms = blurMaterial.uniforms;\n\n\t\tconst pixels = this._sizeLods[ lodIn ] - 1;\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\t\tif ( samples > MAX_SAMPLES ) {\n\n\t\t\tconsole.warn( `sigmaRadians, ${\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t\t}\n\n\t\tconst weights = [];\n\t\tlet sum = 0;\n\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\t\tconst x = i / sigmaPixels;\n\t\t\tconst weight = Math.exp( - x * x / 2 );\n\t\t\tweights.push( weight );\n\n\t\t\tif ( i === 0 ) {\n\n\t\t\t\tsum += weight;\n\n\t\t\t} else if ( i < samples ) {\n\n\t\t\t\tsum += 2 * weight;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\n\n\t\t\tweights[ i ] = weights[ i ] / sum;\n\n\t\t}\n\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\t\tblurUniforms[ 'samples' ].value = samples;\n\t\tblurUniforms[ 'weights' ].value = weights;\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\n\t\tif ( poleAxis ) {\n\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t\t}\n\n\t\tconst { _lodMax } = this;\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\t\tblurUniforms[ 'mipInt' ].value = _lodMax - lodIn;\n\n\t\tconst outputSize = this._sizeLods[ lodOut ];\n\t\tconst x = 3 * outputSize * ( lodOut > _lodMax - LOD_MIN ? lodOut - _lodMax + LOD_MIN : 0 );\n\t\tconst y = 4 * ( this._cubeSize - outputSize );\n\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\n\t\trenderer.setRenderTarget( targetOut );\n\t\trenderer.render( blurMesh, _flatCamera );\n\n\t}\n\n}\n\n\n\nfunction _createPlanes( lodMax ) {\n\n\tconst lodPlanes = [];\n\tconst sizeLods = [];\n\tconst sigmas = [];\n\n\tlet lod = lodMax;\n\n\tconst totalLods = lodMax - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n\n\tfor ( let i = 0; i < totalLods; i ++ ) {\n\n\t\tconst sizeLod = Math.pow( 2, lod );\n\t\tsizeLods.push( sizeLod );\n\t\tlet sigma = 1.0 / sizeLod;\n\n\t\tif ( i > lodMax - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - lodMax + LOD_MIN - 1 ];\n\n\t\t} else if ( i === 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\n\t\tsigmas.push( sigma );\n\n\t\tconst texelSize = 1.0 / ( sizeLod - 2 );\n\t\tconst min = - texelSize;\n\t\tconst max = 1 + texelSize;\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tconst cubeFaces = 6;\n\t\tconst vertices = 6;\n\t\tconst positionSize = 3;\n\t\tconst uvSize = 2;\n\t\tconst faceIndexSize = 1;\n\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tconst y = face > 2 ? 0 : - 1;\n\t\t\tconst coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tconst fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\n\t\tconst planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\tlodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\n\treturn { lodPlanes, sizeLods, sigmas };\n\n}\n\nfunction _createRenderTarget( width, height, params ) {\n\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( width, height, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( target, x, y, width, height ) {\n\n\ttarget.viewport.set( x, y, width, height );\n\ttarget.scissor.set( x, y, width, height );\n\n}\n\nfunction _getBlurShader( lodMax, width, height ) {\n\n\tconst weights = new Float32Array( MAX_SAMPLES );\n\tconst poleAxis = new Vector3( 0, 1, 0 );\n\tconst shaderMaterial = new ShaderMaterial( {\n\n\t\tname: 'SphericalGaussianBlur',\n\n\t\tdefines: {\n\t\t\t'n': MAX_SAMPLES,\n\t\t\t'CUBEUV_TEXEL_WIDTH': 1.0 / width,\n\t\t\t'CUBEUV_TEXEL_HEIGHT': 1.0 / height,\n\t\t\t'CUBEUV_MAX_MIP': `${lodMax}.0`,\n\t\t},\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectMaterial() {\n\n\treturn new ShaderMaterial( {\n\n\t\tname: 'EquirectangularToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n}\n\nfunction _getCubemapMaterial() {\n\n\treturn new ShaderMaterial( {\n\n\t\tname: 'CubemapToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'flipEnvMap': { value: - 1 }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn /* glsl */`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`;\n\n}\n\nfunction WebGLCubeUVMaps( renderer ) {\n\n\tlet cubeUVmaps = new WeakMap();\n\n\tlet pmremGenerator = null;\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tconst isEquirectMap = ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping );\n\t\t\tconst isCubeMap = ( mapping === CubeReflectionMapping || mapping === CubeRefractionMapping );\n\n\t\t\t// equirect/cube map to cubeUV conversion\n\n\t\t\tif ( isEquirectMap || isCubeMap ) {\n\n\t\t\t\tif ( texture.isRenderTargetTexture && texture.needsPMREMUpdate === true ) {\n\n\t\t\t\t\ttexture.needsPMREMUpdate = false;\n\n\t\t\t\t\tlet renderTarget = cubeUVmaps.get( texture );\n\n\t\t\t\t\tif ( pmremGenerator === null ) pmremGenerator = new PMREMGenerator( renderer );\n\n\t\t\t\t\trenderTarget = isEquirectMap ? pmremGenerator.fromEquirectangular( texture, renderTarget ) : pmremGenerator.fromCubemap( texture, renderTarget );\n\t\t\t\t\tcubeUVmaps.set( texture, renderTarget );\n\n\t\t\t\t\treturn renderTarget.texture;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( cubeUVmaps.has( texture ) ) {\n\n\t\t\t\t\t\treturn cubeUVmaps.get( texture ).texture;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\t\tif ( ( isEquirectMap && image && image.height > 0 ) || ( isCubeMap && image && isCubeTextureComplete( image ) ) ) {\n\n\t\t\t\t\t\t\tif ( pmremGenerator === null ) pmremGenerator = new PMREMGenerator( renderer );\n\n\t\t\t\t\t\t\tconst renderTarget = isEquirectMap ? pmremGenerator.fromEquirectangular( texture ) : pmremGenerator.fromCubemap( texture );\n\t\t\t\t\t\t\tcubeUVmaps.set( texture, renderTarget );\n\n\t\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\t\treturn renderTarget.texture;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction isCubeTextureComplete( image ) {\n\n\t\tlet count = 0;\n\t\tconst length = 6;\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tif ( image[ i ] !== undefined ) count ++;\n\n\t\t}\n\n\t\treturn count === length;\n\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemapUV = cubeUVmaps.get( texture );\n\n\t\tif ( cubemapUV !== undefined ) {\n\n\t\t\tcubeUVmaps.delete( texture );\n\t\t\tcubemapUV.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubeUVmaps = new WeakMap();\n\n\t\tif ( pmremGenerator !== null ) {\n\n\t\t\tpmremGenerator.dispose();\n\t\t\tpmremGenerator = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLExtensions( gl ) {\n\n\tconst extensions = {};\n\n\tfunction getExtension( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tlet extension;\n\n\t\tswitch ( name ) {\n\n\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\textension = gl.getExtension( name );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t}\n\n\treturn {\n\n\t\thas: function ( name ) {\n\n\t\t\treturn getExtension( name ) !== null;\n\n\t\t},\n\n\t\tinit: function ( capabilities ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgetExtension( 'EXT_color_buffer_float' );\n\t\t\t\tgetExtension( 'WEBGL_clip_cull_distance' );\n\n\t\t\t} else {\n\n\t\t\t\tgetExtension( 'WEBGL_depth_texture' );\n\t\t\t\tgetExtension( 'OES_texture_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float_linear' );\n\t\t\t\tgetExtension( 'OES_standard_derivatives' );\n\t\t\t\tgetExtension( 'OES_element_index_uint' );\n\t\t\t\tgetExtension( 'OES_vertex_array_object' );\n\t\t\t\tgetExtension( 'ANGLE_instanced_arrays' );\n\n\t\t\t}\n\n\t\t\tgetExtension( 'OES_texture_float_linear' );\n\t\t\tgetExtension( 'EXT_color_buffer_half_float' );\n\t\t\tgetExtension( 'WEBGL_multisampled_render_to_texture' );\n\n\t\t},\n\n\t\tget: function ( name ) {\n\n\t\t\tconst extension = getExtension( name );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\n\n\tconst geometries = {};\n\tconst wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tconst geometry = event.target;\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\tattributes.remove( geometry.index );\n\n\t\t}\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tattributes.remove( geometry.attributes[ name ] );\n\n\t\t}\n\n\t\tfor ( const name in geometry.morphAttributes ) {\n\n\t\t\tconst array = geometry.morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.remove( array[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\tconst attribute = wireframeAttributes.get( geometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( geometry );\n\n\t\t}\n\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\n\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\n\n\t\t\tdelete geometry._maxInstanceCount;\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tif ( geometries[ geometry.id ] === true ) return geometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries[ geometry.id ] = true;\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\n\n\t\tfor ( const name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tconst indices = [];\n\n\t\tconst geometryIndex = geometry.index;\n\t\tconst geometryPosition = geometry.attributes.position;\n\t\tlet version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tconst array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tconst a = array[ i + 0 ];\n\t\t\t\tconst b = array[ i + 1 ];\n\t\t\t\tconst c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else if ( geometryPosition !== undefined ) {\n\n\t\t\tconst array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tconst a = i + 0;\n\t\t\t\tconst b = i + 1;\n\t\t\t\tconst c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst attribute = new ( arrayNeedsUint32( indices ) ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\n\n\t\t//\n\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tconst geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tlet type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\tfunction renderMultiDraw( starts, counts, drawCount ) {\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\tconst extension = extensions.get( 'WEBGL_multi_draw' );\n\t\tif ( extension === null ) {\n\n\t\t\tfor ( let i = 0; i < drawCount; i ++ ) {\n\n\t\t\t\tthis.render( starts[ i ] / bytesPerElement, counts[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\textension.multiDrawElementsWEBGL( mode, counts, 0, type, starts, 0, drawCount );\n\n\t\t\tlet elementCount = 0;\n\t\t\tfor ( let i = 0; i < drawCount; i ++ ) {\n\n\t\t\t\telementCount += counts[ i ];\n\n\t\t\t}\n\n\t\t\tinfo.update( elementCount, mode, 1 );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\tthis.renderMultiDraw = renderMultiDraw;\n\n}\n\nfunction WebGLInfo( gl ) {\n\n\tconst memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tconst render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase gl.TRIANGLES:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINES:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_STRIP:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_LOOP:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase gl.POINTS:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\nfunction numericalSort( a, b ) {\n\n\treturn a[ 0 ] - b[ 0 ];\n\n}\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl, capabilities, textures ) {\n\n\tconst influencesList = {};\n\tconst morphInfluences = new Float32Array( 8 );\n\tconst morphTextures = new WeakMap();\n\tconst morph = new Vector4();\n\n\tconst workInfluences = [];\n\n\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\tworkInfluences[ i ] = [ i, 0 ];\n\n\t}\n\n\tfunction update( object, geometry, program ) {\n\n\t\tconst objectInfluences = object.morphTargetInfluences;\n\n\t\tif ( capabilities.isWebGL2 === true ) {\n\n\t\t\t// instead of using attributes, the WebGL 2 code path encodes morph targets\n\t\t\t// into an array of data textures. Each layer represents a single morph target.\n\n\t\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\t\tlet entry = morphTextures.get( geometry );\n\n\t\t\tif ( entry === undefined || entry.count !== morphTargetsCount ) {\n\n\t\t\t\tif ( entry !== undefined ) entry.texture.dispose();\n\n\t\t\t\tconst hasMorphPosition = geometry.morphAttributes.position !== undefined;\n\t\t\t\tconst hasMorphNormals = geometry.morphAttributes.normal !== undefined;\n\t\t\t\tconst hasMorphColors = geometry.morphAttributes.color !== undefined;\n\n\t\t\t\tconst morphTargets = geometry.morphAttributes.position || [];\n\t\t\t\tconst morphNormals = geometry.morphAttributes.normal || [];\n\t\t\t\tconst morphColors = geometry.morphAttributes.color || [];\n\n\t\t\t\tlet vertexDataCount = 0;\n\n\t\t\t\tif ( hasMorphPosition === true ) vertexDataCount = 1;\n\t\t\t\tif ( hasMorphNormals === true ) vertexDataCount = 2;\n\t\t\t\tif ( hasMorphColors === true ) vertexDataCount = 3;\n\n\t\t\t\tlet width = geometry.attributes.position.count * vertexDataCount;\n\t\t\t\tlet height = 1;\n\n\t\t\t\tif ( width > capabilities.maxTextureSize ) {\n\n\t\t\t\t\theight = Math.ceil( width / capabilities.maxTextureSize );\n\t\t\t\t\twidth = capabilities.maxTextureSize;\n\n\t\t\t\t}\n\n\t\t\t\tconst buffer = new Float32Array( width * height * 4 * morphTargetsCount );\n\n\t\t\t\tconst texture = new DataArrayTexture( buffer, width, height, morphTargetsCount );\n\t\t\t\ttexture.type = FloatType;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t// fill buffer\n\n\t\t\t\tconst vertexDataStride = vertexDataCount * 4;\n\n\t\t\t\tfor ( let i = 0; i < morphTargetsCount; i ++ ) {\n\n\t\t\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\t\t\tconst morphNormal = morphNormals[ i ];\n\t\t\t\t\tconst morphColor = morphColors[ i ];\n\n\t\t\t\t\tconst offset = width * height * 4 * i;\n\n\t\t\t\t\tfor ( let j = 0; j < morphTarget.count; j ++ ) {\n\n\t\t\t\t\t\tconst stride = j * vertexDataStride;\n\n\t\t\t\t\t\tif ( hasMorphPosition === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphTarget, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 0 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 1 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 2 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 3 ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasMorphNormals === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphNormal, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 4 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 5 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 6 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 7 ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasMorphColors === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphColor, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 8 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 9 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 10 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 11 ] = ( morphColor.itemSize === 4 ) ? morph.w : 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tentry = {\n\t\t\t\t\tcount: morphTargetsCount,\n\t\t\t\t\ttexture: texture,\n\t\t\t\t\tsize: new Vector2( width, height )\n\t\t\t\t};\n\n\t\t\t\tmorphTextures.set( geometry, entry );\n\n\t\t\t\tfunction disposeTexture() {\n\n\t\t\t\t\ttexture.dispose();\n\n\t\t\t\t\tmorphTextures.delete( geometry );\n\n\t\t\t\t\tgeometry.removeEventListener( 'dispose', disposeTexture );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.addEventListener( 'dispose', disposeTexture );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet morphInfluencesSum = 0;\n\n\t\t\tfor ( let i = 0; i < objectInfluences.length; i ++ ) {\n\n\t\t\t\tmorphInfluencesSum += objectInfluences[ i ];\n\n\t\t\t}\n\n\t\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', objectInfluences );\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetsTexture', entry.texture, textures );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetsTextureSize', entry.size );\n\n\n\t\t} else {\n\n\t\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\t\tlet influences = influencesList[ geometry.id ];\n\n\t\t\tif ( influences === undefined || influences.length !== length ) {\n\n\t\t\t\t// initialise list\n\n\t\t\t\tinfluences = [];\n\n\t\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t\t}\n\n\t\t\t// Collect influences\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tconst influence = influences[ i ];\n\n\t\t\t\tinfluence[ 0 ] = i;\n\t\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t\t}\n\n\t\t\tinfluences.sort( absNumericalSort );\n\n\t\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\n\n\t\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\n\t\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\n\t\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tworkInfluences.sort( numericalSort );\n\n\t\t\tconst morphTargets = geometry.morphAttributes.position;\n\t\t\tconst morphNormals = geometry.morphAttributes.normal;\n\n\t\t\tlet morphInfluencesSum = 0;\n\n\t\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\t\tconst influence = workInfluences[ i ];\n\t\t\t\tconst index = influence[ 0 ];\n\t\t\t\tconst value = influence[ 1 ];\n\n\t\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\n\n\t\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\n\n\t\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\n\n\t\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( morphTargets && geometry.hasAttribute( 'morphTarget' + i ) === true ) {\n\n\t\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( morphNormals && geometry.hasAttribute( 'morphNormal' + i ) === true ) {\n\n\t\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tif ( object.hasEventListener( 'dispose', onInstancedMeshDispose ) === false ) {\n\n\t\t\t\tobject.addEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\t\t}\n\n\t\t\tif ( updateMap.get( object ) !== frame ) {\n\n\t\t\t\tattributes.update( object.instanceMatrix, gl.ARRAY_BUFFER );\n\n\t\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\t\tattributes.update( object.instanceColor, gl.ARRAY_BUFFER );\n\n\t\t\t\t}\n\n\t\t\t\tupdateMap.set( object, frame );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tconst skeleton = object.skeleton;\n\n\t\t\tif ( updateMap.get( skeleton ) !== frame ) {\n\n\t\t\t\tskeleton.update();\n\n\t\t\t\tupdateMap.set( skeleton, frame );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\tfunction onInstancedMeshDispose( event ) {\n\n\t\tconst instancedMesh = event.target;\n\n\t\tinstancedMesh.removeEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\tattributes.remove( instancedMesh.instanceMatrix );\n\n\t\tif ( instancedMesh.instanceColor !== null ) attributes.remove( instancedMesh.instanceColor );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\nclass DepthTexture extends Texture {\n\n\tconstructor( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\n\n\t\tformat = format !== undefined ? format : DepthFormat;\n\n\t\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\n\n\t\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\n\n\t\t}\n\n\t\tif ( type === undefined && format === DepthFormat ) type = UnsignedIntType;\n\t\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isDepthTexture = true;\n\n\t\tthis.image = { width: width, height: height };\n\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\t\tthis.flipY = false;\n\t\tthis.generateMipmaps = false;\n\n\t\tthis.compareFunction = null;\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.compareFunction = source.compareFunction;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.compareFunction !== null ) data.compareFunction = this.compareFunction;\n\n\t\treturn data;\n\n\t}\n\n}\n\n/**\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\n\nconst emptyTexture = /*@__PURE__*/ new Texture();\n\nconst emptyShadowTexture = /*@__PURE__*/ new DepthTexture( 1, 1 );\nemptyShadowTexture.compareFunction = LessEqualCompare;\n\nconst emptyArrayTexture = /*@__PURE__*/ new DataArrayTexture();\nconst empty3dTexture = /*@__PURE__*/ new Data3DTexture();\nconst emptyCubeTexture = /*@__PURE__*/ new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nconst arrayCacheF32 = [];\nconst arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nconst mat4array = new Float32Array( 16 );\nconst mat3array = new Float32Array( 9 );\nconst mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tconst firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tconst n = nBlocks * blockSize;\n\tlet r = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tlet r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\t}\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or THREE.MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single integer / boolean\n\nfunction setValueV1i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single integer / boolean vector (from flat array or THREE.VectorN)\n\nfunction setValueV2i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2i( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2iv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3i( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3iv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4i( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4iv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single unsigned integer\n\nfunction setValueV1ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single unsigned integer vector (from flat array or THREE.VectorN)\n\nfunction setValueV2ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2ui( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2uiv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3ui( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3uiv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4ui( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4uiv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\tconst emptyTexture2D = ( this.type === gl.SAMPLER_2D_SHADOW ) ? emptyShadowTexture : emptyTexture;\n\n\ttextures.setTexture2D( v || emptyTexture2D, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || empty3dTexture, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTextureCube( v || emptyCubeTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyArrayTexture, unit );\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\t\tcase 0x8dc6: return setValueV2ui; // _VEC2\n\t\tcase 0x8dc7: return setValueV3ui; // _VEC3\n\t\tcase 0x8dc8: return setValueV4ui; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n\n// Array of scalars\n\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Array of vectors (from flat array or array of THREE.VectorN)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (from flat array or array of THREE.MatrixN)\n\nfunction setValueM2Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of integer / boolean\n\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\n// Array of integer / boolean vectors (from flat array)\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n// Array of unsigned integer\n\nfunction setValueV1uiArray( gl, v ) {\n\n\tgl.uniform1uiv( this.addr, v );\n\n}\n\n// Array of unsigned integer vectors (from flat array)\n\nfunction setValueV2uiArray( gl, v ) {\n\n\tgl.uniform2uiv( this.addr, v );\n\n}\n\nfunction setValueV3uiArray( gl, v ) {\n\n\tgl.uniform3uiv( this.addr, v );\n\n}\n\nfunction setValueV4uiArray( gl, v ) {\n\n\tgl.uniform4uiv( this.addr, v );\n\n}\n\n\n// Array of textures (2D / 3D / Cube / 2DArray)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT3DArray( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture3D( v[ i ] || empty3dTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT2DArrayArray( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture2DArray( v[ i ] || emptyArrayTexture, units[ i ] );\n\n\t}\n\n}\n\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x1405: return setValueV1uiArray; // UINT\n\t\tcase 0x8dc6: return setValueV2uiArray; // _VEC2\n\t\tcase 0x8dc7: return setValueV3uiArray; // _VEC3\n\t\tcase 0x8dc8: return setValueV4uiArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3DArray;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArrayArray;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nclass SingleUniform {\n\n\tconstructor( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.cache = [];\n\t\tthis.type = activeInfo.type;\n\t\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n}\n\nclass PureArrayUniform {\n\n\tconstructor( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.cache = [];\n\t\tthis.type = activeInfo.type;\n\t\tthis.size = activeInfo.size;\n\t\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n}\n\nclass StructuredUniform {\n\n\tconstructor( id ) {\n\n\t\tthis.id = id;\n\n\t\tthis.seq = [];\n\t\tthis.map = {};\n\n\t}\n\n\tsetValue( gl, value, textures ) {\n\n\t\tconst seq = this.seq;\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ];\n\t\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t\t}\n\n\t}\n\n}\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nconst RePathPart = /(\\w+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tconst path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tconst match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex;\n\n\t\tlet id = match[ 1 ];\n\t\tconst idIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tconst map = container.map;\n\t\t\tlet next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nclass WebGLUniforms {\n\n\tconstructor( gl, program ) {\n\n\t\tthis.seq = [];\n\t\tthis.map = {};\n\n\t\tconst n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\t\tfor ( let i = 0; i < n; ++ i ) {\n\n\t\t\tconst info = gl.getActiveUniform( program, i ),\n\t\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\t\tparseUniform( info, addr, this );\n\n\t\t}\n\n\t}\n\n\tsetValue( gl, name, value, textures ) {\n\n\t\tconst u = this.map[ name ];\n\n\t\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n\t}\n\n\tsetOptional( gl, object, name ) {\n\n\t\tconst v = object[ name ];\n\n\t\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n\t}\n\n\tstatic upload( gl, seq, values, textures ) {\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ],\n\t\t\t\tv = values[ u.id ];\n\n\t\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tstatic seqWithValue( seq, values ) {\n\n\t\tconst r = [];\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ];\n\t\t\tif ( u.id in values ) r.push( u );\n\n\t\t}\n\n\t\treturn r;\n\n\t}\n\n}\n\nfunction WebGLShader( gl, type, string ) {\n\n\tconst shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\n// From https://www.khronos.org/registry/webgl/extensions/KHR_parallel_shader_compile/\nconst COMPLETION_STATUS_KHR = 0x91B1;\n\nlet programIdCount = 0;\n\nfunction handleSource( string, errorLine ) {\n\n\tconst lines = string.split( '\\n' );\n\tconst lines2 = [];\n\n\tconst from = Math.max( errorLine - 6, 0 );\n\tconst to = Math.min( errorLine + 6, lines.length );\n\n\tfor ( let i = from; i < to; i ++ ) {\n\n\t\tconst line = i + 1;\n\t\tlines2.push( `${line === errorLine ? '>' : ' '} ${line}: ${lines[ i ]}` );\n\n\t}\n\n\treturn lines2.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( colorSpace ) {\n\n\tconst workingPrimaries = ColorManagement.getPrimaries( ColorManagement.workingColorSpace );\n\tconst encodingPrimaries = ColorManagement.getPrimaries( colorSpace );\n\n\tlet gamutMapping;\n\n\tif ( workingPrimaries === encodingPrimaries ) {\n\n\t\tgamutMapping = '';\n\n\t} else if ( workingPrimaries === P3Primaries && encodingPrimaries === Rec709Primaries ) {\n\n\t\tgamutMapping = 'LinearDisplayP3ToLinearSRGB';\n\n\t} else if ( workingPrimaries === Rec709Primaries && encodingPrimaries === P3Primaries ) {\n\n\t\tgamutMapping = 'LinearSRGBToLinearDisplayP3';\n\n\t}\n\n\tswitch ( colorSpace ) {\n\n\t\tcase LinearSRGBColorSpace:\n\t\tcase LinearDisplayP3ColorSpace:\n\t\t\treturn [ gamutMapping, 'LinearTransferOETF' ];\n\n\t\tcase SRGBColorSpace:\n\t\tcase DisplayP3ColorSpace:\n\t\t\treturn [ gamutMapping, 'sRGBTransferOETF' ];\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported color space:', colorSpace );\n\t\t\treturn [ gamutMapping, 'LinearTransferOETF' ];\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tconst status = gl.getShaderParameter( shader, gl.COMPILE_STATUS );\n\tconst errors = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && errors === '' ) return '';\n\n\tconst errorMatches = /ERROR: 0:(\\d+)/.exec( errors );\n\tif ( errorMatches ) {\n\n\t\t// --enable-privileged-webgl-extension\n\t\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\t\tconst errorLine = parseInt( errorMatches[ 1 ] );\n\t\treturn type.toUpperCase() + '\\n\\n' + errors + '\\n\\n' + handleSource( gl.getShaderSource( shader ), errorLine );\n\n\t} else {\n\n\t\treturn errors;\n\n\t}\n\n}\n\nfunction getTexelEncodingFunction( functionName, colorSpace ) {\n\n\tconst components = getEncodingComponents( colorSpace );\n\treturn `vec4 ${functionName}( vec4 value ) { return ${components[ 0 ]}( ${components[ 1 ]}( value ) ); }`;\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tlet toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase AgXToneMapping:\n\t\t\ttoneMappingName = 'AgX';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tconst chunks = [\n\t\t( parameters.extensionDerivatives || !! parameters.envMapCubeUVHeight || parameters.bumpMap || parameters.normalMapTangentSpace || parameters.clearcoatNormalMap || parameters.flatShading || parameters.alphaToCoverage || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap || parameters.transmission ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateVertexExtensions( parameters ) {\n\n\tconst chunks = [\n\t\tparameters.extensionClipCullDistance ? '#extension GL_ANGLE_clip_cull_distance : require' : '',\n\t\tparameters.extensionMultiDraw ? '#extension GL_ANGLE_multi_draw : require' : '',\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tconst chunks = [];\n\n\tfor ( const name in defines ) {\n\n\t\tconst value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tconst attributes = {};\n\n\tconst n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( let i = 0; i < n; i ++ ) {\n\n\t\tconst info = gl.getActiveAttrib( program, i );\n\t\tconst name = info.name;\n\n\t\tlet locationSize = 1;\n\t\tif ( info.type === gl.FLOAT_MAT2 ) locationSize = 2;\n\t\tif ( info.type === gl.FLOAT_MAT3 ) locationSize = 3;\n\t\tif ( info.type === gl.FLOAT_MAT4 ) locationSize = 4;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = {\n\t\t\ttype: info.type,\n\t\t\tlocation: gl.getAttribLocation( program, name ),\n\t\t\tlocationSize: locationSize\n\t\t};\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\tconst numSpotLightCoords = parameters.numSpotLightShadows + parameters.numSpotLightMaps - parameters.numSpotLightShadowsWithMaps;\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_SPOT_LIGHT_MAPS/g, parameters.numSpotLightMaps )\n\t\t.replace( /NUM_SPOT_LIGHT_COORDS/g, numSpotLightCoords )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g, parameters.numSpotLightShadowsWithMaps )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nconst shaderChunkMap = new Map( [\n\t[ 'encodings_fragment', 'colorspace_fragment' ], // @deprecated, r154\n\t[ 'encodings_pars_fragment', 'colorspace_pars_fragment' ], // @deprecated, r154\n\t[ 'output_fragment', 'opaque_fragment' ], // @deprecated, r154\n] );\n\nfunction includeReplacer( match, include ) {\n\n\tlet string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tconst newInclude = shaderChunkMap.get( include );\n\n\t\tif ( newInclude !== undefined ) {\n\n\t\t\tstring = ShaderChunk[ newInclude ];\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Shader chunk \"%s\" has been deprecated. Use \"%s\" instead.', include, newInclude );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t\t}\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nconst unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string.replace( unrollLoopPattern, loopReplacer );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tlet string = '';\n\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[\\s*i\\s*\\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tlet precisionstring = `precision ${parameters.precision} float;\n\tprecision ${parameters.precision} int;\n\tprecision ${parameters.precision} sampler2D;\n\tprecision ${parameters.precision} samplerCube;\n\t`;\n\n\tif ( parameters.isWebGL2 ) {\n\n\t\tprecisionstring += `precision ${parameters.precision} sampler3D;\n\t\tprecision ${parameters.precision} sampler2DArray;\n\t\tprecision ${parameters.precision} sampler2DShadow;\n\t\tprecision ${parameters.precision} samplerCubeShadow;\n\t\tprecision ${parameters.precision} sampler2DArrayShadow;\n\t\tprecision ${parameters.precision} isampler2D;\n\t\tprecision ${parameters.precision} isampler3D;\n\t\tprecision ${parameters.precision} isamplerCube;\n\t\tprecision ${parameters.precision} isampler2DArray;\n\t\tprecision ${parameters.precision} usampler2D;\n\t\tprecision ${parameters.precision} usampler3D;\n\t\tprecision ${parameters.precision} usamplerCube;\n\t\tprecision ${parameters.precision} usampler2DArray;\n\t\t`;\n\n\t}\n\n\tif ( parameters.precision === 'highp' ) {\n\n\t\tprecisionstring += '\\n#define HIGH_PRECISION';\n\n\t} else if ( parameters.precision === 'mediump' ) {\n\n\t\tprecisionstring += '\\n#define MEDIUM_PRECISION';\n\n\t} else if ( parameters.precision === 'lowp' ) {\n\n\t\tprecisionstring += '\\n#define LOW_PRECISION';\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction generateCubeUVSize( parameters ) {\n\n\tconst imageHeight = parameters.envMapCubeUVHeight;\n\n\tif ( imageHeight === null ) return null;\n\n\tconst maxMip = Math.log2( imageHeight ) - 2;\n\n\tconst texelHeight = 1.0 / imageHeight;\n\n\tconst texelWidth = 1.0 / ( 3 * Math.max( Math.pow( 2, maxMip ), 7 * 16 ) );\n\n\treturn { texelWidth, texelHeight, maxMip };\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\n\n\t// TODO Send this event to Three.js DevTools\n\t// console.log( 'WebGLProgram', cacheKey );\n\n\tconst gl = renderer.getContext();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\tconst envMapCubeUVSize = generateCubeUVSize( parameters );\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tconst customVertexExtensions = generateVertexExtensions( parameters );\n\n\tconst customDefines = generateDefines( defines );\n\n\tconst program = gl.createProgram();\n\n\tlet prefixVertex, prefixFragment;\n\tlet versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + '\\n' : '';\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\t'#define SHADER_TYPE ' + parameters.shaderType,\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\t'#define SHADER_TYPE ' + parameters.shaderType,\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_TYPE ' + parameters.shaderType,\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.extensionClipCullDistance ? '#define USE_CLIP_DISTANCE' : '',\n\t\t\tparameters.batching ? '#define USE_BATCHING' : '',\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '',\n\n\t\t\tparameters.useFog && parameters.fog ? '#define USE_FOG' : '',\n\t\t\tparameters.useFog && parameters.fogExp2 ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.normalMapObjectSpace ? '#define USE_NORMALMAP_OBJECTSPACE' : '',\n\t\t\tparameters.normalMapTangentSpace ? '#define USE_NORMALMAP_TANGENTSPACE' : '',\n\t\t\tparameters.displacementMap ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\n\t\t\tparameters.anisotropy ? '#define USE_ANISOTROPY' : '',\n\t\t\tparameters.anisotropyMap ? '#define USE_ANISOTROPYMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\n\t\t\tparameters.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',\n\t\t\tparameters.iridescenceThicknessMap ? '#define USE_IRIDESCENCE_THICKNESSMAP' : '',\n\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.specularColorMap ? '#define USE_SPECULAR_COLORMAP' : '',\n\t\t\tparameters.specularIntensityMap ? '#define USE_SPECULAR_INTENSITYMAP' : '',\n\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.alphaHash ? '#define USE_ALPHAHASH' : '',\n\n\t\t\tparameters.transmission ? '#define USE_TRANSMISSION' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\t\t\tparameters.thicknessMap ? '#define USE_THICKNESSMAP' : '',\n\n\t\t\tparameters.sheenColorMap ? '#define USE_SHEEN_COLORMAP' : '',\n\t\t\tparameters.sheenRoughnessMap ? '#define USE_SHEEN_ROUGHNESSMAP' : '',\n\n\t\t\t//\n\n\t\t\tparameters.mapUv ? '#define MAP_UV ' + parameters.mapUv : '',\n\t\t\tparameters.alphaMapUv ? '#define ALPHAMAP_UV ' + parameters.alphaMapUv : '',\n\t\t\tparameters.lightMapUv ? '#define LIGHTMAP_UV ' + parameters.lightMapUv : '',\n\t\t\tparameters.aoMapUv ? '#define AOMAP_UV ' + parameters.aoMapUv : '',\n\t\t\tparameters.emissiveMapUv ? '#define EMISSIVEMAP_UV ' + parameters.emissiveMapUv : '',\n\t\t\tparameters.bumpMapUv ? '#define BUMPMAP_UV ' + parameters.bumpMapUv : '',\n\t\t\tparameters.normalMapUv ? '#define NORMALMAP_UV ' + parameters.normalMapUv : '',\n\t\t\tparameters.displacementMapUv ? '#define DISPLACEMENTMAP_UV ' + parameters.displacementMapUv : '',\n\n\t\t\tparameters.metalnessMapUv ? '#define METALNESSMAP_UV ' + parameters.metalnessMapUv : '',\n\t\t\tparameters.roughnessMapUv ? '#define ROUGHNESSMAP_UV ' + parameters.roughnessMapUv : '',\n\n\t\t\tparameters.anisotropyMapUv ? '#define ANISOTROPYMAP_UV ' + parameters.anisotropyMapUv : '',\n\n\t\t\tparameters.clearcoatMapUv ? '#define CLEARCOATMAP_UV ' + parameters.clearcoatMapUv : '',\n\t\t\tparameters.clearcoatNormalMapUv ? '#define CLEARCOAT_NORMALMAP_UV ' + parameters.clearcoatNormalMapUv : '',\n\t\t\tparameters.clearcoatRoughnessMapUv ? '#define CLEARCOAT_ROUGHNESSMAP_UV ' + parameters.clearcoatRoughnessMapUv : '',\n\n\t\t\tparameters.iridescenceMapUv ? '#define IRIDESCENCEMAP_UV ' + parameters.iridescenceMapUv : '',\n\t\t\tparameters.iridescenceThicknessMapUv ? '#define IRIDESCENCE_THICKNESSMAP_UV ' + parameters.iridescenceThicknessMapUv : '',\n\n\t\t\tparameters.sheenColorMapUv ? '#define SHEEN_COLORMAP_UV ' + parameters.sheenColorMapUv : '',\n\t\t\tparameters.sheenRoughnessMapUv ? '#define SHEEN_ROUGHNESSMAP_UV ' + parameters.sheenRoughnessMapUv : '',\n\n\t\t\tparameters.specularMapUv ? '#define SPECULARMAP_UV ' + parameters.specularMapUv : '',\n\t\t\tparameters.specularColorMapUv ? '#define SPECULAR_COLORMAP_UV ' + parameters.specularColorMapUv : '',\n\t\t\tparameters.specularIntensityMapUv ? '#define SPECULAR_INTENSITYMAP_UV ' + parameters.specularIntensityMapUv : '',\n\n\t\t\tparameters.transmissionMapUv ? '#define TRANSMISSIONMAP_UV ' + parameters.transmissionMapUv : '',\n\t\t\tparameters.thicknessMapUv ? '#define THICKNESSMAP_UV ' + parameters.thicknessMapUv : '',\n\n\t\t\t//\n\n\t\t\tparameters.vertexTangents && parameters.flatShading === false ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',\n\t\t\tparameters.vertexUv1s ? '#define USE_UV1' : '',\n\t\t\tparameters.vertexUv2s ? '#define USE_UV2' : '',\n\t\t\tparameters.vertexUv3s ? '#define USE_UV3' : '',\n\n\t\t\tparameters.pointsUvs ? '#define USE_POINTS_UV' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\t( parameters.morphColors && parameters.isWebGL2 ) ? '#define USE_MORPHCOLORS' : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_TEXTURE' : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_TEXTURE_STRIDE ' + parameters.morphTextureStride : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_COUNT ' + parameters.morphTargetsCount : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.numLightProbes > 0 ? '#define USE_LIGHT_PROBES' : '',\n\n\t\t\tparameters.useLegacyLights ? '#define LEGACY_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t'\tattribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_INSTANCING_COLOR',\n\n\t\t\t'\tattribute vec3 instanceColor;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_UV1',\n\n\t\t\t'\tattribute vec2 uv1;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_UV2',\n\n\t\t\t'\tattribute vec2 uv2;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_UV3',\n\n\t\t\t'\tattribute vec2 uv3;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#if defined( USE_COLOR_ALPHA )',\n\n\t\t\t'\tattribute vec4 color;',\n\n\t\t\t'#elif defined( USE_COLOR )',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_TYPE ' + parameters.shaderType,\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.useFog && parameters.fog ? '#define USE_FOG' : '',\n\t\t\tparameters.useFog && parameters.fogExp2 ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.alphaToCoverage ? '#define ALPHA_TO_COVERAGE' : '',\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_TEXEL_WIDTH ' + envMapCubeUVSize.texelWidth : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_TEXEL_HEIGHT ' + envMapCubeUVSize.texelHeight : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_MAX_MIP ' + envMapCubeUVSize.maxMip + '.0' : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.normalMapObjectSpace ? '#define USE_NORMALMAP_OBJECTSPACE' : '',\n\t\t\tparameters.normalMapTangentSpace ? '#define USE_NORMALMAP_TANGENTSPACE' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\n\t\t\tparameters.anisotropy ? '#define USE_ANISOTROPY' : '',\n\t\t\tparameters.anisotropyMap ? '#define USE_ANISOTROPYMAP' : '',\n\n\t\t\tparameters.clearcoat ? '#define USE_CLEARCOAT' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\n\t\t\tparameters.iridescence ? '#define USE_IRIDESCENCE' : '',\n\t\t\tparameters.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',\n\t\t\tparameters.iridescenceThicknessMap ? '#define USE_IRIDESCENCE_THICKNESSMAP' : '',\n\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.specularColorMap ? '#define USE_SPECULAR_COLORMAP' : '',\n\t\t\tparameters.specularIntensityMap ? '#define USE_SPECULAR_INTENSITYMAP' : '',\n\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.alphaTest ? '#define USE_ALPHATEST' : '',\n\t\t\tparameters.alphaHash ? '#define USE_ALPHAHASH' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\t\t\tparameters.sheenColorMap ? '#define USE_SHEEN_COLORMAP' : '',\n\t\t\tparameters.sheenRoughnessMap ? '#define USE_SHEEN_ROUGHNESSMAP' : '',\n\n\t\t\tparameters.transmission ? '#define USE_TRANSMISSION' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\t\t\tparameters.thicknessMap ? '#define USE_THICKNESSMAP' : '',\n\n\t\t\tparameters.vertexTangents && parameters.flatShading === false ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',\n\t\t\tparameters.vertexUv1s ? '#define USE_UV1' : '',\n\t\t\tparameters.vertexUv2s ? '#define USE_UV2' : '',\n\t\t\tparameters.vertexUv3s ? '#define USE_UV3' : '',\n\n\t\t\tparameters.pointsUvs ? '#define USE_POINTS_UV' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.numLightProbes > 0 ? '#define USE_LIGHT_PROBES' : '',\n\n\t\t\tparameters.useLegacyLights ? '#define LEGACY_LIGHTS' : '',\n\n\t\t\tparameters.decodeVideoTexture ? '#define DECODE_VIDEO_TEXTURE' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\t\t\tparameters.opaque ? '#define OPAQUE' : '',\n\n\t\t\tShaderChunk[ 'colorspace_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputColorSpace ),\n\n\t\t\tparameters.useDepthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && parameters.isRawShaderMaterial !== true ) {\n\n\t\t// GLSL 3.0 conversion for built-in materials and ShaderMaterial\n\n\t\tversionString = '#version 300 es\\n';\n\n\t\tprefixVertex = [\n\t\t\tcustomVertexExtensions,\n\t\t\t'precision mediump sampler2DArray;',\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'precision mediump sampler2DArray;',\n\t\t\t'#define varying in',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : 'layout(location = 0) out highp vec4 pc_fragColor;',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = versionString + prefixVertex + vertexShader;\n\tconst fragmentGlsl = versionString + prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tconst glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tconst glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\tfunction onFirstUse( self ) {\n\n\t\t// check for link errors\n\t\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\n\t\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\t\tlet runnable = true;\n\t\t\tlet haveDiagnostics = true;\n\n\t\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\t\t\trunnable = false;\n\n\t\t\t\tif ( typeof renderer.debug.onShaderError === 'function' ) {\n\n\t\t\t\t\trenderer.debug.onShaderError( gl, program, glVertexShader, glFragmentShader );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// default error reporting\n\n\t\t\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'THREE.WebGLProgram: Shader Error ' + gl.getError() + ' - ' +\n\t\t\t\t\t\t'VALIDATE_STATUS ' + gl.getProgramParameter( program, gl.VALIDATE_STATUS ) + '\\n\\n' +\n\t\t\t\t\t\t'Material Name: ' + self.name + '\\n' +\n\t\t\t\t\t\t'Material Type: ' + self.type + '\\n\\n' +\n\t\t\t\t\t\t'Program Info Log: ' + programLog + '\\n' +\n\t\t\t\t\t\tvertexErrors + '\\n' +\n\t\t\t\t\t\tfragmentErrors\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} else if ( programLog !== '' ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: Program Info Log:', programLog );\n\n\t\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\t\thaveDiagnostics = false;\n\n\t\t\t}\n\n\t\t\tif ( haveDiagnostics ) {\n\n\t\t\t\tself.diagnostics = {\n\n\t\t\t\t\trunnable: runnable,\n\n\t\t\t\t\tprogramLog: programLog,\n\n\t\t\t\t\tvertexShader: {\n\n\t\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t\t},\n\n\t\t\t\t\tfragmentShader: {\n\n\t\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Clean up\n\n\t\t// Crashes in iOS9 and iOS10. #18402\n\t\t// gl.detachShader( program, glVertexShader );\n\t\t// gl.detachShader( program, glFragmentShader );\n\n\t\tgl.deleteShader( glVertexShader );\n\t\tgl.deleteShader( glFragmentShader );\n\n\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t}\n\n\t// set up caching for uniform locations\n\n\tlet cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\t// Populates cachedUniforms and cachedAttributes\n\t\t\tonFirstUse( this );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tlet cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\t// Populates cachedAttributes and cachedUniforms\n\t\t\tonFirstUse( this );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// indicate when the program is ready to be used. if the KHR_parallel_shader_compile extension isn't supported,\n\t// flag the program as ready immediately. It may cause a stall when it's first used.\n\n\tlet programReady = ( parameters.rendererExtensionParallelShaderCompile === false );\n\n\tthis.isReady = function () {\n\n\t\tif ( programReady === false ) {\n\n\t\t\tprogramReady = gl.getProgramParameter( program, COMPLETION_STATUS_KHR );\n\n\t\t}\n\n\t\treturn programReady;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tbindingStates.releaseStatesOfProgram( this );\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.type = parameters.shaderType;\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nlet _id$1 = 0;\n\nclass WebGLShaderCache {\n\n\tconstructor() {\n\n\t\tthis.shaderCache = new Map();\n\t\tthis.materialCache = new Map();\n\n\t}\n\n\tupdate( material ) {\n\n\t\tconst vertexShader = material.vertexShader;\n\t\tconst fragmentShader = material.fragmentShader;\n\n\t\tconst vertexShaderStage = this._getShaderStage( vertexShader );\n\t\tconst fragmentShaderStage = this._getShaderStage( fragmentShader );\n\n\t\tconst materialShaders = this._getShaderCacheForMaterial( material );\n\n\t\tif ( materialShaders.has( vertexShaderStage ) === false ) {\n\n\t\t\tmaterialShaders.add( vertexShaderStage );\n\t\t\tvertexShaderStage.usedTimes ++;\n\n\t\t}\n\n\t\tif ( materialShaders.has( fragmentShaderStage ) === false ) {\n\n\t\t\tmaterialShaders.add( fragmentShaderStage );\n\t\t\tfragmentShaderStage.usedTimes ++;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremove( material ) {\n\n\t\tconst materialShaders = this.materialCache.get( material );\n\n\t\tfor ( const shaderStage of materialShaders ) {\n\n\t\t\tshaderStage.usedTimes --;\n\n\t\t\tif ( shaderStage.usedTimes === 0 ) this.shaderCache.delete( shaderStage.code );\n\n\t\t}\n\n\t\tthis.materialCache.delete( material );\n\n\t\treturn this;\n\n\t}\n\n\tgetVertexShaderID( material ) {\n\n\t\treturn this._getShaderStage( material.vertexShader ).id;\n\n\t}\n\n\tgetFragmentShaderID( material ) {\n\n\t\treturn this._getShaderStage( material.fragmentShader ).id;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shaderCache.clear();\n\t\tthis.materialCache.clear();\n\n\t}\n\n\t_getShaderCacheForMaterial( material ) {\n\n\t\tconst cache = this.materialCache;\n\t\tlet set = cache.get( material );\n\n\t\tif ( set === undefined ) {\n\n\t\t\tset = new Set();\n\t\t\tcache.set( material, set );\n\n\t\t}\n\n\t\treturn set;\n\n\t}\n\n\t_getShaderStage( code ) {\n\n\t\tconst cache = this.shaderCache;\n\t\tlet stage = cache.get( code );\n\n\t\tif ( stage === undefined ) {\n\n\t\t\tstage = new WebGLShaderStage( code );\n\t\t\tcache.set( code, stage );\n\n\t\t}\n\n\t\treturn stage;\n\n\t}\n\n}\n\nclass WebGLShaderStage {\n\n\tconstructor( code ) {\n\n\t\tthis.id = _id$1 ++;\n\n\t\tthis.code = code;\n\t\tthis.usedTimes = 0;\n\n\t}\n\n}\n\nfunction WebGLPrograms( renderer, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping ) {\n\n\tconst _programLayers = new Layers();\n\tconst _customShaders = new WebGLShaderCache();\n\tconst _activeChannels = new Set();\n\tconst programs = [];\n\n\tconst IS_WEBGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst SUPPORTS_VERTEX_TEXTURES = capabilities.vertexTextures;\n\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tfunction getChannel( value ) {\n\n\t\t_activeChannels.add( value );\n\n\t\tif ( value === 0 ) return 'uv';\n\n\t\treturn `uv${ value }`;\n\n\t}\n\n\tfunction getParameters( material, lights, shadows, scene, object ) {\n\n\t\tconst fog = scene.fog;\n\t\tconst geometry = object.geometry;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tconst envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || environment );\n\t\tconst envMapCubeUVHeight = ( !! envMap ) && ( envMap.mapping === CubeUVReflectionMapping ) ? envMap.image.height : null;\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\tlet morphTextureStride = 0;\n\n\t\tif ( geometry.morphAttributes.position !== undefined ) morphTextureStride = 1;\n\t\tif ( geometry.morphAttributes.normal !== undefined ) morphTextureStride = 2;\n\t\tif ( geometry.morphAttributes.color !== undefined ) morphTextureStride = 3;\n\n\t\t//\n\n\t\tlet vertexShader, fragmentShader;\n\t\tlet customVertexShaderID, customFragmentShaderID;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\n\t\t\tvertexShader = shader.vertexShader;\n\t\t\tfragmentShader = shader.fragmentShader;\n\n\t\t} else {\n\n\t\t\tvertexShader = material.vertexShader;\n\t\t\tfragmentShader = material.fragmentShader;\n\n\t\t\t_customShaders.update( material );\n\n\t\t\tcustomVertexShaderID = _customShaders.getVertexShaderID( material );\n\t\t\tcustomFragmentShaderID = _customShaders.getFragmentShaderID( material );\n\n\t\t}\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst IS_INSTANCEDMESH = object.isInstancedMesh === true;\n\t\tconst IS_BATCHEDMESH = object.isBatchedMesh === true;\n\n\t\tconst HAS_MAP = !! material.map;\n\t\tconst HAS_MATCAP = !! material.matcap;\n\t\tconst HAS_ENVMAP = !! envMap;\n\t\tconst HAS_AOMAP = !! material.aoMap;\n\t\tconst HAS_LIGHTMAP = !! material.lightMap;\n\t\tconst HAS_BUMPMAP = !! material.bumpMap;\n\t\tconst HAS_NORMALMAP = !! material.normalMap;\n\t\tconst HAS_DISPLACEMENTMAP = !! material.displacementMap;\n\t\tconst HAS_EMISSIVEMAP = !! material.emissiveMap;\n\n\t\tconst HAS_METALNESSMAP = !! material.metalnessMap;\n\t\tconst HAS_ROUGHNESSMAP = !! material.roughnessMap;\n\n\t\tconst HAS_ANISOTROPY = material.anisotropy > 0;\n\t\tconst HAS_CLEARCOAT = material.clearcoat > 0;\n\t\tconst HAS_IRIDESCENCE = material.iridescence > 0;\n\t\tconst HAS_SHEEN = material.sheen > 0;\n\t\tconst HAS_TRANSMISSION = material.transmission > 0;\n\n\t\tconst HAS_ANISOTROPYMAP = HAS_ANISOTROPY && !! material.anisotropyMap;\n\n\t\tconst HAS_CLEARCOATMAP = HAS_CLEARCOAT && !! material.clearcoatMap;\n\t\tconst HAS_CLEARCOAT_NORMALMAP = HAS_CLEARCOAT && !! material.clearcoatNormalMap;\n\t\tconst HAS_CLEARCOAT_ROUGHNESSMAP = HAS_CLEARCOAT && !! material.clearcoatRoughnessMap;\n\n\t\tconst HAS_IRIDESCENCEMAP = HAS_IRIDESCENCE && !! material.iridescenceMap;\n\t\tconst HAS_IRIDESCENCE_THICKNESSMAP = HAS_IRIDESCENCE && !! material.iridescenceThicknessMap;\n\n\t\tconst HAS_SHEEN_COLORMAP = HAS_SHEEN && !! material.sheenColorMap;\n\t\tconst HAS_SHEEN_ROUGHNESSMAP = HAS_SHEEN && !! material.sheenRoughnessMap;\n\n\t\tconst HAS_SPECULARMAP = !! material.specularMap;\n\t\tconst HAS_SPECULAR_COLORMAP = !! material.specularColorMap;\n\t\tconst HAS_SPECULAR_INTENSITYMAP = !! material.specularIntensityMap;\n\n\t\tconst HAS_TRANSMISSIONMAP = HAS_TRANSMISSION && !! material.transmissionMap;\n\t\tconst HAS_THICKNESSMAP = HAS_TRANSMISSION && !! material.thicknessMap;\n\n\t\tconst HAS_GRADIENTMAP = !! material.gradientMap;\n\n\t\tconst HAS_ALPHAMAP = !! material.alphaMap;\n\n\t\tconst HAS_ALPHATEST = material.alphaTest > 0;\n\n\t\tconst HAS_ALPHAHASH = !! material.alphaHash;\n\n\t\tconst HAS_EXTENSIONS = !! material.extensions;\n\n\t\tlet toneMapping = NoToneMapping;\n\n\t\tif ( material.toneMapped ) {\n\n\t\t\tif ( currentRenderTarget === null || currentRenderTarget.isXRRenderTarget === true ) {\n\n\t\t\t\ttoneMapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: IS_WEBGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderType: material.type,\n\t\t\tshaderName: material.name,\n\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tcustomVertexShaderID: customVertexShaderID,\n\t\t\tcustomFragmentShaderID: customFragmentShaderID,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial === true,\n\t\t\tglslVersion: material.glslVersion,\n\n\t\t\tprecision: precision,\n\n\t\t\tbatching: IS_BATCHEDMESH,\n\t\t\tinstancing: IS_INSTANCEDMESH,\n\t\t\tinstancingColor: IS_INSTANCEDMESH && object.instanceColor !== null,\n\n\t\t\tsupportsVertexTextures: SUPPORTS_VERTEX_TEXTURES,\n\t\t\toutputColorSpace: ( currentRenderTarget === null ) ? renderer.outputColorSpace : ( currentRenderTarget.isXRRenderTarget === true ? currentRenderTarget.texture.colorSpace : LinearSRGBColorSpace ),\n\t\t\talphaToCoverage: !! material.alphaToCoverage,\n\n\t\t\tmap: HAS_MAP,\n\t\t\tmatcap: HAS_MATCAP,\n\t\t\tenvMap: HAS_ENVMAP,\n\t\t\tenvMapMode: HAS_ENVMAP && envMap.mapping,\n\t\t\tenvMapCubeUVHeight: envMapCubeUVHeight,\n\t\t\taoMap: HAS_AOMAP,\n\t\t\tlightMap: HAS_LIGHTMAP,\n\t\t\tbumpMap: HAS_BUMPMAP,\n\t\t\tnormalMap: HAS_NORMALMAP,\n\t\t\tdisplacementMap: SUPPORTS_VERTEX_TEXTURES && HAS_DISPLACEMENTMAP,\n\t\t\temissiveMap: HAS_EMISSIVEMAP,\n\n\t\t\tnormalMapObjectSpace: HAS_NORMALMAP && material.normalMapType === ObjectSpaceNormalMap,\n\t\t\tnormalMapTangentSpace: HAS_NORMALMAP && material.normalMapType === TangentSpaceNormalMap,\n\n\t\t\tmetalnessMap: HAS_METALNESSMAP,\n\t\t\troughnessMap: HAS_ROUGHNESSMAP,\n\n\t\t\tanisotropy: HAS_ANISOTROPY,\n\t\t\tanisotropyMap: HAS_ANISOTROPYMAP,\n\n\t\t\tclearcoat: HAS_CLEARCOAT,\n\t\t\tclearcoatMap: HAS_CLEARCOATMAP,\n\t\t\tclearcoatNormalMap: HAS_CLEARCOAT_NORMALMAP,\n\t\t\tclearcoatRoughnessMap: HAS_CLEARCOAT_ROUGHNESSMAP,\n\n\t\t\tiridescence: HAS_IRIDESCENCE,\n\t\t\tiridescenceMap: HAS_IRIDESCENCEMAP,\n\t\t\tiridescenceThicknessMap: HAS_IRIDESCENCE_THICKNESSMAP,\n\n\t\t\tsheen: HAS_SHEEN,\n\t\t\tsheenColorMap: HAS_SHEEN_COLORMAP,\n\t\t\tsheenRoughnessMap: HAS_SHEEN_ROUGHNESSMAP,\n\n\t\t\tspecularMap: HAS_SPECULARMAP,\n\t\t\tspecularColorMap: HAS_SPECULAR_COLORMAP,\n\t\t\tspecularIntensityMap: HAS_SPECULAR_INTENSITYMAP,\n\n\t\t\ttransmission: HAS_TRANSMISSION,\n\t\t\ttransmissionMap: HAS_TRANSMISSIONMAP,\n\t\t\tthicknessMap: HAS_THICKNESSMAP,\n\n\t\t\tgradientMap: HAS_GRADIENTMAP,\n\n\t\t\topaque: material.transparent === false && material.blending === NormalBlending && material.alphaToCoverage === false,\n\n\t\t\talphaMap: HAS_ALPHAMAP,\n\t\t\talphaTest: HAS_ALPHATEST,\n\t\t\talphaHash: HAS_ALPHAHASH,\n\n\t\t\tcombine: material.combine,\n\n\t\t\t//\n\n\t\t\tmapUv: HAS_MAP && getChannel( material.map.channel ),\n\t\t\taoMapUv: HAS_AOMAP && getChannel( material.aoMap.channel ),\n\t\t\tlightMapUv: HAS_LIGHTMAP && getChannel( material.lightMap.channel ),\n\t\t\tbumpMapUv: HAS_BUMPMAP && getChannel( material.bumpMap.channel ),\n\t\t\tnormalMapUv: HAS_NORMALMAP && getChannel( material.normalMap.channel ),\n\t\t\tdisplacementMapUv: HAS_DISPLACEMENTMAP && getChannel( material.displacementMap.channel ),\n\t\t\temissiveMapUv: HAS_EMISSIVEMAP && getChannel( material.emissiveMap.channel ),\n\n\t\t\tmetalnessMapUv: HAS_METALNESSMAP && getChannel( material.metalnessMap.channel ),\n\t\t\troughnessMapUv: HAS_ROUGHNESSMAP && getChannel( material.roughnessMap.channel ),\n\n\t\t\tanisotropyMapUv: HAS_ANISOTROPYMAP && getChannel( material.anisotropyMap.channel ),\n\n\t\t\tclearcoatMapUv: HAS_CLEARCOATMAP && getChannel( material.clearcoatMap.channel ),\n\t\t\tclearcoatNormalMapUv: HAS_CLEARCOAT_NORMALMAP && getChannel( material.clearcoatNormalMap.channel ),\n\t\t\tclearcoatRoughnessMapUv: HAS_CLEARCOAT_ROUGHNESSMAP && getChannel( material.clearcoatRoughnessMap.channel ),\n\n\t\t\tiridescenceMapUv: HAS_IRIDESCENCEMAP && getChannel( material.iridescenceMap.channel ),\n\t\t\tiridescenceThicknessMapUv: HAS_IRIDESCENCE_THICKNESSMAP && getChannel( material.iridescenceThicknessMap.channel ),\n\n\t\t\tsheenColorMapUv: HAS_SHEEN_COLORMAP && getChannel( material.sheenColorMap.channel ),\n\t\t\tsheenRoughnessMapUv: HAS_SHEEN_ROUGHNESSMAP && getChannel( material.sheenRoughnessMap.channel ),\n\n\t\t\tspecularMapUv: HAS_SPECULARMAP && getChannel( material.specularMap.channel ),\n\t\t\tspecularColorMapUv: HAS_SPECULAR_COLORMAP && getChannel( material.specularColorMap.channel ),\n\t\t\tspecularIntensityMapUv: HAS_SPECULAR_INTENSITYMAP && getChannel( material.specularIntensityMap.channel ),\n\n\t\t\ttransmissionMapUv: HAS_TRANSMISSIONMAP && getChannel( material.transmissionMap.channel ),\n\t\t\tthicknessMapUv: HAS_THICKNESSMAP && getChannel( material.thicknessMap.channel ),\n\n\t\t\talphaMapUv: HAS_ALPHAMAP && getChannel( material.alphaMap.channel ),\n\n\t\t\t//\n\n\t\t\tvertexTangents: !! geometry.attributes.tangent && ( HAS_NORMALMAP || HAS_ANISOTROPY ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexAlphas: material.vertexColors === true && !! geometry.attributes.color && geometry.attributes.color.itemSize === 4,\n\n\t\t\tpointsUvs: object.isPoints === true && !! geometry.attributes.uv && ( HAS_MAP || HAS_ALPHAMAP ),\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog === true,\n\t\t\tfogExp2: ( !! fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading === true,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation === true,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: object.isSkinnedMesh === true,\n\n\t\t\tmorphTargets: geometry.morphAttributes.position !== undefined,\n\t\t\tmorphNormals: geometry.morphAttributes.normal !== undefined,\n\t\t\tmorphColors: geometry.morphAttributes.color !== undefined,\n\t\t\tmorphTargetsCount: morphTargetsCount,\n\t\t\tmorphTextureStride: morphTextureStride,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumSpotLightMaps: lights.spotLightMap.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\t\t\tnumSpotLightShadowsWithMaps: lights.numSpotLightShadowsWithMaps,\n\n\t\t\tnumLightProbes: lights.numLightProbes,\n\n\t\t\tnumClippingPlanes: clipping.numPlanes,\n\t\t\tnumClipIntersection: clipping.numIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: toneMapping,\n\t\t\tuseLegacyLights: renderer._useLegacyLights,\n\n\t\t\tdecodeVideoTexture: HAS_MAP && ( material.map.isVideoTexture === true ) && ( ColorManagement.getTransfer( material.map.colorSpace ) === SRGBTransfer ),\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tuseDepthPacking: material.depthPacking >= 0,\n\t\t\tdepthPacking: material.depthPacking || 0,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: HAS_EXTENSIONS && material.extensions.derivatives === true,\n\t\t\textensionFragDepth: HAS_EXTENSIONS && material.extensions.fragDepth === true,\n\t\t\textensionDrawBuffers: HAS_EXTENSIONS && material.extensions.drawBuffers === true,\n\t\t\textensionShaderTextureLOD: HAS_EXTENSIONS && material.extensions.shaderTextureLOD === true,\n\t\t\textensionClipCullDistance: HAS_EXTENSIONS && material.extensions.clipCullDistance === true && extensions.has( 'WEBGL_clip_cull_distance' ),\n\t\t\textensionMultiDraw: HAS_EXTENSIONS && material.extensions.multiDraw === true && extensions.has( 'WEBGL_multi_draw' ),\n\n\t\t\trendererExtensionFragDepth: IS_WEBGL2 || extensions.has( 'EXT_frag_depth' ),\n\t\t\trendererExtensionDrawBuffers: IS_WEBGL2 || extensions.has( 'WEBGL_draw_buffers' ),\n\t\t\trendererExtensionShaderTextureLod: IS_WEBGL2 || extensions.has( 'EXT_shader_texture_lod' ),\n\t\t\trendererExtensionParallelShaderCompile: extensions.has( 'KHR_parallel_shader_compile' ),\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\t// the usage of getChannel() determines the active texture channels for this shader\n\n\t\tparameters.vertexUv1s = _activeChannels.has( 1 );\n\t\tparameters.vertexUv2s = _activeChannels.has( 2 );\n\t\tparameters.vertexUv3s = _activeChannels.has( 3 );\n\n\t\t_activeChannels.clear();\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey( parameters ) {\n\n\t\tconst array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.customVertexShaderID );\n\t\t\tarray.push( parameters.customFragmentShaderID );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( const name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === false ) {\n\n\t\t\tgetProgramCacheKeyParameters( array, parameters );\n\t\t\tgetProgramCacheKeyBooleans( array, parameters );\n\t\t\tarray.push( renderer.outputColorSpace );\n\n\t\t}\n\n\t\tarray.push( parameters.customProgramCacheKey );\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction getProgramCacheKeyParameters( array, parameters ) {\n\n\t\tarray.push( parameters.precision );\n\t\tarray.push( parameters.outputColorSpace );\n\t\tarray.push( parameters.envMapMode );\n\t\tarray.push( parameters.envMapCubeUVHeight );\n\t\tarray.push( parameters.mapUv );\n\t\tarray.push( parameters.alphaMapUv );\n\t\tarray.push( parameters.lightMapUv );\n\t\tarray.push( parameters.aoMapUv );\n\t\tarray.push( parameters.bumpMapUv );\n\t\tarray.push( parameters.normalMapUv );\n\t\tarray.push( parameters.displacementMapUv );\n\t\tarray.push( parameters.emissiveMapUv );\n\t\tarray.push( parameters.metalnessMapUv );\n\t\tarray.push( parameters.roughnessMapUv );\n\t\tarray.push( parameters.anisotropyMapUv );\n\t\tarray.push( parameters.clearcoatMapUv );\n\t\tarray.push( parameters.clearcoatNormalMapUv );\n\t\tarray.push( parameters.clearcoatRoughnessMapUv );\n\t\tarray.push( parameters.iridescenceMapUv );\n\t\tarray.push( parameters.iridescenceThicknessMapUv );\n\t\tarray.push( parameters.sheenColorMapUv );\n\t\tarray.push( parameters.sheenRoughnessMapUv );\n\t\tarray.push( parameters.specularMapUv );\n\t\tarray.push( parameters.specularColorMapUv );\n\t\tarray.push( parameters.specularIntensityMapUv );\n\t\tarray.push( parameters.transmissionMapUv );\n\t\tarray.push( parameters.thicknessMapUv );\n\t\tarray.push( parameters.combine );\n\t\tarray.push( parameters.fogExp2 );\n\t\tarray.push( parameters.sizeAttenuation );\n\t\tarray.push( parameters.morphTargetsCount );\n\t\tarray.push( parameters.morphAttributeCount );\n\t\tarray.push( parameters.numDirLights );\n\t\tarray.push( parameters.numPointLights );\n\t\tarray.push( parameters.numSpotLights );\n\t\tarray.push( parameters.numSpotLightMaps );\n\t\tarray.push( parameters.numHemiLights );\n\t\tarray.push( parameters.numRectAreaLights );\n\t\tarray.push( parameters.numDirLightShadows );\n\t\tarray.push( parameters.numPointLightShadows );\n\t\tarray.push( parameters.numSpotLightShadows );\n\t\tarray.push( parameters.numSpotLightShadowsWithMaps );\n\t\tarray.push( parameters.numLightProbes );\n\t\tarray.push( parameters.shadowMapType );\n\t\tarray.push( parameters.toneMapping );\n\t\tarray.push( parameters.numClippingPlanes );\n\t\tarray.push( parameters.numClipIntersection );\n\t\tarray.push( parameters.depthPacking );\n\n\t}\n\n\tfunction getProgramCacheKeyBooleans( array, parameters ) {\n\n\t\t_programLayers.disableAll();\n\n\t\tif ( parameters.isWebGL2 )\n\t\t\t_programLayers.enable( 0 );\n\t\tif ( parameters.supportsVertexTextures )\n\t\t\t_programLayers.enable( 1 );\n\t\tif ( parameters.instancing )\n\t\t\t_programLayers.enable( 2 );\n\t\tif ( parameters.instancingColor )\n\t\t\t_programLayers.enable( 3 );\n\t\tif ( parameters.matcap )\n\t\t\t_programLayers.enable( 4 );\n\t\tif ( parameters.envMap )\n\t\t\t_programLayers.enable( 5 );\n\t\tif ( parameters.normalMapObjectSpace )\n\t\t\t_programLayers.enable( 6 );\n\t\tif ( parameters.normalMapTangentSpace )\n\t\t\t_programLayers.enable( 7 );\n\t\tif ( parameters.clearcoat )\n\t\t\t_programLayers.enable( 8 );\n\t\tif ( parameters.iridescence )\n\t\t\t_programLayers.enable( 9 );\n\t\tif ( parameters.alphaTest )\n\t\t\t_programLayers.enable( 10 );\n\t\tif ( parameters.vertexColors )\n\t\t\t_programLayers.enable( 11 );\n\t\tif ( parameters.vertexAlphas )\n\t\t\t_programLayers.enable( 12 );\n\t\tif ( parameters.vertexUv1s )\n\t\t\t_programLayers.enable( 13 );\n\t\tif ( parameters.vertexUv2s )\n\t\t\t_programLayers.enable( 14 );\n\t\tif ( parameters.vertexUv3s )\n\t\t\t_programLayers.enable( 15 );\n\t\tif ( parameters.vertexTangents )\n\t\t\t_programLayers.enable( 16 );\n\t\tif ( parameters.anisotropy )\n\t\t\t_programLayers.enable( 17 );\n\t\tif ( parameters.alphaHash )\n\t\t\t_programLayers.enable( 18 );\n\t\tif ( parameters.batching )\n\t\t\t_programLayers.enable( 19 );\n\n\t\tarray.push( _programLayers.mask );\n\t\t_programLayers.disableAll();\n\n\t\tif ( parameters.fog )\n\t\t\t_programLayers.enable( 0 );\n\t\tif ( parameters.useFog )\n\t\t\t_programLayers.enable( 1 );\n\t\tif ( parameters.flatShading )\n\t\t\t_programLayers.enable( 2 );\n\t\tif ( parameters.logarithmicDepthBuffer )\n\t\t\t_programLayers.enable( 3 );\n\t\tif ( parameters.skinning )\n\t\t\t_programLayers.enable( 4 );\n\t\tif ( parameters.morphTargets )\n\t\t\t_programLayers.enable( 5 );\n\t\tif ( parameters.morphNormals )\n\t\t\t_programLayers.enable( 6 );\n\t\tif ( parameters.morphColors )\n\t\t\t_programLayers.enable( 7 );\n\t\tif ( parameters.premultipliedAlpha )\n\t\t\t_programLayers.enable( 8 );\n\t\tif ( parameters.shadowMapEnabled )\n\t\t\t_programLayers.enable( 9 );\n\t\tif ( parameters.useLegacyLights )\n\t\t\t_programLayers.enable( 10 );\n\t\tif ( parameters.doubleSided )\n\t\t\t_programLayers.enable( 11 );\n\t\tif ( parameters.flipSided )\n\t\t\t_programLayers.enable( 12 );\n\t\tif ( parameters.useDepthPacking )\n\t\t\t_programLayers.enable( 13 );\n\t\tif ( parameters.dithering )\n\t\t\t_programLayers.enable( 14 );\n\t\tif ( parameters.transmission )\n\t\t\t_programLayers.enable( 15 );\n\t\tif ( parameters.sheen )\n\t\t\t_programLayers.enable( 16 );\n\t\tif ( parameters.opaque )\n\t\t\t_programLayers.enable( 17 );\n\t\tif ( parameters.pointsUvs )\n\t\t\t_programLayers.enable( 18 );\n\t\tif ( parameters.decodeVideoTexture )\n\t\t\t_programLayers.enable( 19 );\n\t\tif ( parameters.alphaToCoverage )\n\t\t\t_programLayers.enable( 20 );\n\n\t\tarray.push( _programLayers.mask );\n\n\t}\n\n\tfunction getUniforms( material ) {\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\t\tlet uniforms;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t} else {\n\n\t\t\tuniforms = material.uniforms;\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t}\n\n\tfunction acquireProgram( parameters, cacheKey ) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tconst preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t}\n\n\tfunction releaseShaderCache( material ) {\n\n\t\t_customShaders.remove( material );\n\n\t}\n\n\tfunction dispose() {\n\n\t\t_customShaders.dispose();\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tgetUniforms: getUniforms,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\treleaseShaderCache: releaseShaderCache,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tlet map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList() {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transmissive = [];\n\tconst transparent = [];\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransmissive.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.push( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.push( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.push( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.unshift( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.unshift( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.unshift( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transmissive.length > 1 ) transmissive.sort( customTransparentSort || reversePainterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\topaque: opaque,\n\t\ttransmissive: transmissive,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tlet lists = new WeakMap();\n\n\tfunction get( scene, renderCallDepth ) {\n\n\t\tconst listArray = lists.get( scene );\n\t\tlet list;\n\n\t\tif ( listArray === undefined ) {\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists.set( scene, [ list ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= listArray.length ) {\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tlistArray.push( list );\n\n\t\t\t} else {\n\n\t\t\t\tlist = listArray[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction UniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nlet nextVersion = 0;\n\nfunction shadowCastingAndTexturingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 2 : 0 ) - ( lightA.castShadow ? 2 : 0 ) + ( lightB.map ? 1 : 0 ) - ( lightA.map ? 1 : 0 );\n\n}\n\nfunction WebGLLights( extensions, capabilities ) {\n\n\tconst cache = new UniformsCache();\n\n\tconst shadowCache = ShadowUniformsCache();\n\n\tconst state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1,\n\t\t\tnumSpotMaps: - 1,\n\n\t\t\tnumLightProbes: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotLightMap: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotLightMatrix: [],\n\t\trectArea: [],\n\t\trectAreaLTC1: null,\n\t\trectAreaLTC2: null,\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: [],\n\t\tnumSpotLightShadowsWithMaps: 0,\n\t\tnumLightProbes: 0\n\n\t};\n\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tconst vector3 = new Vector3();\n\tconst matrix4 = new Matrix4();\n\tconst matrix42 = new Matrix4();\n\n\tfunction setup( lights, useLegacyLights ) {\n\n\t\tlet r = 0, g = 0, b = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tlet numDirectionalShadows = 0;\n\t\tlet numPointShadows = 0;\n\t\tlet numSpotShadows = 0;\n\t\tlet numSpotMaps = 0;\n\t\tlet numSpotShadowsWithMaps = 0;\n\n\t\tlet numLightProbes = 0;\n\n\t\t// ordering : [shadow casting + map texturing, map texturing, shadow casting, none ]\n\t\tlights.sort( shadowCastingAndTexturingLightsFirst );\n\n\t\t// artist-friendly light intensity scaling factor\n\t\tconst scaleFactor = ( useLegacyLights === true ) ? Math.PI : 1;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tconst color = light.color;\n\t\t\tconst intensity = light.intensity;\n\t\t\tconst distance = light.distance;\n\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity * scaleFactor;\n\t\t\t\tg += color.g * intensity * scaleFactor;\n\t\t\t\tb += color.b * intensity * scaleFactor;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t\tnumLightProbes ++;\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity * scaleFactor );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity * scaleFactor );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\tif ( light.map ) {\n\n\t\t\t\t\tstate.spotLightMap[ numSpotMaps ] = light.map;\n\t\t\t\t\tnumSpotMaps ++;\n\n\t\t\t\t\t// make sure the lightMatrix is up to date\n\t\t\t\t\t// TODO : do it if required only\n\t\t\t\t\tshadow.updateMatrices( light );\n\n\t\t\t\t\tif ( light.castShadow ) numSpotShadowsWithMaps ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spotLightMatrix[ spotLength ] = shadow.matrix;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity * scaleFactor );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity * scaleFactor );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity * scaleFactor );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( rectAreaLength > 0 ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t// WebGL 2\n\n\t\t\t\tif ( extensions.has( 'OES_texture_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_HALF_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_HALF_2;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// WebGL 1\n\n\t\t\t\tif ( extensions.has( 'OES_texture_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t\t} else if ( extensions.has( 'OES_texture_half_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_HALF_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_HALF_2;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tconst hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ||\n\t\t\thash.numSpotMaps !== numSpotMaps ||\n\t\t\thash.numLightProbes !== numLightProbes ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotLightMatrix.length = numSpotShadows + numSpotMaps - numSpotShadowsWithMaps;\n\t\t\tstate.spotLightMap.length = numSpotMaps;\n\t\t\tstate.numSpotLightShadowsWithMaps = numSpotShadowsWithMaps;\n\t\t\tstate.numLightProbes = numLightProbes;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\t\t\thash.numSpotMaps = numSpotMaps;\n\n\t\t\thash.numLightProbes = numLightProbes;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\tfunction setupView( lights, camera ) {\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tconst viewMatrix = camera.matrixWorldInverse;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = state.directional[ directionalLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = state.spot[ spotLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = state.rectArea[ rectAreaLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = state.point[ pointLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = state.hemi[ hemiLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tsetupView: setupView,\n\t\tstate: state\n\t};\n\n}\n\nfunction WebGLRenderState( extensions, capabilities ) {\n\n\tconst lights = new WebGLLights( extensions, capabilities );\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( useLegacyLights ) {\n\n\t\tlights.setup( lightsArray, useLegacyLights );\n\n\t}\n\n\tfunction setupLightsView( camera ) {\n\n\t\tlights.setupView( lightsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\t\tsetupLightsView: setupLightsView,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates( extensions, capabilities ) {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, renderCallDepth = 0 ) {\n\n\t\tconst renderStateArray = renderStates.get( scene );\n\t\tlet renderState;\n\n\t\tif ( renderStateArray === undefined ) {\n\n\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\trenderStates.set( scene, [ renderState ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= renderStateArray.length ) {\n\n\t\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\t\trenderStateArray.push( renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStateArray[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nclass MeshDepthMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshDepthMaterial = true;\n\n\t\tthis.type = 'MeshDepthMaterial';\n\n\t\tthis.depthPacking = BasicDepthPacking;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.depthPacking = source.depthPacking;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshDistanceMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshDistanceMaterial = true;\n\n\t\tthis.type = 'MeshDistanceMaterial';\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst vertex = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\n\nconst fragment = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tconst float samples = float( VSM_SAMPLES );\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\\n\\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\\n\\tfor ( float i = 0.0; i < samples; i ++ ) {\\n\\t\\tfloat uvOffset = uvStart + i * uvStride;\\n\\t\\t#ifdef HORIZONTAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean / samples;\\n\\tsquared_mean = squared_mean / samples;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\n\nfunction WebGLShadowMap( _renderer, _objects, _capabilities ) {\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterial = new MeshDepthMaterial( { depthPacking: RGBADepthPacking } ),\n\t\t_distanceMaterial = new MeshDistanceMaterial(),\n\n\t\t_materialCache = {},\n\n\t\t_maxTextureSize = _capabilities.maxTextureSize;\n\n\tconst shadowSide = { [ FrontSide ]: BackSide, [ BackSide ]: FrontSide, [ DoubleSide ]: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial( {\n\t\tdefines: {\n\t\t\tVSM_SAMPLES: 8\n\t\t},\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vertex,\n\t\tfragmentShader: fragment\n\n\t} );\n\n\tconst shadowMaterialHorizontal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizontal.defines.HORIZONTAL_PASS = 1;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t'position',\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tconst scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\tlet _previousType = this.type;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tconst _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// check for shadow map type changes\n\n\t\tconst toVSM = ( _previousType !== VSMShadowMap && this.type === VSMShadowMap );\n\t\tconst fromVSM = ( _previousType === VSMShadowMap && this.type !== VSMShadowMap );\n\n\t\t// render depth map\n\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\t\t\tconst shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > _maxTextureSize || _shadowMapSize.y > _maxTextureSize ) {\n\n\t\t\t\tif ( _shadowMapSize.x > _maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( _maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > _maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( _maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null || toVSM === true || fromVSM === true ) {\n\n\t\t\t\tconst pars = ( this.type !== VSMShadowMap ) ? { minFilter: NearestFilter, magFilter: NearestFilter } : {};\n\n\t\t\t\tif ( shadow.map !== null ) {\n\n\t\t\t\t\tshadow.map.dispose();\n\n\t\t\t\t}\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + '.shadowMap';\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tconst viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tconst viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( shadow.isPointLightShadow !== true && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t\tshadow.needsUpdate = false;\n\n\t\t}\n\n\t\t_previousType = this.type;\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tconst geometry = _objects.update( fullScreenMesh );\n\n\t\tif ( shadowMaterialVertical.defines.VSM_SAMPLES !== shadow.blurSamples ) {\n\n\t\t\tshadowMaterialVertical.defines.VSM_SAMPLES = shadow.blurSamples;\n\t\t\tshadowMaterialHorizontal.defines.VSM_SAMPLES = shadow.blurSamples;\n\n\t\t\tshadowMaterialVertical.needsUpdate = true;\n\t\t\tshadowMaterialHorizontal.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( shadow.mapPass === null ) {\n\n\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y );\n\n\t\t}\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizontal pass\n\n\t\tshadowMaterialHorizontal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizontal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizontal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizontal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterial( object, material, light, type ) {\n\n\t\tlet result = null;\n\n\t\tconst customMaterial = ( light.isPointLight === true ) ? object.customDistanceMaterial : object.customDepthMaterial;\n\n\t\tif ( customMaterial !== undefined ) {\n\n\t\t\tresult = customMaterial;\n\n\t\t} else {\n\n\t\t\tresult = ( light.isPointLight === true ) ? _distanceMaterial : _depthMaterial;\n\n\t\t\tif ( ( _renderer.localClippingEnabled && material.clipShadows === true && Array.isArray( material.clippingPlanes ) && material.clippingPlanes.length !== 0 ) ||\n\t\t\t\t( material.displacementMap && material.displacementScale !== 0 ) ||\n\t\t\t\t( material.alphaMap && material.alphaTest > 0 ) ||\n\t\t\t\t( material.map && material.alphaTest > 0 ) ) {\n\n\t\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t\t// appropriate state\n\n\t\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\t\tlet materialsForVariant = _materialCache[ keyA ];\n\n\t\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t\t}\n\n\t\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\t\t\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t\t\t}\n\n\t\t\t\tresult = cachedMaterial;\n\n\t\t\t}\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.alphaMap = material.alphaMap;\n\t\tresult.alphaTest = material.alphaTest;\n\t\tresult.map = material.map;\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.displacementMap = material.displacementMap;\n\t\tresult.displacementScale = material.displacementScale;\n\t\tresult.displacementBias = material.displacementBias;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tconst materialProperties = _renderer.properties.get( result );\n\t\t\tmaterialProperties.light = light;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tconst geometry = _objects.update( object );\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ k ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, groupMaterial, light, type );\n\n\t\t\t\t\t\t\tobject.onBeforeShadow( _renderer, object, camera, shadowCamera, geometry, depthMaterial, group );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t\tobject.onAfterShadow( _renderer, object, camera, shadowCamera, geometry, depthMaterial, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, material, light, type );\n\n\t\t\t\t\tobject.onBeforeShadow( _renderer, object, camera, shadowCamera, geometry, depthMaterial, null );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t\tobject.onAfterShadow( _renderer, object, camera, shadowCamera, geometry, depthMaterial, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tconst material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\t// make sure to remove the unique distance/depth materials used for shadow map rendering\n\n\t\tfor ( const id in _materialCache ) {\n\n\t\t\tconst cache = _materialCache[ id ];\n\n\t\t\tconst uuid = event.target.uuid;\n\n\t\t\tif ( uuid in cache ) {\n\n\t\t\t\tconst shadowMaterial = cache[ uuid ];\n\t\t\t\tshadowMaterial.dispose();\n\t\t\t\tdelete cache[ uuid ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tlet locked = false;\n\n\t\tconst color = new Vector4();\n\t\tlet currentColorMask = null;\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentDepthMask = null;\n\t\tlet currentDepthFunc = null;\n\t\tlet currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentStencilMask = null;\n\t\tlet currentStencilFunc = null;\n\t\tlet currentStencilRef = null;\n\t\tlet currentStencilFuncMask = null;\n\t\tlet currentStencilFail = null;\n\t\tlet currentStencilZFail = null;\n\t\tlet currentStencilZPass = null;\n\t\tlet currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef !== stencilRef ||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail !== stencilFail ||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tconst colorBuffer = new ColorBuffer();\n\tconst depthBuffer = new DepthBuffer();\n\tconst stencilBuffer = new StencilBuffer();\n\n\tconst uboBindings = new WeakMap();\n\tconst uboProgramMap = new WeakMap();\n\n\tlet enabledCapabilities = {};\n\n\tlet currentBoundFramebuffers = {};\n\tlet currentDrawbuffers = new WeakMap();\n\tlet defaultDrawbuffers = [];\n\n\tlet currentProgram = null;\n\n\tlet currentBlendingEnabled = false;\n\tlet currentBlending = null;\n\tlet currentBlendEquation = null;\n\tlet currentBlendSrc = null;\n\tlet currentBlendDst = null;\n\tlet currentBlendEquationAlpha = null;\n\tlet currentBlendSrcAlpha = null;\n\tlet currentBlendDstAlpha = null;\n\tlet currentBlendColor = new Color( 0, 0, 0 );\n\tlet currentBlendAlpha = 0;\n\tlet currentPremultipledAlpha = false;\n\n\tlet currentFlipSided = null;\n\tlet currentCullFace = null;\n\n\tlet currentLineWidth = null;\n\n\tlet currentPolygonOffsetFactor = null;\n\tlet currentPolygonOffsetUnits = null;\n\n\tconst maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\n\n\tlet lineWidthAvailable = false;\n\tlet version = 0;\n\tconst glVersion = gl.getParameter( gl.VERSION );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL ES (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tlet currentTextureSlot = null;\n\tlet currentBoundTextures = {};\n\n\tconst scissorParam = gl.getParameter( gl.SCISSOR_BOX );\n\tconst viewportParam = gl.getParameter( gl.VIEWPORT );\n\n\tconst currentScissor = new Vector4().fromArray( scissorParam );\n\tconst currentViewport = new Vector4().fromArray( viewportParam );\n\n\tfunction createTexture( type, target, count, dimensions ) {\n\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tif ( isWebGL2 && ( type === gl.TEXTURE_3D || type === gl.TEXTURE_2D_ARRAY ) ) {\n\n\t\t\t\tgl.texImage3D( target, 0, gl.RGBA, 1, 1, dimensions, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t\t} else {\n\n\t\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tconst emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\tif ( isWebGL2 ) {\n\n\t\temptyTextures[ gl.TEXTURE_2D_ARRAY ] = createTexture( gl.TEXTURE_2D_ARRAY, gl.TEXTURE_2D_ARRAY, 1, 1 );\n\t\temptyTextures[ gl.TEXTURE_3D ] = createTexture( gl.TEXTURE_3D, gl.TEXTURE_3D, 1, 1 );\n\n\t}\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( gl.DEPTH_TEST );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( gl.CULL_FACE );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction bindFramebuffer( target, framebuffer ) {\n\n\t\tif ( currentBoundFramebuffers[ target ] !== framebuffer ) {\n\n\t\t\tgl.bindFramebuffer( target, framebuffer );\n\n\t\t\tcurrentBoundFramebuffers[ target ] = framebuffer;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t// gl.DRAW_FRAMEBUFFER is equivalent to gl.FRAMEBUFFER\n\n\t\t\t\tif ( target === gl.DRAW_FRAMEBUFFER ) {\n\n\t\t\t\t\tcurrentBoundFramebuffers[ gl.FRAMEBUFFER ] = framebuffer;\n\n\t\t\t\t}\n\n\t\t\t\tif ( target === gl.FRAMEBUFFER ) {\n\n\t\t\t\t\tcurrentBoundFramebuffers[ gl.DRAW_FRAMEBUFFER ] = framebuffer;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction drawBuffers( renderTarget, framebuffer ) {\n\n\t\tlet drawBuffers = defaultDrawbuffers;\n\n\t\tlet needsUpdate = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tdrawBuffers = currentDrawbuffers.get( framebuffer );\n\n\t\t\tif ( drawBuffers === undefined ) {\n\n\t\t\t\tdrawBuffers = [];\n\t\t\t\tcurrentDrawbuffers.set( framebuffer, drawBuffers );\n\n\t\t\t}\n\n\t\t\tif ( renderTarget.isWebGLMultipleRenderTargets ) {\n\n\t\t\t\tconst textures = renderTarget.texture;\n\n\t\t\t\tif ( drawBuffers.length !== textures.length || drawBuffers[ 0 ] !== gl.COLOR_ATTACHMENT0 ) {\n\n\t\t\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tdrawBuffers[ i ] = gl.COLOR_ATTACHMENT0 + i;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdrawBuffers.length = textures.length;\n\n\t\t\t\t\tneedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( drawBuffers[ 0 ] !== gl.COLOR_ATTACHMENT0 ) {\n\n\t\t\t\t\tdrawBuffers[ 0 ] = gl.COLOR_ATTACHMENT0;\n\n\t\t\t\t\tneedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( drawBuffers[ 0 ] !== gl.BACK ) {\n\n\t\t\t\tdrawBuffers[ 0 ] = gl.BACK;\n\n\t\t\t\tneedsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgl.drawBuffers( drawBuffers );\n\n\t\t\t} else {\n\n\t\t\t\textensions.get( 'WEBGL_draw_buffers' ).drawBuffersWEBGL( drawBuffers );\n\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tconst equationToGL = {\n\t\t[ AddEquation ]: gl.FUNC_ADD,\n\t\t[ SubtractEquation ]: gl.FUNC_SUBTRACT,\n\t\t[ ReverseSubtractEquation ]: gl.FUNC_REVERSE_SUBTRACT\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = gl.MIN;\n\t\tequationToGL[ MaxEquation ] = gl.MAX;\n\n\t} else {\n\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tconst factorToGL = {\n\t\t[ ZeroFactor ]: gl.ZERO,\n\t\t[ OneFactor ]: gl.ONE,\n\t\t[ SrcColorFactor ]: gl.SRC_COLOR,\n\t\t[ SrcAlphaFactor ]: gl.SRC_ALPHA,\n\t\t[ SrcAlphaSaturateFactor ]: gl.SRC_ALPHA_SATURATE,\n\t\t[ DstColorFactor ]: gl.DST_COLOR,\n\t\t[ DstAlphaFactor ]: gl.DST_ALPHA,\n\t\t[ OneMinusSrcColorFactor ]: gl.ONE_MINUS_SRC_COLOR,\n\t\t[ OneMinusSrcAlphaFactor ]: gl.ONE_MINUS_SRC_ALPHA,\n\t\t[ OneMinusDstColorFactor ]: gl.ONE_MINUS_DST_COLOR,\n\t\t[ OneMinusDstAlphaFactor ]: gl.ONE_MINUS_DST_ALPHA,\n\t\t[ ConstantColorFactor ]: gl.CONSTANT_COLOR,\n\t\t[ OneMinusConstantColorFactor ]: gl.ONE_MINUS_CONSTANT_COLOR,\n\t\t[ ConstantAlphaFactor ]: gl.CONSTANT_ALPHA,\n\t\t[ OneMinusConstantAlphaFactor ]: gl.ONE_MINUS_CONSTANT_ALPHA\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, blendColor, blendAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled === true ) {\n\n\t\t\t\tdisable( gl.BLEND );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( currentBlendingEnabled === false ) {\n\n\t\t\tenable( gl.BLEND );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ONE, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ZERO, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ZERO, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\t\t\t\tcurrentBlendColor.set( 0, 0, 0 );\n\t\t\t\tcurrentBlendAlpha = 0;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tif ( blendColor.equals( currentBlendColor ) === false || blendAlpha !== currentBlendAlpha ) {\n\n\t\t\tgl.blendColor( blendColor.r, blendColor.g, blendColor.b, blendAlpha );\n\n\t\t\tcurrentBlendColor.copy( blendColor );\n\t\t\tcurrentBlendAlpha = blendAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = false;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( gl.CULL_FACE )\n\t\t\t: enable( gl.CULL_FACE );\n\n\t\tlet flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.blendColor, material.blendAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tconst stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\tmaterial.alphaToCoverage === true\n\t\t\t? enable( gl.SAMPLE_ALPHA_TO_COVERAGE )\n\t\t\t: disable( gl.SAMPLE_ALPHA_TO_COVERAGE );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture, webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) {\n\n\t\t\tif ( currentTextureSlot === null ) {\n\n\t\t\t\twebglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\t\t} else {\n\n\t\t\t\twebglSlot = currentTextureSlot;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet boundTexture = currentBoundTextures[ webglSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ webglSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\t\tgl.activeTexture( webglSlot );\n\t\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t\t}\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texSubImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texSubImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texSubImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texSubImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexSubImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexSubImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexSubImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexSubImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texStorage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texStorage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texStorage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texStorage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\tfunction updateUBOMapping( uniformsGroup, program ) {\n\n\t\tlet mapping = uboProgramMap.get( program );\n\n\t\tif ( mapping === undefined ) {\n\n\t\t\tmapping = new WeakMap();\n\n\t\t\tuboProgramMap.set( program, mapping );\n\n\t\t}\n\n\t\tlet blockIndex = mapping.get( uniformsGroup );\n\n\t\tif ( blockIndex === undefined ) {\n\n\t\t\tblockIndex = gl.getUniformBlockIndex( program, uniformsGroup.name );\n\n\t\t\tmapping.set( uniformsGroup, blockIndex );\n\n\t\t}\n\n\t}\n\n\tfunction uniformBlockBinding( uniformsGroup, program ) {\n\n\t\tconst mapping = uboProgramMap.get( program );\n\t\tconst blockIndex = mapping.get( uniformsGroup );\n\n\t\tif ( uboBindings.get( program ) !== blockIndex ) {\n\n\t\t\t// bind shader specific block index to global block point\n\t\t\tgl.uniformBlockBinding( program, blockIndex, uniformsGroup.__bindingPointIndex );\n\n\t\t\tuboBindings.set( program, blockIndex );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\t// reset state\n\n\t\tgl.disable( gl.BLEND );\n\t\tgl.disable( gl.CULL_FACE );\n\t\tgl.disable( gl.DEPTH_TEST );\n\t\tgl.disable( gl.POLYGON_OFFSET_FILL );\n\t\tgl.disable( gl.SCISSOR_TEST );\n\t\tgl.disable( gl.STENCIL_TEST );\n\t\tgl.disable( gl.SAMPLE_ALPHA_TO_COVERAGE );\n\n\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\tgl.blendFunc( gl.ONE, gl.ZERO );\n\t\tgl.blendFuncSeparate( gl.ONE, gl.ZERO, gl.ONE, gl.ZERO );\n\t\tgl.blendColor( 0, 0, 0, 0 );\n\n\t\tgl.colorMask( true, true, true, true );\n\t\tgl.clearColor( 0, 0, 0, 0 );\n\n\t\tgl.depthMask( true );\n\t\tgl.depthFunc( gl.LESS );\n\t\tgl.clearDepth( 1 );\n\n\t\tgl.stencilMask( 0xffffffff );\n\t\tgl.stencilFunc( gl.ALWAYS, 0, 0xffffffff );\n\t\tgl.stencilOp( gl.KEEP, gl.KEEP, gl.KEEP );\n\t\tgl.clearStencil( 0 );\n\n\t\tgl.cullFace( gl.BACK );\n\t\tgl.frontFace( gl.CCW );\n\n\t\tgl.polygonOffset( 0, 0 );\n\n\t\tgl.activeTexture( gl.TEXTURE0 );\n\n\t\tgl.bindFramebuffer( gl.FRAMEBUFFER, null );\n\n\t\tif ( isWebGL2 === true ) {\n\n\t\t\tgl.bindFramebuffer( gl.DRAW_FRAMEBUFFER, null );\n\t\t\tgl.bindFramebuffer( gl.READ_FRAMEBUFFER, null );\n\n\t\t}\n\n\t\tgl.useProgram( null );\n\n\t\tgl.lineWidth( 1 );\n\n\t\tgl.scissor( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tgl.viewport( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\t// reset internals\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentBoundFramebuffers = {};\n\t\tcurrentDrawbuffers = new WeakMap();\n\t\tdefaultDrawbuffers = [];\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlendingEnabled = false;\n\t\tcurrentBlending = null;\n\t\tcurrentBlendEquation = null;\n\t\tcurrentBlendSrc = null;\n\t\tcurrentBlendDst = null;\n\t\tcurrentBlendEquationAlpha = null;\n\t\tcurrentBlendSrcAlpha = null;\n\t\tcurrentBlendDstAlpha = null;\n\t\tcurrentBlendColor = new Color( 0, 0, 0 );\n\t\tcurrentBlendAlpha = 0;\n\t\tcurrentPremultipledAlpha = false;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcurrentLineWidth = null;\n\n\t\tcurrentPolygonOffsetFactor = null;\n\t\tcurrentPolygonOffsetUnits = null;\n\n\t\tcurrentScissor.set( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tcurrentViewport.set( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tbindFramebuffer: bindFramebuffer,\n\t\tdrawBuffers: drawBuffers,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\tcompressedTexImage3D: compressedTexImage3D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tupdateUBOMapping: updateUBOMapping,\n\t\tuniformBlockBinding: uniformBlockBinding,\n\n\t\ttexStorage2D: texStorage2D,\n\t\ttexStorage3D: texStorage3D,\n\t\ttexSubImage2D: texSubImage2D,\n\t\ttexSubImage3D: texSubImage3D,\n\t\tcompressedTexSubImage2D: compressedTexSubImage2D,\n\t\tcompressedTexSubImage3D: compressedTexSubImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst multisampledRTTExt = extensions.has( 'WEBGL_multisampled_render_to_texture' ) ? extensions.get( 'WEBGL_multisampled_render_to_texture' ) : null;\n\tconst supportsInvalidateFramebuffer = typeof navigator === 'undefined' ? false : /OculusBrowser/g.test( navigator.userAgent );\n\n\tconst _videoTextures = new WeakMap();\n\tlet _canvas;\n\n\tconst _sources = new WeakMap(); // maps WebglTexture objects to instances of Source\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tlet useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t// eslint-disable-next-line compat/compat\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( '2d' ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\t// eslint-disable-next-line compat/compat\n\t\t\tnew OffscreenCanvas( width, height ) : createElementNS( 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tlet scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tconst floor = needsPowerOfTwo ? floorPowerOfTwo : Math.floor;\n\n\t\t\t\tconst width = floor( scale * image.width );\n\t\t\t\tconst height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo$1( image ) {\n\n\t\treturn isPowerOfTwo( image.width ) && isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType, colorSpace, forceLinearTransfer = false ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tlet internalFormat = glFormat;\n\n\t\tif ( glFormat === _gl.RED ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.R32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.R16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.R8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RED_INTEGER ) {\n\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.R8UI;\n\t\t\tif ( glType === _gl.UNSIGNED_SHORT ) internalFormat = _gl.R16UI;\n\t\t\tif ( glType === _gl.UNSIGNED_INT ) internalFormat = _gl.R32UI;\n\t\t\tif ( glType === _gl.BYTE ) internalFormat = _gl.R8I;\n\t\t\tif ( glType === _gl.SHORT ) internalFormat = _gl.R16I;\n\t\t\tif ( glType === _gl.INT ) internalFormat = _gl.R32I;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RG ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RG32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RG16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RG8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGBA ) {\n\n\t\t\tconst transfer = forceLinearTransfer ? LinearTransfer : ColorManagement.getTransfer( colorSpace );\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGBA32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGBA16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = ( transfer === SRGBTransfer ) ? _gl.SRGB8_ALPHA8 : _gl.RGBA8;\n\t\t\tif ( glType === _gl.UNSIGNED_SHORT_4_4_4_4 ) internalFormat = _gl.RGBA4;\n\t\t\tif ( glType === _gl.UNSIGNED_SHORT_5_5_5_1 ) internalFormat = _gl.RGB5_A1;\n\n\t\t}\n\n\t\tif ( internalFormat === _gl.R16F || internalFormat === _gl.R32F ||\n\t\t\tinternalFormat === _gl.RG16F || internalFormat === _gl.RG32F ||\n\t\t\tinternalFormat === _gl.RGBA16F || internalFormat === _gl.RGBA32F ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\tfunction getMipLevels( texture, image, supportsMips ) {\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) === true || ( texture.isFramebufferTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) ) {\n\n\t\t\treturn Math.log2( Math.max( image.width, image.height ) ) + 1;\n\n\t\t} else if ( texture.mipmaps !== undefined && texture.mipmaps.length > 0 ) {\n\n\t\t\t// user-defined mipmaps\n\n\t\t\treturn texture.mipmaps.length;\n\n\t\t} else if ( texture.isCompressedTexture && Array.isArray( texture.image ) ) {\n\n\t\t\treturn image.mipmaps.length;\n\n\t\t} else {\n\n\t\t\t// texture without mipmaps (only base level)\n\n\t\t\treturn 1;\n\n\t\t}\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tconst renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t// check if it's necessary to remove the WebGLTexture object\n\n\t\tconst source = texture.source;\n\t\tconst webglTextures = _sources.get( source );\n\n\t\tif ( webglTextures ) {\n\n\t\t\tconst webglTexture = webglTextures[ textureProperties.__cacheKey ];\n\t\t\twebglTexture.usedTimes --;\n\n\t\t\t// the WebGLTexture object is not used anymore, remove it\n\n\t\t\tif ( webglTexture.usedTimes === 0 ) {\n\n\t\t\t\tdeleteTexture( texture );\n\n\t\t\t}\n\n\t\t\t// remove the weak map entry if no WebGLTexture uses the source anymore\n\n\t\t\tif ( Object.keys( webglTextures ).length === 0 ) {\n\n\t\t\t\t_sources.delete( source );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deleteTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tconst source = texture.source;\n\t\tconst webglTextures = _sources.get( source );\n\t\tdelete webglTextures[ textureProperties.__cacheKey ];\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t\tinfo.memory.textures --;\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( Array.isArray( renderTargetProperties.__webglFramebuffer[ i ] ) ) {\n\n\t\t\t\t\tfor ( let level = 0; level < renderTargetProperties.__webglFramebuffer[ i ].length; level ++ ) _gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ][ level ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( Array.isArray( renderTargetProperties.__webglFramebuffer ) ) {\n\n\t\t\t\tfor ( let level = 0; level < renderTargetProperties.__webglFramebuffer.length; level ++ ) _gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ level ] );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\n\t\t\t}\n\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) {\n\n\t\t\t\tfor ( let i = 0; i < renderTargetProperties.__webglColorRenderbuffer.length; i ++ ) {\n\n\t\t\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer[ i ] ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLMultipleRenderTargets ) {\n\n\t\t\tfor ( let i = 0, il = texture.length; i < il; i ++ ) {\n\n\t\t\t\tconst attachmentProperties = properties.get( texture[ i ] );\n\n\t\t\t\tif ( attachmentProperties.__webglTexture ) {\n\n\t\t\t\t\t_gl.deleteTexture( attachmentProperties.__webglTexture );\n\n\t\t\t\t\tinfo.memory.textures --;\n\n\t\t\t\t}\n\n\t\t\t\tproperties.remove( texture[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tlet textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tconst textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tfunction getTextureCacheKey( texture ) {\n\n\t\tconst array = [];\n\n\t\tarray.push( texture.wrapS );\n\t\tarray.push( texture.wrapT );\n\t\tarray.push( texture.wrapR || 0 );\n\t\tarray.push( texture.magFilter );\n\t\tarray.push( texture.minFilter );\n\t\tarray.push( texture.anisotropy );\n\t\tarray.push( texture.internalFormat );\n\t\tarray.push( texture.format );\n\t\tarray.push( texture.type );\n\t\tarray.push( texture.generateMipmaps );\n\t\tarray.push( texture.premultiplyAlpha );\n\t\tarray.push( texture.flipY );\n\t\tarray.push( texture.unpackAlignment );\n\t\tarray.push( texture.colorSpace );\n\n\t\treturn array.join();\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.isRenderTargetTexture === false && texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tconst image = texture.image;\n\n\t\t\tif ( image === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but no image data found.' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( _gl.TEXTURE_2D_ARRAY, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( _gl.TEXTURE_3D, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadCubeTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t}\n\n\tconst wrappingToGL = {\n\t\t[ RepeatWrapping ]: _gl.REPEAT,\n\t\t[ ClampToEdgeWrapping ]: _gl.CLAMP_TO_EDGE,\n\t\t[ MirroredRepeatWrapping ]: _gl.MIRRORED_REPEAT\n\t};\n\n\tconst filterToGL = {\n\t\t[ NearestFilter ]: _gl.NEAREST,\n\t\t[ NearestMipmapNearestFilter ]: _gl.NEAREST_MIPMAP_NEAREST,\n\t\t[ NearestMipmapLinearFilter ]: _gl.NEAREST_MIPMAP_LINEAR,\n\n\t\t[ LinearFilter ]: _gl.LINEAR,\n\t\t[ LinearMipmapNearestFilter ]: _gl.LINEAR_MIPMAP_NEAREST,\n\t\t[ LinearMipmapLinearFilter ]: _gl.LINEAR_MIPMAP_LINEAR\n\t};\n\n\tconst compareToGL = {\n\t\t[ NeverCompare ]: _gl.NEVER,\n\t\t[ AlwaysCompare ]: _gl.ALWAYS,\n\t\t[ LessCompare ]: _gl.LESS,\n\t\t[ LessEqualCompare ]: _gl.LEQUAL,\n\t\t[ EqualCompare ]: _gl.EQUAL,\n\t\t[ GreaterEqualCompare ]: _gl.GEQUAL,\n\t\t[ GreaterCompare ]: _gl.GREATER,\n\t\t[ NotEqualCompare ]: _gl.NOTEQUAL\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( texture.type === FloatType && extensions.has( 'OES_texture_float_linear' ) === false &&\n\t\t\t( texture.magFilter === LinearFilter || texture.magFilter === LinearMipmapNearestFilter || texture.magFilter === NearestMipmapLinearFilter || texture.magFilter === LinearMipmapLinearFilter ||\n\t\t\ttexture.minFilter === LinearFilter || texture.minFilter === LinearMipmapNearestFilter || texture.minFilter === NearestMipmapLinearFilter || texture.minFilter === LinearMipmapLinearFilter ) ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device.' );\n\n\t\t}\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, _gl.CLAMP_TO_EDGE );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( texture.compareFunction ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_COMPARE_MODE, _gl.COMPARE_REF_TO_TEXTURE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_COMPARE_FUNC, compareToGL[ texture.compareFunction ] );\n\n\t\t}\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tif ( texture.magFilter === NearestFilter ) return;\n\t\t\tif ( texture.minFilter !== NearestMipmapLinearFilter && texture.minFilter !== LinearMipmapLinearFilter ) return;\n\t\t\tif ( texture.type === FloatType && extensions.has( 'OES_texture_float_linear' ) === false ) return; // verify extension for WebGL 1 and WebGL 2\n\t\t\tif ( isWebGL2 === false && ( texture.type === HalfFloatType && extensions.has( 'OES_texture_half_float_linear' ) === false ) ) return; // verify extension for WebGL 1 only\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tlet forceUpload = false;\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t}\n\n\t\t// create Source <-> WebGLTextures mapping if necessary\n\n\t\tconst source = texture.source;\n\t\tlet webglTextures = _sources.get( source );\n\n\t\tif ( webglTextures === undefined ) {\n\n\t\t\twebglTextures = {};\n\t\t\t_sources.set( source, webglTextures );\n\n\t\t}\n\n\t\t// check if there is already a WebGLTexture object for the given texture parameters\n\n\t\tconst textureCacheKey = getTextureCacheKey( texture );\n\n\t\tif ( textureCacheKey !== textureProperties.__cacheKey ) {\n\n\t\t\t// if not, create a new instance of WebGLTexture\n\n\t\t\tif ( webglTextures[ textureCacheKey ] === undefined ) {\n\n\t\t\t\t// create new entry\n\n\t\t\t\twebglTextures[ textureCacheKey ] = {\n\t\t\t\t\ttexture: _gl.createTexture(),\n\t\t\t\t\tusedTimes: 0\n\t\t\t\t};\n\n\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t// when a new instance of WebGLTexture was created, a texture upload is required\n\t\t\t\t// even if the image contents are identical\n\n\t\t\t\tforceUpload = true;\n\n\t\t\t}\n\n\t\t\twebglTextures[ textureCacheKey ].usedTimes ++;\n\n\t\t\t// every time the texture cache key changes, it's necessary to check if an instance of\n\t\t\t// WebGLTexture can be deleted in order to avoid a memory leak.\n\n\t\t\tconst webglTexture = webglTextures[ textureProperties.__cacheKey ];\n\n\t\t\tif ( webglTexture !== undefined ) {\n\n\t\t\t\twebglTextures[ textureProperties.__cacheKey ].usedTimes --;\n\n\t\t\t\tif ( webglTexture.usedTimes === 0 ) {\n\n\t\t\t\t\tdeleteTexture( texture );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// store references to cache key and WebGLTexture object\n\n\t\t\ttextureProperties.__cacheKey = textureCacheKey;\n\t\t\ttextureProperties.__webglTexture = webglTextures[ textureCacheKey ].texture;\n\n\t\t}\n\n\t\treturn forceUpload;\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tlet textureType = _gl.TEXTURE_2D;\n\n\t\tif ( texture.isDataArrayTexture || texture.isCompressedArrayTexture ) textureType = _gl.TEXTURE_2D_ARRAY;\n\t\tif ( texture.isData3DTexture ) textureType = _gl.TEXTURE_3D;\n\n\t\tconst forceUpload = initTexture( textureProperties, texture );\n\t\tconst source = texture.source;\n\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t\tconst sourceProperties = properties.get( source );\n\n\t\tif ( source.version !== sourceProperties.__version || forceUpload === true ) {\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\n\t\t\tconst workingPrimaries = ColorManagement.getPrimaries( ColorManagement.workingColorSpace );\n\t\t\tconst texturePrimaries = texture.colorSpace === NoColorSpace ? null : ColorManagement.getPrimaries( texture.colorSpace );\n\t\t\tconst unpackConversion = texture.colorSpace === NoColorSpace || workingPrimaries === texturePrimaries ? _gl.NONE : _gl.BROWSER_DEFAULT_WEBGL;\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, unpackConversion );\n\n\t\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo$1( texture.image ) === false;\n\t\t\tlet image = resizeImage( texture.image, needsPowerOfTwo, false, capabilities.maxTextureSize );\n\t\t\timage = verifyColorSpace( texture, image );\n\n\t\t\tconst supportsMips = isPowerOfTwo$1( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format, texture.colorSpace );\n\n\t\t\tlet glType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.colorSpace, texture.isVideoTexture );\n\n\t\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\t\tlet mipmap;\n\t\t\tconst mipmaps = texture.mipmaps;\n\n\t\t\tconst useTexStorage = ( isWebGL2 && texture.isVideoTexture !== true && glInternalFormat !== RGB_ETC1_Format );\n\t\t\tconst allocateMemory = ( sourceProperties.__version === undefined ) || ( forceUpload === true );\n\t\t\tconst dataReady = source.dataReady;\n\t\t\tconst levels = getMipLevels( texture, image, supportsMips );\n\n\t\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t\t// populate depth texture with dummy data\n\n\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT24;\n\n\t\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH24_STENCIL8;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT16; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// validation checks for WebGL 1\n\n\t\t\t\tif ( texture.format === DepthFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedIntType;\n\t\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tglInternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, 1, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_2D, i, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_2D, 0, 0, 0, image.width, image.height, glFormat, glType, image.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\t\tif ( texture.isCompressedArrayTexture ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( _gl.TEXTURE_2D_ARRAY, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\t\t\tstate.compressedTexSubImage3D( _gl.TEXTURE_2D_ARRAY, i, 0, 0, 0, mipmap.width, mipmap.height, image.depth, glFormat, mipmap.data, 0, 0 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage3D( _gl.TEXTURE_2D_ARRAY, i, glInternalFormat, mipmap.width, mipmap.height, image.depth, 0, mipmap.data, 0, 0 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\t\tstate.texSubImage3D( _gl.TEXTURE_2D_ARRAY, i, 0, 0, 0, mipmap.width, mipmap.height, image.depth, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage3D( _gl.TEXTURE_2D_ARRAY, i, glInternalFormat, mipmap.width, mipmap.height, image.depth, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\t\t\tstate.compressedTexSubImage2D( _gl.TEXTURE_2D, i, 0, 0, mipmap.width, mipmap.height, glFormat, mipmap.data );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_2D, i, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isDataArrayTexture ) {\n\n\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( _gl.TEXTURE_2D_ARRAY, levels, glInternalFormat, image.width, image.height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\tstate.texSubImage3D( _gl.TEXTURE_2D_ARRAY, 0, 0, 0, 0, image.width, image.height, image.depth, glFormat, glType, image.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage3D( _gl.TEXTURE_2D_ARRAY, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isData3DTexture ) {\n\n\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( _gl.TEXTURE_3D, levels, glInternalFormat, image.width, image.height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\tstate.texSubImage3D( _gl.TEXTURE_3D, 0, 0, 0, 0, image.width, image.height, image.depth, glFormat, glType, image.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage3D( _gl.TEXTURE_3D, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isFramebufferTexture ) {\n\n\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tlet width = image.width, height = image.height;\n\n\t\t\t\t\t\tfor ( let i = 0; i < levels; i ++ ) {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, width, height, 0, glFormat, glType, null );\n\n\t\t\t\t\t\t\twidth >>= 1;\n\t\t\t\t\t\t\theight >>= 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_2D, i, 0, 0, glFormat, glType, mipmap );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_2D, 0, 0, 0, glFormat, glType, image );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, glFormat, glType, image );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( textureType );\n\n\t\t\t}\n\n\t\t\tsourceProperties.__version = source.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t}\n\n\tfunction uploadCubeTexture( textureProperties, texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tconst forceUpload = initTexture( textureProperties, texture );\n\t\tconst source = texture.source;\n\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t\tconst sourceProperties = properties.get( source );\n\n\t\tif ( source.version !== sourceProperties.__version || forceUpload === true ) {\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\n\t\t\tconst workingPrimaries = ColorManagement.getPrimaries( ColorManagement.workingColorSpace );\n\t\t\tconst texturePrimaries = texture.colorSpace === NoColorSpace ? null : ColorManagement.getPrimaries( texture.colorSpace );\n\t\t\tconst unpackConversion = texture.colorSpace === NoColorSpace || workingPrimaries === texturePrimaries ? _gl.NONE : _gl.BROWSER_DEFAULT_WEBGL;\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, unpackConversion );\n\n\t\t\tconst isCompressed = ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture );\n\t\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\tconst cubeImage = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, capabilities.maxCubemapSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t}\n\n\t\t\t\tcubeImage[ i ] = verifyColorSpace( texture, cubeImage[ i ] );\n\n\t\t\t}\n\n\t\t\tconst image = cubeImage[ 0 ],\n\t\t\t\tsupportsMips = isPowerOfTwo$1( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format, texture.colorSpace ),\n\t\t\t\tglType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.colorSpace );\n\n\t\t\tconst useTexStorage = ( isWebGL2 && texture.isVideoTexture !== true );\n\t\t\tconst allocateMemory = ( sourceProperties.__version === undefined ) || ( forceUpload === true );\n\t\t\tconst dataReady = source.dataReady;\n\t\t\tlet levels = getMipLevels( texture, image, supportsMips );\n\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, supportsMips );\n\n\t\t\tlet mipmaps;\n\n\t\t\tif ( isCompressed ) {\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_CUBE_MAP, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\t\t\tstate.compressedTexSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, 0, 0, mipmap.width, mipmap.height, glFormat, mipmap.data );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t// TODO: Uniformly handle mipmap definitions\n\t\t\t\t\t// Normal textures and compressed cube textures define base level + mips with their mipmap array\n\t\t\t\t\t// Uncompressed cube textures use their mipmap array only for mips (no base level)\n\n\t\t\t\t\tif ( mipmaps.length > 0 ) levels ++;\n\n\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_CUBE_MAP, levels, glInternalFormat, cubeImage[ 0 ].width, cubeImage[ 0 ].height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, 0, 0, cubeImage[ i ].width, cubeImage[ i ].height, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\t\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, 0, 0, mipmapImage.width, mipmapImage.height, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, 0, 0, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tif ( dataReady ) {\n\n\t\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, 0, 0, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t}\n\n\t\t\tsourceProperties.__version = source.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, texture, attachment, textureTarget, level ) {\n\n\t\tconst glFormat = utils.convert( texture.format, texture.colorSpace );\n\t\tconst glType = utils.convert( texture.type );\n\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.colorSpace );\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tif ( ! renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\tconst width = Math.max( 1, renderTarget.width >> level );\n\t\t\tconst height = Math.max( 1, renderTarget.height >> level );\n\n\t\t\tif ( textureTarget === _gl.TEXTURE_3D || textureTarget === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\tstate.texImage3D( textureTarget, level, glInternalFormat, width, height, renderTarget.depth, 0, glFormat, glType, null );\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( textureTarget, level, glInternalFormat, width, height, 0, glFormat, glType, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( texture ).__webglTexture, 0, getRenderTargetSamples( renderTarget ) );\n\n\t\t} else if ( textureTarget === _gl.TEXTURE_2D || ( textureTarget >= _gl.TEXTURE_CUBE_MAP_POSITIVE_X && textureTarget <= _gl.TEXTURE_CUBE_MAP_NEGATIVE_Z ) ) { // see #24753\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( texture ).__webglTexture, level );\n\n\t\t}\n\n\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tlet glInternalFormat = ( isWebGL2 === true ) ? _gl.DEPTH_COMPONENT24 : _gl.DEPTH_COMPONENT16;\n\n\t\t\tif ( isMultisample || useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT24;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\tif ( isMultisample && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, _gl.DEPTH24_STENCIL8, renderTarget.width, renderTarget.height );\n\n\t\t\t} else if ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( _gl.RENDERBUFFER, samples, _gl.DEPTH24_STENCIL8, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture : [ renderTarget.texture ];\n\n\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\tconst texture = textures[ i ];\n\n\t\t\t\tconst glFormat = utils.convert( texture.format, texture.colorSpace );\n\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.colorSpace );\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\tif ( isMultisample && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else if ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0, samples );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t\t}\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0, samples );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture && ! renderTargetProperties.__autoAllocateDepthBuffer ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// rebind framebuffer with external textures\n\tfunction rebindTextures( renderTarget, colorTexture, depthTexture ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tif ( colorTexture !== undefined ) {\n\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, renderTarget.texture, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D, 0 );\n\n\t\t}\n\n\t\tif ( depthTexture !== undefined ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tif ( renderTarget.isWebGLMultipleRenderTargets !== true ) {\n\n\t\t\tif ( textureProperties.__webglTexture === undefined ) {\n\n\t\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t}\n\n\t\t\ttextureProperties.__version = texture.version;\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tconst isMultipleRenderTargets = ( renderTarget.isWebGLMultipleRenderTargets === true );\n\t\tconst supportsMips = isPowerOfTwo$1( renderTarget ) || isWebGL2;\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( isWebGL2 && texture.mipmaps && texture.mipmaps.length > 0 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = [];\n\n\t\t\t\t\tfor ( let level = 0; level < texture.mipmaps.length; level ++ ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ][ level ] = _gl.createFramebuffer();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 && texture.mipmaps && texture.mipmaps.length > 0 ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\t\tfor ( let level = 0; level < texture.mipmaps.length; level ++ ) {\n\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ level ] = _gl.createFramebuffer();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tif ( capabilities.drawBuffers ) {\n\n\t\t\t\t\tconst textures = renderTarget.texture;\n\n\t\t\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst attachmentProperties = properties.get( textures[ i ] );\n\n\t\t\t\t\t\tif ( attachmentProperties.__webglTexture === undefined ) {\n\n\t\t\t\t\t\t\tattachmentProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ( isWebGL2 && renderTarget.samples > 0 ) && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\tconst textures = isMultipleRenderTargets ? texture : [ texture ];\n\n\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = [];\n\n\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tconst texture = textures[ i ];\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer[ i ] = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t\tconst glFormat = utils.convert( texture.format, texture.colorSpace );\n\t\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.colorSpace, renderTarget.isXRRenderTarget === true );\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0 + i, _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t}\n\n\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, supportsMips );\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( isWebGL2 && texture.mipmaps && texture.mipmaps.length > 0 ) {\n\n\t\t\t\t\tfor ( let level = 0; level < texture.mipmaps.length; level ++ ) {\n\n\t\t\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ][ level ], renderTarget, texture, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, level );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, texture, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t} else if ( isMultipleRenderTargets ) {\n\n\t\t\tconst textures = renderTarget.texture;\n\n\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\tconst attachment = textures[ i ];\n\t\t\t\tconst attachmentProperties = properties.get( attachment );\n\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, attachmentProperties.__webglTexture );\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, attachment, supportsMips );\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, attachment, _gl.COLOR_ATTACHMENT0 + i, _gl.TEXTURE_2D, 0 );\n\n\t\t\t\tif ( textureNeedsGenerateMipmaps( attachment, supportsMips ) ) {\n\n\t\t\t\t\tgenerateMipmap( _gl.TEXTURE_2D );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t} else {\n\n\t\t\tlet glTextureType = _gl.TEXTURE_2D;\n\n\t\t\tif ( renderTarget.isWebGL3DRenderTarget || renderTarget.isWebGLArrayRenderTarget ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tglTextureType = renderTarget.isWebGL3DRenderTarget ? _gl.TEXTURE_3D : _gl.TEXTURE_2D_ARRAY;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( glTextureType, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( glTextureType, texture, supportsMips );\n\n\t\t\tif ( isWebGL2 && texture.mipmaps && texture.mipmaps.length > 0 ) {\n\n\t\t\t\tfor ( let level = 0; level < texture.mipmaps.length; level ++ ) {\n\n\t\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ level ], renderTarget, texture, _gl.COLOR_ATTACHMENT0, glTextureType, level );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, texture, _gl.COLOR_ATTACHMENT0, glTextureType, 0 );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( glTextureType );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tconst supportsMips = isPowerOfTwo$1( renderTarget ) || isWebGL2;\n\n\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture : [ renderTarget.texture ];\n\n\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\tconst texture = textures[ i ];\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\t\tgenerateMipmap( target );\n\t\t\t\tstate.unbindTexture();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( ( isWebGL2 && renderTarget.samples > 0 ) && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets ? renderTarget.texture : [ renderTarget.texture ];\n\t\t\tconst width = renderTarget.width;\n\t\t\tconst height = renderTarget.height;\n\t\t\tlet mask = _gl.COLOR_BUFFER_BIT;\n\t\t\tconst invalidationArray = [];\n\t\t\tconst depthStyle = renderTarget.stencilBuffer ? _gl.DEPTH_STENCIL_ATTACHMENT : _gl.DEPTH_ATTACHMENT;\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\t\tconst isMultipleRenderTargets = ( renderTarget.isWebGLMultipleRenderTargets === true );\n\n\t\t\t// If MRT we need to remove FBO attachments\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0 + i, _gl.RENDERBUFFER, null );\n\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\t\t_gl.framebufferTexture2D( _gl.DRAW_FRAMEBUFFER, _gl.COLOR_ATTACHMENT0 + i, _gl.TEXTURE_2D, null, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( _gl.READ_FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tstate.bindFramebuffer( _gl.DRAW_FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\n\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\tinvalidationArray.push( _gl.COLOR_ATTACHMENT0 + i );\n\n\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\tinvalidationArray.push( depthStyle );\n\n\t\t\t\t}\n\n\t\t\t\tconst ignoreDepthValues = ( renderTargetProperties.__ignoreDepthValues !== undefined ) ? renderTargetProperties.__ignoreDepthValues : false;\n\n\t\t\t\tif ( ignoreDepthValues === false ) {\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) mask |= _gl.DEPTH_BUFFER_BIT;\n\t\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t\t\t}\n\n\t\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.READ_FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ignoreDepthValues === true ) {\n\n\t\t\t\t\t_gl.invalidateFramebuffer( _gl.READ_FRAMEBUFFER, [ depthStyle ] );\n\t\t\t\t\t_gl.invalidateFramebuffer( _gl.DRAW_FRAMEBUFFER, [ depthStyle ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\t\tconst webglTexture = properties.get( textures[ i ] ).__webglTexture;\n\t\t\t\t\t_gl.framebufferTexture2D( _gl.DRAW_FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D, webglTexture, 0 );\n\n\t\t\t\t}\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, _gl.NEAREST );\n\n\t\t\t\tif ( supportsInvalidateFramebuffer ) {\n\n\t\t\t\t\t_gl.invalidateFramebuffer( _gl.READ_FRAMEBUFFER, invalidationArray );\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( _gl.READ_FRAMEBUFFER, null );\n\t\t\tstate.bindFramebuffer( _gl.DRAW_FRAMEBUFFER, null );\n\n\t\t\t// If MRT since pre-blit we removed the FBO we need to reconstruct the attachments\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0 + i, _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t\tconst webglTexture = properties.get( textures[ i ] ).__webglTexture;\n\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\t\t_gl.framebufferTexture2D( _gl.DRAW_FRAMEBUFFER, _gl.COLOR_ATTACHMENT0 + i, _gl.TEXTURE_2D, webglTexture, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( _gl.DRAW_FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn Math.min( capabilities.maxSamples, renderTarget.samples );\n\n\t}\n\n\tfunction useMultisampledRTT( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\treturn isWebGL2 && renderTarget.samples > 0 && extensions.has( 'WEBGL_multisampled_render_to_texture' ) === true && renderTargetProperties.__useRenderToTexture !== false;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\tfunction verifyColorSpace( texture, image ) {\n\n\t\tconst colorSpace = texture.colorSpace;\n\t\tconst format = texture.format;\n\t\tconst type = texture.type;\n\n\t\tif ( texture.isCompressedTexture === true || texture.isVideoTexture === true || texture.format === _SRGBAFormat ) return image;\n\n\t\tif ( colorSpace !== LinearSRGBColorSpace && colorSpace !== NoColorSpace ) {\n\n\t\t\t// sRGB\n\n\t\t\tif ( ColorManagement.getTransfer( colorSpace ) === SRGBTransfer ) {\n\n\t\t\t\tif ( isWebGL2 === false ) {\n\n\t\t\t\t\t// in WebGL 1, try to use EXT_sRGB extension and unsized formats\n\n\t\t\t\t\tif ( extensions.has( 'EXT_sRGB' ) === true && format === RGBAFormat ) {\n\n\t\t\t\t\t\ttexture.format = _SRGBAFormat;\n\n\t\t\t\t\t\t// it's not possible to generate mips in WebGL 1 with this extension\n\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// slow fallback (CPU decode)\n\n\t\t\t\t\t\timage = ImageUtils.sRGBToLinear( image );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// in WebGL 2 uncompressed textures can only be sRGB encoded if they have the RGBA8 format\n\n\t\t\t\t\tif ( format !== RGBAFormat || type !== UnsignedByteType ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.WebGLTextures: Unsupported texture color space:', colorSpace );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.rebindTextures = rebindTextures;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\tthis.setupDepthRenderbuffer = setupDepthRenderbuffer;\n\tthis.setupFrameBufferTexture = setupFrameBufferTexture;\n\tthis.useMultisampledRTT = useMultisampledRTT;\n\n}\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p, colorSpace = NoColorSpace ) {\n\n\t\tlet extension;\n\n\t\tconst transfer = ColorManagement.getTransfer( colorSpace );\n\n\t\tif ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\n\n\t\tif ( p === ByteType ) return gl.BYTE;\n\t\tif ( p === ShortType ) return gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return gl.INT;\n\t\tif ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return gl.HALF_FLOAT;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return gl.ALPHA;\n\t\tif ( p === RGBAFormat ) return gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\n\n\t\t// WebGL 1 sRGB fallback\n\n\t\tif ( p === _SRGBAFormat ) {\n\n\t\t\textension = extensions.get( 'EXT_sRGB' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.SRGB_ALPHA_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedFormat ) return gl.RED;\n\t\tif ( p === RedIntegerFormat ) return gl.RED_INTEGER;\n\t\tif ( p === RGFormat ) return gl.RG;\n\t\tif ( p === RGIntegerFormat ) return gl.RG_INTEGER;\n\t\tif ( p === RGBAIntegerFormat ) return gl.RGBA_INTEGER;\n\n\t\t// S3TC\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format || p === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\tif ( transfer === SRGBTransfer ) {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc_srgb' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// PVRTC\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format || p === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ETC1\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ETC2\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ETC2 : extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC : extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ASTC\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_ASTC_4x4_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR : extension.COMPRESSED_RGBA_ASTC_4x4_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_5x4_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR : extension.COMPRESSED_RGBA_ASTC_5x4_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_5x5_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR : extension.COMPRESSED_RGBA_ASTC_5x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_6x5_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR : extension.COMPRESSED_RGBA_ASTC_6x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_6x6_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR : extension.COMPRESSED_RGBA_ASTC_6x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x5_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR : extension.COMPRESSED_RGBA_ASTC_8x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x6_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR : extension.COMPRESSED_RGBA_ASTC_8x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x8_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR : extension.COMPRESSED_RGBA_ASTC_8x8_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x5_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR : extension.COMPRESSED_RGBA_ASTC_10x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x6_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR : extension.COMPRESSED_RGBA_ASTC_10x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x8_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR : extension.COMPRESSED_RGBA_ASTC_10x8_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x10_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR : extension.COMPRESSED_RGBA_ASTC_10x10_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_12x10_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR : extension.COMPRESSED_RGBA_ASTC_12x10_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_12x12_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR : extension.COMPRESSED_RGBA_ASTC_12x12_KHR;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// BPTC\n\n\t\tif ( p === RGBA_BPTC_Format || p === RGB_BPTC_SIGNED_Format || p === RGB_BPTC_UNSIGNED_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_BPTC_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT : extension.COMPRESSED_RGBA_BPTC_UNORM_EXT;\n\t\t\t\tif ( p === RGB_BPTC_SIGNED_Format ) return extension.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;\n\t\t\t\tif ( p === RGB_BPTC_UNSIGNED_Format ) return extension.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// RGTC\n\n\t\tif ( p === RED_RGTC1_Format || p === SIGNED_RED_RGTC1_Format || p === RED_GREEN_RGTC2_Format || p === SIGNED_RED_GREEN_RGTC2_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_rgtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_BPTC_Format ) return extension.COMPRESSED_RED_RGTC1_EXT;\n\t\t\t\tif ( p === SIGNED_RED_RGTC1_Format ) return extension.COMPRESSED_SIGNED_RED_RGTC1_EXT;\n\t\t\t\tif ( p === RED_GREEN_RGTC2_Format ) return extension.COMPRESSED_RED_GREEN_RGTC2_EXT;\n\t\t\t\tif ( p === SIGNED_RED_GREEN_RGTC2_Format ) return extension.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return gl.UNSIGNED_INT_24_8;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// if \"p\" can't be resolved, assume the user defines a WebGL constant as a string (fallback/workaround for packed RGB formats)\n\n\t\treturn ( gl[ p ] !== undefined ) ? gl[ p ] : null;\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\nclass ArrayCamera extends PerspectiveCamera {\n\n\tconstructor( array = [] ) {\n\n\t\tsuper();\n\n\t\tthis.isArrayCamera = true;\n\n\t\tthis.cameras = array;\n\n\t}\n\n}\n\nclass Group extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isGroup = true;\n\n\t\tthis.type = 'Group';\n\n\t}\n\n}\n\nconst _moveEvent = { type: 'move' };\n\nclass WebXRController {\n\n\tconstructor() {\n\n\t\tthis._targetRay = null;\n\t\tthis._grip = null;\n\t\tthis._hand = null;\n\n\t}\n\n\tgetHandSpace() {\n\n\t\tif ( this._hand === null ) {\n\n\t\t\tthis._hand = new Group();\n\t\t\tthis._hand.matrixAutoUpdate = false;\n\t\t\tthis._hand.visible = false;\n\n\t\t\tthis._hand.joints = {};\n\t\t\tthis._hand.inputState = { pinching: false };\n\n\t\t}\n\n\t\treturn this._hand;\n\n\t}\n\n\tgetTargetRaySpace() {\n\n\t\tif ( this._targetRay === null ) {\n\n\t\t\tthis._targetRay = new Group();\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\n\t\t\tthis._targetRay.visible = false;\n\t\t\tthis._targetRay.hasLinearVelocity = false;\n\t\t\tthis._targetRay.linearVelocity = new Vector3();\n\t\t\tthis._targetRay.hasAngularVelocity = false;\n\t\t\tthis._targetRay.angularVelocity = new Vector3();\n\n\t\t}\n\n\t\treturn this._targetRay;\n\n\t}\n\n\tgetGripSpace() {\n\n\t\tif ( this._grip === null ) {\n\n\t\t\tthis._grip = new Group();\n\t\t\tthis._grip.matrixAutoUpdate = false;\n\t\t\tthis._grip.visible = false;\n\t\t\tthis._grip.hasLinearVelocity = false;\n\t\t\tthis._grip.linearVelocity = new Vector3();\n\t\t\tthis._grip.hasAngularVelocity = false;\n\t\t\tthis._grip.angularVelocity = new Vector3();\n\n\t\t}\n\n\t\treturn this._grip;\n\n\t}\n\n\tdispatchEvent( event ) {\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.dispatchEvent( event );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tconnect( inputSource ) {\n\n\t\tif ( inputSource && inputSource.hand ) {\n\n\t\t\tconst hand = this._hand;\n\n\t\t\tif ( hand ) {\n\n\t\t\t\tfor ( const inputjoint of inputSource.hand.values() ) {\n\n\t\t\t\t\t// Initialize hand with joints when connected\n\t\t\t\t\tthis._getHandJoint( hand, inputjoint );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect( inputSource ) {\n\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.visible = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tupdate( inputSource, frame, referenceSpace ) {\n\n\t\tlet inputPose = null;\n\t\tlet gripPose = null;\n\t\tlet handPose = null;\n\n\t\tconst targetRay = this._targetRay;\n\t\tconst grip = this._grip;\n\t\tconst hand = this._hand;\n\n\t\tif ( inputSource && frame.session.visibilityState !== 'visible-blurred' ) {\n\n\t\t\tif ( hand && inputSource.hand ) {\n\n\t\t\t\thandPose = true;\n\n\t\t\t\tfor ( const inputjoint of inputSource.hand.values() ) {\n\n\t\t\t\t\t// Update the joints groups with the XRJoint poses\n\t\t\t\t\tconst jointPose = frame.getJointPose( inputjoint, referenceSpace );\n\n\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\n\t\t\t\t\tconst joint = this._getHandJoint( hand, inputjoint );\n\n\t\t\t\t\tif ( jointPose !== null ) {\n\n\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\n\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\n\t\t\t\t\t\tjoint.matrixWorldNeedsUpdate = true;\n\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tjoint.visible = jointPose !== null;\n\n\t\t\t\t}\n\n\t\t\t\t// Custom events\n\n\t\t\t\t// Check pinchz\n\t\t\t\tconst indexTip = hand.joints[ 'index-finger-tip' ];\n\t\t\t\tconst thumbTip = hand.joints[ 'thumb-tip' ];\n\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\n\n\t\t\t\tconst distanceToPinch = 0.02;\n\t\t\t\tconst threshold = 0.005;\n\n\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = false;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchend',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = true;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchstart',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\n\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\n\t\t\t\t\t\tgrip.matrixWorldNeedsUpdate = true;\n\n\t\t\t\t\t\tif ( gripPose.linearVelocity ) {\n\n\t\t\t\t\t\t\tgrip.hasLinearVelocity = true;\n\t\t\t\t\t\t\tgrip.linearVelocity.copy( gripPose.linearVelocity );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgrip.hasLinearVelocity = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( gripPose.angularVelocity ) {\n\n\t\t\t\t\t\t\tgrip.hasAngularVelocity = true;\n\t\t\t\t\t\t\tgrip.angularVelocity.copy( gripPose.angularVelocity );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgrip.hasAngularVelocity = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( targetRay !== null ) {\n\n\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\t// Some runtimes (namely Vive Cosmos with Vive OpenXR Runtime) have only grip space and ray space is equal to it\n\t\t\t\tif ( inputPose === null && gripPose !== null ) {\n\n\t\t\t\t\tinputPose = gripPose;\n\n\t\t\t\t}\n\n\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\n\t\t\t\t\ttargetRay.matrixWorldNeedsUpdate = true;\n\n\t\t\t\t\tif ( inputPose.linearVelocity ) {\n\n\t\t\t\t\t\ttargetRay.hasLinearVelocity = true;\n\t\t\t\t\t\ttargetRay.linearVelocity.copy( inputPose.linearVelocity );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetRay.hasLinearVelocity = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( inputPose.angularVelocity ) {\n\n\t\t\t\t\t\ttargetRay.hasAngularVelocity = true;\n\t\t\t\t\t\ttargetRay.angularVelocity.copy( inputPose.angularVelocity );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetRay.hasAngularVelocity = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchEvent( _moveEvent );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tif ( targetRay !== null ) {\n\n\t\t\ttargetRay.visible = ( inputPose !== null );\n\n\t\t}\n\n\t\tif ( grip !== null ) {\n\n\t\t\tgrip.visible = ( gripPose !== null );\n\n\t\t}\n\n\t\tif ( hand !== null ) {\n\n\t\t\thand.visible = ( handPose !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// private method\n\n\t_getHandJoint( hand, inputjoint ) {\n\n\t\tif ( hand.joints[ inputjoint.jointName ] === undefined ) {\n\n\t\t\tconst joint = new Group();\n\t\t\tjoint.matrixAutoUpdate = false;\n\t\t\tjoint.visible = false;\n\t\t\thand.joints[ inputjoint.jointName ] = joint;\n\n\t\t\thand.add( joint );\n\n\t\t}\n\n\t\treturn hand.joints[ inputjoint.jointName ];\n\n\t}\n\n}\n\nconst _occlusion_vertex = `\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}`;\n\nconst _occlusion_fragment = `\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}`;\n\nclass WebXRDepthSensing {\n\n\tconstructor() {\n\n\t\tthis.texture = null;\n\t\tthis.mesh = null;\n\n\t\tthis.depthNear = 0;\n\t\tthis.depthFar = 0;\n\n\t}\n\n\tinit( renderer, depthData, renderState ) {\n\n\t\tif ( this.texture === null ) {\n\n\t\t\tconst texture = new Texture();\n\n\t\t\tconst texProps = renderer.properties.get( texture );\n\t\t\ttexProps.__webglTexture = depthData.texture;\n\n\t\t\tif ( ( depthData.depthNear != renderState.depthNear ) || ( depthData.depthFar != renderState.depthFar ) ) {\n\n\t\t\t\tthis.depthNear = depthData.depthNear;\n\t\t\t\tthis.depthFar = depthData.depthFar;\n\n\t\t\t}\n\n\t\t\tthis.texture = texture;\n\n\t\t}\n\n\t}\n\n\trender( renderer, cameraXR ) {\n\n\t\tif ( this.texture !== null ) {\n\n\t\t\tif ( this.mesh === null ) {\n\n\t\t\t\tconst viewport = cameraXR.cameras[ 0 ].viewport;\n\t\t\t\tconst material = new ShaderMaterial( {\n\t\t\t\t\textensions: { fragDepth: true },\n\t\t\t\t\tvertexShader: _occlusion_vertex,\n\t\t\t\t\tfragmentShader: _occlusion_fragment,\n\t\t\t\t\tuniforms: {\n\t\t\t\t\t\tdepthColor: { value: this.texture },\n\t\t\t\t\t\tdepthWidth: { value: viewport.z },\n\t\t\t\t\t\tdepthHeight: { value: viewport.w }\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tthis.mesh = new Mesh( new PlaneGeometry( 20, 20 ), material );\n\n\t\t\t}\n\n\t\t\trenderer.render( this.mesh, cameraXR );\n\n\t\t}\n\n\t}\n\n\treset() {\n\n\t\tthis.texture = null;\n\t\tthis.mesh = null;\n\n\t}\n\n}\n\nclass WebXRManager extends EventDispatcher {\n\n\tconstructor( renderer, gl ) {\n\n\t\tsuper();\n\n\t\tconst scope = this;\n\n\t\tlet session = null;\n\n\t\tlet framebufferScaleFactor = 1.0;\n\n\t\tlet referenceSpace = null;\n\t\tlet referenceSpaceType = 'local-floor';\n\t\t// Set default foveation to maximum.\n\t\tlet foveation = 1.0;\n\t\tlet customReferenceSpace = null;\n\n\t\tlet pose = null;\n\t\tlet glBinding = null;\n\t\tlet glProjLayer = null;\n\t\tlet glBaseLayer = null;\n\t\tlet xrFrame = null;\n\n\t\tconst depthSensing = new WebXRDepthSensing();\n\t\tconst attributes = gl.getContextAttributes();\n\n\t\tlet initialRenderTarget = null;\n\t\tlet newRenderTarget = null;\n\n\t\tconst controllers = [];\n\t\tconst controllerInputSources = [];\n\n\t\tconst currentSize = new Vector2();\n\t\tlet currentPixelRatio = null;\n\n\t\t//\n\n\t\tconst cameraL = new PerspectiveCamera();\n\t\tcameraL.layers.enable( 1 );\n\t\tcameraL.viewport = new Vector4();\n\n\t\tconst cameraR = new PerspectiveCamera();\n\t\tcameraR.layers.enable( 2 );\n\t\tcameraR.viewport = new Vector4();\n\n\t\tconst cameras = [ cameraL, cameraR ];\n\n\t\tconst cameraXR = new ArrayCamera();\n\t\tcameraXR.layers.enable( 1 );\n\t\tcameraXR.layers.enable( 2 );\n\n\t\tlet _currentDepthNear = null;\n\t\tlet _currentDepthFar = null;\n\n\t\t//\n\n\t\tthis.cameraAutoUpdate = true;\n\t\tthis.enabled = false;\n\n\t\tthis.isPresenting = false;\n\n\t\tthis.getController = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getTargetRaySpace();\n\n\t\t};\n\n\t\tthis.getControllerGrip = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getGripSpace();\n\n\t\t};\n\n\t\tthis.getHand = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getHandSpace();\n\n\t\t};\n\n\t\t//\n\n\t\tfunction onSessionEvent( event ) {\n\n\t\t\tconst controllerIndex = controllerInputSources.indexOf( event.inputSource );\n\n\t\t\tif ( controllerIndex === - 1 ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst controller = controllers[ controllerIndex ];\n\n\t\t\tif ( controller !== undefined ) {\n\n\t\t\t\tcontroller.update( event.inputSource, event.frame, customReferenceSpace || referenceSpace );\n\t\t\t\tcontroller.dispatchEvent( { type: event.type, data: event.inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onSessionEnd() {\n\n\t\t\tsession.removeEventListener( 'select', onSessionEvent );\n\t\t\tsession.removeEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.removeEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.removeEventListener( 'end', onSessionEnd );\n\t\t\tsession.removeEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\tconst inputSource = controllerInputSources[ i ];\n\n\t\t\t\tif ( inputSource === null ) continue;\n\n\t\t\t\tcontrollerInputSources[ i ] = null;\n\n\t\t\t\tcontrollers[ i ].disconnect( inputSource );\n\n\t\t\t}\n\n\t\t\t_currentDepthNear = null;\n\t\t\t_currentDepthFar = null;\n\n\t\t\tdepthSensing.reset();\n\n\t\t\t// restore framebuffer/rendering state\n\n\t\t\trenderer.setRenderTarget( initialRenderTarget );\n\n\t\t\tglBaseLayer = null;\n\t\t\tglProjLayer = null;\n\t\t\tglBinding = null;\n\t\t\tsession = null;\n\t\t\tnewRenderTarget = null;\n\n\t\t\t//\n\n\t\t\tanimation.stop();\n\n\t\t\tscope.isPresenting = false;\n\n\t\t\trenderer.setPixelRatio( currentPixelRatio );\n\t\t\trenderer.setSize( currentSize.width, currentSize.height, false );\n\n\t\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t\t}\n\n\t\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\t\tframebufferScaleFactor = value;\n\n\t\t\tif ( scope.isPresenting === true ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\t\treferenceSpaceType = value;\n\n\t\t\tif ( scope.isPresenting === true ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getReferenceSpace = function () {\n\n\t\t\treturn customReferenceSpace || referenceSpace;\n\n\t\t};\n\n\t\tthis.setReferenceSpace = function ( space ) {\n\n\t\t\tcustomReferenceSpace = space;\n\n\t\t};\n\n\t\tthis.getBaseLayer = function () {\n\n\t\t\treturn glProjLayer !== null ? glProjLayer : glBaseLayer;\n\n\t\t};\n\n\t\tthis.getBinding = function () {\n\n\t\t\treturn glBinding;\n\n\t\t};\n\n\t\tthis.getFrame = function () {\n\n\t\t\treturn xrFrame;\n\n\t\t};\n\n\t\tthis.getSession = function () {\n\n\t\t\treturn session;\n\n\t\t};\n\n\t\tthis.setSession = async function ( value ) {\n\n\t\t\tsession = value;\n\n\t\t\tif ( session !== null ) {\n\n\t\t\t\tinitialRenderTarget = renderer.getRenderTarget();\n\n\t\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\t\t\t\tsession.addEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\t\tif ( attributes.xrCompatible !== true ) {\n\n\t\t\t\t\tawait gl.makeXRCompatible();\n\n\t\t\t\t}\n\n\t\t\t\tcurrentPixelRatio = renderer.getPixelRatio();\n\t\t\t\trenderer.getSize( currentSize );\n\n\t\t\t\tif ( ( session.renderState.layers === undefined ) || ( renderer.capabilities.isWebGL2 === false ) ) {\n\n\t\t\t\t\tconst layerInit = {\n\t\t\t\t\t\tantialias: ( session.renderState.layers === undefined ) ? attributes.antialias : true,\n\t\t\t\t\t\talpha: true,\n\t\t\t\t\t\tdepth: attributes.depth,\n\t\t\t\t\t\tstencil: attributes.stencil,\n\t\t\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t\t\t};\n\n\t\t\t\t\tglBaseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\t\t\tsession.updateRenderState( { baseLayer: glBaseLayer } );\n\n\t\t\t\t\trenderer.setPixelRatio( 1 );\n\t\t\t\t\trenderer.setSize( glBaseLayer.framebufferWidth, glBaseLayer.framebufferHeight, false );\n\n\t\t\t\t\tnewRenderTarget = new WebGLRenderTarget(\n\t\t\t\t\t\tglBaseLayer.framebufferWidth,\n\t\t\t\t\t\tglBaseLayer.framebufferHeight,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformat: RGBAFormat,\n\t\t\t\t\t\t\ttype: UnsignedByteType,\n\t\t\t\t\t\t\tcolorSpace: renderer.outputColorSpace,\n\t\t\t\t\t\t\tstencilBuffer: attributes.stencil\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlet depthFormat = null;\n\t\t\t\t\tlet depthType = null;\n\t\t\t\t\tlet glDepthFormat = null;\n\n\t\t\t\t\tif ( attributes.depth ) {\n\n\t\t\t\t\t\tglDepthFormat = attributes.stencil ? gl.DEPTH24_STENCIL8 : gl.DEPTH_COMPONENT24;\n\t\t\t\t\t\tdepthFormat = attributes.stencil ? DepthStencilFormat : DepthFormat;\n\t\t\t\t\t\tdepthType = attributes.stencil ? UnsignedInt248Type : UnsignedIntType;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst projectionlayerInit = {\n\t\t\t\t\t\tcolorFormat: gl.RGBA8,\n\t\t\t\t\t\tdepthFormat: glDepthFormat,\n\t\t\t\t\t\tscaleFactor: framebufferScaleFactor\n\t\t\t\t\t};\n\n\t\t\t\t\tglBinding = new XRWebGLBinding( session, gl );\n\n\t\t\t\t\tglProjLayer = glBinding.createProjectionLayer( projectionlayerInit );\n\n\t\t\t\t\tsession.updateRenderState( { layers: [ glProjLayer ] } );\n\n\t\t\t\t\trenderer.setPixelRatio( 1 );\n\t\t\t\t\trenderer.setSize( glProjLayer.textureWidth, glProjLayer.textureHeight, false );\n\n\t\t\t\t\tnewRenderTarget = new WebGLRenderTarget(\n\t\t\t\t\t\tglProjLayer.textureWidth,\n\t\t\t\t\t\tglProjLayer.textureHeight,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformat: RGBAFormat,\n\t\t\t\t\t\t\ttype: UnsignedByteType,\n\t\t\t\t\t\t\tdepthTexture: new DepthTexture( glProjLayer.textureWidth, glProjLayer.textureHeight, depthType, undefined, undefined, undefined, undefined, undefined, undefined, depthFormat ),\n\t\t\t\t\t\t\tstencilBuffer: attributes.stencil,\n\t\t\t\t\t\t\tcolorSpace: renderer.outputColorSpace,\n\t\t\t\t\t\t\tsamples: attributes.antialias ? 4 : 0\n\t\t\t\t\t\t} );\n\n\t\t\t\t\tconst renderTargetProperties = renderer.properties.get( newRenderTarget );\n\t\t\t\t\trenderTargetProperties.__ignoreDepthValues = glProjLayer.ignoreDepthValues;\n\n\t\t\t\t}\n\n\t\t\t\tnewRenderTarget.isXRRenderTarget = true; // TODO Remove this when possible, see #23278\n\n\t\t\t\tthis.setFoveation( foveation );\n\n\t\t\t\tcustomReferenceSpace = null;\n\t\t\t\treferenceSpace = await session.requestReferenceSpace( referenceSpaceType );\n\n\t\t\t\tanimation.setContext( session );\n\t\t\t\tanimation.start();\n\n\t\t\t\tscope.isPresenting = true;\n\n\t\t\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getEnvironmentBlendMode = function () {\n\n\t\t\tif ( session !== null ) {\n\n\t\t\t\treturn session.environmentBlendMode;\n\n\t\t\t}\n\n\t\t};\n\n\t\tfunction onInputSourcesChange( event ) {\n\n\t\t\t// Notify disconnected\n\n\t\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\t\tconst inputSource = event.removed[ i ];\n\t\t\t\tconst index = controllerInputSources.indexOf( inputSource );\n\n\t\t\t\tif ( index >= 0 ) {\n\n\t\t\t\t\tcontrollerInputSources[ index ] = null;\n\t\t\t\t\tcontrollers[ index ].disconnect( inputSource );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Notify connected\n\n\t\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\n\n\t\t\t\tconst inputSource = event.added[ i ];\n\n\t\t\t\tlet controllerIndex = controllerInputSources.indexOf( inputSource );\n\n\t\t\t\tif ( controllerIndex === - 1 ) {\n\n\t\t\t\t\t// Assign input source a controller that currently has no input source\n\n\t\t\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\t\t\tif ( i >= controllerInputSources.length ) {\n\n\t\t\t\t\t\t\tcontrollerInputSources.push( inputSource );\n\t\t\t\t\t\t\tcontrollerIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t} else if ( controllerInputSources[ i ] === null ) {\n\n\t\t\t\t\t\t\tcontrollerInputSources[ i ] = inputSource;\n\t\t\t\t\t\t\tcontrollerIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// If all controllers do currently receive input we ignore new ones\n\n\t\t\t\t\tif ( controllerIndex === - 1 ) break;\n\n\t\t\t\t}\n\n\t\t\t\tconst controller = controllers[ controllerIndex ];\n\n\t\t\t\tif ( controller ) {\n\n\t\t\t\t\tcontroller.connect( inputSource );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst cameraLPos = new Vector3();\n\t\tconst cameraRPos = new Vector3();\n\n\t\t/**\n\t\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t\t * the cameras' projection and world matrices have already been set.\n\t\t * And that near and far planes are identical for both cameras.\n\t\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t\t */\n\t\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\t\tconst projL = cameraL.projectionMatrix.elements;\n\t\t\tconst projR = cameraR.projectionMatrix.elements;\n\n\t\t\t// VR systems will have identical far and near planes, and\n\t\t\t// most likely identical top and bottom frustum extents.\n\t\t\t// Use the left camera for these values.\n\t\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\t\tconst left = near * leftFov;\n\t\t\tconst right = near * rightFov;\n\n\t\t\t// Calculate the new camera's position offset from the\n\t\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\t\tconst zOffset = ipd / ( - leftFov + rightFov );\n\t\t\tconst xOffset = zOffset * - leftFov;\n\n\t\t\t// TODO: Better way to apply this offset?\n\t\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.translateX( xOffset );\n\t\t\tcamera.translateZ( zOffset );\n\t\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t\t// Find the union of the frustum values of the cameras and scale\n\t\t\t// the values so that the near plane's position does not change in world space,\n\t\t\t// although must now be relative to the new union camera.\n\t\t\tconst near2 = near + zOffset;\n\t\t\tconst far2 = far + zOffset;\n\t\t\tconst left2 = left - xOffset;\n\t\t\tconst right2 = right + ( ipd - xOffset );\n\t\t\tconst top2 = topFov * far / far2 * near2;\n\t\t\tconst bottom2 = bottomFov * far / far2 * near2;\n\n\t\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\t\t\tcamera.projectionMatrixInverse.copy( camera.projectionMatrix ).invert();\n\n\t\t}\n\n\t\tfunction updateCamera( camera, parent ) {\n\n\t\t\tif ( parent === null ) {\n\n\t\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t\t}\n\n\t\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t}\n\n\t\tthis.updateCamera = function ( camera ) {\n\n\t\t\tif ( session === null ) return;\n\n\t\t\tif ( depthSensing.texture !== null ) {\n\n\t\t\t\tcamera.near = depthSensing.depthNear;\n\t\t\t\tcamera.far = depthSensing.depthFar;\n\n\t\t\t}\n\n\t\t\tcameraXR.near = cameraR.near = cameraL.near = camera.near;\n\t\t\tcameraXR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\t\tif ( _currentDepthNear !== cameraXR.near || _currentDepthFar !== cameraXR.far ) {\n\n\t\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\t\tsession.updateRenderState( {\n\t\t\t\t\tdepthNear: cameraXR.near,\n\t\t\t\t\tdepthFar: cameraXR.far\n\t\t\t\t} );\n\n\t\t\t\t_currentDepthNear = cameraXR.near;\n\t\t\t\t_currentDepthFar = cameraXR.far;\n\n\t\t\t\tcameraL.near = _currentDepthNear;\n\t\t\t\tcameraL.far = _currentDepthFar;\n\t\t\t\tcameraR.near = _currentDepthNear;\n\t\t\t\tcameraR.far = _currentDepthFar;\n\n\t\t\t\tcameraL.updateProjectionMatrix();\n\t\t\t\tcameraR.updateProjectionMatrix();\n\t\t\t\tcamera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tconst parent = camera.parent;\n\t\t\tconst cameras = cameraXR.cameras;\n\n\t\t\tupdateCamera( cameraXR, parent );\n\n\t\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\n\n\t\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t\t}\n\n\t\t\t// update projection matrix for proper view frustum culling\n\n\t\t\tif ( cameras.length === 2 ) {\n\n\t\t\t\tsetProjectionFromUnion( cameraXR, cameraL, cameraR );\n\n\t\t\t} else {\n\n\t\t\t\t// assume single camera setup (AR)\n\n\t\t\t\tcameraXR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t\t}\n\n\t\t\t// update user camera and its children\n\n\t\t\tupdateUserCamera( camera, cameraXR, parent );\n\n\t\t};\n\n\t\tfunction updateUserCamera( camera, cameraXR, parent ) {\n\n\t\t\tif ( parent === null ) {\n\n\t\t\t\tcamera.matrix.copy( cameraXR.matrixWorld );\n\n\t\t\t} else {\n\n\t\t\t\tcamera.matrix.copy( parent.matrixWorld );\n\t\t\t\tcamera.matrix.invert();\n\t\t\t\tcamera.matrix.multiply( cameraXR.matrixWorld );\n\n\t\t\t}\n\n\t\t\tcamera.matrix.decompose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.updateMatrixWorld( true );\n\n\t\t\tcamera.projectionMatrix.copy( cameraXR.projectionMatrix );\n\t\t\tcamera.projectionMatrixInverse.copy( cameraXR.projectionMatrixInverse );\n\n\t\t\tif ( camera.isPerspectiveCamera ) {\n\n\t\t\t\tcamera.fov = RAD2DEG * 2 * Math.atan( 1 / camera.projectionMatrix.elements[ 5 ] );\n\t\t\t\tcamera.zoom = 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.getCamera = function () {\n\n\t\t\treturn cameraXR;\n\n\t\t};\n\n\t\tthis.getFoveation = function () {\n\n\t\t\tif ( glProjLayer === null && glBaseLayer === null ) {\n\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\treturn foveation;\n\n\t\t};\n\n\t\tthis.setFoveation = function ( value ) {\n\n\t\t\t// 0 = no foveation = full resolution\n\t\t\t// 1 = maximum foveation = the edges render at lower resolution\n\n\t\t\tfoveation = value;\n\n\t\t\tif ( glProjLayer !== null ) {\n\n\t\t\t\tglProjLayer.fixedFoveation = value;\n\n\t\t\t}\n\n\t\t\tif ( glBaseLayer !== null && glBaseLayer.fixedFoveation !== undefined ) {\n\n\t\t\t\tglBaseLayer.fixedFoveation = value;\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.hasDepthSensing = function () {\n\n\t\t\treturn depthSensing.texture !== null;\n\n\t\t};\n\n\t\t// Animation Loop\n\n\t\tlet onAnimationFrameCallback = null;\n\n\t\tfunction onAnimationFrame( time, frame ) {\n\n\t\t\tpose = frame.getViewerPose( customReferenceSpace || referenceSpace );\n\t\t\txrFrame = frame;\n\n\t\t\tif ( pose !== null ) {\n\n\t\t\t\tconst views = pose.views;\n\n\t\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\t\trenderer.setRenderTargetFramebuffer( newRenderTarget, glBaseLayer.framebuffer );\n\t\t\t\t\trenderer.setRenderTarget( newRenderTarget );\n\n\t\t\t\t}\n\n\t\t\t\tlet cameraXRNeedsUpdate = false;\n\n\t\t\t\t// check if it's necessary to rebuild cameraXR's camera list\n\n\t\t\t\tif ( views.length !== cameraXR.cameras.length ) {\n\n\t\t\t\t\tcameraXR.cameras.length = 0;\n\t\t\t\t\tcameraXRNeedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\n\n\t\t\t\t\tconst view = views[ i ];\n\n\t\t\t\t\tlet viewport = null;\n\n\t\t\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\t\t\tviewport = glBaseLayer.getViewport( view );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst glSubImage = glBinding.getViewSubImage( glProjLayer, view );\n\t\t\t\t\t\tviewport = glSubImage.viewport;\n\n\t\t\t\t\t\t// For side-by-side projection, we only produce a single texture for both eyes.\n\t\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\t\trenderer.setRenderTargetTextures(\n\t\t\t\t\t\t\t\tnewRenderTarget,\n\t\t\t\t\t\t\t\tglSubImage.colorTexture,\n\t\t\t\t\t\t\t\tglProjLayer.ignoreDepthValues ? undefined : glSubImage.depthStencilTexture );\n\n\t\t\t\t\t\t\trenderer.setRenderTarget( newRenderTarget );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet camera = cameras[ i ];\n\n\t\t\t\t\tif ( camera === undefined ) {\n\n\t\t\t\t\t\tcamera = new PerspectiveCamera();\n\t\t\t\t\t\tcamera.layers.enable( i );\n\t\t\t\t\t\tcamera.viewport = new Vector4();\n\t\t\t\t\t\tcameras[ i ] = camera;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\t\tcamera.matrix.decompose( camera.position, camera.quaternion, camera.scale );\n\t\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\t\tcamera.projectionMatrixInverse.copy( camera.projectionMatrix ).invert();\n\t\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\tcameraXR.matrix.copy( camera.matrix );\n\t\t\t\t\t\tcameraXR.matrix.decompose( cameraXR.position, cameraXR.quaternion, cameraXR.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( cameraXRNeedsUpdate === true ) {\n\n\t\t\t\t\t\tcameraXR.cameras.push( camera );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tconst enabledFeatures = session.enabledFeatures;\n\n\t\t\t\tif ( enabledFeatures && enabledFeatures.includes( 'depth-sensing' ) ) {\n\n\t\t\t\t\tconst depthData = glBinding.getDepthInformation( views[ 0 ] );\n\n\t\t\t\t\tif ( depthData && depthData.isValid && depthData.texture ) {\n\n\t\t\t\t\t\tdepthSensing.init( renderer, depthData, session.renderState );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\tconst inputSource = controllerInputSources[ i ];\n\t\t\t\tconst controller = controllers[ i ];\n\n\t\t\t\tif ( inputSource !== null && controller !== undefined ) {\n\n\t\t\t\t\tcontroller.update( inputSource, frame, customReferenceSpace || referenceSpace );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tdepthSensing.render( renderer, cameraXR );\n\n\t\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t\t\tif ( frame.detectedPlanes ) {\n\n\t\t\t\tscope.dispatchEvent( { type: 'planesdetected', data: frame } );\n\n\t\t\t}\n\n\t\t\txrFrame = null;\n\n\t\t}\n\n\t\tconst animation = new WebGLAnimation();\n\n\t\tanimation.setAnimationLoop( onAnimationFrame );\n\n\t\tthis.setAnimationLoop = function ( callback ) {\n\n\t\t\tonAnimationFrameCallback = callback;\n\n\t\t};\n\n\t\tthis.dispose = function () {};\n\n\t}\n\n}\n\nfunction WebGLMaterials( renderer, properties ) {\n\n\tfunction refreshTransformUniform( map, uniform ) {\n\n\t\tif ( map.matrixAutoUpdate === true ) {\n\n\t\t\tmap.updateMatrix();\n\n\t\t}\n\n\t\tuniform.value.copy( map.matrix );\n\n\t}\n\n\tfunction refreshFogUniforms( uniforms, fog ) {\n\n\t\tfog.color.getRGB( uniforms.fogColor.value, getUnlitUniformColorSpace( renderer ) );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms( uniforms, material, pixelRatio, height, transmissionRenderTarget ) {\n\n\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsToon( uniforms, material );\n\n\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsStandard( uniforms, material );\n\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( uniforms, material, transmissionRenderTarget );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsMatcap( uniforms, material );\n\n\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDistance( uniforms, material );\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\trefreshUniformsLine( uniforms, material );\n\n\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsDash( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\n\n\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\trefreshUniformsSprites( uniforms, material );\n\n\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\tuniforms.color.value.copy( material.color );\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if ( material.isShaderMaterial ) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t\trefreshTransformUniform( material.map, uniforms.mapTransform );\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t\trefreshTransformUniform( material.alphaMap, uniforms.alphaMapTransform );\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\n\t\t\trefreshTransformUniform( material.bumpMap, uniforms.bumpMapTransform );\n\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.bumpScale.value *= - 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\n\t\t\trefreshTransformUniform( material.normalMap, uniforms.normalMapTransform );\n\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.normalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\n\t\t\trefreshTransformUniform( material.displacementMap, uniforms.displacementMapTransform );\n\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t\trefreshTransformUniform( material.emissiveMap, uniforms.emissiveMapTransform );\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t\trefreshTransformUniform( material.specularMap, uniforms.specularMapTransform );\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.ior.value = material.ior;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\n\t\t\t// artist-friendly light intensity scaling factor\n\t\t\tconst scaleFactor = ( renderer._useLegacyLights === true ) ? Math.PI : 1;\n\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity * scaleFactor;\n\n\t\t\trefreshTransformUniform( material.lightMap, uniforms.lightMapTransform );\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t\trefreshTransformUniform( material.aoMap, uniforms.aoMapTransform );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t\trefreshTransformUniform( material.map, uniforms.mapTransform );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t\trefreshTransformUniform( material.map, uniforms.uvTransform );\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t\trefreshTransformUniform( material.alphaMap, uniforms.alphaMapTransform );\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t\trefreshTransformUniform( material.map, uniforms.mapTransform );\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t\trefreshTransformUniform( material.alphaMap, uniforms.alphaMapTransform );\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t\trefreshTransformUniform( material.metalnessMap, uniforms.metalnessMapTransform );\n\n\t\t}\n\n\t\tuniforms.roughness.value = material.roughness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t\trefreshTransformUniform( material.roughnessMap, uniforms.roughnessMapTransform );\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material, transmissionRenderTarget ) {\n\n\t\tuniforms.ior.value = material.ior; // also part of uniforms common\n\n\t\tif ( material.sheen > 0 ) {\n\n\t\t\tuniforms.sheenColor.value.copy( material.sheenColor ).multiplyScalar( material.sheen );\n\n\t\t\tuniforms.sheenRoughness.value = material.sheenRoughness;\n\n\t\t\tif ( material.sheenColorMap ) {\n\n\t\t\t\tuniforms.sheenColorMap.value = material.sheenColorMap;\n\n\t\t\t\trefreshTransformUniform( material.sheenColorMap, uniforms.sheenColorMapTransform );\n\n\t\t\t}\n\n\t\t\tif ( material.sheenRoughnessMap ) {\n\n\t\t\t\tuniforms.sheenRoughnessMap.value = material.sheenRoughnessMap;\n\n\t\t\t\trefreshTransformUniform( material.sheenRoughnessMap, uniforms.sheenRoughnessMapTransform );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.clearcoat > 0 ) {\n\n\t\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\n\t\t\tif ( material.clearcoatMap ) {\n\n\t\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t\t\trefreshTransformUniform( material.clearcoatMap, uniforms.clearcoatMapTransform );\n\n\t\t\t}\n\n\t\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t\t\trefreshTransformUniform( material.clearcoatRoughnessMap, uniforms.clearcoatRoughnessMapTransform );\n\n\t\t\t}\n\n\t\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\t\trefreshTransformUniform( material.clearcoatNormalMap, uniforms.clearcoatNormalMapTransform );\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\n\t\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.iridescence > 0 ) {\n\n\t\t\tuniforms.iridescence.value = material.iridescence;\n\t\t\tuniforms.iridescenceIOR.value = material.iridescenceIOR;\n\t\t\tuniforms.iridescenceThicknessMinimum.value = material.iridescenceThicknessRange[ 0 ];\n\t\t\tuniforms.iridescenceThicknessMaximum.value = material.iridescenceThicknessRange[ 1 ];\n\n\t\t\tif ( material.iridescenceMap ) {\n\n\t\t\t\tuniforms.iridescenceMap.value = material.iridescenceMap;\n\n\t\t\t\trefreshTransformUniform( material.iridescenceMap, uniforms.iridescenceMapTransform );\n\n\t\t\t}\n\n\t\t\tif ( material.iridescenceThicknessMap ) {\n\n\t\t\t\tuniforms.iridescenceThicknessMap.value = material.iridescenceThicknessMap;\n\n\t\t\t\trefreshTransformUniform( material.iridescenceThicknessMap, uniforms.iridescenceThicknessMapTransform );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.transmission > 0 ) {\n\n\t\t\tuniforms.transmission.value = material.transmission;\n\t\t\tuniforms.transmissionSamplerMap.value = transmissionRenderTarget.texture;\n\t\t\tuniforms.transmissionSamplerSize.value.set( transmissionRenderTarget.width, transmissionRenderTarget.height );\n\n\t\t\tif ( material.transmissionMap ) {\n\n\t\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\n\n\t\t\t\trefreshTransformUniform( material.transmissionMap, uniforms.transmissionMapTransform );\n\n\t\t\t}\n\n\t\t\tuniforms.thickness.value = material.thickness;\n\n\t\t\tif ( material.thicknessMap ) {\n\n\t\t\t\tuniforms.thicknessMap.value = material.thicknessMap;\n\n\t\t\t\trefreshTransformUniform( material.thicknessMap, uniforms.thicknessMapTransform );\n\n\t\t\t}\n\n\t\t\tuniforms.attenuationDistance.value = material.attenuationDistance;\n\t\t\tuniforms.attenuationColor.value.copy( material.attenuationColor );\n\n\t\t}\n\n\t\tif ( material.anisotropy > 0 ) {\n\n\t\t\tuniforms.anisotropyVector.value.set( material.anisotropy * Math.cos( material.anisotropyRotation ), material.anisotropy * Math.sin( material.anisotropyRotation ) );\n\n\t\t\tif ( material.anisotropyMap ) {\n\n\t\t\t\tuniforms.anisotropyMap.value = material.anisotropyMap;\n\n\t\t\t\trefreshTransformUniform( material.anisotropyMap, uniforms.anisotropyMapTransform );\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.specularIntensity.value = material.specularIntensity;\n\t\tuniforms.specularColor.value.copy( material.specularColor );\n\n\t\tif ( material.specularColorMap ) {\n\n\t\t\tuniforms.specularColorMap.value = material.specularColorMap;\n\n\t\t\trefreshTransformUniform( material.specularColorMap, uniforms.specularColorMapTransform );\n\n\t\t}\n\n\t\tif ( material.specularIntensityMap ) {\n\n\t\t\tuniforms.specularIntensityMap.value = material.specularIntensityMap;\n\n\t\t\trefreshTransformUniform( material.specularIntensityMap, uniforms.specularIntensityMapTransform );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tconst light = properties.get( material ).light;\n\n\t\tuniforms.referencePosition.value.setFromMatrixPosition( light.matrixWorld );\n\t\tuniforms.nearDistance.value = light.shadow.camera.near;\n\t\tuniforms.farDistance.value = light.shadow.camera.far;\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\nfunction WebGLUniformsGroups( gl, info, capabilities, state ) {\n\n\tlet buffers = {};\n\tlet updateList = {};\n\tlet allocatedBindingPoints = [];\n\n\tconst maxBindingPoints = ( capabilities.isWebGL2 ) ? gl.getParameter( gl.MAX_UNIFORM_BUFFER_BINDINGS ) : 0; // binding points are global whereas block indices are per shader program\n\n\tfunction bind( uniformsGroup, program ) {\n\n\t\tconst webglProgram = program.program;\n\t\tstate.uniformBlockBinding( uniformsGroup, webglProgram );\n\n\t}\n\n\tfunction update( uniformsGroup, program ) {\n\n\t\tlet buffer = buffers[ uniformsGroup.id ];\n\n\t\tif ( buffer === undefined ) {\n\n\t\t\tprepareUniformsGroup( uniformsGroup );\n\n\t\t\tbuffer = createBuffer( uniformsGroup );\n\t\t\tbuffers[ uniformsGroup.id ] = buffer;\n\n\t\t\tuniformsGroup.addEventListener( 'dispose', onUniformsGroupsDispose );\n\n\t\t}\n\n\t\t// ensure to update the binding points/block indices mapping for this program\n\n\t\tconst webglProgram = program.program;\n\t\tstate.updateUBOMapping( uniformsGroup, webglProgram );\n\n\t\t// update UBO once per frame\n\n\t\tconst frame = info.render.frame;\n\n\t\tif ( updateList[ uniformsGroup.id ] !== frame ) {\n\n\t\t\tupdateBufferData( uniformsGroup );\n\n\t\t\tupdateList[ uniformsGroup.id ] = frame;\n\n\t\t}\n\n\t}\n\n\tfunction createBuffer( uniformsGroup ) {\n\n\t\t// the setup of an UBO is independent of a particular shader program but global\n\n\t\tconst bindingPointIndex = allocateBindingPointIndex();\n\t\tuniformsGroup.__bindingPointIndex = bindingPointIndex;\n\n\t\tconst buffer = gl.createBuffer();\n\t\tconst size = uniformsGroup.__size;\n\t\tconst usage = uniformsGroup.usage;\n\n\t\tgl.bindBuffer( gl.UNIFORM_BUFFER, buffer );\n\t\tgl.bufferData( gl.UNIFORM_BUFFER, size, usage );\n\t\tgl.bindBuffer( gl.UNIFORM_BUFFER, null );\n\t\tgl.bindBufferBase( gl.UNIFORM_BUFFER, bindingPointIndex, buffer );\n\n\t\treturn buffer;\n\n\t}\n\n\tfunction allocateBindingPointIndex() {\n\n\t\tfor ( let i = 0; i < maxBindingPoints; i ++ ) {\n\n\t\t\tif ( allocatedBindingPoints.indexOf( i ) === - 1 ) {\n\n\t\t\t\tallocatedBindingPoints.push( i );\n\t\t\t\treturn i;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconsole.error( 'THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.' );\n\n\t\treturn 0;\n\n\t}\n\n\tfunction updateBufferData( uniformsGroup ) {\n\n\t\tconst buffer = buffers[ uniformsGroup.id ];\n\t\tconst uniforms = uniformsGroup.uniforms;\n\t\tconst cache = uniformsGroup.__cache;\n\n\t\tgl.bindBuffer( gl.UNIFORM_BUFFER, buffer );\n\n\t\tfor ( let i = 0, il = uniforms.length; i < il; i ++ ) {\n\n\t\t\tconst uniformArray = Array.isArray( uniforms[ i ] ) ? uniforms[ i ] : [ uniforms[ i ] ];\n\n\t\t\tfor ( let j = 0, jl = uniformArray.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uniform = uniformArray[ j ];\n\n\t\t\t\tif ( hasUniformChanged( uniform, i, j, cache ) === true ) {\n\n\t\t\t\t\tconst offset = uniform.__offset;\n\n\t\t\t\t\tconst values = Array.isArray( uniform.value ) ? uniform.value : [ uniform.value ];\n\n\t\t\t\t\tlet arrayOffset = 0;\n\n\t\t\t\t\tfor ( let k = 0; k < values.length; k ++ ) {\n\n\t\t\t\t\t\tconst value = values[ k ];\n\n\t\t\t\t\t\tconst info = getUniformSize( value );\n\n\t\t\t\t\t\t// TODO add integer and struct support\n\t\t\t\t\t\tif ( typeof value === 'number' || typeof value === 'boolean' ) {\n\n\t\t\t\t\t\t\tuniform.__data[ 0 ] = value;\n\t\t\t\t\t\t\tgl.bufferSubData( gl.UNIFORM_BUFFER, offset + arrayOffset, uniform.__data );\n\n\t\t\t\t\t\t} else if ( value.isMatrix3 ) {\n\n\t\t\t\t\t\t\t// manually converting 3x3 to 3x4\n\n\t\t\t\t\t\t\tuniform.__data[ 0 ] = value.elements[ 0 ];\n\t\t\t\t\t\t\tuniform.__data[ 1 ] = value.elements[ 1 ];\n\t\t\t\t\t\t\tuniform.__data[ 2 ] = value.elements[ 2 ];\n\t\t\t\t\t\t\tuniform.__data[ 3 ] = 0;\n\t\t\t\t\t\t\tuniform.__data[ 4 ] = value.elements[ 3 ];\n\t\t\t\t\t\t\tuniform.__data[ 5 ] = value.elements[ 4 ];\n\t\t\t\t\t\t\tuniform.__data[ 6 ] = value.elements[ 5 ];\n\t\t\t\t\t\t\tuniform.__data[ 7 ] = 0;\n\t\t\t\t\t\t\tuniform.__data[ 8 ] = value.elements[ 6 ];\n\t\t\t\t\t\t\tuniform.__data[ 9 ] = value.elements[ 7 ];\n\t\t\t\t\t\t\tuniform.__data[ 10 ] = value.elements[ 8 ];\n\t\t\t\t\t\t\tuniform.__data[ 11 ] = 0;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvalue.toArray( uniform.__data, arrayOffset );\n\n\t\t\t\t\t\t\tarrayOffset += info.storage / Float32Array.BYTES_PER_ELEMENT;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgl.bufferSubData( gl.UNIFORM_BUFFER, offset, uniform.__data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tgl.bindBuffer( gl.UNIFORM_BUFFER, null );\n\n\t}\n\n\tfunction hasUniformChanged( uniform, index, indexArray, cache ) {\n\n\t\tconst value = uniform.value;\n\t\tconst indexString = index + '_' + indexArray;\n\n\t\tif ( cache[ indexString ] === undefined ) {\n\n\t\t\t// cache entry does not exist so far\n\n\t\t\tif ( typeof value === 'number' || typeof value === 'boolean' ) {\n\n\t\t\t\tcache[ indexString ] = value;\n\n\t\t\t} else {\n\n\t\t\t\tcache[ indexString ] = value.clone();\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t} else {\n\n\t\t\tconst cachedObject = cache[ indexString ];\n\n\t\t\t// compare current value with cached entry\n\n\t\t\tif ( typeof value === 'number' || typeof value === 'boolean' ) {\n\n\t\t\t\tif ( cachedObject !== value ) {\n\n\t\t\t\t\tcache[ indexString ] = value;\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( cachedObject.equals( value ) === false ) {\n\n\t\t\t\t\tcachedObject.copy( value );\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction prepareUniformsGroup( uniformsGroup ) {\n\n\t\t// determine total buffer size according to the STD140 layout\n\t\t// Hint: STD140 is the only supported layout in WebGL 2\n\n\t\tconst uniforms = uniformsGroup.uniforms;\n\n\t\tlet offset = 0; // global buffer offset in bytes\n\t\tconst chunkSize = 16; // size of a chunk in bytes\n\n\t\tfor ( let i = 0, l = uniforms.length; i < l; i ++ ) {\n\n\t\t\tconst uniformArray = Array.isArray( uniforms[ i ] ) ? uniforms[ i ] : [ uniforms[ i ] ];\n\n\t\t\tfor ( let j = 0, jl = uniformArray.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uniform = uniformArray[ j ];\n\n\t\t\t\tconst values = Array.isArray( uniform.value ) ? uniform.value : [ uniform.value ];\n\n\t\t\t\tfor ( let k = 0, kl = values.length; k < kl; k ++ ) {\n\n\t\t\t\t\tconst value = values[ k ];\n\n\t\t\t\t\tconst info = getUniformSize( value );\n\n\t\t\t\t\t// Calculate the chunk offset\n\t\t\t\t\tconst chunkOffsetUniform = offset % chunkSize;\n\n\t\t\t\t\t// Check for chunk overflow\n\t\t\t\t\tif ( chunkOffsetUniform !== 0 && ( chunkSize - chunkOffsetUniform ) < info.boundary ) {\n\n\t\t\t\t\t\t// Add padding and adjust offset\n\t\t\t\t\t\toffset += ( chunkSize - chunkOffsetUniform );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the following two properties will be used for partial buffer updates\n\n\t\t\t\t\tuniform.__data = new Float32Array( info.storage / Float32Array.BYTES_PER_ELEMENT );\n\t\t\t\t\tuniform.__offset = offset;\n\n\n\t\t\t\t\t// Update the global offset\n\t\t\t\t\toffset += info.storage;\n\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ensure correct final padding\n\n\t\tconst chunkOffset = offset % chunkSize;\n\n\t\tif ( chunkOffset > 0 ) offset += ( chunkSize - chunkOffset );\n\n\t\t//\n\n\t\tuniformsGroup.__size = offset;\n\t\tuniformsGroup.__cache = {};\n\n\t\treturn this;\n\n\t}\n\n\tfunction getUniformSize( value ) {\n\n\t\tconst info = {\n\t\t\tboundary: 0, // bytes\n\t\t\tstorage: 0 // bytes\n\t\t};\n\n\t\t// determine sizes according to STD140\n\n\t\tif ( typeof value === 'number' || typeof value === 'boolean' ) {\n\n\t\t\t// float/int/bool\n\n\t\t\tinfo.boundary = 4;\n\t\t\tinfo.storage = 4;\n\n\t\t} else if ( value.isVector2 ) {\n\n\t\t\t// vec2\n\n\t\t\tinfo.boundary = 8;\n\t\t\tinfo.storage = 8;\n\n\t\t} else if ( value.isVector3 || value.isColor ) {\n\n\t\t\t// vec3\n\n\t\t\tinfo.boundary = 16;\n\t\t\tinfo.storage = 12; // evil: vec3 must start on a 16-byte boundary but it only consumes 12 bytes\n\n\t\t} else if ( value.isVector4 ) {\n\n\t\t\t// vec4\n\n\t\t\tinfo.boundary = 16;\n\t\t\tinfo.storage = 16;\n\n\t\t} else if ( value.isMatrix3 ) {\n\n\t\t\t// mat3 (in STD140 a 3x3 matrix is represented as 3x4)\n\n\t\t\tinfo.boundary = 48;\n\t\t\tinfo.storage = 48;\n\n\t\t} else if ( value.isMatrix4 ) {\n\n\t\t\t// mat4\n\n\t\t\tinfo.boundary = 64;\n\t\t\tinfo.storage = 64;\n\n\t\t} else if ( value.isTexture ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.' );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unsupported uniform value type.', value );\n\n\t\t}\n\n\t\treturn info;\n\n\t}\n\n\tfunction onUniformsGroupsDispose( event ) {\n\n\t\tconst uniformsGroup = event.target;\n\n\t\tuniformsGroup.removeEventListener( 'dispose', onUniformsGroupsDispose );\n\n\t\tconst index = allocatedBindingPoints.indexOf( uniformsGroup.__bindingPointIndex );\n\t\tallocatedBindingPoints.splice( index, 1 );\n\n\t\tgl.deleteBuffer( buffers[ uniformsGroup.id ] );\n\n\t\tdelete buffers[ uniformsGroup.id ];\n\t\tdelete updateList[ uniformsGroup.id ];\n\n\t}\n\n\tfunction dispose() {\n\n\t\tfor ( const id in buffers ) {\n\n\t\t\tgl.deleteBuffer( buffers[ id ] );\n\n\t\t}\n\n\t\tallocatedBindingPoints = [];\n\t\tbuffers = {};\n\t\tupdateList = {};\n\n\t}\n\n\treturn {\n\n\t\tbind: bind,\n\t\tupdate: update,\n\n\t\tdispose: dispose\n\n\t};\n\n}\n\nclass WebGLRenderer {\n\n\tconstructor( parameters = {} ) {\n\n\t\tconst {\n\t\t\tcanvas = createCanvasElement(),\n\t\t\tcontext = null,\n\t\t\tdepth = true,\n\t\t\tstencil = true,\n\t\t\talpha = false,\n\t\t\tantialias = false,\n\t\t\tpremultipliedAlpha = true,\n\t\t\tpreserveDrawingBuffer = false,\n\t\t\tpowerPreference = 'default',\n\t\t\tfailIfMajorPerformanceCaveat = false,\n\t\t} = parameters;\n\n\t\tthis.isWebGLRenderer = true;\n\n\t\tlet _alpha;\n\n\t\tif ( context !== null ) {\n\n\t\t\t_alpha = context.getContextAttributes().alpha;\n\n\t\t} else {\n\n\t\t\t_alpha = alpha;\n\n\t\t}\n\n\t\tconst uintClearColor = new Uint32Array( 4 );\n\t\tconst intClearColor = new Int32Array( 4 );\n\n\t\tlet currentRenderList = null;\n\t\tlet currentRenderState = null;\n\n\t\t// render() can be called from within a callback triggered by another render.\n\t\t// We track this so that the nested render call gets its list and state isolated from the parent render call.\n\n\t\tconst renderListStack = [];\n\t\tconst renderStateStack = [];\n\n\t\t// public properties\n\n\t\tthis.domElement = canvas;\n\n\t\t// Debug configuration container\n\t\tthis.debug = {\n\n\t\t\t/**\n\t\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t\t * @type {boolean}\n\t\t\t */\n\t\t\tcheckShaderErrors: true,\n\t\t\t/**\n\t\t\t * Callback for custom error reporting.\n\t\t\t * @type {?Function}\n\t\t\t */\n\t\t\tonShaderError: null\n\t\t};\n\n\t\t// clearing\n\n\t\tthis.autoClear = true;\n\t\tthis.autoClearColor = true;\n\t\tthis.autoClearDepth = true;\n\t\tthis.autoClearStencil = true;\n\n\t\t// scene graph\n\n\t\tthis.sortObjects = true;\n\n\t\t// user-defined clipping\n\n\t\tthis.clippingPlanes = [];\n\t\tthis.localClippingEnabled = false;\n\n\t\t// physically based shading\n\n\t\tthis._outputColorSpace = SRGBColorSpace;\n\n\t\t// physical lights\n\n\t\tthis._useLegacyLights = false;\n\n\t\t// tone mapping\n\n\t\tthis.toneMapping = NoToneMapping;\n\t\tthis.toneMappingExposure = 1.0;\n\n\t\t// internal properties\n\n\t\tconst _this = this;\n\n\t\tlet _isContextLost = false;\n\n\t\t// internal state cache\n\n\t\tlet _currentActiveCubeFace = 0;\n\t\tlet _currentActiveMipmapLevel = 0;\n\t\tlet _currentRenderTarget = null;\n\t\tlet _currentMaterialId = - 1;\n\n\t\tlet _currentCamera = null;\n\n\t\tconst _currentViewport = new Vector4();\n\t\tconst _currentScissor = new Vector4();\n\t\tlet _currentScissorTest = null;\n\n\t\tconst _currentClearColor = new Color( 0x000000 );\n\t\tlet _currentClearAlpha = 0;\n\n\t\t//\n\n\t\tlet _width = canvas.width;\n\t\tlet _height = canvas.height;\n\n\t\tlet _pixelRatio = 1;\n\t\tlet _opaqueSort = null;\n\t\tlet _transparentSort = null;\n\n\t\tconst _viewport = new Vector4( 0, 0, _width, _height );\n\t\tconst _scissor = new Vector4( 0, 0, _width, _height );\n\t\tlet _scissorTest = false;\n\n\t\t// frustum\n\n\t\tconst _frustum = new Frustum();\n\n\t\t// clipping\n\n\t\tlet _clippingEnabled = false;\n\t\tlet _localClippingEnabled = false;\n\n\t\t// transmission\n\n\t\tlet _transmissionRenderTarget = null;\n\n\t\t// camera matrices cache\n\n\t\tconst _projScreenMatrix = new Matrix4();\n\n\t\tconst _vector2 = new Vector2();\n\t\tconst _vector3 = new Vector3();\n\n\t\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\n\n\t\tfunction getTargetPixelRatio() {\n\n\t\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t\t}\n\n\t\t// initialize\n\n\t\tlet _gl = context;\n\n\t\tfunction getContext( contextNames, contextAttributes ) {\n\n\t\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\n\n\t\t\t\tconst contextName = contextNames[ i ];\n\t\t\t\tconst context = canvas.getContext( contextName, contextAttributes );\n\t\t\t\tif ( context !== null ) return context;\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\ttry {\n\n\t\t\tconst contextAttributes = {\n\t\t\t\talpha: true,\n\t\t\t\tdepth,\n\t\t\t\tstencil,\n\t\t\t\tantialias,\n\t\t\t\tpremultipliedAlpha,\n\t\t\t\tpreserveDrawingBuffer,\n\t\t\t\tpowerPreference,\n\t\t\t\tfailIfMajorPerformanceCaveat,\n\t\t\t};\n\n\t\t\t// OffscreenCanvas does not have setAttribute, see #22811\n\t\t\tif ( 'setAttribute' in canvas ) canvas.setAttribute( 'data-engine', `three.js r${REVISION}` );\n\n\t\t\t// event listeners must be registered before WebGL context is created, see #12753\n\t\t\tcanvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t\tcanvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\t\t\tcanvas.addEventListener( 'webglcontextcreationerror', onContextCreationError, false );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\n\n\t\t\t\tif ( _this.isWebGL1Renderer === true ) {\n\n\t\t\t\t\tcontextNames.shift();\n\n\t\t\t\t}\n\n\t\t\t\t_gl = getContext( contextNames, contextAttributes );\n\n\t\t\t\tif ( _gl === null ) {\n\n\t\t\t\t\tif ( getContext( contextNames ) ) {\n\n\t\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( typeof WebGLRenderingContext !== 'undefined' && _gl instanceof WebGLRenderingContext ) { // @deprecated, r153\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163.' );\n\n\t\t\t}\n\n\t\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\t\tthrow error;\n\n\t\t}\n\n\t\tlet extensions, capabilities, state, info;\n\t\tlet properties, textures, cubemaps, cubeuvmaps, attributes, geometries, objects;\n\t\tlet programCache, materials, renderLists, renderStates, clipping, shadowMap;\n\n\t\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\t\tlet utils, bindingStates, uniformsGroups;\n\n\t\tfunction initGLContext() {\n\n\t\t\textensions = new WebGLExtensions( _gl );\n\n\t\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\t\textensions.init( capabilities );\n\n\t\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\n\t\t\tinfo = new WebGLInfo( _gl );\n\t\t\tproperties = new WebGLProperties();\n\t\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\t\tcubemaps = new WebGLCubeMaps( _this );\n\t\t\tcubeuvmaps = new WebGLCubeUVMaps( _this );\n\t\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\n\t\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\n\t\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\t\tmorphtargets = new WebGLMorphtargets( _gl, capabilities, textures );\n\t\t\tclipping = new WebGLClipping( properties );\n\t\t\tprogramCache = new WebGLPrograms( _this, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping );\n\t\t\tmaterials = new WebGLMaterials( _this, properties );\n\t\t\trenderLists = new WebGLRenderLists();\n\t\t\trenderStates = new WebGLRenderStates( extensions, capabilities );\n\t\t\tbackground = new WebGLBackground( _this, cubemaps, cubeuvmaps, state, objects, _alpha, premultipliedAlpha );\n\t\t\tshadowMap = new WebGLShadowMap( _this, objects, capabilities );\n\t\t\tuniformsGroups = new WebGLUniformsGroups( _gl, info, capabilities, state );\n\n\t\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\t\tinfo.programs = programCache.programs;\n\n\t\t\t_this.capabilities = capabilities;\n\t\t\t_this.extensions = extensions;\n\t\t\t_this.properties = properties;\n\t\t\t_this.renderLists = renderLists;\n\t\t\t_this.shadowMap = shadowMap;\n\t\t\t_this.state = state;\n\t\t\t_this.info = info;\n\n\t\t}\n\n\t\tinitGLContext();\n\n\t\t// xr\n\n\t\tconst xr = new WebXRManager( _this, _gl );\n\n\t\tthis.xr = xr;\n\n\t\t// API\n\n\t\tthis.getContext = function () {\n\n\t\t\treturn _gl;\n\n\t\t};\n\n\t\tthis.getContextAttributes = function () {\n\n\t\t\treturn _gl.getContextAttributes();\n\n\t\t};\n\n\t\tthis.forceContextLoss = function () {\n\n\t\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\t\tif ( extension ) extension.loseContext();\n\n\t\t};\n\n\t\tthis.forceContextRestore = function () {\n\n\t\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\t\tif ( extension ) extension.restoreContext();\n\n\t\t};\n\n\t\tthis.getPixelRatio = function () {\n\n\t\t\treturn _pixelRatio;\n\n\t\t};\n\n\t\tthis.setPixelRatio = function ( value ) {\n\n\t\t\tif ( value === undefined ) return;\n\n\t\t\t_pixelRatio = value;\n\n\t\t\tthis.setSize( _width, _height, false );\n\n\t\t};\n\n\t\tthis.getSize = function ( target ) {\n\n\t\t\treturn target.set( _width, _height );\n\n\t\t};\n\n\t\tthis.setSize = function ( width, height, updateStyle = true ) {\n\n\t\t\tif ( xr.isPresenting ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\n\t\t\tcanvas.width = Math.floor( width * _pixelRatio );\n\t\t\tcanvas.height = Math.floor( height * _pixelRatio );\n\n\t\t\tif ( updateStyle === true ) {\n\n\t\t\t\tcanvas.style.width = width + 'px';\n\t\t\t\tcanvas.style.height = height + 'px';\n\n\t\t\t}\n\n\t\t\tthis.setViewport( 0, 0, width, height );\n\n\t\t};\n\n\t\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t\t};\n\n\t\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\n\t\t\t_pixelRatio = pixelRatio;\n\n\t\t\tcanvas.width = Math.floor( width * pixelRatio );\n\t\t\tcanvas.height = Math.floor( height * pixelRatio );\n\n\t\t\tthis.setViewport( 0, 0, width, height );\n\n\t\t};\n\n\t\tthis.getCurrentViewport = function ( target ) {\n\n\t\t\treturn target.copy( _currentViewport );\n\n\t\t};\n\n\t\tthis.getViewport = function ( target ) {\n\n\t\t\treturn target.copy( _viewport );\n\n\t\t};\n\n\t\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t\tif ( x.isVector4 ) {\n\n\t\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t\t} else {\n\n\t\t\t\t_viewport.set( x, y, width, height );\n\n\t\t\t}\n\n\t\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\t};\n\n\t\tthis.getScissor = function ( target ) {\n\n\t\t\treturn target.copy( _scissor );\n\n\t\t};\n\n\t\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\t\tif ( x.isVector4 ) {\n\n\t\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t\t} else {\n\n\t\t\t\t_scissor.set( x, y, width, height );\n\n\t\t\t}\n\n\t\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\t};\n\n\t\tthis.getScissorTest = function () {\n\n\t\t\treturn _scissorTest;\n\n\t\t};\n\n\t\tthis.setScissorTest = function ( boolean ) {\n\n\t\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t\t};\n\n\t\tthis.setOpaqueSort = function ( method ) {\n\n\t\t\t_opaqueSort = method;\n\n\t\t};\n\n\t\tthis.setTransparentSort = function ( method ) {\n\n\t\t\t_transparentSort = method;\n\n\t\t};\n\n\t\t// Clearing\n\n\t\tthis.getClearColor = function ( target ) {\n\n\t\t\treturn target.copy( background.getClearColor() );\n\n\t\t};\n\n\t\tthis.setClearColor = function () {\n\n\t\t\tbackground.setClearColor.apply( background, arguments );\n\n\t\t};\n\n\t\tthis.getClearAlpha = function () {\n\n\t\t\treturn background.getClearAlpha();\n\n\t\t};\n\n\t\tthis.setClearAlpha = function () {\n\n\t\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t\t};\n\n\t\tthis.clear = function ( color = true, depth = true, stencil = true ) {\n\n\t\t\tlet bits = 0;\n\n\t\t\tif ( color ) {\n\n\t\t\t\t// check if we're trying to clear an integer target\n\t\t\t\tlet isIntegerFormat = false;\n\t\t\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t\t\tconst targetFormat = _currentRenderTarget.texture.format;\n\t\t\t\t\tisIntegerFormat = targetFormat === RGBAIntegerFormat ||\n\t\t\t\t\t\ttargetFormat === RGIntegerFormat ||\n\t\t\t\t\t\ttargetFormat === RedIntegerFormat;\n\n\t\t\t\t}\n\n\t\t\t\t// use the appropriate clear functions to clear the target if it's a signed\n\t\t\t\t// or unsigned integer target\n\t\t\t\tif ( isIntegerFormat ) {\n\n\t\t\t\t\tconst targetType = _currentRenderTarget.texture.type;\n\t\t\t\t\tconst isUnsignedType = targetType === UnsignedByteType ||\n\t\t\t\t\t\ttargetType === UnsignedIntType ||\n\t\t\t\t\t\ttargetType === UnsignedShortType ||\n\t\t\t\t\t\ttargetType === UnsignedInt248Type ||\n\t\t\t\t\t\ttargetType === UnsignedShort4444Type ||\n\t\t\t\t\t\ttargetType === UnsignedShort5551Type;\n\n\t\t\t\t\tconst clearColor = background.getClearColor();\n\t\t\t\t\tconst a = background.getClearAlpha();\n\t\t\t\t\tconst r = clearColor.r;\n\t\t\t\t\tconst g = clearColor.g;\n\t\t\t\t\tconst b = clearColor.b;\n\n\t\t\t\t\tif ( isUnsignedType ) {\n\n\t\t\t\t\t\tuintClearColor[ 0 ] = r;\n\t\t\t\t\t\tuintClearColor[ 1 ] = g;\n\t\t\t\t\t\tuintClearColor[ 2 ] = b;\n\t\t\t\t\t\tuintClearColor[ 3 ] = a;\n\t\t\t\t\t\t_gl.clearBufferuiv( _gl.COLOR, 0, uintClearColor );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tintClearColor[ 0 ] = r;\n\t\t\t\t\t\tintClearColor[ 1 ] = g;\n\t\t\t\t\t\tintClearColor[ 2 ] = b;\n\t\t\t\t\t\tintClearColor[ 3 ] = a;\n\t\t\t\t\t\t_gl.clearBufferiv( _gl.COLOR, 0, intClearColor );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbits |= _gl.COLOR_BUFFER_BIT;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\t\tif ( stencil ) {\n\n\t\t\t\tbits |= _gl.STENCIL_BUFFER_BIT;\n\t\t\t\tthis.state.buffers.stencil.setMask( 0xffffffff );\n\n\t\t\t}\n\n\t\t\t_gl.clear( bits );\n\n\t\t};\n\n\t\tthis.clearColor = function () {\n\n\t\t\tthis.clear( true, false, false );\n\n\t\t};\n\n\t\tthis.clearDepth = function () {\n\n\t\t\tthis.clear( false, true, false );\n\n\t\t};\n\n\t\tthis.clearStencil = function () {\n\n\t\t\tthis.clear( false, false, true );\n\n\t\t};\n\n\t\t//\n\n\t\tthis.dispose = function () {\n\n\t\t\tcanvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t\tcanvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\t\t\tcanvas.removeEventListener( 'webglcontextcreationerror', onContextCreationError, false );\n\n\t\t\trenderLists.dispose();\n\t\t\trenderStates.dispose();\n\t\t\tproperties.dispose();\n\t\t\tcubemaps.dispose();\n\t\t\tcubeuvmaps.dispose();\n\t\t\tobjects.dispose();\n\t\t\tbindingStates.dispose();\n\t\t\tuniformsGroups.dispose();\n\t\t\tprogramCache.dispose();\n\n\t\t\txr.dispose();\n\n\t\t\txr.removeEventListener( 'sessionstart', onXRSessionStart );\n\t\t\txr.removeEventListener( 'sessionend', onXRSessionEnd );\n\n\t\t\tif ( _transmissionRenderTarget ) {\n\n\t\t\t\t_transmissionRenderTarget.dispose();\n\t\t\t\t_transmissionRenderTarget = null;\n\n\t\t\t}\n\n\t\t\tanimation.stop();\n\n\t\t};\n\n\t\t// Events\n\n\t\tfunction onContextLost( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t\t_isContextLost = true;\n\n\t\t}\n\n\t\tfunction onContextRestore( /* event */ ) {\n\n\t\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t\t_isContextLost = false;\n\n\t\t\tconst infoAutoReset = info.autoReset;\n\t\t\tconst shadowMapEnabled = shadowMap.enabled;\n\t\t\tconst shadowMapAutoUpdate = shadowMap.autoUpdate;\n\t\t\tconst shadowMapNeedsUpdate = shadowMap.needsUpdate;\n\t\t\tconst shadowMapType = shadowMap.type;\n\n\t\t\tinitGLContext();\n\n\t\t\tinfo.autoReset = infoAutoReset;\n\t\t\tshadowMap.enabled = shadowMapEnabled;\n\t\t\tshadowMap.autoUpdate = shadowMapAutoUpdate;\n\t\t\tshadowMap.needsUpdate = shadowMapNeedsUpdate;\n\t\t\tshadowMap.type = shadowMapType;\n\n\t\t}\n\n\t\tfunction onContextCreationError( event ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer: A WebGL context could not be created. Reason: ', event.statusMessage );\n\n\t\t}\n\n\t\tfunction onMaterialDispose( event ) {\n\n\t\t\tconst material = event.target;\n\n\t\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\t\tdeallocateMaterial( material );\n\n\t\t}\n\n\t\t// Buffer deallocation\n\n\t\tfunction deallocateMaterial( material ) {\n\n\t\t\treleaseMaterialProgramReferences( material );\n\n\t\t\tproperties.remove( material );\n\n\t\t}\n\n\n\t\tfunction releaseMaterialProgramReferences( material ) {\n\n\t\t\tconst programs = properties.get( material ).programs;\n\n\t\t\tif ( programs !== undefined ) {\n\n\t\t\t\tprograms.forEach( function ( program ) {\n\n\t\t\t\t\tprogramCache.releaseProgram( program );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( material.isShaderMaterial ) {\n\n\t\t\t\t\tprogramCache.releaseShaderCache( material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Buffer rendering\n\n\t\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\t\tconst program = setProgram( camera, scene, geometry, material, object );\n\n\t\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t\t//\n\n\t\t\tlet index = geometry.index;\n\t\t\tlet rangeFactor = 1;\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\n\t\t\t\tif ( index === undefined ) return;\n\n\t\t\t\trangeFactor = 2;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tconst drawRange = geometry.drawRange;\n\t\t\tconst position = geometry.attributes.position;\n\n\t\t\tlet drawStart = drawRange.start * rangeFactor;\n\t\t\tlet drawEnd = ( drawRange.start + drawRange.count ) * rangeFactor;\n\n\t\t\tif ( group !== null ) {\n\n\t\t\t\tdrawStart = Math.max( drawStart, group.start * rangeFactor );\n\t\t\t\tdrawEnd = Math.min( drawEnd, ( group.start + group.count ) * rangeFactor );\n\n\t\t\t}\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tdrawStart = Math.max( drawStart, 0 );\n\t\t\t\tdrawEnd = Math.min( drawEnd, index.count );\n\n\t\t\t} else if ( position !== undefined && position !== null ) {\n\n\t\t\t\tdrawStart = Math.max( drawStart, 0 );\n\t\t\t\tdrawEnd = Math.min( drawEnd, position.count );\n\n\t\t\t}\n\n\t\t\tconst drawCount = drawEnd - drawStart;\n\n\t\t\tif ( drawCount < 0 || drawCount === Infinity ) return;\n\n\t\t\t//\n\n\t\t\tbindingStates.setup( object, material, program, geometry, index );\n\n\t\t\tlet attribute;\n\t\t\tlet renderer = bufferRenderer;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tattribute = attributes.get( index );\n\n\t\t\t\trenderer = indexedBufferRenderer;\n\t\t\t\trenderer.setIndex( attribute );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tif ( object.isMesh ) {\n\n\t\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isLine ) {\n\n\t\t\t\tlet lineWidth = material.linewidth;\n\n\t\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isPoints ) {\n\n\t\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t\t}\n\n\t\t\tif ( object.isBatchedMesh ) {\n\n\t\t\t\trenderer.renderMultiDraw( object._multiDrawStarts, object._multiDrawCounts, object._multiDrawCount );\n\n\t\t\t} else if ( object.isInstancedMesh ) {\n\n\t\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\n\n\t\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\t\tconst maxInstanceCount = geometry._maxInstanceCount !== undefined ? geometry._maxInstanceCount : Infinity;\n\t\t\t\tconst instanceCount = Math.min( geometry.instanceCount, maxInstanceCount );\n\n\t\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t\t}\n\n\t\t};\n\n\t\t// Compile\n\n\t\tfunction prepareMaterial( material, scene, object ) {\n\n\t\t\tif ( material.transparent === true && material.side === DoubleSide && material.forceSinglePass === false ) {\n\n\t\t\t\tmaterial.side = BackSide;\n\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t\tmaterial.side = FrontSide;\n\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t\tmaterial.side = DoubleSide;\n\n\t\t\t} else {\n\n\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.compile = function ( scene, camera, targetScene = null ) {\n\n\t\t\tif ( targetScene === null ) targetScene = scene;\n\n\t\t\tcurrentRenderState = renderStates.get( targetScene );\n\t\t\tcurrentRenderState.init();\n\n\t\t\trenderStateStack.push( currentRenderState );\n\n\t\t\t// gather lights from both the target scene and the new object that will be added to the scene.\n\n\t\t\ttargetScene.traverseVisible( function ( object ) {\n\n\t\t\t\tif ( object.isLight && object.layers.test( camera.layers ) ) {\n\n\t\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( scene !== targetScene ) {\n\n\t\t\t\tscene.traverseVisible( function ( object ) {\n\n\t\t\t\t\tif ( object.isLight && object.layers.test( camera.layers ) ) {\n\n\t\t\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tcurrentRenderState.setupLights( _this._useLegacyLights );\n\n\t\t\t// Only initialize materials in the new scene, not the targetScene.\n\n\t\t\tconst materials = new Set();\n\n\t\t\tscene.traverse( function ( object ) {\n\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( material ) {\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\n\n\t\t\t\t\t\t\tconst material2 = material[ i ];\n\n\t\t\t\t\t\t\tprepareMaterial( material2, targetScene, object );\n\t\t\t\t\t\t\tmaterials.add( material2 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tprepareMaterial( material, targetScene, object );\n\t\t\t\t\t\tmaterials.add( material );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\trenderStateStack.pop();\n\t\t\tcurrentRenderState = null;\n\n\t\t\treturn materials;\n\n\t\t};\n\n\t\t// compileAsync\n\n\t\tthis.compileAsync = function ( scene, camera, targetScene = null ) {\n\n\t\t\tconst materials = this.compile( scene, camera, targetScene );\n\n\t\t\t// Wait for all the materials in the new object to indicate that they're\n\t\t\t// ready to be used before resolving the promise.\n\n\t\t\treturn new Promise( ( resolve ) => {\n\n\t\t\t\tfunction checkMaterialsReady() {\n\n\t\t\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\t\t\tconst materialProperties = properties.get( material );\n\t\t\t\t\t\tconst program = materialProperties.currentProgram;\n\n\t\t\t\t\t\tif ( program.isReady() ) {\n\n\t\t\t\t\t\t\t// remove any programs that report they're ready to use from the list\n\t\t\t\t\t\t\tmaterials.delete( material );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\t// once the list of compiling materials is empty, call the callback\n\n\t\t\t\t\tif ( materials.size === 0 ) {\n\n\t\t\t\t\t\tresolve( scene );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// if some materials are still not ready, wait a bit and check again\n\n\t\t\t\t\tsetTimeout( checkMaterialsReady, 10 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( extensions.get( 'KHR_parallel_shader_compile' ) !== null ) {\n\n\t\t\t\t\t// If we can check the compilation status of the materials without\n\t\t\t\t\t// blocking then do so right away.\n\n\t\t\t\t\tcheckMaterialsReady();\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise start by waiting a bit to give the materials we just\n\t\t\t\t\t// initialized a chance to finish.\n\n\t\t\t\t\tsetTimeout( checkMaterialsReady, 10 );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t};\n\n\t\t// Animation Loop\n\n\t\tlet onAnimationFrameCallback = null;\n\n\t\tfunction onAnimationFrame( time ) {\n\n\t\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t\t}\n\n\t\tfunction onXRSessionStart() {\n\n\t\t\tanimation.stop();\n\n\t\t}\n\n\t\tfunction onXRSessionEnd() {\n\n\t\t\tanimation.start();\n\n\t\t}\n\n\t\tconst animation = new WebGLAnimation();\n\t\tanimation.setAnimationLoop( onAnimationFrame );\n\n\t\tif ( typeof self !== 'undefined' ) animation.setContext( self );\n\n\t\tthis.setAnimationLoop = function ( callback ) {\n\n\t\t\tonAnimationFrameCallback = callback;\n\t\t\txr.setAnimationLoop( callback );\n\n\t\t\t( callback === null ) ? animation.stop() : animation.start();\n\n\t\t};\n\n\t\txr.addEventListener( 'sessionstart', onXRSessionStart );\n\t\txr.addEventListener( 'sessionend', onXRSessionEnd );\n\n\t\t// Rendering\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( _isContextLost === true ) return;\n\n\t\t\t// update scene graph\n\n\t\t\tif ( scene.matrixWorldAutoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t\t// update camera matrices and frustum\n\n\t\t\tif ( camera.parent === null && camera.matrixWorldAutoUpdate === true ) camera.updateMatrixWorld();\n\n\t\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\n\n\t\t\t\tif ( xr.cameraAutoUpdate === true ) xr.updateCamera( camera );\n\n\t\t\t\tcamera = xr.getCamera(); // use XR camera for rendering\n\n\t\t\t}\n\n\t\t\t//\n\t\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, _currentRenderTarget );\n\n\t\t\tcurrentRenderState = renderStates.get( scene, renderStateStack.length );\n\t\t\tcurrentRenderState.init();\n\n\t\t\trenderStateStack.push( currentRenderState );\n\n\t\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t\t_clippingEnabled = clipping.init( this.clippingPlanes, _localClippingEnabled );\n\n\t\t\tcurrentRenderList = renderLists.get( scene, renderListStack.length );\n\t\t\tcurrentRenderList.init();\n\n\t\t\trenderListStack.push( currentRenderList );\n\n\t\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\t\tcurrentRenderList.finish();\n\n\t\t\tif ( _this.sortObjects === true ) {\n\n\t\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tthis.info.render.frame ++;\n\n\t\t\tif ( _clippingEnabled === true ) clipping.beginShadows();\n\n\t\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\t\tif ( _clippingEnabled === true ) clipping.endShadows();\n\n\t\t\t//\n\n\t\t\tif ( this.info.autoReset === true ) this.info.reset();\n\n\n\t\t\t//\n\n\t\t\tif ( xr.enabled === false || xr.isPresenting === false || xr.hasDepthSensing() === false ) {\n\n\t\t\t\tbackground.render( currentRenderList, scene );\n\n\t\t\t}\n\n\t\t\t// render scene\n\n\t\t\tcurrentRenderState.setupLights( _this._useLegacyLights );\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\tconst cameras = camera.cameras;\n\n\t\t\t\tfor ( let i = 0, l = cameras.length; i < l; i ++ ) {\n\n\t\t\t\t\tconst camera2 = cameras[ i ];\n\n\t\t\t\t\trenderScene( currentRenderList, scene, camera2, camera2.viewport );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderScene( currentRenderList, scene, camera );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\n\n\t\t\t// _gl.finish();\n\n\t\t\tbindingStates.resetDefaultState();\n\t\t\t_currentMaterialId = - 1;\n\t\t\t_currentCamera = null;\n\n\t\t\trenderStateStack.pop();\n\n\t\t\tif ( renderStateStack.length > 0 ) {\n\n\t\t\t\tcurrentRenderState = renderStateStack[ renderStateStack.length - 1 ];\n\n\t\t\t} else {\n\n\t\t\t\tcurrentRenderState = null;\n\n\t\t\t}\n\n\t\t\trenderListStack.pop();\n\n\t\t\tif ( renderListStack.length > 0 ) {\n\n\t\t\t\tcurrentRenderList = renderListStack[ renderListStack.length - 1 ];\n\n\t\t\t} else {\n\n\t\t\t\tcurrentRenderList = null;\n\n\t\t\t}\n\n\t\t};\n\n\t\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\t\tif ( object.visible === false ) return;\n\n\t\t\tconst visible = object.layers.test( camera.layers );\n\n\t\t\tif ( visible ) {\n\n\t\t\t\tif ( object.isGroup ) {\n\n\t\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t\tif ( object.boundingSphere !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( object.boundingSphere === null ) object.computeBoundingSphere();\n\t\t\t\t\t\t\t\t_vector3.copy( object.boundingSphere.center );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\t\t\t\t\t\t\t\t_vector3.copy( geometry.boundingSphere.center );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_vector3\n\t\t\t\t\t\t\t\t.applyMatrix4( object.matrixWorld )\n\t\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst children = object.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction renderScene( currentRenderList, scene, camera, viewport ) {\n\n\t\t\tconst opaqueObjects = currentRenderList.opaque;\n\t\t\tconst transmissiveObjects = currentRenderList.transmissive;\n\t\t\tconst transparentObjects = currentRenderList.transparent;\n\n\t\t\tcurrentRenderState.setupLightsView( camera );\n\n\t\t\tif ( _clippingEnabled === true ) clipping.setGlobalState( _this.clippingPlanes, camera );\n\n\t\t\tif ( transmissiveObjects.length > 0 ) renderTransmissionPass( opaqueObjects, transmissiveObjects, scene, camera );\n\n\t\t\tif ( viewport ) state.viewport( _currentViewport.copy( viewport ) );\n\n\t\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\n\t\t\tif ( transmissiveObjects.length > 0 ) renderObjects( transmissiveObjects, scene, camera );\n\t\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\n\n\t\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\t\tstate.buffers.depth.setTest( true );\n\t\t\tstate.buffers.depth.setMask( true );\n\t\t\tstate.buffers.color.setMask( true );\n\n\t\t\tstate.setPolygonOffset( false );\n\n\t\t}\n\n\t\tfunction renderTransmissionPass( opaqueObjects, transmissiveObjects, scene, camera ) {\n\n\t\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\t\tif ( overrideMaterial !== null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst isWebGL2 = capabilities.isWebGL2;\n\n\t\t\tif ( _transmissionRenderTarget === null ) {\n\n\t\t\t\t_transmissionRenderTarget = new WebGLRenderTarget( 1, 1, {\n\t\t\t\t\tgenerateMipmaps: true,\n\t\t\t\t\ttype: extensions.has( 'EXT_color_buffer_half_float' ) ? HalfFloatType : UnsignedByteType,\n\t\t\t\t\tminFilter: LinearMipmapLinearFilter,\n\t\t\t\t\tsamples: ( isWebGL2 ) ? 4 : 0\n\t\t\t\t} );\n\n\t\t\t\t// debug\n\n\t\t\t\t/*\n\t\t\t\tconst geometry = new PlaneGeometry();\n\t\t\t\tconst material = new MeshBasicMaterial( { map: _transmissionRenderTarget.texture } );\n\n\t\t\t\tconst mesh = new Mesh( geometry, material );\n\t\t\t\tscene.add( mesh );\n\t\t\t\t*/\n\n\t\t\t}\n\n\t\t\t_this.getDrawingBufferSize( _vector2 );\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t_transmissionRenderTarget.setSize( _vector2.x, _vector2.y );\n\n\t\t\t} else {\n\n\t\t\t\t_transmissionRenderTarget.setSize( floorPowerOfTwo( _vector2.x ), floorPowerOfTwo( _vector2.y ) );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tconst currentRenderTarget = _this.getRenderTarget();\n\t\t\t_this.setRenderTarget( _transmissionRenderTarget );\n\n\t\t\t_this.getClearColor( _currentClearColor );\n\t\t\t_currentClearAlpha = _this.getClearAlpha();\n\t\t\tif ( _currentClearAlpha < 1 ) _this.setClearColor( 0xffffff, 0.5 );\n\n\t\t\t_this.clear();\n\n\t\t\t// Turn off the features which can affect the frag color for opaque objects pass.\n\t\t\t// Otherwise they are applied twice in opaque objects pass and transmission objects pass.\n\t\t\tconst currentToneMapping = _this.toneMapping;\n\t\t\t_this.toneMapping = NoToneMapping;\n\n\t\t\trenderObjects( opaqueObjects, scene, camera );\n\n\t\t\ttextures.updateMultisampleRenderTarget( _transmissionRenderTarget );\n\t\t\ttextures.updateRenderTargetMipmap( _transmissionRenderTarget );\n\n\t\t\tlet renderTargetNeedsUpdate = false;\n\n\t\t\tfor ( let i = 0, l = transmissiveObjects.length; i < l; i ++ ) {\n\n\t\t\t\tconst renderItem = transmissiveObjects[ i ];\n\n\t\t\t\tconst object = renderItem.object;\n\t\t\t\tconst geometry = renderItem.geometry;\n\t\t\t\tconst material = renderItem.material;\n\t\t\t\tconst group = renderItem.group;\n\n\t\t\t\tif ( material.side === DoubleSide && object.layers.test( camera.layers ) ) {\n\n\t\t\t\t\tconst currentSide = material.side;\n\n\t\t\t\t\tmaterial.side = BackSide;\n\t\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t\t\tmaterial.side = currentSide;\n\t\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t\t\trenderTargetNeedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( renderTargetNeedsUpdate === true ) {\n\n\t\t\t\ttextures.updateMultisampleRenderTarget( _transmissionRenderTarget );\n\t\t\t\ttextures.updateRenderTargetMipmap( _transmissionRenderTarget );\n\n\t\t\t}\n\n\t\t\t_this.setRenderTarget( currentRenderTarget );\n\n\t\t\t_this.setClearColor( _currentClearColor, _currentClearAlpha );\n\n\t\t\t_this.toneMapping = currentToneMapping;\n\n\t\t}\n\n\t\tfunction renderObjects( renderList, scene, camera ) {\n\n\t\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\t\tconst renderItem = renderList[ i ];\n\n\t\t\t\tconst object = renderItem.object;\n\t\t\t\tconst geometry = renderItem.geometry;\n\t\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n\t\t\t\tconst group = renderItem.group;\n\n\t\t\t\tif ( object.layers.test( camera.layers ) ) {\n\n\t\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\t\tmaterial.onBeforeRender( _this, scene, camera, geometry, object, group );\n\n\t\t\tif ( material.transparent === true && material.side === DoubleSide && material.forceSinglePass === false ) {\n\n\t\t\t\tmaterial.side = BackSide;\n\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\t\tmaterial.side = FrontSide;\n\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\t\tmaterial.side = DoubleSide;\n\n\t\t\t} else {\n\n\t\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\t}\n\n\t\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\t\t}\n\n\t\tfunction getProgram( material, scene, object ) {\n\n\t\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\t\tconst materialProperties = properties.get( material );\n\n\t\t\tconst lights = currentRenderState.state.lights;\n\t\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\t\tconst lightsStateVersion = lights.state.version;\n\n\t\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, object );\n\t\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\t\tlet programs = materialProperties.programs;\n\n\t\t\t// always update environment and fog - changing these trigger an getProgram call, but it's possible that the program doesn't change\n\n\t\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\t\tmaterialProperties.fog = scene.fog;\n\t\t\tmaterialProperties.envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || materialProperties.environment );\n\n\t\t\tif ( programs === undefined ) {\n\n\t\t\t\t// new material\n\n\t\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t\t\tprograms = new Map();\n\t\t\t\tmaterialProperties.programs = programs;\n\n\t\t\t}\n\n\t\t\tlet program = programs.get( programCacheKey );\n\n\t\t\tif ( program !== undefined ) {\n\n\t\t\t\t// early out if program and light state is identical\n\n\t\t\t\tif ( materialProperties.currentProgram === program && materialProperties.lightsStateVersion === lightsStateVersion ) {\n\n\t\t\t\t\tupdateCommonMaterialProperties( material, parameters );\n\n\t\t\t\t\treturn program;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tparameters.uniforms = programCache.getUniforms( material );\n\n\t\t\t\tmaterial.onBuild( object, parameters, _this );\n\n\t\t\t\tmaterial.onBeforeCompile( parameters, _this );\n\n\t\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\t\t\t\tprograms.set( programCacheKey, program );\n\n\t\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\n\t\t\t}\n\n\t\t\tconst uniforms = materialProperties.uniforms;\n\n\t\t\tif ( ( ! material.isShaderMaterial && ! material.isRawShaderMaterial ) || material.clipping === true ) {\n\n\t\t\t\tuniforms.clippingPlanes = clipping.uniform;\n\n\t\t\t}\n\n\t\t\tupdateCommonMaterialProperties( material, parameters );\n\n\t\t\t// store the light setup it was created for\n\n\t\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\t\tuniforms.ltc_1.value = lights.state.rectAreaLTC1;\n\t\t\t\tuniforms.ltc_2.value = lights.state.rectAreaLTC2;\n\t\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\t\tuniforms.spotLightMatrix.value = lights.state.spotLightMatrix;\n\t\t\t\tuniforms.spotLightMap.value = lights.state.spotLightMap;\n\t\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t\t}\n\n\t\t\tmaterialProperties.currentProgram = program;\n\t\t\tmaterialProperties.uniformsList = null;\n\n\t\t\treturn program;\n\n\t\t}\n\n\t\tfunction getUniformList( materialProperties ) {\n\n\t\t\tif ( materialProperties.uniformsList === null ) {\n\n\t\t\t\tconst progUniforms = materialProperties.currentProgram.getUniforms();\n\t\t\t\tmaterialProperties.uniformsList = WebGLUniforms.seqWithValue( progUniforms.seq, materialProperties.uniforms );\n\n\t\t\t}\n\n\t\t\treturn materialProperties.uniformsList;\n\n\t\t}\n\n\t\tfunction updateCommonMaterialProperties( material, parameters ) {\n\n\t\t\tconst materialProperties = properties.get( material );\n\n\t\t\tmaterialProperties.outputColorSpace = parameters.outputColorSpace;\n\t\t\tmaterialProperties.batching = parameters.batching;\n\t\t\tmaterialProperties.instancing = parameters.instancing;\n\t\t\tmaterialProperties.instancingColor = parameters.instancingColor;\n\t\t\tmaterialProperties.skinning = parameters.skinning;\n\t\t\tmaterialProperties.morphTargets = parameters.morphTargets;\n\t\t\tmaterialProperties.morphNormals = parameters.morphNormals;\n\t\t\tmaterialProperties.morphColors = parameters.morphColors;\n\t\t\tmaterialProperties.morphTargetsCount = parameters.morphTargetsCount;\n\t\t\tmaterialProperties.numClippingPlanes = parameters.numClippingPlanes;\n\t\t\tmaterialProperties.numIntersection = parameters.numClipIntersection;\n\t\t\tmaterialProperties.vertexAlphas = parameters.vertexAlphas;\n\t\t\tmaterialProperties.vertexTangents = parameters.vertexTangents;\n\t\t\tmaterialProperties.toneMapping = parameters.toneMapping;\n\n\t\t}\n\n\t\tfunction setProgram( camera, scene, geometry, material, object ) {\n\n\t\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\t\ttextures.resetTextureUnits();\n\n\t\t\tconst fog = scene.fog;\n\t\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\t\tconst colorSpace = ( _currentRenderTarget === null ) ? _this.outputColorSpace : ( _currentRenderTarget.isXRRenderTarget === true ? _currentRenderTarget.texture.colorSpace : LinearSRGBColorSpace );\n\t\t\tconst envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || environment );\n\t\t\tconst vertexAlphas = material.vertexColors === true && !! geometry.attributes.color && geometry.attributes.color.itemSize === 4;\n\t\t\tconst vertexTangents = !! geometry.attributes.tangent && ( !! material.normalMap || material.anisotropy > 0 );\n\t\t\tconst morphTargets = !! geometry.morphAttributes.position;\n\t\t\tconst morphNormals = !! geometry.morphAttributes.normal;\n\t\t\tconst morphColors = !! geometry.morphAttributes.color;\n\n\t\t\tlet toneMapping = NoToneMapping;\n\n\t\t\tif ( material.toneMapped ) {\n\n\t\t\t\tif ( _currentRenderTarget === null || _currentRenderTarget.isXRRenderTarget === true ) {\n\n\t\t\t\t\ttoneMapping = _this.toneMapping;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\t\tconst materialProperties = properties.get( material );\n\t\t\tconst lights = currentRenderState.state.lights;\n\n\t\t\tif ( _clippingEnabled === true ) {\n\n\t\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\n\n\t\t\t\t\tconst useCache =\n\t\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t\t// (#8465, #8379)\n\t\t\t\t\tclipping.setState( material, camera, useCache );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet needsProgramChange = false;\n\n\t\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\t\tif ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.outputColorSpace !== colorSpace ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( object.isBatchedMesh && materialProperties.batching === false ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( ! object.isBatchedMesh && materialProperties.batching === true ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( object.isInstancedMesh && materialProperties.instancing === false ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( ! object.isInstancedMesh && materialProperties.instancing === true ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( object.isSkinnedMesh && materialProperties.skinning === false ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( ! object.isSkinnedMesh && materialProperties.skinning === true ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( object.isInstancedMesh && materialProperties.instancingColor === true && object.instanceColor === null ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( object.isInstancedMesh && materialProperties.instancingColor === false && object.instanceColor !== null ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.envMap !== envMap ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( material.fog === true && materialProperties.fog !== fog ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t\t( materialProperties.numClippingPlanes !== clipping.numPlanes ||\n\t\t\t\t\tmaterialProperties.numIntersection !== clipping.numIntersection ) ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.vertexAlphas !== vertexAlphas ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.vertexTangents !== vertexTangents ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.morphTargets !== morphTargets ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.morphNormals !== morphNormals ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.morphColors !== morphColors ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.toneMapping !== toneMapping ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( capabilities.isWebGL2 === true && materialProperties.morphTargetsCount !== morphTargetsCount ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tneedsProgramChange = true;\n\t\t\t\tmaterialProperties.__version = material.version;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet program = materialProperties.currentProgram;\n\n\t\t\tif ( needsProgramChange === true ) {\n\n\t\t\t\tprogram = getProgram( material, scene, object );\n\n\t\t\t}\n\n\t\t\tlet refreshProgram = false;\n\t\t\tlet refreshMaterial = false;\n\t\t\tlet refreshLights = false;\n\n\t\t\tconst p_uniforms = program.getUniforms(),\n\t\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\t\trefreshProgram = true;\n\t\t\t\trefreshMaterial = true;\n\t\t\t\trefreshLights = true;\n\n\t\t\t}\n\n\t\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t\t_currentMaterialId = material.id;\n\n\t\t\t\trefreshMaterial = true;\n\n\t\t\t}\n\n\t\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\t\t// common camera uniforms\n\n\t\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl, _vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t\t}\n\n\t\t\t\t// consider moving isOrthographic to UniformLib and WebGLMaterials, see https://github.com/mrdoob/three.js/pull/26467#issuecomment-1645185067\n\n\t\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t\t}\n\n\t\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// skinning and morph target uniforms must be set even if material didn't change\n\t\t\t// auto-setting of texture unit for bone and morph texture must go before other textures\n\t\t\t// otherwise textures used for skinning and morphing can take over texture units reserved for other material textures\n\n\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\t\tconst skeleton = object.skeleton;\n\n\t\t\t\tif ( skeleton ) {\n\n\t\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\t\tif ( skeleton.boneTexture === null ) skeleton.computeBoneTexture();\n\n\t\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( object.isBatchedMesh ) {\n\n\t\t\t\tp_uniforms.setOptional( _gl, object, 'batchingTexture' );\n\t\t\t\tp_uniforms.setValue( _gl, 'batchingTexture', object._matricesTexture, textures );\n\n\t\t\t}\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\t\tif ( morphAttributes.position !== undefined || morphAttributes.normal !== undefined || ( morphAttributes.color !== undefined && capabilities.isWebGL2 === true ) ) {\n\n\t\t\t\tmorphtargets.update( object, geometry, program );\n\n\t\t\t}\n\n\t\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t\t}\n\n\t\t\t// https://github.com/mrdoob/three.js/pull/24467#issuecomment-1209031512\n\n\t\t\tif ( material.isMeshGouraudMaterial && material.envMap !== null ) {\n\n\t\t\t\tm_uniforms.envMap.value = envMap;\n\n\t\t\t\tm_uniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t\t}\n\n\t\t\tif ( refreshMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\n\t\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t\t// values\n\t\t\t\t\t//\n\t\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t\t// the GL state when required\n\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t\t}\n\n\t\t\t\t// refresh uniforms common to several materials\n\n\t\t\t\tif ( fog && material.fog === true ) {\n\n\t\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\n\n\t\t\t\t}\n\n\t\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, _pixelRatio, _height, _transmissionRenderTarget );\n\n\t\t\t\tWebGLUniforms.upload( _gl, getUniformList( materialProperties ), m_uniforms, textures );\n\n\t\t\t}\n\n\t\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\t\tWebGLUniforms.upload( _gl, getUniformList( materialProperties ), m_uniforms, textures );\n\t\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t\t}\n\n\t\t\t// common matrices\n\n\t\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\t\t// UBOs\n\n\t\t\tif ( material.isShaderMaterial || material.isRawShaderMaterial ) {\n\n\t\t\t\tconst groups = material.uniformsGroups;\n\n\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\t\t\tuniformsGroups.update( group, program );\n\t\t\t\t\t\tuniformsGroups.bind( group, program );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn program;\n\n\t\t}\n\n\t\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\t\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\t\tuniforms.directionalLights.needsUpdate = value;\n\t\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\t\tuniforms.pointLights.needsUpdate = value;\n\t\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\t\tuniforms.spotLights.needsUpdate = value;\n\t\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t\t}\n\n\t\tfunction materialNeedsLights( material ) {\n\n\t\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t\t}\n\n\t\tthis.getActiveCubeFace = function () {\n\n\t\t\treturn _currentActiveCubeFace;\n\n\t\t};\n\n\t\tthis.getActiveMipmapLevel = function () {\n\n\t\t\treturn _currentActiveMipmapLevel;\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn _currentRenderTarget;\n\n\t\t};\n\n\t\tthis.setRenderTargetTextures = function ( renderTarget, colorTexture, depthTexture ) {\n\n\t\t\tproperties.get( renderTarget.texture ).__webglTexture = colorTexture;\n\t\t\tproperties.get( renderTarget.depthTexture ).__webglTexture = depthTexture;\n\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\t\trenderTargetProperties.__hasExternalTextures = true;\n\n\t\t\tif ( renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\t\trenderTargetProperties.__autoAllocateDepthBuffer = depthTexture === undefined;\n\n\t\t\t\tif ( ! renderTargetProperties.__autoAllocateDepthBuffer ) {\n\n\t\t\t\t\t// The multisample_render_to_texture extension doesn't work properly if there\n\t\t\t\t\t// are midframe flushes and an external depth buffer. Disable use of the extension.\n\t\t\t\t\tif ( extensions.has( 'WEBGL_multisampled_render_to_texture' ) === true ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided' );\n\t\t\t\t\t\trenderTargetProperties.__useRenderToTexture = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setRenderTargetFramebuffer = function ( renderTarget, defaultFramebuffer ) {\n\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\t\trenderTargetProperties.__webglFramebuffer = defaultFramebuffer;\n\t\t\trenderTargetProperties.__useDefaultFramebuffer = defaultFramebuffer === undefined;\n\n\t\t};\n\n\t\tthis.setRenderTarget = function ( renderTarget, activeCubeFace = 0, activeMipmapLevel = 0 ) {\n\n\t\t\t_currentRenderTarget = renderTarget;\n\t\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\t\tlet useDefaultFramebuffer = true;\n\t\t\tlet framebuffer = null;\n\t\t\tlet isCube = false;\n\t\t\tlet isRenderTarget3D = false;\n\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\tif ( renderTargetProperties.__useDefaultFramebuffer !== undefined ) {\n\n\t\t\t\t\t// We need to make sure to rebind the framebuffer.\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\t\t\t\t\tuseDefaultFramebuffer = false;\n\n\t\t\t\t} else if ( renderTargetProperties.__webglFramebuffer === undefined ) {\n\n\t\t\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t\t\t} else if ( renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\t\t\t// Color and depth texture must be rebound in order for the swapchain to update.\n\t\t\t\t\ttextures.rebindTextures( renderTarget, properties.get( renderTarget.texture ).__webglTexture, properties.get( renderTarget.depthTexture ).__webglTexture );\n\n\t\t\t\t}\n\n\t\t\t\tconst texture = renderTarget.texture;\n\n\t\t\t\tif ( texture.isData3DTexture || texture.isDataArrayTexture || texture.isCompressedArrayTexture ) {\n\n\t\t\t\t\tisRenderTarget3D = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\t\tif ( Array.isArray( __webglFramebuffer[ activeCubeFace ] ) ) {\n\n\t\t\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ][ activeMipmapLevel ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tisCube = true;\n\n\t\t\t\t} else if ( ( capabilities.isWebGL2 && renderTarget.samples > 0 ) && textures.useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( Array.isArray( __webglFramebuffer ) ) {\n\n\t\t\t\t\t\tframebuffer = __webglFramebuffer[ activeMipmapLevel ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t\t} else {\n\n\t\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t\t}\n\n\t\t\tconst framebufferBound = state.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\tif ( framebufferBound && capabilities.drawBuffers && useDefaultFramebuffer ) {\n\n\t\t\t\tstate.drawBuffers( renderTarget, framebuffer );\n\n\t\t\t}\n\n\t\t\tstate.viewport( _currentViewport );\n\t\t\tstate.scissor( _currentScissor );\n\t\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + activeCubeFace, textureProperties.__webglTexture, activeMipmapLevel );\n\n\t\t\t} else if ( isRenderTarget3D ) {\n\n\t\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t\tconst layer = activeCubeFace || 0;\n\t\t\t\t_gl.framebufferTextureLayer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureProperties.__webglTexture, activeMipmapLevel || 0, layer );\n\n\t\t\t}\n\n\t\t\t_currentMaterialId = - 1; // reset current material to ensure correct uniform bindings\n\n\t\t};\n\n\t\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t\t}\n\n\t\t\tif ( framebuffer ) {\n\n\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\ttry {\n\n\t\t\t\t\tconst texture = renderTarget.texture;\n\t\t\t\t\tconst textureFormat = texture.format;\n\t\t\t\t\tconst textureType = texture.type;\n\n\t\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst halfFloatSupportedByExt = ( textureType === HalfFloatType ) && ( extensions.has( 'EXT_color_buffer_half_float' ) || ( capabilities.isWebGL2 && extensions.has( 'EXT_color_buffer_float' ) ) );\n\n\t\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.has( 'OES_texture_float' ) || extensions.has( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t\t! halfFloatSupportedByExt ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} finally {\n\n\t\t\t\t\t// restore framebuffer of current render target if necessary\n\n\t\t\t\t\tconst framebuffer = ( _currentRenderTarget !== null ) ? properties.get( _currentRenderTarget ).__webglFramebuffer : null;\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.copyFramebufferToTexture = function ( position, texture, level = 0 ) {\n\n\t\t\tconst levelScale = Math.pow( 2, - level );\n\t\t\tconst width = Math.floor( texture.image.width * levelScale );\n\t\t\tconst height = Math.floor( texture.image.height * levelScale );\n\n\t\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t\t_gl.copyTexSubImage2D( _gl.TEXTURE_2D, level, 0, 0, position.x, position.y, width, height );\n\n\t\t\tstate.unbindTexture();\n\n\t\t};\n\n\t\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level = 0 ) {\n\n\t\t\tconst width = srcTexture.image.width;\n\t\t\tconst height = srcTexture.image.height;\n\t\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\t\tconst glType = utils.convert( dstTexture.type );\n\n\t\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t\t// As another texture upload may have changed pixelStorei\n\t\t\t// parameters, make sure they are correct for the dstTexture\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, dstTexture.flipY );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, dstTexture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, dstTexture.unpackAlignment );\n\n\t\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t\t} else {\n\n\t\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\t\t_gl.compressedTexSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Generate mipmaps only when copying level 0\n\t\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\t\tstate.unbindTexture();\n\n\t\t};\n\n\t\tthis.copyTextureToTexture3D = function ( sourceBox, position, srcTexture, dstTexture, level = 0 ) {\n\n\t\t\tif ( _this.isWebGL1Renderer ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst width = sourceBox.max.x - sourceBox.min.x + 1;\n\t\t\tconst height = sourceBox.max.y - sourceBox.min.y + 1;\n\t\t\tconst depth = sourceBox.max.z - sourceBox.min.z + 1;\n\t\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\t\tconst glType = utils.convert( dstTexture.type );\n\t\t\tlet glTarget;\n\n\t\t\tif ( dstTexture.isData3DTexture ) {\n\n\t\t\t\ttextures.setTexture3D( dstTexture, 0 );\n\t\t\t\tglTarget = _gl.TEXTURE_3D;\n\n\t\t\t} else if ( dstTexture.isDataArrayTexture || dstTexture.isCompressedArrayTexture ) {\n\n\t\t\t\ttextures.setTexture2DArray( dstTexture, 0 );\n\t\t\t\tglTarget = _gl.TEXTURE_2D_ARRAY;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, dstTexture.flipY );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, dstTexture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, dstTexture.unpackAlignment );\n\n\t\t\tconst unpackRowLen = _gl.getParameter( _gl.UNPACK_ROW_LENGTH );\n\t\t\tconst unpackImageHeight = _gl.getParameter( _gl.UNPACK_IMAGE_HEIGHT );\n\t\t\tconst unpackSkipPixels = _gl.getParameter( _gl.UNPACK_SKIP_PIXELS );\n\t\t\tconst unpackSkipRows = _gl.getParameter( _gl.UNPACK_SKIP_ROWS );\n\t\t\tconst unpackSkipImages = _gl.getParameter( _gl.UNPACK_SKIP_IMAGES );\n\n\t\t\tconst image = srcTexture.isCompressedTexture ? srcTexture.mipmaps[ level ] : srcTexture.image;\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ROW_LENGTH, image.width );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_IMAGE_HEIGHT, image.height );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_PIXELS, sourceBox.min.x );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_ROWS, sourceBox.min.y );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_IMAGES, sourceBox.min.z );\n\n\t\t\tif ( srcTexture.isDataTexture || srcTexture.isData3DTexture ) {\n\n\t\t\t\t_gl.texSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image.data );\n\n\t\t\t} else {\n\n\t\t\t\tif ( srcTexture.isCompressedArrayTexture ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture.' );\n\t\t\t\t\t_gl.compressedTexSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, image.data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.texSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ROW_LENGTH, unpackRowLen );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_IMAGE_HEIGHT, unpackImageHeight );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_PIXELS, unpackSkipPixels );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_ROWS, unpackSkipRows );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_IMAGES, unpackSkipImages );\n\n\t\t\t// Generate mipmaps only when copying level 0\n\t\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( glTarget );\n\n\t\t\tstate.unbindTexture();\n\n\t\t};\n\n\t\tthis.initTexture = function ( texture ) {\n\n\t\t\tif ( texture.isCubeTexture ) {\n\n\t\t\t\ttextures.setTextureCube( texture, 0 );\n\n\t\t\t} else if ( texture.isData3DTexture ) {\n\n\t\t\t\ttextures.setTexture3D( texture, 0 );\n\n\t\t\t} else if ( texture.isDataArrayTexture || texture.isCompressedArrayTexture ) {\n\n\t\t\t\ttextures.setTexture2DArray( texture, 0 );\n\n\t\t\t} else {\n\n\t\t\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t};\n\n\t\tthis.resetState = function () {\n\n\t\t\t_currentActiveCubeFace = 0;\n\t\t\t_currentActiveMipmapLevel = 0;\n\t\t\t_currentRenderTarget = null;\n\n\t\t\tstate.reset();\n\t\t\tbindingStates.reset();\n\n\t\t};\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) );\n\n\t\t}\n\n\t}\n\n\tget coordinateSystem() {\n\n\t\treturn WebGLCoordinateSystem;\n\n\t}\n\n\tget outputColorSpace() {\n\n\t\treturn this._outputColorSpace;\n\n\t}\n\n\tset outputColorSpace( colorSpace ) {\n\n\t\tthis._outputColorSpace = colorSpace;\n\n\t\tconst gl = this.getContext();\n\t\tgl.drawingBufferColorSpace = colorSpace === DisplayP3ColorSpace ? 'display-p3' : 'srgb';\n\t\tgl.unpackColorSpace = ColorManagement.workingColorSpace === LinearDisplayP3ColorSpace ? 'display-p3' : 'srgb';\n\n\t}\n\n\tget outputEncoding() { // @deprecated, r152\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead.' );\n\t\treturn this.outputColorSpace === SRGBColorSpace ? sRGBEncoding : LinearEncoding;\n\n\t}\n\n\tset outputEncoding( encoding ) { // @deprecated, r152\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead.' );\n\t\tthis.outputColorSpace = encoding === sRGBEncoding ? SRGBColorSpace : LinearSRGBColorSpace;\n\n\t}\n\n\tget useLegacyLights() { // @deprecated, r155\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733.' );\n\t\treturn this._useLegacyLights;\n\n\t}\n\n\tset useLegacyLights( value ) { // @deprecated, r155\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733.' );\n\t\tthis._useLegacyLights = value;\n\n\t}\n\n}\n\nclass WebGL1Renderer extends WebGLRenderer {}\n\nWebGL1Renderer.prototype.isWebGL1Renderer = true;\n\nclass FogExp2 {\n\n\tconstructor( color, density = 0.00025 ) {\n\n\t\tthis.isFogExp2 = true;\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\t\tthis.density = density;\n\n\t}\n\n\tclone() {\n\n\t\treturn new FogExp2( this.color, this.density );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'FogExp2',\n\t\t\tname: this.name,\n\t\t\tcolor: this.color.getHex(),\n\t\t\tdensity: this.density\n\t\t};\n\n\t}\n\n}\n\nclass Fog {\n\n\tconstructor( color, near = 1, far = 1000 ) {\n\n\t\tthis.isFog = true;\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Fog( this.color, this.near, this.far );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'Fog',\n\t\t\tname: this.name,\n\t\t\tcolor: this.color.getHex(),\n\t\t\tnear: this.near,\n\t\t\tfar: this.far\n\t\t};\n\n\t}\n\n}\n\nclass Scene extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isScene = true;\n\n\t\tthis.type = 'Scene';\n\n\t\tthis.background = null;\n\t\tthis.environment = null;\n\t\tthis.fog = null;\n\n\t\tthis.backgroundBlurriness = 0;\n\t\tthis.backgroundIntensity = 1;\n\n\t\tthis.overrideMaterial = null;\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) );\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tthis.backgroundBlurriness = source.backgroundBlurriness;\n\t\tthis.backgroundIntensity = source.backgroundIntensity;\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\t\tif ( this.backgroundBlurriness > 0 ) data.object.backgroundBlurriness = this.backgroundBlurriness;\n\t\tif ( this.backgroundIntensity !== 1 ) data.object.backgroundIntensity = this.backgroundIntensity;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass InterleavedBuffer {\n\n\tconstructor( array, stride ) {\n\n\t\tthis.isInterleavedBuffer = true;\n\n\t\tthis.array = array;\n\t\tthis.stride = stride;\n\t\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis._updateRange = { offset: 0, count: - 1 };\n\t\tthis.updateRanges = [];\n\n\t\tthis.version = 0;\n\n\t\tthis.uuid = generateUUID();\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tget updateRange() {\n\n\t\twarnOnce( 'THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead.' ); // @deprecated, r159\n\t\treturn this._updateRange;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\taddUpdateRange( start, count ) {\n\n\t\tthis.updateRanges.push( { start, count } );\n\n\t}\n\n\tclearUpdateRanges() {\n\n\t\tthis.updateRanges.length = 0;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new this.constructor( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.from( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n}\n\nconst _vector$6 = /*@__PURE__*/ new Vector3();\n\nclass InterleavedBufferAttribute {\n\n\tconstructor( interleavedBuffer, itemSize, offset, normalized = false ) {\n\n\t\tthis.isInterleavedBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.data = interleavedBuffer;\n\t\tthis.itemSize = itemSize;\n\t\tthis.offset = offset;\n\n\t\tthis.normalized = normalized;\n\n\t}\n\n\tget count() {\n\n\t\treturn this.data.count;\n\n\t}\n\n\tget array() {\n\n\t\treturn this.data.array;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tthis.data.needsUpdate = value;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index, component ) {\n\n\t\tlet value = this.array[ index * this.data.stride + this.offset + component ];\n\n\t\tif ( this.normalized ) value = denormalize( value, this.array );\n\n\t\treturn value;\n\n\t}\n\n\tsetComponent( index, component, value ) {\n\n\t\tif ( this.normalized ) value = normalize( value, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + component ] = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tif ( this.normalized ) x = normalize( x, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tif ( this.normalized ) y = normalize( y, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tif ( this.normalized ) z = normalize( z, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tif ( this.normalized ) w = normalize( w, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tgetX( index ) {\n\n\t\tlet x = this.data.array[ index * this.data.stride + this.offset ];\n\n\t\tif ( this.normalized ) x = denormalize( x, this.array );\n\n\t\treturn x;\n\n\t}\n\n\tgetY( index ) {\n\n\t\tlet y = this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t\tif ( this.normalized ) y = denormalize( y, this.array );\n\n\t\treturn y;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\tlet z = this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t\tif ( this.normalized ) z = denormalize( z, this.array );\n\n\t\treturn z;\n\n\t}\n\n\tgetW( index ) {\n\n\t\tlet w = this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t\tif ( this.normalized ) w = denormalize( w, this.array );\n\n\t\treturn w;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\t\t\tw = normalize( w, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\n\n\t\t} else {\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\n\n\t\t\t}\n\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\n\n\t\t}\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// de-interleave data and save it as an ordinary buffer attribute for now\n\n\t\t\treturn {\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\ttype: this.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t} else {\n\n\t\t\t// save as true interleaved attribute\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisInterleavedBufferAttribute: true,\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\tdata: this.data.uuid,\n\t\t\t\toffset: this.offset,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t}\n\n\t}\n\n}\n\nclass SpriteMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isSpriteMaterial = true;\n\n\t\tthis.type = 'SpriteMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.rotation = 0;\n\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.transparent = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nlet _geometry;\n\nconst _intersectPoint = /*@__PURE__*/ new Vector3();\nconst _worldScale = /*@__PURE__*/ new Vector3();\nconst _mvPosition = /*@__PURE__*/ new Vector3();\n\nconst _alignedPosition = /*@__PURE__*/ new Vector2();\nconst _rotatedPosition = /*@__PURE__*/ new Vector2();\nconst _viewWorldMatrix = /*@__PURE__*/ new Matrix4();\n\nconst _vA = /*@__PURE__*/ new Vector3();\nconst _vB = /*@__PURE__*/ new Vector3();\nconst _vC = /*@__PURE__*/ new Vector3();\n\nconst _uvA = /*@__PURE__*/ new Vector2();\nconst _uvB = /*@__PURE__*/ new Vector2();\nconst _uvC = /*@__PURE__*/ new Vector2();\n\nclass Sprite extends Object3D {\n\n\tconstructor( material = new SpriteMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isSprite = true;\n\n\t\tthis.type = 'Sprite';\n\n\t\tif ( _geometry === undefined ) {\n\n\t\t\t_geometry = new BufferGeometry();\n\n\t\t\tconst float32Array = new Float32Array( [\n\t\t\t\t- 0.5, - 0.5, 0, 0, 0,\n\t\t\t\t0.5, - 0.5, 0, 1, 0,\n\t\t\t\t0.5, 0.5, 0, 1, 1,\n\t\t\t\t- 0.5, 0.5, 0, 0, 1\n\t\t\t] );\n\n\t\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\t\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\t\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\t\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\t\t}\n\n\t\tthis.geometry = _geometry;\n\t\tthis.material = material;\n\n\t\tthis.center = new Vector2( 0.5, 0.5 );\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tif ( raycaster.camera === null ) {\n\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\n\n\t\t}\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\n\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\n\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\n\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\n\n\t\t}\n\n\t\tconst rotation = this.material.rotation;\n\t\tlet sin, cos;\n\n\t\tif ( rotation !== 0 ) {\n\n\t\t\tcos = Math.cos( rotation );\n\t\t\tsin = Math.sin( rotation );\n\n\t\t}\n\n\t\tconst center = this.center;\n\n\t\ttransformVertex( _vA.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vB.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vC.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\n\t\t_uvA.set( 0, 0 );\n\t\t_uvB.set( 1, 0 );\n\t\t_uvC.set( 1, 1 );\n\n\t\t// check first triangle\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA, _vB, _vC, false, _intersectPoint );\n\n\t\tif ( intersect === null ) {\n\n\t\t\t// check second triangle\n\t\t\ttransformVertex( _vB.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\t\t_uvB.set( 0, 1 );\n\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA, _vC, _vB, false, _intersectPoint );\n\t\t\tif ( intersect === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: _intersectPoint.clone(),\n\t\t\tuv: Triangle.getInterpolation( _intersectPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() ),\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\n\n\t\tthis.material = source.material;\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\n\n\t// compute position in camera space\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\n\n\t// to check if rotation is not zero\n\tif ( sin !== undefined ) {\n\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\n\n\t} else {\n\n\t\t_rotatedPosition.copy( _alignedPosition );\n\n\t}\n\n\n\tvertexPosition.copy( mvPosition );\n\tvertexPosition.x += _rotatedPosition.x;\n\tvertexPosition.y += _rotatedPosition.y;\n\n\t// transform to world space\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\n\n}\n\nconst _v1$2 = /*@__PURE__*/ new Vector3();\nconst _v2$1 = /*@__PURE__*/ new Vector3();\n\nclass LOD extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis._currentLevel = 0;\n\n\t\tthis.type = 'LOD';\n\n\t\tObject.defineProperties( this, {\n\t\t\tlevels: {\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: []\n\t\t\t},\n\t\t\tisLOD: {\n\t\t\t\tvalue: true,\n\t\t\t}\n\t\t} );\n\n\t\tthis.autoUpdate = true;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source, false );\n\n\t\tconst levels = source.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance, level.hysteresis );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\taddLevel( object, distance = 0, hysteresis = 0 ) {\n\n\t\tdistance = Math.abs( distance );\n\n\t\tconst levels = this.levels;\n\n\t\tlet l;\n\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, hysteresis: hysteresis, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t}\n\n\tgetCurrentLevel() {\n\n\t\treturn this._currentLevel;\n\n\t}\n\n\n\n\tgetObjectForDistance( distance ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tlet levelDistance = levels[ i ].distance;\n\n\t\t\t\tif ( levels[ i ].object.visible ) {\n\n\t\t\t\t\tlevelDistance -= levelDistance * levels[ i ].hysteresis;\n\n\t\t\t\t}\n\n\t\t\t\tif ( distance < levelDistance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1$2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$2 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1$2.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2$1.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = _v1$2.distanceTo( _v2$1 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tlet levelDistance = levels[ i ].distance;\n\n\t\t\t\tif ( levels[ i ].object.visible ) {\n\n\t\t\t\t\tlevelDistance -= levelDistance * levels[ i ].hysteresis;\n\n\t\t\t\t}\n\n\t\t\t\tif ( distance >= levelDistance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tconst levels = this.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance,\n\t\t\t\thysteresis: level.hysteresis\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _basePosition = /*@__PURE__*/ new Vector3();\n\nconst _skinIndex = /*@__PURE__*/ new Vector4();\nconst _skinWeight = /*@__PURE__*/ new Vector4();\n\nconst _vector3 = /*@__PURE__*/ new Vector3();\nconst _matrix4 = /*@__PURE__*/ new Matrix4();\nconst _vertex = /*@__PURE__*/ new Vector3();\n\nconst _sphere$4 = /*@__PURE__*/ new Sphere();\nconst _inverseMatrix$2 = /*@__PURE__*/ new Matrix4();\nconst _ray$2 = /*@__PURE__*/ new Ray();\n\nclass SkinnedMesh extends Mesh {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isSkinnedMesh = true;\n\n\t\tthis.type = 'SkinnedMesh';\n\n\t\tthis.bindMode = AttachedBindMode;\n\t\tthis.bindMatrix = new Matrix4();\n\t\tthis.bindMatrixInverse = new Matrix4();\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.makeEmpty();\n\n\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\n\t\tfor ( let i = 0; i < positionAttribute.count; i ++ ) {\n\n\t\t\tthis.getVertexPosition( i, _vertex );\n\t\t\tthis.boundingBox.expandByPoint( _vertex );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.makeEmpty();\n\n\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\n\t\tfor ( let i = 0; i < positionAttribute.count; i ++ ) {\n\n\t\t\tthis.getVertexPosition( i, _vertex );\n\t\t\tthis.boundingSphere.expandByPoint( _vertex );\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.bindMode = source.bindMode;\n\t\tthis.bindMatrix.copy( source.bindMatrix );\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\n\n\t\tthis.skeleton = source.skeleton;\n\n\t\tif ( source.boundingBox !== null ) this.boundingBox = source.boundingBox.clone();\n\t\tif ( source.boundingSphere !== null ) this.boundingSphere = source.boundingSphere.clone();\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// test with bounding sphere in world space\n\n\t\tif ( this.boundingSphere === null ) this.computeBoundingSphere();\n\n\t\t_sphere$4.copy( this.boundingSphere );\n\t\t_sphere$4.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$4 ) === false ) return;\n\n\t\t// convert ray to local space of skinned mesh\n\n\t\t_inverseMatrix$2.copy( matrixWorld ).invert();\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\n\n\t\t// test with bounding box in local space\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tif ( _ray$2.intersectsBox( this.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\t// test for intersections with geometry\n\n\t\tthis._computeIntersections( raycaster, intersects, _ray$2 );\n\n\t}\n\n\tgetVertexPosition( index, target ) {\n\n\t\tsuper.getVertexPosition( index, target );\n\n\t\tthis.applyBoneTransform( index, target );\n\n\t\treturn target;\n\n\t}\n\n\tbind( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.copy( bindMatrix ).invert();\n\n\t}\n\n\tpose() {\n\n\t\tthis.skeleton.pose();\n\n\t}\n\n\tnormalizeSkinWeights() {\n\n\t\tconst vector = new Vector4();\n\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.fromBufferAttribute( skinWeight, i );\n\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.bindMode === AttachedBindMode ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.matrixWorld ).invert();\n\n\t\t} else if ( this.bindMode === DetachedBindMode ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.bindMatrix ).invert();\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t}\n\n\tapplyBoneTransform( index, vector ) {\n\n\t\tconst skeleton = this.skeleton;\n\t\tconst geometry = this.geometry;\n\n\t\t_skinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\n\t\t_skinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\n\n\t\t_basePosition.copy( vector ).applyMatrix4( this.bindMatrix );\n\n\t\tvector.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\tconst weight = _skinWeight.getComponent( i );\n\n\t\t\tif ( weight !== 0 ) {\n\n\t\t\t\tconst boneIndex = _skinIndex.getComponent( i );\n\n\t\t\t\t_matrix4.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\tvector.addScaledVector( _vector3.copy( _basePosition ).applyMatrix4( _matrix4 ), weight );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn vector.applyMatrix4( this.bindMatrixInverse );\n\n\t}\n\n}\n\nclass Bone extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isBone = true;\n\n\t\tthis.type = 'Bone';\n\n\t}\n\n}\n\nclass DataTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, format, type, mapping, wrapS, wrapT, magFilter = NearestFilter, minFilter = NearestFilter, anisotropy, colorSpace ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, colorSpace );\n\n\t\tthis.isDataTexture = true;\n\n\t\tthis.image = { data: data, width: width, height: height };\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nconst _offsetMatrix = /*@__PURE__*/ new Matrix4();\nconst _identityMatrix$1 = /*@__PURE__*/ new Matrix4();\n\nclass Skeleton {\n\n\tconstructor( bones = [], boneInverses = [] ) {\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.bones = bones.slice( 0 );\n\t\tthis.boneInverses = boneInverses;\n\t\tthis.boneMatrices = null;\n\n\t\tthis.boneTexture = null;\n\n\t\tthis.init();\n\n\t}\n\n\tinit() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tthis.boneMatrices = new Float32Array( bones.length * 16 );\n\n\t\t// calculate inverse bone matrices if necessary\n\n\t\tif ( boneInverses.length === 0 ) {\n\n\t\t\tthis.calculateInverses();\n\n\t\t} else {\n\n\t\t\t// handle special case\n\n\t\t\tif ( bones.length !== boneInverses.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.' );\n\n\t\t\t\tthis.boneInverses = [];\n\n\t\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcalculateInverses() {\n\n\t\tthis.boneInverses.length = 0;\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.copy( this.bones[ i ].matrixWorld ).invert();\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t}\n\n\tpose() {\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.copy( this.boneInverses[ i ] ).invert();\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.copy( bone.parent.matrixWorld ).invert();\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdate() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\t\tconst boneMatrices = this.boneMatrices;\n\t\tconst boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix$1;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== null ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t}\n\n\tcomputeBoneTexture() {\n\n\t\t// layout (1 matrix = 4 pixels)\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\t\tlet size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\tsize = Math.ceil( size / 4 ) * 4;\n\t\tsize = Math.max( size, 4 );\n\n\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\tboneMatrices.set( this.boneMatrices ); // copy current values\n\n\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\t\tboneTexture.needsUpdate = true;\n\n\t\tthis.boneMatrices = boneMatrices;\n\t\tthis.boneTexture = boneTexture;\n\n\t\treturn this;\n\n\t}\n\n\tgetBoneByName( name ) {\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tdispose( ) {\n\n\t\tif ( this.boneTexture !== null ) {\n\n\t\t\tthis.boneTexture.dispose();\n\n\t\t\tthis.boneTexture = null;\n\n\t\t}\n\n\t}\n\n\tfromJSON( json, bones ) {\n\n\t\tthis.uuid = json.uuid;\n\n\t\tfor ( let i = 0, l = json.bones.length; i < l; i ++ ) {\n\n\t\t\tconst uuid = json.bones[ i ];\n\t\t\tlet bone = bones[ uuid ];\n\n\t\t\tif ( bone === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: No bone found with UUID:', uuid );\n\t\t\t\tbone = new Bone();\n\n\t\t\t}\n\n\t\t\tthis.bones.push( bone );\n\t\t\tthis.boneInverses.push( new Matrix4().fromArray( json.boneInverses[ i ] ) );\n\n\t\t}\n\n\t\tthis.init();\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'Skeleton',\n\t\t\t\tgenerator: 'Skeleton.toJSON'\n\t\t\t},\n\t\t\tbones: [],\n\t\t\tboneInverses: []\n\t\t};\n\n\t\tdata.uuid = this.uuid;\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tfor ( let i = 0, l = bones.length; i < l; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\t\t\tdata.bones.push( bone.uuid );\n\n\t\t\tconst boneInverse = boneInverses[ i ];\n\t\t\tdata.boneInverses.push( boneInverse.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass InstancedBufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized, meshPerAttribute = 1 ) {\n\n\t\tsuper( array, itemSize, normalized );\n\n\t\tthis.isInstancedBufferAttribute = true;\n\n\t\tthis.meshPerAttribute = meshPerAttribute;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _instanceLocalMatrix = /*@__PURE__*/ new Matrix4();\nconst _instanceWorldMatrix = /*@__PURE__*/ new Matrix4();\n\nconst _instanceIntersects = [];\n\nconst _box3 = /*@__PURE__*/ new Box3();\nconst _identity = /*@__PURE__*/ new Matrix4();\nconst _mesh$1 = /*@__PURE__*/ new Mesh();\nconst _sphere$3 = /*@__PURE__*/ new Sphere();\n\nclass InstancedMesh extends Mesh {\n\n\tconstructor( geometry, material, count ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isInstancedMesh = true;\n\n\t\tthis.instanceMatrix = new InstancedBufferAttribute( new Float32Array( count * 16 ), 16 );\n\t\tthis.instanceColor = null;\n\n\t\tthis.count = count;\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.setMatrixAt( i, _identity );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tconst geometry = this.geometry;\n\t\tconst count = this.count;\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\tgeometry.computeBoundingBox();\n\n\t\t}\n\n\t\tthis.boundingBox.makeEmpty();\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.getMatrixAt( i, _instanceLocalMatrix );\n\n\t\t\t_box3.copy( geometry.boundingBox ).applyMatrix4( _instanceLocalMatrix );\n\n\t\t\tthis.boundingBox.union( _box3 );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tconst geometry = this.geometry;\n\t\tconst count = this.count;\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere === null ) {\n\n\t\t\tgeometry.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.makeEmpty();\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.getMatrixAt( i, _instanceLocalMatrix );\n\n\t\t\t_sphere$3.copy( geometry.boundingSphere ).applyMatrix4( _instanceLocalMatrix );\n\n\t\t\tthis.boundingSphere.union( _sphere$3 );\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\n\n\t\tif ( source.instanceColor !== null ) this.instanceColor = source.instanceColor.clone();\n\n\t\tthis.count = source.count;\n\n\t\tif ( source.boundingBox !== null ) this.boundingBox = source.boundingBox.clone();\n\t\tif ( source.boundingSphere !== null ) this.boundingSphere = source.boundingSphere.clone();\n\n\t\treturn this;\n\n\t}\n\n\tgetColorAt( index, color ) {\n\n\t\tcolor.fromArray( this.instanceColor.array, index * 3 );\n\n\t}\n\n\tgetMatrixAt( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst raycastTimes = this.count;\n\n\t\t_mesh$1.geometry = this.geometry;\n\t\t_mesh$1.material = this.material;\n\n\t\tif ( _mesh$1.material === undefined ) return;\n\n\t\t// test with bounding sphere first\n\n\t\tif ( this.boundingSphere === null ) this.computeBoundingSphere();\n\n\t\t_sphere$3.copy( this.boundingSphere );\n\t\t_sphere$3.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\n\n\t\t// now test each instance\n\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh$1.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh$1.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\n\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\n\t\t\t\tintersect.instanceId = instanceId;\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_instanceIntersects.length = 0;\n\n\t\t}\n\n\t}\n\n\tsetColorAt( index, color ) {\n\n\t\tif ( this.instanceColor === null ) {\n\n\t\t\tthis.instanceColor = new InstancedBufferAttribute( new Float32Array( this.instanceMatrix.count * 3 ), 3 );\n\n\t\t}\n\n\t\tcolor.toArray( this.instanceColor.array, index * 3 );\n\n\t}\n\n\tsetMatrixAt( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nfunction sortOpaque( a, b ) {\n\n\treturn a.z - b.z;\n\n}\n\nfunction sortTransparent( a, b ) {\n\n\treturn b.z - a.z;\n\n}\n\nclass MultiDrawRenderList {\n\n\tconstructor() {\n\n\t\tthis.index = 0;\n\t\tthis.pool = [];\n\t\tthis.list = [];\n\n\t}\n\n\tpush( drawRange, z ) {\n\n\t\tconst pool = this.pool;\n\t\tconst list = this.list;\n\t\tif ( this.index >= pool.length ) {\n\n\t\t\tpool.push( {\n\n\t\t\t\tstart: - 1,\n\t\t\t\tcount: - 1,\n\t\t\t\tz: - 1,\n\n\t\t\t} );\n\n\t\t}\n\n\t\tconst item = pool[ this.index ];\n\t\tlist.push( item );\n\t\tthis.index ++;\n\n\t\titem.start = drawRange.start;\n\t\titem.count = drawRange.count;\n\t\titem.z = z;\n\n\t}\n\n\treset() {\n\n\t\tthis.list.length = 0;\n\t\tthis.index = 0;\n\n\t}\n\n}\n\nconst ID_ATTR_NAME = 'batchId';\nconst _matrix = /*@__PURE__*/ new Matrix4();\nconst _invMatrixWorld = /*@__PURE__*/ new Matrix4();\nconst _identityMatrix = /*@__PURE__*/ new Matrix4();\nconst _projScreenMatrix$2 = /*@__PURE__*/ new Matrix4();\nconst _frustum = /*@__PURE__*/ new Frustum();\nconst _box$1 = /*@__PURE__*/ new Box3();\nconst _sphere$2 = /*@__PURE__*/ new Sphere();\nconst _vector$5 = /*@__PURE__*/ new Vector3();\nconst _renderList = /*@__PURE__*/ new MultiDrawRenderList();\nconst _mesh = /*@__PURE__*/ new Mesh();\nconst _batchIntersects = [];\n\n// @TODO: SkinnedMesh support?\n// @TODO: geometry.groups support?\n// @TODO: geometry.drawRange support?\n// @TODO: geometry.morphAttributes support?\n// @TODO: Support uniform parameter per geometry\n// @TODO: Add an \"optimize\" function to pack geometry and remove data gaps\n\n// copies data from attribute \"src\" into \"target\" starting at \"targetOffset\"\nfunction copyAttributeData( src, target, targetOffset = 0 ) {\n\n\tconst itemSize = target.itemSize;\n\tif ( src.isInterleavedBufferAttribute || src.array.constructor !== target.array.constructor ) {\n\n\t\t// use the component getters and setters if the array data cannot\n\t\t// be copied directly\n\t\tconst vertexCount = src.count;\n\t\tfor ( let i = 0; i < vertexCount; i ++ ) {\n\n\t\t\tfor ( let c = 0; c < itemSize; c ++ ) {\n\n\t\t\t\ttarget.setComponent( i + targetOffset, c, src.getComponent( i, c ) );\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\t// faster copy approach using typed array set function\n\t\ttarget.array.set( src.array, targetOffset * itemSize );\n\n\t}\n\n\ttarget.needsUpdate = true;\n\n}\n\nclass BatchedMesh extends Mesh {\n\n\tget maxGeometryCount() {\n\n\t\treturn this._maxGeometryCount;\n\n\t}\n\n\tconstructor( maxGeometryCount, maxVertexCount, maxIndexCount = maxVertexCount * 2, material ) {\n\n\t\tsuper( new BufferGeometry(), material );\n\n\t\tthis.isBatchedMesh = true;\n\t\tthis.perObjectFrustumCulled = true;\n\t\tthis.sortObjects = true;\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\t\tthis.customSort = null;\n\n\t\tthis._drawRanges = [];\n\t\tthis._reservedRanges = [];\n\n\t\tthis._visibility = [];\n\t\tthis._active = [];\n\t\tthis._bounds = [];\n\n\t\tthis._maxGeometryCount = maxGeometryCount;\n\t\tthis._maxVertexCount = maxVertexCount;\n\t\tthis._maxIndexCount = maxIndexCount;\n\n\t\tthis._geometryInitialized = false;\n\t\tthis._geometryCount = 0;\n\t\tthis._multiDrawCounts = new Int32Array( maxGeometryCount );\n\t\tthis._multiDrawStarts = new Int32Array( maxGeometryCount );\n\t\tthis._multiDrawCount = 0;\n\t\tthis._visibilityChanged = true;\n\n\t\t// Local matrix per geometry by using data texture\n\t\tthis._matricesTexture = null;\n\n\t\tthis._initMatricesTexture();\n\n\t}\n\n\t_initMatricesTexture() {\n\n\t\t// layout (1 matrix = 4 pixels)\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t//  with  8x8  pixel texture max   16 matrices * 4 pixels =  (8 * 8)\n\t\t//       16x16 pixel texture max   64 matrices * 4 pixels = (16 * 16)\n\t\t//       32x32 pixel texture max  256 matrices * 4 pixels = (32 * 32)\n\t\t//       64x64 pixel texture max 1024 matrices * 4 pixels = (64 * 64)\n\n\t\tlet size = Math.sqrt( this._maxGeometryCount * 4 ); // 4 pixels needed for 1 matrix\n\t\tsize = Math.ceil( size / 4 ) * 4;\n\t\tsize = Math.max( size, 4 );\n\n\t\tconst matricesArray = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\tconst matricesTexture = new DataTexture( matricesArray, size, size, RGBAFormat, FloatType );\n\n\t\tthis._matricesTexture = matricesTexture;\n\n\t}\n\n\t_initializeGeometry( reference ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst maxVertexCount = this._maxVertexCount;\n\t\tconst maxGeometryCount = this._maxGeometryCount;\n\t\tconst maxIndexCount = this._maxIndexCount;\n\t\tif ( this._geometryInitialized === false ) {\n\n\t\t\tfor ( const attributeName in reference.attributes ) {\n\n\t\t\t\tconst srcAttribute = reference.getAttribute( attributeName );\n\t\t\t\tconst { array, itemSize, normalized } = srcAttribute;\n\n\t\t\t\tconst dstArray = new array.constructor( maxVertexCount * itemSize );\n\t\t\t\tconst dstAttribute = new srcAttribute.constructor( dstArray, itemSize, normalized );\n\t\t\t\tdstAttribute.setUsage( srcAttribute.usage );\n\n\t\t\t\tgeometry.setAttribute( attributeName, dstAttribute );\n\n\t\t\t}\n\n\t\t\tif ( reference.getIndex() !== null ) {\n\n\t\t\t\tconst indexArray = maxVertexCount > 65536\n\t\t\t\t\t? new Uint32Array( maxIndexCount )\n\t\t\t\t\t: new Uint16Array( maxIndexCount );\n\n\t\t\t\tgeometry.setIndex( new BufferAttribute( indexArray, 1 ) );\n\n\t\t\t}\n\n\t\t\tconst idArray = maxGeometryCount > 65536\n\t\t\t\t? new Uint32Array( maxVertexCount )\n\t\t\t\t: new Uint16Array( maxVertexCount );\n\t\t\tgeometry.setAttribute( ID_ATTR_NAME, new BufferAttribute( idArray, 1 ) );\n\n\t\t\tthis._geometryInitialized = true;\n\n\t\t}\n\n\t}\n\n\t// Make sure the geometry is compatible with the existing combined geometry atributes\n\t_validateGeometry( geometry ) {\n\n\t\t// check that the geometry doesn't have a version of our reserved id attribute\n\t\tif ( geometry.getAttribute( ID_ATTR_NAME ) ) {\n\n\t\t\tthrow new Error( `BatchedMesh: Geometry cannot use attribute \"${ ID_ATTR_NAME }\"` );\n\n\t\t}\n\n\t\t// check to ensure the geometries are using consistent attributes and indices\n\t\tconst batchGeometry = this.geometry;\n\t\tif ( Boolean( geometry.getIndex() ) !== Boolean( batchGeometry.getIndex() ) ) {\n\n\t\t\tthrow new Error( 'BatchedMesh: All geometries must consistently have \"index\".' );\n\n\t\t}\n\n\t\tfor ( const attributeName in batchGeometry.attributes ) {\n\n\t\t\tif ( attributeName === ID_ATTR_NAME ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( ! geometry.hasAttribute( attributeName ) ) {\n\n\t\t\t\tthrow new Error( `BatchedMesh: Added geometry missing \"${ attributeName }\". All geometries must have consistent attributes.` );\n\n\t\t\t}\n\n\t\t\tconst srcAttribute = geometry.getAttribute( attributeName );\n\t\t\tconst dstAttribute = batchGeometry.getAttribute( attributeName );\n\t\t\tif ( srcAttribute.itemSize !== dstAttribute.itemSize || srcAttribute.normalized !== dstAttribute.normalized ) {\n\n\t\t\t\tthrow new Error( 'BatchedMesh: All attributes must have a consistent itemSize and normalized value.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tsetCustomSort( func ) {\n\n\t\tthis.customSort = func;\n\t\treturn this;\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst geometryCount = this._geometryCount;\n\t\tconst boundingBox = this.boundingBox;\n\t\tconst active = this._active;\n\n\t\tboundingBox.makeEmpty();\n\t\tfor ( let i = 0; i < geometryCount; i ++ ) {\n\n\t\t\tif ( active[ i ] === false ) continue;\n\n\t\t\tthis.getMatrixAt( i, _matrix );\n\t\t\tthis.getBoundingBoxAt( i, _box$1 ).applyMatrix4( _matrix );\n\t\t\tboundingBox.union( _box$1 );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst geometryCount = this._geometryCount;\n\t\tconst boundingSphere = this.boundingSphere;\n\t\tconst active = this._active;\n\n\t\tboundingSphere.makeEmpty();\n\t\tfor ( let i = 0; i < geometryCount; i ++ ) {\n\n\t\t\tif ( active[ i ] === false ) continue;\n\n\t\t\tthis.getMatrixAt( i, _matrix );\n\t\t\tthis.getBoundingSphereAt( i, _sphere$2 ).applyMatrix4( _matrix );\n\t\t\tboundingSphere.union( _sphere$2 );\n\n\t\t}\n\n\t}\n\n\taddGeometry( geometry, vertexCount = - 1, indexCount = - 1 ) {\n\n\t\tthis._initializeGeometry( geometry );\n\n\t\tthis._validateGeometry( geometry );\n\n\t\t// ensure we're not over geometry\n\t\tif ( this._geometryCount >= this._maxGeometryCount ) {\n\n\t\t\tthrow new Error( 'BatchedMesh: Maximum geometry count reached.' );\n\n\t\t}\n\n\t\t// get the necessary range fo the geometry\n\t\tconst reservedRange = {\n\t\t\tvertexStart: - 1,\n\t\t\tvertexCount: - 1,\n\t\t\tindexStart: - 1,\n\t\t\tindexCount: - 1,\n\t\t};\n\n\t\tlet lastRange = null;\n\t\tconst reservedRanges = this._reservedRanges;\n\t\tconst drawRanges = this._drawRanges;\n\t\tconst bounds = this._bounds;\n\t\tif ( this._geometryCount !== 0 ) {\n\n\t\t\tlastRange = reservedRanges[ reservedRanges.length - 1 ];\n\n\t\t}\n\n\t\tif ( vertexCount === - 1 ) {\n\n\t\t\treservedRange.vertexCount = geometry.getAttribute( 'position' ).count;\n\n\t\t} else {\n\n\t\t\treservedRange.vertexCount = vertexCount;\n\n\t\t}\n\n\t\tif ( lastRange === null ) {\n\n\t\t\treservedRange.vertexStart = 0;\n\n\t\t} else {\n\n\t\t\treservedRange.vertexStart = lastRange.vertexStart + lastRange.vertexCount;\n\n\t\t}\n\n\t\tconst index = geometry.getIndex();\n\t\tconst hasIndex = index !== null;\n\t\tif ( hasIndex ) {\n\n\t\t\tif ( indexCount\t=== - 1 ) {\n\n\t\t\t\treservedRange.indexCount = index.count;\n\n\t\t\t} else {\n\n\t\t\t\treservedRange.indexCount = indexCount;\n\n\t\t\t}\n\n\t\t\tif ( lastRange === null ) {\n\n\t\t\t\treservedRange.indexStart = 0;\n\n\t\t\t} else {\n\n\t\t\t\treservedRange.indexStart = lastRange.indexStart + lastRange.indexCount;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (\n\t\t\treservedRange.indexStart !== - 1 &&\n\t\t\treservedRange.indexStart + reservedRange.indexCount > this._maxIndexCount ||\n\t\t\treservedRange.vertexStart + reservedRange.vertexCount > this._maxVertexCount\n\t\t) {\n\n\t\t\tthrow new Error( 'BatchedMesh: Reserved space request exceeds the maximum buffer size.' );\n\n\t\t}\n\n\t\tconst visibility = this._visibility;\n\t\tconst active = this._active;\n\t\tconst matricesTexture = this._matricesTexture;\n\t\tconst matricesArray = this._matricesTexture.image.data;\n\n\t\t// push new visibility states\n\t\tvisibility.push( true );\n\t\tactive.push( true );\n\n\t\t// update id\n\t\tconst geometryId = this._geometryCount;\n\t\tthis._geometryCount ++;\n\n\t\t// initialize matrix information\n\t\t_identityMatrix.toArray( matricesArray, geometryId * 16 );\n\t\tmatricesTexture.needsUpdate = true;\n\n\t\t// add the reserved range and draw range objects\n\t\treservedRanges.push( reservedRange );\n\t\tdrawRanges.push( {\n\t\t\tstart: hasIndex ? reservedRange.indexStart : reservedRange.vertexStart,\n\t\t\tcount: - 1\n\t\t} );\n\t\tbounds.push( {\n\t\t\tboxInitialized: false,\n\t\t\tbox: new Box3(),\n\n\t\t\tsphereInitialized: false,\n\t\t\tsphere: new Sphere()\n\t\t} );\n\n\t\t// set the id for the geometry\n\t\tconst idAttribute = this.geometry.getAttribute( ID_ATTR_NAME );\n\t\tfor ( let i = 0; i < reservedRange.vertexCount; i ++ ) {\n\n\t\t\tidAttribute.setX( reservedRange.vertexStart + i, geometryId );\n\n\t\t}\n\n\t\tidAttribute.needsUpdate = true;\n\n\t\t// update the geometry\n\t\tthis.setGeometryAt( geometryId, geometry );\n\n\t\treturn geometryId;\n\n\t}\n\n\tsetGeometryAt( id, geometry ) {\n\n\t\tif ( id >= this._geometryCount ) {\n\n\t\t\tthrow new Error( 'BatchedMesh: Maximum geometry count reached.' );\n\n\t\t}\n\n\t\tthis._validateGeometry( geometry );\n\n\t\tconst batchGeometry = this.geometry;\n\t\tconst hasIndex = batchGeometry.getIndex() !== null;\n\t\tconst dstIndex = batchGeometry.getIndex();\n\t\tconst srcIndex = geometry.getIndex();\n\t\tconst reservedRange = this._reservedRanges[ id ];\n\t\tif (\n\t\t\thasIndex &&\n\t\t\tsrcIndex.count > reservedRange.indexCount ||\n\t\t\tgeometry.attributes.position.count > reservedRange.vertexCount\n\t\t) {\n\n\t\t\tthrow new Error( 'BatchedMesh: Reserved space not large enough for provided geometry.' );\n\n\t\t}\n\n\t\t// copy geometry over\n\t\tconst vertexStart = reservedRange.vertexStart;\n\t\tconst vertexCount = reservedRange.vertexCount;\n\t\tfor ( const attributeName in batchGeometry.attributes ) {\n\n\t\t\tif ( attributeName === ID_ATTR_NAME ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// copy attribute data\n\t\t\tconst srcAttribute = geometry.getAttribute( attributeName );\n\t\t\tconst dstAttribute = batchGeometry.getAttribute( attributeName );\n\t\t\tcopyAttributeData( srcAttribute, dstAttribute, vertexStart );\n\n\t\t\t// fill the rest in with zeroes\n\t\t\tconst itemSize = srcAttribute.itemSize;\n\t\t\tfor ( let i = srcAttribute.count, l = vertexCount; i < l; i ++ ) {\n\n\t\t\t\tconst index = vertexStart + i;\n\t\t\t\tfor ( let c = 0; c < itemSize; c ++ ) {\n\n\t\t\t\t\tdstAttribute.setComponent( index, c, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tdstAttribute.needsUpdate = true;\n\n\t\t}\n\n\t\t// copy index\n\t\tif ( hasIndex ) {\n\n\t\t\tconst indexStart = reservedRange.indexStart;\n\n\t\t\t// copy index data over\n\t\t\tfor ( let i = 0; i < srcIndex.count; i ++ ) {\n\n\t\t\t\tdstIndex.setX( indexStart + i, vertexStart + srcIndex.getX( i ) );\n\n\t\t\t}\n\n\t\t\t// fill the rest in with zeroes\n\t\t\tfor ( let i = srcIndex.count, l = reservedRange.indexCount; i < l; i ++ ) {\n\n\t\t\t\tdstIndex.setX( indexStart + i, vertexStart );\n\n\t\t\t}\n\n\t\t\tdstIndex.needsUpdate = true;\n\n\t\t}\n\n\t\t// store the bounding boxes\n\t\tconst bound = this._bounds[ id ];\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tbound.box.copy( geometry.boundingBox );\n\t\t\tbound.boxInitialized = true;\n\n\t\t} else {\n\n\t\t\tbound.boxInitialized = false;\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tbound.sphere.copy( geometry.boundingSphere );\n\t\t\tbound.sphereInitialized = true;\n\n\t\t} else {\n\n\t\t\tbound.sphereInitialized = false;\n\n\t\t}\n\n\t\t// set drawRange count\n\t\tconst drawRange = this._drawRanges[ id ];\n\t\tconst posAttr = geometry.getAttribute( 'position' );\n\t\tdrawRange.count = hasIndex ? srcIndex.count : posAttr.count;\n\t\tthis._visibilityChanged = true;\n\n\t\treturn id;\n\n\t}\n\n\tdeleteGeometry( geometryId ) {\n\n\t\t// Note: User needs to call optimize() afterward to pack the data.\n\n\t\tconst active = this._active;\n\t\tif ( geometryId >= active.length || active[ geometryId ] === false ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tactive[ geometryId ] = false;\n\t\tthis._visibilityChanged = true;\n\n\t\treturn this;\n\n\t}\n\n\t// get bounding box and compute it if it doesn't exist\n\tgetBoundingBoxAt( id, target ) {\n\n\t\tconst active = this._active;\n\t\tif ( active[ id ] === false ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// compute bounding box\n\t\tconst bound = this._bounds[ id ];\n\t\tconst box = bound.box;\n\t\tconst geometry = this.geometry;\n\t\tif ( bound.boxInitialized === false ) {\n\n\t\t\tbox.makeEmpty();\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst position = geometry.attributes.position;\n\t\t\tconst drawRange = this._drawRanges[ id ];\n\t\t\tfor ( let i = drawRange.start, l = drawRange.start + drawRange.count; i < l; i ++ ) {\n\n\t\t\t\tlet iv = i;\n\t\t\t\tif ( index ) {\n\n\t\t\t\t\tiv = index.getX( iv );\n\n\t\t\t\t}\n\n\t\t\t\tbox.expandByPoint( _vector$5.fromBufferAttribute( position, iv ) );\n\n\t\t\t}\n\n\t\t\tbound.boxInitialized = true;\n\n\t\t}\n\n\t\ttarget.copy( box );\n\t\treturn target;\n\n\t}\n\n\t// get bounding sphere and compute it if it doesn't exist\n\tgetBoundingSphereAt( id, target ) {\n\n\t\tconst active = this._active;\n\t\tif ( active[ id ] === false ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// compute bounding sphere\n\t\tconst bound = this._bounds[ id ];\n\t\tconst sphere = bound.sphere;\n\t\tconst geometry = this.geometry;\n\t\tif ( bound.sphereInitialized === false ) {\n\n\t\t\tsphere.makeEmpty();\n\n\t\t\tthis.getBoundingBoxAt( id, _box$1 );\n\t\t\t_box$1.getCenter( sphere.center );\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst position = geometry.attributes.position;\n\t\t\tconst drawRange = this._drawRanges[ id ];\n\n\t\t\tlet maxRadiusSq = 0;\n\t\t\tfor ( let i = drawRange.start, l = drawRange.start + drawRange.count; i < l; i ++ ) {\n\n\t\t\t\tlet iv = i;\n\t\t\t\tif ( index ) {\n\n\t\t\t\t\tiv = index.getX( iv );\n\n\t\t\t\t}\n\n\t\t\t\t_vector$5.fromBufferAttribute( position, iv );\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, sphere.center.distanceToSquared( _vector$5 ) );\n\n\t\t\t}\n\n\t\t\tsphere.radius = Math.sqrt( maxRadiusSq );\n\t\t\tbound.sphereInitialized = true;\n\n\t\t}\n\n\t\ttarget.copy( sphere );\n\t\treturn target;\n\n\t}\n\n\tsetMatrixAt( geometryId, matrix ) {\n\n\t\t// @TODO: Map geometryId to index of the arrays because\n\t\t//        optimize() can make geometryId mismatch the index\n\n\t\tconst active = this._active;\n\t\tconst matricesTexture = this._matricesTexture;\n\t\tconst matricesArray = this._matricesTexture.image.data;\n\t\tconst geometryCount = this._geometryCount;\n\t\tif ( geometryId >= geometryCount || active[ geometryId ] === false ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tmatrix.toArray( matricesArray, geometryId * 16 );\n\t\tmatricesTexture.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\tgetMatrixAt( geometryId, matrix ) {\n\n\t\tconst active = this._active;\n\t\tconst matricesArray = this._matricesTexture.image.data;\n\t\tconst geometryCount = this._geometryCount;\n\t\tif ( geometryId >= geometryCount || active[ geometryId ] === false ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn matrix.fromArray( matricesArray, geometryId * 16 );\n\n\t}\n\n\tsetVisibleAt( geometryId, value ) {\n\n\t\tconst visibility = this._visibility;\n\t\tconst active = this._active;\n\t\tconst geometryCount = this._geometryCount;\n\n\t\t// if the geometry is out of range, not active, or visibility state\n\t\t// does not change then return early\n\t\tif (\n\t\t\tgeometryId >= geometryCount ||\n\t\t\tactive[ geometryId ] === false ||\n\t\t\tvisibility[ geometryId ] === value\n\t\t) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvisibility[ geometryId ] = value;\n\t\tthis._visibilityChanged = true;\n\n\t\treturn this;\n\n\t}\n\n\tgetVisibleAt( geometryId ) {\n\n\t\tconst visibility = this._visibility;\n\t\tconst active = this._active;\n\t\tconst geometryCount = this._geometryCount;\n\n\t\t// return early if the geometry is out of range or not active\n\t\tif ( geometryId >= geometryCount || active[ geometryId ] === false ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn visibility[ geometryId ];\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst visibility = this._visibility;\n\t\tconst active = this._active;\n\t\tconst drawRanges = this._drawRanges;\n\t\tconst geometryCount = this._geometryCount;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst batchGeometry = this.geometry;\n\n\t\t// iterate over each geometry\n\t\t_mesh.material = this.material;\n\t\t_mesh.geometry.index = batchGeometry.index;\n\t\t_mesh.geometry.attributes = batchGeometry.attributes;\n\t\tif ( _mesh.geometry.boundingBox === null ) {\n\n\t\t\t_mesh.geometry.boundingBox = new Box3();\n\n\t\t}\n\n\t\tif ( _mesh.geometry.boundingSphere === null ) {\n\n\t\t\t_mesh.geometry.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tfor ( let i = 0; i < geometryCount; i ++ ) {\n\n\t\t\tif ( ! visibility[ i ] || ! active[ i ] ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst drawRange = drawRanges[ i ];\n\t\t\t_mesh.geometry.setDrawRange( drawRange.start, drawRange.count );\n\n\t\t\t// ge the intersects\n\t\t\tthis.getMatrixAt( i, _mesh.matrixWorld ).premultiply( matrixWorld );\n\t\t\tthis.getBoundingBoxAt( i, _mesh.geometry.boundingBox );\n\t\t\tthis.getBoundingSphereAt( i, _mesh.geometry.boundingSphere );\n\t\t\t_mesh.raycast( raycaster, _batchIntersects );\n\n\t\t\t// add batch id to the intersects\n\t\t\tfor ( let j = 0, l = _batchIntersects.length; j < l; j ++ ) {\n\n\t\t\t\tconst intersect = _batchIntersects[ j ];\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersect.batchId = i;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_batchIntersects.length = 0;\n\n\t\t}\n\n\t\t_mesh.material = null;\n\t\t_mesh.geometry.index = null;\n\t\t_mesh.geometry.attributes = {};\n\t\t_mesh.geometry.setDrawRange( 0, Infinity );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.geometry = source.geometry.clone();\n\t\tthis.perObjectFrustumCulled = source.perObjectFrustumCulled;\n\t\tthis.sortObjects = source.sortObjects;\n\t\tthis.boundingBox = source.boundingBox !== null ? source.boundingBox.clone() : null;\n\t\tthis.boundingSphere = source.boundingSphere !== null ? source.boundingSphere.clone() : null;\n\n\t\tthis._drawRanges = source._drawRanges.map( range => ( { ...range } ) );\n\t\tthis._reservedRanges = source._reservedRanges.map( range => ( { ...range } ) );\n\n\t\tthis._visibility = source._visibility.slice();\n\t\tthis._active = source._active.slice();\n\t\tthis._bounds = source._bounds.map( bound => ( {\n\t\t\tboxInitialized: bound.boxInitialized,\n\t\t\tbox: bound.box.clone(),\n\n\t\t\tsphereInitialized: bound.sphereInitialized,\n\t\t\tsphere: bound.sphere.clone()\n\t\t} ) );\n\n\t\tthis._maxGeometryCount = source._maxGeometryCount;\n\t\tthis._maxVertexCount = source._maxVertexCount;\n\t\tthis._maxIndexCount = source._maxIndexCount;\n\n\t\tthis._geometryInitialized = source._geometryInitialized;\n\t\tthis._geometryCount = source._geometryCount;\n\t\tthis._multiDrawCounts = source._multiDrawCounts.slice();\n\t\tthis._multiDrawStarts = source._multiDrawStarts.slice();\n\n\t\tthis._matricesTexture = source._matricesTexture.clone();\n\t\tthis._matricesTexture.image.data = this._matricesTexture.image.slice();\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\t// Assuming the geometry is not shared with other meshes\n\t\tthis.geometry.dispose();\n\n\t\tthis._matricesTexture.dispose();\n\t\tthis._matricesTexture = null;\n\t\treturn this;\n\n\t}\n\n\tonBeforeRender( renderer, scene, camera, geometry, material/*, _group*/ ) {\n\n\t\t// if visibility has not changed and frustum culling and object sorting is not required\n\t\t// then skip iterating over all items\n\t\tif ( ! this._visibilityChanged && ! this.perObjectFrustumCulled && ! this.sortObjects ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// the indexed version of the multi draw function requires specifying the start\n\t\t// offset in bytes.\n\t\tconst index = geometry.getIndex();\n\t\tconst bytesPerElement = index === null ? 1 : index.array.BYTES_PER_ELEMENT;\n\n\t\tconst active = this._active;\n\t\tconst visibility = this._visibility;\n\t\tconst multiDrawStarts = this._multiDrawStarts;\n\t\tconst multiDrawCounts = this._multiDrawCounts;\n\t\tconst drawRanges = this._drawRanges;\n\t\tconst perObjectFrustumCulled = this.perObjectFrustumCulled;\n\n\t\t// prepare the frustum in the local frame\n\t\tif ( perObjectFrustumCulled ) {\n\n\t\t\t_projScreenMatrix$2\n\t\t\t\t.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse )\n\t\t\t\t.multiply( this.matrixWorld );\n\t\t\t_frustum.setFromProjectionMatrix(\n\t\t\t\t_projScreenMatrix$2,\n\t\t\t\trenderer.coordinateSystem\n\t\t\t);\n\n\t\t}\n\n\t\tlet count = 0;\n\t\tif ( this.sortObjects ) {\n\n\t\t\t// get the camera position in the local frame\n\t\t\t_invMatrixWorld.copy( this.matrixWorld ).invert();\n\t\t\t_vector$5.setFromMatrixPosition( camera.matrixWorld ).applyMatrix4( _invMatrixWorld );\n\n\t\t\tfor ( let i = 0, l = visibility.length; i < l; i ++ ) {\n\n\t\t\t\tif ( visibility[ i ] && active[ i ] ) {\n\n\t\t\t\t\t// get the bounds in world space\n\t\t\t\t\tthis.getMatrixAt( i, _matrix );\n\t\t\t\t\tthis.getBoundingSphereAt( i, _sphere$2 ).applyMatrix4( _matrix );\n\n\t\t\t\t\t// determine whether the batched geometry is within the frustum\n\t\t\t\t\tlet culled = false;\n\t\t\t\t\tif ( perObjectFrustumCulled ) {\n\n\t\t\t\t\t\tculled = ! _frustum.intersectsSphere( _sphere$2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! culled ) {\n\n\t\t\t\t\t\t// get the distance from camera used for sorting\n\t\t\t\t\t\tconst z = _vector$5.distanceTo( _sphere$2.center );\n\t\t\t\t\t\t_renderList.push( drawRanges[ i ], z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Sort the draw ranges and prep for rendering\n\t\t\tconst list = _renderList.list;\n\t\t\tconst customSort = this.customSort;\n\t\t\tif ( customSort === null ) {\n\n\t\t\t\tlist.sort( material.transparent ? sortTransparent : sortOpaque );\n\n\t\t\t} else {\n\n\t\t\t\tcustomSort.call( this, list, camera );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = list.length; i < l; i ++ ) {\n\n\t\t\t\tconst item = list[ i ];\n\t\t\t\tmultiDrawStarts[ count ] = item.start * bytesPerElement;\n\t\t\t\tmultiDrawCounts[ count ] = item.count;\n\t\t\t\tcount ++;\n\n\t\t\t}\n\n\t\t\t_renderList.reset();\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0, l = visibility.length; i < l; i ++ ) {\n\n\t\t\t\tif ( visibility[ i ] && active[ i ] ) {\n\n\t\t\t\t\t// determine whether the batched geometry is within the frustum\n\t\t\t\t\tlet culled = false;\n\t\t\t\t\tif ( perObjectFrustumCulled ) {\n\n\t\t\t\t\t\t// get the bounds in world space\n\t\t\t\t\t\tthis.getMatrixAt( i, _matrix );\n\t\t\t\t\t\tthis.getBoundingSphereAt( i, _sphere$2 ).applyMatrix4( _matrix );\n\t\t\t\t\t\tculled = ! _frustum.intersectsSphere( _sphere$2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! culled ) {\n\n\t\t\t\t\t\tconst range = drawRanges[ i ];\n\t\t\t\t\t\tmultiDrawStarts[ count ] = range.start * bytesPerElement;\n\t\t\t\t\t\tmultiDrawCounts[ count ] = range.count;\n\t\t\t\t\t\tcount ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._multiDrawCount = count;\n\t\tthis._visibilityChanged = false;\n\n\t}\n\n\tonBeforeShadow( renderer, object, camera, shadowCamera, geometry, depthMaterial/* , group */ ) {\n\n\t\tthis.onBeforeRender( renderer, null, shadowCamera, geometry, depthMaterial );\n\n\t}\n\n}\n\nclass LineBasicMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isLineBasicMaterial = true;\n\n\t\tthis.type = 'LineBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.linewidth = 1;\n\t\tthis.linecap = 'round';\n\t\tthis.linejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.linewidth = source.linewidth;\n\t\tthis.linecap = source.linecap;\n\t\tthis.linejoin = source.linejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _start$1 = /*@__PURE__*/ new Vector3();\nconst _end$1 = /*@__PURE__*/ new Vector3();\nconst _inverseMatrix$1 = /*@__PURE__*/ new Matrix4();\nconst _ray$1 = /*@__PURE__*/ new Ray();\nconst _sphere$1 = /*@__PURE__*/ new Sphere();\n\nclass Line extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new LineBasicMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isLine = true;\n\n\t\tthis.type = 'Line';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.material = Array.isArray( source.material ) ? source.material.slice() : source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconst geometry = this.geometry;\n\n\t\t// we assume non-indexed geometry\n\n\t\tif ( geometry.index === null ) {\n\n\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\tconst lineDistances = [ 0 ];\n\n\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i ] += _start$1.distanceTo( _end$1 );\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Line.threshold;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$1.copy( geometry.boundingSphere );\n\t\t_sphere$1.applyMatrix4( matrixWorld );\n\t\t_sphere$1.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$1 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$1.copy( matrixWorld ).invert();\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst vStart = new Vector3();\n\t\tconst vEnd = new Vector3();\n\t\tconst interSegment = new Vector3();\n\t\tconst interRay = new Vector3();\n\t\tconst step = this.isLineSegments ? 2 : 1;\n\n\t\tconst index = geometry.index;\n\t\tconst attributes = geometry.attributes;\n\t\tconst positionAttribute = attributes.position;\n\n\t\tif ( index !== null ) {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end - 1; i < l; i += step ) {\n\n\t\t\t\tconst a = index.getX( i );\n\t\t\t\tconst b = index.getX( i + 1 );\n\n\t\t\t\tvStart.fromBufferAttribute( positionAttribute, a );\n\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, b );\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end - 1; i < l; i += step ) {\n\n\t\t\t\tvStart.fromBufferAttribute( positionAttribute, i );\n\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nconst _start = /*@__PURE__*/ new Vector3();\nconst _end = /*@__PURE__*/ new Vector3();\n\nclass LineSegments extends Line {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLineSegments = true;\n\n\t\tthis.type = 'LineSegments';\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconst geometry = this.geometry;\n\n\t\t// we assume non-indexed geometry\n\n\t\tif ( geometry.index === null ) {\n\n\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\tconst lineDistances = [];\n\n\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t_start.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t_end.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start.distanceTo( _end );\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineLoop extends Line {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLineLoop = true;\n\n\t\tthis.type = 'LineLoop';\n\n\t}\n\n}\n\nclass PointsMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isPointsMaterial = true;\n\n\t\tthis.type = 'PointsMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.size = 1;\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.size = source.size;\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _inverseMatrix = /*@__PURE__*/ new Matrix4();\nconst _ray = /*@__PURE__*/ new Ray();\nconst _sphere = /*@__PURE__*/ new Sphere();\nconst _position$2 = /*@__PURE__*/ new Vector3();\n\nclass Points extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new PointsMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isPoints = true;\n\n\t\tthis.type = 'Points';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.material = Array.isArray( source.material ) ? source.material.slice() : source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Points.threshold;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst index = geometry.index;\n\t\tconst attributes = geometry.attributes;\n\t\tconst positionAttribute = attributes.position;\n\n\t\tif ( index !== null ) {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, il = end; i < il; i ++ ) {\n\n\t\t\t\tconst a = index.getX( i );\n\n\t\t\t\t_position$2.fromBufferAttribute( positionAttribute, a );\n\n\t\t\t\ttestPoint( _position$2, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end; i < l; i ++ ) {\n\n\t\t\t\t_position$2.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\ttestPoint( _position$2, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tconst rayPointDistanceSq = _ray.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tconst intersectPoint = new Vector3();\n\n\t\t_ray.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nclass VideoTexture extends Texture {\n\n\tconstructor( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tsuper( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isVideoTexture = true;\n\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\n\t\tthis.generateMipmaps = false;\n\n\t\tconst scope = this;\n\n\t\tfunction updateVideo() {\n\n\t\t\tscope.needsUpdate = true;\n\t\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t\t}\n\n\t\tif ( 'requestVideoFrameCallback' in video ) {\n\n\t\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.image ).copy( this );\n\n\t}\n\n\tupdate() {\n\n\t\tconst video = this.image;\n\t\tconst hasVideoFrameCallback = 'requestVideoFrameCallback' in video;\n\n\t\tif ( hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n}\n\nclass FramebufferTexture extends Texture {\n\n\tconstructor( width, height ) {\n\n\t\tsuper( { width, height } );\n\n\t\tthis.isFramebufferTexture = true;\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.generateMipmaps = false;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nclass CompressedTexture extends Texture {\n\n\tconstructor( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, colorSpace ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, colorSpace );\n\n\t\tthis.isCompressedTexture = true;\n\n\t\tthis.image = { width: width, height: height };\n\t\tthis.mipmaps = mipmaps;\n\n\t\t// no flipping for cube textures\n\t\t// (also flipping doesn't work for compressed textures )\n\n\t\tthis.flipY = false;\n\n\t\t// can't generate mipmaps for compressed textures\n\t\t// mips must be embedded in DDS files\n\n\t\tthis.generateMipmaps = false;\n\n\t}\n\n}\n\nclass CompressedArrayTexture extends CompressedTexture {\n\n\tconstructor( mipmaps, width, height, depth, format, type ) {\n\n\t\tsuper( mipmaps, width, height, format, type );\n\n\t\tthis.isCompressedArrayTexture = true;\n\t\tthis.image.depth = depth;\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t}\n\n}\n\nclass CompressedCubeTexture extends CompressedTexture {\n\n\tconstructor( images, format, type ) {\n\n\t\tsuper( undefined, images[ 0 ].width, images[ 0 ].height, format, type, CubeReflectionMapping );\n\n\t\tthis.isCompressedCubeTexture = true;\n\t\tthis.isCubeTexture = true;\n\n\t\tthis.image = images;\n\n\t}\n\n}\n\nclass CanvasTexture extends Texture {\n\n\tconstructor( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tsuper( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isCanvasTexture = true;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\n/**\n * Extensible curve object.\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\nclass Curve {\n\n\tconstructor() {\n\n\t\tthis.type = 'Curve';\n\n\t\tthis.arcLengthDivisions = 200;\n\n\t}\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t}\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t}\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get total curve arc length\n\n\tgetLength() {\n\n\t\tconst lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t}\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths( divisions = this.arcLengthDivisions ) {\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tconst cache = [];\n\t\tlet current, last = this.getPoint( 0 );\n\t\tlet sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t}\n\n\tupdateArcLengths() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t}\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping( u, distance ) {\n\n\t\tconst arcLengths = this.getLengths();\n\n\t\tlet i = 0;\n\t\tconst il = arcLengths.length;\n\n\t\tlet targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tlet low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tconst lengthBefore = arcLengths[ i ];\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\n\n\t\tconst segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t}\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent( t, optionalTarget ) {\n\n\t\tconst delta = 0.0001;\n\t\tlet t1 = t - delta;\n\t\tlet t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tconst pt1 = this.getPoint( t1 );\n\t\tconst pt2 = this.getPoint( t2 );\n\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\n\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n\tgetTangentAt( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t, optionalTarget );\n\n\t}\n\n\tcomputeFrenetFrames( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tconst normal = new Vector3();\n\n\t\tconst tangents = [];\n\t\tconst normals = [];\n\t\tconst binormals = [];\n\n\t\tconst vec = new Vector3();\n\t\tconst mat = new Matrix4();\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst u = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tlet min = Number.MAX_VALUE;\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\tconst theta = Math.acos( clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\tlet theta = Math.acos( clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass EllipseCurve extends Curve {\n\n\tconstructor( aX = 0, aY = 0, xRadius = 1, yRadius = 1, aStartAngle = 0, aEndAngle = Math.PI * 2, aClockwise = false, aRotation = 0 ) {\n\n\t\tsuper();\n\n\t\tthis.isEllipseCurve = true;\n\n\t\tthis.type = 'EllipseCurve';\n\n\t\tthis.aX = aX;\n\t\tthis.aY = aY;\n\n\t\tthis.xRadius = xRadius;\n\t\tthis.yRadius = yRadius;\n\n\t\tthis.aStartAngle = aStartAngle;\n\t\tthis.aEndAngle = aEndAngle;\n\n\t\tthis.aClockwise = aClockwise;\n\n\t\tthis.aRotation = aRotation;\n\n\t}\n\n\tgetPoint( t, optionalTarget ) {\n\n\t\tconst point = optionalTarget || new Vector2();\n\n\t\tconst twoPi = Math.PI * 2;\n\t\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\n\t\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t\t// ensures that deltaAngle is 0 .. 2 PI\n\t\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\t\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\t\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\t\tif ( samePoints ) {\n\n\t\t\t\tdeltaAngle = 0;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\t\tdeltaAngle = - twoPi;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst angle = this.aStartAngle + t * deltaAngle;\n\t\tlet x = this.aX + this.xRadius * Math.cos( angle );\n\t\tlet y = this.aY + this.yRadius * Math.sin( angle );\n\n\t\tif ( this.aRotation !== 0 ) {\n\n\t\t\tconst cos = Math.cos( this.aRotation );\n\t\t\tconst sin = Math.sin( this.aRotation );\n\n\t\t\tconst tx = x - this.aX;\n\t\t\tconst ty = y - this.aY;\n\n\t\t\t// Rotate the point about the center of the ellipse.\n\t\t\tx = tx * cos - ty * sin + this.aX;\n\t\t\ty = tx * sin + ty * cos + this.aY;\n\n\t\t}\n\n\t\treturn point.set( x, y );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.aX = source.aX;\n\t\tthis.aY = source.aY;\n\n\t\tthis.xRadius = source.xRadius;\n\t\tthis.yRadius = source.yRadius;\n\n\t\tthis.aStartAngle = source.aStartAngle;\n\t\tthis.aEndAngle = source.aEndAngle;\n\n\t\tthis.aClockwise = source.aClockwise;\n\n\t\tthis.aRotation = source.aRotation;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.aX = this.aX;\n\t\tdata.aY = this.aY;\n\n\t\tdata.xRadius = this.xRadius;\n\t\tdata.yRadius = this.yRadius;\n\n\t\tdata.aStartAngle = this.aStartAngle;\n\t\tdata.aEndAngle = this.aEndAngle;\n\n\t\tdata.aClockwise = this.aClockwise;\n\n\t\tdata.aRotation = this.aRotation;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.aX = json.aX;\n\t\tthis.aY = json.aY;\n\n\t\tthis.xRadius = json.xRadius;\n\t\tthis.yRadius = json.yRadius;\n\n\t\tthis.aStartAngle = json.aStartAngle;\n\t\tthis.aEndAngle = json.aEndAngle;\n\n\t\tthis.aClockwise = json.aClockwise;\n\n\t\tthis.aRotation = json.aRotation;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass ArcCurve extends EllipseCurve {\n\n\tconstructor( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tsuper( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\tthis.isArcCurve = true;\n\n\t\tthis.type = 'ArcCurve';\n\n\t}\n\n}\n\n/**\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tconst t2 = t * t;\n\t\t\tconst t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nconst tmp = /*@__PURE__*/ new Vector3();\nconst px = /*@__PURE__*/ new CubicPoly();\nconst py = /*@__PURE__*/ new CubicPoly();\nconst pz = /*@__PURE__*/ new CubicPoly();\n\nclass CatmullRomCurve3 extends Curve {\n\n\tconstructor( points = [], closed = false, curveType = 'centripetal', tension = 0.5 ) {\n\n\t\tsuper();\n\n\t\tthis.isCatmullRomCurve3 = true;\n\n\t\tthis.type = 'CatmullRomCurve3';\n\n\t\tthis.points = points;\n\t\tthis.closed = closed;\n\t\tthis.curveType = curveType;\n\t\tthis.tension = tension;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst points = this.points;\n\t\tconst l = points.length;\n\n\t\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\t\tlet intPoint = Math.floor( p );\n\t\tlet weight = p - intPoint;\n\n\t\tif ( this.closed ) {\n\n\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\t\tintPoint = l - 2;\n\t\t\tweight = 1;\n\n\t\t}\n\n\t\tlet p0, p3; // 4 points (p1 & p2 defined below)\n\n\t\tif ( this.closed || intPoint > 0 ) {\n\n\t\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate first point\n\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\t\tp0 = tmp;\n\n\t\t}\n\n\t\tconst p1 = points[ intPoint % l ];\n\t\tconst p2 = points[ ( intPoint + 1 ) % l ];\n\n\t\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate last point\n\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\t\tp3 = tmp;\n\n\t\t}\n\n\t\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t\t// init Centripetal / Chordal Catmull-Rom\n\t\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t\t// safety check for repeated points\n\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t\t}\n\n\t\tpoint.set(\n\t\t\tpx.calc( weight ),\n\t\t\tpy.calc( weight ),\n\t\t\tpz.calc( weight )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = source.points[ i ];\n\n\t\t\tthis.points.push( point.clone() );\n\n\t\t}\n\n\t\tthis.closed = source.closed;\n\t\tthis.curveType = source.curveType;\n\t\tthis.tension = source.tension;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.points = [];\n\n\t\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = this.points[ i ];\n\t\t\tdata.points.push( point.toArray() );\n\n\t\t}\n\n\t\tdata.closed = this.closed;\n\t\tdata.curveType = this.curveType;\n\t\tdata.tension = this.tension;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = json.points[ i ];\n\t\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t\t}\n\n\t\tthis.closed = json.closed;\n\t\tthis.curveType = json.curveType;\n\t\tthis.tension = json.tension;\n\n\t\treturn this;\n\n\t}\n\n}\n\n/**\n * Bezier Curves formulas obtained from\n * https://en.wikipedia.org/wiki/B%C3%A9zier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tconst v0 = ( p2 - p0 ) * 0.5;\n\tconst v1 = ( p3 - p1 ) * 0.5;\n\tconst t2 = t * t;\n\tconst t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tconst k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nclass CubicBezierCurve extends Curve {\n\n\tconstructor( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2(), v3 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isCubicBezierCurve = true;\n\n\t\tthis.type = 'CubicBezierCurve';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\tpoint.set(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\t\tthis.v3.copy( source.v3 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\t\tdata.v3 = this.v3.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\t\tthis.v3.fromArray( json.v3 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass CubicBezierCurve3 extends Curve {\n\n\tconstructor( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3(), v3 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isCubicBezierCurve3 = true;\n\n\t\tthis.type = 'CubicBezierCurve3';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\tpoint.set(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\t\tthis.v3.copy( source.v3 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\t\tdata.v3 = this.v3.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\t\tthis.v3.fromArray( json.v3 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineCurve extends Curve {\n\n\tconstructor( v1 = new Vector2(), v2 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isLineCurve = true;\n\n\t\tthis.type = 'LineCurve';\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tif ( t === 1 ) {\n\n\t\t\tpoint.copy( this.v2 );\n\n\t\t} else {\n\n\t\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t\t}\n\n\t\treturn point;\n\n\t}\n\n\t// Line curve is linear, so we can overwrite default getPointAt\n\tgetPointAt( u, optionalTarget ) {\n\n\t\treturn this.getPoint( u, optionalTarget );\n\n\t}\n\n\tgetTangent( t, optionalTarget = new Vector2() ) {\n\n\t\treturn optionalTarget.subVectors( this.v2, this.v1 ).normalize();\n\n\t}\n\n\tgetTangentAt( u, optionalTarget ) {\n\n\t\treturn this.getTangent( u, optionalTarget );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineCurve3 extends Curve {\n\n\tconstructor( v1 = new Vector3(), v2 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isLineCurve3 = true;\n\n\t\tthis.type = 'LineCurve3';\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tif ( t === 1 ) {\n\n\t\t\tpoint.copy( this.v2 );\n\n\t\t} else {\n\n\t\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t\t}\n\n\t\treturn point;\n\n\t}\n\n\t// Line curve is linear, so we can overwrite default getPointAt\n\tgetPointAt( u, optionalTarget ) {\n\n\t\treturn this.getPoint( u, optionalTarget );\n\n\t}\n\n\tgetTangent( t, optionalTarget = new Vector3() ) {\n\n\t\treturn optionalTarget.subVectors( this.v2, this.v1 ).normalize();\n\n\t}\n\n\tgetTangentAt( u, optionalTarget ) {\n\n\t\treturn this.getTangent( u, optionalTarget );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass QuadraticBezierCurve extends Curve {\n\n\tconstructor( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isQuadraticBezierCurve = true;\n\n\t\tthis.type = 'QuadraticBezierCurve';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\tpoint.set(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass QuadraticBezierCurve3 extends Curve {\n\n\tconstructor( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isQuadraticBezierCurve3 = true;\n\n\t\tthis.type = 'QuadraticBezierCurve3';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\tpoint.set(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass SplineCurve extends Curve {\n\n\tconstructor( points = [] ) {\n\n\t\tsuper();\n\n\t\tthis.isSplineCurve = true;\n\n\t\tthis.type = 'SplineCurve';\n\n\t\tthis.points = points;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst points = this.points;\n\t\tconst p = ( points.length - 1 ) * t;\n\n\t\tconst intPoint = Math.floor( p );\n\t\tconst weight = p - intPoint;\n\n\t\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\t\tconst p1 = points[ intPoint ];\n\t\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\t\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\t\tpoint.set(\n\t\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = source.points[ i ];\n\n\t\t\tthis.points.push( point.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.points = [];\n\n\t\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = this.points[ i ];\n\t\t\tdata.points.push( point.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = json.points[ i ];\n\t\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nvar Curves = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tArcCurve: ArcCurve,\n\tCatmullRomCurve3: CatmullRomCurve3,\n\tCubicBezierCurve: CubicBezierCurve,\n\tCubicBezierCurve3: CubicBezierCurve3,\n\tEllipseCurve: EllipseCurve,\n\tLineCurve: LineCurve,\n\tLineCurve3: LineCurve3,\n\tQuadraticBezierCurve: QuadraticBezierCurve,\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\n\tSplineCurve: SplineCurve\n});\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nclass CurvePath extends Curve {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'CurvePath';\n\n\t\tthis.curves = [];\n\t\tthis.autoClose = false; // Automatically closes the path\n\n\t}\n\n\tadd( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t}\n\n\tclosePath() {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tconst lineType = ( startPoint.isVector2 === true ) ? 'LineCurve' : 'LineCurve3';\n\t\t\tthis.curves.push( new Curves[ lineType ]( endPoint, startPoint ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint( t, optionalTarget ) {\n\n\t\tconst d = t * this.getLength();\n\t\tconst curveLengths = this.getCurveLengths();\n\t\tlet i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tconst diff = curveLengths[ i ] - d;\n\t\t\t\tconst curve = this.curves[ i ];\n\n\t\t\t\tconst segmentLength = curve.getLength();\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u, optionalTarget );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t}\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength() {\n\n\t\tconst lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t}\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t}\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths() {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tconst lengths = [];\n\t\tlet sums = 0;\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t}\n\n\tgetSpacedPoints( divisions = 40 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\tgetPoints( divisions = 12 ) {\n\n\t\tconst points = [];\n\t\tlet last;\n\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tconst curve = curves[ i ];\n\t\t\tconst resolution = curve.isEllipseCurve ? divisions * 2\n\t\t\t\t: ( curve.isLineCurve || curve.isLineCurve3 ) ? 1\n\t\t\t\t\t: curve.isSplineCurve ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tconst pts = curve.getPoints( resolution );\n\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tconst point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Path extends CurvePath {\n\n\tconstructor( points ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Path';\n\n\t\tthis.currentPoint = new Vector2();\n\n\t\tif ( points ) {\n\n\t\t\tthis.setFromPoints( points );\n\n\t\t}\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tmoveTo( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t}\n\n\tlineTo( x, y ) {\n\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tquadraticCurveTo( aCPx, aCPy, aX, aY ) {\n\n\t\tconst curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tbezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tconst curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tsplineThru( pts /*Array of Vector*/ ) {\n\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tconst curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t}\n\n\tarc( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t}\n\n\tabsarc( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t}\n\n\tellipse( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t}\n\n\tabsellipse( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tconst firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tconst lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LatheGeometry extends BufferGeometry {\n\n\tconstructor( points = [ new Vector2( 0, - 0.5 ), new Vector2( 0.5, 0 ), new Vector2( 0, 0.5 ) ], segments = 12, phiStart = 0, phiLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'LatheGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpoints: points,\n\t\t\tsegments: segments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength\n\t\t};\n\n\t\tsegments = Math.floor( segments );\n\n\t\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\n\t\tphiLength = clamp( phiLength, 0, Math.PI * 2 );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst uvs = [];\n\t\tconst initNormals = [];\n\t\tconst normals = [];\n\n\t\t// helper variables\n\n\t\tconst inverseSegments = 1.0 / segments;\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\t\tconst normal = new Vector3();\n\t\tconst curNormal = new Vector3();\n\t\tconst prevNormal = new Vector3();\n\t\tlet dx = 0;\n\t\tlet dy = 0;\n\n\t\t// pre-compute normals for initial \"meridian\"\n\n\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\tswitch ( j ) {\n\n\t\t\t\tcase 0:\t\t\t\t// special handling for 1st vertex on path\n\n\t\t\t\t\tdx = points[ j + 1 ].x - points[ j ].x;\n\t\t\t\t\tdy = points[ j + 1 ].y - points[ j ].y;\n\n\t\t\t\t\tnormal.x = dy * 1.0;\n\t\t\t\t\tnormal.y = - dx;\n\t\t\t\t\tnormal.z = dy * 0.0;\n\n\t\t\t\t\tprevNormal.copy( normal );\n\n\t\t\t\t\tnormal.normalize();\n\n\t\t\t\t\tinitNormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ( points.length - 1 ):\t// special handling for last Vertex on path\n\n\t\t\t\t\tinitNormals.push( prevNormal.x, prevNormal.y, prevNormal.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\t\t\t// default handling for all vertices in between\n\n\t\t\t\t\tdx = points[ j + 1 ].x - points[ j ].x;\n\t\t\t\t\tdy = points[ j + 1 ].y - points[ j ].y;\n\n\t\t\t\t\tnormal.x = dy * 1.0;\n\t\t\t\t\tnormal.y = - dx;\n\t\t\t\t\tnormal.z = dy * 0.0;\n\n\t\t\t\t\tcurNormal.copy( normal );\n\n\t\t\t\t\tnormal.x += prevNormal.x;\n\t\t\t\t\tnormal.y += prevNormal.y;\n\t\t\t\t\tnormal.z += prevNormal.z;\n\n\t\t\t\t\tnormal.normalize();\n\n\t\t\t\t\tinitNormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\tprevNormal.copy( curNormal );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate vertices, uvs and normals\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst phi = phiStart + i * inverseSegments * phiLength;\n\n\t\t\tconst sin = Math.sin( phi );\n\t\t\tconst cos = Math.cos( phi );\n\n\t\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\t\tvertex.y = points[ j ].y;\n\t\t\t\tvertex.z = points[ j ].x * cos;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = i / segments;\n\t\t\t\tuv.y = j / ( points.length - 1 );\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// normal\n\n\t\t\t\tconst x = initNormals[ 3 * j + 0 ] * sin;\n\t\t\t\tconst y = initNormals[ 3 * j + 1 ];\n\t\t\t\tconst z = initNormals[ 3 * j + 0 ] * cos;\n\n\t\t\t\tnormals.push( x, y, z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 0; i < segments; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\t\tconst base = j + i * points.length;\n\n\t\t\t\tconst a = base;\n\t\t\t\tconst b = base + points.length;\n\t\t\t\tconst c = base + points.length + 1;\n\t\t\t\tconst d = base + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( c, d, b );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new LatheGeometry( data.points, data.segments, data.phiStart, data.phiLength );\n\n\t}\n\n}\n\nclass CapsuleGeometry extends LatheGeometry {\n\n\tconstructor( radius = 1, length = 1, capSegments = 4, radialSegments = 8 ) {\n\n\t\tconst path = new Path();\n\t\tpath.absarc( 0, - length / 2, radius, Math.PI * 1.5, 0 );\n\t\tpath.absarc( 0, length / 2, radius, 0, Math.PI * 0.5 );\n\n\t\tsuper( path.getPoints( capSegments ), radialSegments );\n\n\t\tthis.type = 'CapsuleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tlength: length,\n\t\t\tcapSegments: capSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CapsuleGeometry( data.radius, data.length, data.capSegments, data.radialSegments );\n\n\t}\n\n}\n\nclass CircleGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, segments = 32, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CircleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tsegments: segments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tsegments = Math.max( 3, segments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// center point\n\n\t\tvertices.push( 0, 0, 0 );\n\t\tnormals.push( 0, 0, 1 );\n\t\tuvs.push( 0.5, 0.5 );\n\n\t\tfor ( let s = 0, i = 3; s <= segments; s ++, i += 3 ) {\n\n\t\t\tconst segment = thetaStart + s / segments * thetaLength;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t// uvs\n\n\t\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\n\t\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tindices.push( i, i + 1, 0 );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CircleGeometry( data.radius, data.segments, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass CylinderGeometry extends BufferGeometry {\n\n\tconstructor( radiusTop = 1, radiusBottom = 1, height = 1, radialSegments = 32, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CylinderGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradiusTop: radiusTop,\n\t\t\tradiusBottom: radiusBottom,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tconst scope = this;\n\n\t\tradialSegments = Math.floor( radialSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet index = 0;\n\t\tconst indexArray = [];\n\t\tconst halfHeight = height / 2;\n\t\tlet groupStart = 0;\n\n\t\t// generate geometry\n\n\t\tgenerateTorso();\n\n\t\tif ( openEnded === false ) {\n\n\t\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction generateTorso() {\n\n\t\t\tconst normal = new Vector3();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\t// this will be used to calculate the normal\n\t\t\tconst slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\t\tconst indexRow = [];\n\n\t\t\t\tconst v = y / heightSegments;\n\n\t\t\t\t// calculate the radius of the current row\n\n\t\t\t\tconst radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\t\tconst u = x / radialSegments;\n\n\t\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\t\tconst sinTheta = Math.sin( theta );\n\t\t\t\t\tconst cosTheta = Math.cos( theta );\n\n\t\t\t\t\t// vertex\n\n\t\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t// normal\n\n\t\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\t// uv\n\n\t\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t\t}\n\n\t\t\t\t// now save vertices of the row in our index array\n\n\t\t\t\tindexArray.push( indexRow );\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tfor ( let y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\t\tconst a = indexArray[ y ][ x ];\n\t\t\t\t\tconst b = indexArray[ y + 1 ][ x ];\n\t\t\t\t\tconst c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\t\tconst d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// update group counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t\tfunction generateCap( top ) {\n\n\t\t\t// save the index of the first center vertex\n\t\t\tconst centerIndexStart = index;\n\n\t\t\tconst uv = new Vector2();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\t\tconst sign = ( top === true ) ? 1 : - 1;\n\n\t\t\t// first we generate the center vertex data of the cap.\n\t\t\t// because the geometry needs one set of uvs per face,\n\t\t\t// we must generate a center vertex per face/segment\n\n\t\t\tfor ( let x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// save the index of the last center vertex\n\t\t\tconst centerIndexEnd = index;\n\n\t\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tconst u = x / radialSegments;\n\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\tconst cosTheta = Math.cos( theta );\n\t\t\t\tconst sinTheta = Math.sin( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = halfHeight * sign;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tconst c = centerIndexStart + x;\n\t\t\t\tconst i = centerIndexEnd + x;\n\n\t\t\t\tif ( top === true ) {\n\n\t\t\t\t\t// face top\n\n\t\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// face bottom\n\n\t\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t\t}\n\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CylinderGeometry( data.radiusTop, data.radiusBottom, data.height, data.radialSegments, data.heightSegments, data.openEnded, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass ConeGeometry extends CylinderGeometry {\n\n\tconstructor( radius = 1, height = 1, radialSegments = 32, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper( 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\t\tthis.type = 'ConeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new ConeGeometry( data.radius, data.height, data.radialSegments, data.heightSegments, data.openEnded, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass PolyhedronGeometry extends BufferGeometry {\n\n\tconstructor( vertices = [], indices = [], radius = 1, detail = 0 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PolyhedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tvertices: vertices,\n\t\t\tindices: indices,\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\t// default buffer data\n\n\t\tconst vertexBuffer = [];\n\t\tconst uvBuffer = [];\n\n\t\t// the subdivision creates the vertex buffer data\n\n\t\tsubdivide( detail );\n\n\t\t// all vertices should lie on a conceptual sphere with a given radius\n\n\t\tapplyRadius( radius );\n\n\t\t// finally, create the uv data\n\n\t\tgenerateUVs();\n\n\t\t// build non-indexed geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\n\n\t\tif ( detail === 0 ) {\n\n\t\t\tthis.computeVertexNormals(); // flat normals\n\n\t\t} else {\n\n\t\t\tthis.normalizeNormals(); // smooth normals\n\n\t\t}\n\n\t\t// helper functions\n\n\t\tfunction subdivide( detail ) {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\t// iterate over all faces and apply a subdivision with the given detail value\n\n\t\t\tfor ( let i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t// get the vertices of the face\n\n\t\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\n\t\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\n\t\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\n\n\t\t\t\t// perform subdivision\n\n\t\t\t\tsubdivideFace( a, b, c, detail );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction subdivideFace( a, b, c, detail ) {\n\n\t\t\tconst cols = detail + 1;\n\n\t\t\t// we use this multidimensional array as a data structure for creating the subdivision\n\n\t\t\tconst v = [];\n\n\t\t\t// construct all of the vertices for this subdivision\n\n\t\t\tfor ( let i = 0; i <= cols; i ++ ) {\n\n\t\t\t\tv[ i ] = [];\n\n\t\t\t\tconst aj = a.clone().lerp( c, i / cols );\n\t\t\t\tconst bj = b.clone().lerp( c, i / cols );\n\n\t\t\t\tconst rows = cols - i;\n\n\t\t\t\tfor ( let j = 0; j <= rows; j ++ ) {\n\n\t\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// construct all of the faces\n\n\t\t\tfor ( let i = 0; i < cols; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\t\tconst k = Math.floor( j / 2 );\n\n\t\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\t\t\t\t\t\tpushVertex( v[ i ][ k ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction applyRadius( radius ) {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\t// iterate over the entire buffer and apply the radius to each vertex\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tvertex.normalize().multiplyScalar( radius );\n\n\t\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\n\t\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\n\t\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tconst u = azimuth( vertex ) / 2 / Math.PI + 0.5;\n\t\t\t\tconst v = inclination( vertex ) / Math.PI + 0.5;\n\t\t\t\tuvBuffer.push( u, 1 - v );\n\n\t\t\t}\n\n\t\t\tcorrectUVs();\n\n\t\t\tcorrectSeam();\n\n\t\t}\n\n\t\tfunction correctSeam() {\n\n\t\t\t// handle case when face straddles the seam, see #3269\n\n\t\t\tfor ( let i = 0; i < uvBuffer.length; i += 6 ) {\n\n\t\t\t\t// uv data of a single face\n\n\t\t\t\tconst x0 = uvBuffer[ i + 0 ];\n\t\t\t\tconst x1 = uvBuffer[ i + 2 ];\n\t\t\t\tconst x2 = uvBuffer[ i + 4 ];\n\n\t\t\t\tconst max = Math.max( x0, x1, x2 );\n\t\t\t\tconst min = Math.min( x0, x1, x2 );\n\n\t\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\n\t\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\n\t\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction pushVertex( vertex ) {\n\n\t\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tfunction getVertexByIndex( index, vertex ) {\n\n\t\t\tconst stride = index * 3;\n\n\t\t\tvertex.x = vertices[ stride + 0 ];\n\t\t\tvertex.y = vertices[ stride + 1 ];\n\t\t\tvertex.z = vertices[ stride + 2 ];\n\n\t\t}\n\n\t\tfunction correctUVs() {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\tconst centroid = new Vector3();\n\n\t\t\tconst uvA = new Vector2();\n\t\t\tconst uvB = new Vector2();\n\t\t\tconst uvC = new Vector2();\n\n\t\t\tfor ( let i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\n\n\t\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\n\t\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\n\t\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\n\n\t\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\n\t\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\n\t\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\n\n\t\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\n\n\t\t\t\tconst azi = azimuth( centroid );\n\n\t\t\t\tcorrectUV( uvA, j + 0, a, azi );\n\t\t\t\tcorrectUV( uvB, j + 2, b, azi );\n\t\t\t\tcorrectUV( uvC, j + 4, c, azi );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction correctUV( uv, stride, vector, azimuth ) {\n\n\t\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = uv.x - 1;\n\n\t\t\t}\n\n\t\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\t\tfunction azimuth( vector ) {\n\n\t\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t\t}\n\n\n\t\t// Angle above the XZ plane.\n\n\t\tfunction inclination( vector ) {\n\n\t\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new PolyhedronGeometry( data.vertices, data.indices, data.radius, data.details );\n\n\t}\n\n}\n\nclass DodecahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\t\tconst r = 1 / t;\n\n\t\tconst vertices = [\n\n\t\t\t// (1, 1, 1)\n\t\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\n\t\t\t- 1, 1, - 1, - 1, 1, 1,\n\t\t\t1, - 1, - 1, 1, - 1, 1,\n\t\t\t1, 1, - 1, 1, 1, 1,\n\n\t\t\t// (0, 1/, )\n\t\t\t0, - r, - t, 0, - r, t,\n\t\t\t0, r, - t, 0, r, t,\n\n\t\t\t// (1/, , 0)\n\t\t\t- r, - t, 0, - r, t, 0,\n\t\t\tr, - t, 0, r, t, 0,\n\n\t\t\t// (, 0, 1/)\n\t\t\t- t, 0, - r, t, 0, - r,\n\t\t\t- t, 0, r, t, 0, r\n\t\t];\n\n\t\tconst indices = [\n\t\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\n\t\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\n\t\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\n\t\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\n\t\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\n\t\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\n\t\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\n\t\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\n\t\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\n\t\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\n\t\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\n\t\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'DodecahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new DodecahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nconst _v0 = /*@__PURE__*/ new Vector3();\nconst _v1$1 = /*@__PURE__*/ new Vector3();\nconst _normal = /*@__PURE__*/ new Vector3();\nconst _triangle = /*@__PURE__*/ new Triangle();\n\nclass EdgesGeometry extends BufferGeometry {\n\n\tconstructor( geometry = null, thresholdAngle = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'EdgesGeometry';\n\n\t\tthis.parameters = {\n\t\t\tgeometry: geometry,\n\t\t\tthresholdAngle: thresholdAngle\n\t\t};\n\n\t\tif ( geometry !== null ) {\n\n\t\t\tconst precisionPoints = 4;\n\t\t\tconst precision = Math.pow( 10, precisionPoints );\n\t\t\tconst thresholdDot = Math.cos( DEG2RAD * thresholdAngle );\n\n\t\t\tconst indexAttr = geometry.getIndex();\n\t\t\tconst positionAttr = geometry.getAttribute( 'position' );\n\t\t\tconst indexCount = indexAttr ? indexAttr.count : positionAttr.count;\n\n\t\t\tconst indexArr = [ 0, 0, 0 ];\n\t\t\tconst vertKeys = [ 'a', 'b', 'c' ];\n\t\t\tconst hashes = new Array( 3 );\n\n\t\t\tconst edgeData = {};\n\t\t\tconst vertices = [];\n\t\t\tfor ( let i = 0; i < indexCount; i += 3 ) {\n\n\t\t\t\tif ( indexAttr ) {\n\n\t\t\t\t\tindexArr[ 0 ] = indexAttr.getX( i );\n\t\t\t\t\tindexArr[ 1 ] = indexAttr.getX( i + 1 );\n\t\t\t\t\tindexArr[ 2 ] = indexAttr.getX( i + 2 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tindexArr[ 0 ] = i;\n\t\t\t\t\tindexArr[ 1 ] = i + 1;\n\t\t\t\t\tindexArr[ 2 ] = i + 2;\n\n\t\t\t\t}\n\n\t\t\t\tconst { a, b, c } = _triangle;\n\t\t\t\ta.fromBufferAttribute( positionAttr, indexArr[ 0 ] );\n\t\t\t\tb.fromBufferAttribute( positionAttr, indexArr[ 1 ] );\n\t\t\t\tc.fromBufferAttribute( positionAttr, indexArr[ 2 ] );\n\t\t\t\t_triangle.getNormal( _normal );\n\n\t\t\t\t// create hashes for the edge from the vertices\n\t\t\t\thashes[ 0 ] = `${ Math.round( a.x * precision ) },${ Math.round( a.y * precision ) },${ Math.round( a.z * precision ) }`;\n\t\t\t\thashes[ 1 ] = `${ Math.round( b.x * precision ) },${ Math.round( b.y * precision ) },${ Math.round( b.z * precision ) }`;\n\t\t\t\thashes[ 2 ] = `${ Math.round( c.x * precision ) },${ Math.round( c.y * precision ) },${ Math.round( c.z * precision ) }`;\n\n\t\t\t\t// skip degenerate triangles\n\t\t\t\tif ( hashes[ 0 ] === hashes[ 1 ] || hashes[ 1 ] === hashes[ 2 ] || hashes[ 2 ] === hashes[ 0 ] ) {\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// iterate over every edge\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t// get the first and next vertex making up the edge\n\t\t\t\t\tconst jNext = ( j + 1 ) % 3;\n\t\t\t\t\tconst vecHash0 = hashes[ j ];\n\t\t\t\t\tconst vecHash1 = hashes[ jNext ];\n\t\t\t\t\tconst v0 = _triangle[ vertKeys[ j ] ];\n\t\t\t\t\tconst v1 = _triangle[ vertKeys[ jNext ] ];\n\n\t\t\t\t\tconst hash = `${ vecHash0 }_${ vecHash1 }`;\n\t\t\t\t\tconst reverseHash = `${ vecHash1 }_${ vecHash0 }`;\n\n\t\t\t\t\tif ( reverseHash in edgeData && edgeData[ reverseHash ] ) {\n\n\t\t\t\t\t\t// if we found a sibling edge add it into the vertex array if\n\t\t\t\t\t\t// it meets the angle threshold and delete the edge from the map.\n\t\t\t\t\t\tif ( _normal.dot( edgeData[ reverseHash ].normal ) <= thresholdDot ) {\n\n\t\t\t\t\t\t\tvertices.push( v0.x, v0.y, v0.z );\n\t\t\t\t\t\t\tvertices.push( v1.x, v1.y, v1.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tedgeData[ reverseHash ] = null;\n\n\t\t\t\t\t} else if ( ! ( hash in edgeData ) ) {\n\n\t\t\t\t\t\t// if we've already got an edge here then skip adding a new one\n\t\t\t\t\t\tedgeData[ hash ] = {\n\n\t\t\t\t\t\t\tindex0: indexArr[ j ],\n\t\t\t\t\t\t\tindex1: indexArr[ jNext ],\n\t\t\t\t\t\t\tnormal: _normal.clone(),\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// iterate over all remaining, unmatched edges and add them to the vertex array\n\t\t\tfor ( const key in edgeData ) {\n\n\t\t\t\tif ( edgeData[ key ] ) {\n\n\t\t\t\t\tconst { index0, index1 } = edgeData[ key ];\n\t\t\t\t\t_v0.fromBufferAttribute( positionAttr, index0 );\n\t\t\t\t\t_v1$1.fromBufferAttribute( positionAttr, index1 );\n\n\t\t\t\t\tvertices.push( _v0.x, _v0.y, _v0.z );\n\t\t\t\t\tvertices.push( _v1$1.x, _v1$1.y, _v1$1.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Shape extends Path {\n\n\tconstructor( points ) {\n\n\t\tsuper( points );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.type = 'Shape';\n\n\t\tthis.holes = [];\n\n\t}\n\n\tgetPointsHoles( divisions ) {\n\n\t\tconst holesPts = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t}\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\n/**\n * Port from https://github.com/mapbox/earcut (v2.2.4)\n */\n\nconst Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim = 2 ) {\n\n\t\tconst hasHoles = holeIndices && holeIndices.length;\n\t\tconst outerLen = hasHoles ? holeIndices[ 0 ] * dim : data.length;\n\t\tlet outerNode = linkedList( data, 0, outerLen, dim, true );\n\t\tconst triangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 32767 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize, 0 );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tlet i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tlet p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tlet stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim | 0 );\n\t\t\ttriangles.push( ear.i / dim | 0 );\n\t\t\ttriangles.push( next.i / dim | 0 );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tconst ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tconst x0 = ax < bx ? ( ax < cx ? ax : cx ) : ( bx < cx ? bx : cx ),\n\t\ty0 = ay < by ? ( ay < cy ? ay : cy ) : ( by < cy ? by : cy ),\n\t\tx1 = ax > bx ? ( ax > cx ? ax : cx ) : ( bx > cx ? bx : cx ),\n\t\ty1 = ay > by ? ( ay > cy ? ay : cy ) : ( by > cy ? by : cy );\n\n\tlet p = c.next;\n\twhile ( p !== a ) {\n\n\t\tif ( p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\tconst ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tconst x0 = ax < bx ? ( ax < cx ? ax : cx ) : ( bx < cx ? bx : cx ),\n\t\ty0 = ay < by ? ( ay < cy ? ay : cy ) : ( by < cy ? by : cy ),\n\t\tx1 = ax > bx ? ( ax > cx ? ax : cx ) : ( bx > cx ? bx : cx ),\n\t\ty1 = ay > by ? ( ay > cy ? ay : cy ) : ( by > cy ? by : cy );\n\n\t// z-order range for the current triangle bbox;\n\tconst minZ = zOrder( x0, y0, minX, minY, invSize ),\n\t\tmaxZ = zOrder( x1, y1, minX, minY, invSize );\n\n\tlet p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, n.x, n.y ) && area( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, n.x, n.y ) && area( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tconst a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim | 0 );\n\t\t\ttriangles.push( p.i / dim | 0 );\n\t\t\ttriangles.push( b.i / dim | 0 );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn filterPoints( p );\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tlet a = start;\n\tdo {\n\n\t\tlet b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tlet c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize, 0 );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize, 0 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tconst queue = [];\n\tlet i, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\touterNode = eliminateHole( queue[ i ], outerNode );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\tconst bridge = findHoleBridge( hole, outerNode );\n\tif ( ! bridge ) {\n\n\t\treturn outerNode;\n\n\t}\n\n\tconst bridgeReverse = splitPolygon( bridge, hole );\n\n\t// filter collinear points around the cuts\n\tfilterPoints( bridgeReverse, bridgeReverse.next );\n\treturn filterPoints( bridge, bridge.next );\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tlet p = outerNode,\n\t\tqx = - Infinity,\n\t\tm;\n\n\tconst hx = hole.x, hy = hole.y;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tconst x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\t\t\t\tif ( x === hx ) return m; // hole touches outer segment; pick leftmost endpoint\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tconst stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y;\n\tlet tanMin = Infinity, tan;\n\n\tp = m;\n\n\tdo {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== stop );\n\n\treturn m;\n\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector( m, p ) {\n\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tif ( p.z === 0 ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = ( x - minX ) * invSize | 0;\n\ty = ( y - minY ) * invSize | 0;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tlet p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) >= ( ax - px ) * ( cy - py ) &&\n           ( ax - px ) * ( by - py ) >= ( bx - px ) * ( ay - py ) &&\n           ( bx - px ) * ( cy - py ) >= ( cx - px ) * ( by - py );\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // dones't intersect other edges\n           ( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\n            ( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\n            equals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tconst o1 = sign( area( p1, q1, p2 ) );\n\tconst o2 = sign( area( p1, q1, q2 ) );\n\tconst o3 = sign( area( p2, q2, p1 ) );\n\tconst o4 = sign( area( p2, q2, q1 ) );\n\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\n\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n\treturn false;\n\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment( p, q, r ) {\n\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\n\n}\n\nfunction sign( num ) {\n\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tlet p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tlet p = a,\n\t\tinside = false;\n\tconst px = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tconst a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tconst p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = 0;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tlet sum = 0;\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nclass ShapeUtils {\n\n\t// calculate area of the contour polygon\n\n\tstatic area( contour ) {\n\n\t\tconst n = contour.length;\n\t\tlet a = 0.0;\n\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t}\n\n\tstatic isClockWise( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t}\n\n\tstatic triangulateShape( contour, holes ) {\n\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tconst holeIndices = []; // array of hole indices\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tlet holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n}\n\nfunction removeDupEndPts( points ) {\n\n\tconst l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( let i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\n/**\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\n\nclass ExtrudeGeometry extends BufferGeometry {\n\n\tconstructor( shapes = new Shape( [ new Vector2( 0.5, 0.5 ), new Vector2( - 0.5, 0.5 ), new Vector2( - 0.5, - 0.5 ), new Vector2( 0.5, - 0.5 ) ] ), options = {} ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ExtrudeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\toptions: options\n\t\t};\n\n\t\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\t\tconst scope = this;\n\n\t\tconst verticesArray = [];\n\t\tconst uvArray = [];\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\t\t\taddShape( shape );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\t\tthis.computeVertexNormals();\n\n\t\t// functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst placeholder = [];\n\n\t\t\t// options\n\n\t\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\t\tconst steps = options.steps !== undefined ? options.steps : 1;\n\t\t\tconst depth = options.depth !== undefined ? options.depth : 1;\n\n\t\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 0.2;\n\t\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 0.1;\n\t\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n\t\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\t\tconst extrudePath = options.extrudePath;\n\n\t\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t\t//\n\n\t\t\tlet extrudePts, extrudeByPath = false;\n\t\t\tlet splineTube, binormal, normal, position2;\n\n\t\t\tif ( extrudePath ) {\n\n\t\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\t\textrudeByPath = true;\n\t\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t\t// SETUP TNB variables\n\n\t\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\t\tbinormal = new Vector3();\n\t\t\t\tnormal = new Vector3();\n\t\t\t\tposition2 = new Vector3();\n\n\t\t\t}\n\n\t\t\t// Safeguards if bevels are not enabled\n\n\t\t\tif ( ! bevelEnabled ) {\n\n\t\t\t\tbevelSegments = 0;\n\t\t\t\tbevelThickness = 0;\n\t\t\t\tbevelSize = 0;\n\t\t\t\tbevelOffset = 0;\n\n\t\t\t}\n\n\t\t\t// Variables initialization\n\n\t\t\tconst shapePoints = shape.extractPoints( curveSegments );\n\n\t\t\tlet vertices = shapePoints.shape;\n\t\t\tconst holes = shapePoints.holes;\n\n\t\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\t\tif ( reverse ) {\n\n\t\t\t\tvertices = vertices.reverse();\n\n\t\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t\t/* Vertices */\n\n\t\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\tvertices = vertices.concat( ahole );\n\n\t\t\t}\n\n\n\t\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\t\tif ( ! vec ) console.error( 'THREE.ExtrudeGeometry: vec does not exist' );\n\n\t\t\t\treturn pt.clone().addScaledVector( vec, size );\n\n\t\t\t}\n\n\t\t\tconst vlen = vertices.length, flen = faces.length;\n\n\n\t\t\t// Find directions for point movement\n\n\n\t\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t\t//\n\t\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\t\tconst v_prev_x = inPt.x - inPrev.x,\n\t\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\t\tconst v_next_x = inNext.x - inPt.x,\n\t\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t\t// check for collinear edges\n\t\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not collinear\n\n\t\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t\t//  but prevent crazy spikes\n\t\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\t\tlet direction_eq = false; // assumes: opposite\n\n\t\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t\t}\n\n\n\t\t\tconst contourMovements = [];\n\n\t\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t\t}\n\n\t\t\tconst holesMovements = [];\n\t\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\toneHoleMovements = [];\n\n\t\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t\t}\n\n\t\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t\t}\n\n\n\t\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst bs = bevelSize + bevelOffset;\n\n\t\t\t// Back facing vertices\n\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Add stepped vertices...\n\t\t\t// Including front facing vertices\n\n\t\t\tfor ( let s = 1; s <= steps; s ++ ) {\n\n\t\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Add bevel segments planes\n\n\t\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* Faces */\n\n\t\t\t// Top and bottom faces\n\n\t\t\tbuildLidFaces();\n\n\t\t\t// Sides faces\n\n\t\t\tbuildSideFaces();\n\n\n\t\t\t/////  Internal functions\n\n\t\t\tfunction buildLidFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\n\t\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\t\tlet layer = 0; // steps + 1\n\t\t\t\t\tlet offset = vlen * layer;\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t\t}\n\n\t\t\t// Create faces for the z-sides of the shape\n\n\t\t\tfunction buildSideFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\t\t\t\tlet layeroffset = 0;\n\t\t\t\tsidewalls( contour, layeroffset );\n\t\t\t\tlayeroffset += contour.length;\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t\t//, true\n\t\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t\t}\n\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t\t}\n\n\t\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\t\tlet i = contour.length;\n\n\t\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\t\tconst j = i;\n\t\t\t\t\tlet k = i - 1;\n\t\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\n\n\t\t\t\t\t\tconst slen1 = vlen * s;\n\t\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\t\tconst a = layeroffset + j + slen1,\n\t\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction v( x, y, z ) {\n\n\t\t\t\tplaceholder.push( x );\n\t\t\t\tplaceholder.push( y );\n\t\t\t\tplaceholder.push( z );\n\n\t\t\t}\n\n\n\t\t\tfunction f3( a, b, c ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\n\t\t\t}\n\n\t\t\tfunction f4( a, b, c, d ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( d );\n\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\t\t\t\taddVertex( d );\n\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t}\n\n\t\t\tfunction addVertex( index ) {\n\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t\t}\n\n\n\t\t\tfunction addUV( vector2 ) {\n\n\t\t\t\tuvArray.push( vector2.x );\n\t\t\t\tuvArray.push( vector2.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\t\tconst options = this.parameters.options;\n\n\t\treturn toJSON$1( shapes, options, data );\n\n\t}\n\n\tstatic fromJSON( data, shapes ) {\n\n\t\tconst geometryShapes = [];\n\n\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\tgeometryShapes.push( shape );\n\n\t\t}\n\n\t\tconst extrudePath = data.options.extrudePath;\n\n\t\tif ( extrudePath !== undefined ) {\n\n\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\n\n\t\t}\n\n\t\treturn new ExtrudeGeometry( geometryShapes, data.options );\n\n\t}\n\n}\n\nconst WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\n\t\tconst d_x = vertices[ indexD * 3 ];\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < Math.abs( a_x - b_x ) ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n\n};\n\nfunction toJSON$1( shapes, options, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\tdata.options = Object.assign( {}, options );\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\nclass IcosahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\t\tconst vertices = [\n\t\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\n\t\t\t0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\n\t\t\tt, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\n\t\t\t1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\n\t\t\t3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\n\t\t\t4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'IcosahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new IcosahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass OctahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst vertices = [\n\t\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\n\t\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\n\t\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\n\t\t\t1, 3, 4,\t1, 4, 2\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'OctahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new OctahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass RingGeometry extends BufferGeometry {\n\n\tconstructor( innerRadius = 0.5, outerRadius = 1, thetaSegments = 32, phiSegments = 1, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'RingGeometry';\n\n\t\tthis.parameters = {\n\t\t\tinnerRadius: innerRadius,\n\t\t\touterRadius: outerRadius,\n\t\t\tthetaSegments: thetaSegments,\n\t\t\tphiSegments: phiSegments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthetaSegments = Math.max( 3, thetaSegments );\n\t\tphiSegments = Math.max( 1, phiSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// some helper variables\n\n\t\tlet radius = innerRadius;\n\t\tconst radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= phiSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\t\t// values are generate from the inside of the ring to the outside\n\n\t\t\t\tconst segment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t}\n\n\t\t\t// increase the radius for next row of vertices\n\n\t\t\tradius += radiusStep;\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let j = 0; j < phiSegments; j ++ ) {\n\n\t\t\tconst thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\t\tfor ( let i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\t\tconst segment = i + thetaSegmentLevel;\n\n\t\t\t\tconst a = segment;\n\t\t\t\tconst b = segment + thetaSegments + 1;\n\t\t\t\tconst c = segment + thetaSegments + 2;\n\t\t\t\tconst d = segment + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new RingGeometry( data.innerRadius, data.outerRadius, data.thetaSegments, data.phiSegments, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass ShapeGeometry extends BufferGeometry {\n\n\tconstructor( shapes = new Shape( [ new Vector2( 0, 0.5 ), new Vector2( - 0.5, - 0.5 ), new Vector2( 0.5, - 0.5 ) ] ), curveSegments = 12 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ShapeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet groupStart = 0;\n\t\tlet groupCount = 0;\n\n\t\t// allow single and array values for \"shapes\" parameter\n\n\t\tif ( Array.isArray( shapes ) === false ) {\n\n\t\t\taddShape( shapes );\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\n\n\t\t\t\taddShape( shapes[ i ] );\n\n\t\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\t\tgroupStart += groupCount;\n\t\t\t\tgroupCount = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t\t// helper functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst indexOffset = vertices.length / 3;\n\t\t\tconst points = shape.extractPoints( curveSegments );\n\n\t\t\tlet shapeVertices = points.shape;\n\t\t\tconst shapeHoles = points.holes;\n\n\t\t\t// check direction of vertices\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t\t// join vertices of inner and outer paths to a single array\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\t\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t\t}\n\n\t\t\t// vertices, normals, uvs\n\n\t\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\t\tconst vertex = shapeVertices[ i ];\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\t\tnormals.push( 0, 0, 1 );\n\t\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tconst face = faces[ i ];\n\n\t\t\t\tconst a = face[ 0 ] + indexOffset;\n\t\t\t\tconst b = face[ 1 ] + indexOffset;\n\t\t\t\tconst c = face[ 2 ] + indexOffset;\n\n\t\t\t\tindices.push( a, b, c );\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\n\t\treturn toJSON( shapes, data );\n\n\t}\n\n\tstatic fromJSON( data, shapes ) {\n\n\t\tconst geometryShapes = [];\n\n\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\tgeometryShapes.push( shape );\n\n\t\t}\n\n\t\treturn new ShapeGeometry( geometryShapes, data.curveSegments );\n\n\t}\n\n}\n\nfunction toJSON( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\nclass SphereGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, widthSegments = 32, heightSegments = 16, phiStart = 0, phiLength = Math.PI * 2, thetaStart = 0, thetaLength = Math.PI ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'SphereGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\twidthSegments = Math.max( 3, Math.floor( widthSegments ) );\n\t\theightSegments = Math.max( 2, Math.floor( heightSegments ) );\n\n\t\tconst thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\n\n\t\tlet index = 0;\n\t\tconst grid = [];\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\t\tconst verticesRow = [];\n\n\t\t\tconst v = iy / heightSegments;\n\n\t\t\t// special case for the poles\n\n\t\t\tlet uOffset = 0;\n\n\t\t\tif ( iy === 0 && thetaStart === 0 ) {\n\n\t\t\t\tuOffset = 0.5 / widthSegments;\n\n\t\t\t} else if ( iy === heightSegments && thetaEnd === Math.PI ) {\n\n\t\t\t\tuOffset = - 0.5 / widthSegments;\n\n\t\t\t}\n\n\t\t\tfor ( let ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\t\tconst u = ix / widthSegments;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.copy( vertex ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u + uOffset, 1 - v );\n\n\t\t\t\tverticesRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\tgrid.push( verticesRow );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\t\tconst a = grid[ iy ][ ix + 1 ];\n\t\t\t\tconst b = grid[ iy ][ ix ];\n\t\t\t\tconst c = grid[ iy + 1 ][ ix ];\n\t\t\t\tconst d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new SphereGeometry( data.radius, data.widthSegments, data.heightSegments, data.phiStart, data.phiLength, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass TetrahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst vertices = [\n\t\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'TetrahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TetrahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass TorusGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, tube = 0.4, radialSegments = 12, tubularSegments = 48, arc = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TorusGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\tradialSegments: radialSegments,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tarc: arc\n\t\t};\n\n\t\tradialSegments = Math.floor( radialSegments );\n\t\ttubularSegments = Math.floor( tubularSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst center = new Vector3();\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tconst u = i / tubularSegments * arc;\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\t\tcenter.y = radius * Math.sin( u );\n\t\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\t\tconst b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\t\tconst c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\t\tconst d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TorusGeometry( data.radius, data.tube, data.radialSegments, data.tubularSegments, data.arc );\n\n\t}\n\n}\n\nclass TorusKnotGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, tube = 0.4, tubularSegments = 64, radialSegments = 8, p = 2, q = 3 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TorusKnotGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t\tp: p,\n\t\t\tq: q\n\t\t};\n\n\t\ttubularSegments = Math.floor( tubularSegments );\n\t\tradialSegments = Math.floor( radialSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\tconst P1 = new Vector3();\n\t\tconst P2 = new Vector3();\n\n\t\tconst B = new Vector3();\n\t\tconst T = new Vector3();\n\t\tconst N = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segment\n\n\t\t\tconst u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t\t// calculate orthonormal basis\n\n\t\t\tT.subVectors( P2, P1 );\n\t\t\tN.addVectors( P2, P1 );\n\t\t\tB.crossVectors( T, N );\n\t\t\tN.crossVectors( B, T );\n\n\t\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\t\tB.normalize();\n\t\t\tN.normalize();\n\n\t\t\tfor ( let j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\t\t\t\tconst cx = - tube * Math.cos( v );\n\t\t\t\tconst cy = tube * Math.sin( v );\n\n\t\t\t\t// now calculate the final vertex position.\n\t\t\t\t// first we orient the extrusion with our basis vectors, then we add it to the current position on the curve\n\n\t\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\n\t\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// this function calculates the current position on the torus curve\n\n\t\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\t\tconst cu = Math.cos( u );\n\t\t\tconst su = Math.sin( u );\n\t\t\tconst quOverP = q / p * u;\n\t\t\tconst cs = Math.cos( quOverP );\n\n\t\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TorusKnotGeometry( data.radius, data.tube, data.tubularSegments, data.radialSegments, data.p, data.q );\n\n\t}\n\n}\n\nclass TubeGeometry extends BufferGeometry {\n\n\tconstructor( path = new QuadraticBezierCurve3( new Vector3( - 1, - 1, 0 ), new Vector3( - 1, 1, 0 ), new Vector3( 1, 1, 0 ) ), tubularSegments = 64, radius = 1, radialSegments = 8, closed = false ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TubeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpath: path,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradius: radius,\n\t\t\tradialSegments: radialSegments,\n\t\t\tclosed: closed\n\t\t};\n\n\t\tconst frames = path.computeFrenetFrames( tubularSegments, closed );\n\n\t\t// expose internals\n\n\t\tthis.tangents = frames.tangents;\n\t\tthis.normals = frames.normals;\n\t\tthis.binormals = frames.binormals;\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\t\tconst uv = new Vector2();\n\t\tlet P = new Vector3();\n\n\t\t// buffer\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\t\tconst indices = [];\n\n\t\t// create buffer data\n\n\t\tgenerateBufferData();\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// functions\n\n\t\tfunction generateBufferData() {\n\n\t\t\tfor ( let i = 0; i < tubularSegments; i ++ ) {\n\n\t\t\t\tgenerateSegment( i );\n\n\t\t\t}\n\n\t\t\t// if the geometry is not closed, generate the last row of vertices and normals\n\t\t\t// at the regular position on the given path\n\t\t\t//\n\t\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n\t\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\n\n\t\t\t// uvs are generated in a separate function.\n\t\t\t// this makes it easy compute correct values for closed geometries\n\n\t\t\tgenerateUVs();\n\n\t\t\t// finally create faces\n\n\t\t\tgenerateIndices();\n\n\t\t}\n\n\t\tfunction generateSegment( i ) {\n\n\t\t\t// we use getPointAt to sample evenly distributed points from the given path\n\n\t\t\tP = path.getPointAt( i / tubularSegments, P );\n\n\t\t\t// retrieve corresponding normal and binormal\n\n\t\t\tconst N = frames.normals[ i ];\n\t\t\tconst B = frames.binormals[ i ];\n\n\t\t\t// generate normals and vertices for the current segment\n\n\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\tconst sin = Math.sin( v );\n\t\t\t\tconst cos = - Math.cos( v );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.x = ( cos * N.x + sin * B.x );\n\t\t\t\tnormal.y = ( cos * N.y + sin * B.y );\n\t\t\t\tnormal.z = ( cos * N.z + sin * B.z );\n\t\t\t\tnormal.normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = P.x + radius * normal.x;\n\t\t\t\tvertex.y = P.y + radius * normal.y;\n\t\t\t\tvertex.z = P.z + radius * normal.z;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateIndices() {\n\n\t\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\t\tuv.x = i / tubularSegments;\n\t\t\t\t\tuv.y = j / radialSegments;\n\n\t\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.path = this.parameters.path.toJSON();\n\n\t\treturn data;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\n\t\t// User defined curves or instances of CurvePath will not be deserialized.\n\t\treturn new TubeGeometry(\n\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\n\t\t\tdata.tubularSegments,\n\t\t\tdata.radius,\n\t\t\tdata.radialSegments,\n\t\t\tdata.closed\n\t\t);\n\n\t}\n\n}\n\nclass WireframeGeometry extends BufferGeometry {\n\n\tconstructor( geometry = null ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'WireframeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tgeometry: geometry\n\t\t};\n\n\t\tif ( geometry !== null ) {\n\n\t\t\t// buffer\n\n\t\t\tconst vertices = [];\n\t\t\tconst edges = new Set();\n\n\t\t\t// helper variables\n\n\t\t\tconst start = new Vector3();\n\t\t\tconst end = new Vector3();\n\n\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t// indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\t\t\t\tconst indices = geometry.index;\n\t\t\t\tlet groups = geometry.groups;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\t// create a data structure that contains all edges without duplicates\n\n\t\t\t\tfor ( let o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\t\tconst group = groups[ o ];\n\n\t\t\t\t\tconst groupStart = group.start;\n\t\t\t\t\tconst groupCount = group.count;\n\n\t\t\t\t\tfor ( let i = groupStart, l = ( groupStart + groupCount ); i < l; i += 3 ) {\n\n\t\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\tconst index1 = indices.getX( i + j );\n\t\t\t\t\t\t\tconst index2 = indices.getX( i + ( j + 1 ) % 3 );\n\n\t\t\t\t\t\t\tstart.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\t\tend.fromBufferAttribute( position, index2 );\n\n\t\t\t\t\t\t\tif ( isUniqueEdge( start, end, edges ) === true ) {\n\n\t\t\t\t\t\t\t\tvertices.push( start.x, start.y, start.z );\n\t\t\t\t\t\t\t\tvertices.push( end.x, end.y, end.z );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\n\t\t\t\tfor ( let i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\t\tconst index1 = 3 * i + j;\n\t\t\t\t\t\tconst index2 = 3 * i + ( ( j + 1 ) % 3 );\n\n\t\t\t\t\t\tstart.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\tend.fromBufferAttribute( position, index2 );\n\n\t\t\t\t\t\tif ( isUniqueEdge( start, end, edges ) === true ) {\n\n\t\t\t\t\t\t\tvertices.push( start.x, start.y, start.z );\n\t\t\t\t\t\t\tvertices.push( end.x, end.y, end.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// build geometry\n\n\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction isUniqueEdge( start, end, edges ) {\n\n\tconst hash1 = `${start.x},${start.y},${start.z}-${end.x},${end.y},${end.z}`;\n\tconst hash2 = `${end.x},${end.y},${end.z}-${start.x},${start.y},${start.z}`; // coincident edge\n\n\tif ( edges.has( hash1 ) === true || edges.has( hash2 ) === true ) {\n\n\t\treturn false;\n\n\t} else {\n\n\t\tedges.add( hash1 );\n\t\tedges.add( hash2 );\n\t\treturn true;\n\n\t}\n\n}\n\nvar Geometries = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tBoxGeometry: BoxGeometry,\n\tCapsuleGeometry: CapsuleGeometry,\n\tCircleGeometry: CircleGeometry,\n\tConeGeometry: ConeGeometry,\n\tCylinderGeometry: CylinderGeometry,\n\tDodecahedronGeometry: DodecahedronGeometry,\n\tEdgesGeometry: EdgesGeometry,\n\tExtrudeGeometry: ExtrudeGeometry,\n\tIcosahedronGeometry: IcosahedronGeometry,\n\tLatheGeometry: LatheGeometry,\n\tOctahedronGeometry: OctahedronGeometry,\n\tPlaneGeometry: PlaneGeometry,\n\tPolyhedronGeometry: PolyhedronGeometry,\n\tRingGeometry: RingGeometry,\n\tShapeGeometry: ShapeGeometry,\n\tSphereGeometry: SphereGeometry,\n\tTetrahedronGeometry: TetrahedronGeometry,\n\tTorusGeometry: TorusGeometry,\n\tTorusKnotGeometry: TorusKnotGeometry,\n\tTubeGeometry: TubeGeometry,\n\tWireframeGeometry: WireframeGeometry\n});\n\nclass ShadowMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isShadowMaterial = true;\n\n\t\tthis.type = 'ShadowMaterial';\n\n\t\tthis.color = new Color( 0x000000 );\n\t\tthis.transparent = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass RawShaderMaterial extends ShaderMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper( parameters );\n\n\t\tthis.isRawShaderMaterial = true;\n\n\t\tthis.type = 'RawShaderMaterial';\n\n\t}\n\n}\n\nclass MeshStandardMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshStandardMaterial = true;\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.type = 'MeshStandardMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.roughness = 1.0;\n\t\tthis.metalness = 0.0;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.roughnessMap = null;\n\n\t\tthis.metalnessMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.envMapIntensity = 1.0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.color.copy( source.color );\n\t\tthis.roughness = source.roughness;\n\t\tthis.metalness = source.metalness;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.roughnessMap = source.roughnessMap;\n\n\t\tthis.metalnessMap = source.metalnessMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.envMapIntensity = source.envMapIntensity;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshPhysicalMaterial extends MeshStandardMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshPhysicalMaterial = true;\n\n\t\tthis.defines = {\n\n\t\t\t'STANDARD': '',\n\t\t\t'PHYSICAL': ''\n\n\t\t};\n\n\t\tthis.type = 'MeshPhysicalMaterial';\n\n\t\tthis.anisotropyRotation = 0;\n\t\tthis.anisotropyMap = null;\n\n\t\tthis.clearcoatMap = null;\n\t\tthis.clearcoatRoughness = 0.0;\n\t\tthis.clearcoatRoughnessMap = null;\n\t\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\t\tthis.clearcoatNormalMap = null;\n\n\t\tthis.ior = 1.5;\n\n\t\tObject.defineProperty( this, 'reflectivity', {\n\t\t\tget: function () {\n\n\t\t\t\treturn ( clamp( 2.5 * ( this.ior - 1 ) / ( this.ior + 1 ), 0, 1 ) );\n\n\t\t\t},\n\t\t\tset: function ( reflectivity ) {\n\n\t\t\t\tthis.ior = ( 1 + 0.4 * reflectivity ) / ( 1 - 0.4 * reflectivity );\n\n\t\t\t}\n\t\t} );\n\n\t\tthis.iridescenceMap = null;\n\t\tthis.iridescenceIOR = 1.3;\n\t\tthis.iridescenceThicknessRange = [ 100, 400 ];\n\t\tthis.iridescenceThicknessMap = null;\n\n\t\tthis.sheenColor = new Color( 0x000000 );\n\t\tthis.sheenColorMap = null;\n\t\tthis.sheenRoughness = 1.0;\n\t\tthis.sheenRoughnessMap = null;\n\n\t\tthis.transmissionMap = null;\n\n\t\tthis.thickness = 0;\n\t\tthis.thicknessMap = null;\n\t\tthis.attenuationDistance = Infinity;\n\t\tthis.attenuationColor = new Color( 1, 1, 1 );\n\n\t\tthis.specularIntensity = 1.0;\n\t\tthis.specularIntensityMap = null;\n\t\tthis.specularColor = new Color( 1, 1, 1 );\n\t\tthis.specularColorMap = null;\n\n\t\tthis._anisotropy = 0;\n\t\tthis._clearcoat = 0;\n\t\tthis._iridescence = 0;\n\t\tthis._sheen = 0.0;\n\t\tthis._transmission = 0;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tget anisotropy() {\n\n\t\treturn this._anisotropy;\n\n\t}\n\n\tset anisotropy( value ) {\n\n\t\tif ( this._anisotropy > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._anisotropy = value;\n\n\t}\n\n\tget clearcoat() {\n\n\t\treturn this._clearcoat;\n\n\t}\n\n\tset clearcoat( value ) {\n\n\t\tif ( this._clearcoat > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._clearcoat = value;\n\n\t}\n\n\tget iridescence() {\n\n\t\treturn this._iridescence;\n\n\t}\n\n\tset iridescence( value ) {\n\n\t\tif ( this._iridescence > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._iridescence = value;\n\n\t}\n\n\tget sheen() {\n\n\t\treturn this._sheen;\n\n\t}\n\n\tset sheen( value ) {\n\n\t\tif ( this._sheen > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._sheen = value;\n\n\t}\n\n\tget transmission() {\n\n\t\treturn this._transmission;\n\n\t}\n\n\tset transmission( value ) {\n\n\t\tif ( this._transmission > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._transmission = value;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = {\n\n\t\t\t'STANDARD': '',\n\t\t\t'PHYSICAL': ''\n\n\t\t};\n\n\t\tthis.anisotropy = source.anisotropy;\n\t\tthis.anisotropyRotation = source.anisotropyRotation;\n\t\tthis.anisotropyMap = source.anisotropyMap;\n\n\t\tthis.clearcoat = source.clearcoat;\n\t\tthis.clearcoatMap = source.clearcoatMap;\n\t\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\t\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n\t\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\t\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\t\tthis.ior = source.ior;\n\n\t\tthis.iridescence = source.iridescence;\n\t\tthis.iridescenceMap = source.iridescenceMap;\n\t\tthis.iridescenceIOR = source.iridescenceIOR;\n\t\tthis.iridescenceThicknessRange = [ ...source.iridescenceThicknessRange ];\n\t\tthis.iridescenceThicknessMap = source.iridescenceThicknessMap;\n\n\t\tthis.sheen = source.sheen;\n\t\tthis.sheenColor.copy( source.sheenColor );\n\t\tthis.sheenColorMap = source.sheenColorMap;\n\t\tthis.sheenRoughness = source.sheenRoughness;\n\t\tthis.sheenRoughnessMap = source.sheenRoughnessMap;\n\n\t\tthis.transmission = source.transmission;\n\t\tthis.transmissionMap = source.transmissionMap;\n\n\t\tthis.thickness = source.thickness;\n\t\tthis.thicknessMap = source.thicknessMap;\n\t\tthis.attenuationDistance = source.attenuationDistance;\n\t\tthis.attenuationColor.copy( source.attenuationColor );\n\n\t\tthis.specularIntensity = source.specularIntensity;\n\t\tthis.specularIntensityMap = source.specularIntensityMap;\n\t\tthis.specularColor.copy( source.specularColor );\n\t\tthis.specularColorMap = source.specularColorMap;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshPhongMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshPhongMaterial = true;\n\n\t\tthis.type = 'MeshPhongMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.specular = new Color( 0x111111 );\n\t\tthis.shininess = 30;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.specular.copy( source.specular );\n\t\tthis.shininess = source.shininess;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshToonMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshToonMaterial = true;\n\n\t\tthis.defines = { 'TOON': '' };\n\n\t\tthis.type = 'MeshToonMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\t\tthis.gradientMap = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\t\tthis.gradientMap = source.gradientMap;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshNormalMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshNormalMaterial = true;\n\n\t\tthis.type = 'MeshNormalMaterial';\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.flatShading = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshLambertMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshLambertMaterial = true;\n\n\t\tthis.type = 'MeshLambertMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshMatcapMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshMatcapMaterial = true;\n\n\t\tthis.defines = { 'MATCAP': '' };\n\n\t\tthis.type = 'MeshMatcapMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\n\t\tthis.matcap = null;\n\n\t\tthis.map = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = { 'MATCAP': '' };\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.matcap = source.matcap;\n\n\t\tthis.map = source.map;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineDashedMaterial extends LineBasicMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isLineDashedMaterial = true;\n\n\t\tthis.type = 'LineDashedMaterial';\n\n\t\tthis.scale = 1;\n\t\tthis.dashSize = 3;\n\t\tthis.gapSize = 1;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.scale = source.scale;\n\t\tthis.dashSize = source.dashSize;\n\t\tthis.gapSize = source.gapSize;\n\n\t\treturn this;\n\n\t}\n\n}\n\n// converts an array to a specific type\nfunction convertArray( array, type, forceClone ) {\n\n\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t! forceClone && array.constructor === type ) return array;\n\n\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\treturn new type( array ); // create typed array\n\n\t}\n\n\treturn Array.prototype.slice.call( array ); // create Array\n\n}\n\nfunction isTypedArray( object ) {\n\n\treturn ArrayBuffer.isView( object ) &&\n\t\t! ( object instanceof DataView );\n\n}\n\n// returns an array by which times and values can be sorted\nfunction getKeyframeOrder( times ) {\n\n\tfunction compareTime( i, j ) {\n\n\t\treturn times[ i ] - times[ j ];\n\n\t}\n\n\tconst n = times.length;\n\tconst result = new Array( n );\n\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\tresult.sort( compareTime );\n\n\treturn result;\n\n}\n\n// uses the array previously returned by 'getKeyframeOrder' to sort data\nfunction sortedArray( values, stride, order ) {\n\n\tconst nValues = values.length;\n\tconst result = new values.constructor( nValues );\n\n\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\tconst srcOffset = order[ i ] * stride;\n\n\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t}\n\n\t}\n\n\treturn result;\n\n}\n\n// function for parsing AOS keyframe formats\nfunction flattenJSON( jsonKeys, times, values, valuePropertyName ) {\n\n\tlet i = 1, key = jsonKeys[ 0 ];\n\n\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\tkey = jsonKeys[ i ++ ];\n\n\t}\n\n\tif ( key === undefined ) return; // no data\n\n\tlet value = key[ valuePropertyName ];\n\tif ( value === undefined ) return; // no data\n\n\tif ( Array.isArray( value ) ) {\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t} else if ( value.toArray !== undefined ) {\n\n\t\t// ...assume THREE.Math-ish\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t} else {\n\n\t\t// otherwise push as-is\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalues.push( value );\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t}\n\n}\n\nfunction subclip( sourceClip, name, startFrame, endFrame, fps = 30 ) {\n\n\tconst clip = sourceClip.clone();\n\n\tclip.name = name;\n\n\tconst tracks = [];\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tconst track = clip.tracks[ i ];\n\t\tconst valueSize = track.getValueSize();\n\n\t\tconst times = [];\n\t\tconst values = [];\n\n\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\n\n\t\t\tconst frame = track.times[ j ] * fps;\n\n\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( times.length === 0 ) continue;\n\n\t\ttrack.times = convertArray( times, track.times.constructor );\n\t\ttrack.values = convertArray( values, track.values.constructor );\n\n\t\ttracks.push( track );\n\n\t}\n\n\tclip.tracks = tracks;\n\n\t// find minimum .times value across all tracks in the trimmed clip\n\n\tlet minStartTime = Infinity;\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t}\n\n\t}\n\n\t// shift all tracks such that clip begins at t=0\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t}\n\n\tclip.resetDuration();\n\n\treturn clip;\n\n}\n\nfunction makeClipAdditive( targetClip, referenceFrame = 0, referenceClip = targetClip, fps = 30 ) {\n\n\tif ( fps <= 0 ) fps = 30;\n\n\tconst numTracks = referenceClip.tracks.length;\n\tconst referenceTime = referenceFrame / fps;\n\n\t// Make each track's values relative to the values at the reference frame\n\tfor ( let i = 0; i < numTracks; ++ i ) {\n\n\t\tconst referenceTrack = referenceClip.tracks[ i ];\n\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\n\n\t\t// Skip this track if it's non-numeric\n\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\n\n\t\t// Find the track in the target clip whose name and type matches the reference track\n\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\n\n\t\t\treturn track.name === referenceTrack.name\n\t\t\t\t&& track.ValueTypeName === referenceTrackType;\n\n\t\t} );\n\n\t\tif ( targetTrack === undefined ) continue;\n\n\t\tlet referenceOffset = 0;\n\t\tconst referenceValueSize = referenceTrack.getValueSize();\n\n\t\tif ( referenceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\treferenceOffset = referenceValueSize / 3;\n\n\t\t}\n\n\t\tlet targetOffset = 0;\n\t\tconst targetValueSize = targetTrack.getValueSize();\n\n\t\tif ( targetTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\ttargetOffset = targetValueSize / 3;\n\n\t\t}\n\n\t\tconst lastIndex = referenceTrack.times.length - 1;\n\t\tlet referenceValue;\n\n\t\t// Find the value to subtract out of the track\n\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\n\n\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\n\t\t\tconst startIndex = referenceOffset;\n\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\treferenceValue = referenceTrack.values.slice( startIndex, endIndex );\n\n\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\n\n\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\n\t\t\tconst startIndex = lastIndex * referenceValueSize + referenceOffset;\n\t\t\tconst endIndex = startIndex + referenceValueSize - referenceOffset;\n\t\t\treferenceValue = referenceTrack.values.slice( startIndex, endIndex );\n\n\t\t} else {\n\n\t\t\t// Interpolate to the reference value\n\t\t\tconst interpolant = referenceTrack.createInterpolant();\n\t\t\tconst startIndex = referenceOffset;\n\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\tinterpolant.evaluate( referenceTime );\n\t\t\treferenceValue = interpolant.resultBuffer.slice( startIndex, endIndex );\n\n\t\t}\n\n\t\t// Conjugate the quaternion\n\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\tconst referenceQuat = new Quaternion().fromArray( referenceValue ).normalize().conjugate();\n\t\t\treferenceQuat.toArray( referenceValue );\n\n\t\t}\n\n\t\t// Subtract the reference value from all of the track values\n\n\t\tconst numTimes = targetTrack.times.length;\n\t\tfor ( let j = 0; j < numTimes; ++ j ) {\n\n\t\t\tconst valueStart = j * targetValueSize + targetOffset;\n\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\t// Multiply the conjugate for quaternion track types\n\t\t\t\tQuaternion.multiplyQuaternionsFlat(\n\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\tvalueStart,\n\t\t\t\t\treferenceValue,\n\t\t\t\t\t0,\n\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\tvalueStart\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\tconst valueEnd = targetValueSize - targetOffset * 2;\n\n\t\t\t\t// Subtract each value for all other numeric track types\n\t\t\t\tfor ( let k = 0; k < valueEnd; ++ k ) {\n\n\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttargetClip.blendMode = AdditiveAnimationBlendMode;\n\n\treturn targetClip;\n\n}\n\nconst AnimationUtils = {\n\tconvertArray: convertArray,\n\tisTypedArray: isTypedArray,\n\tgetKeyframeOrder: getKeyframeOrder,\n\tsortedArray: sortedArray,\n\tflattenJSON: flattenJSON,\n\tsubclip: subclip,\n\tmakeClipAdditive: makeClipAdditive\n};\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n */\n\nclass Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tthis.parameterPositions = parameterPositions;\n\t\tthis._cachedIndex = 0;\n\n\t\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\t\tthis.sampleValues = sampleValues;\n\t\tthis.valueSize = sampleSize;\n\n\t\tthis.settings = null;\n\t\tthis.DefaultSettings_ = {};\n\n\t}\n\n\tevaluate( t ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet i1 = this._cachedIndex,\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tlet right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.copySampleValue_( 0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.copySampleValue_( 0 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t}\n\n\tgetSettings_() {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t// Template methods for derived classes:\n\n\tinterpolate_( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t}\n\n\tintervalChanged_( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n}\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nclass CubicInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t\tthis._weightPrev = - 0;\n\t\tthis._offsetPrev = - 0;\n\t\tthis._weightNext = - 0;\n\t\tthis._offsetNext = - 0;\n\n\t\tthis.DefaultSettings_ = {\n\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\n\t\t};\n\n\t}\n\n\tintervalChanged_( i1, t0, t1 ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet iPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tconst sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nclass LinearInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceding\n * the parameter.\n */\n\nclass DiscreteInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n}\n\nclass KeyframeTrack {\n\n\tconstructor( name, times, values, interpolation ) {\n\n\t\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\t\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\t\tthis.name = name;\n\n\t\tthis.times = convertArray( times, this.TimeBufferType );\n\t\tthis.values = convertArray( values, this.ValueBufferType );\n\n\t\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n\t}\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\tstatic toJSON( track ) {\n\n\t\tconst trackType = track.constructor;\n\n\t\tlet json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== this.toJSON ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': convertArray( track.times, Array ),\n\t\t\t\t'values': convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tconst interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n\tInterpolantFactoryMethodDiscrete( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodSmooth( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tsetInterpolation( interpolation ) {\n\n\t\tlet factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tconst message = 'unsupported interpolation for ' +\n\t\t\t\tthis.ValueTypeName + ' keyframe track named ' + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t}\n\n\tgetInterpolation() {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t}\n\n\tgetValueSize() {\n\n\t\treturn this.values.length / this.times.length;\n\n\t}\n\n\t// move all keyframes either forwards or backwards in time\n\tshift( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim( startTime, endTime ) {\n\n\t\tconst times = this.times,\n\t\t\tnKeys = times.length;\n\n\t\tlet from = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) {\n\n\t\t\t\tto = Math.max( to, 1 );\n\t\t\t\tfrom = to - 1;\n\n\t\t\t}\n\n\t\t\tconst stride = this.getValueSize();\n\t\t\tthis.times = times.slice( from, to );\n\t\t\tthis.values = this.values.slice( from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tconst valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tconst times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tlet prevTime = null;\n\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tconst currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( isTypedArray( values ) ) {\n\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize() {\n\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\n\t\tconst times = this.times.slice(),\n\t\t\tvalues = this.values.slice(),\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\tlastIndex = times.length - 1;\n\n\t\tlet writeIndex = 1;\n\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tlet keep = false;\n\n\t\t\tconst time = times[ i ];\n\t\t\tconst timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== times[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tconst offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tconst value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tconst readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = times.slice( 0, writeIndex );\n\t\t\tthis.values = values.slice( 0, writeIndex * stride );\n\n\t\t} else {\n\n\t\t\tthis.times = times;\n\t\t\tthis.values = values;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst times = this.times.slice();\n\t\tconst values = this.values.slice();\n\n\t\tconst TypedKeyframeTrack = this.constructor;\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n}\n\nKeyframeTrack.prototype.TimeBufferType = Float32Array;\nKeyframeTrack.prototype.ValueBufferType = Float32Array;\nKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\n\n/**\n * A Track of Boolean keyframe values.\n */\nclass BooleanKeyframeTrack extends KeyframeTrack {}\n\nBooleanKeyframeTrack.prototype.ValueTypeName = 'bool';\nBooleanKeyframeTrack.prototype.ValueBufferType = Array;\nBooleanKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of keyframe values that represent color.\n */\nclass ColorKeyframeTrack extends KeyframeTrack {}\n\nColorKeyframeTrack.prototype.ValueTypeName = 'color';\n\n/**\n * A Track of numeric keyframe values.\n */\nclass NumberKeyframeTrack extends KeyframeTrack {}\n\nNumberKeyframeTrack.prototype.ValueTypeName = 'number';\n\n/**\n * Spherical linear unit quaternion interpolant.\n */\n\nclass QuaternionLinearInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tlet offset = i1 * stride;\n\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\n/**\n * A Track of quaternion keyframe values.\n */\nclass QuaternionKeyframeTrack extends KeyframeTrack {\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n}\n\nQuaternionKeyframeTrack.prototype.ValueTypeName = 'quaternion';\n// ValueBufferType is inherited\nQuaternionKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\nQuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track that interpolates Strings\n */\nclass StringKeyframeTrack extends KeyframeTrack {}\n\nStringKeyframeTrack.prototype.ValueTypeName = 'string';\nStringKeyframeTrack.prototype.ValueBufferType = Array;\nStringKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of vectored keyframe values.\n */\nclass VectorKeyframeTrack extends KeyframeTrack {}\n\nVectorKeyframeTrack.prototype.ValueTypeName = 'vector';\n\nclass AnimationClip {\n\n\tconstructor( name, duration = - 1, tracks, blendMode = NormalAnimationBlendMode ) {\n\n\t\tthis.name = name;\n\t\tthis.tracks = tracks;\n\t\tthis.duration = duration;\n\t\tthis.blendMode = blendMode;\n\n\t\tthis.uuid = generateUUID();\n\n\t\t// this means it should figure out its duration by scanning the tracks\n\t\tif ( this.duration < 0 ) {\n\n\t\t\tthis.resetDuration();\n\n\t\t}\n\n\t}\n\n\n\tstatic parse( json ) {\n\n\t\tconst tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\tconst clip = new this( json.name, json.duration, tracks, json.blendMode );\n\t\tclip.uuid = json.uuid;\n\n\t\treturn clip;\n\n\t}\n\n\tstatic toJSON( clip ) {\n\n\t\tconst tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tconst json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid,\n\t\t\t'blendMode': clip.blendMode\n\n\t\t};\n\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t}\n\n\tstatic CreateFromMorphTargetSequence( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tconst numMorphTargets = morphTargetSequence.length;\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tlet times = [];\n\t\t\tlet values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tconst order = getKeyframeOrder( times );\n\t\t\ttimes = sortedArray( times, 1, order );\n\t\t\tvalues = sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new this( name, - 1, tracks );\n\n\t}\n\n\tstatic findByName( objectOrClipArray, name ) {\n\n\t\tlet clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tconst o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tstatic CreateClipsFromMorphTargetSequences( morphTargets, fps, noLoop ) {\n\n\t\tconst animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\tconst parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tconst name = parts[ 1 ];\n\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\n\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst clips = [];\n\n\t\tfor ( const name in animationToMorphTargets ) {\n\n\t\t\tclips.push( this.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t}\n\n\t// parse the animation.hierarchy format\n\tstatic parseAnimation( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tconst times = [];\n\t\t\t\tconst values = [];\n\n\t\t\t\tflattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tconst tracks = [];\n\n\t\tconst clipName = animation.name || 'default';\n\t\tconst fps = animation.fps || 30;\n\t\tconst blendMode = animation.blendMode;\n\n\t\t// automatic length determination in AnimationClip.\n\t\tlet duration = animation.length || - 1;\n\n\t\tconst hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tconst morphTargetNames = {};\n\n\t\t\t\tlet k;\n\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tconst times = [];\n\t\t\t\t\tconst values = [];\n\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * fps;\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst clip = new this( clipName, duration, tracks, blendMode );\n\n\t\treturn clip;\n\n\t}\n\n\tresetDuration() {\n\n\t\tconst tracks = this.tracks;\n\t\tlet duration = 0;\n\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tconst track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t}\n\n\ttrim() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\toptimize() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new this.constructor( this.name, this.duration, tracks, this.blendMode );\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.constructor.toJSON( this );\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tconst times = [], values = [];\n\n\t\tflattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nconst Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\nclass LoadingManager {\n\n\tconstructor( onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet isLoading = false;\n\t\tlet itemsLoaded = 0;\n\t\tlet itemsTotal = 0;\n\t\tlet urlModifier = undefined;\n\t\tconst handlers = [];\n\n\t\t// Refer to #5689 for the reason why we don't set .onStart\n\t\t// in the constructor\n\n\t\tthis.onStart = undefined;\n\t\tthis.onLoad = onLoad;\n\t\tthis.onProgress = onProgress;\n\t\tthis.onError = onError;\n\n\t\tthis.itemStart = function ( url ) {\n\n\t\t\titemsTotal ++;\n\n\t\t\tif ( isLoading === false ) {\n\n\t\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tisLoading = true;\n\n\t\t};\n\n\t\tthis.itemEnd = function ( url ) {\n\n\t\t\titemsLoaded ++;\n\n\t\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\t\tisLoading = false;\n\n\t\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\t\tscope.onLoad();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.itemError = function ( url ) {\n\n\t\t\tif ( scope.onError !== undefined ) {\n\n\t\t\t\tscope.onError( url );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.resolveURL = function ( url ) {\n\n\t\t\tif ( urlModifier ) {\n\n\t\t\t\treturn urlModifier( url );\n\n\t\t\t}\n\n\t\t\treturn url;\n\n\t\t};\n\n\t\tthis.setURLModifier = function ( transform ) {\n\n\t\t\turlModifier = transform;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.addHandler = function ( regex, loader ) {\n\n\t\t\thandlers.push( regex, loader );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.removeHandler = function ( regex ) {\n\n\t\t\tconst index = handlers.indexOf( regex );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\thandlers.splice( index, 2 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.getHandler = function ( file ) {\n\n\t\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\t\tconst regex = handlers[ i ];\n\t\t\t\tconst loader = handlers[ i + 1 ];\n\n\t\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\t\treturn loader;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t};\n\n\t}\n\n}\n\nconst DefaultLoadingManager = /*@__PURE__*/ new LoadingManager();\n\nclass Loader {\n\n\tconstructor( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t\tthis.crossOrigin = 'anonymous';\n\t\tthis.withCredentials = false;\n\t\tthis.path = '';\n\t\tthis.resourcePath = '';\n\t\tthis.requestHeader = {};\n\n\t}\n\n\tload( /* url, onLoad, onProgress, onError */ ) {}\n\n\tloadAsync( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t}\n\n\tparse( /* data */ ) {}\n\n\tsetCrossOrigin( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t}\n\n\tsetWithCredentials( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t}\n\n\tsetPath( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t}\n\n\tsetResourcePath( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t}\n\n\tsetRequestHeader( requestHeader ) {\n\n\t\tthis.requestHeader = requestHeader;\n\t\treturn this;\n\n\t}\n\n}\n\nLoader.DEFAULT_MATERIAL_NAME = '__DEFAULT';\n\nconst loading = {};\n\nclass HttpError extends Error {\n\n\tconstructor( message, response ) {\n\n\t\tsuper( message );\n\t\tthis.response = response;\n\n\t}\n\n}\n\nclass FileLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tthis.manager.itemStart( url );\n\n\t\t\tsetTimeout( () => {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tthis.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Initialise array for duplicate requests\n\t\tloading[ url ] = [];\n\n\t\tloading[ url ].push( {\n\t\t\tonLoad: onLoad,\n\t\t\tonProgress: onProgress,\n\t\t\tonError: onError,\n\t\t} );\n\n\t\t// create request\n\t\tconst req = new Request( url, {\n\t\t\theaders: new Headers( this.requestHeader ),\n\t\t\tcredentials: this.withCredentials ? 'include' : 'same-origin',\n\t\t\t// An abort controller could be added within a future PR\n\t\t} );\n\n\t\t// record states ( avoid data race )\n\t\tconst mimeType = this.mimeType;\n\t\tconst responseType = this.responseType;\n\n\t\t// start the fetch\n\t\tfetch( req )\n\t\t\t.then( response => {\n\n\t\t\t\tif ( response.status === 200 || response.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( response.status === 0 ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Workaround: Checking if response.body === undefined for Alipay browser #23548\n\n\t\t\t\t\tif ( typeof ReadableStream === 'undefined' || response.body === undefined || response.body.getReader === undefined ) {\n\n\t\t\t\t\t\treturn response;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst callbacks = loading[ url ];\n\t\t\t\t\tconst reader = response.body.getReader();\n\n\t\t\t\t\t// Nginx needs X-File-Size check\n\t\t\t\t\t// https://serverfault.com/questions/482875/why-does-nginx-remove-content-length-header-for-chunked-content\n\t\t\t\t\tconst contentLength = response.headers.get( 'Content-Length' ) || response.headers.get( 'X-File-Size' );\n\t\t\t\t\tconst total = contentLength ? parseInt( contentLength ) : 0;\n\t\t\t\t\tconst lengthComputable = total !== 0;\n\t\t\t\t\tlet loaded = 0;\n\n\t\t\t\t\t// periodically read data into the new stream tracking while download progress\n\t\t\t\t\tconst stream = new ReadableStream( {\n\t\t\t\t\t\tstart( controller ) {\n\n\t\t\t\t\t\t\treadData();\n\n\t\t\t\t\t\t\tfunction readData() {\n\n\t\t\t\t\t\t\t\treader.read().then( ( { done, value } ) => {\n\n\t\t\t\t\t\t\t\t\tif ( done ) {\n\n\t\t\t\t\t\t\t\t\t\tcontroller.close();\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tloaded += value.byteLength;\n\n\t\t\t\t\t\t\t\t\t\tconst event = new ProgressEvent( 'progress', { lengthComputable, loaded, total } );\n\t\t\t\t\t\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\t\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tcontroller.enqueue( value );\n\t\t\t\t\t\t\t\t\t\treadData();\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn new Response( stream );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new HttpError( `fetch for \"${response.url}\" responded with ${response.status}: ${response.statusText}`, response );\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.then( response => {\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\n\t\t\t\t\t\treturn response.arrayBuffer();\n\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\treturn response.blob();\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\treturn response.text()\n\t\t\t\t\t\t\t.then( text => {\n\n\t\t\t\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\t\t\t\treturn parser.parseFromString( text, mimeType );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\treturn response.json();\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( mimeType === undefined ) {\n\n\t\t\t\t\t\t\treturn response.text();\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// sniff encoding\n\t\t\t\t\t\t\tconst re = /charset=\"?([^;\"\\s]*)\"?/i;\n\t\t\t\t\t\t\tconst exec = re.exec( mimeType );\n\t\t\t\t\t\t\tconst label = exec && exec[ 1 ] ? exec[ 1 ].toLowerCase() : undefined;\n\t\t\t\t\t\t\tconst decoder = new TextDecoder( label );\n\t\t\t\t\t\t\treturn response.arrayBuffer().then( ab => decoder.decode( ab ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.then( data => {\n\n\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\tCache.add( url, data );\n\n\t\t\t\tconst callbacks = loading[ url ];\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( data );\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.catch( err => {\n\n\t\t\t\t// Abort errors and other errors are handled the same\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tif ( callbacks === undefined ) {\n\n\t\t\t\t\t// When onLoad was called and url was deleted in `loading`\n\t\t\t\t\tthis.manager.itemError( url );\n\t\t\t\t\tthrow err;\n\n\t\t\t\t}\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( err );\n\n\t\t\t\t}\n\n\t\t\t\tthis.manager.itemError( url );\n\n\t\t\t} )\n\t\t\t.finally( () => {\n\n\t\t\t\tthis.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\tthis.manager.itemStart( url );\n\n\t}\n\n\tsetResponseType( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t}\n\n\tsetMimeType( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t}\n\n}\n\nclass AnimationLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst animations = [];\n\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n}\n\n/**\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nclass CompressedTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst images = [];\n\n\t\tconst texture = new CompressedTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 ) texture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.image = images;\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\n\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.image = images;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass ImageLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = createElementNS( 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\tremoveEventListeners();\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\tremoveEventListeners();\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction removeEventListeners() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.slice( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n}\n\nclass CubeTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( urls, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new CubeTexture();\n\t\ttexture.colorSpace = SRGBColorSpace;\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nclass DataTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst texture = new DataTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setPath( this.path );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tlet texData;\n\n\t\t\ttry {\n\n\t\t\t\ttexData = scope.parse( buffer );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) {\n\n\t\t\t\t\tonError( error );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.colorSpace !== undefined ) {\n\n\t\t\t\ttexture.colorSpace = texData.colorSpace;\n\n\t\t\t} else if ( texData.encoding !== undefined ) { // @deprecated, r152\n\n\t\t\t\ttexture.encoding = texData.encoding;\n\n\t\t\t}\n\n\t\t\tif ( texData.flipY !== undefined ) {\n\n\t\t\t\ttexture.flipY = texData.flipY;\n\n\t\t\t}\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\tif ( texData.generateMipmaps !== undefined ) {\n\n\t\t\t\ttexture.generateMipmaps = texData.generateMipmaps;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass TextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new Texture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass Light extends Object3D {\n\n\tconstructor( color, intensity = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.isLight = true;\n\n\t\tthis.type = 'Light';\n\n\t\tthis.color = new Color( color );\n\t\tthis.intensity = intensity;\n\n\t}\n\n\tdispose() {\n\n\t\t// Empty here in base class; some subclasses override.\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass HemisphereLight extends Light {\n\n\tconstructor( skyColor, groundColor, intensity ) {\n\n\t\tsuper( skyColor, intensity );\n\n\t\tthis.isHemisphereLight = true;\n\n\t\tthis.type = 'HemisphereLight';\n\n\t\tthis.position.copy( Object3D.DEFAULT_UP );\n\t\tthis.updateMatrix();\n\n\t\tthis.groundColor = new Color( groundColor );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _projScreenMatrix$1 = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld$1 = /*@__PURE__*/ new Vector3();\nconst _lookTarget$1 = /*@__PURE__*/ new Vector3();\n\nclass LightShadow {\n\n\tconstructor( camera ) {\n\n\t\tthis.camera = camera;\n\n\t\tthis.bias = 0;\n\t\tthis.normalBias = 0;\n\t\tthis.radius = 1;\n\t\tthis.blurSamples = 8;\n\n\t\tthis.mapSize = new Vector2( 512, 512 );\n\n\t\tthis.map = null;\n\t\tthis.mapPass = null;\n\t\tthis.matrix = new Matrix4();\n\n\t\tthis.autoUpdate = true;\n\t\tthis.needsUpdate = false;\n\n\t\tthis._frustum = new Frustum();\n\t\tthis._frameExtents = new Vector2( 1, 1 );\n\n\t\tthis._viewportCount = 1;\n\n\t\tthis._viewports = [\n\n\t\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t\t];\n\n\t}\n\n\tgetViewportCount() {\n\n\t\treturn this._viewportCount;\n\n\t}\n\n\tgetFrustum() {\n\n\t\treturn this._frustum;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst shadowCamera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\t_lightPositionWorld$1.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( _lightPositionWorld$1 );\n\n\t\t_lookTarget$1.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( _lookTarget$1 );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\t_projScreenMatrix$1.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix$1 );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( _projScreenMatrix$1 );\n\n\t}\n\n\tgetViewport( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t}\n\n\tgetFrameExtents() {\n\n\t\treturn this._frameExtents;\n\n\t}\n\n\tdispose() {\n\n\t\tif ( this.map ) {\n\n\t\t\tthis.map.dispose();\n\n\t\t}\n\n\t\tif ( this.mapPass ) {\n\n\t\t\tthis.mapPass.dispose();\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n}\n\nclass SpotLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n\t\tthis.isSpotLightShadow = true;\n\n\t\tthis.focus = 1;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst camera = this.camera;\n\n\t\tconst fov = RAD2DEG * 2 * light.angle * this.focus;\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tsuper.updateMatrices( light );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.focus = source.focus;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass SpotLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, angle = Math.PI / 3, penumbra = 0, decay = 2 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isSpotLight = true;\n\n\t\tthis.type = 'SpotLight';\n\n\t\tthis.position.copy( Object3D.DEFAULT_UP );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.distance = distance;\n\t\tthis.angle = angle;\n\t\tthis.penumbra = penumbra;\n\t\tthis.decay = decay;\n\n\t\tthis.map = null;\n\n\t\tthis.shadow = new SpotLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in candela)\n\t\t// by convention for a spotlight, luminous power (lm) =  * luminous intensity (cd)\n\t\treturn this.intensity * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in candela) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / Math.PI;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _projScreenMatrix = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld = /*@__PURE__*/ new Vector3();\nconst _lookTarget = /*@__PURE__*/ new Vector3();\n\nclass PointLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\t\tthis.isPointLightShadow = true;\n\n\t\tthis._frameExtents = new Vector2( 4, 2 );\n\n\t\tthis._viewportCount = 6;\n\n\t\tthis._viewports = [\n\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t// following orientation:\n\t\t\t//\n\t\t\t//  xzXZ\n\t\t\t//   y Y\n\t\t\t//\n\t\t\t// X - Positive x direction\n\t\t\t// x - Negative x direction\n\t\t\t// Y - Positive y direction\n\t\t\t// y - Negative y direction\n\t\t\t// Z - Positive z direction\n\t\t\t// z - Negative z direction\n\n\t\t\t// positive X\n\t\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t\t// negative X\n\t\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t\t// positive Z\n\t\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t\t// negative Z\n\t\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t\t// positive Y\n\t\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t\t// negative Y\n\t\t\tnew Vector4( 1, 0, 1, 1 )\n\t\t];\n\n\t\tthis._cubeDirections = [\n\t\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t\t];\n\n\t\tthis._cubeUps = [\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t\t];\n\n\t}\n\n\tupdateMatrices( light, viewportIndex = 0 ) {\n\n\t\tconst camera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( far !== camera.far ) {\n\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( _lightPositionWorld );\n\n\t\t_lookTarget.copy( camera.position );\n\t\t_lookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( _lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t}\n\n}\n\nclass PointLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, decay = 2 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isPointLight = true;\n\n\t\tthis.type = 'PointLight';\n\n\t\tthis.distance = distance;\n\t\tthis.decay = decay;\n\n\t\tthis.shadow = new PointLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in candela)\n\t\t// for an isotropic light source, luminous power (lm) = 4  luminous intensity (cd)\n\t\treturn this.intensity * 4 * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in candela) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass DirectionalLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n\t\tthis.isDirectionalLightShadow = true;\n\n\t}\n\n}\n\nclass DirectionalLight extends Light {\n\n\tconstructor( color, intensity ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isDirectionalLight = true;\n\n\t\tthis.type = 'DirectionalLight';\n\n\t\tthis.position.copy( Object3D.DEFAULT_UP );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.shadow = new DirectionalLightShadow();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.target = source.target.clone();\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass AmbientLight extends Light {\n\n\tconstructor( color, intensity ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isAmbientLight = true;\n\n\t\tthis.type = 'AmbientLight';\n\n\t}\n\n}\n\nclass RectAreaLight extends Light {\n\n\tconstructor( color, intensity, width = 10, height = 10 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isRectAreaLight = true;\n\n\t\tthis.type = 'RectAreaLight';\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in nits)\n\t\treturn this.intensity * this.width * this.height * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in nits) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / ( this.width * this.height * Math.PI );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n}\n\n/**\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n\n// 3-band SH defined by 9 coefficients\n\nclass SphericalHarmonics3 {\n\n\tconstructor() {\n\n\t\tthis.isSphericalHarmonics3 = true;\n\n\t\tthis.coefficients = [];\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients.push( new Vector3() );\n\n\t\t}\n\n\t}\n\n\tset( coefficients ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tzero() {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// get the radiance in the direction of the normal\n\t// target is a Vector3\n\tgetAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\n\n\t\treturn target;\n\n\t}\n\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n\t// target is a Vector3\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\n\tgetIrradianceAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); //  * 0.282095\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 *  / 3 ) * 0.488603\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // (  / 4 ) * 1.092548\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // (  / 4 ) * 0.315392 * 3\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // (  / 4 ) * 0.546274\n\n\t\treturn target;\n\n\t}\n\n\tadd( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\taddScaledSH( sh, s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tscale( s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tlerp( sh, alpha ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tequals( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcopy( sh ) {\n\n\t\treturn this.set( sh.coefficients );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn array;\n\n\t}\n\n\t// evaluate the basis functions\n\t// shBasis is an Array[ 9 ]\n\tstatic getBasisAt( normal, shBasis ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\t// band 0\n\t\tshBasis[ 0 ] = 0.282095;\n\n\t\t// band 1\n\t\tshBasis[ 1 ] = 0.488603 * y;\n\t\tshBasis[ 2 ] = 0.488603 * z;\n\t\tshBasis[ 3 ] = 0.488603 * x;\n\n\t\t// band 2\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\n\n\t}\n\n}\n\nclass LightProbe extends Light {\n\n\tconstructor( sh = new SphericalHarmonics3(), intensity = 1 ) {\n\n\t\tsuper( undefined, intensity );\n\n\t\tthis.isLightProbe = true;\n\n\t\tthis.sh = sh;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.sh.copy( source.sh );\n\n\t\treturn this;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\n\t\tthis.sh.fromArray( json.sh );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.sh = this.sh.toArray();\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass MaterialLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\t\tthis.textures = {};\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tconst material = MaterialLoader.createMaterialFromType( json.type );\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined && material.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.sheen !== undefined ) material.sheen = json.sheen;\n\t\tif ( json.sheenColor !== undefined ) material.sheenColor = new Color().setHex( json.sheenColor );\n\t\tif ( json.sheenRoughness !== undefined ) material.sheenRoughness = json.sheenRoughness;\n\t\tif ( json.emissive !== undefined && material.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined && material.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.specularIntensity !== undefined ) material.specularIntensity = json.specularIntensity;\n\t\tif ( json.specularColor !== undefined && material.specularColor !== undefined ) material.specularColor.setHex( json.specularColor );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\n\t\tif ( json.iridescence !== undefined ) material.iridescence = json.iridescence;\n\t\tif ( json.iridescenceIOR !== undefined ) material.iridescenceIOR = json.iridescenceIOR;\n\t\tif ( json.iridescenceThicknessRange !== undefined ) material.iridescenceThicknessRange = json.iridescenceThicknessRange;\n\t\tif ( json.transmission !== undefined ) material.transmission = json.transmission;\n\t\tif ( json.thickness !== undefined ) material.thickness = json.thickness;\n\t\tif ( json.attenuationDistance !== undefined ) material.attenuationDistance = json.attenuationDistance;\n\t\tif ( json.attenuationColor !== undefined && material.attenuationColor !== undefined ) material.attenuationColor.setHex( json.attenuationColor );\n\t\tif ( json.anisotropy !== undefined ) material.anisotropy = json.anisotropy;\n\t\tif ( json.anisotropyRotation !== undefined ) material.anisotropyRotation = json.anisotropyRotation;\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.shadowSide !== undefined ) material.shadowSide = json.shadowSide;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.alphaHash !== undefined ) material.alphaHash = json.alphaHash;\n\t\tif ( json.depthFunc !== undefined ) material.depthFunc = json.depthFunc;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\t\tif ( json.blendSrc !== undefined ) material.blendSrc = json.blendSrc;\n\t\tif ( json.blendDst !== undefined ) material.blendDst = json.blendDst;\n\t\tif ( json.blendEquation !== undefined ) material.blendEquation = json.blendEquation;\n\t\tif ( json.blendSrcAlpha !== undefined ) material.blendSrcAlpha = json.blendSrcAlpha;\n\t\tif ( json.blendDstAlpha !== undefined ) material.blendDstAlpha = json.blendDstAlpha;\n\t\tif ( json.blendEquationAlpha !== undefined ) material.blendEquationAlpha = json.blendEquationAlpha;\n\t\tif ( json.blendColor !== undefined && material.blendColor !== undefined ) material.blendColor.setHex( json.blendColor );\n\t\tif ( json.blendAlpha !== undefined ) material.blendAlpha = json.blendAlpha;\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\n\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== undefined ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.alphaToCoverage !== undefined ) material.alphaToCoverage = json.alphaToCoverage;\n\t\tif ( json.premultipliedAlpha !== undefined ) material.premultipliedAlpha = json.premultipliedAlpha;\n\t\tif ( json.forceSinglePass !== undefined ) material.forceSinglePass = json.forceSinglePass;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\n\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\tif ( json.vertexColors !== undefined ) {\n\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\n\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Shader Material\n\n\t\tif ( json.uniforms !== undefined ) {\n\n\t\t\tfor ( const name in json.uniforms ) {\n\n\t\t\t\tconst uniform = json.uniforms[ name ];\n\n\t\t\t\tmaterial.uniforms[ name ] = {};\n\n\t\t\t\tswitch ( uniform.type ) {\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v2':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\t\tif ( json.glslVersion !== undefined ) material.glslVersion = json.glslVersion;\n\n\t\tif ( json.extensions !== undefined ) {\n\n\t\t\tfor ( const key in json.extensions ) {\n\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.lights !== undefined ) material.lights = json.lights;\n\t\tif ( json.clipping !== undefined ) material.clipping = json.clipping;\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\n\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tlet normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\t\tif ( json.specularIntensityMap !== undefined ) material.specularIntensityMap = getTexture( json.specularIntensityMap );\n\t\tif ( json.specularColorMap !== undefined ) material.specularColorMap = getTexture( json.specularColorMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\n\n\t\tif ( json.iridescenceMap !== undefined ) material.iridescenceMap = getTexture( json.iridescenceMap );\n\t\tif ( json.iridescenceThicknessMap !== undefined ) material.iridescenceThicknessMap = getTexture( json.iridescenceThicknessMap );\n\n\t\tif ( json.transmissionMap !== undefined ) material.transmissionMap = getTexture( json.transmissionMap );\n\t\tif ( json.thicknessMap !== undefined ) material.thicknessMap = getTexture( json.thicknessMap );\n\n\t\tif ( json.anisotropyMap !== undefined ) material.anisotropyMap = getTexture( json.anisotropyMap );\n\n\t\tif ( json.sheenColorMap !== undefined ) material.sheenColorMap = getTexture( json.sheenColorMap );\n\t\tif ( json.sheenRoughnessMap !== undefined ) material.sheenRoughnessMap = getTexture( json.sheenRoughnessMap );\n\n\t\treturn material;\n\n\t}\n\n\tsetTextures( value ) {\n\n\t\tthis.textures = value;\n\t\treturn this;\n\n\t}\n\n\tstatic createMaterialFromType( type ) {\n\n\t\tconst materialLib = {\n\t\t\tShadowMaterial,\n\t\t\tSpriteMaterial,\n\t\t\tRawShaderMaterial,\n\t\t\tShaderMaterial,\n\t\t\tPointsMaterial,\n\t\t\tMeshPhysicalMaterial,\n\t\t\tMeshStandardMaterial,\n\t\t\tMeshPhongMaterial,\n\t\t\tMeshToonMaterial,\n\t\t\tMeshNormalMaterial,\n\t\t\tMeshLambertMaterial,\n\t\t\tMeshDepthMaterial,\n\t\t\tMeshDistanceMaterial,\n\t\t\tMeshBasicMaterial,\n\t\t\tMeshMatcapMaterial,\n\t\t\tLineDashedMaterial,\n\t\t\tLineBasicMaterial,\n\t\t\tMaterial\n\t\t};\n\n\t\treturn new materialLib[ type ]();\n\n\t}\n\n}\n\nclass LoaderUtils {\n\n\tstatic decodeText( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tlet s = '';\n\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t}\n\n\tstatic extractUrlBase( url ) {\n\n\t\tconst index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.slice( 0, index + 1 );\n\n\t}\n\n\tstatic resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n}\n\nclass InstancedBufferGeometry extends BufferGeometry {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isInstancedBufferGeometry = true;\n\n\t\tthis.type = 'InstancedBufferGeometry';\n\t\tthis.instanceCount = Infinity;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.instanceCount = source.instanceCount;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.instanceCount = this.instanceCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass BufferGeometryLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst interleavedBufferMap = {};\n\t\tconst arrayBufferMap = {};\n\n\t\tfunction getInterleavedBuffer( json, uuid ) {\n\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\n\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\n\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\n\n\t\t\tconst array = getTypedArray( interleavedBuffer.type, buffer );\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\n\t\t\tib.uuid = interleavedBuffer.uuid;\n\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\n\n\t\t\treturn ib;\n\n\t\t}\n\n\t\tfunction getArrayBuffer( json, uuid ) {\n\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\n\n\t\t\tconst arrayBuffers = json.arrayBuffers;\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\n\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\n\n\t\t\tarrayBufferMap[ uuid ] = ab;\n\n\t\t\treturn ab;\n\n\t\t}\n\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\n\n\t\tconst index = json.data.index;\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst typedArray = getTypedArray( index.type, index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tconst attributes = json.data.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\t\t\tlet bufferAttribute;\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t} else {\n\n\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\tif ( attribute.usage !== undefined ) bufferAttribute.setUsage( attribute.usage );\n\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\n\n\t\t}\n\n\t\tconst morphAttributes = json.data.morphAttributes;\n\n\t\tif ( morphAttributes ) {\n\n\t\t\tfor ( const key in morphAttributes ) {\n\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst attribute = attributeArray[ i ];\n\t\t\t\t\tlet bufferAttribute;\n\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\t\t\tarray.push( bufferAttribute );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t}\n\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tconst center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\tif ( json.name ) geometry.name = json.name;\n\t\tif ( json.userData ) geometry.userData = json.userData;\n\n\t\treturn geometry;\n\n\t}\n\n}\n\nclass ObjectLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json = null;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( error );\n\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst metadata = json.metadata;\n\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( new Error( 'THREE.ObjectLoader: Can\\'t load ' + url ) );\n\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tscope.parse( json, onLoad );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tasync loadAsync( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tconst text = await loader.loadAsync( url, onProgress );\n\n\t\tconst json = JSON.parse( text );\n\n\t\tconst metadata = json.metadata;\n\n\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\tthrow new Error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\n\t\t}\n\n\t\treturn await scope.parseAsync( json );\n\n\t}\n\n\tparse( json, onLoad ) {\n\n\t\tconst animations = this.parseAnimations( json.animations );\n\t\tconst shapes = this.parseShapes( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = this.parseImages( json.images, function () {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t} );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials, textures, animations );\n\t\tconst skeletons = this.parseSkeletons( json.skeletons, object );\n\n\t\tthis.bindSkeletons( object, skeletons );\n\n\t\t//\n\n\t\tif ( onLoad !== undefined ) {\n\n\t\t\tlet hasImages = false;\n\n\t\t\tfor ( const uuid in images ) {\n\n\t\t\t\tif ( images[ uuid ].data instanceof HTMLImageElement ) {\n\n\t\t\t\t\thasImages = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasImages === false ) onLoad( object );\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n\tasync parseAsync( json ) {\n\n\t\tconst animations = this.parseAnimations( json.animations );\n\t\tconst shapes = this.parseShapes( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = await this.parseImagesAsync( json.images );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials, textures, animations );\n\t\tconst skeletons = this.parseSkeletons( json.skeletons, object );\n\n\t\tthis.bindSkeletons( object, skeletons );\n\n\t\treturn object;\n\n\t}\n\n\tparseShapes( json ) {\n\n\t\tconst shapes = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst shape = new Shape().fromJSON( json[ i ] );\n\n\t\t\t\tshapes[ shape.uuid ] = shape;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n\tparseSkeletons( json, object ) {\n\n\t\tconst skeletons = {};\n\t\tconst bones = {};\n\n\t\t// generate bone lookup table\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tif ( child.isBone ) bones[ child.uuid ] = child;\n\n\t\t} );\n\n\t\t// create skeletons\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst skeleton = new Skeleton().fromJSON( json[ i ], bones );\n\n\t\t\t\tskeletons[ skeleton.uuid ] = skeleton;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn skeletons;\n\n\t}\n\n\tparseGeometries( json, shapes ) {\n\n\t\tconst geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst bufferGeometryLoader = new BufferGeometryLoader();\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tlet geometry;\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'BufferGeometry':\n\t\t\t\t\tcase 'InstancedBufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( data.type in Geometries ) {\n\n\t\t\t\t\t\t\tgeometry = Geometries[ data.type ].fromJSON( data, shapes );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( `THREE.ObjectLoader: Unsupported geometry type \"${ data.type }\"` );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\t\t\t\tif ( data.userData !== undefined ) geometry.userData = data.userData;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t}\n\n\tparseMaterials( json, textures ) {\n\n\t\tconst cache = {}; // MultiMaterial\n\t\tconst materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst loader = new MaterialLoader();\n\t\t\tloader.setTextures( textures );\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\n\n\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\n\n\t\t\t\t}\n\n\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t}\n\n\tparseAnimations( json ) {\n\n\t\tconst animations = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tconst clip = AnimationClip.parse( data );\n\n\t\t\t\tanimations[ clip.uuid ] = clip;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n\tparseImages( json, onLoad ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tfunction loadImage( url ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn loader.load( url, function () {\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, undefined, function () {\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tfunction deserializeImage( image ) {\n\n\t\t\tif ( typeof image === 'string' ) {\n\n\t\t\t\tconst url = image;\n\n\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( url ) ? url : scope.resourcePath + url;\n\n\t\t\t\treturn loadImage( path );\n\n\t\t\t} else {\n\n\t\t\t\tif ( image.data ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: getTypedArray( image.type, image.data ),\n\t\t\t\t\t\twidth: image.width,\n\t\t\t\t\t\theight: image.height\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tconst manager = new LoadingManager( onLoad );\n\n\t\t\tloader = new ImageLoader( manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\tconst imageArray = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst deserializedImage = deserializeImage( currentUrl );\n\n\t\t\t\t\t\tif ( deserializedImage !== null ) {\n\n\t\t\t\t\t\t\tif ( deserializedImage instanceof HTMLImageElement ) {\n\n\t\t\t\t\t\t\t\timageArray.push( deserializedImage );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// special case: handle array of data textures for cube textures\n\n\t\t\t\t\t\t\t\timageArray.push( new DataTexture( deserializedImage.data, deserializedImage.width, deserializedImage.height ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\timages[ image.uuid ] = new Source( imageArray );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst deserializedImage = deserializeImage( image.url );\n\t\t\t\t\timages[ image.uuid ] = new Source( deserializedImage );\n\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\tasync parseImagesAsync( json ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tasync function deserializeImage( image ) {\n\n\t\t\tif ( typeof image === 'string' ) {\n\n\t\t\t\tconst url = image;\n\n\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( url ) ? url : scope.resourcePath + url;\n\n\t\t\t\treturn await loader.loadAsync( path );\n\n\t\t\t} else {\n\n\t\t\t\tif ( image.data ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: getTypedArray( image.type, image.data ),\n\t\t\t\t\t\twidth: image.width,\n\t\t\t\t\t\theight: image.height\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tloader = new ImageLoader( this.manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\tconst imageArray = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst deserializedImage = await deserializeImage( currentUrl );\n\n\t\t\t\t\t\tif ( deserializedImage !== null ) {\n\n\t\t\t\t\t\t\tif ( deserializedImage instanceof HTMLImageElement ) {\n\n\t\t\t\t\t\t\t\timageArray.push( deserializedImage );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// special case: handle array of data textures for cube textures\n\n\t\t\t\t\t\t\t\timageArray.push( new DataTexture( deserializedImage.data, deserializedImage.width, deserializedImage.height ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\timages[ image.uuid ] = new Source( imageArray );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst deserializedImage = await deserializeImage( image.url );\n\t\t\t\t\timages[ image.uuid ] = new Source( deserializedImage );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\tparseTextures( json, images ) {\n\n\t\tfunction parseConstant( value, type ) {\n\n\t\t\tif ( typeof value === 'number' ) return value;\n\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\treturn type[ value ];\n\n\t\t}\n\n\t\tconst textures = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t}\n\n\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t}\n\n\t\t\t\tconst source = images[ data.image ];\n\t\t\t\tconst image = source.data;\n\n\t\t\t\tlet texture;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\ttexture = new CubeTexture();\n\n\t\t\t\t\tif ( image.length === 6 ) texture.needsUpdate = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( image && image.data ) {\n\n\t\t\t\t\t\ttexture = new DataTexture();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttexture = new Texture();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( image ) texture.needsUpdate = true; // textures can have undefined image data\n\n\t\t\t\t}\n\n\t\t\t\ttexture.source = source;\n\n\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\n\t\t\t\tif ( data.channel !== undefined ) texture.channel = data.channel;\n\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\n\n\t\t\t\tif ( data.wrap !== undefined ) {\n\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\n\t\t\t\tif ( data.internalFormat !== undefined ) texture.internalFormat = data.internalFormat;\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\n\t\t\t\tif ( data.colorSpace !== undefined ) texture.colorSpace = data.colorSpace;\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding; // @deprecated, r152\n\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\n\n\t\t\t\tif ( data.generateMipmaps !== undefined ) texture.generateMipmaps = data.generateMipmaps;\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\n\t\t\t\tif ( data.compareFunction !== undefined ) texture.compareFunction = data.compareFunction;\n\n\t\t\t\tif ( data.userData !== undefined ) texture.userData = data.userData;\n\n\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textures;\n\n\t}\n\n\tparseObject( data, geometries, materials, textures, animations ) {\n\n\t\tlet object;\n\n\t\tfunction getGeometry( name ) {\n\n\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t}\n\n\t\t\treturn geometries[ name ];\n\n\t\t}\n\n\t\tfunction getMaterial( name ) {\n\n\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, l = name.length; i < l; i ++ ) {\n\n\t\t\t\t\tconst uuid = name[ i ];\n\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tarray.push( materials[ uuid ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t}\n\n\t\t\treturn materials[ name ];\n\n\t\t}\n\n\t\tfunction getTexture( uuid ) {\n\n\t\t\tif ( textures[ uuid ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined texture', uuid );\n\n\t\t\t}\n\n\t\t\treturn textures[ uuid ];\n\n\t\t}\n\n\t\tlet geometry, material;\n\n\t\tswitch ( data.type ) {\n\n\t\t\tcase 'Scene':\n\n\t\t\t\tobject = new Scene();\n\n\t\t\t\tif ( data.background !== undefined ) {\n\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\n\n\t\t\t\t\t\tobject.background = new Color( data.background );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tobject.background = getTexture( data.background );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.environment !== undefined ) {\n\n\t\t\t\t\tobject.environment = getTexture( data.environment );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.fog !== undefined ) {\n\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\n\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\n\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\n\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( data.fog.name !== '' ) {\n\n\t\t\t\t\t\tobject.fog.name = data.fog.name;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.backgroundBlurriness !== undefined ) object.backgroundBlurriness = data.backgroundBlurriness;\n\t\t\t\tif ( data.backgroundIntensity !== undefined ) object.backgroundIntensity = data.backgroundIntensity;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'AmbientLight':\n\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'DirectionalLight':\n\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointLight':\n\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'RectAreaLight':\n\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SpotLight':\n\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'HemisphereLight':\n\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LightProbe':\n\n\t\t\t\tobject = new LightProbe().fromJSON( data );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SkinnedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t \tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new SkinnedMesh( geometry, material );\n\n\t\t\t\tif ( data.bindMode !== undefined ) object.bindMode = data.bindMode;\n\t\t\t\tif ( data.bindMatrix !== undefined ) object.bindMatrix.fromArray( data.bindMatrix );\n\t\t\t\tif ( data.skeleton !== undefined ) object.skeleton = data.skeleton;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Mesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new Mesh( geometry, material );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'InstancedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\t\t\t\tconst count = data.count;\n\t\t\t\tconst instanceMatrix = data.instanceMatrix;\n\t\t\t\tconst instanceColor = data.instanceColor;\n\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\n\t\t\t\tobject.instanceMatrix = new InstancedBufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\n\t\t\t\tif ( instanceColor !== undefined ) object.instanceColor = new InstancedBufferAttribute( new Float32Array( instanceColor.array ), instanceColor.itemSize );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'BatchedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new BatchedMesh( data.maxGeometryCount, data.maxVertexCount, data.maxIndexCount, material );\n\t\t\t\tobject.geometry = geometry;\n\t\t\t\tobject.perObjectFrustumCulled = data.perObjectFrustumCulled;\n\t\t\t\tobject.sortObjects = data.sortObjects;\n\n\t\t\t\tobject._drawRanges = data.drawRanges;\n\t\t\t\tobject._reservedRanges = data.reservedRanges;\n\n\t\t\t\tobject._visibility = data.visibility;\n\t\t\t\tobject._active = data.active;\n\t\t\t\tobject._bounds = data.bounds.map( bound => {\n\n\t\t\t\t\tconst box = new Box3();\n\t\t\t\t\tbox.min.fromArray( bound.boxMin );\n\t\t\t\t\tbox.max.fromArray( bound.boxMax );\n\n\t\t\t\t\tconst sphere = new Sphere();\n\t\t\t\t\tsphere.radius = bound.sphereRadius;\n\t\t\t\t\tsphere.center.fromArray( bound.sphereCenter );\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tboxInitialized: bound.boxInitialized,\n\t\t\t\t\t\tbox: box,\n\n\t\t\t\t\t\tsphereInitialized: bound.sphereInitialized,\n\t\t\t\t\t\tsphere: sphere\n\t\t\t\t\t};\n\n\t\t\t\t} );\n\n\t\t\t\tobject._maxGeometryCount = data.maxGeometryCount;\n\t\t\t\tobject._maxVertexCount = data.maxVertexCount;\n\t\t\t\tobject._maxIndexCount = data.maxIndexCount;\n\n\t\t\t\tobject._geometryInitialized = data.geometryInitialized;\n\t\t\t\tobject._geometryCount = data.geometryCount;\n\n\t\t\t\tobject._matricesTexture = getTexture( data.matricesTexture.uuid );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LOD':\n\n\t\t\t\tobject = new LOD();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Line':\n\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineLoop':\n\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineSegments':\n\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointCloud':\n\t\t\tcase 'Points':\n\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Sprite':\n\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Group':\n\n\t\t\t\tobject = new Group();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Bone':\n\n\t\t\t\tobject = new Bone();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tobject = new Object3D();\n\n\t\t}\n\n\t\tobject.uuid = data.uuid;\n\n\t\tif ( data.name !== undefined ) object.name = data.name;\n\n\t\tif ( data.matrix !== undefined ) {\n\n\t\t\tobject.matrix.fromArray( data.matrix );\n\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t} else {\n\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t}\n\n\t\tif ( data.up !== undefined ) object.up.fromArray( data.up );\n\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\tif ( data.shadow ) {\n\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\n\t\t\tif ( data.shadow.normalBias !== undefined ) object.shadow.normalBias = data.shadow.normalBias;\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\n\n\t\t}\n\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\n\n\t\tif ( data.children !== undefined ) {\n\n\t\t\tconst children = data.children;\n\n\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials, textures, animations ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.animations !== undefined ) {\n\n\t\t\tconst objectAnimations = data.animations;\n\n\t\t\tfor ( let i = 0; i < objectAnimations.length; i ++ ) {\n\n\t\t\t\tconst uuid = objectAnimations[ i ];\n\n\t\t\t\tobject.animations.push( animations[ uuid ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.type === 'LOD' ) {\n\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\n\n\t\t\tconst levels = data.levels;\n\n\t\t\tfor ( let l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\tconst level = levels[ l ];\n\t\t\t\tconst child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\tobject.addLevel( child, level.distance, level.hysteresis );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n\tbindSkeletons( object, skeletons ) {\n\n\t\tif ( Object.keys( skeletons ).length === 0 ) return;\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tif ( child.isSkinnedMesh === true && child.skeleton !== undefined ) {\n\n\t\t\t\tconst skeleton = skeletons[ child.skeleton ];\n\n\t\t\t\tif ( skeleton === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No skeleton found with UUID:', child.skeleton );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tchild.bind( skeleton, child.bindMatrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n}\n\nconst TEXTURE_MAPPING = {\n\tUVMapping: UVMapping,\n\tCubeReflectionMapping: CubeReflectionMapping,\n\tCubeRefractionMapping: CubeRefractionMapping,\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\tCubeUVReflectionMapping: CubeUVReflectionMapping\n};\n\nconst TEXTURE_WRAPPING = {\n\tRepeatWrapping: RepeatWrapping,\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\n};\n\nconst TEXTURE_FILTER = {\n\tNearestFilter: NearestFilter,\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\n\tLinearFilter: LinearFilter,\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\n};\n\nclass ImageBitmapLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.isImageBitmapLoader = true;\n\n\t\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t\t}\n\n\t\tif ( typeof fetch === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t\t}\n\n\t\tthis.options = { premultiplyAlpha: 'none' };\n\n\t}\n\n\tsetOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\t// If cached is a promise, wait for it to resolve\n\t\t\tif ( cached.then ) {\n\n\t\t\t\tcached.then( imageBitmap => {\n\n\t\t\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} ).catch( e => {\n\n\t\t\t\t\tif ( onError ) onError( e );\n\n\t\t\t\t} );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// If cached is not a promise (i.e., it's already an imageBitmap)\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst fetchOptions = {};\n\t\tfetchOptions.credentials = ( this.crossOrigin === 'anonymous' ) ? 'same-origin' : 'include';\n\t\tfetchOptions.headers = this.requestHeader;\n\n\t\tconst promise = fetch( url, fetchOptions ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\treturn createImageBitmap( blob, Object.assign( scope.options, { colorSpaceConversion: 'none' } ) );\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t\treturn imageBitmap;\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tCache.remove( url );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tCache.add( url, promise );\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n}\n\nlet _context;\n\nclass AudioContext {\n\n\tstatic getContext() {\n\n\t\tif ( _context === undefined ) {\n\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn _context;\n\n\t}\n\n\tstatic setContext( value ) {\n\n\t\t_context = value;\n\n\t}\n\n}\n\nclass AudioLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\n\n\t\t\t\tconst context = AudioContext.getContext();\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\n\n\t\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t\t} ).catch( handleError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\thandleError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\tfunction handleError( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\n\t\t}\n\n\t}\n\n}\n\nconst _eyeRight = /*@__PURE__*/ new Matrix4();\nconst _eyeLeft = /*@__PURE__*/ new Matrix4();\nconst _projectionMatrix = /*@__PURE__*/ new Matrix4();\n\nclass StereoCamera {\n\n\tconstructor() {\n\n\t\tthis.type = 'StereoCamera';\n\n\t\tthis.aspect = 1;\n\n\t\tthis.eyeSep = 0.064;\n\n\t\tthis.cameraL = new PerspectiveCamera();\n\t\tthis.cameraL.layers.enable( 1 );\n\t\tthis.cameraL.matrixAutoUpdate = false;\n\n\t\tthis.cameraR = new PerspectiveCamera();\n\t\tthis.cameraR.layers.enable( 2 );\n\t\tthis.cameraR.matrixAutoUpdate = false;\n\n\t\tthis._cache = {\n\t\t\tfocus: null,\n\t\t\tfov: null,\n\t\t\taspect: null,\n\t\t\tnear: null,\n\t\t\tfar: null,\n\t\t\tzoom: null,\n\t\t\teyeSep: null\n\t\t};\n\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst cache = this._cache;\n\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tcache.focus = camera.focus;\n\t\t\tcache.fov = camera.fov;\n\t\t\tcache.aspect = camera.aspect * this.aspect;\n\t\t\tcache.near = camera.near;\n\t\t\tcache.far = camera.far;\n\t\t\tcache.zoom = camera.zoom;\n\t\t\tcache.eyeSep = this.eyeSep;\n\n\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\t_projectionMatrix.copy( camera.projectionMatrix );\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n\t\t\tconst ymax = ( cache.near * Math.tan( DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\n\t\t\tlet xmin, xmax;\n\n\t\t\t// translate xOffset\n\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\n\n\t\t\t// for left eye\n\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\n\n\t\t\t_projectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\t_projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraL.projectionMatrix.copy( _projectionMatrix );\n\n\t\t\t// for right eye\n\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\n\n\t\t\t_projectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\t_projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraR.projectionMatrix.copy( _projectionMatrix );\n\n\t\t}\n\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\n\n\t}\n\n}\n\nclass Clock {\n\n\tconstructor( autoStart = true ) {\n\n\t\tthis.autoStart = autoStart;\n\n\t\tthis.startTime = 0;\n\t\tthis.oldTime = 0;\n\t\tthis.elapsedTime = 0;\n\n\t\tthis.running = false;\n\n\t}\n\n\tstart() {\n\n\t\tthis.startTime = now();\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t}\n\n\tstop() {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t}\n\n\tgetElapsedTime() {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t}\n\n\tgetDelta() {\n\n\t\tlet diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tconst newTime = now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n}\n\nfunction now() {\n\n\treturn ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n}\n\nconst _position$1 = /*@__PURE__*/ new Vector3();\nconst _quaternion$1 = /*@__PURE__*/ new Quaternion();\nconst _scale$1 = /*@__PURE__*/ new Vector3();\nconst _orientation$1 = /*@__PURE__*/ new Vector3();\n\nclass AudioListener extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'AudioListener';\n\n\t\tthis.context = AudioContext.getContext();\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( this.context.destination );\n\n\t\tthis.filter = null;\n\n\t\tthis.timeDelta = 0;\n\n\t\t// private\n\n\t\tthis._clock = new Clock();\n\n\t}\n\n\tgetInput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tremoveFilter() {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\t\t\tthis.gain.connect( this.context.destination );\n\t\t\tthis.filter = null;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.filter;\n\n\t}\n\n\tsetFilter( value ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\n\t\t} else {\n\n\t\t\tthis.gain.disconnect( this.context.destination );\n\n\t\t}\n\n\t\tthis.filter = value;\n\t\tthis.gain.connect( this.filter );\n\t\tthis.filter.connect( this.context.destination );\n\n\t\treturn this;\n\n\t}\n\n\tgetMasterVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetMasterVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tconst listener = this.context.listener;\n\t\tconst up = this.up;\n\n\t\tthis.timeDelta = this._clock.getDelta();\n\n\t\tthis.matrixWorld.decompose( _position$1, _quaternion$1, _scale$1 );\n\n\t\t_orientation$1.set( 0, 0, - 1 ).applyQuaternion( _quaternion$1 );\n\n\t\tif ( listener.positionX ) {\n\n\t\t\t// code path for Chrome (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.timeDelta;\n\n\t\t\tlistener.positionX.linearRampToValueAtTime( _position$1.x, endTime );\n\t\t\tlistener.positionY.linearRampToValueAtTime( _position$1.y, endTime );\n\t\t\tlistener.positionZ.linearRampToValueAtTime( _position$1.z, endTime );\n\t\t\tlistener.forwardX.linearRampToValueAtTime( _orientation$1.x, endTime );\n\t\t\tlistener.forwardY.linearRampToValueAtTime( _orientation$1.y, endTime );\n\t\t\tlistener.forwardZ.linearRampToValueAtTime( _orientation$1.z, endTime );\n\t\t\tlistener.upX.linearRampToValueAtTime( up.x, endTime );\n\t\t\tlistener.upY.linearRampToValueAtTime( up.y, endTime );\n\t\t\tlistener.upZ.linearRampToValueAtTime( up.z, endTime );\n\n\t\t} else {\n\n\t\t\tlistener.setPosition( _position$1.x, _position$1.y, _position$1.z );\n\t\t\tlistener.setOrientation( _orientation$1.x, _orientation$1.y, _orientation$1.z, up.x, up.y, up.z );\n\n\t\t}\n\n\t}\n\n}\n\nclass Audio extends Object3D {\n\n\tconstructor( listener ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Audio';\n\n\t\tthis.listener = listener;\n\t\tthis.context = listener.context;\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( listener.getInput() );\n\n\t\tthis.autoplay = false;\n\n\t\tthis.buffer = null;\n\t\tthis.detune = 0;\n\t\tthis.loop = false;\n\t\tthis.loopStart = 0;\n\t\tthis.loopEnd = 0;\n\t\tthis.offset = 0;\n\t\tthis.duration = undefined;\n\t\tthis.playbackRate = 1;\n\t\tthis.isPlaying = false;\n\t\tthis.hasPlaybackControl = true;\n\t\tthis.source = null;\n\t\tthis.sourceType = 'empty';\n\n\t\tthis._startedAt = 0;\n\t\tthis._progress = 0;\n\t\tthis._connected = false;\n\n\t\tthis.filters = [];\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tsetNodeSource( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaElementSource( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaStreamSource( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetBuffer( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t}\n\n\tplay( delay = 0 ) {\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tconst source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t}\n\n\tpause() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\t// update current progress\n\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\n\n\t\t\tif ( this.loop === true ) {\n\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\n\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._progress = 0;\n\n\t\tif ( this.source !== null ) {\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t}\n\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t}\n\n\tconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = true;\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect() {\n\n\t\tif ( this._connected === false ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = false;\n\n\t\treturn this;\n\n\t}\n\n\tgetFilters() {\n\n\t\treturn this.filters;\n\n\t}\n\n\tsetFilters( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this._connected === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value.slice();\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value.slice();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetDetune( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.isPlaying === true && this.source.detune !== undefined ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetDetune() {\n\n\t\treturn this.detune;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t}\n\n\tsetFilter( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t}\n\n\tsetPlaybackRate( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetPlaybackRate() {\n\n\t\treturn this.playbackRate;\n\n\t}\n\n\tonEnded() {\n\n\t\tthis.isPlaying = false;\n\n\t}\n\n\tgetLoop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t}\n\n\tsetLoop( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopStart( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopEnd( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _position = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\nconst _scale = /*@__PURE__*/ new Vector3();\nconst _orientation = /*@__PURE__*/ new Vector3();\n\nclass PositionalAudio extends Audio {\n\n\tconstructor( listener ) {\n\n\t\tsuper( listener );\n\n\t\tthis.panner = this.context.createPanner();\n\t\tthis.panner.panningModel = 'HRTF';\n\t\tthis.panner.connect( this.gain );\n\n\t}\n\n\tconnect() {\n\n\t\tsuper.connect();\n\n\t\tthis.panner.connect( this.gain );\n\n\t}\n\n\tdisconnect() {\n\n\t\tsuper.disconnect();\n\n\t\tthis.panner.disconnect( this.gain );\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.panner;\n\n\t}\n\n\tgetRefDistance() {\n\n\t\treturn this.panner.refDistance;\n\n\t}\n\n\tsetRefDistance( value ) {\n\n\t\tthis.panner.refDistance = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetRolloffFactor() {\n\n\t\treturn this.panner.rolloffFactor;\n\n\t}\n\n\tsetRolloffFactor( value ) {\n\n\t\tthis.panner.rolloffFactor = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetDistanceModel() {\n\n\t\treturn this.panner.distanceModel;\n\n\t}\n\n\tsetDistanceModel( value ) {\n\n\t\tthis.panner.distanceModel = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxDistance() {\n\n\t\treturn this.panner.maxDistance;\n\n\t}\n\n\tsetMaxDistance( value ) {\n\n\t\tthis.panner.maxDistance = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetDirectionalCone( coneInnerAngle, coneOuterAngle, coneOuterGain ) {\n\n\t\tthis.panner.coneInnerAngle = coneInnerAngle;\n\t\tthis.panner.coneOuterAngle = coneOuterAngle;\n\t\tthis.panner.coneOuterGain = coneOuterGain;\n\n\t\treturn this;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.hasPlaybackControl === true && this.isPlaying === false ) return;\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, _scale );\n\n\t\t_orientation.set( 0, 0, 1 ).applyQuaternion( _quaternion );\n\n\t\tconst panner = this.panner;\n\n\t\tif ( panner.positionX ) {\n\n\t\t\t// code path for Chrome and Firefox (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.listener.timeDelta;\n\n\t\t\tpanner.positionX.linearRampToValueAtTime( _position.x, endTime );\n\t\t\tpanner.positionY.linearRampToValueAtTime( _position.y, endTime );\n\t\t\tpanner.positionZ.linearRampToValueAtTime( _position.z, endTime );\n\t\t\tpanner.orientationX.linearRampToValueAtTime( _orientation.x, endTime );\n\t\t\tpanner.orientationY.linearRampToValueAtTime( _orientation.y, endTime );\n\t\t\tpanner.orientationZ.linearRampToValueAtTime( _orientation.z, endTime );\n\n\t\t} else {\n\n\t\t\tpanner.setPosition( _position.x, _position.y, _position.z );\n\t\t\tpanner.setOrientation( _orientation.x, _orientation.y, _orientation.z );\n\n\t\t}\n\n\t}\n\n}\n\nclass AudioAnalyser {\n\n\tconstructor( audio, fftSize = 2048 ) {\n\n\t\tthis.analyser = audio.context.createAnalyser();\n\t\tthis.analyser.fftSize = fftSize;\n\n\t\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\n\n\t\taudio.getOutput().connect( this.analyser );\n\n\t}\n\n\n\tgetFrequencyData() {\n\n\t\tthis.analyser.getByteFrequencyData( this.data );\n\n\t\treturn this.data;\n\n\t}\n\n\tgetAverageFrequency() {\n\n\t\tlet value = 0;\n\t\tconst data = this.getFrequencyData();\n\n\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\tvalue += data[ i ];\n\n\t\t}\n\n\t\treturn value / data.length;\n\n\t}\n\n}\n\nclass PropertyMixer {\n\n\tconstructor( binding, typeName, valueSize ) {\n\n\t\tthis.binding = binding;\n\t\tthis.valueSize = valueSize;\n\n\t\tlet mixFunction,\n\t\t\tmixFunctionAdditive,\n\t\t\tsetIdentity;\n\n\t\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\n\t\t//\n\t\t// interpolators can use .buffer as their .result\n\t\t// the data then goes to 'incoming'\n\t\t//\n\t\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t\t// the cumulative result and are compared to detect\n\t\t// changes\n\t\t//\n\t\t// 'orig' stores the original state of the property\n\t\t//\n\t\t// 'add' is used for additive cumulative results\n\t\t//\n\t\t// 'work' is optional and is only present for quaternion types. It is used\n\t\t// to store intermediate quaternion multiplication results\n\n\t\tswitch ( typeName ) {\n\n\t\t\tcase 'quaternion':\n\t\t\t\tmixFunction = this._slerp;\n\t\t\t\tmixFunctionAdditive = this._slerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\n\t\t\t\tthis._workIndex = 5;\n\t\t\t\tbreak;\n\n\t\t\tcase 'string':\n\t\t\tcase 'bool':\n\t\t\t\tmixFunction = this._select;\n\n\t\t\t\t// Use the regular mix function and for additive on these types,\n\t\t\t\t// additive is not relevant for non-numeric types\n\t\t\t\tmixFunctionAdditive = this._select;\n\n\t\t\t\tsetIdentity = this._setAdditiveIdentityOther;\n\n\t\t\t\tthis.buffer = new Array( valueSize * 5 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tmixFunction = this._lerp;\n\t\t\t\tmixFunctionAdditive = this._lerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\n\n\t\t}\n\n\t\tthis._mixBufferRegion = mixFunction;\n\t\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\n\t\tthis._setIdentity = setIdentity;\n\t\tthis._origIndex = 3;\n\t\tthis._addIndex = 4;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tthis.useCount = 0;\n\t\tthis.referenceCount = 0;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride;\n\n\t\tlet currentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tconst mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'add'\n\taccumulateAdditive( weight ) {\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = stride * this._addIndex;\n\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\n\n\t\t\t// add = identity\n\n\t\t\tthis._setIdentity();\n\n\t\t}\n\n\t\t// add := add + incoming * weight\n\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\n\t\tthis.cumulativeWeightAdditive += weight;\n\n\t}\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply( accuIndex ) {\n\n\t\tconst stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tconst originalValueOffset = stride * this._origIndex;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tif ( weightAdditive > 0 ) {\n\n\t\t\t// accuN := accuN + additive accuN\n\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\n\n\t\t}\n\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState() {\n\n\t\tconst binding = this.binding;\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * this._origIndex;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\t// Add to identity for additive\n\t\tthis._setIdentity();\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t}\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState() {\n\n\t\tconst originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t}\n\n\t_setAdditiveIdentityNumeric() {\n\n\t\tconst startIndex = this._addIndex * this.valueSize;\n\t\tconst endIndex = startIndex + this.valueSize;\n\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\n\n\t\t\tthis.buffer[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\t_setAdditiveIdentityQuaternion() {\n\n\t\tthis._setAdditiveIdentityNumeric();\n\t\tthis.buffer[ this._addIndex * this.valueSize + 3 ] = 1;\n\n\t}\n\n\t_setAdditiveIdentityOther() {\n\n\t\tconst startIndex = this._origIndex * this.valueSize;\n\t\tconst targetIndex = this._addIndex * this.valueSize;\n\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\n\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\n\n\t\t}\n\n\t}\n\n\n\t// mix functions\n\n\t_select( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_slerp( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t}\n\n\t_slerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst workOffset = this._workIndex * stride;\n\n\t\t// Store result in intermediate buffer offset\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\n\n\t\t// Slerp to the intermediate result\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\n\n\t}\n\n\t_lerp( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst s = 1 - t;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n\t_lerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n}\n\n// Characters [].:/ are reserved for track binding syntax.\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nconst _directoryRe = /*@__PURE__*/ /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nconst _nodeRe = /*@__PURE__*/ /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nconst _objectRe = /*@__PURE__*/ /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nconst _propertyRe = /*@__PURE__*/ /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nconst _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nconst _supportedObjectNames = [ 'material', 'materials', 'bones', 'map' ];\n\nclass Composite {\n\n\tconstructor( targetGroup, path, optionalParsedPath ) {\n\n\t\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis._targetGroup = targetGroup;\n\t\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n\t}\n\n\tgetValue( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t}\n\n\tsetValue( array, offset ) {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t}\n\n\tbind() {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t}\n\n\tunbind() {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n}\n\n// Note: This class uses a State pattern on a per-method basis:\n// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n// prototype version of these methods with one that represents\n// the bound state. When the property is not found, the methods\n// become no-ops.\nclass PropertyBinding {\n\n\tconstructor( rootNode, path, parsedPath ) {\n\n\t\tthis.path = path;\n\t\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName );\n\n\t\tthis.rootNode = rootNode;\n\n\t\t// initial state of these methods that calls 'bind'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n\n\tstatic create( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tstatic sanitizeNodeName( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t}\n\n\tstatic parseTrackName( trackName ) {\n\n\t\tconst matches = _trackRe.exec( trackName );\n\n\t\tif ( matches === null ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tconst results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t}\n\n\tstatic findNode( root, nodeName ) {\n\n\t\tif ( nodeName === undefined || nodeName === '' || nodeName === '.' || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tconst searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tconst childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable() {}\n\t_setValue_unavailable() {}\n\n\t// Getters\n\n\t_getValue_direct( buffer, offset ) {\n\n\t\tbuffer[ offset ] = this.targetObject[ this.propertyName ];\n\n\t}\n\n\t_getValue_array( buffer, offset ) {\n\n\t\tconst source = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t}\n\n\t}\n\n\t_getValue_arrayElement( buffer, offset ) {\n\n\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t}\n\n\t_getValue_toArray( buffer, offset ) {\n\n\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t}\n\n\t// Direct\n\n\t_setValue_direct( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t}\n\n\t_setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// EntireArray\n\n\t_setValue_array( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t}\n\n\t_setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// ArrayElement\n\n\t_setValue_arrayElement( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t}\n\n\t_setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// HasToFromArray\n\n\t_setValue_fromArray( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t}\n\n\t_setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t_getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t}\n\n\t_setValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t}\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind() {\n\n\t\tlet targetObject = this.node;\n\t\tconst parsedPath = this.parsedPath;\n\n\t\tconst objectName = parsedPath.objectName;\n\t\tconst propertyName = parsedPath.propertyName;\n\t\tlet propertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName );\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.warn( 'THREE.PropertyBinding: No target node found for track: ' + this.path + '.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tlet objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map':\n\n\t\t\t\t\tif ( 'map' in targetObject ) {\n\n\t\t\t\t\t\ttargetObject = targetObject.map;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.map ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.map;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tconst nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tconst nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tlet versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tlet bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === 'morphTargetInfluences' ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\n\n\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t}\n\n\tunbind() {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n}\n\nPropertyBinding.Composite = Composite;\n\nPropertyBinding.prototype.BindingType = {\n\tDirect: 0,\n\tEntireArray: 1,\n\tArrayElement: 2,\n\tHasFromToArray: 3\n};\n\nPropertyBinding.prototype.Versioning = {\n\tNone: 0,\n\tNeedsUpdate: 1,\n\tMatrixWorldNeedsUpdate: 2\n};\n\nPropertyBinding.prototype.GetterByBindingType = [\n\n\tPropertyBinding.prototype._getValue_direct,\n\tPropertyBinding.prototype._getValue_array,\n\tPropertyBinding.prototype._getValue_arrayElement,\n\tPropertyBinding.prototype._getValue_toArray,\n\n];\n\nPropertyBinding.prototype.SetterByBindingTypeAndVersioning = [\n\n\t[\n\t\t// Direct\n\t\tPropertyBinding.prototype._setValue_direct,\n\t\tPropertyBinding.prototype._setValue_direct_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// EntireArray\n\n\t\tPropertyBinding.prototype._setValue_array,\n\t\tPropertyBinding.prototype._setValue_array_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// ArrayElement\n\t\tPropertyBinding.prototype._setValue_arrayElement,\n\t\tPropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// HasToFromArray\n\t\tPropertyBinding.prototype._setValue_fromArray,\n\t\tPropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate,\n\n\t]\n\n];\n\n/**\n *\n * A group of objects that receives a shared animation state.\n *\n * Usage:\n *\n *  - Add objects you would otherwise pass as 'root' to the\n *    constructor or the .clipAction method of AnimationMixer.\n *\n *  - Instead pass this object as 'root'.\n *\n *  - You can also add and remove objects later when the mixer\n *    is running.\n *\n * Note:\n *\n *    Objects of this class appear as one object to the mixer,\n *    so cache control of the individual objects must be done\n *    on the group.\n *\n * Limitation:\n *\n *  - The animated properties must be compatible among the\n *    all objects in the group.\n *\n *  - A single property can either be controlled through a\n *    target group or directly, but not both.\n */\n\nclass AnimationObjectGroup {\n\n\tconstructor() {\n\n\t\tthis.isAnimationObjectGroup = true;\n\n\t\tthis.uuid = generateUUID();\n\n\t\t// cached objects followed by the active ones\n\t\tthis._objects = Array.prototype.slice.call( arguments );\n\n\t\tthis.nCachedObjects_ = 0; // threshold\n\t\t// note: read by PropertyBinding.Composite\n\n\t\tconst indices = {};\n\t\tthis._indicesByUUID = indices; // for bookkeeping\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tindices[ arguments[ i ].uuid ] = i;\n\n\t\t}\n\n\t\tthis._paths = []; // inside: string\n\t\tthis._parsedPaths = []; // inside: { we don't care, here }\n\t\tthis._bindings = []; // inside: Array< PropertyBinding >\n\t\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tobjects: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._objects.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn this.total - scope.nCachedObjects_;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tget bindingsPerObject() {\n\n\t\t\t\treturn scope._bindings.length;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tadd() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tpaths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet knownObject = undefined,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid;\n\t\t\tlet index = indicesByUUID[ uuid ];\n\n\t\t\tif ( index === undefined ) {\n\n\t\t\t\t// unknown object -> add it to the ACTIVE region\n\n\t\t\t\tindex = nObjects ++;\n\t\t\t\tindicesByUUID[ uuid ] = index;\n\t\t\t\tobjects.push( object );\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\n\n\t\t\t\t}\n\n\t\t\t} else if ( index < nCachedObjects ) {\n\n\t\t\t\tknownObject = objects[ index ];\n\n\t\t\t\t// move existing object to the ACTIVE region\n\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\n\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\n\t\t\t\tobjects[ firstActiveIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\n\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\n\t\t\t\t\tif ( binding === undefined ) {\n\n\t\t\t\t\t\t// since we do not bother to create new bindings\n\t\t\t\t\t\t// for objects that are cached, the binding may\n\t\t\t\t\t\t// or may not exist\n\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\n\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\n\n\t\t\t} // else the object is already where we want it to be\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\tremove() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\n\n\t\t\t\t// move existing object into the CACHED region\n\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\n\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = firstActiveObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\n\t\t\t\tobjects[ lastCachedIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\t// remove & forget\n\tuncache() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_,\n\t\t\tnObjects = objects.length;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tdelete indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index < nCachedObjects ) {\n\n\t\t\t\t\t// object is cached, shrink the CACHED region\n\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\n\t\t\t\t\t\tlastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t// last cached object takes this object's place\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\t// last object goes to the activated slot and pop\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// object is active, just swap with the last and pop\n\n\t\t\t\t\tconst lastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\tif ( lastIndex > 0 ) {\n\n\t\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobjects[ index ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} // cached or active\n\n\t\t\t} // if object is known\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\t// Internal interface used by befriended PropertyBinding.Composite:\n\n\tsubscribe_( path, parsedPath ) {\n\n\t\t// returns an array of bindings for the given path that is changed\n\t\t// according to the contained objects in the group\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath;\n\t\tlet index = indicesByPath[ path ];\n\t\tconst bindings = this._bindings;\n\n\t\tif ( index !== undefined ) return bindings[ index ];\n\n\t\tconst paths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tobjects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tbindingsForPath = new Array( nObjects );\n\n\t\tindex = bindings.length;\n\n\t\tindicesByPath[ path ] = index;\n\n\t\tpaths.push( path );\n\t\tparsedPaths.push( parsedPath );\n\t\tbindings.push( bindingsForPath );\n\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\n\n\t\t\tconst object = objects[ i ];\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\n\n\t\t}\n\n\t\treturn bindingsForPath;\n\n\t}\n\n\tunsubscribe_( path ) {\n\n\t\t// tells the group to forget about a property path and no longer\n\t\t// update the array previously obtained with 'subscribe_'\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ];\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst paths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\n\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\n\n\t\t\tbindings[ index ] = lastBindings;\n\t\t\tbindings.pop();\n\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\n\t\t\tparsedPaths.pop();\n\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\n\t\t\tpaths.pop();\n\n\t\t}\n\n\t}\n\n}\n\nclass AnimationAction {\n\n\tconstructor( mixer, clip, localRoot = null, blendMode = clip.blendMode ) {\n\n\t\tthis._mixer = mixer;\n\t\tthis._clip = clip;\n\t\tthis._localRoot = localRoot;\n\t\tthis.blendMode = blendMode;\n\n\t\tconst tracks = clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tinterpolants = new Array( nTracks );\n\n\t\tconst interpolantSettings = {\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\t\t};\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst interpolant = tracks[ i ].createInterpolant( null );\n\t\t\tinterpolants[ i ] = interpolant;\n\t\t\tinterpolant.settings = interpolantSettings;\n\n\t\t}\n\n\t\tthis._interpolantSettings = interpolantSettings;\n\n\t\tthis._interpolants = interpolants; // bound by the mixer\n\n\t\t// inside: PropertyMixer (managed by the mixer)\n\t\tthis._propertyBindings = new Array( nTracks );\n\n\t\tthis._cacheIndex = null; // for the memory manager\n\t\tthis._byClipCacheIndex = null; // for the memory manager\n\n\t\tthis._timeScaleInterpolant = null;\n\t\tthis._weightInterpolant = null;\n\n\t\tthis.loop = LoopRepeat;\n\t\tthis._loopCount = - 1;\n\n\t\t// global mixer time when the action is to be started\n\t\t// it's set back to 'null' upon start of the action\n\t\tthis._startTime = null;\n\n\t\t// scaled local time of the action\n\t\t// gets clamped or wrapped to 0..clip.duration according to loop\n\t\tthis.time = 0;\n\n\t\tthis.timeScale = 1;\n\t\tthis._effectiveTimeScale = 1;\n\n\t\tthis.weight = 1;\n\t\tthis._effectiveWeight = 1;\n\n\t\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\t\tthis.paused = false; // true -> zero effective time scale\n\t\tthis.enabled = true; // false -> zero effective weight\n\n\t\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\t\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\t\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n\t}\n\n\t// State & Scheduling\n\n\tplay() {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t}\n\n\treset() {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t}\n\n\tisRunning() {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t}\n\n\t// return true when play has been called\n\tisScheduled() {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t}\n\n\tstartAt( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoop( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t}\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t}\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight() {\n\n\t\treturn this._effectiveWeight;\n\n\t}\n\n\tfadeIn( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t}\n\n\tfadeOut( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t}\n\n\tcrossFadeFrom( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tconst fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcrossFadeTo( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t}\n\n\tstopFading() {\n\n\t\tconst weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale() {\n\n\t\treturn this._effectiveTimeScale;\n\n\t}\n\n\tsetDuration( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\tsyncWith( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\thalt( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t}\n\n\twarp( startTimeScale, endTimeScale, duration ) {\n\n\t\tconst mixer = this._mixer,\n\t\t\tnow = mixer.time,\n\t\t\ttimeScale = this.timeScale;\n\n\t\tlet interpolant = this._timeScaleInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t}\n\n\tstopWarping() {\n\n\t\tconst timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Object Accessors\n\n\tgetMixer() {\n\n\t\treturn this._mixer;\n\n\t}\n\n\tgetClip() {\n\n\t\treturn this._clip;\n\n\t}\n\n\tgetRoot() {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t}\n\n\t// Interna\n\n\t_update( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\tdeltaTime = 0;\n\n\t\t\t} else {\n\n\n\t\t\t\tthis._startTime = null; // unschedule\n\t\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tconst clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tconst weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tconst interpolants = this._interpolants;\n\t\t\tconst propertyMixers = this._propertyBindings;\n\n\t\t\tswitch ( this.blendMode ) {\n\n\t\t\t\tcase AdditiveAnimationBlendMode:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase NormalAnimationBlendMode:\n\t\t\t\tdefault:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_updateWeight( time ) {\n\n\t\tlet weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tconst interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t}\n\n\t_updateTimeScale( time ) {\n\n\t\tlet timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tconst interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t}\n\n\t_updateTime( deltaTime ) {\n\n\t\tconst duration = this._clip.duration;\n\t\tconst loop = this.loop;\n\n\t\tlet time = this.time + deltaTime;\n\t\tlet loopCount = this._loopCount;\n\n\t\tconst pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tconst pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t}\n\n\t_setEndings( atStart, atEnd, pingPong ) {\n\n\t\tconst settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_scheduleFading( duration, weightNow, weightThen ) {\n\n\t\tconst mixer = this._mixer, now = mixer.time;\n\t\tlet interpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _controlInterpolantsResultBuffer = new Float32Array( 1 );\n\n\nclass AnimationMixer extends EventDispatcher {\n\n\tconstructor( root ) {\n\n\t\tsuper();\n\n\t\tthis._root = root;\n\t\tthis._initMemoryManager();\n\t\tthis._accuIndex = 0;\n\t\tthis.time = 0;\n\t\tthis.timeScale = 1.0;\n\n\t}\n\n\t_bindAction( action, prototypeAction ) {\n\n\t\tconst root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\n\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst track = tracks[ i ],\n\t\t\t\ttrackName = track.name;\n\n\t\t\tlet binding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tconst path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t}\n\n\t_activateAction( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t}\n\n\t_deactivateAction( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t}\n\n\t// Memory manager\n\n\t_initMemoryManager() {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction( action ) {\n\n\t\tconst index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t}\n\n\t_addInactiveAction( action, clipUuid, rootUuid ) {\n\n\t\tconst actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tconst knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t}\n\n\t_removeInactiveAction( action ) {\n\n\t\tconst actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tconst clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t}\n\n\t_removeInactiveBindingsForAction( action ) {\n\n\t\tconst bindings = action._propertyBindings;\n\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tconst binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_lendAction( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t}\n\n\t_takeBackAction( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t}\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding( binding, rootUuid, trackName ) {\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindings = this._bindings;\n\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t}\n\n\t_removeInactiveBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t}\n\n\t_lendBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t}\n\n\t_takeBackBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t}\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant() {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\n\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, _controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t}\n\n\t_takeBackControlInterpolant( interpolant ) {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t}\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction( clip, optionalRoot, blendMode ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid;\n\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\n\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\n\n\t\tconst actionsForClip = this._actionsByClip[ clipUuid ];\n\t\tlet prototypeAction = null;\n\n\t\tif ( blendMode === undefined ) {\n\n\t\t\tif ( clipObject !== null ) {\n\n\t\t\t\tblendMode = clipObject.blendMode;\n\n\t\t\t} else {\n\n\t\t\t\tblendMode = NormalAnimationBlendMode;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t}\n\n\t// get an existing action\n\texistingAction( clip, optionalRoot ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction() {\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions;\n\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\n\n\t\t\tactions[ i ].stop();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// advance the time and update apply the animation\n\tupdate( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\n\n\t\t\tconst action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tconst bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t}\n\n\t// return this mixer's root target object\n\tgetRoot() {\n\n\t\treturn this._root;\n\n\t}\n\n\t// free all resources specific to a particular clip\n\tuncacheClip( clip ) {\n\n\t\tconst actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tconst action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tconst cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t}\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot( root ) {\n\n\t\tconst rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( const clipUuid in actionsByClip ) {\n\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( const trackName in bindingByName ) {\n\n\t\t\t\tconst binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remove a targeted clip from the cache\n\tuncacheAction( clip, optionalRoot ) {\n\n\t\tconst action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n}\n\nclass Uniform {\n\n\tconstructor( value ) {\n\n\t\tthis.value = value;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n\t}\n\n}\n\nlet _id = 0;\n\nclass UniformsGroup extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isUniformsGroup = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _id ++ } );\n\n\t\tthis.name = '';\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.uniforms = [];\n\n\t}\n\n\tadd( uniform ) {\n\n\t\tthis.uniforms.push( uniform );\n\n\t\treturn this;\n\n\t}\n\n\tremove( uniform ) {\n\n\t\tconst index = this.uniforms.indexOf( uniform );\n\n\t\tif ( index !== - 1 ) this.uniforms.splice( index, 1 );\n\n\t\treturn this;\n\n\t}\n\n\tsetName( name ) {\n\n\t\tthis.name = name;\n\n\t\treturn this;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.usage = source.usage;\n\n\t\tconst uniformsSource = source.uniforms;\n\n\t\tthis.uniforms.length = 0;\n\n\t\tfor ( let i = 0, l = uniformsSource.length; i < l; i ++ ) {\n\n\t\t\tconst uniforms = Array.isArray( uniformsSource[ i ] ) ? uniformsSource[ i ] : [ uniformsSource[ i ] ];\n\n\t\t\tfor ( let j = 0; j < uniforms.length; j ++ ) {\n\n\t\t\t\tthis.uniforms.push( uniforms[ j ].clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass InstancedInterleavedBuffer extends InterleavedBuffer {\n\n\tconstructor( array, stride, meshPerAttribute = 1 ) {\n\n\t\tsuper( array, stride );\n\n\t\tthis.isInstancedInterleavedBuffer = true;\n\n\t\tthis.meshPerAttribute = meshPerAttribute;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tconst ib = super.clone( data );\n\n\t\tib.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn ib;\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tconst json = super.toJSON( data );\n\n\t\tjson.isInstancedInterleavedBuffer = true;\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn json;\n\n\t}\n\n}\n\nclass GLBufferAttribute {\n\n\tconstructor( buffer, type, itemSize, elementSize, count ) {\n\n\t\tthis.isGLBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.buffer = buffer;\n\t\tthis.type = type;\n\t\tthis.itemSize = itemSize;\n\t\tthis.elementSize = elementSize;\n\t\tthis.count = count;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetBuffer( buffer ) {\n\n\t\tthis.buffer = buffer;\n\n\t\treturn this;\n\n\t}\n\n\tsetType( type, elementSize ) {\n\n\t\tthis.type = type;\n\t\tthis.elementSize = elementSize;\n\n\t\treturn this;\n\n\t}\n\n\tsetItemSize( itemSize ) {\n\n\t\tthis.itemSize = itemSize;\n\n\t\treturn this;\n\n\t}\n\n\tsetCount( count ) {\n\n\t\tthis.count = count;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Raycaster {\n\n\tconstructor( origin, direction, near = 0, far = Infinity ) {\n\n\t\tthis.ray = new Ray( origin, direction );\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\t\tthis.camera = null;\n\t\tthis.layers = new Layers();\n\n\t\tthis.params = {\n\t\t\tMesh: {},\n\t\t\tLine: { threshold: 1 },\n\t\t\tLOD: {},\n\t\t\tPoints: { threshold: 1 },\n\t\t\tSprite: {}\n\t\t};\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t}\n\n\tsetFromCamera( coords, camera ) {\n\n\t\tif ( camera.isPerspectiveCamera ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( camera.isOrthographicCamera ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type: ' + camera.type );\n\n\t\t}\n\n\t}\n\n\tintersectObject( object, recursive = true, intersects = [] ) {\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n\tintersectObjects( objects, recursive = true, intersects = [] ) {\n\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.layers.test( raycaster.layers ) ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t}\n\n\tif ( recursive === true ) {\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\n\nclass Spherical {\n\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi; // polar angle\n\t\tthis.theta = theta; // azimuthal angle\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t}\n\n\t// restrict phi to be between EPS and PI-EPS\n\tmakeSafe() {\n\n\t\tconst EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\n */\n\nclass Cylindrical {\n\n\tconstructor( radius = 1, theta = 0, y = 0 ) {\n\n\t\tthis.radius = radius; // distance from the origin to a point in the x-z plane\n\t\tthis.theta = theta; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\n\t\tthis.y = y; // height above the x-z plane\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, theta, y ) {\n\n\t\tthis.radius = radius;\n\t\tthis.theta = theta;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.theta = other.theta;\n\t\tthis.y = other.y;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + z * z );\n\t\tthis.theta = Math.atan2( x, z );\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$4 = /*@__PURE__*/ new Vector2();\n\nclass Box2 {\n\n\tconstructor( min = new Vector2( + Infinity, + Infinity ), max = new Vector2( - Infinity, - Infinity ) ) {\n\n\t\tthis.isBox2 = true;\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$4.copy( size ).multiplyScalar( 0.5 );\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.clampPoint( point, _vector$4 ).distanceTo( point );\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nconst _startP = /*@__PURE__*/ new Vector3();\nconst _startEnd = /*@__PURE__*/ new Vector3();\n\nclass Line3 {\n\n\tconstructor( start = new Vector3(), end = new Vector3() ) {\n\n\t\tthis.start = start;\n\t\tthis.end = end;\n\n\t}\n\n\tset( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t}\n\n\tdelta( target ) {\n\n\t\treturn target.subVectors( this.end, this.start );\n\n\t}\n\n\tdistanceSq() {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t}\n\n\tdistance() {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t}\n\n\tat( t, target ) {\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t}\n\n\tclosestPointToPointParameter( point, clampToLine ) {\n\n\t\t_startP.subVectors( point, this.start );\n\t\t_startEnd.subVectors( this.end, this.start );\n\n\t\tconst startEnd2 = _startEnd.dot( _startEnd );\n\t\tconst startEnd_startP = _startEnd.dot( _startP );\n\n\t\tlet t = startEnd_startP / startEnd2;\n\n\t\tif ( clampToLine ) {\n\n\t\t\tt = clamp( t, 0, 1 );\n\n\t\t}\n\n\t\treturn t;\n\n\t}\n\n\tclosestPointToPoint( point, clampToLine, target ) {\n\n\t\tconst t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t}\n\n\tequals( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$3 = /*@__PURE__*/ new Vector3();\n\nclass SpotLightHelper extends Object3D {\n\n\tconstructor( light, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'SpotLightHelper';\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst positions = [\n\t\t\t0, 0, 0, \t0, 0, 1,\n\t\t\t0, 0, 0, \t1, 0, 1,\n\t\t\t0, 0, 0,\t- 1, 0, 1,\n\t\t\t0, 0, 0, \t0, 1, 1,\n\t\t\t0, 0, 0, \t0, - 1, 1\n\t\t];\n\n\t\tfor ( let i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\n\n\t\t\tconst p1 = ( i / l ) * Math.PI * 2;\n\t\t\tconst p2 = ( j / l ) * Math.PI * 2;\n\n\t\t\tpositions.push(\n\t\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\n\t\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\n\t\t\t);\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\t\tthis.cone = new LineSegments( geometry, material );\n\t\tthis.add( this.cone );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.cone.geometry.dispose();\n\t\tthis.cone.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\t\tthis.light.target.updateWorldMatrix( true, false );\n\n\t\tconst coneLength = this.light.distance ? this.light.distance : 1000;\n\t\tconst coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\t_vector$3.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\tthis.cone.lookAt( _vector$3 );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.cone.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.cone.material.color.copy( this.light.color );\n\n\t\t}\n\n\t}\n\n}\n\nconst _vector$2 = /*@__PURE__*/ new Vector3();\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\nconst _matrixWorldInv = /*@__PURE__*/ new Matrix4();\n\n\nclass SkeletonHelper extends LineSegments {\n\n\tconstructor( object ) {\n\n\t\tconst bones = getBoneList( object );\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst color1 = new Color( 0, 0, 1 );\n\t\tconst color2 = new Color( 0, 1, 0 );\n\n\t\tfor ( let i = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isSkeletonHelper = true;\n\n\t\tthis.type = 'SkeletonHelper';\n\n\t\tthis.root = object;\n\t\tthis.bones = bones;\n\n\t\tthis.matrix = object.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst bones = this.bones;\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t_matrixWorldInv.copy( this.root.matrixWorld ).invert();\n\n\t\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\n\t\t\t\t_vector$2.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j, _vector$2.x, _vector$2.y, _vector$2.z );\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t\t_vector$2.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j + 1, _vector$2.x, _vector$2.y, _vector$2.z );\n\n\t\t\t\tj += 2;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\n\nfunction getBoneList( object ) {\n\n\tconst boneList = [];\n\n\tif ( object.isBone === true ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n}\n\nclass PointLightHelper extends Mesh {\n\n\tconstructor( light, sphereSize, color ) {\n\n\t\tconst geometry = new SphereGeometry( sphereSize, 4, 2 );\n\t\tconst material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.light = light;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'PointLightHelper';\n\n\t\tthis.matrix = this.light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\n\t\t/*\n\t// TODO: delete this comment?\n\tconst distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\n\tconst distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\n\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\n\n\tconst d = light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\n\tthis.add( this.lightDistance );\n\t*/\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.material.color.copy( this.light.color );\n\n\t\t}\n\n\t\t/*\n\t\tconst d = this.light.distance;\n\n\t\tif ( d === 0.0 ) {\n\n\t\t\tthis.lightDistance.visible = false;\n\n\t\t} else {\n\n\t\t\tthis.lightDistance.visible = true;\n\t\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t\t}\n\t\t*/\n\n\t}\n\n}\n\nconst _vector$1 = /*@__PURE__*/ new Vector3();\nconst _color1 = /*@__PURE__*/ new Color();\nconst _color2 = /*@__PURE__*/ new Color();\n\nclass HemisphereLightHelper extends Object3D {\n\n\tconstructor( light, size, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'HemisphereLightHelper';\n\n\t\tconst geometry = new OctahedronGeometry( size );\n\t\tgeometry.rotateY( Math.PI * 0.5 );\n\n\t\tthis.material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\t\tif ( this.color === undefined ) this.material.vertexColors = true;\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\t\tconst colors = new Float32Array( position.count * 3 );\n\n\t\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\n\n\t\tthis.add( new Mesh( geometry, this.material ) );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.children[ 0 ].geometry.dispose();\n\t\tthis.children[ 0 ].material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tconst mesh = this.children[ 0 ];\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tconst colors = mesh.geometry.getAttribute( 'color' );\n\n\t\t\t_color1.copy( this.light.color );\n\t\t\t_color2.copy( this.light.groundColor );\n\n\t\t\tfor ( let i = 0, l = colors.count; i < l; i ++ ) {\n\n\t\t\t\tconst color = ( i < ( l / 2 ) ) ? _color1 : _color2;\n\n\t\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t\tcolors.needsUpdate = true;\n\n\t\t}\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\n\t\tmesh.lookAt( _vector$1.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\n\t}\n\n}\n\nclass GridHelper extends LineSegments {\n\n\tconstructor( size = 10, divisions = 10, color1 = 0x444444, color2 = 0x888888 ) {\n\n\t\tcolor1 = new Color( color1 );\n\t\tcolor2 = new Color( color2 );\n\n\t\tconst center = divisions / 2;\n\t\tconst step = size / divisions;\n\t\tconst halfSize = size / 2;\n\n\t\tconst vertices = [], colors = [];\n\n\t\tfor ( let i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\n\n\t\t\tvertices.push( - halfSize, 0, k, halfSize, 0, k );\n\t\t\tvertices.push( k, 0, - halfSize, k, 0, halfSize );\n\n\t\t\tconst color = i === center ? color1 : color2;\n\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'GridHelper';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass PolarGridHelper extends LineSegments {\n\n\tconstructor( radius = 10, sectors = 16, rings = 8, divisions = 64, color1 = 0x444444, color2 = 0x888888 ) {\n\n\t\tcolor1 = new Color( color1 );\n\t\tcolor2 = new Color( color2 );\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\t// create the sectors\n\n\t\tif ( sectors > 1 ) {\n\n\t\t\tfor ( let i = 0; i < sectors; i ++ ) {\n\n\t\t\t\tconst v = ( i / sectors ) * ( Math.PI * 2 );\n\n\t\t\t\tconst x = Math.sin( v ) * radius;\n\t\t\t\tconst z = Math.cos( v ) * radius;\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( x, 0, z );\n\n\t\t\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// create the rings\n\n\t\tfor ( let i = 0; i < rings; i ++ ) {\n\n\t\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\t\tconst r = radius - ( radius / rings * i );\n\n\t\t\tfor ( let j = 0; j < divisions; j ++ ) {\n\n\t\t\t\t// first vertex\n\n\t\t\t\tlet v = ( j / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tlet x = Math.sin( v ) * r;\n\t\t\t\tlet z = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t\t// second vertex\n\n\t\t\t\tv = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tx = Math.sin( v ) * r;\n\t\t\t\tz = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'PolarGridHelper';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _v2 = /*@__PURE__*/ new Vector3();\nconst _v3 = /*@__PURE__*/ new Vector3();\n\nclass DirectionalLightHelper extends Object3D {\n\n\tconstructor( light, size, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'DirectionalLightHelper';\n\n\t\tif ( size === undefined ) size = 1;\n\n\t\tlet geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [\n\t\t\t- size, size, 0,\n\t\t\tsize, size, 0,\n\t\t\tsize, - size, 0,\n\t\t\t- size, - size, 0,\n\t\t\t- size, size, 0\n\t\t], 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\t\tthis.lightPlane = new Line( geometry, material );\n\t\tthis.add( this.lightPlane );\n\n\t\tgeometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\n\n\t\tthis.targetLine = new Line( geometry, material );\n\t\tthis.add( this.targetLine );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.lightPlane.geometry.dispose();\n\t\tthis.lightPlane.material.dispose();\n\t\tthis.targetLine.geometry.dispose();\n\t\tthis.targetLine.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\t\tthis.light.target.updateWorldMatrix( true, false );\n\n\t\t_v1.setFromMatrixPosition( this.light.matrixWorld );\n\t\t_v2.setFromMatrixPosition( this.light.target.matrixWorld );\n\t\t_v3.subVectors( _v2, _v1 );\n\n\t\tthis.lightPlane.lookAt( _v2 );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.lightPlane.material.color.set( this.color );\n\t\t\tthis.targetLine.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.lightPlane.material.color.copy( this.light.color );\n\t\t\tthis.targetLine.material.color.copy( this.light.color );\n\n\t\t}\n\n\t\tthis.targetLine.lookAt( _v2 );\n\t\tthis.targetLine.scale.z = _v3.length();\n\n\t}\n\n}\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _camera = /*@__PURE__*/ new Camera();\n\n/**\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttps://github.com/evanw/lightgl.js/blob/master/tests/shadowmap.html\n */\n\nclass CameraHelper extends LineSegments {\n\n\tconstructor( camera ) {\n\n\t\tconst geometry = new BufferGeometry();\n\t\tconst material = new LineBasicMaterial( { color: 0xffffff, vertexColors: true, toneMapped: false } );\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst pointMap = {};\n\n\t\t// near\n\n\t\taddLine( 'n1', 'n2' );\n\t\taddLine( 'n2', 'n4' );\n\t\taddLine( 'n4', 'n3' );\n\t\taddLine( 'n3', 'n1' );\n\n\t\t// far\n\n\t\taddLine( 'f1', 'f2' );\n\t\taddLine( 'f2', 'f4' );\n\t\taddLine( 'f4', 'f3' );\n\t\taddLine( 'f3', 'f1' );\n\n\t\t// sides\n\n\t\taddLine( 'n1', 'f1' );\n\t\taddLine( 'n2', 'f2' );\n\t\taddLine( 'n3', 'f3' );\n\t\taddLine( 'n4', 'f4' );\n\n\t\t// cone\n\n\t\taddLine( 'p', 'n1' );\n\t\taddLine( 'p', 'n2' );\n\t\taddLine( 'p', 'n3' );\n\t\taddLine( 'p', 'n4' );\n\n\t\t// up\n\n\t\taddLine( 'u1', 'u2' );\n\t\taddLine( 'u2', 'u3' );\n\t\taddLine( 'u3', 'u1' );\n\n\t\t// target\n\n\t\taddLine( 'c', 't' );\n\t\taddLine( 'p', 'c' );\n\n\t\t// cross\n\n\t\taddLine( 'cn1', 'cn2' );\n\t\taddLine( 'cn3', 'cn4' );\n\n\t\taddLine( 'cf1', 'cf2' );\n\t\taddLine( 'cf3', 'cf4' );\n\n\t\tfunction addLine( a, b ) {\n\n\t\t\taddPoint( a );\n\t\t\taddPoint( b );\n\n\t\t}\n\n\t\tfunction addPoint( id ) {\n\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tcolors.push( 0, 0, 0 );\n\n\t\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\t\tpointMap[ id ] = [];\n\n\t\t\t}\n\n\t\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'CameraHelper';\n\n\t\tthis.camera = camera;\n\t\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\n\n\t\tthis.matrix = camera.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.pointMap = pointMap;\n\n\t\tthis.update();\n\n\t\t// colors\n\n\t\tconst colorFrustum = new Color( 0xffaa00 );\n\t\tconst colorCone = new Color( 0xff0000 );\n\t\tconst colorUp = new Color( 0x00aaff );\n\t\tconst colorTarget = new Color( 0xffffff );\n\t\tconst colorCross = new Color( 0x333333 );\n\n\t\tthis.setColors( colorFrustum, colorCone, colorUp, colorTarget, colorCross );\n\n\t}\n\n\tsetColors( frustum, cone, up, target, cross ) {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst colorAttribute = geometry.getAttribute( 'color' );\n\n\t\t// near\n\n\t\tcolorAttribute.setXYZ( 0, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 1, frustum.r, frustum.g, frustum.b ); // n1, n2\n\t\tcolorAttribute.setXYZ( 2, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 3, frustum.r, frustum.g, frustum.b ); // n2, n4\n\t\tcolorAttribute.setXYZ( 4, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 5, frustum.r, frustum.g, frustum.b ); // n4, n3\n\t\tcolorAttribute.setXYZ( 6, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 7, frustum.r, frustum.g, frustum.b ); // n3, n1\n\n\t\t// far\n\n\t\tcolorAttribute.setXYZ( 8, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 9, frustum.r, frustum.g, frustum.b ); // f1, f2\n\t\tcolorAttribute.setXYZ( 10, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 11, frustum.r, frustum.g, frustum.b ); // f2, f4\n\t\tcolorAttribute.setXYZ( 12, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 13, frustum.r, frustum.g, frustum.b ); // f4, f3\n\t\tcolorAttribute.setXYZ( 14, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 15, frustum.r, frustum.g, frustum.b ); // f3, f1\n\n\t\t// sides\n\n\t\tcolorAttribute.setXYZ( 16, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 17, frustum.r, frustum.g, frustum.b ); // n1, f1\n\t\tcolorAttribute.setXYZ( 18, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 19, frustum.r, frustum.g, frustum.b ); // n2, f2\n\t\tcolorAttribute.setXYZ( 20, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 21, frustum.r, frustum.g, frustum.b ); // n3, f3\n\t\tcolorAttribute.setXYZ( 22, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 23, frustum.r, frustum.g, frustum.b ); // n4, f4\n\n\t\t// cone\n\n\t\tcolorAttribute.setXYZ( 24, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 25, cone.r, cone.g, cone.b ); // p, n1\n\t\tcolorAttribute.setXYZ( 26, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 27, cone.r, cone.g, cone.b ); // p, n2\n\t\tcolorAttribute.setXYZ( 28, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 29, cone.r, cone.g, cone.b ); // p, n3\n\t\tcolorAttribute.setXYZ( 30, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 31, cone.r, cone.g, cone.b ); // p, n4\n\n\t\t// up\n\n\t\tcolorAttribute.setXYZ( 32, up.r, up.g, up.b ); colorAttribute.setXYZ( 33, up.r, up.g, up.b ); // u1, u2\n\t\tcolorAttribute.setXYZ( 34, up.r, up.g, up.b ); colorAttribute.setXYZ( 35, up.r, up.g, up.b ); // u2, u3\n\t\tcolorAttribute.setXYZ( 36, up.r, up.g, up.b ); colorAttribute.setXYZ( 37, up.r, up.g, up.b ); // u3, u1\n\n\t\t// target\n\n\t\tcolorAttribute.setXYZ( 38, target.r, target.g, target.b ); colorAttribute.setXYZ( 39, target.r, target.g, target.b ); // c, t\n\t\tcolorAttribute.setXYZ( 40, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 41, cross.r, cross.g, cross.b ); // p, c\n\n\t\t// cross\n\n\t\tcolorAttribute.setXYZ( 42, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 43, cross.r, cross.g, cross.b ); // cn1, cn2\n\t\tcolorAttribute.setXYZ( 44, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 45, cross.r, cross.g, cross.b ); // cn3, cn4\n\n\t\tcolorAttribute.setXYZ( 46, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 47, cross.r, cross.g, cross.b ); // cf1, cf2\n\t\tcolorAttribute.setXYZ( 48, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 49, cross.r, cross.g, cross.b ); // cf3, cf4\n\n\t\tcolorAttribute.needsUpdate = true;\n\n\t}\n\n\tupdate() {\n\n\t\tconst geometry = this.geometry;\n\t\tconst pointMap = this.pointMap;\n\n\t\tconst w = 1, h = 1;\n\n\t\t// we need just camera projection matrix inverse\n\t\t// world matrix must be identity\n\n\t\t_camera.projectionMatrixInverse.copy( this.camera.projectionMatrixInverse );\n\n\t\t// center / target\n\n\t\tsetPoint( 'c', pointMap, geometry, _camera, 0, 0, - 1 );\n\t\tsetPoint( 't', pointMap, geometry, _camera, 0, 0, 1 );\n\n\t\t// near\n\n\t\tsetPoint( 'n1', pointMap, geometry, _camera, - w, - h, - 1 );\n\t\tsetPoint( 'n2', pointMap, geometry, _camera, w, - h, - 1 );\n\t\tsetPoint( 'n3', pointMap, geometry, _camera, - w, h, - 1 );\n\t\tsetPoint( 'n4', pointMap, geometry, _camera, w, h, - 1 );\n\n\t\t// far\n\n\t\tsetPoint( 'f1', pointMap, geometry, _camera, - w, - h, 1 );\n\t\tsetPoint( 'f2', pointMap, geometry, _camera, w, - h, 1 );\n\t\tsetPoint( 'f3', pointMap, geometry, _camera, - w, h, 1 );\n\t\tsetPoint( 'f4', pointMap, geometry, _camera, w, h, 1 );\n\n\t\t// up\n\n\t\tsetPoint( 'u1', pointMap, geometry, _camera, w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( 'u2', pointMap, geometry, _camera, - w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( 'u3', pointMap, geometry, _camera, 0, h * 2, - 1 );\n\n\t\t// cross\n\n\t\tsetPoint( 'cf1', pointMap, geometry, _camera, - w, 0, 1 );\n\t\tsetPoint( 'cf2', pointMap, geometry, _camera, w, 0, 1 );\n\t\tsetPoint( 'cf3', pointMap, geometry, _camera, 0, - h, 1 );\n\t\tsetPoint( 'cf4', pointMap, geometry, _camera, 0, h, 1 );\n\n\t\tsetPoint( 'cn1', pointMap, geometry, _camera, - w, 0, - 1 );\n\t\tsetPoint( 'cn2', pointMap, geometry, _camera, w, 0, - 1 );\n\t\tsetPoint( 'cn3', pointMap, geometry, _camera, 0, - h, - 1 );\n\t\tsetPoint( 'cn4', pointMap, geometry, _camera, 0, h, - 1 );\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\n\nfunction setPoint( point, pointMap, geometry, camera, x, y, z ) {\n\n\t_vector.set( x, y, z ).unproject( camera );\n\n\tconst points = pointMap[ point ];\n\n\tif ( points !== undefined ) {\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tposition.setXYZ( points[ i ], _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t}\n\n}\n\nconst _box = /*@__PURE__*/ new Box3();\n\nclass BoxHelper extends LineSegments {\n\n\tconstructor( object, color = 0xffff00 ) {\n\n\t\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\t\tconst positions = new Float32Array( 8 * 3 );\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\t\tgeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.object = object;\n\t\tthis.type = 'BoxHelper';\n\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\t}\n\n\tupdate( object ) {\n\n\t\tif ( object !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\n\n\t\t}\n\n\t\tif ( this.object !== undefined ) {\n\n\t\t\t_box.setFromObject( this.object );\n\n\t\t}\n\n\t\tif ( _box.isEmpty() ) return;\n\n\t\tconst min = _box.min;\n\t\tconst max = _box.max;\n\n\t\t/*\n\t\t\t5____4\n\t\t1/___0/|\n\t\t| 6__|_7\n\t\t2/___3/\n\n\t\t0: max.x, max.y, max.z\n\t\t1: min.x, max.y, max.z\n\t\t2: min.x, min.y, max.z\n\t\t3: max.x, min.y, max.z\n\t\t4: max.x, max.y, min.z\n\t\t5: min.x, max.y, min.z\n\t\t6: min.x, min.y, min.z\n\t\t7: max.x, min.y, min.z\n\t\t*/\n\n\t\tconst position = this.geometry.attributes.position;\n\t\tconst array = position.array;\n\n\t\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\n\t\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\n\t\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\n\t\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\t\tposition.needsUpdate = true;\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tthis.object = object;\n\t\tthis.update();\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.object = source.object;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass Box3Helper extends LineSegments {\n\n\tconstructor( box, color = 0xffff00 ) {\n\n\t\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\n\t\tconst positions = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 1, - 1, 1, - 1, - 1 ];\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.box = box;\n\n\t\tthis.type = 'Box3Helper';\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst box = this.box;\n\n\t\tif ( box.isEmpty() ) return;\n\n\t\tbox.getCenter( this.position );\n\n\t\tbox.getSize( this.scale );\n\n\t\tthis.scale.multiplyScalar( 0.5 );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass PlaneHelper extends Line {\n\n\tconstructor( plane, size = 1, hex = 0xffff00 ) {\n\n\t\tconst color = hex;\n\n\t\tconst positions = [ 1, - 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, - 1, 0, 1, 1, 0 ];\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\t\tgeometry.computeBoundingSphere();\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.type = 'PlaneHelper';\n\n\t\tthis.plane = plane;\n\n\t\tthis.size = size;\n\n\t\tconst positions2 = [ 1, 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, 1, 0, - 1, - 1, 0, 1, - 1, 0 ];\n\n\t\tconst geometry2 = new BufferGeometry();\n\t\tgeometry2.setAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\n\t\tgeometry2.computeBoundingSphere();\n\n\t\tthis.add( new Mesh( geometry2, new MeshBasicMaterial( { color: color, opacity: 0.2, transparent: true, depthWrite: false, toneMapped: false } ) ) );\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tthis.position.set( 0, 0, 0 );\n\n\t\tthis.scale.set( 0.5 * this.size, 0.5 * this.size, 1 );\n\n\t\tthis.lookAt( this.plane.normal );\n\n\t\tthis.translateZ( - this.plane.constant );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\t\tthis.children[ 0 ].geometry.dispose();\n\t\tthis.children[ 0 ].material.dispose();\n\n\t}\n\n}\n\nconst _axis = /*@__PURE__*/ new Vector3();\nlet _lineGeometry, _coneGeometry;\n\nclass ArrowHelper extends Object3D {\n\n\t// dir is assumed to be normalized\n\n\tconstructor( dir = new Vector3( 0, 0, 1 ), origin = new Vector3( 0, 0, 0 ), length = 1, color = 0xffff00, headLength = length * 0.2, headWidth = headLength * 0.2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ArrowHelper';\n\n\t\tif ( _lineGeometry === undefined ) {\n\n\t\t\t_lineGeometry = new BufferGeometry();\n\t\t\t_lineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\n\n\t\t\t_coneGeometry = new CylinderGeometry( 0, 0.5, 1, 5, 1 );\n\t\t\t_coneGeometry.translate( 0, - 0.5, 0 );\n\n\t\t}\n\n\t\tthis.position.copy( origin );\n\n\t\tthis.line = new Line( _lineGeometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\t\tthis.line.matrixAutoUpdate = false;\n\t\tthis.add( this.line );\n\n\t\tthis.cone = new Mesh( _coneGeometry, new MeshBasicMaterial( { color: color, toneMapped: false } ) );\n\t\tthis.cone.matrixAutoUpdate = false;\n\t\tthis.add( this.cone );\n\n\t\tthis.setDirection( dir );\n\t\tthis.setLength( length, headLength, headWidth );\n\n\t}\n\n\tsetDirection( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\t_axis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tconst radians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( _axis, radians );\n\n\t\t}\n\n\t}\n\n\tsetLength( length, headLength = length * 0.2, headWidth = headLength * 0.2 ) {\n\n\t\tthis.line.scale.set( 1, Math.max( 0.0001, length - headLength ), 1 ); // see #17458\n\t\tthis.line.updateMatrix();\n\n\t\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\t\tthis.cone.position.y = length;\n\t\tthis.cone.updateMatrix();\n\n\t}\n\n\tsetColor( color ) {\n\n\t\tthis.line.material.color.set( color );\n\t\tthis.cone.material.color.set( color );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source, false );\n\n\t\tthis.line.copy( source.line );\n\t\tthis.cone.copy( source.cone );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.line.geometry.dispose();\n\t\tthis.line.material.dispose();\n\t\tthis.cone.geometry.dispose();\n\t\tthis.cone.material.dispose();\n\n\t}\n\n}\n\nclass AxesHelper extends LineSegments {\n\n\tconstructor( size = 1 ) {\n\n\t\tconst vertices = [\n\t\t\t0, 0, 0,\tsize, 0, 0,\n\t\t\t0, 0, 0,\t0, size, 0,\n\t\t\t0, 0, 0,\t0, 0, size\n\t\t];\n\n\t\tconst colors = [\n\t\t\t1, 0, 0,\t1, 0.6, 0,\n\t\t\t0, 1, 0,\t0.6, 1, 0,\n\t\t\t0, 0, 1,\t0, 0.6, 1\n\t\t];\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'AxesHelper';\n\n\t}\n\n\tsetColors( xAxisColor, yAxisColor, zAxisColor ) {\n\n\t\tconst color = new Color();\n\t\tconst array = this.geometry.attributes.color.array;\n\n\t\tcolor.set( xAxisColor );\n\t\tcolor.toArray( array, 0 );\n\t\tcolor.toArray( array, 3 );\n\n\t\tcolor.set( yAxisColor );\n\t\tcolor.toArray( array, 6 );\n\t\tcolor.toArray( array, 9 );\n\n\t\tcolor.set( zAxisColor );\n\t\tcolor.toArray( array, 12 );\n\t\tcolor.toArray( array, 15 );\n\n\t\tthis.geometry.attributes.color.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass ShapePath {\n\n\tconstructor() {\n\n\t\tthis.type = 'ShapePath';\n\n\t\tthis.color = new Color();\n\n\t\tthis.subPaths = [];\n\t\tthis.currentPath = null;\n\n\t}\n\n\tmoveTo( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tlineTo( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tquadraticCurveTo( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tbezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tsplineThru( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t}\n\n\ttoShapes( isCCW ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tconst shapes = [];\n\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\n\n\t\t\t\tconst tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tconst polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tlet inside = false;\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tconst isClockWise = ShapeUtils.isClockWise;\n\n\t\tconst subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tlet solid, tmpPath, tmpShape;\n\t\tconst shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tconst betterShapeHoles = [];\n\t\tconst newShapes = [];\n\t\tlet newShapeHoles = [];\n\t\tlet mainIdx = 0;\n\t\tlet tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tlet ambiguous = false;\n\t\t\tlet toChange = 0;\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tconst ho = sho[ hIdx ];\n\t\t\t\t\tlet hole_unassigned = true;\n\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange ++;\n\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( toChange > 0 && ambiguous === false ) {\n\n\t\t\t\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet tmpHoles;\n\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n}\n\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\n\t\trevision: REVISION,\n\t} } ) );\n\n}\n\nif ( typeof window !== 'undefined' ) {\n\n\tif ( window.__THREE__ ) {\n\n\t\tconsole.warn( 'WARNING: Multiple instances of Three.js being imported.' );\n\n\t} else {\n\n\t\twindow.__THREE__ = REVISION;\n\n\t}\n\n}\n\nexport { ACESFilmicToneMapping, AddEquation, AddOperation, AdditiveAnimationBlendMode, AdditiveBlending, AgXToneMapping, AlphaFormat, AlwaysCompare, AlwaysDepth, AlwaysStencilFunc, AmbientLight, AnimationAction, AnimationClip, AnimationLoader, AnimationMixer, AnimationObjectGroup, AnimationUtils, ArcCurve, ArrayCamera, ArrowHelper, AttachedBindMode, Audio, AudioAnalyser, AudioContext, AudioListener, AudioLoader, AxesHelper, BackSide, BasicDepthPacking, BasicShadowMap, BatchedMesh, Bone, BooleanKeyframeTrack, Box2, Box3, Box3Helper, BoxGeometry, BoxHelper, BufferAttribute, BufferGeometry, BufferGeometryLoader, ByteType, Cache, Camera, CameraHelper, CanvasTexture, CapsuleGeometry, CatmullRomCurve3, CineonToneMapping, CircleGeometry, ClampToEdgeWrapping, Clock, Color, ColorKeyframeTrack, ColorManagement, CompressedArrayTexture, CompressedCubeTexture, CompressedTexture, CompressedTextureLoader, ConeGeometry, ConstantAlphaFactor, ConstantColorFactor, CubeCamera, CubeReflectionMapping, CubeRefractionMapping, CubeTexture, CubeTextureLoader, CubeUVReflectionMapping, CubicBezierCurve, CubicBezierCurve3, CubicInterpolant, CullFaceBack, CullFaceFront, CullFaceFrontBack, CullFaceNone, Curve, CurvePath, CustomBlending, CustomToneMapping, CylinderGeometry, Cylindrical, Data3DTexture, DataArrayTexture, DataTexture, DataTextureLoader, DataUtils, DecrementStencilOp, DecrementWrapStencilOp, DefaultLoadingManager, DepthFormat, DepthStencilFormat, DepthTexture, DetachedBindMode, DirectionalLight, DirectionalLightHelper, DiscreteInterpolant, DisplayP3ColorSpace, DodecahedronGeometry, DoubleSide, DstAlphaFactor, DstColorFactor, DynamicCopyUsage, DynamicDrawUsage, DynamicReadUsage, EdgesGeometry, EllipseCurve, EqualCompare, EqualDepth, EqualStencilFunc, EquirectangularReflectionMapping, EquirectangularRefractionMapping, Euler, EventDispatcher, ExtrudeGeometry, FileLoader, Float16BufferAttribute, Float32BufferAttribute, Float64BufferAttribute, FloatType, Fog, FogExp2, FramebufferTexture, FrontSide, Frustum, GLBufferAttribute, GLSL1, GLSL3, GreaterCompare, GreaterDepth, GreaterEqualCompare, GreaterEqualDepth, GreaterEqualStencilFunc, GreaterStencilFunc, GridHelper, Group, HalfFloatType, HemisphereLight, HemisphereLightHelper, IcosahedronGeometry, ImageBitmapLoader, ImageLoader, ImageUtils, IncrementStencilOp, IncrementWrapStencilOp, InstancedBufferAttribute, InstancedBufferGeometry, InstancedInterleavedBuffer, InstancedMesh, Int16BufferAttribute, Int32BufferAttribute, Int8BufferAttribute, IntType, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, InterpolateSmooth, InvertStencilOp, KeepStencilOp, KeyframeTrack, LOD, LatheGeometry, Layers, LessCompare, LessDepth, LessEqualCompare, LessEqualDepth, LessEqualStencilFunc, LessStencilFunc, Light, LightProbe, Line, Line3, LineBasicMaterial, LineCurve, LineCurve3, LineDashedMaterial, LineLoop, LineSegments, LinearDisplayP3ColorSpace, LinearEncoding, LinearFilter, LinearInterpolant, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, LinearSRGBColorSpace, LinearToneMapping, LinearTransfer, Loader, LoaderUtils, LoadingManager, LoopOnce, LoopPingPong, LoopRepeat, LuminanceAlphaFormat, LuminanceFormat, MOUSE, Material, MaterialLoader, MathUtils, Matrix3, Matrix4, MaxEquation, Mesh, MeshBasicMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshLambertMaterial, MeshMatcapMaterial, MeshNormalMaterial, MeshPhongMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshToonMaterial, MinEquation, MirroredRepeatWrapping, MixOperation, MultiplyBlending, MultiplyOperation, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NeverCompare, NeverDepth, NeverStencilFunc, NoBlending, NoColorSpace, NoToneMapping, NormalAnimationBlendMode, NormalBlending, NotEqualCompare, NotEqualDepth, NotEqualStencilFunc, NumberKeyframeTrack, Object3D, ObjectLoader, ObjectSpaceNormalMap, OctahedronGeometry, OneFactor, OneMinusConstantAlphaFactor, OneMinusConstantColorFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, OrthographicCamera, P3Primaries, PCFShadowMap, PCFSoftShadowMap, PMREMGenerator, Path, PerspectiveCamera, Plane, PlaneGeometry, PlaneHelper, PointLight, PointLightHelper, Points, PointsMaterial, PolarGridHelper, PolyhedronGeometry, PositionalAudio, PropertyBinding, PropertyMixer, QuadraticBezierCurve, QuadraticBezierCurve3, Quaternion, QuaternionKeyframeTrack, QuaternionLinearInterpolant, RED_GREEN_RGTC2_Format, RED_RGTC1_Format, REVISION, RGBADepthPacking, RGBAFormat, RGBAIntegerFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGB_BPTC_SIGNED_Format, RGB_BPTC_UNSIGNED_Format, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RGFormat, RGIntegerFormat, RawShaderMaterial, Ray, Raycaster, Rec709Primaries, RectAreaLight, RedFormat, RedIntegerFormat, ReinhardToneMapping, RenderTarget, RepeatWrapping, ReplaceStencilOp, ReverseSubtractEquation, RingGeometry, SIGNED_RED_GREEN_RGTC2_Format, SIGNED_RED_RGTC1_Format, SRGBColorSpace, SRGBTransfer, Scene, ShaderChunk, ShaderLib, ShaderMaterial, ShadowMaterial, Shape, ShapeGeometry, ShapePath, ShapeUtils, ShortType, Skeleton, SkeletonHelper, SkinnedMesh, Source, Sphere, SphereGeometry, Spherical, SphericalHarmonics3, SplineCurve, SpotLight, SpotLightHelper, Sprite, SpriteMaterial, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, StaticCopyUsage, StaticDrawUsage, StaticReadUsage, StereoCamera, StreamCopyUsage, StreamDrawUsage, StreamReadUsage, StringKeyframeTrack, SubtractEquation, SubtractiveBlending, TOUCH, TangentSpaceNormalMap, TetrahedronGeometry, Texture, TextureLoader, TorusGeometry, TorusKnotGeometry, Triangle, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, TubeGeometry, UVMapping, Uint16BufferAttribute, Uint32BufferAttribute, Uint8BufferAttribute, Uint8ClampedBufferAttribute, Uniform, UniformsGroup, UniformsLib, UniformsUtils, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShortType, VSMShadowMap, Vector2, Vector3, Vector4, VectorKeyframeTrack, VideoTexture, WebGL1Renderer, WebGL3DRenderTarget, WebGLArrayRenderTarget, WebGLCoordinateSystem, WebGLCubeRenderTarget, WebGLMultipleRenderTargets, WebGLRenderTarget, WebGLRenderer, WebGLUtils, WebGPUCoordinateSystem, WireframeGeometry, WrapAroundEnding, ZeroCurvatureEnding, ZeroFactor, ZeroSlopeEnding, ZeroStencilOp, _SRGBAFormat, createCanvasElement, sRGBEncoding };\n","/**\n * NCToolpathPlot - Three.js plot visualization component\n */\n\nimport { BaseComponent } from './BaseComponent';\nimport { getServiceRegistry } from '@core/ServiceRegistry';\nimport { SERVICE_TOKENS, type ChannelId, type PlotSegment } from '@core/types';\nimport type { StateService } from '@services/StateService';\nimport type { EventBus } from '@services/EventBus';\nimport * as THREE from 'three';\n\nexport class NCToolpathPlot extends BaseComponent {\n  private stateService!: StateService;\n  private eventBus!: EventBus;\n  private scene!: THREE.Scene;\n  private camera!: THREE.PerspectiveCamera;\n  private renderer!: THREE.WebGLRenderer;\n  private animationId?: number;\n  private channelMeshes = new Map<ChannelId, THREE.Group>();\n\n  protected onConnected(): void {\n    const registry = getServiceRegistry();\n    this.stateService = registry.get<StateService>(SERVICE_TOKENS.StateService);\n    this.eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n\n    this.setupEventListeners();\n    this.initializeScene();\n    this.startAnimation();\n  }\n\n  protected onDisconnected(): void {\n    if (this.animationId) {\n      cancelAnimationFrame(this.animationId);\n    }\n    if (this.renderer) {\n      this.renderer.dispose();\n    }\n  }\n\n  private setupEventListeners(): void {\n    this.eventBus.on('execution:completed', (event) => {\n      const payload = event.payload as {\n        channelId: ChannelId;\n        result: { plotData: { channel: ChannelId; segments: PlotSegment[] } };\n      };\n      this.updatePlot(payload.channelId, payload.result.plotData.segments);\n    });\n\n    this.eventBus.on('channel:state-changed', () => {\n      this.updateVisibleChannels();\n    });\n  }\n\n  private initializeScene(): void {\n    const container = this.query<HTMLDivElement>('.plot-container');\n    if (!container) return;\n\n    // Scene\n    this.scene = new THREE.Scene();\n    this.scene.background = new THREE.Color(0x1e1e1e);\n\n    // Camera\n    const width = container.clientWidth || 400;\n    const height = container.clientHeight || 400;\n    this.camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 2000);\n    this.camera.position.set(100, 100, 100);\n    this.camera.lookAt(0, 0, 0);\n\n    // Renderer\n    this.renderer = new THREE.WebGLRenderer({ antialias: true });\n    this.renderer.setSize(width, height);\n    container.appendChild(this.renderer.domElement);\n\n    // Lights\n    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);\n    this.scene.add(ambientLight);\n\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\n    directionalLight.position.set(50, 100, 50);\n    this.scene.add(directionalLight);\n\n    // Grid\n    const gridHelper = new THREE.GridHelper(200, 20, 0x444444, 0x222222);\n    this.scene.add(gridHelper);\n\n    // Axes\n    const axesHelper = new THREE.AxesHelper(50);\n    this.scene.add(axesHelper);\n\n    // Handle resize\n    window.addEventListener('resize', () => this.handleResize());\n  }\n\n  private animateScene = (): void => {\n    this.animationId = requestAnimationFrame(this.animateScene);\n\n    // Rotate camera slowly\n    const time = Date.now() * 0.0001;\n    this.camera.position.x = Math.cos(time) * 150;\n    this.camera.position.z = Math.sin(time) * 150;\n    this.camera.lookAt(0, 0, 0);\n\n    this.renderer.render(this.scene, this.camera);\n  };\n\n  private startAnimation(): void {\n    this.animateScene();\n  }\n\n  private handleResize(): void {\n    const container = this.query<HTMLDivElement>('.plot-container');\n    if (!container) return;\n\n    const width = container.clientWidth;\n    const height = container.clientHeight;\n\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize(width, height);\n  }\n\n  private updatePlot(channelId: ChannelId, segments: PlotSegment[]): void {\n    // Remove existing mesh for this channel\n    const existingMesh = this.channelMeshes.get(channelId);\n    if (existingMesh) {\n      this.scene.remove(existingMesh);\n    }\n\n    // Create new group for this channel\n    const channelGroup = new THREE.Group();\n\n    // Channel colors\n    const channelColors = [0x4ec9b0, 0xdcdcaa, 0xce9178];\n    const channelIndex = parseInt(channelId.split('-')[1] || '1') - 1;\n    const color = channelColors[channelIndex] || 0x4ec9b0;\n\n    segments.forEach((segment) => {\n      if (segment.points.length < 2) return;\n\n      const points: THREE.Vector3[] = [];\n      segment.points.forEach((point) => {\n        points.push(new THREE.Vector3(point.x, point.z, -point.y)); // Note: Z up in CNC\n      });\n\n      const geometry = new THREE.BufferGeometry().setFromPoints(points);\n      const material = new THREE.LineBasicMaterial({\n        color,\n        linewidth: segment.type === 'RAPID' ? 1 : 2,\n      });\n\n      const line = new THREE.Line(geometry, material);\n      channelGroup.add(line);\n    });\n\n    this.channelMeshes.set(channelId, channelGroup);\n    this.scene.add(channelGroup);\n  }\n\n  private updateVisibleChannels(): void {\n    const activeChannels = this.stateService.getActiveChannels();\n    const activeIds = new Set(activeChannels.map((ch) => ch.id));\n\n    // Show/hide channel meshes based on active state\n    this.channelMeshes.forEach((mesh, channelId) => {\n      mesh.visible = activeIds.has(channelId);\n    });\n  }\n\n  protected render(): void {\n    this.shadow.innerHTML = '';\n    this.shadow.appendChild(this.createStyles(this.getStyles()));\n\n    const container = document.createElement('div');\n    container.className = 'nc-toolpath-plot';\n\n    const header = document.createElement('div');\n    header.className = 'plot-header';\n    header.textContent = 'Toolpath Visualization';\n    container.appendChild(header);\n\n    const plotContainer = document.createElement('div');\n    plotContainer.className = 'plot-container';\n    container.appendChild(plotContainer);\n\n    const controls = this.createControls();\n    container.appendChild(controls);\n\n    this.shadow.appendChild(container);\n\n    // Initialize scene after render\n    setTimeout(() => {\n      if (!this.renderer) {\n        this.initializeScene();\n        this.startAnimation();\n      }\n    }, 0);\n  }\n\n  private createControls(): HTMLElement {\n    const controls = document.createElement('div');\n    controls.className = 'plot-controls';\n\n    const resetBtn = document.createElement('button');\n    resetBtn.className = 'control-btn';\n    resetBtn.textContent = 'Reset View';\n    resetBtn.addEventListener('click', () => this.resetView());\n\n    controls.appendChild(resetBtn);\n    return controls;\n  }\n\n  private resetView(): void {\n    this.camera.position.set(100, 100, 100);\n    this.camera.lookAt(0, 0, 0);\n  }\n\n  private getStyles(): string {\n    return `\n      :host {\n        display: block;\n        width: 100%;\n        height: 100%;\n      }\n\n      .nc-toolpath-plot {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: 100%;\n        background: #1e1e1e;\n        color: #d4d4d4;\n      }\n\n      .plot-header {\n        padding: 10px 15px;\n        background: #2d2d30;\n        border-bottom: 1px solid #3e3e42;\n        font-weight: 500;\n        font-size: 13px;\n        text-transform: uppercase;\n        color: #888;\n      }\n\n      .plot-container {\n        flex: 1;\n        position: relative;\n        overflow: hidden;\n      }\n\n      .plot-container canvas {\n        display: block;\n        width: 100%;\n        height: 100%;\n      }\n\n      .plot-controls {\n        padding: 10px;\n        background: #252526;\n        border-top: 1px solid #3e3e42;\n        display: flex;\n        gap: 10px;\n      }\n\n      .control-btn {\n        padding: 6px 12px;\n        background: #0e639c;\n        border: none;\n        border-radius: 3px;\n        color: white;\n        font-size: 12px;\n        cursor: pointer;\n        transition: background 0.2s;\n      }\n\n      .control-btn:hover {\n        background: #1177bb;\n      }\n    `;\n  }\n}\n\n// Register the custom element\ncustomElements.define('nc-toolpath-plot', NCToolpathPlot);\n","/**\n * NCEditorApp - Root application component\n */\n\nimport { BaseComponent } from './BaseComponent';\nimport { getServiceRegistry } from '@core/ServiceRegistry';\nimport { SERVICE_TOKENS, type ChannelId, type ChannelState } from '@core/types';\nimport type { StateService } from '@services/StateService';\nimport type { MachineService } from '@services/MachineService';\nimport type { EventBus } from '@services/EventBus';\nimport './NCCodePane';\nimport './NCKeywordPanel';\nimport './NCVariableList';\nimport './NCToolList';\nimport './NCToolpathPlot';\n\n/**\n * Root component that bootstraps the application layout\n */\nexport class NCEditorApp extends BaseComponent {\n  private stateService!: StateService;\n  private machineService!: MachineService;\n  private eventBus!: EventBus;\n  private channelIds: ChannelId[] = ['channel-1', 'channel-2', 'channel-3'];\n  private channelStateCache = new Map<ChannelId, ChannelState>();\n  private plotPanelWidth = 450;\n  private readonly plotPanelMinWidth = 320;\n  private readonly plotPanelMaxWidth = 900;\n  private plotPanelVisible = true;\n  private plotWrapperElement?: HTMLElement;\n  private mainContentElement?: HTMLElement;\n\n  protected onConnected(): void {\n    // Get services from registry\n    const registry = getServiceRegistry();\n    this.stateService = registry.get<StateService>(SERVICE_TOKENS.StateService);\n    this.machineService = registry.get<MachineService>(SERVICE_TOKENS.MachineService);\n    this.eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n\n    // Subscribe to events\n    this.setupEventListeners();\n\n    // Initialize channels (will also load machines)\n    this.initializeChannels();\n  }\n\n  private async initializeChannels(): Promise<void> {\n    // Wait for machines to be loaded first\n    await this.loadMachines();\n\n    // Demo NC programs for channels\n    const demoPrograms = {\n      'channel-1': `G90 G54\nG0 X0 Y0 Z10\nM3 S1000\nG1 Z-5 F100\nG1 X50 Y0 F300\nG1 X50 Y50\nG1 X0 Y50\nG1 X0 Y0\nG0 Z10\nM5\nM30`,\n      'channel-2': `G90 G55\nG0 X100 Y100 Z20\nM3 S1500\nT1\nG1 Z-10 F150\nG2 X120 Y120 I20 J0 F250\nG1 X100 Y100\nG0 Z20\nM5\nM30`,\n    };\n\n    // Create default channels\n    for (const channelId of this.channelIds) {\n      try {\n        this.stateService.createChannel(channelId);\n        // Activate first TWO channels by default for demo\n        if (channelId === 'channel-1' || channelId === 'channel-2') {\n          this.stateService.activateChannel(channelId);\n\n          // Set demo program\n          const program = demoPrograms[channelId as keyof typeof demoPrograms] || '';\n          if (program) {\n            this.stateService.updateChannel(channelId, { program });\n          }\n        }\n      } catch (error) {\n        console.error(`Failed to create channel ${channelId}:`, error);\n      }\n    }\n\n    this.requestRender();\n  }\n\n  private setupEventListeners(): void {\n    // Listen for state changes\n    this.eventBus.on('channel:state-changed', (event) => {\n      const payload = event.payload as {\n        channelId: ChannelId;\n        state: ChannelState;\n      };\n\n      const prevState = this.channelStateCache.get(payload.channelId);\n      this.channelStateCache.set(payload.channelId, this.cloneChannelState(payload.state));\n\n      if (this.shouldRenderForChannelStateChange(prevState, payload.state)) {\n        this.requestRender();\n      }\n    });\n\n    this.eventBus.on('machine:changed', () => {\n      this.requestRender();\n    });\n  }\n\n  private async loadMachines(): Promise<void> {\n    try {\n      await this.machineService.fetchMachines();\n      const machines = this.machineService.getAllMachines();\n\n      // Register machines with state service\n      for (const machine of machines) {\n        this.stateService.registerMachine(machine);\n      }\n\n      // Set default global machine if available\n      if (machines.length > 0) {\n        this.stateService.setGlobalMachine(machines[0]!.id);\n      }\n\n      this.requestRender();\n    } catch (error) {\n      console.warn('Failed to load machines from server, using mock data:', error);\n\n      // Create mock machines for development/demo\n      const mockMachines = [\n        {\n          id: 'ISO_MILL',\n          name: 'ISO_MILL',\n          controlType: 'MILL' as const,\n          availableChannels: 2,\n          axes: [\n            {\n              name: 'X',\n              type: 'LINEAR' as const,\n              minPosition: -500,\n              maxPosition: 500,\n              units: 'MM' as const,\n            },\n            {\n              name: 'Y',\n              type: 'LINEAR' as const,\n              minPosition: -500,\n              maxPosition: 500,\n              units: 'MM' as const,\n            },\n            {\n              name: 'Z',\n              type: 'LINEAR' as const,\n              minPosition: -300,\n              maxPosition: 300,\n              units: 'MM' as const,\n            },\n          ],\n          feedLimits: {\n            minFeed: 1,\n            maxFeed: 5000,\n            rapidFeed: 20000,\n            units: 'MM_PER_MIN' as const,\n          },\n          defaultTools: [],\n        },\n        {\n          id: 'FANUC_T',\n          name: 'FANUC_T',\n          controlType: 'TURN' as const,\n          availableChannels: 1,\n          axes: [\n            {\n              name: 'X',\n              type: 'LINEAR' as const,\n              minPosition: -200,\n              maxPosition: 200,\n              units: 'MM' as const,\n            },\n            {\n              name: 'Z',\n              type: 'LINEAR' as const,\n              minPosition: -500,\n              maxPosition: 0,\n              units: 'MM' as const,\n            },\n          ],\n          feedLimits: {\n            minFeed: 1,\n            maxFeed: 3000,\n            rapidFeed: 15000,\n            units: 'MM_PER_MIN' as const,\n          },\n          defaultTools: [],\n        },\n      ];\n\n      for (const machine of mockMachines) {\n        this.stateService.registerMachine(machine);\n      }\n\n      if (mockMachines.length > 0) {\n        this.stateService.setGlobalMachine(mockMachines[0]!.id);\n      }\n\n      this.requestRender();\n    }\n  }\n\n  protected render(): void {\n    // Safety check - ensure services are initialized\n    if (!this.stateService) {\n      this.shadow.innerHTML = '<div style=\"padding: 20px; color: #888;\">Initializing...</div>';\n      return;\n    }\n\n    const channels = this.stateService.getAllChannels();\n    const machines = this.stateService.getAllMachines();\n    const globalMachine = this.stateService.getGlobalMachine();\n\n    this.shadow.innerHTML = '';\n\n    // Add styles\n    this.shadow.appendChild(this.createStyles(this.getStyles()));\n\n    // Create container\n    const container = document.createElement('div');\n    container.className = 'nc-editor-app';\n\n    // Top bar\n    const topBar = this.createTopBar(machines, globalMachine);\n    container.appendChild(topBar);\n\n    // Main content area\n    const mainContent = document.createElement('div');\n    mainContent.className = 'main-content';\n    this.mainContentElement = mainContent;\n\n    // Channel task list\n    const taskList = this.createChannelTaskList(channels);\n    mainContent.appendChild(taskList);\n\n    const channelArea = document.createElement('div');\n    channelArea.className = 'channel-area';\n    const channelGrid = this.createChannelGrid(channels);\n    channelArea.appendChild(channelGrid);\n    mainContent.appendChild(channelArea);\n\n    const plotResizer = document.createElement('div');\n    plotResizer.className = 'plot-resizer';\n    plotResizer.addEventListener('mousedown', (event) => this.startPlotResize(event));\n\n    const plotToggle = document.createElement('button');\n    plotToggle.type = 'button';\n    plotToggle.className = 'plot-toggle';\n    plotToggle.textContent = this.plotPanelVisible ? 'Hide plot ' : 'Show plot ';\n    plotToggle.addEventListener('click', (event) => {\n      event.stopPropagation();\n      this.plotPanelVisible = !this.plotPanelVisible;\n      this.requestRender();\n    });\n    plotResizer.appendChild(plotToggle);\n    mainContent.appendChild(plotResizer);\n\n    const plotWrapper = document.createElement('div');\n    plotWrapper.className = 'plot-wrapper';\n    if (!this.plotPanelVisible) {\n      plotWrapper.classList.add('collapsed');\n    }\n    plotWrapper.style.width = this.plotPanelVisible ? `${this.plotPanelWidth}px` : '0';\n    this.plotWrapperElement = plotWrapper;\n\n    const plotArea = document.createElement('nc-toolpath-plot');\n    plotArea.className = 'plot-area';\n    plotWrapper.appendChild(plotArea);\n    mainContent.appendChild(plotWrapper);\n\n    container.appendChild(mainContent);\n\n    // Status bar\n    const statusBar = this.createStatusBar();\n    container.appendChild(statusBar);\n\n    this.shadow.appendChild(container);\n\n    this.cacheInitialChannelStates(channels);\n  }\n\n  private createTopBar(\n    machines: ReturnType<typeof this.stateService.getAllMachines>,\n    globalMachine?: string\n  ): HTMLElement {\n    const topBar = document.createElement('div');\n    topBar.className = 'top-bar';\n\n    const title = document.createElement('h1');\n    title.textContent = 'NC-Edit7';\n    topBar.appendChild(title);\n\n    // Machine selector\n    const machineSelector = document.createElement('div');\n    machineSelector.className = 'machine-selector';\n\n    const label = document.createElement('label');\n    label.textContent = 'Machine: ';\n    machineSelector.appendChild(label);\n\n    const select = document.createElement('select');\n    select.className = 'machine-select';\n\n    for (const machine of machines) {\n      const option = document.createElement('option');\n      option.value = machine.id;\n      option.textContent = `${machine.name} (${machine.controlType})`;\n      option.selected = machine.id === globalMachine;\n      select.appendChild(option);\n    }\n\n    select.addEventListener('change', () => {\n      if (select.value) {\n        this.stateService.setGlobalMachine(select.value);\n      }\n    });\n\n    machineSelector.appendChild(select);\n    topBar.appendChild(machineSelector);\n\n    return topBar;\n  }\n\n  private createChannelTaskList(\n    channels: ReturnType<typeof this.stateService.getAllChannels>\n  ): HTMLElement {\n    const taskList = document.createElement('div');\n    taskList.className = 'channel-task-list';\n\n    const title = document.createElement('h3');\n    title.textContent = 'Channels';\n    taskList.appendChild(title);\n\n    const list = document.createElement('div');\n    list.className = 'channel-toggles';\n\n    for (const channel of channels) {\n      const toggle = document.createElement('label');\n      toggle.className = 'channel-toggle';\n\n      const checkbox = document.createElement('input');\n      checkbox.type = 'checkbox';\n      checkbox.checked = channel.isActive;\n      checkbox.addEventListener('change', () => {\n        this.stateService.toggleChannel(channel.id);\n      });\n\n      const span = document.createElement('span');\n      span.textContent = channel.id;\n\n      toggle.appendChild(checkbox);\n      toggle.appendChild(span);\n      list.appendChild(toggle);\n    }\n\n    taskList.appendChild(list);\n    return taskList;\n  }\n\n  private shouldRenderForChannelStateChange(\n    prevState: ChannelState | undefined,\n    nextState: ChannelState\n  ): boolean {\n    if (!prevState) {\n      return true;\n    }\n\n    if (prevState.isActive !== nextState.isActive) {\n      return true;\n    }\n\n    if (prevState.machineId !== nextState.machineId) {\n      return true;\n    }\n\n    if (prevState.executedResult !== nextState.executedResult) {\n      return true;\n    }\n\n    if (!this.areUiConfigsEqual(prevState.uiConfig, nextState.uiConfig)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private areUiConfigsEqual(a: ChannelState['uiConfig'], b: ChannelState['uiConfig']): boolean {\n    return (\n      a.keywordPanelSide === b.keywordPanelSide &&\n      a.timeGutterSide === b.timeGutterSide &&\n      a.variableDrawerOpen === b.variableDrawerOpen &&\n      a.toolOverlayOpen === b.toolOverlayOpen &&\n      a.activeTab === b.activeTab\n    );\n  }\n\n  private cacheInitialChannelStates(channels: ChannelState[]): void {\n    for (const channel of channels) {\n      this.channelStateCache.set(channel.id, this.cloneChannelState(channel));\n    }\n  }\n\n  private cloneChannelState(state: ChannelState): ChannelState {\n    return {\n      ...state,\n      uiConfig: { ...state.uiConfig },\n    };\n  }\n\n  private createChannelGrid(\n    channels: ReturnType<typeof this.stateService.getAllChannels>\n  ): HTMLElement {\n    const grid = document.createElement('div');\n    grid.className = 'channel-grid';\n\n    const activeChannels = channels.filter((ch) => ch.isActive);\n\n    if (activeChannels.length === 0) {\n      const placeholder = document.createElement('div');\n      placeholder.className = 'placeholder';\n      placeholder.textContent = 'No channels active. Enable channels from the task list.';\n      grid.appendChild(placeholder);\n    } else {\n      for (const channel of activeChannels) {\n        const channelPane = this.createChannelPane(channel);\n        grid.appendChild(channelPane);\n      }\n    }\n\n    return grid;\n  }\n\n  private createChannelPane(\n    channel: ReturnType<typeof this.stateService.getAllChannels>[0]\n  ): HTMLElement {\n    const pane = document.createElement('div');\n    pane.className = 'channel-pane';\n    pane.dataset.channelId = channel.id;\n\n    const header = document.createElement('div');\n    header.className = 'channel-header';\n    header.textContent = `${channel.id} - ${channel.machineId}`;\n    pane.appendChild(header);\n\n    const contentArea = document.createElement('div');\n    contentArea.className = 'channel-content';\n\n    // Left panel (keywords and tools)\n    const leftPanel = document.createElement('div');\n    leftPanel.className = 'left-panel';\n\n    const keywordPanel = document.createElement('nc-keyword-panel');\n    keywordPanel.setAttribute('channel-id', channel.id);\n    keywordPanel.style.flex = '1';\n    keywordPanel.style.minHeight = '0';\n    leftPanel.appendChild(keywordPanel);\n\n    const toolList = document.createElement('nc-tool-list');\n    toolList.setAttribute('channel-id', channel.id);\n    toolList.style.flex = '1';\n    toolList.style.minHeight = '0';\n    leftPanel.appendChild(toolList);\n\n    contentArea.appendChild(leftPanel);\n\n    // Center editor area\n    const editorArea = document.createElement('div');\n    editorArea.className = 'editor-area';\n\n    const codePane = document.createElement('nc-code-pane');\n    codePane.setAttribute('channel-id', channel.id);\n    codePane.setAttribute('active-tab', channel.uiConfig.activeTab);\n    codePane.style.flex = '1';\n    editorArea.appendChild(codePane);\n\n    // Variable drawer at bottom\n    const variableList = document.createElement('nc-variable-list');\n    variableList.setAttribute('channel-id', channel.id);\n    variableList.setAttribute('open', String(channel.uiConfig.variableDrawerOpen));\n    editorArea.appendChild(variableList);\n\n    contentArea.appendChild(editorArea);\n    pane.appendChild(contentArea);\n\n    return pane;\n  }\n\n  private createStatusBar(): HTMLElement {\n    const statusBar = document.createElement('div');\n    statusBar.className = 'status-bar';\n    statusBar.textContent = 'Ready';\n    return statusBar;\n  }\n\n  private startPlotResize(event: MouseEvent): void {\n    if (event.button !== 0) {\n      return;\n    }\n\n    event.preventDefault();\n    this.plotPanelVisible = true;\n\n    const onMouseMove = (moveEvent: MouseEvent) => {\n      if (!this.mainContentElement) {\n        return;\n      }\n\n      const mainRect = this.mainContentElement.getBoundingClientRect();\n      const newWidth = mainRect.right - moveEvent.clientX;\n      this.setPlotPanelWidth(newWidth);\n    };\n\n    const onMouseUp = () => {\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onMouseUp);\n    };\n\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', onMouseUp);\n  }\n\n  private setPlotPanelWidth(width: number): void {\n    const clamped = Math.max(this.plotPanelMinWidth, Math.min(this.plotPanelMaxWidth, width));\n    this.plotPanelWidth = clamped;\n    if (this.plotWrapperElement) {\n      this.plotWrapperElement.style.width = `${clamped}px`;\n      this.plotWrapperElement.classList.remove('collapsed');\n    }\n  }\n\n  private getStyles(): string {\n    return `\n      :host {\n        display: block;\n        width: 100%;\n        height: 100%;\n      }\n\n      .nc-editor-app {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: 100%;\n        background: #1e1e1e;\n        color: #d4d4d4;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      }\n\n      .top-bar {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 10px 20px;\n        background: #2d2d30;\n        border-bottom: 1px solid #3e3e42;\n      }\n\n      .top-bar h1 {\n        font-size: 20px;\n        margin: 0;\n        color: #569cd6;\n      }\n\n      .machine-selector {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n      }\n\n      .machine-select {\n        padding: 5px 10px;\n        background: #3c3c3c;\n        color: #d4d4d4;\n        border: 1px solid #555;\n        border-radius: 3px;\n        font-size: 14px;\n        cursor: pointer;\n      }\n\n      .main-content {\n        display: flex;\n        flex: 1;\n        overflow: hidden;\n      }\n\n      .channel-task-list {\n        width: 200px;\n        padding: 15px;\n        background: #252526;\n        border-right: 1px solid #3e3e42;\n        overflow-y: auto;\n      }\n\n      .channel-area {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n      }\n\n      .channel-task-list h3 {\n        margin: 0 0 15px 0;\n        font-size: 14px;\n        text-transform: uppercase;\n        color: #888;\n      }\n\n      .channel-toggles {\n        display: flex;\n        flex-direction: column;\n        gap: 10px;\n      }\n\n      .channel-toggle {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        cursor: pointer;\n        padding: 5px;\n        border-radius: 3px;\n        transition: background 0.2s;\n      }\n\n      .channel-toggle:hover {\n        background: #2a2d2e;\n      }\n\n      .channel-toggle input[type=\"checkbox\"] {\n        cursor: pointer;\n      }\n\n      .channel-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n        gap: 15px;\n        flex: 1;\n        padding: 15px;\n        overflow: auto;\n      }\n\n      .channel-pane {\n        background: #1e1e1e;\n        border: 1px solid #3e3e42;\n        border-radius: 4px;\n        display: flex;\n        flex-direction: column;\n        min-height: 400px;\n        overflow: hidden;\n      }\n\n      .channel-header {\n        padding: 10px 15px;\n        background: #2d2d30;\n        border-bottom: 1px solid #3e3e42;\n        font-weight: 500;\n      }\n\n      .channel-content {\n        display: flex;\n        flex: 1;\n        overflow: hidden;\n      }\n\n      .left-panel {\n        width: 250px;\n        display: flex;\n        flex-direction: column;\n        border-right: 1px solid #3e3e42;\n        overflow: hidden;\n      }\n\n      .editor-area {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n      }\n\n      .placeholder {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        color: #888;\n        font-size: 16px;\n      }\n\n      .plot-resizer {\n        width: 32px;\n        min-width: 32px;\n        cursor: ew-resize;\n        background: #151515;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-left: 1px solid #3e3e42;\n        border-right: 1px solid #3e3e42;\n        position: relative;\n      }\n\n      .plot-toggle {\n        background: #2d2d30;\n        border: 1px solid #3e3e42;\n        border-radius: 4px;\n        color: #d4d4d4;\n        padding: 4px 8px;\n        font-size: 11px;\n        cursor: pointer;\n      }\n\n      .plot-resizer:hover .plot-toggle {\n        background: #3c3c3c;\n      }\n\n      .plot-wrapper {\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n        transition: width 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .plot-wrapper.collapsed {\n        width: 0 !important;\n      }\n\n      .plot-area {\n        flex: 1;\n        min-width: 300px;\n        background: #252526;\n        border-left: 1px solid #3e3e42;\n      }\n\n      .status-bar {\n        padding: 5px 20px;\n        background: #007acc;\n        color: white;\n        font-size: 12px;\n        border-top: 1px solid #3e3e42;\n      }\n    `;\n  }\n}\n\n// Register the custom element\ncustomElements.define('nc-editor-app', NCEditorApp);\n","/**\n * Main entry point for NC-Edit7 application\n */\n\nimport { getServiceRegistry } from '@core/ServiceRegistry';\nimport { SERVICE_TOKENS } from '@core/types';\nimport { EventBus } from '@services/EventBus';\nimport { StateService } from '@services/StateService';\nimport { BackendGateway } from '@services/BackendGateway';\nimport { MachineService } from '@services/MachineService';\nimport { ParserService } from '@services/ParserService';\nimport { ExecutedProgramService } from '@services/ExecutedProgramService';\nimport { PlotService } from '@services/PlotService';\nimport { UserPreferenceService } from '@services/UserPreferenceService';\nimport { DiagnosticsService } from '@services/DiagnosticsService';\nimport { CloudAgentService } from '@services/CloudAgentService';\nimport '@components/NCEditorApp';\n\n/**\n * Bootstrap the application\n */\nasync function bootstrap() {\n  console.log('NC-Edit7 starting...');\n\n  try {\n    // Get service registry\n    const registry = getServiceRegistry();\n\n    // Register core services\n    registry.registerClass(SERVICE_TOKENS.EventBus, EventBus, { singleton: true });\n\n    registry.register(\n      SERVICE_TOKENS.StateService,\n      () => {\n        const eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n        return new StateService(eventBus);\n      },\n      { singleton: true, dependencies: [SERVICE_TOKENS.EventBus] }\n    );\n\n    registry.register(SERVICE_TOKENS.BackendGateway, () => new BackendGateway(), {\n      singleton: true,\n    });\n\n    // Register CloudAgentService early so it can be used by other services\n    registry.register(\n      SERVICE_TOKENS.CloudAgentService,\n      () => {\n        const backendGateway = registry.get<BackendGateway>(SERVICE_TOKENS.BackendGateway);\n        const eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n        return new CloudAgentService(backendGateway, eventBus, {\n          enabled: true,\n          autoDelegate: true,\n        });\n      },\n      {\n        singleton: true,\n        dependencies: [SERVICE_TOKENS.BackendGateway, SERVICE_TOKENS.EventBus],\n      }\n    );\n\n    registry.register(\n      SERVICE_TOKENS.MachineService,\n      () => {\n        const backendGateway = registry.get<BackendGateway>(SERVICE_TOKENS.BackendGateway);\n        const eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n        return new MachineService(backendGateway, eventBus);\n      },\n      { singleton: true, dependencies: [SERVICE_TOKENS.BackendGateway, SERVICE_TOKENS.EventBus] }\n    );\n\n    registry.register(\n      SERVICE_TOKENS.ParserService,\n      () => {\n        const eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n        const cloudAgentService = registry.get<CloudAgentService>(SERVICE_TOKENS.CloudAgentService);\n        return new ParserService(eventBus, cloudAgentService);\n      },\n      {\n        singleton: true,\n        dependencies: [SERVICE_TOKENS.EventBus, SERVICE_TOKENS.CloudAgentService],\n      }\n    );\n\n    registry.register(\n      SERVICE_TOKENS.ExecutedProgramService,\n      () => {\n        const backendGateway = registry.get<BackendGateway>(SERVICE_TOKENS.BackendGateway);\n        const stateService = registry.get<StateService>(SERVICE_TOKENS.StateService);\n        const eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n        const cloudAgentService = registry.get<CloudAgentService>(SERVICE_TOKENS.CloudAgentService);\n        return new ExecutedProgramService(\n          backendGateway,\n          stateService,\n          eventBus,\n          cloudAgentService\n        );\n      },\n      {\n        singleton: true,\n        dependencies: [\n          SERVICE_TOKENS.BackendGateway,\n          SERVICE_TOKENS.StateService,\n          SERVICE_TOKENS.EventBus,\n          SERVICE_TOKENS.CloudAgentService,\n        ],\n      }\n    );\n\n    registry.registerClass(SERVICE_TOKENS.PlotService, PlotService, { singleton: true });\n\n    registry.registerClass(SERVICE_TOKENS.UserPreferenceService, UserPreferenceService, {\n      singleton: true,\n    });\n\n    registry.register(\n      SERVICE_TOKENS.DiagnosticsService,\n      () => {\n        const eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n        return new DiagnosticsService(eventBus);\n      },\n      { singleton: true, dependencies: [SERVICE_TOKENS.EventBus] }\n    );\n\n    // Initialize services\n    await registry.initializeAll();\n\n    console.log('Services initialized successfully');\n\n    // Test the services\n    const eventBus = registry.get<EventBus>(SERVICE_TOKENS.EventBus);\n    const stateService = registry.get<StateService>(SERVICE_TOKENS.StateService);\n    const backendGateway = registry.get<BackendGateway>(SERVICE_TOKENS.BackendGateway);\n    const machineService = registry.get<MachineService>(SERVICE_TOKENS.MachineService);\n    const parserService = registry.get<ParserService>(SERVICE_TOKENS.ParserService);\n    const plotService = registry.get<PlotService>(SERVICE_TOKENS.PlotService);\n    const userPrefService = registry.get<UserPreferenceService>(\n      SERVICE_TOKENS.UserPreferenceService\n    );\n    const diagnosticsService = registry.get<DiagnosticsService>(SERVICE_TOKENS.DiagnosticsService);\n    const cloudAgentService = registry.get<CloudAgentService>(SERVICE_TOKENS.CloudAgentService);\n\n    console.log('All services initialized:', {\n      eventBus,\n      stateService,\n      backendGateway,\n      machineService,\n      parserService,\n      plotService,\n      userPrefService,\n      diagnosticsService,\n      cloudAgentService,\n    });\n\n    // Update the loading message and mount the app\n    const appElement = document.getElementById('app');\n    if (appElement) {\n      appElement.innerHTML = '<nc-editor-app></nc-editor-app>';\n    }\n\n    console.log('NC-Edit7 bootstrap complete');\n  } catch (error) {\n    console.error('Failed to bootstrap NC-Edit7:', error);\n\n    // Still mount the app even if there was an error\n    const appElement = document.getElementById('app');\n    if (appElement) {\n      appElement.innerHTML = '<nc-editor-app></nc-editor-app>';\n    }\n  }\n}\n\n// Start the application\nbootstrap();\n"],"names":["ServiceRegistry","__publicField","token","factory","options","constructor","deps","dep","descriptor","instance","initPromises","result","disposePromises","obj","globalRegistry","getServiceRegistry","SERVICE_TOKENS","EventBus","eventType","handler","handlers","unsubscribe","event","handlersCopy","error","limit","history","e","StateService","eventBus","machine","id","machineId","channelId","channel","effectiveMachineId","updates","updatedChannel","cid","ch","snapshot","BackendGateway","config","request","response","programs","prog","data","requestId","lastError","attempt","abortController","timeoutId","program","cleanProgram","validMachines","controller","ms","resolve","MachineService","backendGateway","_eventBus","force","now","serverMachines","serverMachine","profile","fetchIfMissing","machineName","controlType","type","availableChannels","ParserService","cloudAgentService","decision","cloudResponse","lines","keywords","toolRegisters","syncEvents","faults","keywordPatterns","line","index","lineNumber","pattern","matches","match","toolMatch","toolNumber","qMatch","rMatch","artifacts","worker","ExecutedProgramService","stateService","channelIds","results","serverResponse","primaryChannelId","channels","PlotService","plotData","key","keysToDelete","seg","minX","minY","minZ","maxX","maxY","maxZ","segment","point","tools","totalPoints","segmentTypes","count","STORAGE_KEY","UserPreferenceService","stored","parsed","settings","defaults","theme","size","enabled","json","DiagnosticsService","diagnostic","entry","fault","message","details","idsToDelete","diag","a","b","d","severity","source","CloudAgentService","metrics","totalSize","sum","p","totalLines","sizeBytes","lineCount","complexityScore","complexGCodes","toolChanges","syncCodes","subprogramCalls","startTime","BaseComponent","css","style","selector","ACE_NAMESPACE","global","define","module","payload","_require","parentId","callback","lookup","params","i","l","require","packagedModule","normalizeModule","moduleName","chunks","base","previous","exports","mod","req","returnValue","exportAce","ns","root","defineProp","name","val","searchString","position","subjectString","lastIndex","string","str","target","output","o","k","predicate","len","thisArg","kValue","item","value","O","start","relativeStart","end","relativeEnd","final","deepCopy","copy","trimBeginRegexp","trimEndRegexp","array","arr","map","props","regExp","fcn","timer","deferred","timeout","defaultTimeout","_self","last","supportsUnicodeFlag","_navigator","os","ua","appName","useragent","XHTML_NS","buildDom","parent","refs","txt","els","el","childIndex","n","doc","tag","element","textContent","classes","add","node","className","include","sheets","strictCSP","cssCache","insertPendingStyles","cache","importCssString","cssText","container","uri","rect","inner","outer","body","noScrollbar","withScrollbar","styles","property","div","tx","ty","dom","url","xhr","path","head","s","_","isAbort","ctor","superCtor","mixin","proto","EventEmitter","stopPropagation","preventDefault","eventName","listeners","defaultHandler","newCallback","old","disabled","capturing","msg","defaultEnglishMessages","oop","reportError","optionsProvider","optList","optionNames","opt","warn","messages","nlsPlaceholders","AppConfig","opts","optionHash","defaultString","translated","dollarMatch","curlyBracketMatch","lang","net","component","parts","sep","re","subst","loader","cb","customLoader","moduleId","onLoad","loadedModule","moduleType","load","afterLoad","err","reportErrorIfPathIsNotConfigured","ace","init","packaged","scriptOptions","scriptUrl","currentScript","currentDocument","scripts","script","src","attributes","j","attr","deHyphenate","m","m1","Range","startRow","startColumn","endRow","endColumn","range","row","column","cmp","firstRow","lastRow","session","screenPosStart","screenPosEnd","p1","p2","Keys","codeToKeyCode","chr","modifiers","mods","x","keyCode","keyString","keys","pressedKeys","ts","activeListenerOptions","detectListenerOptionsSupport","getListenerOptions","EventListener","elem","removeListener","addListener","destroyer","eventHandler","releaseCaptureHandler","ownerDocument","onMouseUp","factor","deltaX","deltaY","linePixels","pagePixels","elements","timeouts","callbackName","clicks","startX","startY","eventNames","onMousedown","isNewClick","getModifierHash","normalizeCommandKeys","hashId","location","dt","lastDefaultPrevented","resetPressedKeys","postMessageId","win","messageName","listener","delay","$cancelT","nls","clipboard","BROKEN_SETDATA","USE_IE_MIME_TYPE","HAS_FOCUS_ARGS","MAX_LINE_LENGTH","KEYS","MODS","isIOS","valueResetRegex","isMobile","TextInput","parentNode","host","_this","curOp","commandName","isUserAction","text","typingResetTimeout","typing","detectArrowKeys","selectionStart","selectionEnd","modifier","command","isCut","forceIEMime","clipboardData","mime","inserted","fromInput","extendLeft","extendRight","restoreStart","restoreEnd","endIndex","shouldReset","isAllSelected","newValue","positionToSelection","selection","prevLine","nextLine","newHost","number","ariaLabel","top","isTransformed","ancestors","t","readOnly","bringToFront","left","maxTop","move","_isMobile","_isIOS","DRAG_OFFSET","SCROLL_COOLDOWN_T","DefaultHandlers","mouseHandler","editor","ev","inSelection","pos","button","selectionRange","selectionEmpty","waitForClickSelection","anchor","cursor","orientedRange","calcRangeOrientation","unitName","cmpStart","cmpEnd","distance","calcDistance","time","prevScroll","vx","vy","direction","canScroll","isSlower","ax","ay","bx","by","MouseEvent","domEvent","documentRow","screenRow","screenTopRow","contentOverflows","__extends","extendStatics","__","__values","preventParentScroll","CLASSNAME","Tooltip","html","y","PopupManager","popup","e_1","_a","e_2","_b","visiblepopups","_c","_d","shouldDisplay","visiblepopups_1","visiblepopups_1_1","visiblePopup","e_2_1","e_1_1","popupA","popupB","rectA","rectB","popupManager","HoverTooltip","_super","isMousePressed","docPos","screenPos","clippedPos","domNode","startingEvent","renderer","withMarker","MARGIN","labelHeight","labelWidth","anchorTop","anchorLeft","spaceBelow","isAbove","GutterHandler","gutter","GutterTooltip","gutterRegion","aceEvent","annotationsInRow","annotation","fold","annotationsInFold","severityRank","mostSevereAnnotationTypeInFold","annotationType","summaryFoldedAnnotations","annotationMessages","iconClassName","lineElement","iconElement","tooltipElement","annotationNode","_ignoredPosition","_withMarker","gutterCell","anchorEl","r","cell","annotations","summary","annotationTypes","annotationTypes_1","annotationTypes_1_1","label","AUTOSCROLL_DELAY","SCROLL_CURSOR_DELAY","SCROLL_CURSOR_HYSTERESIS","DragdropHandler","dragImage","mouseTarget","dragSelectionMarker","timerId","dragCursor","counter","dragOperation","isInternal","autoScrollStartTime","cursorMovedTime","cursorPointOnCaretMoved","self","dataTransfer","dropEffect","canAccept","addDragMarker","getDropEffect","onMouseMoveTimer","clearDragMarker","dropData","scrollCursorIntoView","prevCursor","vMovement","hMovement","autoScroll","lineHeight","characterWidth","editorRect","offsets","nearestXOffset","nearestYOffset","scrollCursor","vScroll","hScroll","onDragInterval","onMouseMove","types","copyAllowed","moveAllowed","copyModifierState","effectAllowed","interval","cursorStyle","clickCount","eventTarget","mode","touchStartT","lastT","longTouchTimer","animationTimer","animationSteps","vX","vY","pressed","contextMenu","createContextMenu","isOpen","updateMenu","selected","hasUndo","canExecuteCommand","cmd","handleClick","action","showContextMenu","hideContextMenu","pagePos","leftOffset","scrollLeft","handleLongTap","switchToSelectionMode","textarea","touches","h","w","touchObj","cursorPos","anchorPos","offsetTop","offsetLeft","weightedDistance","diff1","diff2","animate","wheelX","wheelY","mouseEvent","oldScrollTop","DefaultGutterHandler","addTouchListeners","MouseHandler","focusEditor","windowBlurred","gutterEl","character","state","mouseMoveHandler","continueCapture","onCaptureEnd","onOperationEnd","onCaptureUpdate","onCaptureInterval","stop","FoldHandler","keyUtil","KeyBinding","kb","toExecute","success","commands","dir","hiLevel","lastArabic","hasUBAT_B","hasUBAT_S","impTab_LTR","impTab_RTL","LTR","RTL","L","R","EN","AN","ON","B","S","AL","WS","CS","ES","ET","NSM","LRE","RLE","PDF","LRO","RLO","BN","UnicodeTBL00","UnicodeTBL20","_computeLevels","chars","levels","charTypes","impTab","prevState","newClass","newLevel","newState","cond","condPos","ix","_getCharacterType","_getCharClass","_invertLevel","lev","_array","lo","hi","tmp","cType","wType","nType","c","rtlCandidate","uc","textCharTypes","isRtl","logicalFromVisual","bidiLevels","ret","logIdx","rowMap","bidiUtil","bidiRE","BidiHandler","docRow","splitIndex","delta","rowCache","currentIndex","prevIndex","isLastRow","endOfLine","splits","shift","fontMetrics","bidiCharWidth","showInvisibles","eolChar","width","isRtlDir","col","leftBoundary","logicalIdx","visualIdx","startCol","endCol","level","selections","offset","selColMin","selColMax","isSelected","isSelectedPrev","visIdx","posX","charWidth","Selection","lead","reverse","anchorRow","anchorColumn","cursorRow","cursorColumn","wasEmpty","wasMultiselect","mover","excludeLastChar","rowStart","rowEnd","foldLine","tabSize","firstColumnPosition","beforeCursor","leadingSpace","lineEnd","textEnd","rightOfCursor","leftOfCursor","whitespaceRe","tokenRe","rows","offsetX","widget","keepDesiredColumn","func","r1","MAX_TOKEN_COUNT","Tokenizer","rules","ruleRegExps","matchTotal","mapping","flag","splitterRurles","rule","adjustedregex","matchcount","digit","values","tokens","stack","inChClass","lastCapture","esc","parenOpen","parenClose","square","startState","currentState","matchAttempts","skipped","TextHighlightRules","prefix","HighlightRules","escapeRules","states","append","embedRules","addRules","pushState","popState","processState","toInsert","next","stateName","includeName","args","defaultToken","ignoreCase","splitChar","list","word","Behaviour","behaviours","filter","TokenIterator","initialRow","initialColumn","rowCount","rowTokens","tokenIndex","SAFE_INSERT_IN_TOKENS","SAFE_INSERT_BEFORE_TOKENS","context","contextCache","defaultQuotes","initContext","getWrapped","opening","closing","rowDiff","CstyleBehaviour","excludeTokens","rightChar","matching","openBracePos","next_indent","indent","quotes","quote","leftChar","rightToken","stringBefore","stringAfter","pair","wordRe","isWordBefore","isWordAfter","pairQuotesAfter","shouldPairQuotes","charBefore","currentToken","nextToken","cursorPosInToken","closeDocPos","openDocPos","iterator","iterator2","bracket","wordChars","code","unicode","Mode","ignoreBlankLines","shouldRemove","minIndent","insertAtTabStop","regexpStart","lineCommentStart","uncomment","shouldInsertSpace","commentWithSpace","comment","testRemove","before","after","spaces","lineCommentEnd","regexpEnd","iter","fun","minEmptyLength","initialRange","colDiff","startRange","endRange","tab","input","delegations","_loop_1","scope","functionName","this_1","method","language","split","param","completionKeywords","ruleItr","aLength","LineWidgets","screenRows","lineWidgets","hide","removed","noWidgets","w1","changedWidgets","min","first","docLines","doNotValidate","Anchor","$getTransformedPoint","noClip","$pointsInOrder","point1","point2","equalPointsInOrder","bColIsAfter","moveIfEqual","deltaIsInsert","deltaRowShift","deltaColShift","deltaStart","deltaEnd","applyDelta","Document","textOrLines","newLineMode","length","deleteFirstNewLine","deleteLastNewLine","deletedLines","deltas","isInsert","docLength","MAX","from","to","chunk","newlineLength","BackgroundTokenizer","tokenizer","workerStart","currentLine","endLine","startLine","processedLines","SearchHighlight","clazz","markerLayer","renderedMarkerRanges","_search","mtSearch","ranges","end_row","rangeToAddMarkerTo","rangeAsString","UndoManager","allowMerge","undoStackLength","rev","dontSelect","rearrangeUndoStack","deltaSet","undoSelectionRange","diff","rebaseRedoStack","redoSelectionRange","nextDelta","stringifyDelta","swapped","swapGroups","clonePos","cloneDelta","stringifyRange","swap","d1","d2","i1","i2","ds1","ds2","xform","c1","splitDelta","shiftPos","rowsBefore","otherLines","rest","moveDeltasByOne","redoStack","xformed","deltaSets","FoldLine","foldData","folds","lastEnd","isNewRow","foldBefore","newFoldLine","foldLineNext","idx","lastFoldEndColumn","comparePoints","RangeList","excludeEdges","startIndex","clipped","lineDif","Fold","placeholder","subFold","consumeRange","afterStart","firstConsumed","consumedFolds","restoreRange","consumePoint","restorePoint","Folding","side","foldLines","foundFolds","trim","lastFold","startFoldLine","added","startFold","endFold","cloneFolds","expandInner","outermostFolds","startFoldRow","textLine","lastColumn","fd","tryToUnfold","bracketPos","initState","depth","test","foldWidgets","foldMode","ignoreCurrent","fw","firstRange","toggleParent","BracketMatch","charBeforeCursor","isBackwards","bracketsRegExp","typeRe","openBracket","valueIndex","closingBracket","valueLength","prevToken","found","backward","currentTag","openTagStart","openTagName","foundOpenTagEnd","openTagEnd","closeTagStart","closeTagName","closeTagEnd","stepCount","tmpToken","TextMode","EditSession","commandEvent","currentSelection","widgetManager","cacheArray","low","mid","removedFolds","undoManager","editSession","navigateWithinSoftTabs","overwrite","inFront","marker","markerId","markers","highlight","inToken","wordRange","useWorker","$isPlaceholder","oldMode","onReloadTokenizer","scrollTop","longestScreenLine","foldIndex","foldStart","enable","isUndo","fromRange","toPosition","toRange","collDiff","oldStart","newStart","indentString","rowRange","deleteRange","useWrapMode","max","desiredLimit","$printMargin","limits","wrapLimit","foldLineBefore","wrapData","walkTokens","PLACEHOLDER_START","PLACEHOLDER_BODY","displayLength","lastSplit","lastDocSplit","isCode","indentedSoftWrap","maxIndent","getWrapIndent","indentation","SPACE","TAB","TAB_SPACE","addSplit","minSplit","PUNCTUATION","CHAR_EXT","isFullWidth","CHAR","maxScreenColumn","screenColumn","docColumn","rowLength","doCache","maxRow","wrapIndent","foldStartRow","wrapRow","screenRowOffset","fm","Search","sr","sc","er","ec","prevRange","lng","replaceString","CharCode","replacement","chCode","nextChCode","nextChCode_1","$disableFakeMultiline","needle","addWordBoundary","chunkEnd","beforeMatch","matchedText","endMargin","multiLineBackwardMatch","mtForward","mtBackward","backwards","skipCurrent","forEach","forEachInLine","supportsLookbehind","wordBoundary","firstChar","wordRegExp","needleArray","lastChar","newMatch","startPosition","targetIndex","targetPosition","targetLine","KEY_MODS","MultiHashHandler","platform","$singleCommand","keepCommand","ckb","keyId","cmdGroup","keyPart","chain","binding","getPosition","other","otherPos","keyList","HashHandler","CommandManager","bindKey","mac","cutLine","firstLineEndCol","selectedText","selectedCount","insertLine","curLine","newRanges","GutterKeyboardHandler","nearestFoldLaneWidgetIndex","nearestAnnotationIndex","futureActiveRowIndex","GutterKeyboardEvent","customWidget","isRowFullyVisible","isIconVisible","foldWidget","num1","num2","desinationLane","annotationIndex","foldLaneWidgetIndex","gutterKeyboardHandler","defaultCommands","Editor","scrollIntoView","prev","mergeableCommands","shouldMerge","keyboardHandler","oldSession","incluude","tagNamesRanges","markerType","wrap","wordWithBoundary","nl","copyLine","lineMode","isFullLine","pasted","transform","lineState","shouldOutdent","lineIndent","prevLineState","currIndent","composition","applyComposition","speed","dragDelay","shouldHighlight","shouldAnimate","display","showPrintMargin","show","fade","new_range","originalRange","_numberRx","amount","charRange","nr","fp","decimals","nnr","replaceRange","currWordStart","wordParts","curLength","itLength","that","wordPairs","reg","negate","firstCondition","secondCondition","res","columnPosition","previousPosition","currentPosition","wordParts_1","wordParts_1_1","sel","endPoint","moved","totalDiff","rangeIndex","subRows","compositionState","select","center","expand","tokenCount","matchType","bracketType","brackets","tagsRanges","times","replaced","newRange","shouldScroll","scrollAnchor","onChangeSelection","onBeforeRender","onAfterRender","cursorLayer","shouldShow","textArea","relativeNumberRenderer","hasValue","blurCommand","focusOnEnterKeyup","lastLineNumber","Lines","canvasHeight","oldConfig","newConfig","screenTop","screenPage","lineTop","fragment","initElement","Gutter","parentEl","rowInfo","annoText","displayAnnoText","annoType","onCreateCell","gutterRenderer","firstLineNumber","lastLineText","gutterWidth","padding","cells","oldLastRow","textNode","annotationIconNode","breakpoints","decorations","rowText","foldClass","isClosedFold","foldAnnotationClass","annotationInFold","foldRange","customWidgetAttributes","highlightGutterLine","rowCell","title","callbacks","Marker","layerConfig","stringBuilder","extraStyle","curr","lineRange","getBorderClass","height","range1","radiusClass","extraLength","tl","tr","br","bl","textTokens","tokenType","isTextToken","Text","unixMode","EOL_CHAR","measure","tabStr","span","spaceClass","spaceContent","tabClass","tabContent","lineElements","lineElementsIdx","heightChanged","lineEl","valueFragment","simpleSpace","controlCharacter","cjkSpace","cjk","cols","initialIndent","elementIndentLevel","bracketHighlight","currentIndent","activeIndentGuides","indentLevel","childNodes","splitChars","overflowEl","lastLineEl","invisibleEl","renderTokens","addTokens","Cursor","cursors","blinking","blinkInterval","smoothBlinking","update","blink","onScreen","cursorLeft","cursorTop","pixelPos","cursorIndex","MAX_SCROLL_H","Scrollbar","classSuffix","isVisible","VScrollBar","HScrollBar","ScrollBar","eType","mousePageY","startTop","onScrollInterval","thumbTop","mousePageX","startLeft","thumbLeft","RenderLoop","onRender","changes","change","CHAR_COUNT","USE_OBSERVER","FontMetrics","isRoot","boldSize","clientPos","elPos","zoom","mul","solve","l1","l2","det","sub","m2","ut","u","f","Decorator","scrollbarV","colors","ctx","compare","priorities","offset1","offset2","y1","y2","ycenter","halfHeight","zoneHeight","currentY","GutterLayer","MarkerLayer","TextLayer","CursorLayer","HScrollBarCustom","VScrollBarCustom","editorCss","VirtualRenderer","textLayer","oldSize","right","availableWidth","printMarginColumn","containerEl","posTop","posLeft","bottom","sm","alwaysVisible","scrollHeight","scrollerHeight","st","maxHeight","desiredHeight","hideScrollbars","screenLines","longestLine","horizScroll","hScrollChanged","vScrollBefore","minHeight","scrollPastEnd","vScrollChanged","firstRowScreen","firstRowHeight","charCount","$viewMargin","newLeft","newTop","topMargin","bottomMargin","currentTop","currentLeft","twoCharsWidth","alignment","fromValue","toValue","steps","x_min","dx","initialScroll","oldSteps","endAnimation","canvasPos","insertPosition","textChunks","widgetDiv","hiddenTokens","lastLineDiv","chunkDiv","chunkSpan","pixelPosition","ghostTextHeight","fitsY","textLines","displayTokens","wrapSplits","textSlice","newToken","hasPassedCursor","showGutterCursor","$workerBlob","workerUrl","BlobBuilder","blobBuilder","createWorker","blob","URL","blobURL","WorkerClient","topLevelNamespaces","classname","importScripts","normalizePath","tlns","ex","q","UIWorkerClient","main","emitSync","sender","messageBuffer","workerClient","processNext","callbackId","Main","PlaceHolder","others","mainClass","othersClass","undoStack","lengthDiff","inMainRange","distanceFromStart","newPos","updateMarker","undosRequired","isSamePoint","onMouseDown","alt","ctrl","accel","isMultiSelect","mouseX","mouseY","onMouseSelection","screenAnchor","screenCursor","selectionMode","oldRange","tmpSel","rectSel","blockSelect","newCursor","onMouseSelectionEnd","onSelectionInterval","search","find","$blockChangeEvents","lastRange","includeEmptyLines","xBackwards","startOffsetX","endOffsetX","yBackwards","docEnd","markerList","keepOrder","$byLines","rangeList","cmdResult","anim","buf","additive","skip","screenLead","toRemove","all","tmp_1","words","stopAtFirst","sameRowRanges","fr","lr","guessRange","maxCol","minSpace","spaceOffsets","spaceOffset","forceLeft","isLeftAligned","isRightAligned","startW","textW","endW","alignLeft","alignRight","unAlign","MultiSelect","addAltCursorListeners","altCursor","altDown","reset","FoldMode","foldStyle","startLevel","binarySearch","comparator","findAnnotations","matched","oldWidget","gutterAnno","arrow","annoTextLine","Renderer","_id","oldNode","env","version","registerNcMode","_module","NCHighlightRules","TimeGutter","_session","_lastLineNumber","VARIABLES","date","dateFormat","SnippetManager","TabstopToken","escape","formatMatcher","choices","operator","fmtTokens","formatted","oldArgs","fmtParts","gChangeCase","snippet","afterNewLine","gotoNext","snippetText","processedSnippet","processSnippetText","tabstopManager","TabstopManager","selectionId","scopes","snippetMap","snippets","snippetList","snippetNameMap","wrapRegexp","guardedRegexp","guard","addSnippet","removeSnippet","nameMap","guardRe","tabString","tabstops","isNested","expanding","copyValue","isRemove","selectedTabstop","parents","active","parentActive","original","fmt","isEmpty","containsLead","containsAnchor","useLink","moveRelative","arg","snippetId","dest","movePoint","currentSnippetId","content","userAgent","getAriaId","popupAriaRole","optionAriaRole","ariaActiveState","$singleLineEditor","AcePopup","noop","selectionMarker","lastMouseEvent","hoverMarker","setHoverMarker","popupRowElement","rowData","highlightedSpans","ariaId","hideHoverMarker","suppressRedraw","bgTokenizer","caption","addToken","lower","filterText","lastI","forceShow","scrollBarSize","screenHeight","screenWidth","maxH","dims","spaceAbove","fitsX","topdownOnly","where","AceInlineScreenReader","idString","lineIndex","codeElement","snippetManager","AceInline","completion","displayText","fn","completed","arLength","ID_REGEX","regex","completer","identifierRegex","previousChar","util","destroyCompleter","Autocomplete","initialPosition","FilteredList","inlineEnabled","posGhostText","editorContainerBottom","lowestPosition","keepPopupPosition","oldRow","previousSelectedItem","newRow","fromTooltip","completions","CompletionProvider","completionOptions","finished","filtered","emptyMessage","completionsForEmpty","completersLength","tooltipNode","targetWidth","targetHeight","leftSize","rightSize","topSize","scores","tooltipStyle","replaceBefore","replaceAfter","total","processResults","isImmediate","immediateResults","items","upper","loop","matchMask","penalty","fullMatchIndex","MarkerGroup","visibleRangeStartRow","visibleRangeEndRow","markersOnOneLine","markerVisibleRange","screenRange","splitRegex","getWordIndex","textBefore","wordDistance","prefixPos","wordScores","currentWord","score","wordScore","wordList","textCompleter","keyWordCompleter","transformSnippetTooltip","record","p3","snippetCompleter","completers","expandSnippet","onChangeMode","loadSnippetsForMode","loadSnippetFile","snippetFilePath","doLiveAutocomplete","hasCompleter","lastExecEvent","liveAutocompleteTimer","showLiveAutocomplete","triggerAutocomplete","NCCodePane","oldValue","registry","editorContainer","tabBar","programTab","executedTab","NCKeywordPanel","keyword","header","empty","grouped","group","groupHeader","keywordText","groups","NCVariableList","registers","markUpdated","newVariables","register","v","filterContainer","filterInput","filteredVars","visibleCount","variable","registerSpan","valueSpan","more","NCToolList","tool","toolHeader","qParam","rParam","REVISION","CullFaceNone","CullFaceBack","CullFaceFront","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","ConstantColorFactor","OneMinusConstantColorFactor","ConstantAlphaFactor","OneMinusConstantAlphaFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","CineonToneMapping","ACESFilmicToneMapping","CustomToneMapping","AgXToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipmapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipmapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedInt248Type","AlphaFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","RGBA_BPTC_Format","RGB_BPTC_SIGNED_Format","RGB_BPTC_UNSIGNED_Format","RED_RGTC1_Format","SIGNED_RED_RGTC1_Format","RED_GREEN_RGTC2_Format","SIGNED_RED_GREEN_RGTC2_Format","LinearEncoding","sRGBEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","NoColorSpace","SRGBColorSpace","LinearSRGBColorSpace","DisplayP3ColorSpace","LinearDisplayP3ColorSpace","LinearTransfer","SRGBTransfer","Rec709Primaries","P3Primaries","KeepStencilOp","AlwaysStencilFunc","NeverCompare","LessCompare","EqualCompare","LessEqualCompare","GreaterCompare","NotEqualCompare","GreaterEqualCompare","AlwaysCompare","StaticDrawUsage","GLSL3","_SRGBAFormat","WebGLCoordinateSystem","WebGPUCoordinateSystem","EventDispatcher","listenerArray","_lut","DEG2RAD","RAD2DEG","generateUUID","d0","d3","clamp","euclideanModulo","lerp","isPowerOfTwo","floorPowerOfTwo","denormalize","normalize","Vector2","scalar","minVal","maxVal","denominator","theta","dy","alpha","v1","v2","attribute","angle","Matrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","me","xAxis","yAxis","zAxis","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","g","t11","t12","t13","detInv","matrix4","sx","sy","rotation","cx","cy","_m3","matrix","arrayNeedsUint32","createElementNS","createCanvasElement","canvas","_cache","warnOnce","LINEAR_SRGB_TO_LINEAR_DISPLAY_P3","LINEAR_DISPLAY_P3_TO_LINEAR_SRGB","COLOR_SPACES","color","SUPPORTED_WORKING_COLOR_SPACES","ColorManagement","colorSpace","sourceColorSpace","targetColorSpace","sourceToReference","targetFromReference","SRGBToLinear","LinearToSRGB","_canvas","ImageUtils","image","imageData","_sourceId","Source","meta","isRootObject","serializeImage","_textureId","Texture","wrapS","wrapT","magFilter","minFilter","format","anisotropy","uv","encoding","Vector4","z","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","RenderTarget","WebGLRenderTarget","DataArrayTexture","Data3DTexture","Quaternion","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","z1","cos","sqrSin","sin","tDir","quaternion","euler","order","c2","c3","s1","s2","s3","axis","halfAngle","trace","vFrom","vTo","step","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","qb","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","qa","u1","sqrt1u1","sqrtu1","u2","u3","Vector3","_quaternion$4","vz","qx","qy","qz","qw","tz","camera","az","bz","planeNormal","_vector$c","normal","dz","radius","phi","sinPhiRadius","sz","Box3","il","_vector$b","points","halfSize","object","precise","box","vector","geometry","positionAttribute","_box$4","children","sphere","plane","triangle","_center","_extents","_v0$2","_v1$7","_v2$4","_f0","_f1","_f2","axes","satForAxes","_triangleNormal","_points","_testAxis","v0","extents","p0","_box$3","_v1$6","_v2$3","Sphere","optionalCenter","maxRadiusSq","radiusSum","deltaLengthSq","lengthSq","_vector$a","_segCenter","_segDir","_diff","_edge1","_edge2","_normal$1","Ray","origin","ray","directionDistance","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","b1","s0","sqrDist","extDet","invDet","tca","radius2","thc","t0","t1","distToPoint","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","backfaceCulling","DdN","sign","DdQxE2","DdE1xQ","QdN","Matrix4","n14","n24","n34","n41","n42","n43","n44","scaleX","_v1$5","scaleY","scaleZ","af","bf","ce","cf","de","df","ac","ad","bc","bd","_zero","_one","eye","up","_z","_x","_y","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","t14","scaleXSq","scaleYSq","scaleZSq","yx","zx","zy","scale","x2","z2","wx","wy","wz","_m1$2","invSX","invSY","invSZ","near","far","coordinateSystem","zInv","_matrix$1","_quaternion$3","Euler","newOrder","Layers","layers","_object3DId","_v1$4","_q1","_m1$1","_target","_position$3","_scale$2","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","onRotationChange","onQuaternionChange","child","updateParents","updateChildren","bound","serialize","library","parameters","shapes","shape","uuids","animation","geometries","extractFromCache","materials","textures","images","skeletons","animations","nodes","recursive","_v0$1","_v1$3","_v2$2","_v3$2","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","targetLengthSq","dot00","dot01","dot02","dot11","dot12","denom","invDenom","v3","i0","d4","vc","d5","d6","vb","va","_colorKeywords","_hslA","_hslB","hue2rgb","Color","hex","handleAlpha","components","_color","hue","saturation","lightness","color1","color2","_materialId","Material","currentValue","srcPlanes","dstPlanes","MeshBasicMaterial","_vector$9","_vector2$1","BufferAttribute","itemSize","normalized","index1","index2","Uint16BufferAttribute","Uint32BufferAttribute","Float32BufferAttribute","_id$2","_m1","_obj","_offset","_box$2","_boxMorphTargets","_vector$8","BufferGeometry","materialIndex","normalMatrix","tangent","morphAttributesPosition","morphAttribute","morphTargetsRelative","jl","indices","positions","normals","uvs","nVertices","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","handleTriangle","tmp2","n2","handleVertex","normalAttribute","pA","pB","pC","nA","nB","nC","ab","convertBufferAttribute","array2","geometry2","newAttribute","morphAttributes","morphArray","hasMorphAttributes","attributeArray","boundingSphere","boundingBox","_inverseMatrix$3","_ray$3","_sphere$6","_sphereHitAt","_vA$1","_vB$1","_vC$1","_tempA","_morphA","_uvA$1","_uvB$1","_uvC$1","_normalA","_normalB","_normalC","_intersectionPoint","_intersectionPointWorld","Mesh","material","ml","morphPosition","morphInfluences","influence","raycaster","intersects","matrixWorld","rayLocalSpace","intersection","uv1","drawRange","groupMaterial","checkGeometryIntersection","checkIntersection","intersect","face","BoxGeometry","widthSegments","heightSegments","depthSegments","vertices","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","iy","cloneUniforms","mergeUniforms","uniforms","merged","cloneUniformsGroups","getUnlitUniformColorSpace","UniformsUtils","default_vertex","default_fragment","ShaderMaterial","extensions","Camera","_v3$1","_minTarget","_maxTarget","PerspectiveCamera","fov","aspect","focalLength","vExtentSlope","minTarget","maxTarget","fullWidth","fullHeight","view","skew","CubeCamera","renderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","cameras","scene","activeMipmapLevel","currentRenderTarget","currentActiveCubeFace","currentActiveMipmapLevel","currentXrEnabled","generateMipmaps","CubeTexture","WebGLCubeRenderTarget","texture","shader","mesh","currentMinFilter","stencil","_vector1","_vector2","_normalMatrix","Plane","constant","inverseNormalLength","startSign","endSign","optionalNormalMatrix","referencePoint","_sphere$5","_vector$7","Frustum","p4","p5","planes","frustum","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","sprite","negRadius","WebGLAnimation","isAnimating","animationLoop","onAnimationFrame","frame","WebGLAttributes","gl","capabilities","isWebGL2","buffers","createBuffer","bufferType","usage","buffer","updateBuffer","updateRange","updateRanges","get","remove","cached","PlaneGeometry","width_half","height_half","segment_width","segment_height","alphahash_fragment","alphahash_pars_fragment","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","alphatest_pars_fragment","aomap_fragment","aomap_pars_fragment","batching_pars_vertex","batching_vertex","begin_vertex","beginnormal_vertex","bsdfs","iridescence_fragment","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","colorspace_fragment","colorspace_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_fragment","lights_lambert_pars_fragment","lights_pars_begin","envmap_physical_pars_fragment","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphcolor_vertex","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normal_pars_fragment","normal_pars_vertex","normal_vertex","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","iridescence_pars_fragment","opaque_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmission_fragment","transmission_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","worldpos_vertex","vertex$h","fragment$h","vertex$g","fragment$g","vertex$f","fragment$f","vertex$e","fragment$e","vertex$d","fragment$d","vertex$c","fragment$c","vertex$b","fragment$b","vertex$a","fragment$a","vertex$9","fragment$9","vertex$8","fragment$8","vertex$7","fragment$7","vertex$6","fragment$6","vertex$5","fragment$5","vertex$4","fragment$4","vertex$3","fragment$3","vertex$2","fragment$2","vertex$1","fragment$1","ShaderChunk","UniformsLib","ShaderLib","_rgb","WebGLBackground","cubemaps","cubeuvmaps","objects","premultipliedAlpha","clearColor","clearAlpha","planeMesh","boxMesh","currentBackground","currentBackgroundVersion","currentTonemapping","render","renderList","forceClear","background","setClear","environmentBlendMode","WebGLBindingStates","maxVertexAttributes","extension","vaoAvailable","bindingStates","defaultState","createBindingState","forceUpdate","setup","updateBuffers","getBindingState","bindVertexArrayObject","needsUpdate","saveCache","wireframe","setupVertexAttributes","createVertexArrayObject","vao","deleteVertexArrayObject","programMap","stateMap","newAttributes","enabledAttributes","attributeDivisors","cachedAttributes","geometryAttributes","attributesNum","programAttributes","cachedAttribute","geometryAttribute","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","disableUnusedAttributes","vertexAttribPointer","stride","integer","materialDefaultAttributeValues","programAttribute","bytesPerElement","dispose","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","resetDefaultState","WebGLBufferRenderer","info","setMode","renderInstances","primcount","methodName","renderMultiDraw","starts","counts","drawCount","elementCount","WebGLCapabilities","maxAnisotropy","getMaxAnisotropy","getMaxPrecision","precision","maxPrecision","drawBuffers","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","floatVertexTextures","maxSamples","WebGLClipping","properties","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","enableLocalClipping","projectPlanes","useCache","clipIntersection","clipShadows","materialProperties","resetGlobalState","nGlobal","lGlobal","dstArray","skipTransform","nPlanes","flatSize","viewMatrix","i4","WebGLCubeMaps","mapTextureMapping","cubemap","onTextureDispose","OrthographicCamera","scaleW","scaleH","LOD_MIN","EXTRA_LOD_SIGMA","MAX_SAMPLES","_flatCamera","_clearColor","_oldTarget","_oldActiveCubeFace","_oldActiveMipmapLevel","PHI","INV_PHI","_axisDirections","PMREMGenerator","sigma","cubeUVRenderTarget","equirectangular","_getCubemapMaterial","_getEquirectMaterial","cubeSize","outputTarget","_setViewport","_createRenderTarget","_lodMax","_createPlanes","_getBlurShader","tmpMesh","cubeCamera","upSign","forwardSign","originalAutoClear","toneMapping","backgroundMaterial","backgroundBox","useSolidColor","isCubeTexture","autoClear","poleAxis","lodIn","lodOut","pingPongRenderTarget","targetIn","targetOut","sigmaRadians","blurMaterial","STANDARD_DEVIATIONS","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","samples","weights","weight","outputSize","lodMax","lodPlanes","sizeLods","sigmas","lod","totalLods","sizeLod","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","faceIndex","coordinates","fill","_getCommonVertexShader","WebGLCubeUVMaps","cubeUVmaps","pmremGenerator","isEquirectMap","isCubeMap","isCubeTextureComplete","cubemapUV","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","setIndex","WebGLInfo","memory","instanceCount","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","morphTextures","morph","workInfluences","objectInfluences","morphTargetsCount","disposeTexture","hasMorphPosition","hasMorphNormals","hasMorphColors","morphTargets","morphNormals","morphColors","vertexDataCount","vertexDataStride","morphTarget","morphNormal","morphColor","morphInfluencesSum","morphBaseInfluence","influences","WebGLObjects","updateMap","buffergeometry","onInstancedMeshDispose","skeleton","instancedMesh","DepthTexture","emptyTexture","emptyShadowTexture","emptyArrayTexture","empty3dTexture","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","copyArray","allocTexUnits","setValueV1f","setValueV2f","setValueV3f","setValueV4f","setValueM2","setValueM3","setValueM4","setValueV1i","setValueV2i","setValueV3i","setValueV4i","setValueV1ui","setValueV2ui","setValueV3ui","setValueV4ui","setValueT1","unit","emptyTexture2D","setValueT3D1","setValueT6","setValueT2DArray1","getSingularSetter","setValueV1fArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueV1iArray","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV1uiArray","setValueV2uiArray","setValueV3uiArray","setValueV4uiArray","setValueT1Array","units","setValueT3DArray","setValueT6Array","setValueT2DArrayArray","getPureArraySetter","SingleUniform","activeInfo","addr","PureArrayUniform","StructuredUniform","seq","RePathPart","addUniform","uniformObject","parseUniform","pathLength","matchEnd","idIsIndex","subscript","WebGLUniforms","WebGLShader","COMPLETION_STATUS_KHR","programIdCount","handleSource","errorLine","lines2","getEncodingComponents","workingPrimaries","encodingPrimaries","gamutMapping","getShaderErrors","status","errors","errorMatches","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","generateExtensions","filterEmptyLine","generateVertexExtensions","generateDefines","defines","fetchAttributeLocations","locationSize","replaceLightNums","numSpotLightCoords","replaceClippingPlaneNums","includePattern","resolveIncludes","includeReplacer","shaderChunkMap","newInclude","unrollLoopPattern","unrollLoops","loopReplacer","generatePrecision","precisionstring","generateShadowMapTypeDefine","shadowMapTypeDefine","generateEnvMapTypeDefine","envMapTypeDefine","generateEnvMapModeDefine","envMapModeDefine","generateEnvMapBlendingDefine","envMapBlendingDefine","generateCubeUVSize","imageHeight","maxMip","texelHeight","WebGLProgram","cacheKey","vertexShader","fragmentShader","envMapCubeUVSize","customExtensions","customVertexExtensions","customDefines","prefixVertex","prefixFragment","versionString","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","onFirstUse","programLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","cachedUniforms","programReady","_id$1","WebGLShaderCache","vertexShaderStage","fragmentShaderStage","materialShaders","shaderStage","set","stage","WebGLShaderStage","WebGLPrograms","clipping","_programLayers","_customShaders","_activeChannels","IS_WEBGL2","SUPPORTS_VERTEX_TEXTURES","shaderIDs","getChannel","getParameters","lights","shadows","fog","environment","envMap","envMapCubeUVHeight","shaderID","morphTextureStride","customVertexShaderID","customFragmentShaderID","IS_INSTANCEDMESH","IS_BATCHEDMESH","HAS_MAP","HAS_MATCAP","HAS_ENVMAP","HAS_AOMAP","HAS_LIGHTMAP","HAS_BUMPMAP","HAS_NORMALMAP","HAS_DISPLACEMENTMAP","HAS_EMISSIVEMAP","HAS_METALNESSMAP","HAS_ROUGHNESSMAP","HAS_ANISOTROPY","HAS_CLEARCOAT","HAS_IRIDESCENCE","HAS_SHEEN","HAS_TRANSMISSION","HAS_ANISOTROPYMAP","HAS_CLEARCOATMAP","HAS_CLEARCOAT_NORMALMAP","HAS_CLEARCOAT_ROUGHNESSMAP","HAS_IRIDESCENCEMAP","HAS_IRIDESCENCE_THICKNESSMAP","HAS_SHEEN_COLORMAP","HAS_SHEEN_ROUGHNESSMAP","HAS_SPECULARMAP","HAS_SPECULAR_COLORMAP","HAS_SPECULAR_INTENSITYMAP","HAS_TRANSMISSIONMAP","HAS_THICKNESSMAP","HAS_GRADIENTMAP","HAS_ALPHAMAP","HAS_ALPHATEST","HAS_ALPHAHASH","HAS_EXTENSIONS","getProgramCacheKey","getProgramCacheKeyParameters","getProgramCacheKeyBooleans","getUniforms","acquireProgram","pl","preexistingProgram","releaseProgram","releaseShaderCache","WebGLProperties","painterSortStable","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","transmissive","transparent","getNextRenderItem","groupOrder","renderItem","push","unshift","sort","customOpaqueSort","customTransparentSort","finish","WebGLRenderLists","lists","renderCallDepth","listArray","UniformsCache","light","ShadowUniformsCache","nextVersion","shadowCastingAndTexturingLightsFirst","lightA","lightB","WebGLLights","shadowCache","vector3","matrix42","useLegacyLights","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","numSpotMaps","numSpotShadowsWithMaps","numLightProbes","scaleFactor","intensity","shadowMap","shadow","shadowUniforms","hash","setupView","WebGLRenderState","lightsArray","shadowsArray","pushLight","pushShadow","shadowLight","setupLights","setupLightsView","WebGLRenderStates","renderStates","renderStateArray","renderState","MeshDepthMaterial","MeshDistanceMaterial","vertex","WebGLShadowMap","_renderer","_objects","_capabilities","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterial","_distanceMaterial","_materialCache","_maxTextureSize","shadowSide","shadowMaterialVertical","shadowMaterialHorizontal","fullScreenTri","fullScreenMesh","_previousType","activeCubeFace","_state","toVSM","fromVSM","shadowFrameExtents","pars","viewportCount","vp","viewport","renderObject","VSMPass","getDepthMaterial","customMaterial","keyA","keyB","materialsForVariant","cachedMaterial","onMaterialDispose","shadowCamera","kl","depthMaterial","uuid","WebGLState","ColorBuffer","locked","currentColorMask","currentColorClear","colorMask","lock","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","depthTest","disable","depthMask","depthFunc","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","stencilFunc","stencilRef","stencilFail","stencilZFail","stencilZPass","colorBuffer","depthBuffer","stencilBuffer","uboBindings","uboProgramMap","enabledCapabilities","currentBoundFramebuffers","currentDrawbuffers","defaultDrawbuffers","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentBlendColor","currentBlendAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","scissorParam","viewportParam","currentScissor","currentViewport","createTexture","dimensions","emptyTextures","setFlipSided","setCullFace","setBlending","bindFramebuffer","framebuffer","useProgram","equationToGL","factorToGL","blending","blendEquation","blendSrc","blendDst","blendEquationAlpha","blendSrcAlpha","blendDstAlpha","blendColor","blendAlpha","setMaterial","frontFaceCW","flipSided","stencilWrite","setPolygonOffset","cullFace","setLineWidth","polygonOffset","setScissorTest","scissorTest","activeTexture","webglSlot","bindTexture","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","compressedTexImage3D","texSubImage2D","texSubImage3D","compressedTexSubImage2D","compressedTexSubImage3D","texStorage2D","texStorage3D","texImage2D","texImage3D","scissor","updateUBOMapping","uniformsGroup","blockIndex","uniformBlockBinding","WebGLTextures","_gl","utils","multisampledRTTExt","supportsInvalidateFramebuffer","_videoTextures","_sources","useOffscreenCanvas","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","floor","isPowerOfTwo$1","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","getInternalFormat","internalFormatName","glFormat","glType","forceLinearTransfer","internalFormat","transfer","getMipLevels","filterFallback","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","textureProperties","webglTextures","deleteTexture","renderTargetProperties","attachmentProperties","textureUnits","resetTextureUnits","allocateTextureUnit","textureUnit","getTextureCacheKey","setTexture2D","slot","updateVideoTexture","uploadTexture","setTexture2DArray","setTexture3D","setTextureCube","uploadCubeTexture","wrappingToGL","filterToGL","compareToGL","setTextureParameters","textureType","initTexture","forceUpload","textureCacheKey","sourceProperties","texturePrimaries","unpackConversion","verifyColorSpace","glInternalFormat","mipmap","mipmaps","useTexStorage","allocateMemory","dataReady","isCompressed","isDataTexture","cubeImage","mipmapImage","setupFrameBufferTexture","attachment","textureTarget","useMultisampledRTT","getRenderTargetSamples","setupRenderBufferStorage","renderbuffer","isMultisample","depthTexture","setupDepthTexture","webglDepthTexture","setupDepthRenderbuffer","isCube","rebindTextures","colorTexture","setupRenderTarget","isMultipleRenderTargets","glTextureType","updateRenderTargetMipmap","updateMultisampleRenderTarget","mask","invalidationArray","depthStyle","ignoreDepthValues","WebGLUtils","convert","ArrayCamera","Group","_moveEvent","WebXRController","inputSource","hand","inputjoint","referenceSpace","inputPose","gripPose","handPose","targetRay","grip","jointPose","joint","indexTip","thumbTip","distanceToPinch","threshold","_occlusion_vertex","_occlusion_fragment","WebXRDepthSensing","depthData","texProps","cameraXR","WebXRManager","framebufferScaleFactor","referenceSpaceType","foveation","customReferenceSpace","pose","glBinding","glProjLayer","glBaseLayer","xrFrame","depthSensing","initialRenderTarget","newRenderTarget","controllers","controllerInputSources","currentSize","currentPixelRatio","cameraL","cameraR","_currentDepthNear","_currentDepthFar","onSessionEvent","controllerIndex","onSessionEnd","onInputSourcesChange","space","layerInit","depthFormat","depthType","glDepthFormat","projectionlayerInit","cameraLPos","cameraRPos","setProjectionFromUnion","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","updateCamera","updateUserCamera","onAnimationFrameCallback","views","cameraXRNeedsUpdate","glSubImage","enabledFeatures","WebGLMaterials","refreshTransformUniform","refreshFogUniforms","refreshMaterialUniforms","pixelRatio","transmissionRenderTarget","refreshUniformsCommon","refreshUniformsToon","refreshUniformsPhong","refreshUniformsStandard","refreshUniformsPhysical","refreshUniformsMatcap","refreshUniformsDistance","refreshUniformsLine","refreshUniformsDash","refreshUniformsPoints","refreshUniformsSprites","WebGLUniformsGroups","updateList","allocatedBindingPoints","maxBindingPoints","bind","webglProgram","prepareUniformsGroup","onUniformsGroupsDispose","updateBufferData","bindingPointIndex","allocateBindingPointIndex","uniformArray","hasUniformChanged","arrayOffset","getUniformSize","indexArray","indexString","cachedObject","chunkSize","chunkOffsetUniform","chunkOffset","WebGLRenderer","antialias","preserveDrawingBuffer","powerPreference","failIfMajorPerformanceCaveat","_alpha","uintClearColor","intClearColor","currentRenderList","currentRenderState","renderListStack","renderStateStack","_isContextLost","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentMaterialId","_currentCamera","_currentViewport","_currentScissor","_currentScissorTest","_currentClearColor","_currentClearAlpha","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clippingEnabled","_localClippingEnabled","_transmissionRenderTarget","_projScreenMatrix","_vector3","_emptyScene","getTargetPixelRatio","getContext","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","onContextCreationError","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","uniformsGroups","initGLContext","xr","updateStyle","boolean","bits","isIntegerFormat","targetFormat","targetType","isUnsignedType","onXRSessionStart","onXRSessionEnd","infoAutoReset","shadowMapEnabled","shadowMapAutoUpdate","shadowMapNeedsUpdate","shadowMapType","deallocateMaterial","releaseMaterialProgramReferences","setProgram","rangeFactor","drawStart","drawEnd","lineWidth","maxInstanceCount","prepareMaterial","getProgram","targetScene","material2","checkMaterialsReady","projectObject","camera2","renderScene","sortObjects","opaqueObjects","transmissiveObjects","transparentObjects","renderTransmissionPass","renderObjects","currentToneMapping","renderTargetNeedsUpdate","currentSide","overrideMaterial","lightsStateVersion","programCacheKey","updateCommonMaterialProperties","materialNeedsLights","getUniformList","progUniforms","vertexAlphas","vertexTangents","needsProgramChange","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","markUniformsLightsNeedsUpdate","defaultFramebuffer","useDefaultFramebuffer","isRenderTarget3D","__webglFramebuffer","layer","activeCubeFaceIndex","textureFormat","halfFloatSupportedByExt","levelScale","srcTexture","dstTexture","sourceBox","glTarget","unpackRowLen","unpackImageHeight","unpackSkipPixels","unpackSkipRows","unpackSkipImages","WebGL1Renderer","Scene","LineBasicMaterial","_start$1","_end$1","_inverseMatrix$1","_ray$1","_sphere$1","Line","lineDistances","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","_start","_end","LineSegments","Light","_projScreenMatrix$1","_lightPositionWorld$1","_lookTarget$1","LightShadow","shadowMatrix","viewportIndex","DirectionalLightShadow","DirectionalLight","AmbientLight","GridHelper","divisions","AxesHelper","xAxisColor","yAxisColor","zAxisColor","NCToolpathPlot","THREE.Scene","THREE.Color","THREE.PerspectiveCamera","THREE.WebGLRenderer","ambientLight","THREE.AmbientLight","directionalLight","THREE.DirectionalLight","gridHelper","THREE.GridHelper","axesHelper","THREE.AxesHelper","segments","existingMesh","channelGroup","THREE.Group","channelColors","channelIndex","THREE.Vector3","THREE.BufferGeometry","THREE.LineBasicMaterial","THREE.Line","activeChannels","activeIds","plotContainer","controls","resetBtn","NCEditorApp","demoPrograms","machines","mockMachines","globalMachine","topBar","mainContent","taskList","channelArea","channelGrid","plotResizer","plotToggle","plotWrapper","plotArea","statusBar","machineSelector","option","toggle","checkbox","nextState","grid","channelPane","pane","contentArea","leftPanel","keywordPanel","toolList","editorArea","codePane","variableList","moveEvent","newWidth","clamped","bootstrap","machineService","parserService","plotService","userPrefService","diagnosticsService","appElement"],"mappings":"+2BA6BO,MAAMA,EAAgB,CAAtB,cACGC,GAAA,oBAAe,KACfA,GAAA,wBAAmB,KAK3B,SACEC,EACAC,EACAC,EAAkE,CAAA,EAC5D,CACN,GAAI,KAAK,SAAS,IAAIF,CAAK,EACzB,MAAM,IAAI,MAAM,+BAA+B,OAAOA,CAAK,CAAC,EAAE,EAGhE,KAAK,SAAS,IAAIA,EAAO,CACvB,QAAAC,EACA,UAAWC,EAAQ,WAAa,GAChC,aAAcA,EAAQ,YAAA,CACvB,CACH,CAKA,cACEF,EACAG,EACAD,EAAkE,CAAA,EAC5D,CACN,KAAK,SACHF,EACA,IAAM,CACJ,MAAMI,EAAOF,EAAQ,cAAc,IAAKG,GAAQ,KAAK,IAAIA,CAAG,CAAC,GAAK,CAAA,EAClE,OAAO,IAAIF,EAAY,GAAGC,CAAI,CAChC,EACAF,CAAA,CAEJ,CAKA,IAAOF,EAAwB,CAC7B,MAAMM,EAAa,KAAK,SAAS,IAAIN,CAAK,EAC1C,GAAI,CAACM,EACH,MAAM,IAAI,MAAM,2BAA2B,OAAON,CAAK,CAAC,EAAE,EAI5D,GAAI,KAAK,aAAa,IAAIA,CAAK,EAC7B,MAAM,IAAI,MAAM,6CAA6C,OAAOA,CAAK,CAAC,EAAE,EAI9E,GAAIM,EAAW,WAAaA,EAAW,SACrC,OAAOA,EAAW,SAIpB,GAAI,CACF,KAAK,aAAa,IAAIN,CAAK,EAC3B,MAAMO,EAAWD,EAAW,QAAA,EAG5B,OAAIA,EAAW,YACbA,EAAW,SAAWC,GAGjBA,CACT,QAAA,CACE,KAAK,aAAa,OAAOP,CAAK,CAChC,CACF,CAKA,IAAIA,EAA8B,CAChC,OAAO,KAAK,SAAS,IAAIA,CAAK,CAChC,CAKA,OAAUA,EAAoC,CAC5C,GAAI,CACF,OAAO,KAAK,IAAOA,CAAK,CAC1B,MAAQ,CACN,MACF,CACF,CAKA,MAAM,eAA+B,CACnC,MAAMQ,EAAgC,CAAA,EAEtC,SAAW,CAACR,EAAOM,CAAU,IAAK,KAAK,SACrC,GAAIA,EAAW,UAAW,CACxB,MAAMC,EAAW,KAAK,IAAIP,CAAK,EAC/B,GAAI,KAAK,gBAAgBO,CAAQ,EAAG,CAClC,MAAME,EAASF,EAAS,KAAA,EACpBE,aAAkB,SACpBD,EAAa,KAAKC,CAAM,CAE5B,CACF,CAGF,MAAM,QAAQ,IAAID,CAAY,CAChC,CAKA,MAAM,YAA4B,CAChC,MAAME,EAAmC,CAAA,EAEzC,UAAWJ,KAAc,KAAK,SAAS,OAAA,EACrC,GAAIA,EAAW,UAAY,KAAK,aAAaA,EAAW,QAAQ,EAAG,CACjE,MAAMG,EAASH,EAAW,SAAS,QAAA,EAC/BG,aAAkB,SACpBC,EAAgB,KAAKD,CAAM,CAE/B,CAGF,MAAM,QAAQ,IAAIC,CAAe,EACjC,KAAK,SAAS,MAAA,CAChB,CAKA,MAAMV,EAA2B,CAC/B,MAAMM,EAAa,KAAK,SAAS,IAAIN,CAAK,EACtCM,IACFA,EAAW,SAAW,OAE1B,CAKA,OAAc,CACZ,KAAK,SAAS,MAAA,EACd,KAAK,aAAa,MAAA,CACpB,CAEQ,gBAAgBK,EAAoC,CAC1D,OACE,OAAOA,GAAQ,UACfA,IAAQ,MACR,SAAUA,GACV,OAAQA,EAAsB,MAAS,UAE3C,CAEQ,aAAaA,EAAiC,CACpD,OACE,OAAOA,GAAQ,UACfA,IAAQ,MACR,YAAaA,GACb,OAAQA,EAAmB,SAAY,UAE3C,CACF,CAGA,IAAIC,GAAyC,KAKtC,SAASC,IAAsC,CACpD,OAAKD,KACHA,GAAiB,IAAId,IAEhBc,EACT,CC+HO,MAAME,GAAiB,CAC5B,SAAU,OAAO,UAAU,EAC3B,aAAc,OAAO,cAAc,EACnC,eAAgB,OAAO,gBAAgB,EACvC,cAAe,OAAO,eAAe,EACrC,uBAAwB,OAAO,wBAAwB,EACvD,eAAgB,OAAO,gBAAgB,EACvC,YAAa,OAAO,aAAa,EACjC,sBAAuB,OAAO,uBAAuB,EACrD,eAAgB,OAAO,gBAAgB,EACvC,mBAAoB,OAAO,oBAAoB,EAC/C,kBAAmB,OAAO,mBAAmB,CAC/C,EClVO,MAAMC,EAAS,CAAf,cACGhB,GAAA,oBAAe,KACfA,GAAA,oBAA2B,CAAA,GAClBA,GAAA,sBAAiB,KAKlC,GAAuBiB,EAAmBC,EAAuC,CAC1E,KAAK,SAAS,IAAID,CAAS,GAC9B,KAAK,SAAS,IAAIA,EAAW,IAAI,GAAK,EAGxC,MAAME,EAAW,KAAK,SAAS,IAAIF,CAAS,EAC5C,OAAAE,EAAS,IAAID,CAAuB,EAG7B,IAAM,CACXC,EAAS,OAAOD,CAAuB,EACnCC,EAAS,OAAS,GACpB,KAAK,SAAS,OAAOF,CAAS,CAElC,CACF,CAKA,KAAyBA,EAAmBC,EAAuC,CACjF,MAAME,EAAc,KAAK,GAAMH,EAAYI,GAAU,CACnDD,EAAA,EACAF,EAAQG,CAAK,CACf,CAAC,EACD,OAAOD,CACT,CAKA,KAAyBC,EAAgB,CACvC,MAAMF,EAAW,KAAK,SAAS,IAAIE,EAAM,IAAI,EAC7C,GAAIF,EAAU,CAEZ,MAAMG,EAAe,MAAM,KAAKH,CAAQ,EACxC,UAAWD,KAAWI,EACpB,GAAI,CACFJ,EAAQG,CAAK,CACf,OAASE,EAAO,CACd,QAAQ,MAAM,8BAA8BF,EAAM,IAAI,IAAKE,CAAK,CAClE,CAEJ,CAGA,KAAK,aAAa,KAAKF,CAAK,EACxB,KAAK,aAAa,OAAS,KAAK,gBAClC,KAAK,aAAa,MAAA,CAEtB,CAKA,IAAIJ,EAAyB,CAC3B,KAAK,SAAS,OAAOA,CAAS,CAChC,CAKA,OAAc,CACZ,KAAK,SAAS,MAAA,CAChB,CAKA,cAAcA,EAA2B,CACvC,OAAO,KAAK,SAAS,IAAIA,CAAS,GAAG,MAAQ,CAC/C,CAKA,YAAuB,CACrB,OAAO,MAAM,KAAK,KAAK,SAAS,MAAM,CACxC,CAKA,WAAWA,EAAoBO,EAA4B,CACzD,IAAIC,EAAU,KAAK,aAMnB,OAJIR,IACFQ,EAAUA,EAAQ,OAAQC,GAAMA,EAAE,OAAST,CAAS,GAGlDO,GAASA,EAAQ,EACZC,EAAQ,MAAM,CAACD,CAAK,EAGtB,CAAC,GAAGC,CAAO,CACpB,CAKA,cAAqB,CACnB,KAAK,aAAe,CAAA,CACtB,CACF,CCvGO,MAAME,EAAa,CAGxB,YAAoBC,EAAoB,CAFhC5B,GAAA,cAEY,KAAA,SAAA4B,EAClB,KAAK,MAAQ,KAAK,mBAAA,CACpB,CAEQ,oBAA+B,CACrC,MAAO,CACL,aAAc,IACd,aAAc,IACd,eAAgB,CAAA,EAChB,SAAU,KAAK,sBAAA,CAAsB,CAEzC,CAEQ,uBAAsC,CAC5C,MAAO,CACL,MAAO,QACP,eAAgB,GAChB,SAAU,GACV,kBAAmB,CACjB,cAAe,OACf,aAAc,QACd,mBAAoB,OACpB,sBAAuB,OAAA,CACzB,CAEJ,CAKA,aAAkC,CAChC,MAAO,CACL,GAAG,KAAK,MACR,SAAU,IAAI,IAAI,KAAK,MAAM,QAAQ,EACrC,SAAU,IAAI,IAAI,KAAK,MAAM,QAAQ,EACrC,eAAgB,CAAC,GAAG,KAAK,MAAM,cAAc,EAC7C,SAAU,CAAE,GAAG,KAAK,MAAM,QAAA,CAAS,CAEvC,CAOA,gBAAgBC,EAA+B,CAC7C,KAAK,MAAM,SAAS,IAAIA,EAAQ,GAAIA,CAAO,CAC7C,CAKA,WAAWC,EAA2C,CACpD,OAAO,KAAK,MAAM,SAAS,IAAIA,CAAE,CACnC,CAKA,gBAAmC,CACjC,OAAO,MAAM,KAAK,KAAK,MAAM,SAAS,QAAQ,CAChD,CAKA,iBAAiBC,EAA4B,CAC3C,KAAK,MAAM,gBAAkBA,EAG7B,SAAW,CAACC,EAAWC,CAAO,IAAK,KAAK,MAAM,UACxC,CAACA,EAAQ,WAAaA,EAAQ,YAAc,KAAK,MAAM,kBACzD,KAAK,kBAAkBD,EAAWD,CAAS,EAI/C,KAAK,SAAS,KAA0B,CACtC,KAAM,kBACN,UAAW,KAAK,IAAA,EAChB,QAAS,CAAE,UAAAA,CAAA,CAAU,CACtB,CACH,CAKA,kBAA0C,CACxC,OAAO,KAAK,MAAM,eACpB,CAOA,cAAcD,EAAeC,EAA6B,CACxD,MAAMG,EAAqBH,GAAa,KAAK,MAAM,gBACnD,GAAI,CAACG,EACH,MAAM,IAAI,MAAM,kDAAkD,EAGpE,MAAMD,EAAwB,CAC5B,GAAAH,EACA,SAAU,GACV,UAAWI,EACX,QAAS,GACT,SAAU,CACR,aAAc,CAAA,EACd,UAAW,EACX,YAAa,CAAA,EAEf,WAAY,CAAA,EACZ,SAAU,CACR,iBAAkB,KAAK,MAAM,SAAS,kBAAkB,mBACxD,eAAgB,KAAK,MAAM,SAAS,kBAAkB,sBACtD,mBAAoB,GACpB,gBAAiB,GACjB,UAAW,SAAA,CACb,EAGF,KAAK,MAAM,SAAS,IAAIJ,EAAIG,CAAO,CACrC,CAKA,WAAWH,EAAyC,CAClD,OAAO,KAAK,MAAM,SAAS,IAAIA,CAAE,CACnC,CAKA,gBAAiC,CAC/B,OAAO,MAAM,KAAK,KAAK,MAAM,SAAS,QAAQ,CAChD,CAKA,cAAcA,EAAeK,EAAsC,CACjE,MAAMF,EAAU,KAAK,MAAM,SAAS,IAAIH,CAAE,EAC1C,GAAI,CAACG,EACH,MAAM,IAAI,MAAM,sBAAsBH,CAAE,EAAE,EAG5C,MAAMM,EAAiB,CAAE,GAAGH,EAAS,GAAGE,CAAA,EACxC,KAAK,MAAM,SAAS,IAAIL,EAAIM,CAAc,EAE1C,KAAK,SAAS,KAA+B,CAC3C,KAAM,wBACN,UAAW,KAAK,IAAA,EAChB,QAAS,CAAE,UAAWN,EAAI,MAAOM,CAAA,CAAe,CACjD,CACH,CAKA,kBAAkBJ,EAAsBD,EAA4B,CAClE,KAAK,cAAcC,EAAW,CAAE,UAAAD,CAAA,CAAW,EAE3C,KAAK,SAAS,KAA0B,CACtC,KAAM,kBACN,UAAW,KAAK,IAAA,EAChB,QAAS,CAAE,UAAAC,EAAW,UAAAD,CAAA,CAAU,CACjC,CACH,CAKA,gBAAgBD,EAAqB,CACnC,KAAK,cAAcA,EAAI,CAAE,SAAU,GAAM,EACpC,KAAK,MAAM,eAAe,SAASA,CAAE,GACxC,KAAK,MAAM,eAAe,KAAKA,CAAE,CAErC,CAKA,kBAAkBA,EAAqB,CACrC,KAAK,cAAcA,EAAI,CAAE,SAAU,GAAO,EAC1C,KAAK,MAAM,eAAiB,KAAK,MAAM,eAAe,OAAQO,GAAQA,IAAQP,CAAE,CAClF,CAKA,mBAAoC,CAClC,OAAO,KAAK,MAAM,eACf,IAAKA,GAAO,KAAK,MAAM,SAAS,IAAIA,CAAE,CAAC,EACvC,OAAQQ,GAA2BA,IAAO,MAAS,CACxD,CAKA,cAAcR,EAAqB,CACjC,MAAMG,EAAU,KAAK,WAAWH,CAAE,EAC9BG,IACEA,EAAQ,SACV,KAAK,kBAAkBH,CAAE,EAEzB,KAAK,gBAAgBA,CAAE,EAG7B,CAOA,eAAeK,EAAsC,CACnD,KAAK,MAAM,SAAW,CAAE,GAAG,KAAK,MAAM,SAAU,GAAGA,CAAA,CACrD,CAKA,aAAsC,CACpC,MAAO,CAAE,GAAG,KAAK,MAAM,QAAA,CACzB,CAKA,eAAsB,CACpB,KAAK,MAAM,SAAW,KAAK,sBAAA,CAC7B,CAOA,OAAc,CACZ,KAAK,MAAQ,KAAK,mBAAA,CACpB,CAKA,aAAaI,EAA0B,CACrC,KAAK,MAAQ,CACX,SAAU,IAAI,IAAIA,EAAS,QAAQ,EACnC,SAAU,IAAI,IAAIA,EAAS,QAAQ,EACnC,gBAAiBA,EAAS,gBAC1B,eAAgB,CAAC,GAAGA,EAAS,cAAc,EAC3C,SAAU,CAAE,GAAGA,EAAS,QAAA,CAAS,CAErC,CACF,CChQO,MAAMC,EAAe,CAI1B,YAAYC,EAAiC,CAHrCzC,GAAA,eACAA,GAAA,4BAAuB,KAG7B,KAAK,OAAS,CACZ,QAASyC,GAAQ,SAAW,mCAC5B,QAASA,GAAQ,SAAW,IAC5B,cAAeA,GAAQ,eAAiB,EACxC,WAAYA,GAAQ,YAAc,GAAA,CAEtC,CAKA,MAAM,cAA6C,CACjD,MAAMC,EAAoC,CACxC,OAAQ,eAAA,EAGJC,EAAW,MAAM,KAAK,KAAqBD,EAAS,eAAe,EAEzE,GAAI,CAACC,EAAS,SACZ,MAAM,IAAI,MAAM,0CAA0C,EAG5D,OAAOA,EAAS,QAClB,CAKA,MAAM,gBAAgBC,EAAyD,CAI7E,MAAMF,EAAoC,CACxC,YAHwBE,EAAS,IAAKC,GAAS,KAAK,gBAAgBA,CAAI,CAAC,CAG5D,EAGf,OAAO,MAAM,KAAK,KAAqBH,EAAS,kBAAkB,CACpE,CAKA,MAAc,KAAQI,EAAgCC,EAA+B,CACnF,IAAIC,EAA0B,KAE9B,QAASC,EAAU,EAAGA,GAAW,KAAK,OAAO,cAAeA,IAC1D,GAAI,CAEF,OADiB,MAAM,KAAK,iBAAiBH,EAAMC,CAAS,CAE9D,OAASxB,EAAO,CAId,GAHAyB,EAAYzB,aAAiB,MAAQA,EAAQ,IAAI,MAAM,OAAOA,CAAK,CAAC,EAGhEA,aAAiB,cAAgBA,EAAM,OAAS,aAClD,MAAMA,EAIJ0B,EAAU,KAAK,OAAO,eACxB,MAAM,KAAK,MAAM,KAAK,OAAO,YAAcA,EAAU,EAAE,CAE3D,CAGF,MAAM,IAAI,MACR,wBAAwB,KAAK,OAAO,cAAgB,CAAC,cAAcD,GAAW,OAAO,EAAA,CAEzF,CAKA,MAAc,iBACZF,EACAC,EACkB,CAElB,KAAK,OAAOA,CAAS,EAErB,MAAMG,EAAkB,IAAI,gBAC5B,KAAK,iBAAiB,IAAIH,EAAWG,CAAe,EAGpD,MAAMC,EAAY,WAAW,IAAM,CACjCD,EAAgB,MAAA,CAClB,EAAG,KAAK,OAAO,OAAO,EAEtB,GAAI,CACF,MAAMP,EAAW,MAAM,MAAM,KAAK,OAAO,QAAS,CAChD,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,KAAM,KAAK,UAAUG,CAAI,EACzB,OAAQI,EAAgB,MAAA,CACzB,EAED,GAAI,CAACP,EAAS,GACZ,MAAM,IAAI,MAAM,cAAcA,EAAS,MAAM,KAAKA,EAAS,UAAU,EAAE,EAGzE,MAAMjC,EAAS,MAAMiC,EAAS,KAAA,EAG9B,GAAIjC,EAAO,aACT,MAAM,IAAI,MAAM,iBAAiBA,EAAO,aAAa,KAAK,IAAI,CAAC,EAAE,EAGnE,OAAOA,CACT,QAAA,CACE,aAAayC,CAAS,EACtB,KAAK,iBAAiB,OAAOJ,CAAS,CACxC,CACF,CAKQ,gBAAgBK,EAAiD,CAEvE,MAAMC,EAAeD,EAAQ,QAC1B,QAAQ,UAAW,EAAE,EACrB,KAAA,EAGGE,EAAgB,CAAC,WAAY,UAAW,YAAa,WAAY,YAAa,UAAU,EAE9F,GAAI,CAACA,EAAc,SAASF,EAAQ,WAAW,EAC7C,MAAM,IAAI,MACR,yBAAyBA,EAAQ,WAAW,qBAAqBE,EAAc,KAAK,IAAI,CAAC,EAAA,EAI7F,MAAO,CACL,GAAGF,EACH,QAASC,EACT,QAAS,OAAOD,EAAQ,OAAO,CAAA,CAEnC,CAKA,OAAOL,EAAyB,CAC9B,MAAMQ,EAAa,KAAK,iBAAiB,IAAIR,CAAS,EAClDQ,IACFA,EAAW,MAAA,EACX,KAAK,iBAAiB,OAAOR,CAAS,EAE1C,CAKA,WAAkB,CAChB,UAAWQ,KAAc,KAAK,iBAAiB,OAAA,EAC7CA,EAAW,MAAA,EAEb,KAAK,iBAAiB,MAAA,CACxB,CAKA,aAAad,EAAsC,CACjD,KAAK,OAAS,CAAE,GAAG,KAAK,OAAQ,GAAGA,CAAA,CACrC,CAKA,WAAqC,CACnC,MAAO,CAAE,GAAG,KAAK,MAAA,CACnB,CAKQ,MAAMe,EAA2B,CACvC,OAAO,IAAI,QAASC,GAAY,WAAWA,EAASD,CAAE,CAAC,CACzD,CACF,CCpMO,MAAME,EAAe,CAM1B,YACUC,EACRC,EACA,CARM5D,GAAA,oBAAe,KACfA,GAAA,iBAAoB,GACXA,GAAA,qBAAgB,EAAI,GAAK,KAClCA,GAAA,sBAAmD,MAGjD,KAAA,eAAA2D,CAEP,CAKH,MAAM,MAAsB,CAC1B,MAAM,KAAK,cAAA,CACb,CAKA,MAAM,cAAcE,EAAQ,GAAkC,CAC5D,MAAMC,EAAM,KAAK,IAAA,EAGjB,MAAI,CAACD,GAAS,KAAK,SAAS,KAAO,GAAKC,EAAM,KAAK,UAAY,KAAK,cAC3D,MAAM,KAAK,KAAK,SAAS,QAAQ,EAGtC,KAAK,eACA,KAAK,gBAGd,KAAK,gBAAkB,SAAY,CACjC,GAAI,CACF,MAAMC,EAAiB,MAAM,KAAK,eAAe,aAAA,EACjD,KAAK,SAAS,MAAA,EAEd,UAAWC,KAAiBD,EAAgB,CAC1C,MAAME,EAAU,KAAK,wBAAwBD,CAAa,EAC1D,KAAK,SAAS,IAAIC,EAAQ,GAAIA,CAAO,CACvC,CAEA,YAAK,UAAYH,EACV,MAAM,KAAK,KAAK,SAAS,QAAQ,CAC1C,QAAA,CACE,KAAK,eAAiB,IACxB,CACF,GAAA,EAEO,KAAK,eACd,CAKA,MAAM,WAAWhC,EAAeoC,EAAiB,GAA2C,CAC1F,IAAIrC,EAAU,KAAK,SAAS,IAAIC,CAAE,EAElC,MAAI,CAACD,GAAWqC,IACd,MAAM,KAAK,cAAA,EACXrC,EAAU,KAAK,SAAS,IAAIC,CAAE,GAGzBD,CACT,CAKA,gBAAmC,CACjC,OAAO,MAAM,KAAK,KAAK,SAAS,QAAQ,CAC1C,CAKA,UAAoB,CAClB,OAAO,KAAK,SAAS,KAAO,CAC9B,CAKA,YAAmB,CACjB,KAAK,SAAS,MAAA,EACd,KAAK,UAAY,CACnB,CAKQ,wBAAwBmC,EAAkD,CAChF,KAAM,CAAE,YAAAG,EAAa,YAAAC,CAAA,EAAgBJ,EAGrC,IAAIK,EAAuC,OACvCD,EAAY,SAAS,MAAM,GAAKD,EAAY,SAAS,IAAI,EAC3DE,EAAO,QAEPD,EAAY,SAAS,MAAM,GAC3BD,EAAY,SAAS,IAAI,GACzBA,EAAY,SAAS,IAAI,KAEzBE,EAAO,QAIT,IAAIC,EAAoB,EACxB,OAAIH,EAAY,SAAS,QAAQ,GAAKA,EAAY,SAAS,SAAS,KAClEG,EAAoB,GAIU,CAC9B,GAAIH,EACJ,KAAMA,EACN,YAAaE,EACb,kBAAAC,EACA,KAAM,KAAK,eAAeD,CAAI,EAC9B,WAAY,KAAK,qBAAqBA,CAAI,EAC1C,aAAc,CAAA,CAAC,CAInB,CAKQ,eAAeA,EAAsC,CAC3D,OAAIA,IAAS,OACJ,CACL,CACE,KAAM,IACN,KAAM,SACN,YAAa,KACb,YAAa,IACb,MAAO,IAAA,EAET,CACE,KAAM,IACN,KAAM,SACN,YAAa,KACb,YAAa,EACb,MAAO,IAAA,EAET,CACE,KAAM,IACN,KAAM,SACN,YAAa,EACb,YAAa,IACb,MAAO,QAAA,CACT,EAIG,CACL,CACE,KAAM,IACN,KAAM,SACN,YAAa,KACb,YAAa,IACb,MAAO,IAAA,EAET,CACE,KAAM,IACN,KAAM,SACN,YAAa,KACb,YAAa,IACb,MAAO,IAAA,EAET,CACE,KAAM,IACN,KAAM,SACN,YAAa,KACb,YAAa,IACb,MAAO,IAAA,CACT,CAEJ,CAKQ,qBAAqBA,EAAsC,CACjE,OAAIA,IAAS,OACJ,CACL,QAAS,EACT,QAAS,IACT,UAAW,KACX,MAAO,YAAA,EAIJ,CACL,QAAS,EACT,QAAS,IACT,UAAW,IACX,MAAO,YAAA,CAEX,CACF,CClMO,MAAME,EAAc,CAKzB,YACU3C,EACR4C,EACA,CAPMxE,GAAA,mBAAc,KACdA,GAAA,iBAAY,IACZA,GAAA,0BAGE,KAAA,SAAA4B,EAGR,KAAK,kBAAoB4C,CAC3B,CAKA,MAAM,MACJxC,EACAoB,EAIC,CAED,GAAI,KAAK,kBAAmB,CAC1B,MAAMqB,EAAW,KAAK,kBAAkB,sBAAsBrB,CAAO,EAErE,GAAIqB,EAAS,eAAgB,CAC3B,QAAQ,IAAI,sDAAsDA,EAAS,MAAM,EAAE,EAGnF,MAAMC,EAAgB,MAAM,KAAK,kBAAkB,gBAAgB,CACjE,UAAA1C,EACA,QAAAoB,EACA,UAAW,UAAA,CACZ,EAED,GAAIsB,EAAc,SAAWA,EAAc,KACzC,eAAQ,IACN,8CAA8CA,EAAc,cAAc,IAAA,EAErEA,EAAc,KAErB,QAAQ,IACN,gEAAgEA,EAAc,KAAK,EAAA,CAIzF,CACF,CAEA,OAAI,KAAK,UACA,KAAK,cAAc1C,EAAWoB,CAAO,EAGvC,KAAK,UAAUpB,EAAWoB,CAAO,CAC1C,CAKA,MAAc,UACZpB,EACAoB,EAIC,CAID,MAAMuB,EAAQvB,EAAQ,MAAM;AAAA,CAAI,EAC1BwB,EAA2B,CAAA,EAC3BC,EAAqC,CAAA,EACrCC,EAA0B,CAAA,EAC1BC,EAAkC,CAAA,EAGlCC,EAAkB,CAAC,iDAAkD,cAAc,EAEzFL,EAAM,QAAQ,CAACM,EAAMC,IAAU,CAC7B,MAAMC,EAAaD,EAAQ,EAG3BF,EAAgB,QAASI,GAAY,CACnC,MAAMC,EAAUJ,EAAK,SAASG,CAAO,EACrC,UAAWE,KAASD,EAClBT,EAAS,KAAK,CACZ,QAASU,EAAM,CAAC,EAAE,YAAA,EAClB,WAAAH,EACA,QAASF,EAAK,KAAA,CAAK,CACpB,CAEL,CAAC,EAGD,MAAMM,EAAYN,EAAK,MAAM,SAAS,EACtC,GAAIM,GAAaA,EAAU,CAAC,EAAG,CAC7B,MAAMC,EAAa,SAASD,EAAU,CAAC,EAAG,EAAE,EAGtCE,EAASR,EAAK,MAAM,aAAa,EACjCS,EAAST,EAAK,MAAM,aAAa,EAEvCJ,EAAc,KAAK,CACjB,WAAAW,EACA,WAAYC,GAAUA,EAAO,CAAC,EAAI,WAAWA,EAAO,CAAC,CAAC,EAAI,OAC1D,WAAYC,GAAUA,EAAO,CAAC,EAAI,WAAWA,EAAO,CAAC,CAAC,EAAI,OAC1D,WAAAP,CAAA,CACD,CACH,CAGIF,EAAK,MAAM,WAAW,GACxBH,EAAW,KAAK,CACd,WAAAK,EACA,KAAM,OACN,SAAU,CAACnD,CAAS,EACpB,aAAc,EACd,KAAM,MAAA,CACP,EAKDiD,EAAK,KAAA,GACL,CAACA,EAAK,MAAM,4DAA4D,GAExEF,EAAO,KAAK,CACV,WAAAI,EACA,OAAQ,EACR,SAAU,UACV,QAAS,8CAAA,CACV,CAEL,CAAC,EAED,MAAMzE,EAAwB,CAC5B,cAAeqE,EAAO,OAAS,EAC/B,OAAQA,EAAO,OAAS,EAAIA,EAAS,MAAA,EAGjCY,EAA4B,CAChC,SAAAf,EACA,iBAAkB,CAChB,cAAe,IACf,YAAa,KAAK,IAAA,CAAI,EAExB,cAAAC,EACA,eAAgB,CACd,mBAAoB,EACpB,UAAW,CAAA,EACX,WAAY,CAAA,EAEd,WAAAC,CAAA,EAIF,YAAK,SAAS,KAA0B,CACtC,KAAM,kBACN,UAAW,KAAK,IAAA,EAChB,QAAS,CACP,UAAA9C,EACA,OAAAtB,EACA,UAAAiF,CAAA,CACF,CACD,EAEM,CAAE,OAAAjF,EAAQ,UAAAiF,CAAA,CACnB,CAKA,MAAc,cACZ3D,EACAoB,EAIC,CAGD,OAAO,KAAK,UAAUpB,EAAWoB,CAAO,CAC1C,CAKA,OAAOpB,EAA4B,CACjC,MAAM4D,EAAS,KAAK,QAAQ,IAAI5D,CAAS,EACrC4D,IACFA,EAAO,UAAA,EACP,KAAK,QAAQ,OAAO5D,CAAS,EAEjC,CAKA,WAAkB,CAChB,UAAW4D,KAAU,KAAK,QAAQ,OAAA,EAC5BA,GACFA,EAAO,UAAA,EAGX,KAAK,QAAQ,MAAA,CACf,CAKA,SAAgB,CACd,KAAK,UAAA,CACP,CACF,CCvNO,MAAMC,EAAuB,CAGlC,YACUlC,EACAmC,EACAlE,EACR4C,EACA,CAPMxE,GAAA,0BAGE,KAAA,eAAA2D,EACA,KAAA,aAAAmC,EACA,KAAA,SAAAlE,EAGR,KAAK,kBAAoB4C,CAC3B,CAKA,MAAM,eAAexC,EAAsD,CACzE,MAAMC,EAAU,KAAK,aAAa,WAAWD,CAAS,EACtD,GAAI,CAACC,EACH,MAAM,IAAI,MAAM,sBAAsBD,CAAS,EAAE,EAGnD,MAAMH,EAAU,KAAK,aAAa,WAAWI,EAAQ,SAAS,EAC9D,GAAI,CAACJ,EACH,MAAM,IAAI,MAAM,sBAAsBI,EAAQ,SAAS,EAAE,EAG3D,MAAMW,EAAiC,CACrC,CACE,QAASX,EAAQ,QACjB,YAAaJ,EAAQ,GACrB,QAASG,CAAA,CACX,EAGF,OAAO,KAAK,QAAQY,EAAUZ,CAAS,CACzC,CAKA,MAAM,wBACJ+D,EACgD,CAChD,MAAMnD,EAAiC,CAAA,EAEvC,UAAWZ,KAAa+D,EAAY,CAClC,MAAM9D,EAAU,KAAK,aAAa,WAAWD,CAAS,EACtD,GAAI,CAACC,EACH,MAAM,IAAI,MAAM,sBAAsBD,CAAS,EAAE,EAGnD,MAAMH,EAAU,KAAK,aAAa,WAAWI,EAAQ,SAAS,EAC9D,GAAI,CAACJ,EACH,MAAM,IAAI,MAAM,sBAAsBI,EAAQ,SAAS,EAAE,EAG3DW,EAAS,KAAK,CACZ,QAASX,EAAQ,QACjB,YAAaJ,EAAQ,GACrB,QAASG,CAAA,CACV,CACH,CAEA,MAAMgE,MAAc,IAEpB,GAAI,CACF,MAAMC,EAAiB,MAAM,KAAK,eAAe,gBAAgBrD,CAAQ,EAGzE,UAAWZ,KAAa+D,EAAY,CAClC,MAAMrF,EAAS,KAAK,sBAAsBuF,EAAgBjE,CAAS,EACnEgE,EAAQ,IAAIhE,EAAWtB,CAAM,EAG7B,KAAK,SAAS,KAA8B,CAC1C,KAAM,sBACN,UAAW,KAAK,IAAA,EAChB,QAAS,CACP,UAAAsB,EACA,OAAAtB,CAAA,CACF,CACD,EAGD,KAAK,aAAa,cAAcsB,EAAW,CACzC,eAAgBtB,CAAA,CACjB,CACH,CACF,OAASa,EAAO,CACd,cAAQ,MAAM,8BAA+BA,CAAK,EAC5CA,CACR,CAEA,OAAOyE,CACT,CAKA,MAAc,QACZpD,EACAsD,EACgC,CAChC,GAAI,CAEF,GAAI,KAAK,kBAAmB,CAC1B,MAAMzB,EAAW,KAAK,kBAAkB,wBAAwB7B,CAAQ,EAExE,GAAI6B,EAAS,eAAgB,CAC3B,QAAQ,IAAI,2DAA2DA,EAAS,MAAM,EAAE,EAExF,MAAMC,EAAgB,MAAM,KAAK,kBAAkB,kBAAkB,CAAE,SAAA9B,EAAU,EAEjF,GAAI8B,EAAc,SAAWA,EAAc,KAAM,CAC/C,QAAQ,IACN,yDAAyDA,EAAc,cAAc,IAAA,EAIvF,MAAMhE,EAASgE,EAAc,KAAK,IAAIwB,CAAgB,EACtD,GAAIxF,EAEF,YAAK,SAAS,KAA8B,CAC1C,KAAM,sBACN,UAAW,KAAK,IAAA,EAChB,QAAS,CACP,UAAWwF,EACX,OAAAxF,CAAA,CACF,CACD,EAGD,KAAK,aAAa,cAAcwF,EAAkB,CAChD,eAAgBxF,CAAA,CACjB,EAEMA,CAEX,MACE,QAAQ,IACN,2EAA2EgE,EAAc,KAAK,EAAA,CAIpG,CACF,CAEA,MAAMuB,EAAiB,MAAM,KAAK,eAAe,gBAAgBrD,CAAQ,EACnElC,EAAS,KAAK,sBAAsBuF,EAAgBC,CAAgB,EAG1E,YAAK,SAAS,KAA8B,CAC1C,KAAM,sBACN,UAAW,KAAK,IAAA,EAChB,QAAS,CACP,UAAWA,EACX,OAAAxF,CAAA,CACF,CACD,EAGD,KAAK,aAAa,cAAcwF,EAAkB,CAChD,eAAgBxF,CAAA,CACjB,EAEMA,CACT,OAASa,EAAO,CACd,cAAQ,MAAM,6BAA8BA,CAAK,EAC3CA,CACR,CACF,CAKQ,sBACN0E,EACAjE,EACuB,CAKvB,MAAMtB,EAAgC,CACpC,QAASsB,EACT,cAAe,CAAA,EACf,eAAgB,CACd,cAAe,IACf,YAAa,KAAK,IAAA,CAAI,EAExB,SAAU,CACR,QAASA,EACT,SAAU,CAAA,EACV,SAAU,CACR,OAAQ,CACN,IAAK,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,CAAA,EACtB,IAAK,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,CAAA,CAAE,EAE1B,cAAe,EACf,UAAW,CAAA,CACb,EAEF,UAAW,KAAK,IAAA,CAAI,EAQtB,OAAIiE,EAAe,OAEjB,QAAQ,IAAI,uBAAwBA,EAAe,KAAK,EAGtDA,EAAe,SAAWA,EAAe,QAAQ,OAAS,GAC5D,QAAQ,IAAI,mBAAoBA,EAAe,OAAO,EAGjDvF,CACT,CAKA,aAAasB,EAA4B,CACvC,KAAK,aAAa,cAAcA,EAAW,CACzC,eAAgB,MAAA,CACjB,CACH,CAKA,iBAAwB,CACtB,MAAMmE,EAAW,KAAK,aAAa,eAAA,EACnC,UAAWlE,KAAWkE,EACpB,KAAK,aAAalE,EAAQ,EAAE,CAEhC,CACF,CC1PO,MAAMmE,EAAY,CAAlB,cACGpG,GAAA,qBAAgB,KAKhB,YAAYgC,EAAsBD,EAA8B,CACtE,MAAO,GAAGC,CAAS,IAAID,CAAS,EAClC,CAKA,YAAYC,EAAsBD,EAAsBsE,EAA8B,CACpF,MAAMC,EAAM,KAAK,YAAYtE,EAAWD,CAAS,EACjD,KAAK,UAAU,IAAIuE,EAAKD,CAAQ,CAClC,CAKA,YAAYrE,EAAsBD,EAAgD,CAChF,MAAMuE,EAAM,KAAK,YAAYtE,EAAWD,CAAS,EACjD,OAAO,KAAK,UAAU,IAAIuE,CAAG,CAC/B,CAKA,aAAatE,EAA4B,CACvC,MAAMuE,EAAyB,CAAA,EAE/B,UAAWD,KAAO,KAAK,UAAU,KAAA,EAC3BA,EAAI,WAAW,GAAGtE,CAAS,GAAG,GAChCuE,EAAa,KAAKD,CAAG,EAIzB,UAAWA,KAAOC,EAChB,KAAK,UAAU,OAAOD,CAAG,CAE7B,CAKA,UAAiB,CACf,KAAK,UAAU,MAAA,CACjB,CAKA,kBAAkBtE,EAAsBD,EAAsByD,EAAmC,CAC/F,MAAMa,EAAW,KAAK,YAAYrE,EAAWD,CAAS,EACtD,OAAKsE,EAIEA,EAAS,SAAS,OAAQG,GAAQA,EAAI,aAAehB,CAAU,EAH7D,CAAA,CAIX,CAKA,oBACExD,EACAD,EACAoD,EACe,CACf,MAAMkB,EAAW,KAAK,YAAYrE,EAAWD,CAAS,EACtD,OAAKsE,EAIEA,EAAS,SAAS,OAAQG,GAAQA,EAAI,YAAcrB,CAAU,EAH5D,CAAA,CAIX,CAKA,gBAAgBkB,EAAwB,CACtC,IAAII,EAAO,IACPC,EAAO,IACPC,EAAO,IACPC,EAAO,KACPC,EAAO,KACPC,EAAO,KAEX,UAAWC,KAAWV,EAAS,SAC7B,UAAWW,KAASD,EAAQ,OAC1BN,EAAO,KAAK,IAAIA,EAAMO,EAAM,CAAC,EAC7BN,EAAO,KAAK,IAAIA,EAAMM,EAAM,CAAC,EAC7BL,EAAO,KAAK,IAAIA,EAAMK,EAAM,CAAC,EAC7BJ,EAAO,KAAK,IAAIA,EAAMI,EAAM,CAAC,EAC7BH,EAAO,KAAK,IAAIA,EAAMG,EAAM,CAAC,EAC7BF,EAAO,KAAK,IAAIA,EAAME,EAAM,CAAC,EAIjC,MAAO,CACL,IAAK,CAAE,EAAGP,EAAM,EAAGC,EAAM,EAAGC,CAAA,EAC5B,IAAK,CAAE,EAAGC,EAAMC,EAAS,EAAGC,CAAA,EAC5B,OAAQ,CACN,GAAIL,EAAOG,GAAQ,EACnB,GAAIF,EAAOG,GAAQ,EACnB,GAAIF,EAAOG,GAAQ,CAAA,EAErB,KAAM,CACJ,EAAGF,EAAOH,EACV,EAAGI,EAAOH,EACV,EAAGI,EAAOH,CAAA,CACZ,CAEJ,CAKA,kBAAkB3E,EAAsBD,EAAsB,CAC5D,MAAMsE,EAAW,KAAK,YAAYrE,EAAWD,CAAS,EACtD,GAAI,CAACsE,EACH,OAAO,KAGT,MAAMY,MAAY,IAClB,IAAIC,EAAc,EAClB,MAAMC,MAAmB,IAEzB,UAAWJ,KAAWV,EAAS,SAAU,CACvCY,EAAM,IAAIF,EAAQ,UAAU,EAC5BG,GAAeH,EAAQ,OAAO,OAE9B,MAAMK,EAAQD,EAAa,IAAIJ,EAAQ,IAAI,GAAK,EAChDI,EAAa,IAAIJ,EAAQ,KAAMK,EAAQ,CAAC,CAC1C,CAEA,MAAO,CACL,cAAef,EAAS,SAAS,OACjC,YAAAa,EACA,YAAaD,EAAM,KACnB,MAAO,MAAM,KAAKA,CAAK,EACvB,aAAc,OAAO,YAAYE,CAAY,EAC7C,OAAQd,EAAS,SAAS,OAC1B,cAAeA,EAAS,SAAS,cACjC,UAAWA,EAAS,SAAS,SAAA,CAEjC,CAKA,SAAgB,CACd,KAAK,SAAA,CACP,CACF,CC9JA,MAAMgB,GAAc,uBAKb,MAAMC,EAAsB,CAGjC,aAAc,CAFNtH,GAAA,iBAGN,KAAK,SAAW,KAAK,aAAA,CACvB,CAKQ,cAA6B,CACnC,GAAI,CACF,MAAMuH,EAAS,aAAa,QAAQF,EAAW,EAC/C,GAAIE,EAAQ,CACV,MAAMC,EAAS,KAAK,MAAMD,CAAM,EAChC,OAAO,KAAK,iBAAiBC,CAAM,CACrC,CACF,OAASjG,EAAO,CACd,QAAQ,MAAM,mCAAoCA,CAAK,CACzD,CAEA,OAAO,KAAK,mBAAA,CACd,CAKQ,cAAqB,CAC3B,GAAI,CACF,aAAa,QAAQ8F,GAAa,KAAK,UAAU,KAAK,QAAQ,CAAC,CACjE,OAAS9F,EAAO,CACd,QAAQ,MAAM,mCAAoCA,CAAK,CACzD,CACF,CAKQ,oBAAmC,CACzC,MAAO,CACL,MAAO,QACP,eAAgB,GAChB,SAAU,GACV,kBAAmB,CACjB,cAAe,OACf,aAAc,QACd,mBAAoB,OACpB,sBAAuB,OAAA,CACzB,CAEJ,CAKQ,iBAAiBkG,EAA+C,CACtE,MAAMC,EAAW,KAAK,mBAAA,EAEtB,MAAO,CACL,MAAOD,EAAS,QAAU,OAAS,OAAS,QAC5C,eACE,OAAOA,EAAS,gBAAmB,SAC/BA,EAAS,eACTC,EAAS,eACf,SAAU,OAAOD,EAAS,UAAa,UAAYA,EAAS,SAAWC,EAAS,SAChF,eAAgBD,EAAS,eACzB,kBAAmB,CACjB,GAAGC,EAAS,kBACZ,GAAGD,EAAS,iBAAA,CACd,CAEJ,CAKA,aAAsC,CACpC,MAAO,CAAE,GAAG,KAAK,QAAA,CACnB,CAKA,eAAetF,EAAsC,CACnD,KAAK,SAAW,CAAE,GAAG,KAAK,SAAU,GAAGA,CAAA,EACvC,KAAK,aAAA,CACP,CAKA,wBAAwBA,EAA2C,CACjE,KAAK,SAAS,kBAAoB,CAChC,GAAG,KAAK,SAAS,kBACjB,GAAGA,CAAA,EAEL,KAAK,aAAA,CACP,CAKA,SAASwF,EAA+B,CACtC,KAAK,SAAS,MAAQA,EACtB,KAAK,aAAA,EAGL,SAAS,gBAAgB,aAAa,aAAcA,CAAK,CAC3D,CAKA,kBAAkBC,EAAoB,CACpC,KAAK,SAAS,eAAiB,KAAK,IAAI,EAAG,KAAK,IAAI,GAAIA,CAAI,CAAC,EAC7D,KAAK,aAAA,CACP,CAKA,YAAYC,EAAwB,CAClC,KAAK,SAAS,SAAWA,EACzB,KAAK,aAAA,CACP,CAKA,kBAAkB9F,EAAyB,CACzC,KAAK,SAAS,eAAiBA,EAC/B,KAAK,aAAA,CACP,CAKA,qBAA4B,CAC1B,OAAO,KAAK,SAAS,eACrB,KAAK,aAAA,CACP,CAKA,OAAc,CACZ,KAAK,SAAW,KAAK,mBAAA,EACrB,KAAK,aAAA,CACP,CAKA,QAAiB,CACf,OAAO,KAAK,UAAU,KAAK,SAAU,KAAM,CAAC,CAC9C,CAKA,OAAO+F,EAAuB,CAC5B,GAAI,CACF,MAAMN,EAAS,KAAK,MAAMM,CAAI,EAC9B,YAAK,SAAW,KAAK,iBAAiBN,CAAM,EAC5C,KAAK,aAAA,EACE,EACT,OAASjG,EAAO,CACd,eAAQ,MAAM,6BAA8BA,CAAK,EAC1C,EACT,CACF,CACF,CCjKO,MAAMwG,EAAmB,CAI9B,YAAoBnG,EAAoB,CAHhC5B,GAAA,uBAAkB,KAClBA,GAAA,cAAS,GAEG,KAAA,SAAA4B,EAElB,KAAK,SAAS,GAAe,QAAUP,GAAU,CAC/C,KAAK,cAAc,CACjB,UAAW,OACX,SAAU,QACV,OAAQ,SACR,QAASA,EAAM,QAAQ,QACvB,QAASA,EAAM,QAAQ,OAAA,CACxB,CACH,CAAC,CACH,CAKA,cAAc2G,EAA0D,CACtE,MAAMlG,EAAK,QAAQ,KAAK,QAAQ,GAC1BmG,EAAoB,CACxB,GAAGD,EACH,GAAAlG,EACA,UAAW,KAAK,IAAA,CAAI,EAGtB,YAAK,YAAY,IAAIA,EAAImG,CAAK,EACvBnG,CACT,CAKA,gBAAgBE,EAAsB+C,EAA6B,CACjE,UAAWmD,KAASnD,EAClB,KAAK,cAAc,CACjB,UAAA/C,EACA,SAAUkG,EAAM,SAChB,OAAQ,SACR,QAAS,QAAQA,EAAM,UAAU,KAAKA,EAAM,OAAO,GACnD,QAASA,CAAA,CACV,CAEL,CAKA,gBAAgBC,EAAiBC,EAAmBpG,EAA6B,CAC/E,KAAK,cAAc,CACjB,UAAAA,EACA,SAAU,QACV,OAAQ,UACR,QAAAmG,EACA,QAAAC,CAAA,CACD,CACH,CAKA,iBAAiBtG,EAAqB,CACpC,OAAO,KAAK,YAAY,OAAOA,CAAE,CACnC,CAKA,aAAaE,EAA4B,CACvC,MAAMqG,EAAwB,CAAA,EAE9B,SAAW,CAACvG,EAAIwG,CAAI,IAAK,KAAK,YACxBA,EAAK,YAActG,GACrBqG,EAAY,KAAKvG,CAAE,EAIvB,UAAWA,KAAMuG,EACf,KAAK,YAAY,OAAOvG,CAAE,CAE9B,CAKA,UAAiB,CACf,KAAK,YAAY,MAAA,CACnB,CAKA,mBAAkC,CAChC,OAAO,MAAM,KAAK,KAAK,YAAY,QAAQ,EAAE,KAAK,CAACyG,EAAGC,IAAMA,EAAE,UAAYD,EAAE,SAAS,CACvF,CAKA,sBAAsBvG,EAAoC,CACxD,OAAO,KAAK,oBAAoB,OAAQyG,GAAMA,EAAE,YAAczG,CAAS,CACzE,CAKA,yBAAyB0G,EAAsD,CAC7E,OAAO,KAAK,oBAAoB,OAAQD,GAAMA,EAAE,WAAaC,CAAQ,CACvE,CAKA,uBAAuBC,EAAuD,CAC5E,OAAO,KAAK,oBAAoB,OAAQF,GAAMA,EAAE,SAAWE,CAAM,CACnE,CAKA,eAAwB,CACtB,OAAO,KAAK,yBAAyB,OAAO,EAAE,MAChD,CAKA,iBAA0B,CACxB,OAAO,KAAK,yBAAyB,SAAS,EAAE,MAClD,CAKA,WAAqB,CACnB,OAAO,KAAK,gBAAkB,CAChC,CAKA,aAAuB,CACrB,OAAO,KAAK,kBAAoB,CAClC,CAKA,YAAa,CACX,MAAO,CACL,MAAO,KAAK,YAAY,KACxB,OAAQ,KAAK,cAAA,EACb,SAAU,KAAK,gBAAA,EACf,KAAM,KAAK,yBAAyB,MAAM,EAAE,OAC5C,SAAU,CACR,OAAQ,KAAK,uBAAuB,QAAQ,EAAE,OAC9C,QAAS,KAAK,uBAAuB,SAAS,EAAE,OAChD,OAAQ,KAAK,uBAAuB,QAAQ,EAAE,MAAA,CAChD,CAEJ,CACF,CCnHO,MAAMC,EAAkB,CAQ7B,YACUjF,EACA/B,EACRa,EACA,CAXMzC,GAAA,eACAA,GAAA,aAAQ,CACd,WAAY,EACZ,WAAY,EACZ,kBAAmB,CAAA,GAIX,KAAA,eAAA2D,EACA,KAAA,SAAA/B,EAGR,KAAK,OAAS,CACZ,QAASa,GAAQ,SAAW,GAC5B,SAAUA,GAAQ,SAClB,OAAQA,GAAQ,OAChB,aAAcA,GAAQ,cAAgB,GACtC,WAAY,CACV,iBAAkBA,GAAQ,YAAY,kBAAoB,IAC1D,UAAWA,GAAQ,YAAY,WAAa,IAC5C,WAAYA,GAAQ,YAAY,YAAc,GAC9C,GAAGA,GAAQ,UAAA,EAEb,aAAc,CACZ,QAAS,GACT,UAAW,GACX,SAAU,GACV,aAAc,GACd,WAAY,GACZ,GAAGA,GAAQ,YAAA,EAEb,QAASA,GAAQ,SAAW,GAAA,CAEhC,CAKA,sBAAsBW,EAAqC,CACzD,GAAI,CAAC,KAAK,OAAO,SAAW,CAAC,KAAK,OAAO,aAAa,QACpD,MAAO,CACL,eAAgB,GAChB,OAAQ,+BACR,WAAY,SAAA,EAIhB,MAAMyF,EAAU,KAAK,eAAezF,CAAO,EAE3C,OAAIyF,EAAQ,UAAY,KAAK,OAAO,WAAW,iBACtC,CACL,eAAgB,GAChB,OAAQ,iBAAiBA,EAAQ,SAAS,4BAC1C,WAAY,UACZ,mBAAoBA,EAAQ,UAAY,EACxC,mBAAoB,KAAK,IAAI,IAAMA,EAAQ,UAAY,EAAG,CAAA,EAI1DA,EAAQ,UAAY,KAAK,OAAO,WAAW,UACtC,CACL,eAAgB,GAChB,OAAQ,eAAeA,EAAQ,SAAS,sBACxC,WAAY,UACZ,mBAAoBA,EAAQ,UAAY,EACxC,mBAAoB,KAAK,IAAI,IAAMA,EAAQ,UAAY,EAAG,CAAA,EAI1DA,EAAQ,gBAAkB,KAAK,OAAO,WAAW,WAC5C,CACL,eAAgB,GAChB,OAAQ,qBAAqBA,EAAQ,eAAe,sBACpD,WAAY,UACZ,mBAAoBA,EAAQ,gBAAkB,GAC9C,mBAAoBA,EAAQ,gBAAkB,CAAA,EAI3C,CACL,eAAgB,GAChB,OAAQ,wCACR,WAAY,SAAA,CAEhB,CAKA,wBAAwBjG,EAAoD,CAC1E,GAAI,CAAC,KAAK,OAAO,SAAW,CAAC,KAAK,OAAO,aAAa,UACpD,MAAO,CACL,eAAgB,GAChB,OAAQ,+BACR,WAAY,WAAA,EAIhB,MAAMkG,EAAYlG,EAAS,OAAO,CAACmG,EAAKC,IAAMD,EAAMC,EAAE,QAAQ,OAAQ,CAAC,EACjEC,EAAarG,EAAS,OAAO,CAACmG,EAAKC,IAAMD,EAAMC,EAAE,QAAQ,MAAM;AAAA,CAAI,EAAE,OAAQ,CAAC,EAEpF,OAAIF,EAAY,KAAK,OAAO,WAAW,iBAC9B,CACL,eAAgB,GAChB,OAAQ,uCACR,WAAY,WAAA,EAIZG,EAAa,KAAK,OAAO,WAAW,UAC/B,CACL,eAAgB,GAChB,OAAQ,qCACR,WAAY,WAAA,EAKZrG,EAAS,OAAS,EACb,CACL,eAAgB,GAChB,OAAQ,yDACR,WAAY,WAAA,EAIT,CACL,eAAgB,GAChB,OAAQ,4CACR,WAAY,WAAA,CAEhB,CAKA,uBAAuBQ,EAAqC,CAC1D,GAAI,CAAC,KAAK,OAAO,SAAW,CAAC,KAAK,OAAO,aAAa,SACpD,MAAO,CACL,eAAgB,GAChB,OAAQ,+BACR,WAAY,UAAA,EAIhB,MAAMyF,EAAU,KAAK,eAAezF,CAAO,EAG3C,OAAIyF,EAAQ,UAAY,KAAQA,EAAQ,UAAY,IAC3C,CACL,eAAgB,GAChB,OAAQ,6CACR,WAAY,UAAA,EAIT,CACL,eAAgB,GAChB,OAAQ,4CACR,WAAY,UAAA,CAEhB,CAKQ,eAAezF,EAIrB,CACA,MAAM8F,EAAY,IAAI,KAAK,CAAC9F,CAAO,CAAC,EAAE,KAEhC+F,EADQ/F,EAAQ,MAAM;AAAA,CAAI,EAAE,OAAQ6B,GAASA,EAAK,MAAM,EACtC,OAGxB,IAAImE,EAAkB,EAGtBA,GAAmB,KAAK,IAAI,GAAKF,EAAY,IAAQ,CAAC,EAGtDE,GAAmB,KAAK,IAAI,GAAKD,EAAY,IAAO,CAAC,EAGrD,MAAME,GAAiBjG,EAAQ,MAAM,YAAY,GAAK,CAAA,GAAI,OAC1DgG,GAAmB,KAAK,IAAI,GAAIC,EAAgB,EAAE,EAGlD,MAAMC,GAAelG,EAAQ,MAAM,QAAQ,GAAK,CAAA,GAAI,OACpDgG,GAAmB,KAAK,IAAI,GAAIE,EAAc,CAAC,EAG/C,MAAMC,GAAanG,EAAQ,MAAM,aAAa,GAAK,CAAA,GAAI,OACvDgG,GAAmB,KAAK,IAAI,GAAIG,EAAY,CAAC,EAG7C,MAAMC,GAAmBpG,EAAQ,MAAM,OAAO,GAAK,CAAA,GAAI,OACvD,OAAAgG,GAAmB,KAAK,IAAI,GAAII,EAAkB,CAAC,EAE5C,CACL,UAAAN,EACA,UAAAC,EACA,gBAAiB,KAAK,IAAI,IAAK,KAAK,MAAMC,CAAe,CAAC,CAAA,CAE9D,CAKA,MAAM,gBACJ1G,EACmF,CACnF,MAAM+G,EAAY,KAAK,IAAA,EAEvB,GAAI,CAEF,OAAK,KAAK,OAAO,UAcjB,KAAK,MAAM,aAEX,KAAK,SAAS,KAAK,CACjB,KAAM,uBACN,UAAW,KAAK,IAAA,EAChB,QAAS,CACP,SAAU,UACV,UAAW/G,EAAQ,SAAA,CACrB,CACD,EAED,QAAQ,KACN,gGAAA,EAGK,CACL,QAAS,GACT,MAAO,iEACP,eAAgB,KAAK,IAAA,EAAQ+G,EAC7B,YAAa,OAAA,IAhCb,KAAK,MAAM,aACJ,CACL,QAAS,GACT,MAAO,mDACP,eAAgB,KAAK,IAAA,EAAQA,EAC7B,YAAa,OAAA,EA6BnB,OAASlI,EAAO,CACd,YAAK,MAAM,oBACJ,CACL,QAAS,GACT,MAAOA,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,EAC5D,eAAgB,KAAK,IAAA,EAAQkI,EAC7B,YAAa,OAAA,CAEjB,CACF,CAKA,MAAM,kBACJ/G,EACoE,CACpE,MAAM+G,EAAY,KAAK,IAAA,EAEvB,GAAI,CACF,MAAMhF,EAAW,KAAK,wBAAwB/B,EAAQ,QAAQ,EAI9D,YAAK,MAAM,aAEX,KAAK,SAAS,KAAK,CACjB,KAAM,uBACN,UAAW,KAAK,IAAA,EAChB,QAAS,CACP,SAAU,YACV,SAAA+B,CAAA,CACF,CACD,EAGD,MAAM,KAAK,eAAe,gBAAgB/B,EAAQ,QAAQ,EAI1D,QAAQ,KACN,8HAAA,EAGK,CACL,QAAS,GACT,MACE,yFACF,eAAgB,KAAK,IAAA,EAAQ+G,EAC7B,YAAa,OAAA,CAEjB,OAASlI,EAAO,CACd,YAAK,MAAM,oBACJ,CACL,QAAS,GACT,MAAOA,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,EAC5D,eAAgB,KAAK,IAAA,EAAQkI,EAC7B,YAAa,OAAA,CAEjB,CACF,CAKA,UAAW,CACT,MAAO,CACL,GAAG,KAAK,MACR,WAAY,KAAK,MAAM,WAAa,KAAK,MAAM,WAC/C,eAAgB,KAAK,MAAM,YAAc,KAAK,MAAM,WAAa,KAAK,MAAM,aAAe,CAAA,CAE/F,CAKA,aAAahH,EAAyC,CACpD,KAAK,OAAS,CACZ,GAAG,KAAK,OACR,GAAGA,EACH,WAAY,CACV,GAAG,KAAK,OAAO,WACf,GAAGA,EAAO,UAAA,EAEZ,aAAc,CACZ,GAAG,KAAK,OAAO,aACf,GAAGA,EAAO,YAAA,CACZ,CAEJ,CAKA,WAAwC,CACtC,MAAO,CAAE,GAAG,KAAK,MAAA,CACnB,CAKA,WAAWoF,EAAwB,CACjC,KAAK,OAAO,QAAUA,CACxB,CAKA,MAAM,aAAgC,CACpC,GAAI,CAAC,KAAK,OAAO,SAAW,CAAC,KAAK,OAAO,SACvC,MAAO,GAGT,GAAI,CAEF,MAAO,EACT,MAAQ,CACN,MAAO,EACT,CACF,CACF,CCtbO,MAAe6B,WAAsB,WAAY,CAItD,aAAc,CACZ,MAAA,EAJQ1J,GAAA,eACFA,GAAA,oBAAe,IAIrB,KAAK,OAAS,KAAK,aAAa,CAAE,KAAM,OAAQ,CAClD,CAEA,mBAAoB,CACb,KAAK,eACR,KAAK,aAAe,GACpB,KAAK,OAAA,EACL,KAAK,YAAA,EAET,CAEA,sBAAuB,CACrB,KAAK,eAAA,EACL,KAAK,aAAe,EACtB,CAUU,aAAoB,CAE9B,CAKU,gBAAuB,CAEjC,CAKU,eAAsB,CAC1B,KAAK,cACP,KAAK,OAAA,CAET,CAKU,aAAa2J,EAA+B,CACpD,MAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5C,OAAAA,EAAM,YAAcD,EACbC,CACT,CAKU,MAAyBC,EAA4B,CAC7D,OAAO,KAAK,OAAO,cAAiBA,CAAQ,CAC9C,CAKU,SAA4BA,EAAiC,CACrE,OAAO,KAAK,OAAO,iBAAoBA,CAAQ,CACjD,CACF,0ICxCC,UAAW,CAEZ,IAAIC,EAAgB,MAEhBC,EAAU,UAAW,CAAE,OAAO,IAAK,EAAE,EACrC,CAACA,GAAU,OAAO,OAAU,MAAaA,EAAS,QAOtD,IAAIC,EAAS,SAASC,EAAQ5J,EAAM6J,EAAS,CACzC,GAAI,OAAOD,GAAW,SAAU,CACxBD,EAAO,SACPA,EAAO,SAAS,MAAM,KAAM,SAAS,GAErC,QAAQ,MAAM,iDAAkD,EAChE,QAAQ,MAAK,GAEjB,MACR,CACQ,UAAU,QAAU,IACpBE,EAAU7J,GACT2J,EAAO,QAAQC,CAAM,IACtBD,EAAO,SAASC,CAAM,EAAIC,EAC1BF,EAAO,QAAQC,CAAM,EAAI,KAEjC,EAEAD,EAAO,QAAU,CAAA,EACjBA,EAAO,SAAW,CAAA,EAKlB,IAAIG,EAAW,SAASC,EAAUH,EAAQI,EAAU,CAChD,GAAI,OAAOJ,GAAW,SAAU,CAC5B,IAAIC,EAAUI,EAAOF,EAAUH,CAAM,EACrC,GAAIC,GAAW,KACX,OAAAG,GAAYA,EAAQ,EACbH,CAEnB,SAAe,OAAO,UAAU,SAAS,KAAKD,CAAM,IAAM,iBAAkB,CAEpE,QADIM,EAAS,CAAA,EACJC,EAAI,EAAGC,EAAIR,EAAO,OAAQO,EAAIC,EAAG,EAAED,EAAG,CAC3C,IAAIlK,EAAMgK,EAAOF,EAAUH,EAAOO,CAAC,CAAC,EACpC,GAAIlK,GAAO,MAAaoK,EAAQ,SAC5B,OACJH,EAAO,KAAKjK,CAAG,CAC3B,CACQ,OAAO+J,GAAYA,EAAS,MAAM,KAAME,CAAM,GAAK,EAC3D,CACA,EAEIG,EAAU,SAAST,EAAQI,EAAU,CACrC,IAAIM,EAAiBR,EAAS,GAAIF,EAAQI,CAAQ,EAClD,OAAIM,GAAkB,MAAaD,EAAQ,SAChCA,EAAQ,SAAS,MAAM,KAAM,SAAS,EAC1CC,CACX,EAEIC,EAAkB,SAASR,EAAUS,EAAY,CAEjD,GAAIA,EAAW,QAAQ,GAAG,IAAM,GAAI,CAChC,IAAIC,EAASD,EAAW,MAAM,GAAG,EACjC,OAAOD,EAAgBR,EAAUU,EAAO,CAAC,CAAC,EAAI,IAAMF,EAAgBR,EAAUU,EAAO,CAAC,CAAC,CAC/F,CAEI,GAAID,EAAW,OAAO,CAAC,GAAK,IAAK,CAC7B,IAAIE,EAAOX,EAAS,MAAM,GAAG,EAAE,MAAM,EAAG,EAAE,EAAE,KAAK,GAAG,EAGpD,IAFAS,EAAaE,EAAO,IAAMF,EAEpBA,EAAW,QAAQ,GAAG,IAAM,IAAMG,GAAYH,GAAY,CAC5D,IAAIG,EAAWH,EACfA,EAAaA,EAAW,QAAQ,SAAU,GAAG,EAAE,QAAQ,iBAAkB,EAAE,CACvF,CACA,CACI,OAAOA,CACX,EAMIP,EAAS,SAASF,EAAUS,EAAY,CACxCA,EAAaD,EAAgBR,EAAUS,CAAU,EAEjD,IAAIZ,EAASD,EAAO,QAAQa,CAAU,EACtC,GAAI,CAACZ,EAAQ,CAET,GADAA,EAASD,EAAO,SAASa,CAAU,EAC/B,OAAOZ,GAAW,WAAY,CAC9B,IAAIgB,EAAU,CAAA,EACVC,EAAM,CACN,GAAIL,EACJ,IAAK,GACL,QAASI,EACT,SAAU,EAC1B,EAEgBE,EAAM,SAASlB,EAAQI,EAAU,CACjC,OAAOF,EAASU,EAAYZ,EAAQI,CAAQ,CAC5D,EAEgBe,EAAcnB,EAAOkB,EAAKF,EAASC,CAAG,EAC1CD,EAAUG,GAAeF,EAAI,QAC7BlB,EAAO,QAAQa,CAAU,EAAII,EAC7B,OAAOjB,EAAO,SAASa,CAAU,CAC7C,CACQZ,EAASD,EAAO,QAAQa,CAAU,EAAII,GAAWhB,CACzD,CACI,OAAOA,CACX,EAEA,SAASoB,EAAUC,EAAI,CACnB,IAAIC,EAAOxB,EAEFA,EAAOuB,CAAE,IACVvB,EAAOuB,CAAE,EAAI,CAAA,GACjBC,EAAOxB,EAAOuB,CAAE,GAGhB,CAACC,EAAK,QAAU,CAACA,EAAK,OAAO,YAC7BvB,EAAO,SAAWuB,EAAK,OACvBA,EAAK,OAASvB,EACduB,EAAK,OAAO,SAAW,KAGvB,CAACA,EAAK,SAAW,CAACA,EAAK,QAAQ,YAC/Bb,EAAQ,SAAWa,EAAK,QACxBA,EAAK,QAAUb,EACfa,EAAK,QAAQ,SAAW,GAEhC,CAEAF,EAAUvB,CAAa,CAEvB,GAAC,EAED,IAAI,OAAO,mBAAmB,CAAC,UAAU,UAAU,QAAQ,EAAG,SAASY,EAASO,EAAShB,EAAO,CAAC,SAASuB,EAAW5K,EAAK6K,EAAMC,EAAK,CACjI,OAAO,eAAe9K,EAAK6K,EAAM,CAC7B,MAAOC,EACP,WAAY,GACZ,SAAU,GACV,aAAc,EACtB,CAAK,CACL,CACK,OAAO,UAAU,YAClBF,EAAW,OAAO,UAAW,aAAc,SAAUG,EAAcC,EAAU,CACzE,OAAAA,EAAWA,GAAY,EAChB,KAAK,YAAYD,EAAcC,CAAQ,IAAMA,CAC5D,CAAK,EAEA,OAAO,UAAU,UAClBJ,EAAW,OAAO,UAAW,WAAY,SAAUG,EAAcC,EAAU,CACvE,IAAIC,EAAgB,MAChBD,IAAa,QAAaA,EAAWC,EAAc,UACnDD,EAAWC,EAAc,QAE7BD,GAAYD,EAAa,OACzB,IAAIG,EAAYD,EAAc,QAAQF,EAAcC,CAAQ,EAC5D,OAAOE,IAAc,IAAMA,IAAcF,CACjD,CAAK,EAEA,OAAO,UAAU,QAClBJ,EAAW,OAAO,UAAW,SAAU,SAAUpE,EAAO,CAGpD,QAFI1G,EAAS,GACTqL,EAAS,KACN3E,EAAQ,GACPA,EAAQ,IACR1G,GAAUqL,IACT3E,IAAU,KACX2E,GAAUA,GAElB,OAAOrL,CACf,CAAK,EAEA,OAAO,UAAU,UAClB8K,EAAW,OAAO,UAAW,WAAY,SAAUQ,EAAKJ,EAAU,CAC9D,OAAO,KAAK,QAAQI,EAAKJ,CAAQ,GAAK,EAC9C,CAAK,EAEA,OAAO,SACR,OAAO,OAAS,SAAUK,EAAQ,CAC9B,GAA4BA,GAAW,KACnC,MAAM,IAAI,UAAU,4CAA4C,EAGpE,QADIC,EAAS,OAAOD,CAAM,EACjB/G,EAAQ,EAAGA,EAAQ,UAAU,OAAQA,IAAS,CACnD,IAAIyD,EAAS,UAAUzD,CAAK,EACAyD,GAAW,MACnC,OAAO,KAAKA,CAAM,EAAE,QAAQ,SAAUrC,EAAK,CACvC4F,EAAO5F,CAAG,EAAIqC,EAAOrC,CAAG,CAC5C,CAAiB,CAEjB,CACQ,OAAO4F,CACf,GAEK,OAAO,SACR,OAAO,OAAS,SAAUC,EAAG,CACzB,OAAO,OAAO,KAAKA,CAAC,EAAE,IAAI,SAAUC,EAAG,CACnC,OAAOD,EAAEC,CAAC,CACtB,CAAS,CACT,GAEK,MAAM,UAAU,MACjBZ,EAAW,MAAM,UAAW,OAAQ,SAAUa,EAAW,CAGrD,QAFIC,EAAM,KAAK,OACXC,EAAU,UAAU,CAAC,EAChBH,EAAI,EAAGA,EAAIE,EAAKF,IAAK,CAC1B,IAAII,EAAS,KAAKJ,CAAC,EACnB,GAAIC,EAAU,KAAKE,EAASC,EAAQJ,EAAG,IAAI,EACvC,OAAOI,CAEvB,CACA,CAAK,EAEA,MAAM,UAAU,WACjBhB,EAAW,MAAM,UAAW,YAAa,SAAUa,EAAW,CAG1D,QAFIC,EAAM,KAAK,OACXC,EAAU,UAAU,CAAC,EAChBH,EAAI,EAAGA,EAAIE,EAAKF,IAAK,CAC1B,IAAII,EAAS,KAAKJ,CAAC,EACnB,GAAIC,EAAU,KAAKE,EAASC,EAAQJ,EAAG,IAAI,EACvC,OAAOA,CAEvB,CACA,CAAK,EAEA,MAAM,UAAU,UACjBZ,EAAW,MAAM,UAAW,WAAY,SAAUiB,EAAMb,EAAU,CAC9D,OAAO,KAAK,QAAQa,EAAMb,CAAQ,GAAK,EAC/C,CAAK,EAEA,MAAM,UAAU,MACjBJ,EAAW,MAAM,UAAW,OAAQ,SAAUkB,EAAO,CAajD,QAZIC,EAAI,KACJL,EAAMK,EAAE,SAAW,EACnBC,EAAQ,UAAU,CAAC,EACnBC,EAAgBD,GAAS,EACzBR,EAAIS,EAAgB,EAClB,KAAK,IAAIP,EAAMO,EAAe,CAAC,EAC/B,KAAK,IAAIA,EAAeP,CAAG,EAC7BQ,EAAM,UAAU,CAAC,EACjBC,EAAcD,IAAQ,OAAYR,EAAMQ,GAAO,EAC/CE,EAAQD,EAAc,EACpB,KAAK,IAAIT,EAAMS,EAAa,CAAC,EAC7B,KAAK,IAAIA,EAAaT,CAAG,EACxBF,EAAIY,GACPL,EAAEP,CAAC,EAAIM,EACPN,IAEJ,OAAOO,CACf,CAAK,EAEA,MAAM,IACPnB,EAAW,MAAO,KAAM,UAAY,CAChC,OAAO,MAAM,UAAU,MAAM,KAAK,SAAS,CACnD,CAAK,CAGL,CAAC,EAED,IAAI,OAAO,yBAAyB,CAAC,UAAU,UAAU,SAAS,kBAAkB,EAAG,SAASd,EAASO,EAAShB,EAAO,CAEzHS,EAAQ,YAAY,CAEpB,CAAC,EAED,IAAI,OAAO,oBAAoB,CAAC,UAAU,UAAU,QAAQ,EAAG,SAASA,EAASO,EAAShB,EAAO,CAACgB,EAAQ,SAAW,SAASgC,EAASrM,EAAK,CACxI,GAAI,OAAOA,GAAQ,UAAY,CAACA,EAC5B,OAAOA,EACX,IAAIsM,EACJ,GAAI,MAAM,QAAQtM,CAAG,EAAG,CACpBsM,EAAO,CAAA,EACP,QAAS5G,EAAM,EAAGA,EAAM1F,EAAI,OAAQ0F,IAChC4G,EAAK5G,CAAG,EAAI2G,EAASrM,EAAI0F,CAAG,CAAC,EAEjC,OAAO4G,CACf,CACI,GAAI,OAAO,UAAU,SAAS,KAAKtM,CAAG,IAAM,kBACxC,OAAOA,EACXsM,EAAO,CAAA,EACP,QAAS5G,KAAO1F,EACZsM,EAAK5G,CAAG,EAAI2G,EAASrM,EAAI0F,CAAG,CAAC,EACjC,OAAO4G,CACX,CAEA,CAAC,EAED,IAAI,OAAO,eAAe,CAAC,UAAU,UAAU,SAAS,mBAAmB,EAAG,SAASxC,EAASO,EAAShB,EAAO,CAChHgB,EAAQ,KAAO,SAAU1C,EAAG,CACxB,OAAOA,EAAEA,EAAE,OAAS,CAAC,CACzB,EACA0C,EAAQ,cAAgB,SAAUc,EAAQ,CACtC,OAAOA,EAAO,MAAM,EAAE,EAAE,QAAO,EAAG,KAAK,EAAE,CAC7C,EACAd,EAAQ,aAAe,SAAUc,EAAQ3E,EAAO,CAE5C,QADI1G,EAAS,GACN0G,EAAQ,GACPA,EAAQ,IACR1G,GAAUqL,IACV3E,IAAU,KACV2E,GAAUA,GAElB,OAAOrL,CACX,EACA,IAAIyM,EAAkB,SAClBC,EAAgB,SACpBnC,EAAQ,eAAiB,SAAUc,EAAQ,CACvC,OAAOA,EAAO,QAAQoB,EAAiB,EAAE,CAC7C,EACAlC,EAAQ,gBAAkB,SAAUc,EAAQ,CACxC,OAAOA,EAAO,QAAQqB,EAAe,EAAE,CAC3C,EACAnC,EAAQ,WAAa,SAAUrK,EAAK,CAChC,IAAIsM,EAAO,CAAA,EACX,QAAS5G,KAAO1F,EACZsM,EAAK5G,CAAG,EAAI1F,EAAI0F,CAAG,EAEvB,OAAO4G,CACX,EACAjC,EAAQ,UAAY,SAAUoC,EAAO,CAEjC,QADIH,EAAO,CAAA,EACF1C,EAAI,EAAGC,EAAI4C,EAAM,OAAQ7C,EAAIC,EAAGD,IACjC6C,EAAM7C,CAAC,GAAK,OAAO6C,EAAM7C,CAAC,GAAK,SAC/B0C,EAAK1C,CAAC,EAAI,KAAK,WAAW6C,EAAM7C,CAAC,CAAC,EAElC0C,EAAK1C,CAAC,EAAI6C,EAAM7C,CAAC,EAEzB,OAAO0C,CACX,EACAjC,EAAQ,SAAWP,EAAQ,aAAa,EAAE,SAC1CO,EAAQ,WAAa,SAAUqC,EAAK,CAEhC,QADIC,EAAM,CAAA,EACD/C,EAAI,EAAGA,EAAI8C,EAAI,OAAQ9C,IAC5B+C,EAAID,EAAI9C,CAAC,CAAC,EAAI,EAElB,OAAO+C,CACX,EACAtC,EAAQ,UAAY,SAAUuC,EAAO,CACjC,IAAID,EAAM,OAAO,OAAO,IAAI,EAC5B,QAAS/C,KAAKgD,EACVD,EAAI/C,CAAC,EAAIgD,EAAMhD,CAAC,EAEpB,OAAO+C,CACX,EACAtC,EAAQ,YAAc,SAAUoC,EAAOX,EAAO,CAC1C,QAASlC,EAAI,EAAGA,GAAK6C,EAAM,OAAQ7C,IAC3BkC,IAAUW,EAAM7C,CAAC,GACjB6C,EAAM,OAAO7C,EAAG,CAAC,CAG7B,EACAS,EAAQ,aAAe,SAAUe,EAAK,CAClC,OAAOA,EAAI,QAAQ,0BAA2B,MAAM,CACxD,EACAf,EAAQ,WAAa,SAAUe,EAAK,CAChC,OAAQ,GAAKA,GAAK,QAAQ,KAAM,OAAO,EAAE,QAAQ,KAAM,OAAO,EAAE,QAAQ,KAAM,OAAO,EAAE,QAAQ,KAAM,OAAO,CAChH,EACAf,EAAQ,gBAAkB,SAAUc,EAAQ0B,EAAQ,CAChD,IAAIpI,EAAU,CAAA,EACd,OAAA0G,EAAO,QAAQ0B,EAAQ,SAAUzB,EAAK,CAClC3G,EAAQ,KAAK,CACT,OAAQ,UAAU,UAAU,OAAS,CAAC,EACtC,OAAQ2G,EAAI,MACxB,CAAS,CACT,CAAK,EACM3G,CACX,EACA4F,EAAQ,aAAe,SAAUyC,EAAK,CAClC,IAAIC,EAAQ,KACRtD,EAAW,UAAY,CACvBsD,EAAQ,KACRD,EAAG,CACX,EACQE,EAAW,SAAUC,EAAS,CAC9B,OAAAD,EAAS,OAAM,EACfD,EAAQ,WAAWtD,EAAUwD,GAAW,CAAC,EAClCD,CACf,EACI,OAAAA,EAAS,SAAWA,EACpBA,EAAS,KAAO,UAAY,CACxB,YAAK,OAAM,EACXF,EAAG,EACIE,CACf,EACIA,EAAS,OAAS,UAAY,CAC1B,oBAAaD,CAAK,EAClBA,EAAQ,KACDC,CACf,EACIA,EAAS,UAAY,UAAY,CAC7B,OAAOD,CACf,EACWC,CACX,EACA3C,EAAQ,YAAc,SAAUyC,EAAKI,EAAgB,CACjD,IAAIH,EAAQ,KACRtD,EAAW,UAAY,CACvBsD,EAAQ,KACRD,EAAG,CACX,EACQK,EAAQ,SAAUF,EAAS,CACvBF,GAAS,OACTA,EAAQ,WAAWtD,EAAUwD,GAAWC,CAAc,EAClE,EACI,OAAAC,EAAM,MAAQ,SAAUF,EAAS,CAC7BF,GAAS,aAAaA,CAAK,EAC3BA,EAAQ,WAAWtD,EAAUwD,GAAWC,CAAc,CAC9D,EACIC,EAAM,SAAWA,EACjBA,EAAM,KAAO,UAAY,CACrB,KAAK,OAAM,EACXL,EAAG,CACX,EACIK,EAAM,OAAS,UAAY,CACvBJ,GAAS,aAAaA,CAAK,EAC3BA,EAAQ,IAChB,EACII,EAAM,UAAY,UAAY,CAC1B,OAAOJ,CACf,EACWI,CACX,EACA9C,EAAQ,mBAAqB,UAAY,CACrC,GAAI,CACA,IAAI,OAAO,QAAQ,CAC3B,MACc,CACN,MAAO,EACf,CACI,MAAO,EACX,EACAA,EAAQ,eAAiB,SAAUhG,EAAM+I,EAAMC,EAAqB,CAChE,OAAOA,GAAuBhJ,EAAK,YAAY+I,CAAI,EAAI,MAAS,EAAI,CACxE,CAEA,CAAC,EAED,IAAI,OAAO,oBAAoB,CAAC,UAAU,UAAU,QAAQ,EAAG,SAAStD,EAASO,EAAShB,EAAO,CACjGgB,EAAQ,GAAK,CACT,MAAO,QACP,IAAK,MACL,QAAS,SACb,EACAA,EAAQ,MAAQ,UAAY,CACxB,OAAIA,EAAQ,MACDA,EAAQ,GAAG,IAEbA,EAAQ,QACNA,EAAQ,GAAG,MAGXA,EAAQ,GAAG,OAE1B,EACA,IAAIiD,EAAa,OAAO,WAAa,SAAW,UAAY,CAAA,EACxDC,GAAM,iBAAiB,KAAKD,EAAW,QAAQ,GAAK,CAAC,OAAO,GAAG,CAAC,EAAE,YAAW,EAC7EE,EAAKF,EAAW,WAAa,GAC7BG,EAAUH,EAAW,SAAW,GACpCjD,EAAQ,MAASkD,GAAM,MACvBlD,EAAQ,MAASkD,GAAM,MACvBlD,EAAQ,QAAWkD,GAAM,QACzBlD,EAAQ,KACHoD,GAAW,+BAAiCA,EAAQ,QAAQ,WAAW,GAAK,EACvE,YAAYD,EAAG,MAAM,yDAAyD,GAAK,CAAA,GAAI,CAAC,CAAC,EACzF,YAAYA,EAAG,MAAM,mDAAmD,GAAK,CAAA,GAAI,CAAC,CAAC,EAC7FnD,EAAQ,QAAUA,EAAQ,MAAQA,EAAQ,KAAO,EACjDA,EAAQ,QAAUA,EAAQ,UAAYmD,EAAG,MAAM,aAAa,EAC5DnD,EAAQ,QAAU,OAAO,OAAS,UAAY,OAAO,UAAU,SAAS,KAAK,OAAO,KAAQ,GAAK,iBACjGA,EAAQ,SAAW,WAAWmD,EAAG,MAAM,SAAS,EAAE,CAAC,CAAC,GAAK,OACzDnD,EAAQ,SAAW,WAAWmD,EAAG,MAAM,UAAU,EAAE,CAAC,CAAC,GAAK,OAC1DnD,EAAQ,SAAW,WAAWmD,EAAG,MAAM,UAAU,EAAE,CAAC,CAAC,GAAK,CAACnD,EAAQ,UAAY,OAC/EA,EAAQ,OAAS,WAAWmD,EAAG,MAAM,QAAQ,EAAE,CAAC,CAAC,GAAK,OACtDnD,EAAQ,MAAQmD,EAAG,QAAQ,UAAU,GAAK,EAC1CnD,EAAQ,UAAYmD,EAAG,QAAQ,SAAS,GAAK,EAC7CnD,EAAQ,WAAamD,EAAG,QAAQ,QAAQ,GAAK,EAC7CnD,EAAQ,MAAQ,mBAAmB,KAAKmD,CAAE,GAAK,CAAC,OAAO,SACnDnD,EAAQ,QACRA,EAAQ,MAAQ,IACpBA,EAAQ,SAAWA,EAAQ,OAASA,EAAQ,SAE5C,CAAC,EAED,IAAI,OAAO,cAAc,CAAC,UAAU,UAAU,SAAS,mBAAmB,EAAG,SAASP,EAASO,EAAShB,EAAO,CAC/G,IAAIqE,EAAY5D,EAAQ,aAAa,EACjC6D,EAAW,+BACftD,EAAQ,SAAW,SAASuD,EAASlB,EAAKmB,EAAQC,EAAM,CACpD,GAAI,OAAOpB,GAAO,UAAYA,EAAK,CAC/B,IAAIqB,EAAM,SAAS,eAAerB,CAAG,EACrC,OAAImB,GACAA,EAAO,YAAYE,CAAG,EACnBA,CACf,CACI,GAAI,CAAC,MAAM,QAAQrB,CAAG,EAClB,OAAIA,GAAOA,EAAI,aAAemB,GAC1BA,EAAO,YAAYnB,CAAG,EACnBA,EAEX,GAAI,OAAOA,EAAI,CAAC,GAAK,UAAY,CAACA,EAAI,CAAC,EAAG,CAEtC,QADIsB,EAAM,CAAA,EACDpE,EAAI,EAAGA,EAAI8C,EAAI,OAAQ9C,IAAK,CACjC,IAAIlI,EAAKkM,EAASlB,EAAI9C,CAAC,EAAGiE,EAAQC,CAAI,EACtCpM,GAAMsM,EAAI,KAAKtM,CAAE,CAC7B,CACQ,OAAOsM,CACf,CACI,IAAIC,EAAK,SAAS,cAAcvB,EAAI,CAAC,CAAC,EAClCnN,EAAUmN,EAAI,CAAC,EACfwB,EAAa,EACb3O,GAAW,OAAOA,GAAW,UAAY,CAAC,MAAM,QAAQA,CAAO,IAC/D2O,EAAa,GACjB,QAAStE,EAAIsE,EAAYtE,EAAI8C,EAAI,OAAQ9C,IACrCgE,EAASlB,EAAI9C,CAAC,EAAGqE,EAAIH,CAAI,EAC7B,OAAII,GAAc,GACd,OAAO,KAAK3O,CAAO,EAAE,QAAQ,SAAU4O,EAAG,CACtC,IAAIrD,EAAMvL,EAAQ4O,CAAC,EACfA,IAAM,QACNF,EAAG,UAAY,MAAM,QAAQnD,CAAG,EAAIA,EAAI,KAAK,GAAG,EAAIA,EAE/C,OAAOA,GAAO,YAAcqD,GAAK,SAAWA,EAAE,CAAC,GAAK,IACzDF,EAAGE,CAAC,EAAIrD,EAEHqD,IAAM,MACPL,IACAA,EAAKhD,CAAG,EAAImD,GAEXE,IAAM,QACP,OAAOrD,GAAO,WACdmD,EAAG,MAAM,QAAUnD,GAElBA,GAAO,MACZmD,EAAG,aAAaE,EAAGrD,CAAG,CAEtC,CAAS,EAED+C,GACAA,EAAO,YAAYI,CAAE,EAClBA,CACX,EACA5D,EAAQ,gBAAkB,SAAU+D,EAAK,CACrC,OAAKA,IACDA,EAAM,UACHA,EAAI,MAAQA,EAAI,qBAAqB,MAAM,EAAE,CAAC,GAAKA,EAAI,eAClE,EACA/D,EAAQ,cAAgB,SAAUgE,EAAK3D,EAAI,CACvC,OAAO,SAAS,gBAAkB,SAAS,gBAAgBA,GAAMiD,EAAUU,CAAG,EAAI,SAAS,cAAcA,CAAG,CAChH,EACAhE,EAAQ,eAAiB,SAAUiE,EAAS,CACxCA,EAAQ,UAAY,EACxB,EACAjE,EAAQ,eAAiB,SAAUkE,EAAaD,EAAS,CACrD,IAAIF,EAAME,EAAUA,EAAQ,cAAgB,SAC5C,OAAOF,EAAI,eAAeG,CAAW,CACzC,EACAlE,EAAQ,eAAiB,SAAUiE,EAAS,CACxC,IAAIF,EAAME,EAAUA,EAAQ,cAAgB,SAC5C,OAAOF,EAAI,uBAAsB,CACrC,EACA/D,EAAQ,YAAc,SAAU4D,EAAIpD,EAAM,CACtC,IAAI2D,GAAWP,EAAG,UAAY,IAAI,MAAM,MAAM,EAC9C,OAAOO,EAAQ,QAAQ3D,CAAI,IAAM,EACrC,EACAR,EAAQ,YAAc,SAAU4D,EAAIpD,EAAM,CACjCR,EAAQ,YAAY4D,EAAIpD,CAAI,IAC7BoD,EAAG,WAAa,IAAMpD,EAE9B,EACAR,EAAQ,eAAiB,SAAU4D,EAAIpD,EAAM,CAEzC,QADI2D,EAAUP,EAAG,UAAU,MAAM,MAAM,IAC1B,CACT,IAAI3J,EAAQkK,EAAQ,QAAQ3D,CAAI,EAChC,GAAIvG,GAAS,GACT,MAEJkK,EAAQ,OAAOlK,EAAO,CAAC,CAC/B,CACI2J,EAAG,UAAYO,EAAQ,KAAK,GAAG,CACnC,EACAnE,EAAQ,eAAiB,SAAU4D,EAAIpD,EAAM,CAEzC,QADI2D,EAAUP,EAAG,UAAU,MAAM,MAAM,EAAGQ,EAAM,KACnC,CACT,IAAInK,EAAQkK,EAAQ,QAAQ3D,CAAI,EAChC,GAAIvG,GAAS,GACT,MAEJmK,EAAM,GACND,EAAQ,OAAOlK,EAAO,CAAC,CAC/B,CACI,OAAImK,GACAD,EAAQ,KAAK3D,CAAI,EACrBoD,EAAG,UAAYO,EAAQ,KAAK,GAAG,EACxBC,CACX,EACApE,EAAQ,YAAc,SAAUqE,EAAMC,EAAWC,EAAS,CAClDA,EACAvE,EAAQ,YAAYqE,EAAMC,CAAS,EAGnCtE,EAAQ,eAAeqE,EAAMC,CAAS,CAE9C,EACAtE,EAAQ,aAAe,SAAUnJ,EAAIkN,EAAK,CACtC,IAAI9J,EAAQ,EAAGuK,EAEf,GADAT,EAAMA,GAAO,SACRS,EAAST,EAAI,iBAAiB,OAAO,GACtC,KAAO9J,EAAQuK,EAAO,QAClB,GAAIA,EAAOvK,GAAO,EAAE,KAAOpD,EACvB,MAAO,GAIvB,EACAmJ,EAAQ,kBAAoB,SAAUnJ,EAAIkN,EAAK,CAC3CA,EAAMA,GAAO,SACTA,EAAI,eAAelN,CAAE,GACrBkN,EAAI,eAAelN,CAAE,EAAE,OAAM,CAErC,EACA,IAAI4N,EACAC,EAAW,CAAA,EACf1E,EAAQ,aAAe,SAAUyB,EAAO,CACpCgD,EAAYhD,EACRA,GAAS,GACTkD,EAAmB,EACbD,IACNA,EAAW,CAAA,EACnB,EACA,SAASC,GAAsB,CAC3B,IAAIC,EAAQF,EACZA,EAAW,KACXE,GAASA,EAAM,QAAQ,SAAUpD,EAAM,CACnCqD,EAAgBrD,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,CACxC,CAAK,CACL,CACA,SAASqD,EAAgBC,EAASjO,EAAImK,EAAQ,CAC1C,GAAI,SAAO,SAAY,KAEvB,IAAI0D,GACA,GAAI1D,EACA2D,EAAmB,UAEd3D,IAAW,GAChB,OAAO0D,EAAS,KAAK,CAACI,EAASjO,CAAE,CAAC,EAG1C,GAAI,CAAA4N,EAEJ,KAAIM,EAAY/D,EACZ,CAACA,GAAU,CAACA,EAAO,YACnB+D,EAAY,UAGZA,EAAY/D,EAAO,YAAW,GAC1B,CAAC+D,GAAaA,GAAa/D,KAC3B+D,EAAY,WAEpB,IAAIhB,EAAMgB,EAAU,eAAiBA,EACrC,GAAIlO,GAAMmJ,EAAQ,aAAanJ,EAAIkO,CAAS,EACxC,OAAO,KACPlO,IACAiO,GAAW;AAAA,wBAA6BjO,EAAK,OACjD,IAAI8H,EAAQqB,EAAQ,cAAc,OAAO,EACzCrB,EAAM,YAAYoF,EAAI,eAAee,CAAO,CAAC,EACzCjO,IACA8H,EAAM,GAAK9H,GACXkO,GAAahB,IACbgB,EAAY/E,EAAQ,gBAAgB+D,CAAG,GAC3CgB,EAAU,aAAapG,EAAOoG,EAAU,UAAU,GACtD,CAgFA,GA/EA/E,EAAQ,gBAAkB6E,EAC1B7E,EAAQ,mBAAqB,SAAUgF,EAAKjB,EAAK,CAC7C/D,EAAQ,SAAS,CAAC,OAAQ,CAAE,IAAK,aAAc,KAAMgF,CAAG,CAAE,EAAGhF,EAAQ,gBAAgB+D,CAAG,CAAC,CAC7F,EACA/D,EAAQ,gBAAkB,SAAU4D,EAAI,CACpC,IAAIqB,EAAOrB,EAAG,sBAAqB,EACnC,GAAIA,EAAG,MAAM,KAAM,CACf,IAAI5C,EAAS,WAAW4C,EAAG,MAAM,IAAI,EACjCnO,EAAS,CAACwP,EAAK,KACf,KAAK,IAAIjE,EAASvL,CAAM,EAAI,IAC5BmO,EAAG,MAAM,KAAO,EAAI5C,EAASvL,EAAS,KAElD,CACI,GAAImO,EAAG,MAAM,MAAO,CAChB,IAAI5C,EAAS,WAAW4C,EAAG,MAAM,KAAK,EAClCnO,EAAS,OAAO,WAAawP,EAAK,MAClC,KAAK,IAAIjE,EAASvL,CAAM,EAAI,IAC5BmO,EAAG,MAAM,MAAQ,EAAI5C,EAASvL,EAAS,KAEnD,CACI,GAAImO,EAAG,MAAM,IAAK,CACd,IAAI5C,EAAS,WAAW4C,EAAG,MAAM,GAAG,EAChCnO,EAAS,CAACwP,EAAK,IACf,KAAK,IAAIjE,EAASvL,CAAM,EAAI,IAC5BmO,EAAG,MAAM,IAAM,EAAI5C,EAASvL,EAAS,KAEjD,CACI,GAAImO,EAAG,MAAM,OAAQ,CACjB,IAAI5C,EAAS,WAAW4C,EAAG,MAAM,MAAM,EACnCnO,EAAS,OAAO,YAAcwP,EAAK,OACnC,KAAK,IAAIjE,EAASvL,CAAM,EAAI,IAC5BmO,EAAG,MAAM,OAAS,EAAI5C,EAASvL,EAAS,KAEpD,CACA,EACAuK,EAAQ,eAAiB,SAAU+D,EAAK,CACpC,IAAImB,EAAQlF,EAAQ,cAAc,WAAW,EAC7CkF,EAAM,MAAM,MAAQ,OACpBA,EAAM,MAAM,SAAW,MACvBA,EAAM,MAAM,OAAS,QACrBA,EAAM,MAAM,QAAU,QACtB,IAAIC,EAAQnF,EAAQ,cAAc,WAAW,EACzCrB,EAAQwG,EAAM,MAClBxG,EAAM,SAAW,WACjBA,EAAM,KAAO,WACbA,EAAM,SAAW,SACjBA,EAAM,MAAQ,QACdA,EAAM,SAAW,MACjBA,EAAM,OAAS,QACfA,EAAM,QAAU,QAChBwG,EAAM,YAAYD,CAAK,EACvB,IAAIE,EAAQrB,GAAOA,EAAI,iBAAqB,UAAY,SAAS,gBACjE,GAAI,CAACqB,EACD,MAAO,GACXA,EAAK,YAAYD,CAAK,EACtB,IAAIE,EAAcH,EAAM,YACxBvG,EAAM,SAAW,SACjB,IAAI2G,EAAgBJ,EAAM,YAC1B,OAAIG,IAAgBC,IAChBA,EAAgBH,EAAM,aAE1BC,EAAK,YAAYD,CAAK,EACfE,EAAcC,CACzB,EACAtF,EAAQ,cAAgB,SAAUiE,EAAStF,EAAO,CAC9C,OAAO,OAAO,iBAAiBsF,EAAS,EAAE,GAAK,CAAA,CACnD,EACAjE,EAAQ,SAAW,SAAUuF,EAAQC,EAAU/D,EAAO,CAC9C8D,EAAOC,CAAQ,IAAM/D,IACrB8D,EAAOC,CAAQ,EAAI/D,EAE3B,EACAzB,EAAQ,kBAAoB,GAC5BA,EAAQ,mBAAqB,GAC7BA,EAAQ,OAASqD,EAAU,MACrB,OAAO,OAAW,KAAe,OAAO,kBAAoB,IAC5D,GACFA,EAAU,aACVrD,EAAQ,OAAS,IACjB,OAAO,SAAa,IAAa,CACjC,IAAIyF,EAAM,SAAS,cAAc,KAAK,EAClCzF,EAAQ,QAAUyF,EAAI,MAAM,YAAc,SAC1CzF,EAAQ,mBAAqB,IAC7B,CAACqD,EAAU,QAAU,OAAOoC,EAAI,MAAM,cAAkB,MACxDzF,EAAQ,kBAAoB,IAChCyF,EAAM,IACV,CACIzF,EAAQ,mBACRA,EAAQ,UAAY,SAAUiE,EAASyB,EAAIC,EAAI,CAC3C1B,EAAQ,MAAM,UAAY,aAAe,KAAK,MAAMyB,CAAE,EAAI,OAAS,KAAK,MAAMC,CAAE,EAAI,KAC5F,EAGI3F,EAAQ,UAAY,SAAUiE,EAASyB,EAAIC,EAAI,CAC3C1B,EAAQ,MAAM,IAAM,KAAK,MAAM0B,CAAE,EAAI,KACrC1B,EAAQ,MAAM,KAAO,KAAK,MAAMyB,CAAE,EAAI,IAC9C,CAGA,CAAC,EAED,IAAI,OAAO,cAAc,CAAC,UAAU,UAAU,SAAS,aAAa,EAAG,SAASjG,EAASO,EAAShB,EAAO,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQzG,IAAI4G,EAAMnG,EAAQ,OAAO,EACzBO,EAAQ,IAAM,SAAU6F,EAAKzG,EAAU,CACnC,IAAI0G,EAAM,IAAI,eACdA,EAAI,KAAK,MAAOD,EAAK,EAAI,EACzBC,EAAI,mBAAqB,UAAY,CAC7BA,EAAI,aAAe,GACnB1G,EAAS0G,EAAI,YAAY,CAErC,EACIA,EAAI,KAAK,IAAI,CACjB,EACA9F,EAAQ,WAAa,SAAU+F,EAAM3G,EAAU,CAC3C,IAAI4G,EAAOJ,EAAI,gBAAe,EAC1BK,EAAI,SAAS,cAAc,QAAQ,EACvCA,EAAE,IAAMF,EACRC,EAAK,YAAYC,CAAC,EAClBA,EAAE,OAASA,EAAE,mBAAqB,SAAUC,EAAGC,EAAS,EAChDA,GAAW,CAACF,EAAE,YAAcA,EAAE,YAAc,UAAYA,EAAE,YAAc,cACxEA,EAAIA,EAAE,OAASA,EAAE,mBAAqB,KACjCE,GACD/G,EAAQ,EAExB,CACA,EACAY,EAAQ,WAAa,SAAU6F,EAAK,CAChC,IAAIvI,EAAI,SAAS,cAAc,GAAG,EAClC,OAAAA,EAAE,KAAOuI,EACFvI,EAAE,IACb,CAEA,CAAC,EAED,IAAI,OAAO,cAAc,CAAC,UAAU,UAAU,QAAQ,EAAG,SAASmC,EAASO,EAAShB,EAAO,CAC3FgB,EAAQ,SAAW,SAAUoG,EAAMC,EAAW,CAC1CD,EAAK,OAASC,EACdD,EAAK,UAAY,OAAO,OAAOC,EAAU,UAAW,CAChD,YAAa,CACT,MAAOD,EACP,WAAY,GACZ,SAAU,GACV,aAAc,GAE1B,CAAK,CACL,EACApG,EAAQ,MAAQ,SAAUrK,EAAK2Q,EAAO,CAClC,QAASjL,KAAOiL,EACZ3Q,EAAI0F,CAAG,EAAIiL,EAAMjL,CAAG,EAExB,OAAO1F,CACX,EACAqK,EAAQ,UAAY,SAAUuG,EAAOD,EAAO,CACxCtG,EAAQ,MAAMuG,EAAOD,CAAK,CAC9B,CAEA,CAAC,EAED,IAAI,OAAO,wBAAwB,CAAC,UAAU,UAAU,QAAQ,EAAG,SAAS7G,EAASO,EAAShB,EAAO,CACrG,IAAIwH,EAAe,CAAA,EACfC,EAAkB,UAAY,CAAE,KAAK,mBAAqB,EAAK,EAC/DC,EAAiB,UAAY,CAAE,KAAK,iBAAmB,EAAK,EAChEF,EAAa,MACTA,EAAa,eAAiB,SAAUG,EAAWlQ,EAAG,CAClD,KAAK,iBAAmB,KAAK,eAAiB,CAAA,GAC9C,KAAK,mBAAqB,KAAK,iBAAmB,CAAA,GAClD,IAAImQ,EAAY,KAAK,eAAeD,CAAS,GAAK,CAAA,EAC9CE,EAAiB,KAAK,iBAAiBF,CAAS,EACpD,GAAI,GAACC,EAAU,QAAU,CAACC,GAE1B,EAAI,OAAOpQ,GAAK,UAAY,CAACA,KACzBA,EAAI,CAAA,GACHA,EAAE,OACHA,EAAE,KAAOkQ,GACRlQ,EAAE,kBACHA,EAAE,gBAAkBgQ,GACnBhQ,EAAE,iBACHA,EAAE,eAAiBiQ,GACvBE,EAAYA,EAAU,MAAK,EAC3B,QAASrH,EAAI,EAAGA,EAAIqH,EAAU,SAC1BA,EAAUrH,CAAC,EAAE9I,EAAG,IAAI,EAChB,CAAAA,EAAE,oBAF4B8I,IAElC,CAGJ,GAAIsH,GAAkB,CAACpQ,EAAE,iBACrB,OAAOoQ,EAAepQ,EAAG,IAAI,EACzC,EACA+P,EAAa,QAAU,SAAUG,EAAWlQ,EAAG,CAC3C,IAAImQ,GAAa,KAAK,gBAAkB,CAAA,GAAID,CAAS,EACrD,GAAKC,EAEL,CAAAA,EAAYA,EAAU,MAAK,EAC3B,QAASrH,EAAI,EAAGA,EAAIqH,EAAU,OAAQrH,IAClCqH,EAAUrH,CAAC,EAAE9I,EAAG,IAAI,EAC5B,EACA+P,EAAa,KAAO,SAAUG,EAAWvH,EAAU,CAC/C,IAAI0D,EAAQ,KAKZ,GAJA,KAAK,GAAG6D,EAAW,SAASG,GAAc,CACtChE,EAAM,IAAI6D,EAAWG,CAAW,EAChC1H,EAAS,MAAM,KAAM,SAAS,CACtC,CAAK,EACG,CAACA,EACD,OAAO,IAAI,QAAQ,SAAU5G,EAAS,CAClC4G,EAAW5G,CACvB,CAAS,CAET,EACAgO,EAAa,kBAAoB,SAAUG,EAAWvH,EAAU,CAC5D,IAAIlJ,EAAW,KAAK,iBAGpB,GAFKA,IACDA,EAAW,KAAK,iBAAmB,CAAE,WAAY,CAAA,CAAE,GACnDA,EAASyQ,CAAS,EAAG,CACrB,IAAII,EAAM7Q,EAASyQ,CAAS,EACxBK,EAAW9Q,EAAS,WAAWyQ,CAAS,EACvCK,IACD9Q,EAAS,WAAWyQ,CAAS,EAAIK,EAAW,CAAA,GAChDA,EAAS,KAAKD,CAAG,EACjB,IAAIxH,EAAIyH,EAAS,QAAQ5H,CAAQ,EAC7BG,GAAK,IACLyH,EAAS,OAAOzH,EAAG,CAAC,CAChC,CACIrJ,EAASyQ,CAAS,EAAIvH,CAC1B,EACAoH,EAAa,qBAAuB,SAAUG,EAAWvH,EAAU,CAC/D,IAAIlJ,EAAW,KAAK,iBACpB,GAAKA,EAEL,KAAI8Q,EAAW9Q,EAAS,WAAWyQ,CAAS,EAC5C,GAAIzQ,EAASyQ,CAAS,GAAKvH,EACnB4H,GACA,KAAK,kBAAkBL,EAAWK,EAAS,IAAG,CAAE,UAE/CA,EAAU,CACf,IAAIzH,EAAIyH,EAAS,QAAQ5H,CAAQ,EAC7BG,GAAK,IACLyH,EAAS,OAAOzH,EAAG,CAAC,CAChC,EACA,EACAiH,EAAa,GACTA,EAAa,iBAAmB,SAAUG,EAAWvH,EAAU6H,EAAW,CACtE,KAAK,eAAiB,KAAK,gBAAkB,CAAA,EAC7C,IAAIL,EAAY,KAAK,eAAeD,CAAS,EAC7C,OAAKC,IACDA,EAAY,KAAK,eAAeD,CAAS,EAAI,CAAA,GAC7CC,EAAU,QAAQxH,CAAQ,GAAK,IAC/BwH,EAAUK,EAAY,UAAY,MAAM,EAAE7H,CAAQ,EAC/CA,CACf,EACAoH,EAAa,IACTA,EAAa,eACTA,EAAa,oBAAsB,SAAUG,EAAWvH,EAAU,CAC9D,KAAK,eAAiB,KAAK,gBAAkB,CAAA,EAC7C,IAAIwH,EAAY,KAAK,eAAeD,CAAS,EAC7C,GAAKC,EAEL,KAAI3M,EAAQ2M,EAAU,QAAQxH,CAAQ,EAClCnF,IAAU,IACV2M,EAAU,OAAO3M,EAAO,CAAC,EACzC,EACAuM,EAAa,mBAAqB,SAAUG,EAAW,CAC9CA,IACD,KAAK,eAAiB,KAAK,iBAAmB,QAC9C,KAAK,iBACL,KAAK,eAAeA,CAAS,EAAI,QACjC,KAAK,mBACL,KAAK,iBAAiBA,CAAS,EAAI,OAC3C,EACA3G,EAAQ,aAAewG,CAEvB,CAAC,EAED,IAAI,OAAO,uBAAuB,CAAC,UAAU,UAAU,QAAQ,EAAG,SAAS/G,EAASO,EAAShB,EAAO,CAACgB,EAAQ,YAAc,SAAqBkH,EAAKrP,EAAM,CACvJ,IAAIpB,EAAI,IAAI,MAAMyQ,CAAG,EACrBzQ,EAAE,KAAUoB,EACR,OAAO,SAAW,UAAY,QAAQ,OACtC,QAAQ,MAAMpB,CAAC,EACnB,WAAW,UAAY,CAAE,MAAMA,CAAE,CAAE,CACvC,CAEA,CAAC,EAED,IAAI,OAAO,mCAAmC,CAAC,UAAU,UAAU,QAAQ,EAAG,SAASgJ,EAASO,EAAShB,EAAO,CAAC,IAAImI,EAAyB,CAC1I,0CAA2C,2BAC3C,gCAAiC,2BACjC,+CAAgD,OAChD,uBAAwB,aACxB,uCAAwC,SACxC,6BAA8B,qEAC9B,qCAAsC,gBACtC,2BAA4B,8FAC5B,0BAA2B,cAC3B,uBAAwB,gBACxB,wBAAyB,iBACzB,8BAA+B,uBAC/B,8BAA+B,aAC/B,2BAA4B,MAC5B,iCAAkC,eAClC,+BAAgC,UAChC,8BAA+B,MAC/B,kCAAmC,sBACnC,iCAAkC,gBAClC,+BAAgC,uBAChC,qCAAsC,oBACtC,uCAAwC,sBACxC,4BAA6B,WAC7B,kCAAmC,SACnC,wBAAyB,mBACzB,uCAAwC,0CACxC,wCAAyC,0CACzC,sCAAuC,8BACvC,mCAAoC,cACpC,iCAAkC,YAClC,qCAAsC,iCACtC,uCAAwC,mCACxC,oCAAqC,gCACrC,2BAA4B,cAC5B,2CAA4C,QAC5C,yCAA0C,SAC1C,6CAA8C,UAC9C,2CAA4C,WAC5C,0CAA2C,sBAC3C,wCAAyC,uBACzC,wCAAyC,4CACzC,oCAAqC,sCACrC,8CAA+C,mBAC/C,4CAA6C,oBAC7C,0CAA2C,aAC3C,wCAAyC,cACzC,iCAAkC,qBACtC,EACAnH,EAAQ,uBAAyBmH,CAEjC,CAAC,EAED,IAAI,OAAO,qBAAqB,CAAC,UAAU,UAAU,SAAS,cAAc,wBAAwB,uBAAuB,kCAAkC,EAAG,SAAS1H,EAASO,EAAShB,EAAO,CAAC,gBACnM,IAAIoI,EAAM3H,EAAQ,OAAO,EACrB+G,EAAe/G,EAAQ,iBAAiB,EAAE,aAC1C4H,EAAc5H,EAAQ,gBAAgB,EAAE,YACxC0H,EAAyB1H,EAAQ,4BAA4B,EAAE,uBAC/D6H,EAAkB,CAClB,WAAY,SAAUC,EAAS,CAC3B,OAAO,KAAKA,CAAO,EAAE,QAAQ,SAAUlM,EAAK,CACxC,KAAK,UAAUA,EAAKkM,EAAQlM,CAAG,CAAC,CAC5C,EAAW,IAAI,CACf,EACI,WAAY,SAAUmM,EAAa,CAC/B,IAAI/R,EAAS,CAAA,EACb,GAAK+R,EAMK,MAAM,QAAQA,CAAW,IAC/BA,EAAc,OAAO,KAAKA,CAAW,OAPvB,CACd,IAAItS,EAAU,KAAK,SACnBsS,EAAc,OAAO,KAAKtS,CAAO,EAAE,OAAO,SAAUmG,EAAK,CACrD,MAAO,CAACnG,EAAQmG,CAAG,EAAE,MACrC,CAAa,CACb,CAIQ,OAAAmM,EAAY,QAAQ,SAAUnM,EAAK,CAC/B5F,EAAO4F,CAAG,EAAI,KAAK,UAAUA,CAAG,CAC5C,EAAW,IAAI,EACA5F,CACf,EACI,UAAW,SAAU+K,EAAMiB,EAAO,CAC9B,GAAI,KAAK,IAAMjB,CAAI,IAAMiB,EAEzB,KAAIgG,EAAM,KAAK,SAASjH,CAAI,EAC5B,GAAI,CAACiH,EACD,OAAOC,EAAK,sBAAwBlH,EAAO,GAAG,EAElD,GAAIiH,EAAI,UACJ,OAAO,KAAKA,EAAI,SAAS,GAAK,KAAKA,EAAI,SAAS,EAAE,UAAUjH,EAAMiB,CAAK,EACtEgG,EAAI,aACL,KAAK,IAAMjH,CAAI,EAAIiB,GACnBgG,GAAOA,EAAI,KACXA,EAAI,IAAI,KAAK,KAAMhG,CAAK,EACpC,EACI,UAAW,SAAUjB,EAAM,CACvB,IAAIiH,EAAM,KAAK,SAASjH,CAAI,EAC5B,OAAKiH,EAGDA,EAAI,UACG,KAAKA,EAAI,SAAS,GAAK,KAAKA,EAAI,SAAS,EAAE,UAAUjH,CAAI,EAC7DiH,GAAOA,EAAI,IAAMA,EAAI,IAAI,KAAK,IAAI,EAAI,KAAK,IAAMjH,CAAI,EAJjDkH,EAAK,sBAAwBlH,EAAO,GAAG,CAK1D,CACA,EACA,SAASkH,EAAKxK,EAAS,CACf,OAAO,QAAW,KAAe,QAAQ,MACzC,QAAQ,KAAK,MAAM,QAAS,SAAS,CAC7C,CACA,IAAIyK,EACAC,EACAC,EAA2B,UAAY,CACvC,SAASA,GAAY,CACjB,KAAK,gBAAkB,CAAA,EACvBF,EAAWR,EACXS,EAAkB,aAC1B,CACI,OAAAC,EAAU,UAAU,cAAgB,SAAUlS,EAAKoQ,EAAM7Q,EAAS,CAC9D,OAAKS,EAAI,WACL,KAAK,gBAAgBoQ,CAAI,EAAIpQ,EAAI,SAAW,CAAA,GAChD,OAAO,KAAKT,CAAO,EAAE,QAAQ,SAAUmG,EAAK,CACxC,IAAIoM,EAAMvS,EAAQmG,CAAG,EACjB,OAAOoM,GAAO,WACdA,EAAM,CAAE,UAAWA,CAAG,GAC1BA,EAAI,OAASA,EAAI,KAAOpM,GACxB1F,EAAI,SAAS8R,EAAI,IAAI,EAAIA,EACrB,iBAAkBA,IAClB9R,EAAI,IAAM8R,EAAI,IAAI,EAAIA,EAAI,aAC1C,CAAS,EACDL,EAAI,UAAUzR,EAAK2R,CAAe,EAC3B,IACf,EACIO,EAAU,UAAU,aAAe,SAAUlS,EAAK,CAC9C,OAAO,KAAKA,EAAI,QAAQ,EAAE,QAAQ,SAAU0F,EAAK,CAC7C,IAAIoM,EAAM9R,EAAI,SAAS0F,CAAG,EACtB,UAAWoM,GACX9R,EAAI,UAAU0F,EAAKoM,EAAI,KAAK,CAC5C,CAAS,CACT,EACII,EAAU,UAAU,gBAAkB,SAAU9B,EAAMvF,EAAMiB,EAAO,CAC/D,GAAI,CAACsE,EAAM,CACP,IAAKA,KAAQ,KAAK,gBACd,GAAI,KAAK,gBAAgBA,CAAI,EAAEvF,CAAI,EAC/B,MACR,GAAI,CAAC,KAAK,gBAAgBuF,CAAI,EAAEvF,CAAI,EAChC,MAAO,EACvB,CACQ,IAAIsH,EAAO,KAAK,gBAAgB/B,CAAI,IAAM,KAAK,gBAAgBA,CAAI,EAAI,IACnE+B,EAAKtH,CAAI,IACLsH,EAAK,UACL,KAAK,gBAAgBA,EAAK,UAAWtH,EAAMiB,CAAK,EAEhDqG,EAAKtH,CAAI,EAAE,MAAQiB,EAEnC,EACIoG,EAAU,UAAU,iBAAmB,SAAU9B,EAAMgC,EAAY,CAC/D,OAAO,KAAKA,CAAU,EAAE,QAAQ,SAAU1M,EAAK,CAC3C,KAAK,gBAAgB0K,EAAM1K,EAAK0M,EAAW1M,CAAG,CAAC,CAC3D,EAAW,IAAI,CACf,EACIwM,EAAU,UAAU,YAAc,SAAUpG,EAAOvM,EAAS,CACxDyS,EAAWlG,EACPvM,GAAWA,EAAQ,eACnB0S,EAAkB1S,EAAQ,aAEtC,EACI2S,EAAU,UAAU,IAAM,SAAUxM,EAAK2M,EAAe1I,EAAQ,CACvDqI,EAAStM,CAAG,IACbqM,EAAK,iCAAmCrM,EAAM,yBAA2BsM,EAAS,IAAM,0DAA4DK,EAAgB,IAAI,EACnKL,EAASK,CAAa,GACvBN,EAAK,4CAA8CM,EAAgB,0EAA0E,GAGrJ,IAAIC,EAAaN,EAAStM,CAAG,GAAKsM,EAASK,CAAa,GAAKA,EAC7D,OAAI1I,IACIsI,IAAoB,gBACpBK,EAAaA,EAAW,QAAQ,gBAAiB,SAAU/B,EAAGgC,EAAa,CACvE,OAAIA,GAAe,IACR,IACJ5I,EAAO4I,CAAW,CAC7C,CAAiB,GAEDN,IAAoB,kBACpBK,EAAaA,EAAW,QAAQ,gBAAiB,SAAU/B,EAAGiC,EAAmB,CAC7E,OAAO7I,EAAO6I,CAAiB,CACnD,CAAiB,IAGFF,CACf,EACWJ,CACX,IACAA,EAAU,UAAU,KAAOH,EAC3BG,EAAU,UAAU,YAAcR,EAClCD,EAAI,UAAUS,EAAU,UAAWrB,CAAY,EAC/CxG,EAAQ,UAAY6H,CAEpB,CAAC,EAED,IAAI,OAAO,yBAAyB,CAAC,UAAU,UAAU,QAAQ,EAAG,SAASpI,EAASO,EAAShB,EAAO,CAACA,EAAO,QAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAExH,CAAC,EAED,IAAI,OAAO,qBAAqB,CAAC,UAAU,UAAU,SAAS,yBAAyB,aAAa,EAAG,SAASS,EAASO,EAAShB,EAAO,CACzIgB,EAAQ,OAAS,GACjBA,EAAQ,SAAW,SACnBA,EAAQ,QAAUP,EAAQ,gBAAgB,EAC1CO,EAAQ,IAAM,qBACd,IAAI4F,EAAMnG,EAAQ,YAAY,EAC9BmG,EAAI,gBAAgB5F,EAAQ,QAASA,EAAQ,SAAU,EAAK,CAE5D,CAAC,EAED,IAAI,OAAO,aAAa,CAAC,UAAU,UAAU,SAAS,eAAe,cAAc,cAAc,qBAAqB,oBAAoB,EAAG,SAASP,EAASO,EAAShB,EAAO,CAAC,gBAChL,IAAIoJ,EAAO3I,EAAQ,YAAY,EAC3B4I,EAAM5I,EAAQ,WAAW,EACzBmG,EAAMnG,EAAQ,WAAW,EACzBoI,EAAYpI,EAAQ,kBAAkB,EAAE,UAC5CT,EAAO,QAAUgB,EAAU,IAAI6H,EAC/B,IAAI3S,EAAU,CACV,SAAU,GACV,WAAY,KACZ,SAAU,KACV,UAAW,KACX,SAAU,GACV,OAAQ,MACR,YAAa,CAAA,EACb,mBAAoB,GACpB,aAAc,GACd,aAAc,IAClB,EACA8K,EAAQ,IAAM,SAAU3E,EAAK,CACzB,GAAI,CAACnG,EAAQ,eAAemG,CAAG,EAC3B,MAAM,IAAI,MAAM,uBAAyBA,CAAG,EAChD,OAAOnG,EAAQmG,CAAG,CACtB,EACA2E,EAAQ,IAAM,SAAU3E,EAAKoG,EAAO,CAChC,GAAIvM,EAAQ,eAAemG,CAAG,EAC1BnG,EAAQmG,CAAG,EAAIoG,UACV,KAAK,gBAAgB,GAAIpG,EAAKoG,CAAK,GAAK,GAC7C,MAAM,IAAI,MAAM,uBAAyBpG,CAAG,EAC5CA,GAAO,gBACPuK,EAAI,aAAanE,CAAK,CAC9B,EACAzB,EAAQ,IAAM,UAAY,CACtB,OAAOoI,EAAK,WAAWlT,CAAO,CAClC,EACA8K,EAAQ,OAAS,CAAA,EACjBA,EAAQ,UAAY,SAAUQ,EAAM8H,EAAW,CAC3C,GAAIpT,EAAQ,YAAYsL,CAAI,EACxB,OAAOtL,EAAQ,YAAYsL,CAAI,EACnC,IAAI+H,EAAQ/H,EAAK,MAAM,GAAG,EAC1B8H,EAAYA,GAAaC,EAAMA,EAAM,OAAS,CAAC,GAAK,GACpD,IAAIC,EAAMF,GAAa,WAAa,IAAM,IACtCxI,EAAOyI,EAAMA,EAAM,OAAS,CAAC,EACjC,GAAID,GAAa,UAAYE,GAAO,IAAK,CACrC,IAAIC,EAAK,IAAI,OAAO,IAAMH,EAAY,gBAAkBA,EAAY,IAAK,GAAG,EAC5ExI,EAAOA,EAAK,QAAQ2I,EAAI,EAAE,CAClC,EACS,CAAC3I,GAAQA,GAAQwI,IAAcC,EAAM,OAAS,IAC/CzI,EAAOyI,EAAMA,EAAM,OAAS,CAAC,GACjC,IAAIxC,EAAO7Q,EAAQoT,EAAY,MAAM,EACrC,OAAIvC,GAAQ,KACRA,EAAO7Q,EAAQ,SAEVsT,GAAO,MACZF,EAAYE,EAAM,IAElBzC,GAAQA,EAAK,MAAM,EAAE,GAAK,MAC1BA,GAAQ,KACLA,EAAOuC,EAAYE,EAAM1I,EAAO,KAAK,IAAI,QAAQ,CAC5D,EACAE,EAAQ,aAAe,SAAUQ,EAAMkI,EAAO,CAC1C,OAAOxT,EAAQ,YAAYsL,CAAI,EAAIkI,CACvC,EACA,IAAIC,EAAS,SAAU/I,EAAYgJ,EAAI,CACnC,GAAIhJ,IAAe,sBAAwBA,IAAe,mBACtD,OAAOgJ,EAAG,KAAMnJ,EAAQ,kBAAkB,CAAC,EAC/C,GAAIoJ,EACA,OAAOA,EAAajJ,EAAYgJ,CAAE,EACtC,QAAQ,MAAM,0BAA0B,CAC5C,EACIC,EACJ7I,EAAQ,UAAY,SAAU4I,EAAI,CAC9BC,EAAeD,CACnB,EACA5I,EAAQ,eAAiB,OAAO,OAAO,IAAI,EAC3CA,EAAQ,SAAW,CAAA,EACnBA,EAAQ,QAAU,CAAA,EAClBA,EAAQ,WAAa,SAAU8I,EAAUC,EAAQ,CAC7C,IAAIC,EACJ,GAAI,MAAM,QAAQF,CAAQ,EACtB,IAAIG,EAAaH,EAAS,CAAC,EACvBlJ,EAAakJ,EAAS,CAAC,UAEtB,OAAOA,GAAY,SACxB,IAAIlJ,EAAakJ,EAErB,IAAII,EAAO,SAAUlK,EAAQ,CACzB,GAAIA,GAAU,CAACgB,EAAQ,SAASJ,CAAU,EACtC,OAAOmJ,GAAUA,EAAO/J,CAAM,EAIlC,GAHKgB,EAAQ,SAASJ,CAAU,IAC5BI,EAAQ,SAASJ,CAAU,EAAI,CAAA,GACnCI,EAAQ,SAASJ,CAAU,EAAE,KAAKmJ,CAAM,EACpC/I,EAAAA,EAAQ,SAASJ,CAAU,EAAE,OAAS,GAE1C,KAAIuJ,EAAY,UAAY,CACxBR,EAAO/I,EAAY,SAAUwJ,EAAKpK,EAAQ,CAClCA,IACAgB,EAAQ,QAAQJ,CAAU,EAAIZ,GAClCgB,EAAQ,MAAM,cAAe,CAAE,KAAMJ,EAAY,OAAQZ,EAAQ,EACjE,IAAI4H,EAAY5G,EAAQ,SAASJ,CAAU,EAC3CI,EAAQ,SAASJ,CAAU,EAAI,KAC/BgH,EAAU,QAAQ,SAAUmC,EAAQ,CAChCA,GAAUA,EAAO/J,CAAM,CAC3C,CAAiB,CACjB,CAAa,CACb,EACQ,GAAI,CAACgB,EAAQ,IAAI,UAAU,EACvB,OAAOmJ,EAAS,EACpBd,EAAI,WAAWrI,EAAQ,UAAUJ,EAAYqJ,CAAU,EAAGE,CAAS,EACnEE,EAAgC,EACxC,EACI,GAAIrJ,EAAQ,eAAeJ,CAAU,EACjCI,EAAQ,eAAeJ,CAAU,EAAC,EAAG,KAAK,SAAUZ,EAAQ,CACpDA,EAAO,QACPkK,EAAKlK,EAAO,OAAO,EAGnBkK,EAAKlK,CAAM,CAE3B,CAAS,MAEA,CACD,GAAI,CACAgK,EAAe,KAAK,SAASpJ,CAAU,CACnD,MACkB,CAAA,CACVsJ,EAAKF,GAAgBhJ,EAAQ,QAAQJ,CAAU,CAAC,CACxD,CACA,EACAI,EAAQ,SAAW,SAAUJ,EAAY,CACrC,GAAI,OAAOZ,EAAO,SAAc,WAAY,CACxC,IAAIkB,EAAM,UACV,OAAOlB,EAAOkB,CAAG,EAAEN,CAAU,CACrC,CACA,EACAI,EAAQ,gBAAkB,SAAUJ,EAAYmJ,EAAQ,CACpD/I,EAAQ,eAAeJ,CAAU,EAAImJ,CACzC,EACA,IAAIM,EAAmC,UAAY,CAC3C,CAACnU,EAAQ,UAAY,CAACA,EAAQ,YAC3B,CAACA,EAAQ,UAAY,CAACA,EAAQ,WAC9B,CAAC,OAAO,KAAKA,EAAQ,WAAW,EAAE,SACrC,QAAQ,MAAM,+CAAgD,uFAAwF,0CAA0C,EAChMmU,EAAmC,UAAY,CAAA,EAEvD,EACArJ,EAAQ,QAAU,QAElB,CAAC,EAED,IAAI,OAAO,mBAAmB,CAAC,UAAU,UAAU,SAAS,yBAAyB,YAAY,EAAG,SAASP,EAASO,EAAShB,EAAQ,CAGvIS,EAAQ,sBAAsB,EAC9B,IAAIjI,EAASiI,EAAQ,UAAU,EAC/BjI,EAAO,UAAU,SAASoI,EAAYgJ,EAAI,CACtCnJ,EAAQ,CAACG,CAAU,EAAG,SAASZ,EAAQ,CACnC4J,EAAG,KAAM5J,CAAM,CACvB,CAAK,CACL,CAAC,EAED,IAAIF,EAAU,UAAW,CACrB,OAAO,MAAQ,OAAO,OAAU,KAAe,MACnD,EAAC,EAEDE,EAAO,QAAU,SAASsK,EAAK,CAC3B9R,EAAO,KAAO+R,EACd/R,EAAO,SAAWiI,EAClB6J,EAAI,QAAU7J,CAIlB,EACA8J,EAAK,EAAI,EAAE,SAASA,EAAKC,EAAU,CAE/B,GAAI,GAAC1K,GAAU,CAACA,EAAO,UAGvB,CAAAtH,EAAO,IAAI,WAAYgS,GAAY/J,EAAQ,UAAYT,EAAO,UAAaF,EAAO,QAAUC,SAAO,QAAS,EAE5G,IAAI0K,EAAgB,CAAA,EAChBC,EAAY,GACZC,EAAiB,SAAS,eAAiB,SAAS,eACpDC,EAAkBD,GAAiBA,EAAc,eAAiB,SAElEA,GAAiBA,EAAc,MAC/BD,EAAYC,EAAc,IAAI,MAAM,MAAM,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,MAAM,EAAG,EAAE,EAAE,KAAK,GAAG,GAAK,IAIxF,QADIE,EAAUD,EAAgB,qBAAqB,QAAQ,EAClDrK,EAAE,EAAGA,EAAEsK,EAAQ,OAAQtK,IAAK,CACjC,IAAIuK,EAASD,EAAQtK,CAAC,EAElBwK,EAAMD,EAAO,KAAOA,EAAO,aAAa,KAAK,EACjD,GAAKC,EAIL,SADIC,EAAaF,EAAO,WACfG,EAAE,EAAGzK,EAAEwK,EAAW,OAAQC,EAAIzK,EAAGyK,IAAK,CAC3C,IAAIC,EAAOF,EAAWC,CAAC,EACnBC,EAAK,KAAK,QAAQ,WAAW,IAAM,IACnCT,EAAcU,EAAYD,EAAK,KAAK,QAAQ,aAAc,EAAE,CAAC,CAAC,EAAIA,EAAK,MAEvF,CAEQ,IAAIE,EAAIL,EAAI,MAAM,iCAAiC,EAC/CK,IACAV,EAAYU,EAAE,CAAC,GAC3B,CAEQV,IACAD,EAAc,KAAOA,EAAc,MAAQC,EAC3CD,EAAc,SAAW,IAG7BA,EAAc,SAAWA,EAAc,KACvCA,EAAc,WAAaA,EAAc,YAAcA,EAAc,KACrEA,EAAc,SAAWA,EAAc,UAAYA,EAAc,KACjEA,EAAc,UAAYA,EAAc,WAAaA,EAAc,KACnE,OAAOA,EAAc,KAErB,QAASpO,KAAOoO,EACR,OAAOA,EAAcpO,CAAG,EAAM,KAC9B7D,EAAO,IAAI6D,EAAKoO,EAAcpO,CAAG,CAAC,EAC9C,CAEA,SAAS8O,EAAYpJ,EAAK,CACtB,OAAOA,EAAI,QAAQ,QAAS,SAASqJ,EAAGC,EAAI,CAAE,OAAOA,EAAG,YAAW,CAAG,CAAE,CAC5E,CACA,CAAC,EAED,IAAI,OAAO,YAAY,CAAC,UAAU,UAAU,QAAQ,EAAG,SAAS5K,EAASO,EAAShB,EAAO,CACzF,IAAIsL,EAAuB,UAAY,CACnC,SAASA,EAAMC,EAAUC,EAAaC,EAAQC,EAAW,CACrD,KAAK,MAAQ,CACT,IAAKH,EACL,OAAQC,CACpB,EACQ,KAAK,IAAM,CACP,IAAKC,EACL,OAAQC,CACpB,CACA,CACI,OAAAJ,EAAM,UAAU,QAAU,SAAUK,EAAO,CACvC,OAAO,KAAK,MAAM,MAAQA,EAAM,MAAM,KAClC,KAAK,IAAI,MAAQA,EAAM,IAAI,KAC3B,KAAK,MAAM,SAAWA,EAAM,MAAM,QAClC,KAAK,IAAI,SAAWA,EAAM,IAAI,MAC1C,EACIL,EAAM,UAAU,SAAW,UAAY,CACnC,MAAQ,WAAa,KAAK,MAAM,IAAM,IAAM,KAAK,MAAM,OACnD,SAAW,KAAK,IAAI,IAAM,IAAM,KAAK,IAAI,OAAS,GAC9D,EACIA,EAAM,UAAU,SAAW,SAAUM,EAAKC,EAAQ,CAC9C,OAAO,KAAK,QAAQD,EAAKC,CAAM,GAAK,CAC5C,EACIP,EAAM,UAAU,aAAe,SAAUK,EAAO,CAC5C,IAAIG,EAAKjJ,EAAM8I,EAAM,IAAKhJ,EAAQgJ,EAAM,MAExC,OADAG,EAAM,KAAK,QAAQjJ,EAAI,IAAKA,EAAI,MAAM,EAClCiJ,GAAO,GACPA,EAAM,KAAK,QAAQnJ,EAAM,IAAKA,EAAM,MAAM,EACtCmJ,GAAO,EACA,EAEFA,GAAO,EACL,EAGA,GAGNA,GAAO,GACL,IAGPA,EAAM,KAAK,QAAQnJ,EAAM,IAAKA,EAAM,MAAM,EACtCmJ,GAAO,GACA,GAEFA,GAAO,EACL,GAGA,EAGvB,EACIR,EAAM,UAAU,aAAe,SAAUvM,EAAG,CACxC,OAAO,KAAK,QAAQA,EAAE,IAAKA,EAAE,MAAM,CAC3C,EACIuM,EAAM,UAAU,cAAgB,SAAUK,EAAO,CAC7C,OAAO,KAAK,aAAaA,EAAM,KAAK,GAAK,GAAK,KAAK,aAAaA,EAAM,GAAG,GAAK,CACtF,EACIL,EAAM,UAAU,WAAa,SAAUK,EAAO,CAC1C,IAAIG,EAAM,KAAK,aAAaH,CAAK,EACjC,OAAQG,GAAO,IAAMA,GAAO,GAAKA,GAAO,CAChD,EACIR,EAAM,UAAU,MAAQ,SAAUM,EAAKC,EAAQ,CAC3C,OAAO,KAAK,IAAI,KAAOD,GAAO,KAAK,IAAI,QAAUC,CACzD,EACIP,EAAM,UAAU,QAAU,SAAUM,EAAKC,EAAQ,CAC7C,OAAO,KAAK,MAAM,KAAOD,GAAO,KAAK,MAAM,QAAUC,CAC7D,EACIP,EAAM,UAAU,SAAW,SAAUM,EAAKC,EAAQ,CAC1C,OAAOD,GAAO,UACd,KAAK,MAAM,OAASA,EAAI,OACxB,KAAK,MAAM,IAAMA,EAAI,MAGrB,KAAK,MAAM,IAAMA,EACjB,KAAK,MAAM,OAASC,EAEhC,EACIP,EAAM,UAAU,OAAS,SAAUM,EAAKC,EAAQ,CACxC,OAAOD,GAAO,UACd,KAAK,IAAI,OAASA,EAAI,OACtB,KAAK,IAAI,IAAMA,EAAI,MAGnB,KAAK,IAAI,IAAMA,EACf,KAAK,IAAI,OAASC,EAE9B,EACIP,EAAM,UAAU,OAAS,SAAUM,EAAKC,EAAQ,CAC5C,OAAI,KAAK,QAAQD,EAAKC,CAAM,GAAK,EACzB,OAAK,MAAMD,EAAKC,CAAM,GAAK,KAAK,QAAQD,EAAKC,CAAM,GAOpD,EACf,EACIP,EAAM,UAAU,YAAc,SAAUM,EAAKC,EAAQ,CACjD,OAAI,KAAK,QAAQD,EAAKC,CAAM,GAAK,EACzB,MAAK,MAAMD,EAAKC,CAAM,EAOvB,EACf,EACIP,EAAM,UAAU,UAAY,SAAUM,EAAKC,EAAQ,CAC/C,OAAI,KAAK,QAAQD,EAAKC,CAAM,GAAK,EACzB,MAAK,QAAQD,EAAKC,CAAM,EAOzB,EACf,EACIP,EAAM,UAAU,QAAU,SAAUM,EAAKC,EAAQ,CAC7C,MAAI,CAAC,KAAK,eACFD,IAAQ,KAAK,MAAM,IACZC,EAAS,KAAK,MAAM,OAAS,GAAMA,EAAS,KAAK,IAAI,OAAS,EAAI,EAG7ED,EAAM,KAAK,MAAM,IACV,GACPA,EAAM,KAAK,IAAI,IACR,EACP,KAAK,MAAM,MAAQA,EACZC,GAAU,KAAK,MAAM,OAAS,EAAI,GACzC,KAAK,IAAI,MAAQD,EACVC,GAAU,KAAK,IAAI,OAAS,EAAI,EACpC,CACf,EACIP,EAAM,UAAU,aAAe,SAAUM,EAAKC,EAAQ,CAClD,OAAI,KAAK,MAAM,KAAOD,GAAO,KAAK,MAAM,QAAUC,EACvC,GAGA,KAAK,QAAQD,EAAKC,CAAM,CAE3C,EACIP,EAAM,UAAU,WAAa,SAAUM,EAAKC,EAAQ,CAChD,OAAI,KAAK,IAAI,KAAOD,GAAO,KAAK,IAAI,QAAUC,EACnC,EAGA,KAAK,QAAQD,EAAKC,CAAM,CAE3C,EACIP,EAAM,UAAU,cAAgB,SAAUM,EAAKC,EAAQ,CACnD,OAAI,KAAK,IAAI,KAAOD,GAAO,KAAK,IAAI,QAAUC,EACnC,EAEF,KAAK,MAAM,KAAOD,GAAO,KAAK,MAAM,QAAUC,EAC5C,GAGA,KAAK,QAAQD,EAAKC,CAAM,CAE3C,EACIP,EAAM,UAAU,SAAW,SAAUS,EAAUC,EAAS,CACpD,GAAI,KAAK,IAAI,IAAMA,EACf,IAAInJ,EAAM,CAAE,IAAKmJ,EAAU,EAAG,OAAQ,CAAC,UAClC,KAAK,IAAI,IAAMD,EACpB,IAAIlJ,EAAM,CAAE,IAAKkJ,EAAU,OAAQ,CAAC,EACxC,GAAI,KAAK,MAAM,IAAMC,EACjB,IAAIrJ,EAAQ,CAAE,IAAKqJ,EAAU,EAAG,OAAQ,CAAC,UACpC,KAAK,MAAM,IAAMD,EACtB,IAAIpJ,EAAQ,CAAE,IAAKoJ,EAAU,OAAQ,CAAC,EAC1C,OAAOT,EAAM,WAAW3I,GAAS,KAAK,MAAOE,GAAO,KAAK,GAAG,CACpE,EACIyI,EAAM,UAAU,OAAS,SAAUM,EAAKC,EAAQ,CAC5C,IAAIC,EAAM,KAAK,QAAQF,EAAKC,CAAM,EAClC,GAAIC,GAAO,EACP,OAAO,KACN,GAAIA,GAAO,GACZ,IAAInJ,EAAQ,CAAE,IAAKiJ,EAAK,OAAQC,CAAM,MAEtC,KAAIhJ,EAAM,CAAE,IAAK+I,EAAK,OAAQC,CAAM,EACxC,OAAOP,EAAM,WAAW3I,GAAS,KAAK,MAAOE,GAAO,KAAK,GAAG,CACpE,EACIyI,EAAM,UAAU,QAAU,UAAY,CAClC,OAAQ,KAAK,MAAM,MAAQ,KAAK,IAAI,KAAO,KAAK,MAAM,SAAW,KAAK,IAAI,MAClF,EACIA,EAAM,UAAU,YAAc,UAAY,CACtC,OAAQ,KAAK,MAAM,MAAQ,KAAK,IAAI,GAC5C,EACIA,EAAM,UAAU,MAAQ,UAAY,CAChC,OAAOA,EAAM,WAAW,KAAK,MAAO,KAAK,GAAG,CACpD,EACIA,EAAM,UAAU,aAAe,UAAY,CACvC,OAAI,KAAK,IAAI,QAAU,EACZ,IAAIA,EAAM,KAAK,MAAM,IAAK,EAAG,KAAK,IAAI,KAAK,MAAM,IAAK,KAAK,IAAI,IAAM,CAAC,EAAG,CAAC,EAE1E,IAAIA,EAAM,KAAK,MAAM,IAAK,EAAG,KAAK,IAAI,IAAK,CAAC,CAC/D,EACIA,EAAM,UAAU,cAAgB,SAAUW,EAAS,CAC/C,IAAIC,EAAiBD,EAAQ,yBAAyB,KAAK,KAAK,EAC5DE,EAAeF,EAAQ,yBAAyB,KAAK,GAAG,EAC5D,OAAO,IAAIX,EAAMY,EAAe,IAAKA,EAAe,OAAQC,EAAa,IAAKA,EAAa,MAAM,CACzG,EACIb,EAAM,UAAU,OAAS,SAAUM,EAAKC,EAAQ,CAC5C,KAAK,MAAM,KAAOD,EAClB,KAAK,MAAM,QAAUC,EACrB,KAAK,IAAI,KAAOD,EAChB,KAAK,IAAI,QAAUC,CAC3B,EACWP,CACX,IACAA,EAAM,WAAa,SAAU3I,EAAOE,EAAK,CACrC,OAAO,IAAIyI,EAAM3I,EAAM,IAAKA,EAAM,OAAQE,EAAI,IAAKA,EAAI,MAAM,CACjE,EACAyI,EAAM,cAAgB,SAAUc,EAAIC,EAAI,CACpC,OAAOD,EAAG,IAAMC,EAAG,KAAOD,EAAG,OAASC,EAAG,MAC7C,EACArL,EAAQ,MAAQsK,CAEhB,CAAC,EAED,IAAI,OAAO,eAAe,CAAC,UAAU,UAAU,SAAS,aAAa,EAAG,SAAS7K,EAASO,EAAShB,EAAO,CA4E1G,QA3EIoI,EAAM3H,EAAQ,OAAO,EACrB6L,EAAO,CACP,cAAe,CACX,GAAI,QAAS,GAAI,OAAQ,GAAI,MAAO,IAAK,OACzC,GAAI,WAAY,GAAI,YAAa,GAAI,eAEzC,SAAU,CACN,KAAQ,EAAG,IAAO,EAAG,OAAU,EAAG,MAAS,EAC3C,MAAS,EAAG,KAAQ,EAAG,QAAW,EAAG,IAAO,EAC5C,QAAW,GAEf,cAAe,CACX,EAAG,YACH,EAAG,MACH,GAAI,SACJ,GAAI,QACJ,GAAI,MACJ,GAAI,QACJ,GAAI,SACJ,GAAI,WACJ,GAAI,MACJ,GAAI,OACJ,GAAI,OACJ,GAAI,KACJ,GAAI,QACJ,GAAI,OACJ,GAAI,QACJ,GAAI,SACJ,GAAI,SACJ,MAAO,cACP,IAAK,UACL,IAAK,cAET,eAAgB,CACZ,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACpD,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACjE,IAAK,IAAK,IAAK,KAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAEhE,EACIC,EAAgB,CAChB,QAAS,IACT,UAAW,EACX,IAAK,EACL,OAAQ,GACR,MAAO,GACP,MAAO,GACP,OAAQ,GACR,OAAQ,GACR,SAAU,GACV,IAAK,GACL,KAAM,GACN,OAAQ,GACR,OAAQ,GACR,UAAW,GACX,QAAS,GACT,WAAY,GACZ,UAAW,GACX,UAAW,IACX,MAAO,IACP,MAAO,IACP,YAAa,IACb,UAAW,IACX,aAAc,IACd,UAAW,IACX,MAAO,IACP,MAAO,IACP,OAAQ,IACR,MAAO,IACP,MAAO,GACP,UAAW,IACX,cAAe,IACf,eAAgB,IAChB,aAAc,IACd,eAAgB,GACpB,EACShM,EAAI,EAAGA,EAAI,GAAIA,IACpBgM,EAAc,QAAUhM,CAAC,EAAI,GAAKA,EAClCgM,EAAc,SAAWhM,CAAC,EAAI,GAAKA,EACnC+L,EAAK,eAAe,GAAK/L,CAAC,EAAI,GAAKA,EACnC+L,EAAK,cAAc,GAAK/L,CAAC,EAAI,SAAWA,EAE5C,QAASA,EAAI,GAAIA,EAAI,GAAIA,IAAK,CAC1B,IAAIiM,EAAM,OAAO,aAAajM,EAAI,EAAE,EACpCgM,EAAc,MAAQC,EAAI,YAAW,CAAE,EAAIjM,EAC3C+L,EAAK,eAAe/L,CAAC,EAAIiM,CAC7B,CACA,QAASjM,EAAI,EAAGA,EAAI,GAAIA,IACpBgM,EAAc,IAAMhM,CAAC,EAAI,IAAMA,EAC/B+L,EAAK,cAAc,IAAM/L,CAAC,EAAI,IAAMA,EAExC,IAAIkM,EAAY,CACZ,MAAO,GACP,QAAS,GACT,IAAK,GACL,KAAM,GACV,EACA,QAASxL,KAAOwL,EACZF,EAActL,CAAG,EAAIsL,EAActL,EAAM,MAAM,EACzCsL,EAActL,EAAM,OAAO,EAAIwL,EAAUxL,CAAG,EAEtDD,EAAQ,eAAiBuL,EACzBD,EAAK,eAAe,GAAG,EAAI,IAC3B,QAASrB,KAAKqB,EAAK,cAAe,CAC9B,IAAI9K,EAAO8K,EAAK,cAAcrB,CAAC,EAAE,YAAW,EAC5CqB,EAAK9K,CAAI,EAAI,SAASyJ,EAAG,EAAE,CAC/B,CACA,QAASA,KAAKqB,EAAK,eAAgB,CAC/B,IAAI9K,EAAO8K,EAAK,eAAerB,CAAC,EAAE,YAAW,EAC7CqB,EAAK9K,CAAI,EAAI,SAASyJ,EAAG,EAAE,CAC/B,CACA7C,EAAI,MAAMkE,EAAMA,EAAK,aAAa,EAClClE,EAAI,MAAMkE,EAAMA,EAAK,cAAc,EACnClE,EAAI,MAAMkE,EAAMA,EAAK,aAAa,EAClCA,EAAK,MAAQA,EAAK,OAClBA,EAAK,OAASA,EAAK,IACnBA,EAAK,IAAMA,EAAK,OACf,UAAY,CAET,QADII,EAAO,CAAC,MAAO,OAAQ,MAAO,OAAO,EAChCnM,EAAI,KAAK,IAAI,EAAGmM,EAAK,MAAM,EAAGnM,KACnC+L,EAAK,SAAS/L,CAAC,EAAImM,EAAK,OAAO,SAAUC,EAAG,CACxC,OAAOpM,EAAI+L,EAAK,SAASK,CAAC,CACtC,CAAS,EAAE,KAAK,GAAG,EAAI,GAEvB,EAAC,EACDL,EAAK,SAAS,CAAC,EAAI,GACnBA,EAAK,SAAS,EAAE,EAAI,SACpBlE,EAAI,MAAMpH,EAASsL,CAAI,EACvBtL,EAAQ,QAAUA,EAClBA,EAAQ,gBAAkB,SAAU4L,EAAS,CACzC,IAAIC,EAAYP,EAAKM,CAAO,EAC5B,OAAI,OAAOC,GAAa,WACpBA,EAAY,OAAO,aAAaD,CAAO,GACpCC,EAAU,YAAW,CAChC,CAEA,CAAC,EAED,IAAI,OAAO,gBAAgB,CAAC,UAAU,UAAU,SAAS,eAAe,mBAAmB,EAAG,SAASpM,EAASO,EAAShB,EAAO,CAAe,IAAI8M,EAAOrM,EAAQ,QAAQ,EACtK4D,EAAY5D,EAAQ,aAAa,EACjCsM,EAAc,KACdC,EAAK,EACLC,EACJ,SAASC,GAA+B,CACpCD,EAAwB,GACxB,GAAI,CACA,SAAS,cAAc,EAAE,EAAE,iBAAiB,OAAQ,UAAY,GAAK,CACjE,IAAI,SAAU,CACV,OAAAA,EAAwB,CAAE,QAAS,EAAK,EACjC,EACvB,CACA,CAAS,CACT,MACc,CAAA,CACd,CACA,SAASE,GAAqB,CAC1B,OAAIF,GAAyB,MACzBC,EAA4B,EACzBD,CACX,CACA,SAASG,EAAcC,EAAMjT,EAAMgG,EAAU,CACzC,KAAK,KAAOiN,EACZ,KAAK,KAAOjT,EACZ,KAAK,SAAWgG,CACpB,CACAgN,EAAc,UAAU,QAAU,UAAY,CAC1CE,EAAe,KAAK,KAAM,KAAK,KAAM,KAAK,QAAQ,EAClD,KAAK,KAAO,KAAK,KAAO,KAAK,SAAW,MAC5C,EACA,IAAIC,EAAcvM,EAAQ,YAAc,SAAUqM,EAAMjT,EAAMgG,EAAUoN,EAAW,CAC/EH,EAAK,iBAAiBjT,EAAMgG,EAAU+M,EAAkB,CAAE,EACtDK,GACAA,EAAU,WAAW,KAAK,IAAIJ,EAAcC,EAAMjT,EAAMgG,CAAQ,CAAC,CACzE,EACIkN,EAAiBtM,EAAQ,eAAiB,SAAUqM,EAAMjT,EAAMgG,EAAU,CAC1EiN,EAAK,oBAAoBjT,EAAMgG,EAAU+M,EAAkB,CAAE,CACjE,EACAnM,EAAQ,UAAY,SAAUvJ,EAAG,CAC7BuJ,OAAAA,EAAQ,gBAAgBvJ,CAAC,EACzBuJ,EAAQ,eAAevJ,CAAC,EACjB,EACX,EACAuJ,EAAQ,gBAAkB,SAAUvJ,EAAG,CAC/BA,EAAE,iBACFA,EAAE,gBAAe,CACzB,EACAuJ,EAAQ,eAAiB,SAAUvJ,EAAG,CAC9BA,EAAE,gBACFA,EAAE,eAAc,CACxB,EACAuJ,EAAQ,UAAY,SAAUvJ,EAAG,CAC7B,OAAIA,EAAE,MAAQ,WACH,EACPA,EAAE,MAAQ,eAAkB4M,EAAU,OAAU5M,EAAE,SAAW,CAACA,EAAE,QAAU,CAACA,EAAE,SACtE,EACJA,EAAE,MACb,EACAuJ,EAAQ,QAAU,SAAU4D,EAAI6I,EAAcC,EAAuB,CACjE,IAAIC,EAAgB/I,GAAMA,EAAG,eAAiB,SAC9C,SAASgJ,EAAUnW,EAAG,CAClBgW,GAAgBA,EAAahW,CAAC,EAC9BiW,GAAyBA,EAAsBjW,CAAC,EAChD6V,EAAeK,EAAe,YAAaF,CAAY,EACvDH,EAAeK,EAAe,UAAWC,CAAS,EAClDN,EAAeK,EAAe,YAAaC,CAAS,CAC5D,CACI,OAAAL,EAAYI,EAAe,YAAaF,CAAY,EACpDF,EAAYI,EAAe,UAAWC,CAAS,EAC/CL,EAAYI,EAAe,YAAaC,CAAS,EAC1CA,CACX,EACA5M,EAAQ,sBAAwB,SAAU4D,EAAIxE,EAAUoN,EAAW,CAC/DD,EAAY3I,EAAI,QAAS,SAAUnN,EAAG,CAClC,IAAIoW,EAAS,IACTC,EAASrW,EAAE,QAAU,EACrBsW,EAAStW,EAAE,QAAU,EACzB,OAAQA,EAAE,UAAS,CACf,KAAKA,EAAE,gBACHA,EAAE,OAASqW,EAASD,EACpBpW,EAAE,OAASsW,EAASF,EACpB,MACJ,KAAKpW,EAAE,eACH,IAAIuW,EAAa,GACjBvW,EAAE,OAASqW,EAASE,EACpBvW,EAAE,OAASsW,EAASC,EACpB,MACJ,KAAKvW,EAAE,eACH,IAAIwW,EAAa,IACjBxW,EAAE,OAASqW,EAASG,EACpBxW,EAAE,OAASsW,EAASE,EACpB,MAER7N,EAAS3I,CAAC,CAClB,EAAO+V,CAAS,CAChB,EACAxM,EAAQ,0BAA4B,SAAUkN,EAAUC,EAAUV,EAAcW,EAAcZ,EAAW,CACrG,IAAIa,EAAS,EACTC,EAAQC,EAAQ7K,EAChB8K,EAAa,CACb,EAAG,WACH,EAAG,cACH,EAAG,WACX,EACI,SAASC,EAAYhX,EAAG,CAYpB,GAXIuJ,EAAQ,UAAUvJ,CAAC,IAAM,EACzB4W,EAAS,EAEJ5W,EAAE,OAAS,GAChB4W,IACIA,EAAS,IACTA,EAAS,IAGbA,EAAS,EAEThK,EAAU,KAAM,CAChB,IAAIqK,EAAa,KAAK,IAAIjX,EAAE,QAAU6W,CAAM,EAAI,GAAK,KAAK,IAAI7W,EAAE,QAAU8W,CAAM,EAAI,GAChF,CAAC7K,GAASgL,KACVL,EAAS,GACT3K,GACA,aAAaA,CAAK,EACtBA,EAAQ,WAAW,UAAY,CAAEA,EAAQ,MAASyK,EAASE,EAAS,CAAC,GAAK,GAAG,EACzEA,GAAU,IACVC,EAAS7W,EAAE,QACX8W,EAAS9W,EAAE,QAE3B,CAGQ,GAFAA,EAAE,QAAU4W,EACZZ,EAAaW,CAAY,EAAE,YAAa3W,CAAC,EACrC4W,EAAS,EACTA,EAAS,UACJA,EAAS,EACd,OAAOZ,EAAaW,CAAY,EAAEI,EAAWH,CAAM,EAAG5W,CAAC,CACnE,CACS,MAAM,QAAQyW,CAAQ,IACvBA,EAAW,CAACA,CAAQ,GACxBA,EAAS,QAAQ,SAAUtJ,EAAI,CAC3B2I,EAAY3I,EAAI,YAAa6J,EAAajB,CAAS,CAC3D,CAAK,CACL,EACA,SAASmB,EAAgBlX,EAAG,CACxB,MAAO,IAAKA,EAAE,QAAU,EAAI,IAAMA,EAAE,OAAS,EAAI,IAAMA,EAAE,SAAW,EAAI,IAAMA,EAAE,QAAU,EAAI,EAClG,CACAuJ,EAAQ,kBAAoB,SAAUvJ,EAAG,CACrC,OAAOqV,EAAK,SAAS6B,EAAgBlX,CAAC,CAAC,CAC3C,EACA,SAASmX,EAAqBxO,EAAU3I,EAAGmV,EAAS,CAChD,IAAIiC,EAASF,EAAgBlX,CAAC,EAI9B,GAHI,CAACmV,GAAWnV,EAAE,OACdmV,EAAUE,EAAK,eAAerV,EAAE,IAAI,GAAKmV,GAEzC,CAACvI,EAAU,OAAS0I,EAAa,CAGjC,GAFItV,EAAE,mBAAqBA,EAAE,iBAAiB,IAAI,GAAKA,EAAE,iBAAiB,KAAK,KAC3EoX,GAAU,GACV9B,EAAY,MACZ,IAAK,EAAI8B,IAAW,EAChB9B,EAAY,MAAQ,MAEpB,QAER,GAAIH,IAAY,IAAMA,IAAY,GAAI,CAClC,IAAIkC,EAAWrX,EAAE,SACjB,GAAImV,IAAY,IAAMkC,IAAa,EAC3B/B,EAAYH,CAAO,GAAK,IACxBI,EAAKvV,EAAE,mBAENmV,IAAY,IAAMiC,IAAW,GAAKC,IAAa,EAAG,CACvD,IAAIC,EAAKtX,EAAE,UAAYuV,EACnB+B,EAAK,KACLhC,EAAY,MAAQ,GACxC,CACA,CACA,CAII,GAHIH,KAAWE,EAAK,gBAChBF,EAAU,IAEV,GAACiC,GAAUjC,IAAY,IACnBnV,EAAE,WAAa,IACf2I,EAAS3I,EAAGoX,EAAQ,CAACjC,CAAO,EACxBnV,EAAE,mBAId,IAAI4M,EAAU,YAAcwK,EAAS,EAAG,CAEpC,GADAzO,EAAS3I,EAAGoX,EAAQjC,CAAO,EACvBnV,EAAE,iBACF,OAEAoX,GAAU,EACtB,CACI,MAAI,CAACA,GAAU,EAAEjC,KAAWE,EAAK,gBAAkB,EAAEF,KAAWE,EAAK,gBAC1D,GAEJ1M,EAAS3I,EAAGoX,EAAQjC,CAAO,EACtC,CACA5L,EAAQ,sBAAwB,SAAU4D,EAAIxE,EAAUoN,EAAW,CAC/D,IAAIwB,EAAuB,KAC3BzB,EAAY3I,EAAI,UAAW,SAAUnN,EAAG,CACpCsV,EAAYtV,EAAE,OAAO,GAAKsV,EAAYtV,EAAE,OAAO,GAAK,GAAK,EACzD,IAAIhB,EAASmY,EAAqBxO,EAAU3I,EAAGA,EAAE,OAAO,EACxD,OAAAuX,EAAuBvX,EAAE,iBAClBhB,CACf,EAAO+W,CAAS,EACZD,EAAY3I,EAAI,WAAY,SAAUnN,EAAG,CACjCuX,IAAyBvX,EAAE,SAAWA,EAAE,QAAUA,EAAE,UAAYA,EAAE,WAClEuJ,EAAQ,UAAUvJ,CAAC,EACnBuX,EAAuB,KAEnC,EAAOxB,CAAS,EACZD,EAAY3I,EAAI,QAAS,SAAUnN,EAAG,CAClCsV,EAAYtV,EAAE,OAAO,EAAI,IACjC,EAAO+V,CAAS,EACPT,IACDkC,EAAgB,EAChB1B,EAAY,OAAQ,QAAS0B,CAAgB,EAErD,EACA,SAASA,GAAmB,CACxBlC,EAAc,OAAO,OAAO,IAAI,CACpC,CACA,GAAI,OAAO,QAAU,UAAY,OAAO,aAAe,CAAC1I,EAAU,QAAS,CACvE,IAAI6K,EAAgB,EACpBlO,EAAQ,SAAW,SAAUZ,EAAU+O,EAAK,CACxCA,EAAMA,GAAO,OACb,IAAIC,EAAc,wBAA2BF,IACzCG,EAAW,SAAU5X,EAAG,CACpBA,EAAE,MAAQ2X,IACVpO,EAAQ,gBAAgBvJ,CAAC,EACzB6V,EAAe6B,EAAK,UAAWE,CAAQ,EACvCjP,EAAQ,EAExB,EACQmN,EAAY4B,EAAK,UAAWE,CAAQ,EACpCF,EAAI,YAAYC,EAAa,GAAG,CACxC,CACA,CACApO,EAAQ,aAAe,GACvBA,EAAQ,OAAS,SAAU4I,EAAIhG,EAAS,CACpC,OAAO,WAAW,SAAS3M,GAAU,CAC5B+J,EAAQ,aAIT,WAAW/J,EAAS,GAAG,EAHvB2S,EAAE,CAKd,EAAOhG,CAAO,CACd,EACA5C,EAAQ,aAAe,KACvBA,EAAQ,UAAY,SAAUsO,EAAO,CAC7BtO,EAAQ,cACR,aAAaA,EAAQ,YAAY,EACrCA,EAAQ,aAAe,GACvBA,EAAQ,aAAe,WAAW,UAAY,CAC1CA,EAAQ,aAAe,EAC/B,EAAOsO,GAAS,GAAG,CACnB,EACAtO,EAAQ,UAAY,OAAO,QAAU,WAAa,OAAO,uBAClD,OAAO,0BACP,OAAO,6BACP,OAAO,yBACP,OAAO,wBACVA,EAAQ,UACRA,EAAQ,UAAYA,EAAQ,UAAU,KAAK,MAAM,EAEjDA,EAAQ,UAAY,SAAUZ,EAAU,CACpC,WAAWA,EAAU,EAAE,CAC/B,CAEA,CAAC,EAED,IAAI,OAAO,gBAAgB,CAAC,UAAU,UAAU,QAAQ,EAAG,SAASK,EAASO,EAAShB,EAAO,CAC7F,IAAIuP,EACJvP,EAAO,QAAU,CACb,SAAU,GACV,eAAgB,UAAY,CACxB,OAAIuP,GAAYA,EAAW,KAAK,IAAG,EAAK,GAC7B,GACJA,EAAW,EAC1B,EACI,OAAQ,UAAY,CAChBA,EAAW,KAAK,IAAG,CAC3B,CACA,CAEA,CAAC,EAED,IAAI,OAAO,yBAAyB,CAAC,UAAU,UAAU,SAAS,gBAAgB,aAAa,oBAAoB,cAAc,eAAe,gBAAgB,cAAc,EAAG,SAAS9O,EAASO,EAAShB,EAAO,CACnN,IAAI5I,EAAQqJ,EAAQ,cAAc,EAC9B+O,EAAM/O,EAAQ,WAAW,EAAE,IAC3B4D,EAAY5D,EAAQ,kBAAkB,EACtCmG,EAAMnG,EAAQ,YAAY,EAC1B2I,EAAO3I,EAAQ,aAAa,EAC5BgP,EAAYhP,EAAQ,cAAc,EAClCiP,EAAiBrL,EAAU,SAAW,GACtCsL,EAAmBtL,EAAU,KAC7BuL,EAAiBvL,EAAU,SAAW,GACtCwL,EAAkB,IAClBC,EAAOrP,EAAQ,aAAa,EAC5BsP,EAAOD,EAAK,SACZE,EAAQ3L,EAAU,MAClB4L,EAAkBD,EAAQ,KAAO,KACjCE,EAAW7L,EAAU,SACrB8L,EAA2B,UAAY,CACvC,SAASA,EAAUC,EAAYC,EAAM,CACjC,IAAIC,EAAQ,KACZ,KAAK,KAAOD,EACZ,KAAK,KAAOzJ,EAAI,cAAc,UAAU,EACxC,KAAK,KAAK,UAAY,iBACtB,KAAK,KAAK,aAAa,OAAQ,KAAK,EACpC,KAAK,KAAK,aAAa,eAAgB,KAAK,EAC5C,KAAK,KAAK,aAAa,cAAe,KAAK,EAC3C,KAAK,KAAK,aAAa,iBAAkB,KAAK,EAC9C,KAAK,KAAK,aAAa,aAAc,OAAO,EAC5C,KAAK,KAAK,MAAM,QAAU,IAC1BwJ,EAAW,aAAa,KAAK,KAAMA,EAAW,UAAU,EAAG,KAAK,OAAS,GACzE,KAAK,OAAS,GACd,KAAK,cAAgB,GACrB,KAAK,YAAc,GACnB,KAAK,UAAY,GACZF,IACD,KAAK,KAAK,MAAM,SAAW,OAC/B,KAAK,YAAc,GACnB,KAAK,kBAAoB,GACzB,KAAK,UAAY,GACjB,KAAK,mBAAqB,EAC1B,KAAK,iBAAmB,EACxB,KAAK,eAAiB,EACtB,KAAK,SAAW,OAAO,iBACvB,KAAK,OAAS,OAAO,iBACrB,KAAK,mBAAqB,EAC1B,GAAI,CACA,KAAK,WAAa,SAAS,gBAAkB,KAAK,IAC9D,MACkB,CAClB,CACQ,KAAK,kBAAoB,KAAK,kBAAkB,KAAK,IAAI,EACzD,KAAK,eAAe,CAAE,KAAM,SAAS,CAAE,EACvC9Y,EAAM,YAAY,KAAK,KAAM,OAAQ,SAAUK,EAAG,CAC1C6Y,EAAM,oBAEVD,EAAK,OAAO5Y,CAAC,EACb6Y,EAAM,WAAa,GAC/B,EAAWD,CAAI,EACPjZ,EAAM,YAAY,KAAK,KAAM,QAAS,SAAUK,EAAG,CAC/C,GAAI,CAAA6Y,EAAM,kBAGV,IADAA,EAAM,WAAa,GACfjM,EAAU,OACV,GAAI,CACA,GAAI,CAAC,SAAS,SAAQ,EAClB,MACxB,MAC0B,CAC1B,CAEYgM,EAAK,QAAQ5Y,CAAC,EACV4M,EAAU,OACV,WAAWiM,EAAM,eAAe,KAAKA,CAAK,CAAC,EAE3CA,EAAM,eAAc,EACpC,EAAWD,CAAI,EAAG,KAAK,aAAe,GAC9BA,EAAK,GAAG,qBAAsB,UAAY,CACtC,IAAIE,EAAQF,EAAK,MACbG,EAAcD,GAASA,EAAM,SAAWA,EAAM,QAAQ,KAC1D,GAAIC,GAAe,eAEnB,KAAIC,EAAeD,IAAgBD,EAAM,YAAcA,EAAM,kBACzDD,EAAM,eAAiBG,IACvBH,EAAM,UAAYA,EAAM,KAAK,MAAQ,GACrCA,EAAM,iBAAgB,GAE1BA,EAAM,eAAc,EAChC,CAAS,EACDD,EAAK,GAAG,kBAAmB,KAAK,aAAa,KAAK,IAAI,CAAC,EACvD,KAAK,eAAiBL,EAAQ,KAAK,mBAAqB,KAAK,gBACzD,KAAK,YACLK,EAAK,QAAO,EAChB,KAAK,aAAe,KACpB,KAAK,iBAAmB,GACxBjZ,EAAM,sBAAsB,KAAK,KAAM,SAAUK,EAAGoX,EAAQjC,EAAS,CACjE,GAAI,CAAA0D,EAAM,cAEV,OAAOD,EAAK,aAAa5Y,EAAGoX,EAAQjC,CAAO,CACvD,EAAWyD,CAAI,EACPjZ,EAAM,YAAY,KAAK,KAAM,SAAU,KAAK,SAAS,KAAK,IAAI,EAAGiZ,CAAI,EACrEjZ,EAAM,YAAY,KAAK,KAAM,QAAS,KAAK,QAAQ,KAAK,IAAI,EAAGiZ,CAAI,EACnEjZ,EAAM,YAAY,KAAK,KAAM,MAAO,KAAK,MAAM,KAAK,IAAI,EAAGiZ,CAAI,EAC/DjZ,EAAM,YAAY,KAAK,KAAM,OAAQ,KAAK,OAAO,KAAK,IAAI,EAAGiZ,CAAI,EACjEjZ,EAAM,YAAY,KAAK,KAAM,QAAS,KAAK,QAAQ,KAAK,IAAI,EAAGiZ,CAAI,GAC/D,EAAE,UAAW,KAAK,OAAS,EAAE,WAAY,KAAK,OAAS,EAAE,YAAa,KAAK,QAC3EjZ,EAAM,YAAYgZ,EAAY,UAAW,SAAU3Y,EAAG,CAClD,GAAK,EAAA4M,EAAU,OAAS,CAAC5M,EAAE,SAAY,CAACA,EAAE,SAE1C,OAAQA,EAAE,QAAO,CACb,IAAK,IACD6Y,EAAM,OAAO7Y,CAAC,EACd,MACJ,IAAK,IACD6Y,EAAM,QAAQ7Y,CAAC,EACf,MACJ,IAAK,IACD6Y,EAAM,MAAM7Y,CAAC,EACb,MAExB,EAAe4Y,CAAI,EAEX,KAAK,gBAAkBjH,EAAK,YAAY,KAAK,oBAAoB,KAAK,IAAI,EAAG,EAAE,EAAE,SAAS,KAAK,KAAM,IAAI,EACzGhS,EAAM,YAAY,KAAK,KAAM,mBAAoB,KAAK,mBAAmB,KAAK,IAAI,EAAGiZ,CAAI,EACzFjZ,EAAM,YAAY,KAAK,KAAM,oBAAqB,KAAK,oBAAoB,KAAK,IAAI,EAAGiZ,CAAI,EAC3FjZ,EAAM,YAAY,KAAK,KAAM,QAAS,KAAK,QAAQ,KAAK,IAAI,EAAGiZ,CAAI,EACnEjZ,EAAM,YAAY,KAAK,KAAM,UAAW,KAAK,gBAAgB,KAAK,IAAI,EAAGiZ,CAAI,EAC7EjZ,EAAM,YAAY,KAAK,KAAM,iBAAkB,KAAK,iBAAiB,KAAK,IAAI,EAAGiZ,CAAI,EACrF,KAAK,aACLjZ,EAAM,YAAY,KAAK,KAAM,UAAW,KAAK,eAAe,KAAK,IAAI,EAAGiZ,CAAI,EAC5EjZ,EAAM,YAAY,KAAK,KAAM,YAAa,SAAUK,EAAG,CACnDA,EAAE,eAAc,EAChB6Y,EAAM,mBAAkB,CACpC,EAAWD,CAAI,EACPjZ,EAAM,YAAYiZ,EAAK,SAAS,SAAU,cAAe,KAAK,eAAe,KAAK,IAAI,EAAGA,CAAI,EAC7FjZ,EAAM,YAAY,KAAK,KAAM,cAAe,KAAK,eAAe,KAAK,IAAI,EAAGiZ,CAAI,EAC5EL,GACA,KAAK,uBAAuBI,EAAYC,EAAM,KAAK,IAAI,CACnE,CACI,OAAAF,EAAU,UAAU,uBAAyB,SAAUC,EAAYC,EAAMK,EAAM,CAC3E,IAAIJ,EAAQ,KACRK,EAAqB,KACrBC,EAAS,GACbF,EAAK,iBAAiB,UAAW,SAAUjZ,EAAG,CACtCkZ,GACA,aAAaA,CAAkB,EACnCC,EAAS,EACrB,EAAW,EAAI,EACPF,EAAK,iBAAiB,QAAS,SAAUjZ,EAAG,CACxCkZ,EAAqB,WAAW,UAAY,CACxCC,EAAS,EACzB,EAAe,GAAG,CAClB,EAAW,EAAI,EACP,IAAIC,EAAkB,SAAUpZ,EAAG,CAC/B,GAAI,SAAS,gBAAkBiZ,GAE3B,EAAAE,GAAUN,EAAM,eAAiBD,EAAK,cAAc,iBAEpD,CAAAC,EAAM,OAGV,KAAIQ,EAAiBJ,EAAK,eACtBK,EAAeL,EAAK,aACpBrU,EAAM,KACN2U,EAAW,EA+Bf,GA9BIF,GAAkB,EAClBzU,EAAMyT,EAAK,GAENgB,GAAkB,EACvBzU,EAAMyT,EAAK,KAENiB,EAAeT,EAAM,kBAAoBA,EAAM,UAAUS,CAAY,GAAK;AAAA,EAC/E1U,EAAMyT,EAAK,IAENgB,EAAiBR,EAAM,oBAAsBA,EAAM,UAAUQ,EAAiB,CAAC,GAAK,KACzFzU,EAAMyT,EAAK,KACXkB,EAAWjB,EAAK,QAEXe,EAAiBR,EAAM,oBAAuBQ,GAAkBR,EAAM,oBACxEA,EAAM,kBAAoBA,EAAM,oBAAsBQ,GAAkBC,EAC3E1U,EAAMyT,EAAK,KAENiB,EAAeT,EAAM,kBAAoBA,EAAM,UAAU,MAAM,EAAGS,CAAY,EAAE,MAAM;AAAA,CAAI,EAAE,OAAS,EAC1G1U,EAAMyT,EAAK,KAENiB,EAAeT,EAAM,kBAAoBA,EAAM,UAAUS,EAAe,CAAC,GAAK,KACnF1U,EAAMyT,EAAK,MACXkB,EAAWjB,EAAK,SAEXgB,EAAeT,EAAM,kBAAqBS,GAAgBT,EAAM,kBAClEA,EAAM,kBAAoBA,EAAM,oBAAsBQ,GAAkBC,KAC3E1U,EAAMyT,EAAK,OAEXgB,IAAmBC,IACnBC,GAAYjB,EAAK,OACjB1T,EAAK,CACL,IAAI5F,EAAS4Z,EAAK,aAAa,CAAA,EAAIW,EAAU3U,CAAG,EAChD,GAAI,CAAC5F,GAAU4Z,EAAK,SAAU,CAC1BhU,EAAMyT,EAAK,gBAAgBzT,CAAG,EAC9B,IAAI4U,EAAUZ,EAAK,SAAS,eAAeW,EAAU3U,CAAG,EACpD4U,GACAZ,EAAK,YAAYY,CAAO,CAChD,CACgBX,EAAM,mBAAqBQ,EAC3BR,EAAM,iBAAmBS,EACzBT,EAAM,eAAe,EAAE,CACvC,EACA,EACQ,SAAS,iBAAiB,kBAAmBO,CAAe,EAC5DR,EAAK,GAAG,UAAW,UAAY,CAC3B,SAAS,oBAAoB,kBAAmBQ,CAAe,CAC3E,CAAS,CACT,EACIV,EAAU,UAAU,mBAAqB,UAAY,CACjD,IAAIG,EAAQ,KACZ,aAAa,KAAK,YAAY,EAC9B,KAAK,aAAe,WAAW,UAAY,CACnCA,EAAM,YACNA,EAAM,KAAK,MAAM,QAAUA,EAAM,UACjCA,EAAM,UAAY,IAEtBA,EAAM,KAAK,SAAS,gBAAkB,GAClCA,EAAM,KAAK,SAAS,uBACpBA,EAAM,KAAK,SAAS,sBAAqB,CACzD,EAAW,CAAC,CACZ,EACIH,EAAU,UAAU,eAAiB,SAAU1Y,EAAG,CAC9C,KAAK,KAAK,UAAU,cAAcA,CAAC,EACnC,KAAK,mBAAkB,CAC/B,EACI0Y,EAAU,UAAU,QAAU,SAAU1Y,EAAG,CACnCA,EAAE,SAAW,IAAM,KAAK,KAAK,MAAM,OAAS,KAAK,KAAK,iBACjD,KAAK,gBACN,KAAK,UAAY,KAAK,KAAK,OAC/B,KAAK,mBAAqB,KAAK,iBAAmB,GAClD,KAAK,eAAc,GAEvB,KAAK,gBAAe,CAC5B,EACI0Y,EAAU,UAAU,kBAAoB,UAAY,CAChD,KAAK,kBAAoB,GACzB,KAAK,KAAK,KAAI,EACd,KAAK,KAAK,MAAK,EACf,KAAK,kBAAoB,EACjC,EACIA,EAAU,UAAU,mBAAqB,SAAU1Y,EAAG,CAClD,GAAI,OAAK,eAAiB,CAAC,KAAK,KAAK,oBAAsB,KAAK,KAAK,aAErE,KAAK,cAAgB,CAAA,EACjB,MAAK,aAET,CAAIA,EAAE,OACF,KAAK,cAAc,kBAAoB,IAC3C,WAAW,KAAK,oBAAoB,KAAK,IAAI,EAAG,CAAC,EACjD,KAAK,KAAK,QAAQ,kBAAkB,EACpC,KAAK,KAAK,GAAG,YAAa,KAAK,iBAAiB,EAChD,IAAIkU,EAAQ,KAAK,KAAK,kBAAiB,EACvCA,EAAM,IAAI,IAAMA,EAAM,MAAM,IAC5BA,EAAM,IAAI,OAASA,EAAM,MAAM,OAC/B,KAAK,cAAc,YAAcA,EACjC,KAAK,cAAc,eAAiB,KAAK,mBACzC,KAAK,KAAK,mBAAmB,KAAK,aAAa,EAC3C,KAAK,cAAc,mBACnB,KAAK,UAAY,KAAK,KAAK,MAAQ,GACnC,KAAK,mBAAqB,EAC1B,KAAK,iBAAmB,IAGpB,KAAK,KAAK,oBACV,KAAK,cAAc,QAAU,KAAK,KAAK,kBAAiB,GACxD,KAAK,KAAK,kBACV,KAAK,cAAc,QAAU,KAAK,KAAK,gBAAe,IAEtE,EACIwE,EAAU,UAAU,oBAAsB,UAAY,CAClD,GAAI,GAAC,KAAK,eAAiB,CAAC,KAAK,KAAK,qBAAuB,KAAK,KAAK,WAEvE,IAAI,KAAK,YACL,OAAO,KAAK,kBAAiB,EACjC,GAAI,KAAK,cAAc,kBACnB,KAAK,KAAK,oBAAoB,KAAK,KAAK,KAAK,MAE5C,CACD,IAAItX,EAAO,KAAK,KAAK,MACrB,KAAK,SAASA,CAAI,EACd,KAAK,cAAc,cACf,KAAK,cAAc,UACnB,KAAK,cAAc,YAAY,MAAM,OAAS,KAAK,cAAc,eAAiB,KAAK,cAAc,QAAQ,wBAEjH,KAAK,cAAc,YAAY,IAAI,OAAS,KAAK,cAAc,YAAY,MAAM,OAC3E,KAAK,iBAAmB,KAAK,cAAc,eAAiB,KAAK,eAEvF,EACA,EACIsX,EAAU,UAAU,iBAAmB,SAAU1Y,EAAG,CAC5C,CAAC,KAAK,KAAK,kBAAoB,KAAK,KAAK,YAE7C,KAAK,cAAgB,GACrB,KAAK,KAAK,iBAAgB,EAC1B,KAAK,KAAK,IAAI,YAAa,KAAK,iBAAiB,EAC7CA,GACA,KAAK,QAAO,EACxB,EACI0Y,EAAU,UAAU,MAAQ,SAAU1Y,EAAG,CACrC,KAAK,OAAOA,EAAG,EAAI,CAC3B,EACI0Y,EAAU,UAAU,OAAS,SAAU1Y,EAAG,CACtC,KAAK,OAAOA,EAAG,EAAK,CAC5B,EACI0Y,EAAU,UAAU,QAAU,SAAU1Y,EAAG,CACvC,IAAIoB,EAAO,KAAK,oBAAoBpB,CAAC,EACjCgY,EAAU,eAAc,IAExB,OAAO5W,GAAQ,UACXA,GACA,KAAK,KAAK,QAAQA,EAAMpB,CAAC,EACzB4M,EAAU,MACV,WAAW,KAAK,cAAc,EAClCjN,EAAM,eAAeK,CAAC,IAGtB,KAAK,KAAK,MAAQ,GAClB,KAAK,OAAS,IAE1B,EACI0Y,EAAU,UAAU,OAAS,SAAU1Y,EAAGyZ,EAAO,CAC7C,IAAIZ,EAAQ,KACRzX,EAAO,KAAK,KAAK,YAAW,EAChC,GAAI,CAACA,EACD,OAAOzB,EAAM,eAAeK,CAAC,EAC7B,KAAK,oBAAoBA,EAAGoB,CAAI,GAC5BmX,IACA,KAAK,eAAenX,CAAI,EACxB,KAAK,OAASA,EACd,WAAW,UAAY,CACnByX,EAAM,OAAS,EACnC,EAAmB,EAAE,GAETY,EAAQ,KAAK,KAAK,MAAK,EAAK,KAAK,KAAK,OAAM,EAC5C9Z,EAAM,eAAeK,CAAC,IAGtB,KAAK,OAAS,GACd,KAAK,KAAK,MAAQoB,EAClB,KAAK,KAAK,OAAM,EAChB,WAAW,UAAY,CACnByX,EAAM,OAAS,GACfA,EAAM,eAAc,EACpBY,EAAQZ,EAAM,KAAK,MAAK,EAAKA,EAAM,KAAK,OAAM,CAC9D,CAAa,EAEb,EACIH,EAAU,UAAU,oBAAsB,SAAU1Y,EAAGoB,EAAMsY,EAAa,CACtE,IAAIC,EAAgB3Z,EAAE,eAAiB,OAAO,cAC9C,GAAI,GAAC2Z,GAAiB1B,GAEtB,KAAI2B,EAAO1B,GAAoBwB,EAAc,OAAS,aACtD,GAAI,CACA,OAAItY,EACOuY,EAAc,QAAQC,EAAMxY,CAAI,IAAM,GAGtCuY,EAAc,QAAQC,CAAI,CAEjD,OACe5Z,EAAG,CACN,GAAI,CAAC0Z,EACD,OAAO,KAAK,oBAAoB1Z,EAAGoB,EAAM,EAAI,CAC7D,EACA,EACIsX,EAAU,UAAU,QAAU,SAAU1Y,EAAG,CACvC,GAAI,KAAK,cACL,OAAO,KAAK,oBAAmB,EACnC,GAAIA,GAAKA,EAAE,UAAW,CAClB,GAAIA,EAAE,WAAa,cACf,OAAO,KAAK,KAAK,YAAY,MAAM,EACvC,GAAIA,EAAE,WAAa,cACf,OAAO,KAAK,KAAK,YAAY,MAAM,CACnD,CACQ,IAAIoB,EAAO,KAAK,KAAK,MACjByY,EAAW,KAAK,SAASzY,EAAM,EAAI,GACnCA,EAAK,OAASgX,EAAkB,KAAOI,EAAgB,KAAKqB,CAAQ,GAAKpB,GAAY,KAAK,mBACxF,GAAK,KAAK,oBAAsB,KAAK,mBACvC,KAAK,eAAc,CAE/B,EACIC,EAAU,UAAU,SAAW,SAAU1N,EAAO8O,EAAW,CAGvD,GAFI,KAAK,mBACL,KAAK,iBAAmB,IACxB,KAAK,OACL,YAAK,eAAc,EACf9O,GACA,KAAK,KAAK,QAAQA,CAAK,EAC3B,KAAK,OAAS,GACP,GAWP,QARIqO,EAAiB,KAAK,KAAK,eAC3BC,EAAe,KAAK,KAAK,aACzBS,EAAa,KAAK,mBAClBC,EAAc,KAAK,UAAU,OAAS,KAAK,iBAC3CH,EAAW7O,EACXiP,EAAejP,EAAM,OAASqO,EAC9Ba,EAAalP,EAAM,OAASsO,EAC5BxQ,EAAI,EACDiR,EAAa,GAAK,KAAK,UAAUjR,CAAC,GAAKkC,EAAMlC,CAAC,GACjDA,IACAiR,IAIJ,IAFAF,EAAWA,EAAS,MAAM/Q,CAAC,EAC3BA,EAAI,EACGkR,EAAc,GAAK,KAAK,UAAU,OAASlR,EAAI,KAAK,mBAAqB,GACzE,KAAK,UAAU,KAAK,UAAU,OAASA,CAAC,GAAKkC,EAAMA,EAAM,OAASlC,CAAC,GACtEA,IACAkR,IAEJC,GAAgBnR,EAAI,EACpBoR,GAAcpR,EAAI,EAClB,IAAIqR,EAAWN,EAAS,OAAS/Q,EAAI,EAMrC,GALIqR,EAAW,IACXJ,EAAa,CAACI,EACdA,EAAW,GAEfN,EAAWA,EAAS,MAAM,EAAGM,CAAQ,EACjC,CAACL,GAAa,CAACD,GAAY,CAACI,GAAgB,CAACF,GAAc,CAACC,GAAe,CAACE,EAC5E,MAAO,GACX,KAAK,YAAc,GACnB,IAAIE,EAAc,GAClB,OAAIxN,EAAU,WAAaiN,GAAY,OACnCA,EAAW,KACXO,EAAc,IAEdP,GAAY,CAACE,GAAc,CAACC,GAAe,CAACC,GAAgB,CAACC,GAAc,KAAK,YAChF,KAAK,KAAK,YAAYL,CAAQ,EAG9B,KAAK,KAAK,YAAYA,EAAU,CAC5B,WAAYE,EACZ,YAAaC,EACb,aAAcC,EACd,WAAYC,CAChC,CAAiB,EAEL,KAAK,YAAc,GACnB,KAAK,UAAYlP,EACjB,KAAK,mBAAqBqO,EAC1B,KAAK,iBAAmBC,EACxB,KAAK,eAAiBY,EACfE,EAAc;AAAA,EAAOP,CAExC,EACInB,EAAU,UAAU,SAAW,SAAU1Y,EAAG,CACxC,IAAI6Y,EAAQ,KACZ,GAAI,MAAK,cAET,KAAIwB,EAAgB,SAAUpB,EAAM,CAChC,OAAOA,EAAK,iBAAmB,GAAKA,EAAK,cAAgBJ,EAAM,UAAU,QAAUI,EAAK,QAChFJ,EAAM,WAAaA,EAAM,WAAaI,EAAK,eAAiBJ,EAAM,gBACtF,EACY,KAAK,OACL,KAAK,OAAS,GAETwB,EAAc,KAAK,IAAI,GAC5B,KAAK,KAAK,UAAS,EACnB,KAAK,eAAc,GAEd5B,GAAY,KAAK,KAAK,gBAAkB,KAAK,oBAClD,KAAK,eAAc,EAE/B,EACIC,EAAU,UAAU,mBAAqB,SAAU1N,EAAO,CACtD,GAAI,GAAC,KAAK,YAAe,KAAK,QAAU,CAACA,GAAU,KAAK,aAExD,CAAKA,IACDA,EAAQ,IACZ,IAAIsP,EAAW;AAAA,KAAUtP,EAAQ;AAAA,EAC7BsP,GAAY,KAAK,KAAK,QACtB,KAAK,KAAK,MAAQ,KAAK,UAAYA,GACvC,IAAIjB,EAAiB,EACjBC,EAAe,GAAKtO,EAAM,SAAW,KAAK,KAAK,UAAU,QAAO,EAAK,EAAI,KACzE,KAAK,oBAAsBqO,GAAkB,KAAK,kBAAoBC,IACtE,KAAK,KAAK,kBAAkBD,EAAgBC,CAAY,EAE5D,KAAK,mBAAqBD,EAC1B,KAAK,iBAAmBC,EAChC,EACIZ,EAAU,UAAU,gBAAkB,UAAY,CAC9C,IAAIG,EAAQ,KACZ,GAAI,OAAK,eAAiB,KAAK,cAE3B,GAAC,KAAK,YAAc,CAAC,KAAK,kBAE9B,MAAK,cAAgB,GACrB,IAAIQ,EAAiB,EACjBC,EAAe,EACf/V,EAAO,GACPgX,EAAsB,SAAUpG,EAAKC,EAAQ,CAE7C,QADIoG,EAAYpG,EACPtL,EAAI,EAAGA,GAAKqL,EAAM0E,EAAM,UAAY/P,EAAI,EAAI+P,EAAM,mBAAqB,EAAG/P,IAC/E0R,GAAa3B,EAAM,KAAK,QAAQ,QAAQ1E,EAAMrL,CAAC,EAAE,OAAS,EAE9D,OAAO0R,CACnB,EACQ,GAAI,KAAK,KAAK,QAAS,CACnB,IAAIA,EAAY,KAAK,KAAK,UACtBtG,EAAQsG,EAAU,SAAQ,EAC1BrG,EAAMqG,EAAU,OAAO,IACvBrG,IAAQ,KAAK,OAAS,GACtB,KAAK,SAAW,KAAK,OAAS,EAC9B,KAAK,OAAS,KAAK,SAAW,EAAI,KAAK,oBAElCA,IAAQ,KAAK,SAAW,GAC7B,KAAK,OAAS,KAAK,SAAW,EAC9B,KAAK,SAAW,KAAK,OAAS,EAAI,KAAK,qBAElCA,EAAM,KAAK,SAAW,GAAKA,EAAM,KAAK,OAAS,KACpD,KAAK,SAAWA,EAAM,KAAK,mBAAqBA,EAAM,KAAK,mBAAqB,EAChF,KAAK,OAASA,EAAM,KAAK,mBAAqBA,EAAM,KAAK,mBAAqB,EACxE,KAAK,oBAGf,QADIlR,EAAQ,CAAA,EACH6F,EAAI,KAAK,SAAUA,GAAK,KAAK,OAAQA,IAC1C7F,EAAM,KAAK,KAAK,KAAK,QAAQ,QAAQ6F,CAAC,CAAC,EAK3C,GAHAvF,EAAON,EAAM,KAAK;AAAA,CAAI,EACtBoW,EAAiBkB,EAAoBrG,EAAM,MAAM,IAAKA,EAAM,MAAM,MAAM,EACxEoF,EAAeiB,EAAoBrG,EAAM,IAAI,IAAKA,EAAM,IAAI,MAAM,EAC9DA,EAAM,MAAM,IAAM,KAAK,SAAU,CACjC,IAAIuG,EAAW,KAAK,KAAK,QAAQ,QAAQ,KAAK,SAAW,CAAC,EAC1DpB,EAAiBnF,EAAM,MAAM,IAAM,KAAK,SAAW,EAAI,EAAImF,EAC3DC,GAAgBmB,EAAS,OAAS,EAClClX,EAAOkX,EAAW;AAAA,EAAOlX,CACzC,SACqB2Q,EAAM,IAAI,IAAM,KAAK,OAAQ,CAClC,IAAIwG,EAAW,KAAK,KAAK,QAAQ,QAAQ,KAAK,OAAS,CAAC,EACxDpB,EAAepF,EAAM,IAAI,IAAM,KAAK,OAAS,EAAIwG,EAAS,OAASxG,EAAM,IAAI,OAC7EoF,GAAgB/V,EAAK,OAAS,EAC9BA,EAAOA,EAAO;AAAA,EAAOmX,CACrC,MACqBjC,GAAYtE,EAAM,IACvB5Q,EAAO;AAAA,EAAOA,EACd+V,GAAgB,EAChBD,GAAkB,GAElB9V,EAAK,OAAS6U,IACViB,EAAiBjB,GAAmBkB,EAAelB,EACnD7U,EAAOA,EAAK,MAAM,EAAG6U,CAAe,GAGpC7U,EAAO;AAAA,EACH8V,GAAkBC,EAClBD,EAAiBC,EAAe,GAGhCD,EAAiB,EACjBC,EAAe,KAI3B,IAAIgB,EAAW/W,EAAO;AAAA;AAAA,EAClB+W,GAAY,KAAK,YACjB,KAAK,KAAK,MAAQ,KAAK,UAAYA,EACnC,KAAK,mBAAqB,KAAK,iBAAmBA,EAAS,OAE3E,CAKQ,GAJI,KAAK,mBACL,KAAK,mBAAqB,KAAK,KAAK,eACpC,KAAK,iBAAmB,KAAK,KAAK,cAElC,KAAK,kBAAoBhB,GAAgB,KAAK,oBAAsBD,GAAkB,KAAK,KAAK,cAC7F,KAAK,iBAER,GAAI,CACA,KAAK,KAAK,kBAAkBA,EAAgBC,CAAY,EACxD,KAAK,mBAAqBD,EAC1B,KAAK,iBAAmBC,CACxC,MACsB,CACtB,CAEQ,KAAK,cAAgB,GAC7B,EACIZ,EAAU,UAAU,QAAU,SAAUiC,EAAS,CAC7C,KAAK,KAAOA,CACpB,EACIjC,EAAU,UAAU,sBAAwB,SAAUkC,EAAQ,CAG1D,GAFA,KAAK,SAAW,OAAO,iBACvB,KAAK,OAAS,OAAO,iBACjBA,EAAS,EAAG,CACZ,KAAK,mBAAqB,EAC1B,MACZ,CACQ,KAAK,mBAAqBA,CAClC,EACIlC,EAAU,UAAU,aAAe,UAAY,CAC3C,IAAImC,EAAY,GAIhB,GAHI,KAAK,KAAK,sBACVA,GAAa,GAAG,OAAO,KAAK,KAAK,oBAAqB,IAAI,GAE1D,KAAK,KAAK,QAAS,CACnB,IAAI1G,EAAM,KAAK,KAAK,QAAQ,UAAU,OAAO,IAC7C0G,GAAa9C,EAAI,wBAAyB,mBAAoB,CAAC5D,EAAM,CAAC,CAAC,CACnF,CACQ,KAAK,KAAK,aAAa,aAAc0G,CAAS,CACtD,EACInC,EAAU,UAAU,eAAiB,SAAUja,EAAS,CAChDA,EAAQ,kBACR,KAAK,KAAK,aAAa,gBAAiB,MAAM,EAC9C,KAAK,KAAK,aAAa,oBAAqBA,EAAQ,OAAS,OAAS,MAAM,EAC5E,KAAK,KAAK,aAAa,wBAAyBA,EAAQ,gBAAgB,IAGxE,KAAK,KAAK,aAAa,gBAAiB,OAAO,EAC/C,KAAK,KAAK,aAAa,oBAAqB,MAAM,EAClD,KAAK,KAAK,gBAAgB,uBAAuB,GAEjDA,EAAQ,MACR,KAAK,KAAK,aAAa,OAAQA,EAAQ,IAAI,EAE3CA,EAAQ,WACR,KAAK,KAAK,aAAa,uBAAwBsZ,EAAI,kCAAmC,QAAQ,CAAC,EAC/F,KAAK,aAAY,EAE7B,EACIW,EAAU,UAAU,MAAQ,UAAY,CACpC,IAAIG,EAAQ,KAIZ,GAHA,KAAK,eAAe,CAChB,SAAU,KAAK,KAAK,SAAS,2BACzC,CAAS,EACG,KAAK,WAAaV,GAAkB,KAAK,cAAgB,UACzD,OAAO,KAAK,KAAK,MAAM,CAAE,cAAe,EAAI,CAAE,EAClD,IAAI2C,EAAM,KAAK,KAAK,MAAM,IAC1B,KAAK,KAAK,MAAM,SAAW,QAC3B,KAAK,KAAK,MAAM,IAAM,MACtB,GAAI,CACA,IAAIC,EAAgB,KAAK,KAAK,sBAAqB,EAAG,KAAO,CACzE,MACkB,CACN,MACZ,CACQ,IAAIC,EAAY,CAAA,EAChB,GAAID,EAEA,QADIE,EAAI,KAAK,KAAK,cACXA,GAAKA,EAAE,UAAY,GACtBD,EAAU,KAAKC,CAAC,EAChBA,EAAE,aAAa,gBAAiB,MAAM,EAClC,CAACA,EAAE,eAAiBA,EAAE,YACtBA,EAAIA,EAAE,YAAW,EAAG,KAEpBA,EAAIA,EAAE,cAGlB,KAAK,KAAK,MAAM,CAAE,cAAe,EAAI,CAAE,EACnCF,GACAC,EAAU,QAAQ,SAAU1T,EAAG,CAC3BA,EAAE,gBAAgB,eAAe,CACjD,CAAa,EAEL,WAAW,UAAY,CACnBuR,EAAM,KAAK,MAAM,SAAW,GACxBA,EAAM,KAAK,MAAM,KAAO,QACxBA,EAAM,KAAK,MAAM,IAAMiC,EACvC,EAAW,CAAC,CACZ,EACIpC,EAAU,UAAU,KAAO,UAAY,CACnC,KAAK,KAAK,KAAI,CACtB,EACIA,EAAU,UAAU,UAAY,UAAY,CACxC,OAAO,KAAK,UACpB,EACIA,EAAU,UAAU,gBAAkB,SAAUvG,EAAI,CAChD,KAAK,aAAeA,CAC5B,EACIuG,EAAU,UAAU,gBAAkB,UAAY,CAC9C,OAAO,KAAK,YACpB,EACIA,EAAU,UAAU,WAAa,UAAY,CACzC,OAAO,KAAK,IACpB,EACIA,EAAU,UAAU,eAAiB,SAAU1N,EAAO,CAClD,KAAK,YAAcA,EACnB,KAAK,KAAK,SAAW,EAC7B,EACI0N,EAAU,UAAU,YAAc,SAAUwC,EAAU,CAC7C,KAAK,cACN,KAAK,KAAK,SAAWA,EACjC,EACIxC,EAAU,UAAU,0BAA4B,SAAU1N,EAAO,CACrE,EACI0N,EAAU,UAAU,cAAgB,SAAU1Y,EAAG,CAC7C,KAAK,iBAAmB,GACxB,KAAK,eAAc,EACnB,KAAK,KAAK,MAAM,oBAAqB,CACjC,OAAQ,KAAK,KACb,SAAUA,CACtB,CAAS,EACD,KAAK,YAAYA,EAAG,EAAI,CAChC,EACI0Y,EAAU,UAAU,YAAc,SAAU1Y,EAAGmb,EAAc,CACzD,IAAItC,EAAQ,KACP,KAAK,YACN,KAAK,UAAY,KAAK,KAAK,MAAM,SACrC,KAAK,KAAK,MAAM,SAAWsC,EAAe,kBAAoB,KAAOvO,EAAU,KAAO,eAAiB,IACjG,kBAAoB,KAAK,mBAAqB,KAAK,kBAAoB,KAAK,KAAK,SAAS,eAC1F,GAAM,MACZ,IAAI4B,EAAO,KAAK,KAAK,UAAU,sBAAqB,EAChDtG,EAAQiH,EAAI,cAAc,KAAK,KAAK,SAAS,EAC7C2L,EAAMtM,EAAK,KAAO,SAAStG,EAAM,cAAc,GAAK,GACpDkT,EAAO5M,EAAK,MAAQ,SAAStG,EAAM,eAAe,GAAK,GACvDmT,EAAS7M,EAAK,OAASsM,EAAM,KAAK,KAAK,aAAe,EACtDQ,EAAO,SAAUtb,EAAG,CACpBmP,EAAI,UAAU0J,EAAM,KAAM7Y,EAAE,QAAUob,EAAO,EAAG,KAAK,IAAIpb,EAAE,QAAU8a,EAAM,EAAGO,CAAM,CAAC,CACjG,EACQC,EAAKtb,CAAC,EACFA,EAAE,MAAQ,cAEd,KAAK,KAAK,SAAS,gBAAkB,GACrC,aAAa,KAAK,YAAY,EAC1B4M,EAAU,OACVjN,EAAM,QAAQ,KAAK,KAAK,UAAW2b,EAAM,KAAK,mBAAmB,KAAK,IAAI,CAAC,EACvF,EACI5C,EAAU,UAAU,QAAU,UAAY,CAClC,KAAK,KAAK,eACV,KAAK,KAAK,cAAc,YAAY,KAAK,IAAI,CACzD,EACWA,CACX,IACAnP,EAAQ,UAAYmP,EACpBnP,EAAQ,sBAAwB,SAAUgS,EAAWC,EAAQ,CACzD/C,EAAW8C,EACXhD,EAAQiD,CACZ,CAEA,CAAC,EAED,IAAI,OAAO,6BAA6B,CAAC,UAAU,UAAU,SAAS,mBAAmB,EAAG,SAASxS,EAASO,EAAShB,EAAO,CAC9H,IAAIqE,EAAY5D,EAAQ,kBAAkB,EACtCyS,EAAc,EACdC,EAAoB,IACpBC,EAAiC,UAAY,CAC7C,SAASA,EAAgBC,EAAc,CACnCA,EAAa,gBAAkB,KAC/B,IAAIC,EAASD,EAAa,OAC1BC,EAAO,kBAAkB,YAAa,KAAK,YAAY,KAAKD,CAAY,CAAC,EACzEC,EAAO,kBAAkB,WAAY,KAAK,cAAc,KAAKD,CAAY,CAAC,EAC1EC,EAAO,kBAAkB,cAAe,KAAK,cAAc,KAAKD,CAAY,CAAC,EAC7EC,EAAO,kBAAkB,YAAa,KAAK,YAAY,KAAKD,CAAY,CAAC,EACzEC,EAAO,kBAAkB,aAAc,KAAK,aAAa,KAAKD,CAAY,CAAC,EAC3E,IAAIrS,EAAU,CAAC,SAAU,cAAe,YAAa,eAAgB,mBACjE,mBAAoB,WAAY,cAAe,WAAW,EAC9DA,EAAQ,QAAQ,SAAU2L,EAAG,CACzB0G,EAAa1G,CAAC,EAAI,KAAKA,CAAC,CACpC,EAAW,IAAI,EACP0G,EAAa,cAAmB,KAAK,kBAAkB,KAAKA,EAAc,cAAc,EACxFA,EAAa,cAAmB,KAAK,kBAAkB,KAAKA,EAAc,cAAc,CAChG,CACI,OAAAD,EAAgB,UAAU,YAAc,SAAUG,EAAI,CAClD,IAAIC,EAAcD,EAAG,YAAW,EAC5BE,EAAMF,EAAG,oBAAmB,EAChC,KAAK,eAAiBA,EACtB,IAAID,EAAS,KAAK,OACdI,EAASH,EAAG,UAAS,EACzB,GAAIG,IAAW,EAAG,CACd,IAAIC,EAAiBL,EAAO,kBAAiB,EACzCM,EAAiBD,EAAe,QAAO,GACvCC,GAAkBF,GAAU,IAC5BJ,EAAO,UAAU,eAAeG,CAAG,EACnCC,GAAU,IACVJ,EAAO,UAAU,cAAcC,EAAG,QAAQ,EACrClP,EAAU,WACXkP,EAAG,eAAc,GAEzB,MACZ,CAEQ,GADA,KAAK,eAAe,KAAO,KAAK,IAAG,EAC/BC,GAAe,CAACF,EAAO,cACvBA,EAAO,MAAK,EACR,KAAK,eAAiB,CAAC,KAAK,iBAAmB,CAACA,EAAO,mBAAmB,CAC1E,KAAK,SAAS,WAAW,EACzB,KAAK,aAAaC,CAAE,EACpB,MAChB,CAEQ,YAAK,aAAaA,CAAE,EACpB,KAAK,YAAYE,EAAKF,EAAG,SAAS,QAAU,CAAC,EACtCA,EAAG,eAAc,CAChC,EACIH,EAAgB,UAAU,YAAc,SAAUK,EAAKI,EAAuB,CAC1EJ,EAAMA,GAAO,KAAK,OAAO,SAAS,wBAAwB,KAAK,EAAG,KAAK,CAAC,EACxE,IAAIH,EAAS,KAAK,OACb,KAAK,iBAEN,KAAK,eAAe,YAAW,EAC/BA,EAAO,UAAU,iBAAiBG,CAAG,EAC/BI,GACNP,EAAO,UAAU,eAAeG,CAAG,EAClCI,GACD,KAAK,OAAM,EACfP,EAAO,SAAS,eAAe,EAC/B,KAAK,SAAS,QAAQ,EAC9B,EACIF,EAAgB,UAAU,OAAS,UAAY,CAC3C,IAAIU,EAAQR,EAAS,KAAK,OACtBS,EAAST,EAAO,SAAS,wBAAwB,KAAK,EAAG,KAAK,CAAC,EACnE,GAAI,KAAK,gBAAiB,CACtB,IAAIxH,EAAM,KAAK,gBAAgB,aAAaiI,CAAM,EAClD,GAAIjI,GAAO,GACPgI,EAAS,KAAK,gBAAgB,YAEzBhI,GAAO,EACZgI,EAAS,KAAK,gBAAgB,UAE7B,CACD,IAAIE,EAAgBC,EAAqB,KAAK,gBAAiBF,EAAQT,EAAO,OAAO,EACrFS,EAASC,EAAc,OACvBF,EAASE,EAAc,MACvC,CACYV,EAAO,UAAU,mBAAmBQ,EAAO,IAAKA,EAAO,MAAM,CACzE,CACQR,EAAO,UAAU,iBAAiBS,CAAM,EACxCT,EAAO,SAAS,qBAAoB,CAC5C,EACIF,EAAgB,UAAU,kBAAoB,SAAUc,EAAU,CAC9D,IAAIJ,EAAQR,EAAS,KAAK,OACtBS,EAAST,EAAO,SAAS,wBAAwB,KAAK,EAAG,KAAK,CAAC,EAC/D3H,EAAQ2H,EAAO,UAAUY,CAAQ,EAAEH,EAAO,IAAKA,EAAO,MAAM,EAChE,GAAI,KAAK,gBAAiB,CACtB,IAAII,EAAW,KAAK,gBAAgB,aAAaxI,EAAM,KAAK,EACxDyI,EAAS,KAAK,gBAAgB,aAAazI,EAAM,GAAG,EACxD,GAAIwI,GAAY,IAAMC,GAAU,EAC5BN,EAAS,KAAK,gBAAgB,KAC1BnI,EAAM,IAAI,KAAOoI,EAAO,KAAOpI,EAAM,IAAI,QAAUoI,EAAO,UAC1DA,EAASpI,EAAM,eAEdyI,GAAU,GAAKD,GAAY,EAChCL,EAAS,KAAK,gBAAgB,OAC1BnI,EAAM,MAAM,KAAOoI,EAAO,KAAOpI,EAAM,MAAM,QAAUoI,EAAO,UAC9DA,EAASpI,EAAM,aAEdwI,GAAY,IAAMC,GAAU,EACjCL,EAASpI,EAAM,IACfmI,EAASnI,EAAM,UAEd,CACD,IAAIqI,EAAgBC,EAAqB,KAAK,gBAAiBF,EAAQT,EAAO,OAAO,EACrFS,EAASC,EAAc,OACvBF,EAASE,EAAc,MACvC,CACYV,EAAO,UAAU,mBAAmBQ,EAAO,IAAKA,EAAO,MAAM,CACzE,CACQR,EAAO,UAAU,iBAAiBS,CAAM,EACxCT,EAAO,SAAS,qBAAoB,CAC5C,EACIF,EAAgB,UAAU,iBAAmB,UAAY,CACrD,KAAK,gBAAkB,KACvB,KAAK,OAAO,WAAW,eAAe,CAC9C,EACIA,EAAgB,UAAU,UAAY,UAAY,CAC9C,IAAIiB,EAAWC,EAAa,KAAK,eAAe,EAAG,KAAK,eAAe,EAAG,KAAK,EAAG,KAAK,CAAC,EACpFC,EAAO,KAAK,IAAG,GACfF,EAAWnB,GAAeqB,EAAO,KAAK,eAAe,KAAO,KAAK,gBACjE,KAAK,YAAY,KAAK,eAAe,oBAAmB,CAAE,CACtE,EACInB,EAAgB,UAAU,cAAgB,SAAUG,EAAI,CACpD,IAAIE,EAAMF,EAAG,oBAAmB,EAC5BD,EAAS,KAAK,OACdrH,EAAUqH,EAAO,QACjB3H,EAAQM,EAAQ,gBAAgBwH,CAAG,EACnC9H,GACIA,EAAM,YACNA,EAAM,MAAM,SACZA,EAAM,IAAI,UAEd,KAAK,SAAS,QAAQ,IAGtBA,EAAQ2H,EAAO,UAAU,aAAaG,EAAI,IAAKA,EAAI,MAAM,EACzD,KAAK,SAAS,eAAe,GAEjC,KAAK,gBAAkB9H,EACvB,KAAK,OAAM,CACnB,EACIyH,EAAgB,UAAU,cAAgB,SAAUG,EAAI,CACpD,IAAIE,EAAMF,EAAG,oBAAmB,EAC5BD,EAAS,KAAK,OAClB,KAAK,SAAS,eAAe,EAC7B,IAAI3H,EAAQ2H,EAAO,kBAAiB,EAChC3H,EAAM,YAAW,GAAMA,EAAM,SAAS8H,EAAI,IAAKA,EAAI,MAAM,GACzD,KAAK,gBAAkBH,EAAO,UAAU,aAAa3H,EAAM,MAAM,GAAG,EACpE,KAAK,gBAAgB,IAAM2H,EAAO,UAAU,aAAa3H,EAAM,IAAI,GAAG,EAAE,KAGxE,KAAK,gBAAkB2H,EAAO,UAAU,aAAaG,EAAI,GAAG,EAEhE,KAAK,OAAM,CACnB,EACIL,EAAgB,UAAU,YAAc,SAAUG,EAAI,CAClD,IAAID,EAAS,KAAK,OAClBA,EAAO,UAAS,EAChB,KAAK,gBAAkBA,EAAO,kBAAiB,EAC/C,KAAK,SAAS,WAAW,CACjC,EACIF,EAAgB,UAAU,aAAe,SAAUG,EAAI,CACnD,GAAI,CAAAA,EAAG,YAAW,EAElB,CAAIA,EAAG,eAAiBA,EAAG,QAAU,CAACA,EAAG,SACrCA,EAAG,OAASA,EAAG,OACfA,EAAG,OAAS,GAEhB,IAAID,EAAS,KAAK,OACb,KAAK,cACN,KAAK,YAAc,CAAE,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,QAAS,CAAC,GACvD,IAAIkB,EAAa,KAAK,YAClB9B,EAAIa,EAAG,SAAS,UAChBxE,EAAK2D,EAAI8B,EAAW,EACpBC,EAAK1F,EAAKwE,EAAG,OAASxE,EAAKyF,EAAW,GACtCE,EAAK3F,EAAKwE,EAAG,OAASxE,EAAKyF,EAAW,GACtCzF,EAAKoE,IACLsB,GAAMA,EAAKD,EAAW,IAAM,EAC5BE,GAAMA,EAAKF,EAAW,IAAM,GAEhC,IAAIG,EAAY,KAAK,IAAIF,EAAKC,CAAE,EAC5BE,EAAY,GAKhB,GAJID,GAAa,GAAKrB,EAAO,SAAS,eAAeC,EAAG,OAASA,EAAG,MAAO,CAAC,IACxEqB,EAAY,IACZD,GAAa,GAAKrB,EAAO,SAAS,eAAe,EAAGC,EAAG,OAASA,EAAG,KAAK,IACxEqB,EAAY,IACZA,EACAJ,EAAW,QAAU9B,UAEhBA,EAAI8B,EAAW,QAAUrB,EAAmB,CACjD,IAAI0B,EAAW,KAAK,IAAIJ,CAAE,GAAK,IAAM,KAAK,IAAID,EAAW,EAAE,GACpD,KAAK,IAAIE,CAAE,GAAK,IAAM,KAAK,IAAIF,EAAW,EAAE,EAC/CK,GACAD,EAAY,GACZJ,EAAW,QAAU9B,GAGrB8B,EAAW,QAAU,CAErC,CAIQ,GAHAA,EAAW,EAAI9B,EACf8B,EAAW,GAAKC,EAChBD,EAAW,GAAKE,EACZE,EACA,OAAAtB,EAAO,SAAS,SAASC,EAAG,OAASA,EAAG,MAAOA,EAAG,OAASA,EAAG,KAAK,EAC5DA,EAAG,KAAI,EAE1B,EACWH,CACX,IACAA,EAAgB,UAAU,UAAYA,EAAgB,UAAU,iBAChEA,EAAgB,UAAU,aAAeA,EAAgB,UAAU,iBACnEA,EAAgB,UAAU,iBAAmBA,EAAgB,UAAU,iBACvEpS,EAAQ,gBAAkBoS,EAC1B,SAASkB,EAAaQ,EAAIC,EAAIC,EAAIC,EAAI,CAClC,OAAO,KAAK,KAAK,KAAK,IAAID,EAAKF,EAAI,CAAC,EAAI,KAAK,IAAIG,EAAKF,EAAI,CAAC,CAAC,CAChE,CACA,SAASd,EAAqBtI,EAAOoI,EAAQ9H,EAAS,CAClD,GAAIN,EAAM,MAAM,KAAOA,EAAM,IAAI,IAC7B,IAAIG,EAAM,EAAIiI,EAAO,OAASpI,EAAM,MAAM,OAASA,EAAM,IAAI,eACxDA,EAAM,MAAM,KAAOA,EAAM,IAAI,IAAM,GAAK,CAACA,EAAM,MAAM,QAAU,CAACA,EAAM,IAAI,OAC/E,IAAIG,EAAM,EAAIiI,EAAO,OAAS,EAAI9H,EAAQ,QAAQN,EAAM,MAAM,GAAG,EAAE,WAEnE,KAAIG,EAAM,EAAIiI,EAAO,IAAMpI,EAAM,MAAM,IAAMA,EAAM,IAAI,IAC3D,OAAIG,EAAM,EACC,CAAE,OAAQH,EAAM,MAAO,OAAQA,EAAM,GAAG,EAExC,CAAE,OAAQA,EAAM,IAAK,OAAQA,EAAM,KAAK,CACvD,CAEA,CAAC,EAED,IAAI,OAAO,wBAAwB,CAAC,UAAU,UAAU,SAAS,gBAAgB,mBAAmB,EAAG,SAASlL,EAASO,EAAShB,EAAO,CACzI,IAAI5I,EAAQqJ,EAAQ,cAAc,EAC9B4D,EAAY5D,EAAQ,kBAAkB,EACtCyU,EAA4B,UAAY,CACxC,SAASA,EAAWC,EAAU7B,EAAQ,CAAE,KAAK,MAAO,KAAK,OAAQ,KAAK,OAClE,KAAK,SAAW6B,EAChB,KAAK,OAAS7B,EACd,KAAK,EAAI,KAAK,QAAU6B,EAAS,QACjC,KAAK,EAAI,KAAK,QAAUA,EAAS,QACjC,KAAK,KAAO,KACZ,KAAK,aAAe,KACpB,KAAK,mBAAqB,GAC1B,KAAK,iBAAmB,EAChC,CACI,OAAAD,EAAW,UAAU,gBAAkB,UAAY,CAC/C9d,EAAM,gBAAgB,KAAK,QAAQ,EACnC,KAAK,mBAAqB,EAClC,EACI8d,EAAW,UAAU,eAAiB,UAAY,CAC9C9d,EAAM,eAAe,KAAK,QAAQ,EAClC,KAAK,iBAAmB,EAChC,EACI8d,EAAW,UAAU,KAAO,UAAY,CACpC,KAAK,gBAAe,EACpB,KAAK,eAAc,CAC3B,EACIA,EAAW,UAAU,oBAAsB,UAAY,CACnD,OAAI,KAAK,KACE,KAAK,MAChB,KAAK,KAAO,KAAK,OAAO,SAAS,wBAAwB,KAAK,QAAS,KAAK,OAAO,EAC5E,KAAK,KACpB,EACIA,EAAW,UAAU,aAAe,UAAY,CAC5C,IAAIE,EAAc,KAAK,oBAAmB,EAAG,IACzCC,EAAY,KAAK,OAAO,QAAQ,oBAAoBD,EAAa,CAAC,EAClEE,EAAe,KAAK,OAAO,QAAQ,oBAAoB,KAAK,OAAO,SAAS,aAAa,OAAO,IAAI,CAAC,EAAE,IAAK,CAAC,EACjH,OAAOD,EAAYC,CAC3B,EACIJ,EAAW,UAAU,YAAc,UAAY,CAC3C,GAAI,KAAK,eAAiB,KACtB,OAAO,KAAK,aAChB,IAAI5B,EAAS,KAAK,OACdK,EAAiBL,EAAO,kBAAiB,EAC7C,GAAIK,EAAe,QAAO,EACtB,KAAK,aAAe,OACnB,CACD,IAAIF,EAAM,KAAK,oBAAmB,EAClC,KAAK,aAAeE,EAAe,SAASF,EAAI,IAAKA,EAAI,MAAM,CAC3E,CACQ,OAAO,KAAK,YACpB,EACIyB,EAAW,UAAU,UAAY,UAAY,CACzC,OAAO9d,EAAM,UAAU,KAAK,QAAQ,CAC5C,EACI8d,EAAW,UAAU,YAAc,UAAY,CAC3C,OAAO,KAAK,SAAS,QAC7B,EACIA,EAAW,UAAU,YAAc,UAAY,CAC3C,OAAO7Q,EAAU,MAAQ,KAAK,SAAS,QAAU,KAAK,SAAS,OACvE,EACW6Q,CACX,IACAlU,EAAQ,WAAakU,CAErB,CAAC,EAED,IAAI,OAAO,iBAAiB,CAAC,UAAU,UAAU,QAAQ,EAAG,SAASzU,EAASO,EAAShB,EAAO,CAACgB,EAAQ,oBAAsB,SAA6B5J,EAAO,CAC7JA,EAAM,gBAAe,EACrB,IAAI4K,EAAS5K,EAAM,cACfme,EAAmBvT,EAAO,aAAeA,EAAO,aAC/CuT,GACDne,EAAM,eAAc,CAE5B,CAEA,CAAC,EAED,IAAI,OAAO,cAAc,CAAC,UAAU,UAAU,SAAS,cAAc,gBAAgB,YAAY,gBAAgB,EAAG,SAASqJ,EAASO,EAAShB,EAAO,CACtJ,IAAIwV,EAAa,MAAQ,KAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAUjX,EAAGD,EAAG,CAChC,OAAAkX,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAUjX,EAAGD,EAAG,CAAEC,EAAE,UAAYD,CAAE,GACzE,SAAUC,EAAGD,EAAG,CAAE,QAASQ,KAAKR,EAAO,OAAO,UAAU,eAAe,KAAKA,EAAGQ,CAAC,IAAGP,EAAEO,CAAC,EAAIR,EAAEQ,CAAC,IAC1F0W,EAAcjX,EAAGD,CAAC,CACjC,EACI,OAAO,SAAUC,EAAGD,EAAG,CACnB,GAAI,OAAOA,GAAM,YAAcA,IAAM,KACjC,MAAM,IAAI,UAAU,uBAAyB,OAAOA,CAAC,EAAI,+BAA+B,EAC5FkX,EAAcjX,EAAGD,CAAC,EAClB,SAASmX,GAAK,CAAE,KAAK,YAAclX,CAAE,CACrCA,EAAE,UAAYD,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmX,EAAG,UAAYnX,EAAE,UAAW,IAAImX,EACvF,CACA,EAAC,EACGC,EAAY,MAAQ,KAAK,UAAa,SAASzT,EAAG,CAClD,IAAI+E,EAAI,OAAO,QAAW,YAAc,OAAO,SAAUmE,EAAInE,GAAK/E,EAAE+E,CAAC,EAAG1G,EAAI,EAC5E,GAAI6K,EAAG,OAAOA,EAAE,KAAKlJ,CAAC,EACtB,GAAIA,GAAK,OAAOA,EAAE,QAAW,SAAU,MAAO,CAC1C,KAAM,UAAY,CACd,OAAIA,GAAK3B,GAAK2B,EAAE,SAAQA,EAAI,QACrB,CAAE,MAAOA,GAAKA,EAAE3B,GAAG,EAAG,KAAM,CAAC2B,CAAC,CACjD,CACA,EACI,MAAM,IAAI,UAAU+E,EAAI,0BAA4B,iCAAiC,CACzF,EACIL,EAAMnG,EAAQ,WAAW,EACjBA,EAAQ,aAAa,EACjC,IAAI6K,EAAQ7K,EAAQ,SAAS,EAAE,MAC3BmV,EAAsBnV,EAAQ,cAAc,EAAE,oBAC9CoV,EAAY,cACZC,EAAyB,UAAY,CACrC,SAASA,EAAQ1F,EAAY,CACzB,KAAK,OAAS,GACd,KAAK,SAAW,KAChB,KAAK,YAAcA,CAC3B,CACI,OAAA0F,EAAQ,UAAU,MAAQ,UAAY,CAClC,YAAK,SAAWlP,EAAI,cAAc,KAAK,EACvC,KAAK,SAAS,UAAYiP,EAC1B,KAAK,SAAS,MAAM,QAAU,OAC9B,KAAK,YAAY,YAAY,KAAK,QAAQ,EACnC,KAAK,QACpB,EACIC,EAAQ,UAAU,WAAa,UAAY,CACvC,OAAO,KAAK,UAAY,KAAK,MAAK,CAC1C,EACIA,EAAQ,UAAU,QAAU,SAAUpF,EAAM,CACxC,KAAK,aAAa,YAAcA,CACxC,EACIoF,EAAQ,UAAU,QAAU,SAAUC,EAAM,CACxC,KAAK,aAAa,UAAYA,CACtC,EACID,EAAQ,UAAU,YAAc,SAAUnJ,EAAGqJ,EAAG,CAC5C,KAAK,WAAU,EAAG,MAAM,KAAOrJ,EAAI,KACnC,KAAK,WAAU,EAAG,MAAM,IAAMqJ,EAAI,IAC1C,EACIF,EAAQ,UAAU,aAAe,SAAUxQ,EAAW,CAClDsB,EAAI,YAAY,KAAK,WAAU,EAAItB,CAAS,CACpD,EACIwQ,EAAQ,UAAU,SAAW,SAAUpY,EAAO,CACtC,KAAK,QACL,KAAK,MAAM,QAAUkJ,EAAI,eAAe,KAAK,WAAU,EAAI,UAAU,EACrE,KAAK,MAAM,UAAYA,EAAI,eAAe,KAAK,aAAc,KAAK,MAAM,QAAQ,GAEhFlJ,EAAM,QACNkJ,EAAI,YAAY,KAAK,WAAU,EAAI,UAAU,EAE7ClJ,EAAM,UACNkJ,EAAI,YAAY,KAAK,WAAU,EAAIlJ,EAAM,QAAQ,EAErD,KAAK,MAAQ,CACT,OAAQA,EAAM,OACd,SAAUA,EAAM,QAC5B,CACA,EACIoY,EAAQ,UAAU,KAAO,SAAUpF,EAAM/D,EAAGqJ,EAAG,CACvCtF,GAAQ,MACR,KAAK,QAAQA,CAAI,EACjB/D,GAAK,MAAQqJ,GAAK,MAClB,KAAK,YAAYrJ,EAAGqJ,CAAC,EACpB,KAAK,SACN,KAAK,WAAU,EAAG,MAAM,QAAU,QAClC,KAAK,OAAS,GAE1B,EACIF,EAAQ,UAAU,KAAO,SAAUre,EAAG,CAC9B,KAAK,SACL,KAAK,WAAU,EAAG,MAAM,QAAU,OAClC,KAAK,aAAa,UAAYoe,EAC9B,KAAK,OAAS,GAE1B,EACIC,EAAQ,UAAU,UAAY,UAAY,CACtC,OAAO,KAAK,WAAU,EAAG,YACjC,EACIA,EAAQ,UAAU,SAAW,UAAY,CACrC,OAAO,KAAK,WAAU,EAAG,WACjC,EACIA,EAAQ,UAAU,QAAU,UAAY,CACpC,KAAK,OAAS,GACV,KAAK,UAAY,KAAK,SAAS,YAC/B,KAAK,SAAS,WAAW,YAAY,KAAK,QAAQ,CAE9D,EACWA,CACX,IACIG,EAA8B,UAAY,CAC1C,SAASA,GAAe,CACpB,KAAK,OAAS,CAAA,CACtB,CACI,OAAAA,EAAa,UAAU,SAAW,SAAUC,EAAO,CAC/C,KAAK,OAAO,KAAKA,CAAK,EACtB,KAAK,aAAY,CACzB,EACID,EAAa,UAAU,YAAc,SAAUC,EAAO,CAClD,IAAIjb,EAAQ,KAAK,OAAO,QAAQib,CAAK,EACjCjb,IAAU,KACV,KAAK,OAAO,OAAOA,EAAO,CAAC,EAC3B,KAAK,aAAY,EAE7B,EACIgb,EAAa,UAAU,aAAe,UAAY,CAC9C,IAAIE,EAAKC,EAAIC,EAAKC,EAClB,KAAK,OAAO,KAAK,SAAUhY,EAAGC,EAAG,CAAE,OAAOA,EAAE,SAAWD,EAAE,QAAS,CAAE,EACpE,IAAIiY,EAAgB,CAAA,EACpB,GAAI,CACA,QAASC,EAAKb,EAAS,KAAK,MAAM,EAAGc,EAAKD,EAAG,KAAI,EAAI,CAACC,EAAG,KAAMA,EAAKD,EAAG,OAAQ,CAC3E,IAAIN,EAAQO,EAAG,MACXC,EAAgB,GACpB,GAAI,CACA,QAASC,GAAmBN,EAAM,OAAQV,EAASY,CAAa,GAAIK,EAAoBD,EAAgB,KAAI,EAAI,CAACC,EAAkB,KAAMA,EAAoBD,EAAgB,OAAQ,CACjL,IAAIE,EAAeD,EAAkB,MACrC,GAAI,KAAK,gBAAgBC,EAAcX,CAAK,EAAG,CAC3CQ,EAAgB,GAChB,KAC5B,CACA,CACA,OACuBI,EAAO,CAAET,EAAM,CAAE,MAAOS,CAAK,CAAG,SAEnC,GAAI,CACIF,GAAqB,CAACA,EAAkB,OAASN,EAAKK,EAAgB,SAASL,EAAG,KAAKK,CAAe,CAClI,SAC8B,GAAIN,EAAK,MAAMA,EAAI,KAAM,CACvD,CACoBK,EACAH,EAAc,KAAKL,CAAK,EAGxBA,EAAM,KAAI,CAE9B,CACA,OACea,EAAO,CAAEZ,EAAM,CAAE,MAAOY,CAAK,CAAG,SAEnC,GAAI,CACIN,GAAM,CAACA,EAAG,OAASL,EAAKI,EAAG,SAASJ,EAAG,KAAKI,CAAE,CAClE,SACsB,GAAIL,EAAK,MAAMA,EAAI,KAAM,CAC/C,CACA,EACIF,EAAa,UAAU,gBAAkB,SAAUe,EAAQC,EAAQ,CAC/D,IAAIC,EAAQF,EAAO,WAAU,EAAG,sBAAqB,EACjDG,EAAQF,EAAO,WAAU,EAAG,sBAAqB,EACrD,OAAQC,EAAM,KAAOC,EAAM,OAASD,EAAM,MAAQC,EAAM,MAAQD,EAAM,IAAMC,EAAM,QAAUD,EAAM,OAC5FC,EAAM,GACpB,EACWlB,CACX,IACImB,EAAe,IAAInB,EACvBjV,EAAQ,aAAeoW,EACvBpW,EAAQ,QAAU8U,EAClB,IAAIuB,EAA8B,SAAUC,EAAQ,CAChD9B,EAAU6B,EAAcC,CAAM,EAC9B,SAASD,EAAajH,EAAY,CAC1BA,IAAe,SAAUA,EAAa,SAAS,MACnD,IAAIE,EAAQgH,EAAO,KAAK,KAAMlH,CAAU,GAAK,KAC7CE,EAAM,QAAU,OAChBA,EAAM,MAAQ,EACdA,EAAM,SAAW,IACjBA,EAAM,UAAY,OAClBA,EAAM,WAAaA,EAAM,WAAW,KAAKA,CAAK,EAC9CA,EAAM,YAAcA,EAAM,YAAY,KAAKA,CAAK,EAChDA,EAAM,aAAeA,EAAM,aAAa,KAAKA,CAAK,EAClDA,EAAM,KAAOA,EAAM,KAAK,KAAKA,CAAK,EAClC,IAAI1L,EAAK0L,EAAM,WAAU,EACzB,OAAA1L,EAAG,MAAM,WAAa,WACtBA,EAAG,MAAM,cAAgB,OACzBA,EAAG,iBAAiB,WAAY0L,EAAM,UAAU,EAChD1L,EAAG,SAAW,GACdA,EAAG,iBAAiB,OAAQ,UAAY,CAC/BA,EAAG,SAAS,SAAS,aAAa,GACnC,KAAK,KAAI,CACzB,EAAU,KAAK0L,CAAK,CAAC,EACb1L,EAAG,iBAAiB,QAASgR,CAAmB,EACzCtF,CACf,CACI,OAAA+G,EAAa,UAAU,YAAc,SAAU/D,EAAQ,CACnDA,EAAO,GAAG,YAAa,KAAK,WAAW,EACvCA,EAAO,GAAG,YAAa,KAAK,IAAI,EAChC,IAAItR,EAASsR,EAAO,SAAS,oBAAmB,EAC5CtR,GAAU,OAAOA,EAAO,qBAAwB,YAChDA,EAAO,iBAAiB,WAAY,KAAK,WAAY,EAAI,CAErE,EACIqV,EAAa,UAAU,iBAAmB,SAAU/D,EAAQ,CACxDA,EAAO,IAAI,YAAa,KAAK,WAAW,EACxCA,EAAO,IAAI,YAAa,KAAK,IAAI,EACjC,IAAItR,EAASsR,EAAO,SAAS,oBAAmB,EAC5CtR,GAAU,OAAOA,EAAO,qBAAwB,YAChDA,EAAO,oBAAoB,WAAY,KAAK,WAAY,EAAI,EAE5D,KAAK,UACL,aAAa,KAAK,OAAO,EACzB,KAAK,QAAU,KAE3B,EACIqV,EAAa,UAAU,YAAc,SAAU5f,EAAG6b,EAAQ,CACtD,KAAK,UAAY7b,EACjB,KAAK,MAAQ,KAAK,IAAG,EACrB,IAAI8f,EAAiBjE,EAAO,cAAc,eAC1C,GAAI,KAAK,OAAQ,CACb,IAAIG,EAAM,KAAK,WAAa,KAAK,UAAU,oBAAmB,GAC1D,CAAC,KAAK,OACH,CAAC,KAAK,MAAM,SAASA,EAAI,IAAKA,EAAI,MAAM,GACxC8D,GACA,KAAK,gBAAgB,KAAK,SAAS,IACtC,KAAK,KAAI,CAEzB,CACY,KAAK,SAAWA,IAEpB,KAAK,UAAY9f,EACjB,KAAK,QAAU,WAAW,KAAK,aAAc,KAAK,QAAQ,EAClE,EACI4f,EAAa,UAAU,aAAe,UAAY,CAC1C,KAAK,SACL,aAAa,KAAK,OAAO,EAC7B,IAAItI,EAAK,KAAK,IAAG,EAAK,KAAK,MAC3B,GAAI,KAAK,SAAWA,EAAK,GAAI,CACzB,KAAK,QAAU,WAAW,KAAK,aAAc,KAAK,SAAWA,CAAE,EAC/D,MACZ,CACQ,KAAK,QAAU,KACX,KAAK,WAAa,CAAC,KAAK,gBAAgB,KAAK,SAAS,GACtD,KAAK,YAAY,KAAK,UAAW,KAAK,UAAU,MAAM,CAElE,EACIsI,EAAa,UAAU,gBAAkB,SAAU5f,EAAG,CAClD,IAAI6b,EAAS7b,EAAE,OACX+f,EAAS/f,EAAE,oBAAmB,EAC9BuD,EAAOsY,EAAO,QAAQ,QAAQkE,EAAO,GAAG,EAC5C,GAAIA,EAAO,QAAUxc,EAAK,OAAQ,CAC9B,IAAIyc,EAAYnE,EAAO,SAAS,yBAAyB7b,EAAE,QAASA,EAAE,OAAO,EACzEigB,EAAapE,EAAO,QAAQ,yBAAyBkE,EAAO,IAAKA,EAAO,MAAM,EAClF,GAAIE,EAAW,QAAUD,EAAU,QAC5BC,EAAW,KAAOD,EAAU,IAC/B,MAAO,EAEvB,CACQ,MAAO,EACf,EACIJ,EAAa,UAAU,gBAAkB,SAAU5U,EAAO,CACtD,KAAK,YAAcA,CAC3B,EACI4U,EAAa,UAAU,aAAe,SAAU/D,EAAQ3H,EAAOgM,EAASC,EAAe,CACnF,GAAI,EAAAA,GAAiBA,GAAiB,KAAK,YAEvC,OAAK,QAAU,SAAS,eAAiB,KAAK,WAAU,GAE5D,KAAIC,EAAWvE,EAAO,SACjB,KAAK,SACN8D,EAAa,SAAS,IAAI,EAC1B,KAAK,qBAAoB,EACzB,KAAK,SAASS,EAAS,KAAK,GAEhC,KAAK,OAAS,GACd,KAAK,MAAQvM,EAAM,WAAWK,EAAM,MAAOA,EAAM,GAAG,EACpD,IAAIhK,EAAWkW,EAAS,wBAAwBlM,EAAM,MAAM,IAAKA,EAAM,MAAM,MAAM,EAC/E1F,EAAO4R,EAAS,SAAS,sBAAqB,EAC9ClW,EAAS,MAAQsE,EAAK,OACtBtE,EAAS,MAAQsE,EAAK,MAC1B,IAAIhB,EAAU,KAAK,WAAU,EAC7BA,EAAQ,UAAY,GACpBA,EAAQ,YAAY0S,CAAO,EAC3B1S,EAAQ,MAAM,UAAY,GAC1BA,EAAQ,MAAM,QAAU,QACxB,KAAK,aAAaqO,EAAQ3R,EAAU,GAAMgK,CAAK,EAC/C/E,EAAI,gBAAgB3B,CAAO,EACnC,EACIoS,EAAa,UAAU,aAAe,SAAU/D,EAAQ3R,EAAUmW,EAAYnM,EAAO,CACjF,IAAIoM,EAAS,GACbD,GAAc,KAAK,UAAUnM,EAAO2H,EAAO,OAAO,EAClD,IAAIuE,EAAWvE,EAAO,SAClBrO,EAAU,KAAK,WAAU,EACzB+S,EAAc/S,EAAQ,aACtBgT,EAAahT,EAAQ,YACrBiT,EAAYvW,EAAS,MACrBwW,EAAaxW,EAAS,MACtByW,EAAa,OAAO,YAAcF,EAAYL,EAAS,WACvDQ,EAAU,KAAK,kBAAkBL,EAAaE,EAAWE,EAAaL,CAAM,EAChF9S,EAAQ,MAAM,WAAaoT,EAAUH,EAAYE,GAAcL,EAAS,KACxE9S,EAAQ,MAAM,IAAMoT,EAAU,GAAKH,EAAYL,EAAS,WAAa,KACrE5S,EAAQ,MAAM,OAASoT,EAAU,OAAO,YAAcH,EAAY,KAAO,GACzEjT,EAAQ,MAAM,KAAO,KAAK,IAAIkT,EAAY,OAAO,WAAaF,EAAaF,CAAM,EAAI,IAC7F,EACIV,EAAa,UAAU,kBAAoB,SAAUW,EAAaE,EAAWE,EAAY,CACrF,MAAO,EAAEF,EAAYF,EAAc,GAAKE,EAAYE,EAC5D,EACIf,EAAa,UAAU,UAAY,SAAU1L,EAAOM,EAAS,CACrD,KAAK,QACL,KAAK,eAAe,aAAa,KAAK,MAAM,EAEhD,KAAK,eAAiBA,EACtB,KAAK,OAASA,GAAWA,EAAQ,UAAUN,EAAO,uBAAwB,MAAM,CACxF,EACI0L,EAAa,UAAU,KAAO,SAAU5f,EAAG,CACnCA,GAAK,KAAK,eAAiBA,EAAE,MAAQ,WACjCA,EAAE,MAAQ,UAId,CAACA,GAAK,SAAS,eAAiB,KAAK,WAAU,GAE/CA,GAAKA,EAAE,SAAWA,EAAE,MAAQ,WAAaA,EAAE,SAAWA,EAAE,UAAY,KAAK,SAAS,SAASA,EAAE,MAAM,IAEvG,KAAK,UAAY,KACb,KAAK,SACL,aAAa,KAAK,OAAO,EAC7B,KAAK,QAAU,KACf,KAAK,UAAU,IAAI,EACf,KAAK,SACL,KAAK,cAAgB,GACrB,KAAK,mBAAkB,EACvB,KAAK,WAAU,EAAG,MAAM,QAAU,OAClC,KAAK,OAAS,GACd2f,EAAa,YAAY,IAAI,GAEzC,EACIC,EAAa,UAAU,qBAAuB,UAAY,CACtD,OAAO,iBAAiB,UAAW,KAAK,KAAM,EAAI,EAClD,OAAO,iBAAiB,QAAS,KAAK,KAAM,EAAI,EAChD,OAAO,iBAAiB,YAAa,KAAK,KAAM,EAAI,CAC5D,EACIA,EAAa,UAAU,mBAAqB,UAAY,CACpD,OAAO,oBAAoB,UAAW,KAAK,KAAM,EAAI,EACrD,OAAO,oBAAoB,QAAS,KAAK,KAAM,EAAI,EACnD,OAAO,oBAAoB,YAAa,KAAK,KAAM,EAAI,CAC/D,EACIA,EAAa,UAAU,WAAa,SAAU5f,EAAG,CACzC,KAAK,UACL,aAAa,KAAK,OAAO,EACzB,KAAK,QAAU,MAEnB,KAAK,UAAY,KACZ,KAAK,SAEN,CAACA,EAAE,eAAiB,KAAK,WAAU,EAAG,SAASA,EAAE,aAAa,GAE9DA,GAAKA,EAAE,cAAc,SAASA,EAAE,aAAa,GAE5CA,EAAE,cAAc,UAAU,SAAS,aAAa,GACjD,KAAK,KAAI,EACrB,EACW4f,CACX,EAAEvB,CAAO,EACT9U,EAAQ,aAAeqW,CAEvB,CAAC,EAED,IAAI,OAAO,mCAAmC,CAAC,UAAU,UAAU,SAAS,cAAc,wBAAwB,cAAc,aAAa,WAAW,EAAG,SAAS5W,EAASO,EAAShB,EAAO,CAC7L,IAAIwV,EAAa,MAAQ,KAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAUjX,EAAGD,EAAG,CAChC,OAAAkX,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU,EAAGlX,EAAG,CAAE,EAAE,UAAYA,CAAE,GACzE,SAAU,EAAGA,EAAG,CAAE,QAASQ,KAAKR,EAAO,OAAO,UAAU,eAAe,KAAKA,EAAGQ,CAAC,IAAG,EAAEA,CAAC,EAAIR,EAAEQ,CAAC,IAC1F0W,EAAcjX,EAAGD,CAAC,CACjC,EACI,OAAO,SAAUC,EAAGD,EAAG,CACnB,GAAI,OAAOA,GAAM,YAAcA,IAAM,KACjC,MAAM,IAAI,UAAU,uBAAyB,OAAOA,CAAC,EAAI,+BAA+B,EAC5FkX,EAAcjX,EAAGD,CAAC,EAClB,SAASmX,GAAK,CAAE,KAAK,YAAclX,CAAE,CACrCA,EAAE,UAAYD,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmX,EAAG,UAAYnX,EAAE,UAAW,IAAImX,EACvF,CACA,EAAC,EACGC,EAAY,MAAQ,KAAK,UAAa,SAASzT,EAAG,CAClD,IAAI+E,EAAI,OAAO,QAAW,YAAc,OAAO,SAAUmE,EAAInE,GAAK/E,EAAE+E,CAAC,EAAG1G,EAAI,EAC5E,GAAI6K,EAAG,OAAOA,EAAE,KAAKlJ,CAAC,EACtB,GAAIA,GAAK,OAAOA,EAAE,QAAW,SAAU,MAAO,CAC1C,KAAM,UAAY,CACd,OAAIA,GAAK3B,GAAK2B,EAAE,SAAQA,EAAI,QACrB,CAAE,MAAOA,GAAKA,EAAE3B,GAAG,EAAG,KAAM,CAAC2B,CAAC,CACjD,CACA,EACI,MAAM,IAAI,UAAU+E,EAAI,0BAA4B,iCAAiC,CACzF,EACIL,EAAMnG,EAAQ,YAAY,EAC1ByU,EAAazU,EAAQ,eAAe,EAAE,WACtC4W,EAAe5W,EAAQ,YAAY,EAAE,aACrC+O,EAAM/O,EAAQ,WAAW,EAAE,IAC3B6K,EAAQ7K,EAAQ,UAAU,EAAE,MAChC,SAAS6X,EAAcjF,EAAc,CACjC,IAAIC,EAASD,EAAa,OACtBkF,EAASjF,EAAO,SAAS,aAC7BD,EAAa,SAAW,IAAImF,EAAclF,CAAM,EAChDD,EAAa,SAAS,YAAYC,CAAM,EACxCD,EAAa,SAAS,gBAAgB,SAAU5b,EAAG6b,EAAQ,CACvD,IAAI1H,EAAMnU,EAAE,oBAAmB,EAAG,IAClC4b,EAAa,SAAS,YAAYzH,CAAG,CAC7C,CAAK,EACDyH,EAAa,OAAO,kBAAkB,kBAAmB,SAAU5b,EAAG,CAClE,GAAI,GAAC6b,EAAO,UAAS,GAAM7b,EAAE,UAAS,GAAM,GAE5C,KAAIghB,EAAeF,EAAO,UAAU9gB,CAAC,EACrC,GAAIghB,GAAgB,cAEpB,KAAI7M,EAAMnU,EAAE,oBAAmB,EAAG,IAC9Bwa,EAAYqB,EAAO,QAAQ,UAC/B,GAAI7b,EAAE,YAAW,EACbwa,EAAU,SAASrG,EAAK,CAAC,MACxB,CACD,GAAInU,EAAE,SAAS,QAAU,EACrB,OAAA6b,EAAO,UAAS,EACT7b,EAAE,eAAc,EAE3B4b,EAAa,gBAAkBC,EAAO,UAAU,aAAa1H,CAAG,CAC5E,CACQ,OAAAyH,EAAa,SAAS,eAAe,EACrCA,EAAa,aAAa5b,CAAC,EACpBA,EAAE,eAAc,GAC/B,CAAK,CACL,CACAuJ,EAAQ,cAAgBsX,EACxB,IAAIE,EAA+B,SAAUlB,EAAQ,CACjD9B,EAAUgD,EAAelB,CAAM,EAC/B,SAASkB,EAAclF,EAAQ,CAC3B,IAAIhD,EAAQgH,EAAO,KAAK,KAAMhE,EAAO,SAAS,GAAK,KACnDhD,EAAM,GAAK,MAAQ,EAAEkI,EAAc,KACnClI,EAAM,OAASgD,EACfhD,EAAM,kBACN,IAAI1L,EAAK0L,EAAM,WAAU,EACzB,OAAA1L,EAAG,aAAa,OAAQ,SAAS,EACjCA,EAAG,aAAa,KAAM0L,EAAM,EAAE,EAC9B1L,EAAG,MAAM,cAAgB,OACzB0L,EAAM,SAAW,GACjBA,EAAM,eAAiBA,EAAM,eAAe,KAAKA,CAAK,EACtDA,EAAM,cAAgBA,EAAM,cAAc,KAAKA,CAAK,EACpDA,EAAM,aAAa,oBAAoB,EAChCA,CACf,CACI,OAAAkI,EAAc,UAAU,eAAiB,SAAUrD,EAAU,CACzD,IAAIuD,EAAW,IAAIxD,EAAWC,EAAU,KAAK,MAAM,EACnD,KAAK,YAAYuD,EAAU,KAAK,MAAM,CAC9C,EACIF,EAAc,UAAU,cAAgB,SAAUrD,EAAU,CACxD,IAAIuD,EAAW,IAAIxD,EAAWC,EAAU,KAAK,MAAM,EACnD,KAAK,WAAWuD,CAAQ,CAChC,EACIF,EAAc,UAAU,YAAc,SAAUlF,EAAQ,CACpD,IAAIiF,EAASjF,EAAO,SAAS,QAC7BiF,EAAO,iBAAiB,YAAa,KAAK,cAAc,EACxDA,EAAO,iBAAiB,WAAY,KAAK,aAAa,EACtDjB,EAAO,UAAU,YAAY,KAAK,KAAMhE,CAAM,CACtD,EACIkF,EAAc,UAAU,iBAAmB,SAAUlF,EAAQ,CACzD,IAAIiF,EAASjF,EAAO,SAAS,QAC7BiF,EAAO,oBAAoB,YAAa,KAAK,cAAc,EAC3DA,EAAO,oBAAoB,WAAY,KAAK,aAAa,EACzDjB,EAAO,UAAU,iBAAiB,KAAK,KAAMhE,CAAM,CAC3D,EACIkF,EAAc,UAAU,QAAU,UAAY,CACtC,KAAK,QACL,KAAK,iBAAiB,KAAK,MAAM,EAErClB,EAAO,UAAU,QAAQ,KAAK,IAAI,CAC1C,EACI,OAAO,eAAekB,EAAe,mBAAoB,CACrD,IAAK,UAAY,CACb,MAAO,CACH,MAAO,CACH,SAAUhJ,EAAI,2CAA4C,OAAO,EACjE,OAAQA,EAAI,yCAA0C,QAAQ,GAElE,SAAU,CACN,SAAUA,EAAI,8CAA+C,kBAAkB,EAC/E,OAAQA,EAAI,4CAA6C,mBAAmB,GAEhF,QAAS,CACL,SAAUA,EAAI,6CAA8C,SAAS,EACrE,OAAQA,EAAI,2CAA4C,UAAU,GAEtE,KAAM,CACF,SAAUA,EAAI,0CAA2C,qBAAqB,EAC9E,OAAQA,EAAI,wCAAyC,sBAAsB,GAE/E,KAAM,CACF,SAAUA,EAAI,0CAA2C,YAAY,EACrE,OAAQA,EAAI,wCAAyC,aAAa,EAEtF,CACA,EACQ,WAAY,GACZ,aAAc,EACtB,CAAK,EACDgJ,EAAc,UAAU,YAAc,SAAU5M,EAAK,CACjD,IAAIwK,EACAmC,EAAS,KAAK,OAAO,SAAS,aAC9BI,EAAmBJ,EAAO,aAAa3M,CAAG,EAC1CgN,EACAD,EACAC,EAAa,CACT,YAAa,MAAM,KAAKD,EAAiB,WAAW,EACpD,KAAM,MAAM,KAAKA,EAAiB,IAAI,CACtD,EAEYC,EAAa,CAAE,YAAa,GAAI,KAAM,CAAA,CAAE,EAC5C,IAAIC,EAAON,EAAO,QAAQ,YAAY3M,CAAG,EACzC,GAAIiN,GAAQN,EAAO,uBAAwB,CAIvC,QAHIO,EAAoB,CAAE,MAAO,CAAA,EAAI,SAAU,CAAA,EAAI,QAAS,CAAA,EAAI,KAAM,GAAI,KAAM,CAAA,CAAE,EAC9EC,EAAe,CAAE,MAAO,EAAG,SAAU,EAAG,QAAS,EAAG,KAAM,EAAG,KAAM,CAAC,EACpEC,EACKzY,EAAIqL,EAAM,EAAGrL,GAAKsY,EAAK,IAAI,IAAKtY,IACrC,GAAKgY,EAAO,aAAahY,CAAC,EAE1B,QAAS0K,EAAI,EAAGA,EAAIsN,EAAO,aAAahY,CAAC,EAAE,KAAK,OAAQ0K,IAAK,CACzD,IAAIgO,EAAiBV,EAAO,aAAahY,CAAC,EAAE,KAAK0K,CAAC,EAClD6N,EAAkBG,CAAc,EAAE,KAAKV,EAAO,aAAahY,CAAC,EAAE,KAAK0K,CAAC,CAAC,GACjE,CAAC+N,GACDD,EAAaE,CAAc,EAAIF,EAAaC,CAA8B,KAC1EA,EAAiCC,EAEzD,CAEY,GAAI,CAAC,QAAS,WAAY,SAAS,EAAE,SAASD,CAA8B,EAAG,CAC3E,IAAIE,EAA2B,GAAG,OAAOV,EAAc,2BAA2BM,CAAiB,EAAG,kBAAkB,EACxHF,EAAW,YAAY,KAAKM,CAAwB,EACpDN,EAAW,KAAK,KAAKI,EAAiC,OAAO,CAC7E,CACA,CACQ,GAAIJ,EAAW,YAAY,SAAW,EAClC,OAAO,KAAK,KAAI,EAGpB,QAFIO,EAAqB,CAAE,MAAO,CAAA,EAAI,SAAU,CAAA,EAAI,QAAS,CAAA,EAAI,KAAM,GAAI,KAAM,CAAA,CAAE,EAC/EC,EAAgBb,EAAO,mBAAqB,eAAiB,WACxDhY,EAAI,EAAGA,EAAIqY,EAAW,YAAY,OAAQrY,IAAK,CACpD,IAAI8Y,EAAczS,EAAI,cAAc,MAAM,EACtC0S,EAAc1S,EAAI,cAAc,MAAM,GACzCwP,EAAKkD,EAAY,WAAW,IAAI,MAAMlD,EAAI,CAAC,OAAO,OAAOwC,EAAW,KAAKrY,CAAC,CAAC,EAAG6Y,CAAa,CAAC,EAC7FE,EAAY,aAAa,aAAc,GAAG,OAAOd,EAAc,iBAAiBI,EAAW,KAAKrY,CAAC,EAAE,QAAQ,QAAS,EAAE,CAAC,EAAE,QAAQ,CAAC,EAClI+Y,EAAY,aAAa,OAAQ,KAAK,EACtCA,EAAY,YAAY1S,EAAI,eAAe,GAAG,CAAC,EAC/CyS,EAAY,YAAYC,CAAW,EACnCD,EAAY,YAAYzS,EAAI,eAAegS,EAAW,YAAYrY,CAAC,CAAC,CAAC,EACrE8Y,EAAY,YAAYzS,EAAI,cAAc,IAAI,CAAC,EAC/CuS,EAAmBP,EAAW,KAAKrY,CAAC,EAAE,QAAQ,QAAS,EAAE,CAAC,EAAE,KAAK8Y,CAAW,CACxF,CACQ,IAAIE,EAAiB3S,EAAI,cAAc,MAAM,EAC7CuS,EAAmB,MAAM,QAAQ,SAAUvU,EAAI,CAAE,OAAO2U,EAAe,YAAY3U,CAAE,CAAE,CAAE,EACzFuU,EAAmB,SAAS,QAAQ,SAAUvU,EAAI,CAAE,OAAO2U,EAAe,YAAY3U,CAAE,CAAE,CAAE,EAC5FuU,EAAmB,QAAQ,QAAQ,SAAUvU,EAAI,CAAE,OAAO2U,EAAe,YAAY3U,CAAE,CAAE,CAAE,EAC3FuU,EAAmB,KAAK,QAAQ,SAAUvU,EAAI,CAAE,OAAO2U,EAAe,YAAY3U,CAAE,CAAE,CAAE,EACxFuU,EAAmB,KAAK,QAAQ,SAAUvU,EAAI,CAAE,OAAO2U,EAAe,YAAY3U,CAAE,CAAE,CAAE,EACxF2U,EAAe,aAAa,YAAa,QAAQ,EACjD,IAAIC,EAAiB,KAAK,0BAA0B5N,CAAG,EACnD4N,GACAA,EAAe,aAAa,mBAAoB,KAAK,EAAE,EAE3D,IAAI7N,EAAQL,EAAM,WAAW,CAAE,IAAKM,EAAK,OAAQ,CAAC,EAAI,CAAE,IAAKA,EAAK,OAAQ,CAAC,CAAE,EAC7E,KAAK,aAAa,KAAK,OAAQD,EAAO4N,CAAc,EACpD,KAAK,kBAAoB3N,EACzB,KAAK,OAAO,QAAQ,oBAAqB,IAAI,CACrD,EACI4M,EAAc,UAAU,aAAe,SAAUlF,EAAQmG,EAAkBC,EAAa/N,EAAO,CAC3F,IAAIgO,EAAa,KAAK,eAAehO,EAAM,MAAM,GAAG,EACpD,GAAKgO,EAEL,KAAI/U,EAAK+U,GAAcA,EAAW,QAC9BC,EAAWhV,GAAOA,EAAG,cAAc,wBAAwB,EAC/D,GAAKgV,EAEL,KAAIC,EAAID,EAAS,sBAAqB,EACtC,GAAKC,EAEL,KAAIlY,EAAW,CACX,MAAOkY,EAAE,MACT,MAAOA,EAAE,GACrB,EACQ,OAAOvC,EAAO,UAAU,aAAa,KAAK,KAAMhE,EAAQ3R,EAAU,GAAOgK,CAAK,IACtF,EACI6M,EAAc,UAAU,kBAAoB,SAAUR,EAAaE,EAAWE,EAAY,CACtF,OAAOA,EAAaJ,CAC5B,EACIQ,EAAc,UAAU,0BAA4B,SAAU5M,EAAK,CAC/D,IAAIkO,EAAO,KAAK,eAAelO,CAAG,EAClC,GAAIkO,EAAM,CACN,IAAI7U,EAAU6U,EAAK,QACnB,GAAI7U,EAAQ,WAAW,OAAS,EAC5B,OAAOA,EAAQ,WAAW,CAAC,CAE3C,CACA,EACIuT,EAAc,UAAU,eAAiB,SAAU5M,EAAK,CACpD,OAAO,KAAK,OAAO,SAAS,aAAa,OAAO,MAAM,KAAK,SAAUhH,EAAI,CAAE,OAAOA,EAAG,MAAQgH,CAAI,CAAE,CAC3G,EACI4M,EAAc,UAAU,KAAO,SAAU/gB,EAAG,CACxC,GAAK,KAAK,OAIV,IADA,KAAK,SAAS,gBAAgB,WAAW,EACrC,KAAK,mBAAqB,KAAW,CACrC,IAAI+hB,EAAiB,KAAK,0BAA0B,KAAK,iBAAiB,EACtEA,GACAA,EAAe,gBAAgB,kBAAkB,CAEjE,CACQ,KAAK,kBAAoB,OACzB,KAAK,OAAO,QAAQ,oBAAqB,IAAI,EAC7ClC,EAAO,UAAU,KAAK,KAAK,KAAM7f,CAAC,EAC1C,EACI+gB,EAAc,2BAA6B,SAAUuB,EAAa,CAC9D,IAAI5D,EAAKC,EACL4D,EAAU,CAAA,EACVC,EAAkB,CAAC,QAAS,WAAY,UAAW,OAAQ,MAAM,EACrE,GAAI,CACA,QAASC,EAAoBvE,EAASsE,CAAe,EAAGE,EAAsBD,EAAkB,KAAI,EAAI,CAACC,EAAoB,KAAMA,EAAsBD,EAAkB,KAAI,EAAI,CAC/K,IAAIjB,EAAiBkB,EAAoB,MACzC,GAAKJ,EAAYd,CAAc,EAAE,OAEjC,KAAImB,EAAQL,EAAYd,CAAc,EAAE,SAAW,EAAIT,EAAc,iBAAiBS,CAAc,EAAE,SAAWT,EAAc,iBAAiBS,CAAc,EAAE,OAChKe,EAAQ,KAAK,GAAG,OAAOD,EAAYd,CAAc,EAAE,OAAQ,GAAG,EAAE,OAAOmB,CAAK,CAAC,EAC7F,CACA,OACerD,EAAO,CAAEZ,EAAM,CAAE,MAAOY,CAAK,CAAG,SAEnC,GAAI,CACIoD,GAAuB,CAACA,EAAoB,OAAS/D,EAAK8D,EAAkB,SAAS9D,EAAG,KAAK8D,CAAiB,CAClI,SACsB,GAAI/D,EAAK,MAAMA,EAAI,KAAM,CAC/C,CACQ,OAAO6D,EAAQ,KAAK,IAAI,CAChC,EACIxB,EAAc,UAAU,gBAAkB,SAAU/gB,EAAG,CACnD,IAAI6b,EAAS7b,EAAE,OACXwO,EAAOqN,EAAO,SAAS,QAAQ,sBAAqB,EACxD,MAAO,EAAE7b,EAAE,SAAWwO,EAAK,MAAQxO,EAAE,SAAWwO,EAAK,OACjDxO,EAAE,SAAWwO,EAAK,KAAOxO,EAAE,SAAWwO,EAAK,OACvD,EACWuS,CACX,EAAEnB,CAAY,EACdmB,EAAc,KAAO,EACrBxX,EAAQ,cAAgBwX,CAExB,CAAC,EAED,IAAI,OAAO,6BAA6B,CAAC,UAAU,UAAU,SAAS,cAAc,gBAAgB,mBAAmB,EAAG,SAAS/X,EAASO,EAAShB,EAAO,CAC5J,IAAI4G,EAAMnG,EAAQ,YAAY,EAC1BrJ,EAAQqJ,EAAQ,cAAc,EAC9B4D,EAAY5D,EAAQ,kBAAkB,EACtC4Z,EAAmB,IACnBC,EAAsB,IACtBC,EAA2B,EAC/B,SAASC,EAAgBnH,EAAc,CACnC,IAAIC,EAASD,EAAa,OACtBoH,EAAY7T,EAAI,cAAc,KAAK,EACvC6T,EAAU,MAAM,QAAU,8DAC1BA,EAAU,YAAc,IACxB,IAAIzZ,EAAU,CAAC,WAAY,cAAe,YAAa,eAAgB,aAAa,EACpFA,EAAQ,QAAQ,SAAU2L,EAAG,CACzB0G,EAAa1G,CAAC,EAAI,KAAKA,CAAC,CAChC,EAAO,IAAI,EACP2G,EAAO,GAAG,YAAa,KAAK,YAAY,KAAKD,CAAY,CAAC,EAC1D,IAAIqH,EAAcpH,EAAO,UACrBqH,EAAqBhO,EAAGqJ,EACxB4E,EAASjP,EACTkP,EAAYC,EAAU,EACtBC,EACAC,EACAC,EACAC,EACAC,EACJ,KAAK,YAAc,SAAU1jB,EAAG,CAC5B,GAAI,KAAK,YAAc,CAACijB,EAAY,UAAW,CAC3C,IAAIU,EAAO,KACX,kBAAW,UAAY,CACnBA,EAAK,YAAW,EAChBA,EAAK,aAAa3jB,CAAC,CACnC,EAAe,CAAC,EACGA,EAAE,eAAc,CACnC,CACQkU,EAAQ2H,EAAO,kBAAiB,EAChC,IAAI+H,EAAe5jB,EAAE,aACrB4jB,EAAa,cAAgB/H,EAAO,YAAW,EAAK,OAAS,WAC7DA,EAAO,UAAU,YAAYmH,CAAS,EACtCY,EAAa,cAAgBA,EAAa,aAAaZ,EAAW,EAAG,CAAC,EACtE,WAAW,UAAY,CACnBnH,EAAO,UAAU,YAAYmH,CAAS,CAClD,CAAS,EACDY,EAAa,UAAS,EACtBA,EAAa,QAAQ,OAAQ/H,EAAO,QAAQ,aAAY,CAAE,EAC1D0H,EAAa,GACb,KAAK,SAAS,MAAM,CAC5B,EACI,KAAK,UAAY,SAAUvjB,EAAG,CAI1B,GAHAijB,EAAY,UAAY,GACxBM,EAAa,GACb,KAAK,SAAS,IAAI,EACd,CAAC1H,EAAO,cAAe,CACvB,IAAIgI,EAAa7jB,EAAE,aAAa,WAC5B,CAACsjB,GAAiBO,GAAc,QAChChI,EAAO,QAAQ,OAAOA,EAAO,kBAAiB,CAAE,EACpDA,EAAO,kBAAiB,CACpC,CACQ,KAAK,OAAO,WAAW,cAAc,EACrC,KAAK,OAAO,SAAS,eAAe,EAAE,CAC9C,EACI,KAAK,YAAc,SAAU7b,EAAG,CAC5B,GAAI,EAAA6b,EAAO,YAAW,GAAM,CAACiI,EAAU9jB,EAAE,YAAY,GAErD,OAAAkV,EAAIlV,EAAE,QACNue,EAAIve,EAAE,QACDkjB,GACDa,EAAa,EACjBV,IACArjB,EAAE,aAAa,WAAasjB,EAAgBU,EAAchkB,CAAC,EACpDL,EAAM,eAAeK,CAAC,CACrC,EACI,KAAK,WAAa,SAAUA,EAAG,CAC3B,GAAI,EAAA6b,EAAO,YAAW,GAAM,CAACiI,EAAU9jB,EAAE,YAAY,GAErD,OAAAkV,EAAIlV,EAAE,QACNue,EAAIve,EAAE,QACDkjB,IACDa,EAAa,EACbV,KAEAY,IAAqB,OACrBA,EAAmB,MACvBjkB,EAAE,aAAa,WAAasjB,EAAgBU,EAAchkB,CAAC,EACpDL,EAAM,eAAeK,CAAC,CACrC,EACI,KAAK,YAAc,SAAUA,EAAG,CAE5B,GADAqjB,IACIA,GAAW,GAAKH,EAChB,OAAAgB,EAAe,EACfZ,EAAgB,KACT3jB,EAAM,eAAeK,CAAC,CAEzC,EACI,KAAK,OAAS,SAAUA,EAAG,CACvB,GAAKojB,EAEL,KAAIQ,EAAe5jB,EAAE,aACrB,GAAIujB,EACA,OAAQD,EAAa,CACjB,IAAK,OACGpP,EAAM,SAASkP,EAAW,IAAKA,EAAW,MAAM,EAChDlP,EAAQ,CACJ,MAAOkP,EACP,IAAKA,CACjC,EAGwBlP,EAAQ2H,EAAO,SAAS3H,EAAOkP,CAAU,EAE7C,MACJ,IAAK,OACDlP,EAAQ2H,EAAO,SAAS3H,EAAOkP,EAAY,EAAI,EAC/C,UAGP,CACD,IAAIe,EAAWP,EAAa,QAAQ,MAAM,EAC1C1P,EAAQ,CACJ,MAAOkP,EACP,IAAKvH,EAAO,QAAQ,OAAOuH,EAAYe,CAAQ,CAC/D,EACYtI,EAAO,MAAK,EACZyH,EAAgB,IAC5B,CACQ,OAAAY,EAAe,EACRvkB,EAAM,eAAeK,CAAC,EACrC,EACIL,EAAM,YAAYsjB,EAAa,YAAa,KAAK,YAAY,KAAKrH,CAAY,EAAGC,CAAM,EACvFlc,EAAM,YAAYsjB,EAAa,UAAW,KAAK,UAAU,KAAKrH,CAAY,EAAGC,CAAM,EACnFlc,EAAM,YAAYsjB,EAAa,YAAa,KAAK,YAAY,KAAKrH,CAAY,EAAGC,CAAM,EACvFlc,EAAM,YAAYsjB,EAAa,WAAY,KAAK,WAAW,KAAKrH,CAAY,EAAGC,CAAM,EACrFlc,EAAM,YAAYsjB,EAAa,YAAa,KAAK,YAAY,KAAKrH,CAAY,EAAGC,CAAM,EACvFlc,EAAM,YAAYsjB,EAAa,OAAQ,KAAK,OAAO,KAAKrH,CAAY,EAAGC,CAAM,EAC7E,SAASuI,EAAqB9H,EAAQ+H,EAAY,CAC9C,IAAIjiB,EAAM,KAAK,IAAG,EACdkiB,EAAY,CAACD,GAAc/H,EAAO,KAAO+H,EAAW,IACpDE,EAAY,CAACF,GAAc/H,EAAO,QAAU+H,EAAW,OAC3D,GAAI,CAACZ,GAAmBa,GAAaC,EACjC1I,EAAO,qBAAqBS,CAAM,EAClCmH,EAAkBrhB,EAClBshB,EAA0B,CAAE,EAAGxO,EAAG,EAAGqJ,CAAC,MAErC,CACD,IAAI3B,EAAWC,EAAa6G,EAAwB,EAAGA,EAAwB,EAAGxO,EAAGqJ,CAAC,EAClF3B,EAAWkG,EACXW,EAAkB,KAEbrhB,EAAMqhB,GAAmBZ,IAC9BhH,EAAO,SAAS,qBAAoB,EACpC4H,EAAkB,KAElC,CACA,CACI,SAASe,EAAWlI,EAAQ+H,EAAY,CACpC,IAAIjiB,EAAM,KAAK,IAAG,EACdqiB,EAAa5I,EAAO,SAAS,YAAY,WACzC6I,EAAiB7I,EAAO,SAAS,YAAY,eAC7C8I,EAAa9I,EAAO,SAAS,SAAS,sBAAqB,EAC3D+I,EAAU,CACV,EAAG,CACC,KAAM1P,EAAIyP,EAAW,KACrB,MAAOA,EAAW,MAAQzP,GAE9B,EAAG,CACC,IAAKqJ,EAAIoG,EAAW,IACpB,OAAQA,EAAW,OAASpG,EAE5C,EACYsG,GAAiB,KAAK,IAAID,EAAQ,EAAE,KAAMA,EAAQ,EAAE,KAAK,EACzDE,GAAiB,KAAK,IAAIF,EAAQ,EAAE,IAAKA,EAAQ,EAAE,MAAM,EACzDG,EAAe,CAAE,IAAKzI,EAAO,IAAK,OAAQA,EAAO,MAAM,EACvDuI,GAAiBH,GAAkB,IACnCK,EAAa,QAAWH,EAAQ,EAAE,KAAOA,EAAQ,EAAE,MAAQ,GAAK,GAEhEE,GAAiBL,GAAc,IAC/BM,EAAa,KAAQH,EAAQ,EAAE,IAAMA,EAAQ,EAAE,OAAS,GAAK,GAEjE,IAAII,GAAU1I,EAAO,KAAOyI,EAAa,IACrCE,GAAU3I,EAAO,QAAUyI,EAAa,OACxCT,GAAY,CAACD,GAAc/H,EAAO,KAAO+H,EAAW,IACpDW,IAAYC,IAAW,CAACX,GACnBd,EAEIphB,EAAMohB,GAAuBZ,GAClC/G,EAAO,SAAS,qBAAqBkJ,CAAY,EAFjDvB,EAAsBphB,EAK1BohB,EAAsB,IAElC,CACI,SAAS0B,GAAiB,CACtB,IAAIb,EAAajB,EACjBA,EAAavH,EAAO,SAAS,wBAAwB3G,EAAGqJ,CAAC,EACzD6F,EAAqBhB,EAAYiB,CAAU,EAC3CG,EAAWpB,EAAYiB,CAAU,CACzC,CACI,SAASN,GAAgB,CACrB7P,EAAQ2H,EAAO,UAAU,gBAAe,EACxCqH,EAAsBrH,EAAO,QAAQ,UAAU3H,EAAO,gBAAiB2H,EAAO,mBAAmB,EACjGA,EAAO,eAAc,EACjBA,EAAO,UAAS,GAChBA,EAAO,SAAS,aAAa,YAAY,EAAK,EAClD,cAAcsH,CAAO,EACrB+B,EAAc,EACd/B,EAAU,YAAY+B,EAAgB,EAAE,EACxC7B,EAAU,EACV1jB,EAAM,YAAY,SAAU,YAAawlB,CAAW,CAC5D,CACI,SAASjB,GAAkB,CACvB,cAAcf,CAAO,EACrBtH,EAAO,QAAQ,aAAaqH,CAAmB,EAC/CA,EAAsB,KACtBrH,EAAO,UAAU,kBAAkB3H,CAAK,EACpC2H,EAAO,UAAS,GAAM,CAAC0H,GACvB1H,EAAO,kBAAiB,EAC5B3H,EAAQ,KACRkP,EAAa,KACbC,EAAU,EACVG,EAAsB,KACtBC,EAAkB,KAClB9jB,EAAM,eAAe,SAAU,YAAawlB,CAAW,CAC/D,CACI,IAAIlB,EAAmB,KACvB,SAASkB,GAAc,CACflB,GAAoB,OACpBA,EAAmB,WAAW,UAAY,CAClCA,GAAoB,MAAQf,GAC5BgB,EAAe,CACnC,EAAe,EAAE,EAEjB,CACI,SAASJ,EAAUF,EAAc,CAC7B,IAAIwB,EAAQxB,EAAa,MACzB,MAAO,CAACwB,GAAS,MAAM,UAAU,KAAK,KAAKA,EAAO,SAAUziB,EAAM,CAC9D,OAAOA,GAAQ,cAAgBA,GAAQ,MACnD,CAAS,CACT,CACI,SAASqhB,EAAchkB,EAAG,CACtB,IAAIqlB,EAAc,CAAC,OAAQ,WAAY,MAAO,eAAe,EACzDC,EAAc,CAAC,OAAQ,WAAY,WAAY,MAAO,eAAe,EACrEC,EAAoB3Y,EAAU,MAAQ5M,EAAE,OAASA,EAAE,QACnDwlB,EAAgB,gBACpB,GAAI,CACAA,EAAgBxlB,EAAE,aAAa,cAAc,YAAW,CACpE,MACkB,CAAA,CACV,IAAI6jB,EAAa,OACjB,OAAI0B,GAAqBF,EAAY,QAAQG,CAAa,GAAK,EAC3D3B,EAAa,OACRyB,EAAY,QAAQE,CAAa,GAAK,EAC3C3B,EAAa,OACRwB,EAAY,QAAQG,CAAa,GAAK,IAC3C3B,EAAa,QACVA,CACf,CACA,EACC,UAAY,CACT,KAAK,SAAW,UAAY,CACxB,IAAI4B,EAAW,KAAK,IAAG,EAAK,KAAK,eAAe,KAC5CA,EAAW,KAAK,OAAO,aAAY,GACnC,KAAK,UAAS,CAC1B,EACI,KAAK,YAAc,UAAY,CAC3B,IAAIlb,EAAS,KAAK,OAAO,UACzBA,EAAO,UAAY,GACnB,KAAK,YAAY,KAAK,eAAe,oBAAmB,CAAE,EAC1D,KAAK,UAAS,CACtB,EACI,KAAK,aAAe,SAAUvK,EAAG,CAC7B,KAAK,OAAO,kBAAiB,EAC7B,KAAK,OAAO,WAAW,cAAc,EACrC,KAAK,OAAO,SAAS,eAAe,EAAE,EACtC,KAAK,YAAW,CACxB,EACI,KAAK,UAAY,UAAY,CACzB,KAAK,WAAa,GAClB,IAAI6b,EAAS,KAAK,OACdtR,EAASsR,EAAO,UACpBtR,EAAO,UAAY,GACnBsR,EAAO,SAAS,aAAa,YAAY,EAAK,EAC9CA,EAAO,SAAS,cAAc,EAC9B,IAAI6J,EAAc9Y,EAAU,MAAQ,UAAY,OAChDiP,EAAO,SAAS,eAAe6J,CAAW,EAC1C,KAAK,SAAS,WAAW,CACjC,EACI,KAAK,YAAc,SAAU1lB,EAAG,CAC5B,IAAIuK,EAAS,KAAK,OAAO,UACzB,GAAIqC,EAAU,MAAQ,KAAK,OAAS,YAAa,CAC7C,IAAIgQ,EAAWC,EAAa,KAAK,eAAe,EAAG,KAAK,eAAe,EAAG,KAAK,EAAG,KAAK,CAAC,EACpFD,EAAW,GACXrS,EAAO,SAAQ,CAC/B,CACQ,GAAI,KAAK,QAAU,WAAY,CAC3B,IAAIqS,EAAWC,EAAa,KAAK,eAAe,EAAG,KAAK,eAAe,EAAG,KAAK,EAAG,KAAK,CAAC,EACpFD,EAAW,IACXrS,EAAO,UAAY,GACnB,KAAK,YAAY,KAAK,eAAe,oBAAmB,CAAE,EAE1E,CACA,EACI,KAAK,YAAc,SAAUvK,EAAG,CAC5B,GAAK,KAAK,aAEV,MAAK,eAAiBA,EACtB,IAAI6b,EAAS,KAAK,OACdE,EAAc/b,EAAE,YAAW,EAC3Bic,EAASjc,EAAE,UAAS,EACpB2lB,EAAa3lB,EAAE,SAAS,QAAU,EACtC,GAAI2lB,IAAe,GAAK1J,IAAW,GAAKF,EAAa,CACjD,GAAI/b,EAAE,OAAO,oBAAsBA,EAAE,eAAiBA,EAAE,eACpD,OACJ,KAAK,eAAe,KAAO,KAAK,IAAG,EACnC,IAAI4lB,EAAc5lB,EAAE,SAAS,QAAUA,EAAE,SAAS,WAGlD,GAFI,iBAAkB4lB,IAClBA,EAAY,aAAe,MAC3B/J,EAAO,eAAgB,CACvB,GAAIjP,EAAU,SAAU,CACpB,KAAK,WAAa,GAClB,IAAIqW,EAAcpH,EAAO,UACzBoH,EAAY,UAAY,EAC5C,CACgB,KAAK,SAAS,UAAU,CACxC,MAEgB,KAAK,UAAS,EAElB,KAAK,aAAajjB,EAAG,KAAK,YAAY,KAAK,IAAI,CAAC,EAChDA,EAAE,iBAAmB,EACjC,EACA,CACA,GAAG,KAAK+iB,EAAgB,SAAS,EACjC,SAASlG,EAAaQ,EAAIC,EAAIC,EAAIC,EAAI,CAClC,OAAO,KAAK,KAAK,KAAK,IAAID,EAAKF,EAAI,CAAC,EAAI,KAAK,IAAIG,EAAKF,EAAI,CAAC,CAAC,CAChE,CACA/T,EAAQ,gBAAkBwZ,CAE1B,CAAC,EAED,IAAI,OAAO,0BAA0B,CAAC,UAAU,UAAU,SAAS,wBAAwB,gBAAgB,aAAa,EAAG,SAAS/Z,EAASO,EAAShB,EAAO,CAC7J,IAAIkV,EAAazU,EAAQ,eAAe,EAAE,WACtCrJ,EAAQqJ,EAAQ,cAAc,EAC9BmG,EAAMnG,EAAQ,YAAY,EAC9BO,EAAQ,kBAAoB,SAAU4D,EAAI0O,EAAQ,CAC9C,IAAIgK,EAAO,SACPhP,EACAC,EACAgP,EACAC,EACAC,EACAC,EACAC,EAAiB,EACjBlK,EACA2J,EAAa,EACbQ,EAAK,EACLC,EAAK,EACLC,EACAC,EACJ,SAASC,GAAoB,CACzB,IAAIvO,EAAY,OAAO,WAAa,OAAO,UAAU,UACjDwO,EAAS,GACTC,EAAa,UAAY,CACzB,IAAIC,EAAW7K,EAAO,YAAW,EAC7B8K,EAAU9K,EAAO,QAAQ,eAAc,EAAG,QAAO,EACrDyK,EAAY,aAAanX,EAAI,SAASqX,EAAS,CAAC,OAC5C,CAACE,GAAYE,EAAkB,WAAW,GAAK,CAAC,OAAQ,CAAE,MAAO,oBAAqB,OAAQ,WAAW,EAAI,YAAY,EACzHF,GAAYE,EAAkB,MAAM,GAAK,CAAC,OAAQ,CAAE,MAAO,oBAAqB,OAAQ,MAAM,EAAI,MAAM,EACxGF,GAAYE,EAAkB,KAAK,GAAK,CAAC,OAAQ,CAAE,MAAO,oBAAqB,OAAQ,KAAK,EAAI,KAAK,EACrG5O,GAAa4O,EAAkB,OAAO,GAAK,CAAC,OAAQ,CAAE,MAAO,oBAAqB,OAAQ,OAAO,EAAI,OAAO,EAC5GD,GAAWC,EAAkB,MAAM,GAAK,CAAC,OAAQ,CAAE,MAAO,oBAAqB,OAAQ,MAAM,EAAI,MAAM,EACvGA,EAAkB,MAAM,GAAK,CAAC,OAAQ,CAAE,MAAO,oBAAqB,OAAQ,MAAM,EAAI,MAAM,EAC5FA,EAAkB,oBAAoB,GAAK,CAAC,OAAQ,CAAE,MAAO,oBAAqB,OAAQ,oBAAoB,EAAI,SAAS,GAC3H,CAAC,MAAM,CAAC,EAAGN,EAAY,UAAU,CACjD,EACYM,EAAoB,SAAgCC,EAAK,CACzD,OAAOhL,EAAO,SAAS,WAAWgL,EAAKhL,CAAM,CACzD,EACYiL,EAAc,SAAU9mB,EAAG,CAC3B,IAAI+mB,EAAS/mB,EAAE,OAAO,aAAa,QAAQ,EAC3C,GAAI+mB,GAAU,QAAU,CAACP,EACrB,OAAAA,EAAS,CAACA,EACHC,EAAU,EAEjBM,GAAU,QACV/O,EAAU,SAAQ,EAAG,KAAK,SAAUiB,EAAM,CACtC4C,EAAO,YAAYkL,EAAQ9N,CAAI,CACnD,CAAiB,EAEI8N,KACDA,GAAU,OAASA,GAAU,UACzB/O,EACAA,EAAU,UAAU6D,EAAO,aAAa,EAExC,SAAS,YAAY,MAAM,GAEnCA,EAAO,YAAYkL,CAAM,GAE7BT,EAAY,WAAW,MAAM,QAAU,OACvCE,EAAS,GACLO,GAAU,sBACVlL,EAAO,MAAK,CAC5B,EACQyK,EAAcnX,EAAI,SAAS,CAAC,MACxB,CACI,MAAO,kBACP,aAAc,SAAUnP,EAAG,CACvB6lB,EAAO,OACP7lB,EAAE,gBAAe,EACjBA,EAAE,eAAc,EAChB6b,EAAO,UAAU,MAAK,CAC1C,EACgB,WAAY,SAAU7b,EAAG,CACrBA,EAAE,gBAAe,EACjBA,EAAE,eAAc,EAChB8mB,EAAY9mB,CAAC,CACjC,EACgB,QAAS8mB,GAEb,CAAC,MAAM,EACP,CAAC,OAAQ,CAAE,MAAO,oBAAqB,OAAQ,MAAM,EAAI,KAAK,CAC1E,EAAWjL,EAAO,SAAS,CAC3B,CACI,SAASmL,GAAkB,CACvB,GAAI,CAACnL,EAAO,UAAU,kBAAkB,EAAG,CACnCyK,GACAW,EAAe,EAEnB,MACZ,CACaX,GACDC,EAAiB,EACrB,IAAIjK,EAAST,EAAO,UAAU,OAC1BqL,EAAUrL,EAAO,SAAS,wBAAwBS,EAAO,IAAKA,EAAO,MAAM,EAC3E6K,EAAatL,EAAO,SAAS,wBAAwB,EAAG,CAAC,EAAE,MAC3DuL,EAAavL,EAAO,SAAS,WAC7BrN,EAAOqN,EAAO,UAAU,sBAAqB,EACjDyK,EAAY,MAAM,IAAMY,EAAQ,MAAQ1Y,EAAK,IAAM,EAAI,KACnD0Y,EAAQ,MAAQ1Y,EAAK,KAAOA,EAAK,MAAQ,IACzC8X,EAAY,MAAM,KAAO,GACzBA,EAAY,MAAM,MAAQ,SAG1BA,EAAY,MAAM,MAAQ,GAC1BA,EAAY,MAAM,KAAOa,EAAaC,EAAa5Y,EAAK,KAAO,MAEnE8X,EAAY,MAAM,QAAU,GAC5BA,EAAY,WAAW,MAAM,QAAU,OACvCzK,EAAO,GAAG,QAASoL,CAAe,CAC1C,CACI,SAASA,EAAgBjnB,EAAG,CACpBsmB,IACAA,EAAY,MAAM,QAAU,QAChCzK,EAAO,IAAI,QAASoL,CAAe,CAC3C,CACI,SAASI,GAAgB,CACrBrB,EAAiB,KACjB,aAAaA,CAAc,EAC3B,IAAI9R,EAAQ2H,EAAO,UAAU,SAAQ,EACjCE,EAAc7H,EAAM,SAAS8H,EAAI,IAAKA,EAAI,MAAM,GAChD9H,EAAM,WAAa,CAAC6H,KACpBF,EAAO,UAAU,eAAeG,CAAG,EACnCH,EAAO,UAAU,WAAU,GAE/BgK,EAAO,OACPmB,EAAe,CACvB,CACI,SAASM,GAAwB,CAC7BtB,EAAiB,KACjB,aAAaA,CAAc,EAC3BnK,EAAO,UAAU,eAAeG,CAAG,EACnC,IAAI9H,EAAQyR,GAAc,EACpB9J,EAAO,UAAU,aAAaG,EAAI,GAAG,EACrCH,EAAO,QAAQ,gBAAgBG,CAAG,EACpC9H,GAAS,CAACA,EAAM,UAChB2H,EAAO,UAAU,SAAS3H,CAAK,EAG/B2H,EAAO,UAAU,WAAU,EAE/BgK,EAAO,MACf,CACIlmB,EAAM,YAAYwN,EAAI,cAAe,SAAUnN,EAAG,CAC9C,GAAKqmB,EAEL,KAAIkB,EAAW1L,EAAO,UAAU,WAAU,EAC1C0L,EAAS,MAAK,EACtB,EAAO1L,CAAM,EACTlc,EAAM,YAAYwN,EAAI,aAAc,SAAUnN,EAAG,CAC7C,IAAIwnB,EAAUxnB,EAAE,QAChB,GAAIgmB,GAAkBwB,EAAQ,OAAS,EAAG,CACtC,aAAaxB,CAAc,EAC3BA,EAAiB,KACjBF,EAAc,GACdD,EAAO,OACP,MACZ,CACQQ,EAAUxK,EAAO,cAAc,eAAiB,GAChD,IAAI4L,EAAI5L,EAAO,SAAS,YAAY,WAChC6L,EAAI7L,EAAO,SAAS,YAAY,WAChCZ,EAAIjb,EAAE,UACV+lB,EAAQ9K,EACR,IAAI0M,EAAWH,EAAQ,CAAC,EACpBtS,EAAIyS,EAAS,QACbpJ,EAAIoJ,EAAS,QACb,KAAK,IAAI9Q,EAAS3B,CAAC,EAAI,KAAK,IAAI4B,EAASyH,CAAC,EAAIkJ,IAC9C3B,EAAc,IAClBjP,EAAS7W,EAAE,QAAUkV,EACrB4B,EAAS9W,EAAE,QAAUue,EACrB4H,EAAKC,EAAK,EACV,IAAItK,EAAK,IAAI2B,EAAWzd,EAAG6b,CAAM,EAEjC,GADAG,EAAMF,EAAG,oBAAmB,EACxBb,EAAI6K,EAAc,KAAO0B,EAAQ,QAAU,GAAK,CAACtB,EACjDP,IACA3lB,EAAE,eAAc,EAChBA,EAAE,OAAS,EACXsnB,EAAqB,MAEpB,CACD3B,EAAa,EACb,IAAIrJ,EAAST,EAAO,UAAU,OAC1BQ,EAASR,EAAO,UAAU,QAAO,EAAKS,EAAST,EAAO,UAAU,OAChE+L,EAAY/L,EAAO,SAAS,aAAa,iBAAiBS,EAAQ,EAAI,EACtEuL,EAAYhM,EAAO,SAAS,aAAa,iBAAiBQ,EAAQ,EAAI,EACtE7N,EAAOqN,EAAO,SAAS,SAAS,sBAAqB,EACrDiM,EAAYjM,EAAO,SAAS,YAAY,OACxCkM,EAAalM,EAAO,SAAS,WAC7BmM,GAAmB,SAAU9S,GAAGqJ,GAAG,CACnC,OAAArJ,GAAIA,GAAIwS,EACRnJ,GAAIA,GAAIkJ,EAAI,IACLvS,GAAIA,GAAIqJ,GAAIA,EACnC,EACY,GAAIve,EAAE,QAAUwO,EAAK,KAAM,CACvBqX,EAAO,OACP,MAChB,CACY,IAAIoC,GAAQD,GAAiBhoB,EAAE,QAAUwO,EAAK,KAAOoZ,EAAU,KAAOG,EAAY/nB,EAAE,QAAUwO,EAAK,IAAMoZ,EAAU,IAAME,CAAS,EAC9HI,EAAQF,GAAiBhoB,EAAE,QAAUwO,EAAK,KAAOqZ,EAAU,KAAOE,EAAY/nB,EAAE,QAAUwO,EAAK,IAAMqZ,EAAU,IAAMC,CAAS,EAC9HG,GAAQ,KAAOC,EAAQ,MACvBrC,EAAOoC,GAAQC,EAAQ,SAAW,UAClCA,EAAQ,IACRrC,EAAO,SACFoC,GAAQ,IACbpC,EAAO,SAEPA,EAAO,SACXG,EAAiB,WAAWqB,EAAe,GAAG,CAC1D,CACQvB,EAAc7K,CACtB,EAAOY,CAAM,EACTlc,EAAM,YAAYwN,EAAI,WAAY,SAAUnN,EAAG,CAC3CqmB,EAAUxK,EAAO,cAAc,eAAiB,GAC5CoK,GACA,cAAcA,CAAc,EAC5BJ,GAAQ,QACRA,EAAO,GACPK,EAAiB,GAEZF,GACLnK,EAAO,UAAU,eAAeG,CAAG,EACnCkK,EAAiB,EACjBc,EAAe,GAEVnB,GAAQ,UACbsC,EAAO,EACPlB,EAAe,GAGfD,EAAe,EAEnB,aAAahB,CAAc,EAC3BA,EAAiB,IACzB,EAAOnK,CAAM,EACTlc,EAAM,YAAYwN,EAAI,YAAa,SAAUnN,EAAG,CACxCgmB,IACA,aAAaA,CAAc,EAC3BA,EAAiB,MAErB,IAAIwB,EAAUxnB,EAAE,QAChB,GAAI,EAAAwnB,EAAQ,OAAS,GAAK3B,GAAQ,QAElC,KAAI8B,EAAWH,EAAQ,CAAC,EACpBY,EAASvR,EAAS8Q,EAAS,QAC3BU,EAASvR,EAAS6Q,EAAS,QAC/B,GAAI9B,GAAQ,OACR,GAAIuC,EAASA,EAASC,EAASA,EAAS,EACpCxC,EAAO,aAEP,QAAO7lB,EAAE,eAAc,EAE/B6W,EAAS8Q,EAAS,QAClB7Q,EAAS6Q,EAAS,QAClB3nB,EAAE,QAAU2nB,EAAS,QACrB3nB,EAAE,QAAU2nB,EAAS,QACrB,IAAI1M,EAAIjb,EAAE,UACNsX,EAAK2D,EAAI8K,EAEb,GADAA,EAAQ9K,EACJ4K,GAAQ,SAAU,CAClB,IAAIyC,EAAa,IAAI7K,EAAWzd,EAAG6b,CAAM,EACzCyM,EAAW,MAAQ,EACnBA,EAAW,OAASF,EACpBE,EAAW,OAASD,EAChB,GAAK,KAAK,IAAID,CAAM,EAAI,KAAK,IAAIC,CAAM,IACvCD,EAAS,GACT,GAAK,KAAK,IAAIC,CAAM,EAAI,KAAK,IAAID,CAAM,IACvCC,EAAS,GACT/Q,GAAM,IACN6O,EAAKiC,EAAS9Q,EACd8O,EAAKiC,EAAS/Q,GAElBuE,EAAO,MAAM,aAAcyM,CAAU,EAChCA,EAAW,qBACZnC,EAAKC,EAAK,EAE1B,KACa,CACD,IAAItK,EAAK,IAAI2B,EAAWzd,EAAG6b,CAAM,EAC7BG,EAAMF,EAAG,oBAAmB,EAC5B+J,GAAQ,SACRhK,EAAO,UAAU,qBAAqBG,CAAG,EACpC6J,GAAQ,UACbhK,EAAO,UAAU,mBAAmBG,EAAI,IAAKA,EAAI,MAAM,EAC3DH,EAAO,SAAS,qBAAqBG,CAAG,EACxChc,EAAE,eAAc,CAC5B,EACA,EAAO6b,CAAM,EACT,SAASsM,GAAU,CACfjC,GAAkB,GAClBD,EAAiB,YAAY,UAAY,CACjCC,KAAoB,IACpB,cAAcD,CAAc,EAC5BA,EAAiB,MAEjB,KAAK,IAAIE,CAAE,EAAI,MACfA,EAAK,GACL,KAAK,IAAIC,CAAE,EAAI,MACfA,EAAK,GACLF,EAAiB,KACjBC,EAAK,GAAMA,GACXD,EAAiB,KACjBE,EAAK,GAAMA,GACf,IAAImC,EAAe1M,EAAO,QAAQ,aAAY,EAC9CA,EAAO,SAAS,SAAS,GAAKsK,EAAI,GAAKC,CAAE,EACrCmC,GAAgB1M,EAAO,QAAQ,aAAY,IAC3CqK,EAAiB,EACjC,EAAW,EAAE,CACb,CACA,CAEA,CAAC,EAED,IAAI,OAAO,0BAA0B,CAAC,UAAU,UAAU,SAAS,gBAAgB,oBAAoB,6BAA6B,mCAAmC,wBAAwB,6BAA6B,0BAA0B,YAAY,EAAG,SAASld,EAASO,EAAShB,EAAO,CACvS,IAAI5I,EAAQqJ,EAAQ,cAAc,EAC9B4D,EAAY5D,EAAQ,kBAAkB,EACtC2S,EAAkB3S,EAAQ,oBAAoB,EAAE,gBAChDwf,EAAuBxf,EAAQ,0BAA0B,EAAE,cAC3DyU,EAAazU,EAAQ,eAAe,EAAE,WACtC+Z,EAAkB/Z,EAAQ,oBAAoB,EAAE,gBAChDyf,EAAoBzf,EAAQ,iBAAiB,EAAE,kBAC/CjI,EAASiI,EAAQ,WAAW,EAC5B0f,EAA8B,UAAY,CAC1C,SAASA,EAAa7M,EAAQ,CAAE,KAAK,WAAY,KAAK,aAAc,KAAK,YAAa,KAAK,WAAY,KAAK,cACxG,IAAIxP,EAAQ,KACZ,KAAK,OAASwP,EACd,IAAIF,EAAgB,IAAI,EACxB,IAAI6M,EAAqB,IAAI,EAC7B,IAAIzF,EAAgB,IAAI,EACxB,IAAI4F,EAAc,SAAU3oB,EAAG,CAC3B,IAAI4oB,EAAgB,CAAC,SAAS,UAAY,CAAC,SAAS,SAAQ,GACrD,CAAC/M,EAAO,aAAe,SAAS,gBAAkBA,EAAO,WAAaA,EAAO,UAAU,cAC1F+M,GACA,OAAO,MAAK,EAChB/M,EAAO,MAAK,EACZ,WAAW,UAAY,CACdA,EAAO,UAAS,GACjBA,EAAO,MAAK,CAChC,CAAa,CACb,EACYoH,EAAcpH,EAAO,SAAS,oBAAmB,EACrDlc,EAAM,YAAYsjB,EAAa,QAAS,KAAK,aAAa,KAAK,KAAM,OAAO,EAAGpH,CAAM,EACrFlc,EAAM,YAAYsjB,EAAa,YAAa,KAAK,YAAY,KAAK,KAAM,WAAW,EAAGpH,CAAM,EAC5Flc,EAAM,0BAA0B,CAC5BsjB,EACApH,EAAO,SAAS,YAAcA,EAAO,SAAS,WAAW,MACzDA,EAAO,SAAS,YAAcA,EAAO,SAAS,WAAW,MACzDA,EAAO,WAAaA,EAAO,UAAU,WAAU,GACjD,OAAO,OAAO,EAAG,CAAC,IAAK,IAAK,GAAG,EAAG,KAAM,eAAgBA,CAAM,EAChElc,EAAM,sBAAsBkc,EAAO,UAAW,KAAK,aAAa,KAAK,KAAM,YAAY,EAAGA,CAAM,EAChG4M,EAAkB5M,EAAO,UAAWA,CAAM,EAC1C,IAAIgN,EAAWhN,EAAO,SAAS,QAC/Blc,EAAM,YAAYkpB,EAAU,YAAa,KAAK,aAAa,KAAK,KAAM,iBAAiB,EAAGhN,CAAM,EAChGlc,EAAM,YAAYkpB,EAAU,QAAS,KAAK,aAAa,KAAK,KAAM,aAAa,EAAGhN,CAAM,EACxFlc,EAAM,YAAYkpB,EAAU,WAAY,KAAK,aAAa,KAAK,KAAM,gBAAgB,EAAGhN,CAAM,EAC9Flc,EAAM,YAAYkpB,EAAU,YAAa,KAAK,aAAa,KAAK,KAAM,iBAAiB,EAAGhN,CAAM,EAChGlc,EAAM,YAAYsjB,EAAa,YAAa0F,EAAa9M,CAAM,EAC/Dlc,EAAM,YAAYkpB,EAAU,YAAaF,EAAa9M,CAAM,EACxDjP,EAAU,MAAQiP,EAAO,SAAS,aAClClc,EAAM,YAAYkc,EAAO,SAAS,WAAW,QAAS,YAAa8M,EAAa9M,CAAM,EACtFlc,EAAM,YAAYkc,EAAO,SAAS,WAAW,QAAS,YAAa8M,EAAa9M,CAAM,GAE1FA,EAAO,GAAG,YAAa,SAAU7b,EAAG,CAChC,GAAI,EAAAqM,EAAM,OAASA,EAAM,YAAc,CAACA,EAAM,cAE9C,KAAIyc,EAAYjN,EAAO,SAAS,wBAAwB7b,EAAE,EAAGA,EAAE,CAAC,EAC5DkU,EAAQ2H,EAAO,QAAQ,UAAU,SAAQ,EACzCuE,EAAWvE,EAAO,SAClB,CAAC3H,EAAM,QAAO,GAAMA,EAAM,YAAY4U,EAAU,IAAKA,EAAU,MAAM,EACrE1I,EAAS,eAAe,SAAS,EAGjCA,EAAS,eAAe,EAAE,EAE1C,EACQvE,CAAM,CACd,CACI,OAAA6M,EAAa,UAAU,aAAe,SAAU3e,EAAM/J,EAAG,CAChD,KAAK,OAAO,SAEjB,KAAK,OAAO,MAAM+J,EAAM,IAAI0T,EAAWzd,EAAG,KAAK,MAAM,CAAC,CAC9D,EACI0oB,EAAa,UAAU,YAAc,SAAU3e,EAAM/J,EAAG,CACpD,IAAImQ,EAAY,KAAK,OAAO,gBAAkB,KAAK,OAAO,eAAe,UACrE,CAACA,GAAa,CAACA,EAAU,QAE7B,KAAK,OAAO,MAAMpG,EAAM,IAAI0T,EAAWzd,EAAG,KAAK,MAAM,CAAC,CAC9D,EACI0oB,EAAa,UAAU,aAAe,SAAU3e,EAAM/J,EAAG,CACrD,IAAIsoB,EAAa,IAAI7K,EAAWzd,EAAG,KAAK,MAAM,EAC9CsoB,EAAW,MAAQ,KAAK,aAAe,EACvCA,EAAW,OAAStoB,EAAE,OACtBsoB,EAAW,OAAStoB,EAAE,OACtB,KAAK,OAAO,MAAM+J,EAAMue,CAAU,CAC1C,EACII,EAAa,UAAU,SAAW,SAAUK,EAAO,CAC/C,KAAK,MAAQA,CACrB,EACIL,EAAa,UAAU,aAAe,SAAU5M,EAAIkN,EAAkB,CAClE,KAAK,EAAIlN,EAAG,EACZ,KAAK,EAAIA,EAAG,EACZ,KAAK,eAAiB,GACtB,IAAID,EAAS,KAAK,OACduE,EAAW,KAAK,OAAO,SAC3BA,EAAS,gBAAkB,GAC3B,IAAIuD,EAAO,KACPsF,EAAkB,GAClB9D,EAAc,SAAUnlB,EAAG,CAC3B,GAAKA,EAEL,IAAI4M,EAAU,UAAY,CAAC5M,EAAE,OAAS2jB,EAAK,aACvC,OAAOA,EAAK,aAAY,EAC5BA,EAAK,EAAI3jB,EAAE,QACX2jB,EAAK,EAAI3jB,EAAE,QACXgpB,GAAoBA,EAAiBhpB,CAAC,EACtC2jB,EAAK,WAAa,IAAIlG,EAAWzd,EAAG2jB,EAAK,MAAM,EAC/CA,EAAK,YAAc,GAC/B,EACYuF,EAAe,SAAUlpB,EAAG,CAC5B6b,EAAO,IAAI,qBAAsBsN,CAAc,EAC/CF,EAAkB,GACdpN,EAAO,SACPuN,EAAe,EACnBzF,EAAKA,EAAK,MAAQ,KAAK,GAAKA,EAAKA,EAAK,MAAQ,KAAK,EAAE3jB,CAAC,EACtD2jB,EAAK,MAAQ,GACbA,EAAK,eAAiBvD,EAAS,gBAAkB,GAC7CA,EAAS,uBACTA,EAAS,sBAAqB,EAClCuD,EAAK,oBAAsBA,EAAK,aAAe,KAC/C3jB,GAAK2jB,EAAK,aAAa,UAAW3jB,CAAC,EACnC6b,EAAO,aAAY,CAC/B,EACYuN,EAAkB,UAAY,CAC9BzF,EAAKA,EAAK,KAAK,GAAKA,EAAKA,EAAK,KAAK,EAAC,EACpCA,EAAK,YAAc,EAC/B,EACY0F,EAAoB,UAAY,CAC5BJ,IACAG,EAAe,EACfzpB,EAAM,UAAU0pB,CAAiB,EAEjD,EACQ,GAAIzc,EAAU,SAAWkP,EAAG,SAAS,MAAQ,WACzC,OAAO,WAAW,UAAY,CAAEoN,EAAapN,CAAE,CAAE,CAAE,EAEvD,IAAIqN,EAAiB,SAAUnpB,EAAG,CACzB2jB,EAAK,cAEN9H,EAAO,MAAM,QAAQ,MAAQA,EAAO,MAAM,mBAC1C8H,EAAKA,EAAK,MAAQ,KAAK,GAAKA,EAAKA,EAAK,MAAQ,KAAK,EAAC,EACpDA,EAAK,MAAQ,GACbA,EAAK,aAAY,EAEjC,EACQ9H,EAAO,GAAG,qBAAsBsN,CAAc,EAC9CtN,EAAO,eAAe,CAAE,QAAS,CAAE,KAAM,OAAO,EAAI,EACpD8H,EAAK,oBAAsBwB,EAC3BxB,EAAK,aAAehkB,EAAM,QAAQ,KAAK,OAAO,UAAWwlB,EAAa+D,CAAY,EAClFG,EAAiB,CACzB,EACIX,EAAa,UAAU,kBAAoB,UAAY,CACnD,IAAIY,EAAO,SAAUtpB,EAAG,CAChBA,GAAKA,EAAE,UAAYA,EAAE,SAAS,MAAQ,gBAE1C,KAAK,OAAO,IAAI,oBAAqBspB,CAAI,EACrCtpB,GAAKA,EAAE,UACPL,EAAM,UAAUK,EAAE,QAAQ,EAC1C,EAAU,KAAK,IAAI,EACX,WAAWspB,EAAM,EAAE,EACnB,KAAK,OAAO,GAAG,oBAAqBA,CAAI,CAChD,EACIZ,EAAa,UAAU,QAAU,UAAY,CACrC,KAAK,cACL,KAAK,aAAY,EACjB,KAAK,UACL,KAAK,SAAS,QAAO,CACjC,EACWA,CACX,IACAA,EAAa,UAAU,aAAe,KACtC3nB,EAAO,cAAc2nB,EAAa,UAAW,eAAgB,CACzD,YAAa,CAAE,aAAc,CAAC,EAC9B,UAAW,CAAE,aAAe9b,EAAU,MAAQ,IAAM,CAAE,EACtD,YAAa,CAAE,aAAc,EAAI,EACjC,aAAc,CAAE,aAAc,CAAC,CACnC,CAAC,EACDrD,EAAQ,aAAemf,CAEvB,CAAC,EAED,IAAI,OAAO,yBAAyB,CAAC,UAAU,UAAU,SAAS,aAAa,EAAG,SAAS1f,EAASO,EAAShB,EAAO,CACpH,IAAI4G,EAAMnG,EAAQ,YAAY,EAC1BugB,EAA6B,UAAY,CACzC,SAASA,EAAY1N,EAAQ,CACzBA,EAAO,GAAG,QAAS,SAAU7b,EAAG,CAC5B,IAAIkK,EAAWlK,EAAE,oBAAmB,EAChCwU,EAAUqH,EAAO,QACjBuF,EAAO5M,EAAQ,UAAUtK,EAAS,IAAKA,EAAS,OAAQ,CAAC,EACzDkX,IACIphB,EAAE,YAAW,EACbwU,EAAQ,WAAW4M,CAAI,EAEvB5M,EAAQ,WAAW4M,CAAI,EAC3BphB,EAAE,KAAI,GAEV,IAAIuK,EAASvK,EAAE,UAAYA,EAAE,SAAS,OAClCuK,GAAU4E,EAAI,YAAY5E,EAAQ,mBAAmB,GACjD4E,EAAI,YAAY5E,EAAQ,iBAAiB,IACzCiK,EAAQ,UAAU,OAAQ,CAACA,EAAQ,eAAc,CAAE,EACnDqH,EAAO,SAAS,qBAAoB,EAGxD,CAAS,EACDA,EAAO,GAAG,cAAe,SAAU7b,EAAG,CAClC,IAAIghB,EAAenF,EAAO,SAAS,aAAa,UAAU7b,CAAC,EAC3D,GAAIghB,GAAgB,cAAe,CAC/B,IAAI7M,EAAMnU,EAAE,oBAAmB,EAAG,IAC9BwU,EAAUqH,EAAO,QACjBrH,EAAQ,aAAeA,EAAQ,YAAYL,CAAG,GAC9C0H,EAAO,QAAQ,kBAAkB1H,EAAKnU,CAAC,EACtC6b,EAAO,UAAS,GACjBA,EAAO,MAAK,EAChB7b,EAAE,KAAI,CACtB,CACA,CAAS,EACD6b,EAAO,GAAG,iBAAkB,SAAU7b,EAAG,CACrC,IAAIghB,EAAenF,EAAO,SAAS,aAAa,UAAU7b,CAAC,EAC3D,GAAIghB,GAAgB,cAAe,CAC/B,IAAI7M,EAAMnU,EAAE,oBAAmB,EAAG,IAC9BwU,EAAUqH,EAAO,QACjBza,EAAOoT,EAAQ,uBAAuBL,EAAK,EAAI,EAC/CD,EAAQ9S,EAAK,OAASA,EAAK,WAC/B,GAAI8S,EAAO,CACPC,EAAMD,EAAM,MAAM,IAClB,IAAIkN,EAAO5M,EAAQ,UAAUL,EAAKK,EAAQ,QAAQL,CAAG,EAAE,OAAQ,CAAC,EAC5DiN,EACA5M,EAAQ,WAAW4M,CAAI,GAGvB5M,EAAQ,QAAQ,MAAON,CAAK,EAC5B2H,EAAO,SAAS,qBAAqB,CAAE,IAAK3H,EAAM,MAAM,IAAK,OAAQ,EAAG,EAEhG,CACgBlU,EAAE,KAAI,CACtB,CACA,CAAS,CACT,CACI,OAAOupB,CACX,IACAhgB,EAAQ,YAAcggB,CAEtB,CAAC,EAED,IAAI,OAAO,0BAA0B,CAAC,UAAU,UAAU,SAAS,eAAe,eAAe,EAAG,SAASvgB,EAASO,EAAShB,EAAO,CACtI,IAAIihB,EAAUxgB,EAAQ,aAAa,EAC/BrJ,EAAQqJ,EAAQ,cAAc,EAC9BygB,EAA4B,UAAY,CACxC,SAASA,EAAW5N,EAAQ,CACxB,KAAK,QAAUA,EACf,KAAK,MAAQ,CAAE,OAAQA,CAAM,EAC7B,KAAK,UAAY,CAAA,EACjB,KAAK,kBAAkBA,EAAO,QAAQ,CAC9C,CACI,OAAA4N,EAAW,UAAU,kBAAoB,SAAUC,EAAI,CACnD,KAAK,sBAAsB,KAAK,eAAe,EAC/C,KAAK,gBAAkBA,EACvB,KAAK,mBAAmBA,EAAI,CAAC,CACrC,EACID,EAAW,UAAU,mBAAqB,SAAUC,EAAI,CACpD,IAAIjC,EAAI,KAAK,UACb,GAAIA,EAAEA,EAAE,OAAS,CAAC,GAAKiC,EAEvB,MAAOjC,EAAEA,EAAE,OAAS,CAAC,GAAKA,EAAEA,EAAE,OAAS,CAAC,GAAK,KAAK,iBAC9C,KAAK,sBAAsBA,EAAEA,EAAE,OAAS,CAAC,CAAC,EAC9C,KAAK,mBAAmBiC,EAAI,CAAC,EACrC,EACID,EAAW,UAAU,mBAAqB,SAAUC,EAAI1N,EAAK,CACzD,GAAK0N,EAEL,CAAI,OAAOA,GAAM,YAAc,CAACA,EAAG,iBAC/BA,EAAG,eAAiBA,GACxB,IAAI5gB,EAAI,KAAK,UAAU,QAAQ4gB,CAAE,EAC7B5gB,GAAK,IACL,KAAK,UAAU,OAAOA,EAAG,CAAC,EAC1BkT,GAAO,KACP,KAAK,UAAU,KAAK0N,CAAE,EAEtB,KAAK,UAAU,OAAO1N,EAAK,EAAG0N,CAAE,EAChC5gB,GAAK,IAAM4gB,EAAG,QACdA,EAAG,OAAO,KAAK,OAAO,EAClC,EACID,EAAW,UAAU,sBAAwB,SAAUC,EAAI,CACvD,IAAI5gB,EAAI,KAAK,UAAU,QAAQ4gB,CAAE,EACjC,OAAI5gB,GAAK,GACE,IACX,KAAK,UAAU,OAAOA,EAAG,CAAC,EAC1B4gB,EAAG,QAAUA,EAAG,OAAO,KAAK,OAAO,EAC5B,GACf,EACID,EAAW,UAAU,mBAAqB,UAAY,CAClD,OAAO,KAAK,UAAU,KAAK,UAAU,OAAS,CAAC,CACvD,EACIA,EAAW,UAAU,cAAgB,UAAY,CAC7C,IAAIroB,EAAO,KAAK,MACZya,EAASza,EAAK,OAClB,OAAO,KAAK,UAAU,IAAI,SAAUqmB,EAAG,CACnC,OAAOA,EAAE,eAAiBA,EAAE,cAAc5L,EAAQza,CAAI,GAAK,EACvE,CAAS,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG,CACnC,EACIqoB,EAAW,UAAU,sBAAwB,SAAUrS,EAAQhC,EAAWD,EAASnV,EAAG,CAIlF,QAHI2pB,EACAC,EAAU,GACVC,EAAW,KAAK,QAAQ,SACnB/gB,EAAI,KAAK,UAAU,OAAQA,MAChC6gB,EAAY,KAAK,UAAU7gB,CAAC,EAAE,eAC9B,KAAK,MAAOsO,EAAQhC,EAAWD,EAASnV,CAAC,EACrC,KAAC2pB,GAAa,CAACA,EAAU,WAEzBA,EAAU,SAAW,OACrBC,EAAU,GAGVA,EAAUC,EAAS,KAAKF,EAAU,QAAS,KAAK,QAASA,EAAU,KAAM3pB,CAAC,EAE1E4pB,GAAW5pB,GAAKoX,GAAU,IAC1BuS,EAAU,WAAgB,IAAQA,EAAU,QAAQ,WAAgB,IACpEhqB,EAAM,UAAUK,CAAC,EAEjB4pB,MAZJ,CAeJ,MAAI,CAACA,GAAWxS,GAAU,KACtBuS,EAAY,CAAE,QAAS,cAAc,EACrCC,EAAUC,EAAS,KAAK,eAAgB,KAAK,QAASzU,CAAS,GAE/DwU,GAAW,KAAK,QAAQ,SACxB,KAAK,QAAQ,QAAQ,mBAAoBD,CAAS,EAC/CC,CACf,EACIH,EAAW,UAAU,aAAe,SAAUzpB,EAAGoX,EAAQjC,EAAS,CAC9D,IAAIC,EAAYoU,EAAQ,gBAAgBrU,CAAO,EAC/C,OAAO,KAAK,sBAAsBiC,EAAQhC,EAAWD,EAASnV,CAAC,CACvE,EACIypB,EAAW,UAAU,YAAc,SAAUxQ,EAAM,CAC/C,OAAO,KAAK,sBAAsB,GAAIA,CAAI,CAClD,EACWwQ,CACX,IACAlgB,EAAQ,WAAakgB,CAErB,CAAC,EAED,IAAI,OAAO,mBAAmB,CAAC,UAAU,UAAU,QAAQ,EAAG,SAASzgB,EAASO,EAAShB,EAAO,CAGhG,IAAIuhB,EAAM,EAAGC,EAAU,EACnBC,EAAa,GAA2BC,EAAY,GAAOC,EAAY,GACvEC,EAAa,CAAE,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,GAAM,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,GAAM,GAAM,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,CACnK,EACIC,EAAa,CAAE,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,GAAM,EAAG,EAAG,CAAC,CAC/G,EACIC,EAAM,EAAGC,EAAM,EACfC,EAAI,EACJC,EAAI,EACJC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAI,EACJC,EAAI,EACJC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,GACLC,EAAK,GACLC,EAAM,GACNC,EAAM,GACNC,EAAM,GACNC,EAAM,GACNC,EAAM,GACNC,EAAM,GACNC,EAAK,GACLC,EAAe,CACfD,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIZ,EAAGD,EAAGC,EAAGE,EAAIH,EAAGa,EAAIA,EACxDA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIb,EAAGA,EAAGA,EAAGC,EACzDE,EAAIJ,EAAIA,EAAIO,EAAIA,EAAIA,EAAIP,EAAIA,EAAIA,EAAIA,EAAIA,EAAIM,EAAID,EAAIC,EAAID,EAAIA,EAC5DP,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIO,EAAIL,EAAIA,EAAIA,EAAIA,EAAIA,EAC5DA,EAAIJ,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAC9CA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGI,EAAIA,EAAIA,EAAIA,EAAIA,EACjDA,EAAIJ,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAC9CA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGI,EAAIA,EAAIA,EAAIA,EAAIc,EACjDA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIb,EAAGa,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAC3DA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAC5DT,EAAIL,EAAIO,EAAIA,EAAIA,EAAIA,EAAIP,EAAIA,EAAIA,EAAIA,EAAIJ,EAAGI,EAAIA,EAAIc,EAAId,EAAIA,EAC3DO,EAAIA,EAAIT,EAAIA,EAAIE,EAAIJ,EAAGI,EAAIA,EAAIA,EAAIF,EAAIF,EAAGI,EAAIA,EAAIA,EAAIA,EAAIA,CAC9D,EACIgB,EAAe,CACfZ,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIU,EAAIA,EAAIA,EAAIlB,EAAGC,EAC3DG,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAC5DA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAII,EAAIH,EAAGQ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKR,EAChEE,EAAIA,EAAIA,EAAIA,EAAIA,EAAIP,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAC5DA,EAAIA,EAAIA,EAAIA,EAAIK,EAAIL,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAC5DA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAIA,EAAII,CAChE,EACA,SAASa,EAAeC,EAAOC,EAAQlhB,EAAKmhB,EAAW,CACnD,IAAIC,EAASlC,EAAMM,EAAaD,EAAY8B,EAAY,KAAMC,EAAW,KAAMC,GAAW,KAAMC,GAAW,EAAGrF,EAAS,KAAMsF,GAAO,KAAMC,GAAU,GAAIxjB,GAAI,KAAMyjB,GAAK,KAAM7e,GAAU,CAAA,EACvL,GAAI,CAACqe,EACD,IAAKjjB,GAAI,EAAGijB,EAAY,CAAA,EAAIjjB,GAAI8B,EAAK9B,KACjCijB,EAAUjjB,EAAC,EAAI0jB,EAAkBX,EAAM/iB,EAAC,CAAC,EAQjD,IALAihB,EAAUD,EACVE,EAAa,GAEbC,EAAY,GACZC,EAAY,GACPqC,GAAK,EAAGA,GAAK3hB,EAAK2hB,KAAM,CAOzB,GANAN,EAAYG,GACZ1e,GAAQ6e,EAAE,EAAIL,EAAWO,EAAcZ,EAAOE,EAAWre,GAAS6e,EAAE,EACpEH,GAAWJ,EAAOC,CAAS,EAAEC,CAAQ,EACrCnF,EAASqF,GAAW,IACpBA,IAAY,GACZN,EAAOS,EAAE,EAAIJ,GAAWH,EAAOI,EAAQ,EAAE,CAAC,EACtCrF,EAAS,EACT,GAAIA,GAAU,GAAM,CAChB,IAAKje,GAAIwjB,GAASxjB,GAAIyjB,GAAIzjB,KACtBgjB,EAAOhjB,EAAC,EAAI,EAEhBwjB,GAAU,EAC1B,MAEgBA,GAAU,GAIlB,GADAD,GAAOL,EAAOI,EAAQ,EAAE,CAAC,EACrBC,GACIC,IAAW,KACXA,GAAUC,YAIVD,GAAU,GAAI,CACd,IAAKxjB,GAAIwjB,GAASxjB,GAAIyjB,GAAIzjB,KACtBgjB,EAAOhjB,EAAC,EAAIqjB,GAEhBG,GAAU,EAC1B,CAEYP,EAAUQ,EAAE,GAAK3B,IACjBkB,EAAOS,EAAE,EAAI,GAEjBxC,GAAWoC,EACnB,CACI,GAAIjC,GACA,IAAKphB,GAAI,EAAGA,GAAI8B,EAAK9B,KACjB,GAAIijB,EAAUjjB,EAAC,GAAK+hB,EAAG,CACnBiB,EAAOhjB,EAAC,EAAIghB,EACZ,QAAStW,GAAI1K,GAAI,EAAG0K,IAAK,GACjBuY,EAAUvY,EAAC,GAAKuX,EADIvX,KAEpBsY,EAAOtY,EAAC,EAAIsW,CAMpC,EAGA,CACA,SAAS4C,EAAaC,EAAKb,EAAQc,EAAQ,CACvC,GAAI,EAAA7C,EAAU4C,GAGd,IAAIA,GAAO,GAAK7C,GAAOQ,GAAO,CAACL,EAAW,CACtC2C,EAAO,QAAO,EACd,MACR,CAEI,QADIhiB,EAAMgiB,EAAO,OAAQ1hB,EAAQ,EAAGE,EAAKyhB,EAAIC,GAAIC,GAC1C7hB,EAAQN,GAAK,CAChB,GAAIkhB,EAAO5gB,CAAK,GAAKyhB,EAAK,CAEtB,IADAvhB,EAAMF,EAAQ,EACPE,EAAMR,GAAOkhB,EAAO1gB,CAAG,GAAKuhB,GAC/BvhB,IAEJ,IAAKyhB,EAAK3hB,EAAO4hB,GAAK1hB,EAAM,EAAGyhB,EAAKC,GAAID,IAAMC,KAC1CC,GAAMH,EAAOC,CAAE,EACfD,EAAOC,CAAE,EAAID,EAAOE,EAAE,EACtBF,EAAOE,EAAE,EAAIC,GAEjB7hB,EAAQE,CACpB,CACQF,GACR,EACA,CACA,SAASuhB,EAAcZ,EAAOzG,EAAO1X,EAAS6e,EAAI,CAC9C,IAAIS,EAAQ5H,EAAMmH,CAAE,EAAGU,EAAOC,EAAOtiB,GAAK9B,GAC1C,OAAQkkB,EAAK,CACT,KAAKzC,EACL,KAAKC,EACDR,EAAa,GACjB,KAAKW,EACL,KAAKD,EACD,OAAOsC,EACX,KAAKvC,EACD,OAAOT,EAAaU,EAAKD,EAC7B,KAAKK,EACD,OAAAd,EAAa,GAENQ,EACX,KAAKO,EACD,OAAOJ,EACX,KAAKK,EACD,OAAIuB,EAAK,GAAMA,EAAK,GAAMnH,EAAM,SAC1B6H,EAAQvf,EAAQ6e,EAAK,CAAC,IAAM9B,GAAMwC,GAASvC,IAC3CwC,EAAQ9H,EAAMmH,EAAK,CAAC,IAAM9B,GAAMyC,GAASxC,EACpCC,GAEPX,IACAkD,EAAQxC,GAELwC,GAASD,EAAQC,EAAQvC,GACpC,KAAKM,EAED,OADAgC,EAAQV,EAAK,EAAI7e,EAAQ6e,EAAK,CAAC,EAAI3B,EAC/BqC,GAASxC,GAAO8B,EAAK,EAAKnH,EAAM,QAAUA,EAAMmH,EAAK,CAAC,GAAK9B,EACpDA,EAEJE,EACX,KAAKO,EACD,GAAIqB,EAAK,GAAK7e,EAAQ6e,EAAK,CAAC,GAAK9B,EAC7B,OAAOA,EAEX,GAAIT,EACA,OAAOW,EAIX,IAFA7hB,GAAIyjB,EAAK,EACT3hB,GAAMwa,EAAM,OACLtc,GAAI8B,IAAOwa,EAAMtc,EAAC,GAAKoiB,GAC1BpiB,KAEJ,OAAIA,GAAI8B,IAAOwa,EAAMtc,EAAC,GAAK2hB,EAChBA,EAEJE,EACX,KAAKQ,EAGD,IAFAvgB,GAAMwa,EAAM,OACZtc,GAAIyjB,EAAK,EACFzjB,GAAI8B,IAAOwa,EAAMtc,EAAC,GAAKqiB,GAC1BriB,KAEJ,GAAIA,GAAI8B,GAAK,CACT,IAAIuiB,EAAItB,EAAMU,CAAE,EAAGa,GAAgBD,GAAK,MAAUA,GAAK,MAAWA,GAAK,MAEvE,GADAF,EAAQ7H,EAAMtc,EAAC,EACXskB,KAAiBH,GAASzC,GAAKyC,GAASnC,GACxC,OAAON,CAE3B,CACY,OAAI+B,EAAK,IAAMU,EAAQ7H,EAAMmH,EAAK,CAAC,IAAM3B,EAC9BD,EAEJjd,EAAQ6e,EAAK,CAAC,EACzB,KAAK3B,EACD,OAAAZ,EAAa,GACbC,EAAY,GACLH,EACX,KAAKe,EACD,OAAAX,EAAY,GACLS,EACX,KAAKS,EACL,KAAKC,EACL,KAAKE,EACL,KAAKC,EACL,KAAKF,EACDtB,EAAa,GACjB,KAAKyB,EACD,OAAOd,EAEnB,CACA,SAAS6B,EAAkB5rB,EAAI,CAC3B,IAAIysB,EAAKzsB,EAAG,WAAW,CAAC,EAAGksB,EAAKO,GAAM,EACtC,OAAIP,GAAM,EACGO,EAAK,IAAU9C,EAAImB,EAAa2B,CAAE,EAEtCP,GAAM,EACH,kBAAkB,KAAKlsB,CAAE,EAAI4pB,EAAID,EAEpCuC,GAAM,EACP,yDAAyD,KAAKlsB,CAAE,EACzDuqB,EACF,+BAA+B,KAAKvqB,CAAE,EACpC8pB,EACF2C,GAAM,KACJnC,EACF,kBAAkB,KAAKtqB,CAAE,EACvB6pB,EAEAK,EAENgC,GAAM,IAAQO,GAAM,KAClB1B,EAAa0B,EAAK,GAAI,EAExBP,GAAM,KACHO,GAAM,MAASvC,EAEpBH,CACX,CAIAphB,EAAQ,EAAIghB,EACZhhB,EAAQ,EAAIihB,EACZjhB,EAAQ,GAAKkhB,EACblhB,EAAQ,KAAO,EACfA,EAAQ,GAAK,EACbA,EAAQ,IAAM,EACdA,EAAQ,EAAI,EACZA,EAAQ,IAAM,EACdA,EAAQ,IAAM,IACdA,EAAQ,cAAgB,SAAU0P,EAAMqU,EAAeC,EAAO,CAC1D,GAAItU,EAAK,OAAS,EACd,MAAO,CAAA,EACX,IAAI4S,EAAQ5S,EAAK,MAAM,EAAE,EAAGuU,EAAoB,IAAI,MAAM3B,EAAM,MAAM,EAAG4B,EAAa,IAAI,MAAM5B,EAAM,MAAM,EAAGC,EAAS,CAAA,EACxHhC,EAAMyD,EAAQjD,EAAMD,EACpBuB,EAAeC,EAAOC,EAAQD,EAAM,OAAQyB,CAAa,EACzD,QAASxkB,GAAI,EAAGA,GAAI0kB,EAAkB,OAAQA,EAAkB1kB,EAAC,EAAIA,GAAGA,KACpE,CACJ4jB,EAAa,EAAGZ,EAAQ0B,CAAiB,EACzCd,EAAa,EAAGZ,EAAQ0B,CAAiB,EACzC,QAAS1kB,GAAI,EAAGA,GAAI0kB,EAAkB,OAAS,EAAG1kB,KAC1CwkB,EAAcxkB,EAAC,IAAM4hB,EACrBoB,EAAOhjB,EAAC,EAAIS,EAAQ,GAEfuiB,EAAOhjB,EAAC,IAAM0hB,IAAO8C,EAAcxkB,EAAC,EAAIgiB,GAAMwC,EAAcxkB,EAAC,EAAIsiB,GACnEkC,EAAcxkB,EAAC,IAAM6hB,GAAM2C,EAAcxkB,EAAC,IAAM2iB,GACnDK,EAAOhjB,EAAC,EAAIS,EAAQ,KAEdT,GAAI,GAAK+iB,EAAM/iB,GAAI,CAAC,IAAM,KAAa,8BAA8B,KAAK+iB,EAAM/iB,EAAC,CAAC,IACxFgjB,EAAOhjB,GAAI,CAAC,EAAIgjB,EAAOhjB,EAAC,EAAIS,EAAQ,IACpCT,MAGJ+iB,EAAMA,EAAM,OAAS,CAAC,IAAMtiB,EAAQ,MACpCuiB,EAAOD,EAAM,OAAS,CAAC,EAAItiB,EAAQ,GACnCsiB,EAAM,CAAC,IAAM,MACbC,EAAO,CAAC,EAAIviB,EAAQ,KACxB,QAAST,GAAI,EAAGA,GAAI0kB,EAAkB,OAAQ1kB,KAC1C2kB,EAAW3kB,EAAC,EAAIgjB,EAAO0B,EAAkB1kB,EAAC,CAAC,EAE/C,MAAO,CAAE,kBAAqB0kB,EAAmB,WAAcC,CAAU,CAC7E,EACAlkB,EAAQ,kBAAoB,SAAU0P,EAAMqU,EAAe,CAEvD,QADII,EAAM,GACD5kB,EAAI,EAAGA,EAAImQ,EAAK,OAAQnQ,IAC7BwkB,EAAcxkB,CAAC,EAAI0jB,EAAkBvT,EAAK,OAAOnQ,CAAC,CAAC,EAC/C,CAAC4kB,IAAQJ,EAAcxkB,CAAC,GAAK0hB,GAAK8C,EAAcxkB,CAAC,GAAKgiB,GAAMwC,EAAcxkB,CAAC,GAAK4hB,KAChFgD,EAAM,IAEd,OAAOA,CACX,EACAnkB,EAAQ,wBAA0B,SAAUokB,EAAQC,EAAQ,CACxD,QAAS9kB,EAAI,EAAGA,EAAI8kB,EAAO,kBAAkB,OAAQ9kB,IACjD,GAAI8kB,EAAO,kBAAkB9kB,CAAC,GAAK6kB,EAC/B,OAAO7kB,EAEf,MAAO,EACX,CAEA,CAAC,EAED,IAAI,OAAO,kBAAkB,CAAC,UAAU,UAAU,SAAS,mBAAmB,cAAc,EAAG,SAASE,EAASO,EAAShB,EAAO,CACjI,IAAIslB,EAAW7kB,EAAQ,gBAAgB,EACnC2I,EAAO3I,EAAQ,YAAY,EAC3B8kB,EAAS,kDACTC,EAA6B,UAAY,CACzC,SAASA,EAAYvZ,EAAS,CAC1B,KAAK,QAAUA,EACf,KAAK,QAAU,CAAA,EACf,KAAK,WAAa,KAClB,KAAK,SAAWqZ,EAChB,KAAK,WAAa,CAAA,EAClB,KAAK,IAAM,IACX,KAAK,eAAiB,GACtB,KAAK,SAAW,GAChB,KAAK,OAAS,GACd,KAAK,KAAO,GACZ,KAAK,WAAa,EAClB,KAAK,IAAM,IACX,KAAK,IAAM,IACX,KAAK,aAAe,EACpB,KAAK,YAAc,KACnB,KAAK,cAAgB,EACrB,KAAK,WAAa,EAClB,KAAK,oBAAsB,GAC3B,KAAK,SAAWC,EAAO,KAAKtZ,EAAQ,SAAQ,CAAE,CACtD,CACI,OAAAuZ,EAAY,UAAU,UAAY,SAAUnQ,EAAWoQ,EAAQC,EAAY,CACvE,OAAK,KAAK,UAENrQ,IAAc,KAAK,aACnB,KAAK,WAAaA,EAClB,KAAK,cAAcoQ,EAAQC,CAAU,EACrC,KAAK,cAAa,GAEf,KAAK,QAAQ,YANT,EAOnB,EACIF,EAAY,UAAU,SAAW,SAAUG,EAAO,CACzC,KAAK,SAON,KAAK,WAAa,KANdA,EAAM,QAAU,UAAYJ,EAAO,KAAKI,EAAM,MAAM,KAAK;AAAA,CAAI,CAAC,IAC9D,KAAK,SAAW,GAChB,KAAK,WAAa,KAMlC,EACIH,EAAY,UAAU,eAAiB,UAAY,CAC/C,IAAIC,EAAS,EACTG,EAAW,KAAK,QAAQ,gBAC5B,GAAIA,EAAS,OAAQ,CACjB,IAAI3qB,EAAQ,KAAK,QAAQ,kBAAkB2qB,EAAU,KAAK,UAAU,EAChE3qB,GAAS,IACTwqB,EAAS,KAAK,QAAQ,aAAaxqB,CAAK,EACxD,CACQ,OAAOwqB,CACf,EACID,EAAY,UAAU,cAAgB,UAAY,CAC9C,IAAIE,EAAa,EACbE,EAAW,KAAK,QAAQ,gBAC5B,GAAIA,EAAS,OAET,QADIC,EAAcC,EAAY,KAAK,QAAQ,kBAAkBF,EAAU,KAAK,UAAU,EAC/E,KAAK,WAAaF,EAAa,IAClCG,EAAe,KAAK,QAAQ,kBAAkBD,EAAU,KAAK,WAAaF,EAAa,CAAC,EACpFG,IAAiBC,IAErBA,EAAYD,EACZH,SAIJA,EAAa,KAAK,WAEtB,OAAOA,CACf,EACIF,EAAY,UAAU,cAAgB,SAAUC,EAAQC,EAAY,CAC5DD,IAAW,SACXA,EAAS,KAAK,eAAc,GAChC,IAAIM,EAAaN,IAAW,KAAK,QAAQ,UAAS,EAAK,EAAIO,EAAYD,EAAY,KAAK,IAAM,KAAK,IAInG,GAHA,KAAK,WAAa,EAClB,KAAK,KAAO,KAAK,QAAQ,QAAQN,CAAM,EACvC,KAAK,SAAW,KAAK,QAAU,KAAK,KAAK,OAAO,CAAC,IAAM,KAAK,IACxD,KAAK,QAAQ,aAAc,CAC3B,IAAIQ,EAAS,KAAK,QAAQ,UAAUR,CAAM,EACtCQ,IACIP,IAAe,SACfA,EAAa,KAAK,cAAa,GAC/BA,EAAa,GAAKO,EAAO,QACzB,KAAK,WAAaA,EAAO,OACzB,KAAK,WAAa,KAAK,WAAa,KAAK,WAAWX,EAAS,CAAC,EAC9D,KAAK,KAAQI,EAAaO,EAAO,OAC7B,KAAK,KAAK,UAAUA,EAAOP,EAAa,CAAC,EAAGO,EAAOP,CAAU,CAAC,EAC9D,KAAK,KAAK,UAAUO,EAAOA,EAAO,OAAS,CAAC,CAAC,GAGjD,KAAK,KAAO,KAAK,KAAK,UAAU,EAAGA,EAAOP,CAAU,CAAC,EAErDA,GAAcO,EAAO,SACrB,KAAK,MAAS,KAAK,eAAkBD,EAAYV,EAAS,KAG9E,MAEY,KAAK,MAAQ,KAAK,eAAiBU,EAAYV,EAAS,IAE5D,IAAIrZ,EAAU,KAAK,QAASia,EAAQ,EAAGvoB,EACvC,KAAK,KAAO,KAAK,KAAK,QAAQ,qCAAsC,SAAUtF,EAAIkI,EAAG,CACjF,OAAIlI,IAAO,KAAQ4T,EAAQ,YAAY5T,EAAG,WAAW,CAAC,CAAC,GACnDsF,EAAQtF,IAAO,IAAQ4T,EAAQ,iBAAiB1L,EAAI2lB,CAAK,EAAI,EAC7DA,GAASvoB,EAAO,EACTyL,EAAK,aAAakc,EAAS,IAAK3nB,CAAI,GAExCtF,CACnB,CAAS,EACG,KAAK,WACL,KAAK,YAAY,MAAM,YAAe,KAAK,KAAK,OAAO,KAAK,KAAK,OAAS,CAAC,GAAKitB,EAAS,IAAO,KAAK,KAAK,OAAO,EAAG,KAAK,KAAK,OAAS,CAAC,EAAI,KAAK,KACjJ,KAAK,cAAgB,KAAK,aAAe,KAAK,YAAY,MAAM,sBAAqB,EAAG,MAEpG,EACIE,EAAY,UAAU,cAAgB,UAAY,CAC9C,IAAIT,EAAgB,CAAA,EAChBO,EAAS,kBAAkB,KAAK,KAAMP,CAAa,GAAK,KAAK,SAC7D,KAAK,QAAUO,EAAS,cAAc,KAAK,KAAMP,EAAe,KAAK,QAAQ,EAG7E,KAAK,QAAU,CAAA,CAE3B,EACIS,EAAY,UAAU,YAAc,UAAY,CAC5C,KAAK,WAAa,IAC1B,EACIA,EAAY,UAAU,sBAAwB,SAAUW,EAAa,CACjE,GAAI,KAAK,iBAAmBA,EAAY,eAAe,MAEvD,MAAK,YAAcA,EACnB,IAAIhK,EAAiB,KAAK,eAAiBgK,EAAY,eAAe,MAClEC,EAAgBD,EAAY,kBAAkB,GAAQ,EAC1D,KAAK,WAAWb,EAAS,CAAC,EAAI,KAAK,WAAWA,EAAS,EAAE,EAAI,KAAK,WAAWA,EAAS,IAAI,EAAInJ,EAC9F,KAAK,WAAWmJ,EAAS,CAAC,EAAI,KAAK,WAAWA,EAAS,EAAE,EAAIc,EAC7D,KAAK,WAAWd,EAAS,GAAG,EAAIc,EAAgB,IAChD,KAAK,WAAWd,EAAS,CAAC,EAAI,KAAK,WAAWA,EAAS,GAAG,EAAI,EAC9D,KAAK,WAAa,KAC1B,EACIE,EAAY,UAAU,kBAAoB,SAAUa,EAAgB,CAChE,KAAK,eAAiBA,EACtB,KAAK,WAAa,IAC1B,EACIb,EAAY,UAAU,WAAa,SAAUc,EAAS,CAClD,KAAK,IAAMA,CACnB,EACId,EAAY,UAAU,gBAAkB,SAAUe,EAAO,CACrD,KAAK,aAAeA,CAC5B,EACIf,EAAY,UAAU,UAAY,SAAU5Z,EAAK,CAC7C,OAAI,KAAK,OACE,GACPA,GAAO,KACC,KAAK,QAAQ,QAAQA,CAAG,EAAE,OAAO,CAAC,GAAK,KAAK,IAE7C,KAAK,QACxB,EACI4Z,EAAY,UAAU,gBAAkB,SAAUlS,EAAQkT,EAAU,CAEhE,QADIzS,EAAST,EAAO,kBAAiB,EAC5B1H,EAAM0H,EAAO,UAAU,mBAAkB,EAAG,IAAK1H,GAAOmI,EAAO,IAAKnI,IACrE,CAAC4a,GAAYlT,EAAO,QAAQ,QAAQ1H,CAAG,EAAE,OAAO,CAAC,IAAM0H,EAAO,QAAQ,aAAa,IACnFA,EAAO,QAAQ,IAAI,aAAa1H,EAAK,EAAG,CAAC,EACpC4a,GAAYlT,EAAO,QAAQ,QAAQ1H,CAAG,EAAE,OAAO,CAAC,IAAM0H,EAAO,QAAQ,aAAa,KACvFA,EAAO,QAAQ,IAAI,OAAO,CAAE,OAAQ,EAAG,IAAK1H,CAAG,EAAI0H,EAAO,QAAQ,aAAa,GAAG,CAElG,EACIkS,EAAY,UAAU,WAAa,SAAUiB,EAAK,CAC9CA,GAAO,KAAK,WACZ,IAAIC,EAAgB,KAAK,KAAK,OAAO,CAAC,IAAM,KAAK,IAAO,EAAI,EACxDC,EAAcF,EAAMC,EAAiB,KAAK,QAAQ,eAAiBD,EAAMA,EAAM,EAAKC,EACpFE,EAAYtB,EAAS,wBAAwBqB,EAAY,KAAK,OAAO,EAAGpD,EAAS,KAAK,QAAQ,WAAY1Q,EAAO,EACjH,CAAC,KAAK,QAAQ,gBAAkB4T,GAAOC,GAAgBnD,EAAOqD,CAAS,EAAI,IAAM,GACjFA,IACJ,QAASrmB,EAAI,EAAGA,EAAIqmB,EAAWrmB,IAC3BsS,GAAQ,KAAK,WAAW0Q,EAAOhjB,CAAC,CAAC,EAErC,MAAI,CAAC,KAAK,QAAQ,aAAY,GAAOkmB,EAAMC,GAAkBnD,EAAOqD,CAAS,EAAI,IAAM,IACnF/T,GAAQ,KAAK,WAAW0Q,EAAOqD,CAAS,CAAC,GACzC,KAAK,aACL/T,GAAQ,KAAK,SAAY,GAAK,KAAK,WAAc,KAAK,YACtD,KAAK,WACLA,GAAQ,KAAK,eACVA,CACf,EACI2S,EAAY,UAAU,cAAgB,SAAUqB,EAAUC,EAAQ,CAC9D,IAAIxjB,EAAM,KAAK,QAASigB,EAASjgB,EAAI,WAAYyjB,EAAOC,EAAa,CAAA,EAAIC,EAAS,EAAGC,EAAY,KAAK,IAAIL,EAAUC,CAAM,EAAI,KAAK,WAAYK,EAAY,KAAK,IAAIN,EAAUC,CAAM,EAAI,KAAK,WAAYM,EAAa,GAAOC,EAAiB,GAAOvW,EAAiB,EAClQ,KAAK,aACLmW,GAAU,KAAK,SAAY,GAAK,KAAK,WAAc,KAAK,YAC5D,QAAS7B,EAAQkC,EAAS,EAAGA,EAAS/D,EAAO,OAAQ+D,IACjDlC,EAAS9hB,EAAI,kBAAkBgkB,CAAM,EACrCP,EAAQxD,EAAO+D,CAAM,EACrBF,EAAchC,GAAU8B,GAAe9B,EAAS+B,EAC5CC,GAAc,CAACC,EACfvW,EAAiBmW,EAEZ,CAACG,GAAcC,GACpBL,EAAW,KAAK,CAAE,KAAMlW,EAAgB,MAAOmW,EAASnW,EAAgB,EAE5EmW,GAAU,KAAK,WAAWF,CAAK,EAC/BM,EAAiBD,EAKrB,GAHIA,GAAeE,IAAW/D,EAAO,QACjCyD,EAAW,KAAK,CAAE,KAAMlW,EAAgB,MAAOmW,EAASnW,EAAgB,EAExE,KAAK,SACL,QAASvQ,EAAI,EAAGA,EAAIymB,EAAW,OAAQzmB,IACnCymB,EAAWzmB,CAAC,EAAE,MAAQ,KAAK,cAGnC,OAAOymB,CACf,EACIxB,EAAY,UAAU,YAAc,SAAU+B,EAAM,CAC5C,KAAK,WACLA,GAAQ,KAAK,eACjB,IAAIZ,EAAa,EAAGY,EAAO,KAAK,IAAIA,EAAM,CAAC,EAAGN,EAAS,EAAGL,EAAY,EAAGrD,EAAS,KAAK,QAAQ,WAAYiE,EAAY,KAAK,WAAWjE,EAAOqD,CAAS,CAAC,EAGxJ,IAFI,KAAK,aACLW,GAAQ,KAAK,SAAY,GAAK,KAAK,WAAc,KAAK,YACnDA,EAAON,EAASO,EAAY,GAAG,CAElC,GADAP,GAAUO,EACNZ,IAAcrD,EAAO,OAAS,EAAG,CACjCiE,EAAY,EACZ,KAChB,CACYA,EAAY,KAAK,WAAWjE,EAAO,EAAEqD,CAAS,CAAC,CAC3D,CACQ,OAAIA,EAAY,GAAMrD,EAAOqD,EAAY,CAAC,EAAI,IAAM,GAAOrD,EAAOqD,CAAS,EAAI,IAAM,GAC7EW,EAAON,GACPL,IACJD,EAAa,KAAK,QAAQ,kBAAkBC,CAAS,GAEhDA,EAAY,GAAMrD,EAAOqD,EAAY,CAAC,EAAI,IAAM,GAAOrD,EAAOqD,CAAS,EAAI,IAAM,EACtFD,EAAa,GAAMY,EAAON,EAAU,KAAK,QAAQ,kBAAkBL,CAAS,EACtE,KAAK,QAAQ,kBAAkBA,EAAY,CAAC,GAE5C,KAAK,UAAYA,IAAcrD,EAAO,OAAS,GAAKiE,IAAc,GAAMjE,EAAOqD,EAAY,CAAC,EAAI,IAAM,GACxG,CAAC,KAAK,UAAYA,IAAc,GAAMrD,EAAOqD,CAAS,EAAI,IAAM,EACpED,EAAa,EAAI,KAAK,QAAQ,kBAAkBC,CAAS,GAGrDA,EAAY,GAAMrD,EAAOqD,EAAY,CAAC,EAAI,IAAM,GAAMY,IAAc,GACpEZ,IACJD,EAAa,KAAK,QAAQ,kBAAkBC,CAAS,GAErDD,IAAe,GAAK,KAAK,UACzBA,IACIA,EAAa,KAAK,UAClC,EACWnB,CACX,IACAxkB,EAAQ,YAAcwkB,CAEtB,CAAC,EAED,IAAI,OAAO,gBAAgB,CAAC,UAAU,UAAU,SAAS,cAAc,eAAe,wBAAwB,WAAW,EAAG,SAAS/kB,EAASO,EAAShB,EAAO,CAC9J,IAAIoI,EAAM3H,EAAQ,WAAW,EACzB2I,EAAO3I,EAAQ,YAAY,EAC3B+G,EAAe/G,EAAQ,qBAAqB,EAAE,aAC9C6K,EAAQ7K,EAAQ,SAAS,EAAE,MAC3BgnB,EAA2B,UAAY,CACvC,SAASA,EAAUxb,EAAS,CACxB,KAAK,QAAUA,EACf,KAAK,IAAMA,EAAQ,YAAW,EAC9B,KAAK,eAAc,EACnB,KAAK,OAAS,KAAK,KAAO,KAAK,IAAI,aAAa,EAAG,CAAC,EACpD,KAAK,OAAS,KAAK,IAAI,aAAa,EAAG,CAAC,EACxC,KAAK,QAAU,GACf,IAAImP,EAAO,KACX,KAAK,OAAO,GAAG,SAAU,SAAU3jB,EAAG,CAClC2jB,EAAK,eAAiB,GACjBA,EAAK,SACNA,EAAK,MAAM,cAAc,EACzB,CAACA,EAAK,UAAY,CAACA,EAAK,SACxBA,EAAK,MAAM,iBAAiB,EAC5B,CAACA,EAAK,4BAA8B3jB,EAAE,IAAI,QAAUA,EAAE,MAAM,SAC5D2jB,EAAK,eAAiB,KACtC,CAAS,EACD,KAAK,OAAO,GAAG,SAAU,UAAY,CACjCA,EAAK,eAAiB,GAClB,CAACA,EAAK,UAAY,CAACA,EAAK,SACxBA,EAAK,MAAM,iBAAiB,CAC5C,CAAS,CACT,CACI,OAAAqM,EAAU,UAAU,QAAU,UAAY,CACtC,OAAO,KAAK,UAAa,KAAK,OAAO,KAAO,KAAK,KAAK,KAClD,KAAK,OAAO,QAAU,KAAK,KAAK,MAC5C,EACIA,EAAU,UAAU,YAAc,UAAY,CAC1C,MAAO,CAAC,KAAK,UAAY,KAAK,OAAO,KAAO,KAAK,OAAO,GAChE,EACIA,EAAU,UAAU,UAAY,UAAY,CACxC,OAAO,KAAK,KAAK,YAAW,CACpC,EACIA,EAAU,UAAU,UAAY,SAAU7b,EAAKC,EAAQ,CACnD,KAAK,SAAW,GAChB,KAAK,OAAO,YAAYD,EAAKC,CAAM,CAC3C,EACI4b,EAAU,UAAU,UAAY,UAAY,CACxC,OAAI,KAAK,SACE,KAAK,iBAAgB,EACzB,KAAK,OAAO,YAAW,CACtC,EACIA,EAAU,UAAU,iBAAmB,UAAY,CAC/C,OAAO,KAAK,KAAK,YAAW,CACpC,EACIA,EAAU,UAAU,YAAc,UAAY,CAC1C,IAAI3T,EAAS,KAAK,OACd4T,EAAO,KAAK,KAChB,OAAQ5T,EAAO,IAAM4T,EAAK,KAAQ5T,EAAO,KAAO4T,EAAK,KAAO5T,EAAO,OAAS4T,EAAK,MACzF,EACID,EAAU,UAAU,SAAW,UAAY,CACvC,IAAI3T,EAAS,KAAK,OACd4T,EAAO,KAAK,KAChB,OAAI,KAAK,SACEpc,EAAM,WAAWoc,EAAMA,CAAI,EAC/B,KAAK,YAAW,EACjBpc,EAAM,WAAWoc,EAAM5T,CAAM,EAC7BxI,EAAM,WAAWwI,EAAQ4T,CAAI,CAC3C,EACID,EAAU,UAAU,eAAiB,UAAY,CACxC,KAAK,WACN,KAAK,SAAW,GAChB,KAAK,MAAM,iBAAiB,EAExC,EACIA,EAAU,UAAU,UAAY,UAAY,CACxC,KAAK,cAAc,EAAG,EAAG,OAAO,UAAW,OAAO,SAAS,CACnE,EACIA,EAAU,UAAU,SAAW,SAAU9b,EAAOgc,EAAS,CACrD,IAAIhlB,EAAQglB,EAAUhc,EAAM,IAAMA,EAAM,MACpC9I,EAAM8kB,EAAUhc,EAAM,MAAQA,EAAM,IACxC,KAAK,cAAchJ,EAAM,IAAKA,EAAM,OAAQE,EAAI,IAAKA,EAAI,MAAM,CACvE,EACI4kB,EAAU,UAAU,cAAgB,SAAUG,EAAWC,EAAcC,EAAWC,EAAc,CAC5F,GAAI,MAAK,QAET,KAAIC,EAAW,KAAK,SAChBC,EAAiB,KAAK,kBAC1B,KAAK,QAAU,GACf,KAAK,eAAiB,KAAK,eAAiB,GAC5C,KAAK,OAAO,YAAYL,EAAWC,CAAY,EAC/C,KAAK,OAAO,YAAYC,EAAWC,CAAY,EAC/C,KAAK,SAAW,CAACzc,EAAM,cAAc,KAAK,OAAQ,KAAK,MAAM,EAC7D,KAAK,QAAU,GACX,KAAK,gBACL,KAAK,MAAM,cAAc,GACzB,KAAK,gBAAkB,KAAK,gBAAkB0c,GAAY,KAAK,UAAYC,IAC3E,KAAK,MAAM,iBAAiB,EACxC,EACIR,EAAU,UAAU,eAAiB,SAAUS,EAAO,CAClD,IAAIR,EAAO,KAAK,KACZ,KAAK,UACL,KAAK,mBAAmBA,EAAK,IAAKA,EAAK,MAAM,EACjDQ,EAAM,KAAK,IAAI,CACvB,EACIT,EAAU,UAAU,SAAW,SAAU7b,EAAKC,EAAQ,CAClD,KAAK,eAAe,UAAY,CAC5B,KAAK,aAAaD,EAAKC,CAAM,CACzC,CAAS,CACT,EACI4b,EAAU,UAAU,iBAAmB,SAAUhU,EAAK,CAClD,KAAK,eAAe,UAAY,CAC5B,KAAK,qBAAqBA,CAAG,CACzC,CAAS,CACT,EACIgU,EAAU,UAAU,OAAS,SAAU7b,EAAKC,EAAQ,CAChD,KAAK,eAAc,EACnB,KAAK,aAAaD,EAAKC,CAAM,CACrC,EACI4b,EAAU,UAAU,eAAiB,SAAUhU,EAAK,CAChD,KAAK,eAAc,EACnB,KAAK,qBAAqBA,CAAG,CACrC,EACIgU,EAAU,UAAU,SAAW,UAAY,CACvC,KAAK,eAAe,KAAK,YAAY,CAC7C,EACIA,EAAU,UAAU,WAAa,UAAY,CACzC,KAAK,eAAe,KAAK,cAAc,CAC/C,EACIA,EAAU,UAAU,YAAc,UAAY,CAC1C,KAAK,eAAe,KAAK,eAAe,CAChD,EACIA,EAAU,UAAU,WAAa,UAAY,CACzC,KAAK,eAAe,KAAK,cAAc,CAC/C,EACIA,EAAU,UAAU,gBAAkB,UAAY,CAC9C,KAAK,eAAe,KAAK,mBAAmB,CACpD,EACIA,EAAU,UAAU,cAAgB,UAAY,CAC5C,KAAK,eAAe,KAAK,iBAAiB,CAClD,EACIA,EAAU,UAAU,cAAgB,UAAY,CAC5C,KAAK,eAAe,KAAK,iBAAiB,CAClD,EACIA,EAAU,UAAU,gBAAkB,UAAY,CAC9C,KAAK,eAAe,KAAK,mBAAmB,CACpD,EACIA,EAAU,UAAU,gBAAkB,UAAY,CAC9C,KAAK,eAAe,KAAK,mBAAmB,CACpD,EACIA,EAAU,UAAU,eAAiB,UAAY,CAC7C,KAAK,eAAe,KAAK,kBAAkB,CACnD,EACIA,EAAU,UAAU,aAAe,SAAU7b,EAAKC,EAAQ,CACtD,GAAI,OAAOA,EAAU,IAAa,CAC9B,IAAIkI,EAASnI,GAAO,KAAK,KACzBA,EAAMmI,EAAO,IACblI,EAASkI,EAAO,MAC5B,CACQ,OAAO,KAAK,QAAQ,aAAanI,EAAKC,CAAM,CACpD,EACI4b,EAAU,UAAU,WAAa,UAAY,CACzC,KAAK,kBAAkB,KAAK,cAAc,CAClD,EACIA,EAAU,UAAU,YAAc,UAAY,CAC1C,IAAI1T,EAAS,KAAK,UAAS,EACvBpI,EAAQ,KAAK,QAAQ,cAAcoI,EAAO,IAAKA,EAAO,MAAM,EAChE,KAAK,kBAAkBpI,CAAK,CACpC,EACI8b,EAAU,UAAU,aAAe,SAAU7b,EAAKuc,EAAiB,CAC/D,IAAIC,EAAW,OAAOxc,GAAO,SAAWA,EAAM,KAAK,KAAK,IACpDyc,EACAC,EAAW,KAAK,QAAQ,YAAYF,CAAQ,EAQhD,OAPIE,GACAF,EAAWE,EAAS,MAAM,IAC1BD,EAASC,EAAS,IAAI,KAGtBD,EAASD,EAETD,IAAoB,GACb,IAAI7c,EAAM8c,EAAU,EAAGC,EAAQ,KAAK,QAAQ,QAAQA,CAAM,EAAE,MAAM,EAElE,IAAI/c,EAAM8c,EAAU,EAAGC,EAAS,EAAG,CAAC,CACvD,EACIZ,EAAU,UAAU,WAAa,UAAY,CACzC,KAAK,kBAAkB,KAAK,cAAc,CAClD,EACIA,EAAU,UAAU,aAAe,UAAY,CAC3C,KAAK,aAAa,GAAI,CAAC,CAC/B,EACIA,EAAU,UAAU,eAAiB,UAAY,CAC7C,KAAK,aAAa,EAAG,CAAC,CAC9B,EACIA,EAAU,UAAU,qBAAuB,SAAU1T,EAAQwU,EAAS5T,EAAW,CAC7E,IAAIhS,EAAQoR,EAAO,OACflR,EAAMkR,EAAO,OAASwU,EAC1B,OAAI5T,EAAY,IACZhS,EAAQoR,EAAO,OAASwU,EACxB1lB,EAAMkR,EAAO,QAEV,KAAK,QAAQ,UAAUA,CAAM,GAAK,KAAK,IAAI,QAAQA,EAAO,GAAG,EAAE,MAAMpR,EAAOE,CAAG,EAAE,MAAM,GAAG,EAAE,OAAS,GAAK0lB,CACzH,EACId,EAAU,UAAU,eAAiB,UAAY,CAC7C,IAAI1T,EAAS,KAAK,KAAK,YAAW,EAAI8E,EACtC,GAAIA,EAAO,KAAK,QAAQ,UAAU9E,EAAO,IAAKA,EAAO,OAAQ,EAAE,EAC3D,KAAK,aAAa8E,EAAK,MAAM,IAAKA,EAAK,MAAM,MAAM,UAE9C9E,EAAO,SAAW,EACnBA,EAAO,IAAM,GACb,KAAK,aAAaA,EAAO,IAAM,EAAG,KAAK,IAAI,QAAQA,EAAO,IAAM,CAAC,EAAE,MAAM,MAG5E,CACD,IAAIwU,EAAU,KAAK,QAAQ,WAAU,EACjC,KAAK,qBAAqBxU,EAAQwU,EAAS,EAAE,GAAK,CAAC,KAAK,QAAQ,4BAChE,KAAK,aAAa,EAAG,CAACA,CAAO,EAG7B,KAAK,aAAa,EAAG,EAAE,CAEvC,CACA,EACId,EAAU,UAAU,gBAAkB,UAAY,CAC9C,IAAI1T,EAAS,KAAK,KAAK,YAAW,EAAI8E,EACtC,GAAIA,EAAO,KAAK,QAAQ,UAAU9E,EAAO,IAAKA,EAAO,OAAQ,CAAC,EAC1D,KAAK,aAAa8E,EAAK,IAAI,IAAKA,EAAK,IAAI,MAAM,UAE1C,KAAK,KAAK,QAAU,KAAK,IAAI,QAAQ,KAAK,KAAK,GAAG,EAAE,OACrD,KAAK,KAAK,IAAM,KAAK,IAAI,UAAS,EAAK,GACvC,KAAK,aAAa,KAAK,KAAK,IAAM,EAAG,CAAC,MAGzC,CACD,IAAI0P,EAAU,KAAK,QAAQ,WAAU,EACjCxU,EAAS,KAAK,KACd,KAAK,qBAAqBA,EAAQwU,EAAS,CAAC,GAAK,CAAC,KAAK,QAAQ,4BAC/D,KAAK,aAAa,EAAGA,CAAO,EAG5B,KAAK,aAAa,EAAG,CAAC,CAEtC,CACA,EACId,EAAU,UAAU,oBAAsB,UAAY,CAClD,IAAI7b,EAAM,KAAK,KAAK,IAChBC,EAAS,KAAK,KAAK,OACnBwJ,EAAY,KAAK,QAAQ,oBAAoBzJ,EAAKC,CAAM,EACxD2c,EAAsB,KAAK,QAAQ,yBAAyBnT,EAAW,CAAC,EACxEoT,EAAe,KAAK,QAAQ,eAAe7c,EAAK,KAAM4c,EAAoB,IAAKA,EAAoB,MAAM,EACzGE,EAAeD,EAAa,MAAM,MAAM,EACxCC,EAAa,CAAC,EAAE,QAAU7c,GAAU,CAAC,KAAK,QAAQ,0BAClD2c,EAAoB,QAAUE,EAAa,CAAC,EAAE,QAClD,KAAK,qBAAqBF,CAAmB,CACrD,EACIf,EAAU,UAAU,kBAAoB,UAAY,CAChD,IAAIC,EAAO,KAAK,KACZiB,EAAU,KAAK,QAAQ,iCAAiCjB,EAAK,IAAKA,EAAK,MAAM,EACjF,GAAI,KAAK,KAAK,QAAUiB,EAAQ,OAAQ,CACpC,IAAI3tB,EAAO,KAAK,QAAQ,QAAQ2tB,EAAQ,GAAG,EAC3C,GAAIA,EAAQ,QAAU3tB,EAAK,OAAQ,CAC/B,IAAI4tB,EAAU5tB,EAAK,OAAO,MAAM,EAC5B4tB,EAAU,IACVD,EAAQ,OAASC,EACrC,CACA,CACQ,KAAK,aAAaD,EAAQ,IAAKA,EAAQ,MAAM,CACrD,EACIlB,EAAU,UAAU,kBAAoB,UAAY,CAChD,IAAI7b,EAAM,KAAK,IAAI,UAAS,EAAK,EAC7BC,EAAS,KAAK,IAAI,QAAQD,CAAG,EAAE,OACnC,KAAK,aAAaA,EAAKC,CAAM,CACrC,EACI4b,EAAU,UAAU,oBAAsB,UAAY,CAClD,KAAK,aAAa,EAAG,CAAC,CAC9B,EACIA,EAAU,UAAU,wBAA0B,UAAY,CACtD,IAAI7b,EAAM,KAAK,KAAK,IAChBC,EAAS,KAAK,KAAK,OACnB7Q,EAAO,KAAK,IAAI,QAAQ4Q,CAAG,EAC3Bid,EAAgB7tB,EAAK,UAAU6Q,CAAM,EACzC,KAAK,QAAQ,WAAW,UAAY,EACpC,KAAK,QAAQ,QAAQ,UAAY,EACjC,IAAIgN,EAAO,KAAK,QAAQ,UAAUjN,EAAKC,EAAQ,CAAC,EAChD,GAAIgN,EAAM,CACN,KAAK,aAAaA,EAAK,IAAI,IAAKA,EAAK,IAAI,MAAM,EAC/C,MACZ,CAMQ,GALI,KAAK,QAAQ,WAAW,KAAKgQ,CAAa,IAC1Chd,GAAU,KAAK,QAAQ,WAAW,UAClC,KAAK,QAAQ,WAAW,UAAY,EACpCgd,EAAgB7tB,EAAK,UAAU6Q,CAAM,GAErCA,GAAU7Q,EAAK,OAAQ,CACvB,KAAK,aAAa4Q,EAAK5Q,EAAK,MAAM,EAClC,KAAK,gBAAe,EAChB4Q,EAAM,KAAK,IAAI,UAAS,EAAK,GAC7B,KAAK,oBAAmB,EAC5B,MACZ,CACY,KAAK,QAAQ,QAAQ,KAAKid,CAAa,IACvChd,GAAU,KAAK,QAAQ,QAAQ,UAC/B,KAAK,QAAQ,QAAQ,UAAY,GAErC,KAAK,aAAaD,EAAKC,CAAM,CACrC,EACI4b,EAAU,UAAU,uBAAyB,UAAY,CACrD,IAAI7b,EAAM,KAAK,KAAK,IAChBC,EAAS,KAAK,KAAK,OACnBgN,EACJ,GAAIA,EAAO,KAAK,QAAQ,UAAUjN,EAAKC,EAAQ,EAAE,EAAG,CAChD,KAAK,aAAagN,EAAK,MAAM,IAAKA,EAAK,MAAM,MAAM,EACnD,MACZ,CACQ,IAAI9W,EAAM,KAAK,QAAQ,gBAAgB6J,EAAKC,EAAQ,EAAE,EAClD9J,GAAO,OACPA,EAAM,KAAK,IAAI,QAAQ6J,CAAG,EAAE,UAAU,EAAGC,CAAM,GAEnD,IAAIid,EAAe1f,EAAK,cAAcrH,CAAG,EAQzC,GAPA,KAAK,QAAQ,WAAW,UAAY,EACpC,KAAK,QAAQ,QAAQ,UAAY,EAC7B,KAAK,QAAQ,WAAW,KAAK+mB,CAAY,IACzCjd,GAAU,KAAK,QAAQ,WAAW,UAClCid,EAAeA,EAAa,MAAM,KAAK,QAAQ,WAAW,SAAS,EACnE,KAAK,QAAQ,WAAW,UAAY,GAEpCjd,GAAU,EAAG,CACb,KAAK,aAAaD,EAAK,CAAC,EACxB,KAAK,eAAc,EACfA,EAAM,GACN,KAAK,mBAAkB,EAC3B,MACZ,CACY,KAAK,QAAQ,QAAQ,KAAKkd,CAAY,IACtCjd,GAAU,KAAK,QAAQ,QAAQ,UAC/B,KAAK,QAAQ,QAAQ,UAAY,GAErC,KAAK,aAAaD,EAAKC,CAAM,CACrC,EACI4b,EAAU,UAAU,mBAAqB,SAAUoB,EAAe,CAC9D,IAAI5tB,EAAQ,EAAG5C,EACX0wB,EAAe,KACfC,EAAU,KAAK,QAAQ,QAE3B,GADAA,EAAQ,UAAY,EAChB,KAAK,QAAQ,QAAQ,KAAKH,CAAa,EACvC5tB,EAAQ,KAAK,QAAQ,QAAQ,cAE5B,CACD,MAAQ5C,EAAKwwB,EAAc5tB,CAAK,IAAM8tB,EAAa,KAAK1wB,CAAE,GACtD4C,IACJ,GAAIA,EAAQ,GAER,IADA+tB,EAAQ,UAAY,GACZ3wB,EAAKwwB,EAAc5tB,CAAK,IAAM,CAAC+tB,EAAQ,KAAK3wB,CAAE,GAGlD,GAFA2wB,EAAQ,UAAY,EACpB/tB,IACI8tB,EAAa,KAAK1wB,CAAE,EACpB,GAAI4C,EAAQ,EAAG,CACXA,IACA,KAC5B,KAC6B,CACD,MAAQ5C,EAAKwwB,EAAc5tB,CAAK,IAAM8tB,EAAa,KAAK1wB,CAAE,GACtD4C,IACJ,GAAIA,EAAQ,EACR,KAChC,EAIA,CACQ,OAAA+tB,EAAQ,UAAY,EACb/tB,CACf,EACIwsB,EAAU,UAAU,yBAA2B,UAAY,CACvD,IAAI7b,EAAM,KAAK,KAAK,IAChBC,EAAS,KAAK,KAAK,OACnB7Q,EAAO,KAAK,IAAI,QAAQ4Q,CAAG,EAC3Bid,EAAgB7tB,EAAK,UAAU6Q,CAAM,EACrCgN,EAAO,KAAK,QAAQ,UAAUjN,EAAKC,EAAQ,CAAC,EAChD,GAAIgN,EACA,OAAO,KAAK,aAAaA,EAAK,IAAI,IAAKA,EAAK,IAAI,MAAM,EAC1D,GAAIhN,GAAU7Q,EAAK,OAAQ,CACvB,IAAIwF,EAAI,KAAK,IAAI,UAAS,EAC1B,GACIoL,IACAid,EAAgB,KAAK,IAAI,QAAQjd,CAAG,QAC/BA,EAAMpL,GAAK,QAAQ,KAAKqoB,CAAa,GACzC,OAAO,KAAKA,CAAa,IAC1BA,EAAgB,IACpBhd,EAAS,CACrB,CACQ,IAAI5Q,EAAQ,KAAK,mBAAmB4tB,CAAa,EACjD,KAAK,aAAajd,EAAKC,EAAS5Q,CAAK,CAC7C,EACIwsB,EAAU,UAAU,wBAA0B,UAAY,CACtD,IAAI7b,EAAM,KAAK,KAAK,IAChBC,EAAS,KAAK,KAAK,OACnBgN,EACJ,GAAIA,EAAO,KAAK,QAAQ,UAAUjN,EAAKC,EAAQ,EAAE,EAC7C,OAAO,KAAK,aAAagN,EAAK,MAAM,IAAKA,EAAK,MAAM,MAAM,EAC9D,IAAI7d,EAAO,KAAK,QAAQ,QAAQ4Q,CAAG,EAAE,UAAU,EAAGC,CAAM,EACxD,GAAIA,IAAW,EAAG,CACd,GACID,IACA5Q,EAAO,KAAK,IAAI,QAAQ4Q,CAAG,QACtBA,EAAM,GAAK,QAAQ,KAAK5Q,CAAI,GACrC6Q,EAAS7Q,EAAK,OACT,OAAO,KAAKA,CAAI,IACjBA,EAAO,GACvB,CACQ,IAAI8tB,EAAe1f,EAAK,cAAcpO,CAAI,EACtCC,EAAQ,KAAK,mBAAmB6tB,CAAY,EAChD,OAAO,KAAK,aAAald,EAAKC,EAAS5Q,CAAK,CACpD,EACIwsB,EAAU,UAAU,oBAAsB,UAAY,CAC9C,KAAK,QAAQ,iBACb,KAAK,wBAAuB,EAE5B,KAAK,yBAAwB,CACzC,EACIA,EAAU,UAAU,mBAAqB,UAAY,CAC7C,KAAK,QAAQ,iBACb,KAAK,uBAAsB,EAE3B,KAAK,wBAAuB,CACxC,EACIA,EAAU,UAAU,aAAe,SAAUwB,EAAM3F,EAAO,CACtD,IAAI7L,EAAY,KAAK,QAAQ,yBAAyB,KAAK,KAAK,IAAK,KAAK,KAAK,MAAM,EACjFyR,EAgBJ,GAfI5F,IAAU,IACN2F,IAAS,IACL,KAAK,QAAQ,aAAa,UAAUxR,EAAU,IAAK,KAAK,KAAK,GAAG,GAChEyR,EAAU,KAAK,QAAQ,aAAa,WAAWzR,EAAU,MAAM,EAC/DA,EAAU,OAAS,KAAK,MAAMyR,EAAU,KAAK,QAAQ,aAAa,WAAW,CAAC,CAAC,GAG/EA,EAAUzR,EAAU,OAAS,KAAK,QAAQ,aAAa,WAAW,CAAC,GAGvE,KAAK,eACLA,EAAU,OAAS,KAAK,eAExB,KAAK,eAAiBA,EAAU,QAEpCwR,GAAQ,GAAK,KAAK,QAAQ,aAAe,KAAK,QAAQ,YAAY,KAAK,KAAK,GAAG,EAAG,CAClF,IAAIE,EAAS,KAAK,QAAQ,YAAY,KAAK,KAAK,GAAG,EAC/CF,EAAO,EACPA,GAAQE,EAAO,WAAa,EACvBF,EAAO,IACZA,GAAQE,EAAO,UAAYA,EAAO,WAAa,GAC/D,CACQ,IAAI3R,EAAS,KAAK,QAAQ,yBAAyBC,EAAU,IAAMwR,EAAMxR,EAAU,OAAQyR,CAAO,EAC9FD,IAAS,GAAK3F,IAAU,GAAK9L,EAAO,MAAQ,KAAK,KAAK,MAAOA,EAAO,OAAW,KAAK,KAAK,QAE7F,KAAK,aAAaA,EAAO,IAAKA,EAAO,OAAS8L,EAAOA,IAAU,CAAC,CACxE,EACImE,EAAU,UAAU,qBAAuB,SAAU9lB,EAAU,CAC3D,KAAK,aAAaA,EAAS,IAAKA,EAAS,MAAM,CACvD,EACI8lB,EAAU,UAAU,aAAe,SAAU7b,EAAKC,EAAQud,EAAmB,CACzE,IAAIvQ,EAAO,KAAK,QAAQ,UAAUjN,EAAKC,EAAQ,CAAC,EAC5CgN,IACAjN,EAAMiN,EAAK,MAAM,IACjBhN,EAASgN,EAAK,MAAM,QAExB,KAAK,2BAA6B,GAClC,IAAI7d,EAAO,KAAK,QAAQ,QAAQ4Q,CAAG,EAC/B,kBAAkB,KAAK5Q,EAAK,OAAO6Q,CAAM,CAAC,GAAK7Q,EAAK,OAAO6Q,EAAS,CAAC,IACjE,KAAK,KAAK,KAAOD,GAAO,KAAK,KAAK,QAAUC,EAAS,EACrDA,EAASA,EAAS,EAElBA,EAASA,EAAS,GAE1B,KAAK,KAAK,YAAYD,EAAKC,CAAM,EACjC,KAAK,2BAA6B,GAC7Bud,IACD,KAAK,eAAiB,KAClC,EACI3B,EAAU,UAAU,mBAAqB,SAAU7b,EAAKC,EAAQud,EAAmB,CAC/E,IAAI3V,EAAM,KAAK,QAAQ,yBAAyB7H,EAAKC,CAAM,EAC3D,KAAK,aAAa4H,EAAI,IAAKA,EAAI,OAAQ2V,CAAiB,CAChE,EACI3B,EAAU,UAAU,OAAS,UAAY,CACrC,KAAK,KAAK,OAAM,EAChB,KAAK,OAAO,OAAM,CAC1B,EACIA,EAAU,UAAU,kBAAoB,SAAU9b,EAAO,CACrD,KAAK,kBAAkBA,EAAOA,EAAM,QAAUA,EAAM,KAAK,EACzD,KAAK,eAAiBA,EAAM,eAAiB,KAAK,cAC1D,EACI8b,EAAU,UAAU,gBAAkB,SAAU9b,EAAO,CACnD,IAAIkO,EAAI,KAAK,SAAQ,EACrB,OAAIlO,GACAA,EAAM,MAAM,OAASkO,EAAE,MAAM,OAC7BlO,EAAM,MAAM,IAAMkO,EAAE,MAAM,IAC1BlO,EAAM,IAAI,OAASkO,EAAE,IAAI,OACzBlO,EAAM,IAAI,IAAMkO,EAAE,IAAI,KAGtBlO,EAAQkO,EAEZlO,EAAM,OAAS,KAAK,YAAW,EAAKA,EAAM,MAAQA,EAAM,IACxDA,EAAM,cAAgB,KAAK,eACpBA,CACf,EACI8b,EAAU,UAAU,oBAAsB,SAAU4B,EAAM,CACtD,IAAI1mB,EAAQ,KAAK,UAAS,EAC1B,GAAI,CACA0mB,EAAK,IAAI,EACT,IAAIxmB,EAAM,KAAK,UAAS,EACxB,OAAOyI,EAAM,WAAW3I,EAAOE,CAAG,CAC9C,MACkB,CACN,OAAOyI,EAAM,WAAW3I,EAAOA,CAAK,CAChD,SAEY,KAAK,qBAAqBA,CAAK,CAC3C,CACA,EACI8kB,EAAU,UAAU,OAAS,UAAY,CACrC,GAAI,KAAK,WAAc,IAAI5uB,EAAO,KAAK,OAAO,IAAI,SAAUghB,EAAG,CACvD,IAAIyP,EAAKzP,EAAE,MAAK,EAChB,OAAAyP,EAAG,YAAczP,EAAE,QAAUA,EAAE,MACxByP,CACvB,CAAa,MAEA,CAAE,IAAIzwB,EAAO,KAAK,SAAQ,EAC3BA,EAAK,YAAc,KAAK,YAAW,CAC/C,CACQ,OAAOA,CACf,EACI4uB,EAAU,UAAU,SAAW,SAAU5uB,EAAM,CAC3C,GAAIA,EAAK,OAAS,KACd,GAAI,KAAK,WAAaA,EAAK,OAAS,EAAG,CACnC,KAAK,cAAcA,EAAK,CAAC,CAAC,EAC1B,QAAS0H,EAAI1H,EAAK,OAAQ0H,KAAM,CAC5B,IAAIsZ,EAAIvO,EAAM,WAAWzS,EAAK0H,CAAC,EAAE,MAAO1H,EAAK0H,CAAC,EAAE,GAAG,EAC/C1H,EAAK0H,CAAC,EAAE,cACRsZ,EAAE,OAASA,EAAE,OACjB,KAAK,SAASA,EAAG,EAAI,CACzC,CACgB,MAChB,MAEgBhhB,EAAOA,EAAK,CAAC,EAGjB,KAAK,WACL,KAAK,cAAcA,CAAI,EAC3B,KAAK,kBAAkBA,EAAMA,EAAK,WAAW,CACrD,EACI4uB,EAAU,UAAU,QAAU,SAAU5uB,EAAM,CAC1C,IAAKA,EAAK,QAAU,KAAK,aAAeA,EAAK,QAAU,KAAK,WACxD,MAAO,GACX,GAAI,CAACA,EAAK,QAAU,CAAC,KAAK,OACtB,OAAO,KAAK,WAAW,QAAQA,CAAI,EACvC,QAAS0H,EAAI,KAAK,OAAO,OAAQA,KAC7B,GAAI,CAAC,KAAK,OAAOA,CAAC,EAAE,QAAQ1H,EAAK0H,CAAC,CAAC,EAC/B,MAAO,GAEf,MAAO,EACf,EACWknB,CACX,IACAA,EAAU,UAAU,mBAAqBA,EAAU,UAAU,UAC7DA,EAAU,UAAU,mBAAqBA,EAAU,UAAU,UAC7DA,EAAU,UAAU,kBAAoBA,EAAU,UAAU,SAC5Drf,EAAI,UAAUqf,EAAU,UAAWjgB,CAAY,EAC/CxG,EAAQ,UAAYymB,CAEpB,CAAC,EAED,IAAI,OAAO,gBAAgB,CAAC,UAAU,UAAU,SAAS,sBAAsB,EAAG,SAAShnB,EAASO,EAAShB,EAAO,CACpH,IAAIqI,EAAc5H,EAAQ,oBAAoB,EAAE,YAC5C8oB,EAAkB,IAClBC,EAA2B,UAAY,CACvC,SAASA,EAAUC,EAAO,CACtB,KAAK,WACL,KAAK,OAASA,EACd,KAAK,QAAU,CAAA,EACf,KAAK,cAAgB,CAAA,EACrB,QAASptB,KAAO,KAAK,OAAQ,CAOzB,QANImkB,EAAQ,KAAK,OAAOnkB,CAAG,EACvBqtB,EAAc,CAAA,EACdC,EAAa,EACbC,EAAU,KAAK,cAAcvtB,CAAG,EAAI,CAAE,aAAc,MAAM,EAC1DwtB,EAAO,IACPC,EAAiB,CAAA,EACZvpB,EAAI,EAAGA,EAAIigB,EAAM,OAAQjgB,IAAK,CACnC,IAAIwpB,EAAOvJ,EAAMjgB,CAAC,EAOlB,GANIwpB,EAAK,eACLH,EAAQ,aAAeG,EAAK,cAC5BA,EAAK,iBAAmBF,EAAK,QAAQ,GAAG,IAAM,KAC9CA,GAAQ,KACRE,EAAK,SAAWF,EAAK,QAAQ,GAAG,IAAM,KACtCA,GAAQ,KACRE,EAAK,OAAS,KAElB,CAAIA,EAAK,iBAAiB,SACtBA,EAAK,MAAQA,EAAK,MAAM,SAAQ,EAAG,MAAM,EAAG,EAAE,GAClD,IAAIC,EAAgBD,EAAK,MACrBE,EAAa,IAAI,OAAO,OAASD,EAAgB,QAAQ,EAAE,KAAK,GAAG,EAAE,OAAS,EAC9E,MAAM,QAAQD,EAAK,KAAK,EACpBA,EAAK,MAAM,QAAU,GAAKE,GAAc,EACxCF,EAAK,MAAQA,EAAK,MAAM,CAAC,EAEpBE,EAAa,GAAKF,EAAK,MAAM,QAClC,KAAK,YAAY,oDAAqD,CAClE,KAAMA,EACN,WAAYE,EAAa,CACrD,CAAyB,EACDF,EAAK,MAAQA,EAAK,MAAM,CAAC,IAGzBA,EAAK,WAAaA,EAAK,MACvBA,EAAK,MAAQ,KACbA,EAAK,QAAU,KAAK,cAGnB,OAAOA,EAAK,OAAS,YAAc,CAACA,EAAK,UAC1CE,EAAa,EACbF,EAAK,QAAU,KAAK,YAEpBA,EAAK,QAAUA,EAAK,OAExBE,EAAa,IACT,OAAO,KAAKF,EAAK,KAAK,EACtBC,EAAgBD,EAAK,MAAM,QAAQ,cAAe,SAAU1uB,EAAO6uB,EAAO,CACtE,MAAO,MAAQ,SAASA,EAAO,EAAE,EAAIP,EAAa,EAC9E,CAAyB,GAGDM,EAAa,EACbD,EAAgB,KAAK,sBAAsBD,EAAK,KAAK,GAErD,CAACA,EAAK,YAAc,OAAOA,EAAK,OAAS,UACzCD,EAAe,KAAKC,CAAI,GAEhCH,EAAQD,CAAU,EAAIppB,EACtBopB,GAAcM,EACdP,EAAY,KAAKM,CAAa,EACzBD,EAAK,UACNA,EAAK,QAAU,MACnC,CACiBL,EAAY,SACbE,EAAQ,CAAC,EAAI,EACbF,EAAY,KAAK,GAAG,GAExBI,EAAe,QAAQ,SAAUC,EAAM,CACnCA,EAAK,WAAa,KAAK,qBAAqBA,EAAK,MAAOF,CAAI,CAC5E,EAAe,IAAI,EACP,KAAK,QAAQxtB,CAAG,EAAI,IAAI,OAAO,IAAMqtB,EAAY,KAAK,KAAK,EAAI,QAASG,CAAI,CACxF,CACA,CACI,OAAAL,EAAU,UAAU,kBAAoB,SAAUpe,EAAG,CACjDme,EAAkBne,EAAI,CAC9B,EACIoe,EAAU,UAAU,YAAc,SAAUznB,EAAK,CAC7C,IAAIooB,EAAS,KAAK,WAAW,KAAKpoB,CAAG,EAAE,MAAM,CAAC,EAC1C8a,EAAQ,KAAK,MAAM,MAAM,KAAMsN,CAAM,EACzC,GAAI,OAAOtN,GAAU,SACjB,MAAO,CAAC,CAAE,KAAMA,EAAO,MAAO9a,CAAG,CAAE,EAEvC,QADIqoB,EAAS,CAAA,EACJ7pB,EAAI,EAAGC,EAAIqc,EAAM,OAAQtc,EAAIC,EAAGD,IACjC4pB,EAAO5pB,CAAC,IACR6pB,EAAOA,EAAO,MAAM,EAAI,CACpB,KAAMvN,EAAMtc,CAAC,EACb,MAAO4pB,EAAO5pB,CAAC,CACnC,GAEQ,OAAO6pB,CACf,EACIZ,EAAU,UAAU,aAAe,SAAUznB,EAAK,CAC9C,GAAI,CAACA,EACD,MAAO,CAAA,EACX,IAAIooB,EAAS,KAAK,WAAW,KAAKpoB,CAAG,EACrC,GAAI,CAACooB,EACD,MAAO,OAGX,QAFIC,EAAS,CAAA,EACTvN,EAAQ,KAAK,WACRtc,EAAI,EAAGC,EAAIqc,EAAM,OAAQtc,EAAIC,EAAGD,IACjC4pB,EAAO5pB,EAAI,CAAC,IACZ6pB,EAAOA,EAAO,MAAM,EAAI,CACpB,KAAMvN,EAAMtc,CAAC,EACb,MAAO4pB,EAAO5pB,EAAI,CAAC,CACvC,GAEQ,OAAO6pB,CACf,EACIZ,EAAU,UAAU,sBAAwB,SAAUze,EAAK,CACvD,IAAI,EAAIA,EAAI,QAAQ,0CAA2C,SAAU4B,EAAGqJ,EAAG,CAAE,OAAOA,EAAI,MAAQrJ,CAAE,CAAE,EACxG,OAAO,CACf,EACI6c,EAAU,UAAU,qBAAuB,SAAUze,EAAK8e,EAAM,CAC5D,GAAI9e,EAAI,QAAQ,KAAK,GAAK,GAAI,CAC1B,IAAIsf,EAAQ,EACRC,EAAY,GACZC,EAAc,CAAA,EAClBxf,EAAI,QAAQ,uCAAwC,SAAUK,EAAGof,EAAKC,EAAWC,EAAYC,EAAQ1vB,EAAO,CACxG,OAAIqvB,EACAA,EAAYK,GAAU,IAEjBA,EACLL,EAAY,GAEPI,GACDL,GAASE,EAAY,QACrBA,EAAY,IAAMtvB,EAAQ,EAC1BsvB,EAAY,MAAQ,IAExBF,KAEKI,IACLJ,IACII,EAAU,QAAU,IACpBF,EAAY,MAAQF,EACpBE,EAAY,MAAQtvB,IAGrBmQ,CACvB,CAAa,EACGmf,EAAY,KAAO,MAAQ,QAAQ,KAAKxf,EAAI,OAAOwf,EAAY,GAAG,CAAC,IACnExf,EAAMA,EAAI,UAAU,EAAGwf,EAAY,KAAK,EAAIxf,EAAI,OAAOwf,EAAY,GAAG,EACtF,CACQ,OAAIxf,EAAI,OAAO,CAAC,GAAK,MACjBA,EAAM,IAAMA,GACZA,EAAI,OAAOA,EAAI,OAAS,CAAC,GAAK,MAC9BA,GAAO,KACJ,IAAI,OAAOA,GAAM8e,GAAQ,IAAI,QAAQ,IAAK,EAAE,CAAC,CAC5D,EACIL,EAAU,UAAU,cAAgB,SAAUxuB,EAAM4vB,EAAY,CAC5D,GAAIA,GAAc,OAAOA,GAAc,SAAU,CAC7C,IAAIP,EAAQO,EAAW,MAAM,CAAC,EAC9BA,EAAaP,EAAM,CAAC,EAChBO,IAAe,SACfP,EAAM,MAAK,EACXO,EAAaP,EAAM,MAAK,EAExC,KAEY,KAAIA,EAAQ,CAAA,EAChB,IAAIQ,EAAmCD,GAAe,QAClDpK,EAAQ,KAAK,OAAOqK,CAAY,EAC/BrK,IACDqK,EAAe,QACfrK,EAAQ,KAAK,OAAOqK,CAAY,GAEpC,IAAIjB,EAAU,KAAK,cAAciB,CAAY,EACzCphB,EAAK,KAAK,QAAQohB,CAAY,EAClCphB,EAAG,UAAY,EAKf,QAJIpO,EAAO+uB,EAAS,CAAA,EAChBvoB,EAAY,EACZipB,EAAgB,EAChB90B,EAAQ,CAAE,KAAM,KAAM,MAAO,EAAE,EAC5BqF,EAAQoO,EAAG,KAAKzO,CAAI,GAAG,CAC1B,IAAIZ,EAAOwvB,EAAQ,aACfG,EAAO,KACPtnB,EAAQpH,EAAM,CAAC,EACfJ,EAAQwO,EAAG,UACf,GAAIxO,EAAQwH,EAAM,OAASZ,EAAW,CAClC,IAAIkpB,EAAU/vB,EAAK,UAAU6G,EAAW5G,EAAQwH,EAAM,MAAM,EACxDzM,EAAM,MAAQoE,EACdpE,EAAM,OAAS+0B,GAGX/0B,EAAM,MACNo0B,EAAO,KAAKp0B,CAAK,EACrBA,EAAQ,CAAE,KAAMoE,EAAM,MAAO2wB,CAAO,EAExD,CACY,QAASxqB,EAAI,EAAGA,EAAIlF,EAAM,OAAS,EAAGkF,IAClC,GAAIlF,EAAMkF,EAAI,CAAC,IAAM,OAErB,CAAAwpB,EAAOvJ,EAAMoJ,EAAQrpB,CAAC,CAAC,EACnBwpB,EAAK,QACL3vB,EAAO2vB,EAAK,QAAQtnB,EAAOooB,EAAcR,EAAOrvB,CAAI,EAEpDZ,EAAO2vB,EAAK,MACZA,EAAK,OACD,OAAOA,EAAK,MAAQ,SACpBc,EAAed,EAAK,KAGpBc,EAAed,EAAK,KAAKc,EAAcR,CAAK,EAEhD7J,EAAQ,KAAK,OAAOqK,CAAY,EAC3BrK,IACD,KAAK,YAAY,sBAAuBqK,CAAY,EACpDA,EAAe,QACfrK,EAAQ,KAAK,OAAOqK,CAAY,GAEpCjB,EAAU,KAAK,cAAciB,CAAY,EACzChpB,EAAY5G,EACZwO,EAAK,KAAK,QAAQohB,CAAY,EAC9BphB,EAAG,UAAYxO,GAEf8uB,EAAK,iBACLloB,EAAY5G,GAChB,MAEJ,GAAIwH,GACA,GAAI,OAAOrI,GAAS,UACX,CAAC2vB,GAAQA,EAAK,QAAU,KAAU/zB,EAAM,OAASoE,EAClDpE,EAAM,OAASyM,GAGXzM,EAAM,MACNo0B,EAAO,KAAKp0B,CAAK,EACrBA,EAAQ,CAAE,KAAMoE,EAAM,MAAOqI,CAAK,WAGjCrI,EAAM,CACPpE,EAAM,MACNo0B,EAAO,KAAKp0B,CAAK,EACrBA,EAAQ,CAAE,KAAM,KAAM,MAAO,EAAE,EAC/B,QAASuK,EAAI,EAAGA,EAAInG,EAAK,OAAQmG,IAC7B6pB,EAAO,KAAKhwB,EAAKmG,CAAC,CAAC,CAC3C,EAEY,GAAIsB,GAAa7G,EAAK,OAClB,MAEJ,GADA6G,EAAY5G,EACR6vB,IAAkBvB,EAAiB,CAOnC,IANIuB,EAAgB,EAAI9vB,EAAK,QACzB,KAAK,YAAY,sCAAuC,CACpD,WAAY4vB,EACZ,KAAM5vB,CAC9B,CAAqB,EAEE6G,EAAY7G,EAAK,QAChBhF,EAAM,MACNo0B,EAAO,KAAKp0B,CAAK,EACrBA,EAAQ,CACJ,MAAOgF,EAAK,UAAU6G,EAAWA,GAAa,GAAG,EACjD,KAAM,UAC9B,EAEgBgpB,EAAe,QACfR,EAAQ,CAAA,EACR,KAChB,CACA,CACQ,OAAIr0B,EAAM,MACNo0B,EAAO,KAAKp0B,CAAK,EACjBq0B,EAAM,OAAS,GACXA,EAAM,CAAC,IAAMQ,GACbR,EAAM,QAAQ,OAAQQ,CAAY,EAEnC,CACH,OAAQT,EACR,MAAOC,EAAM,OAASA,EAAQQ,CAC1C,CACA,EACWrB,CACX,IACAA,EAAU,UAAU,YAAcnhB,EAClCrH,EAAQ,UAAYwoB,CAEpB,CAAC,EAED,IAAI,OAAO,gCAAgC,CAAC,UAAU,UAAU,SAAS,mBAAmB,EAAG,SAAS/oB,EAASO,EAAShB,EAAO,CACjI,IAAIgD,EAAWvC,EAAQ,kBAAkB,EAAE,SACvCuqB,EACJA,EAAqB,UAAY,CAC7B,KAAK,OAAS,CACV,MAAS,CAAC,CACF,MAAO,aACP,MAAO,IACvB,EAAe,CACC,aAAc,MAC9B,CAAa,CACb,CACA,EACC,UAAY,CACT,KAAK,SAAW,SAAUvB,EAAOwB,EAAQ,CACrC,GAAI,CAACA,EAAQ,CACT,QAAS5uB,KAAOotB,EACZ,KAAK,OAAOptB,CAAG,EAAIotB,EAAMptB,CAAG,EAChC,MACZ,CACQ,QAASA,KAAOotB,EAAO,CAEnB,QADIjJ,EAAQiJ,EAAMptB,CAAG,EACZkE,EAAI,EAAGA,EAAIigB,EAAM,OAAQjgB,IAAK,CACnC,IAAIwpB,EAAOvJ,EAAMjgB,CAAC,GACdwpB,EAAK,MAAQA,EAAK,WACd,OAAOA,EAAK,MAAQ,UAChBA,EAAK,KAAK,QAAQkB,CAAM,IAAM,IAC9BlB,EAAK,KAAOkB,EAASlB,EAAK,MAE9BA,EAAK,WAAaA,EAAK,UAAU,QAAQkB,CAAM,IAAM,IACrDlB,EAAK,UAAYkB,EAASlB,EAAK,WAEvD,CACY,KAAK,OAAOkB,EAAS5uB,CAAG,EAAImkB,CACxC,CACA,EACI,KAAK,SAAW,UAAY,CACxB,OAAO,KAAK,MACpB,EACI,KAAK,WAAa,SAAU0K,EAAgBD,EAAQE,EAAaC,EAAQC,EAAQ,CAC7E,IAAIC,EAAa,OAAOJ,GAAkB,WACpC,IAAIA,EAAc,EAAG,SAAQ,EAC7BA,EACN,GAAIE,EACA,QAAS7qB,EAAI,EAAGA,EAAI6qB,EAAO,OAAQ7qB,IAC/B6qB,EAAO7qB,CAAC,EAAI0qB,EAASG,EAAO7qB,CAAC,MAEhC,CACD6qB,EAAS,CAAA,EACT,QAAS/uB,KAAOivB,EACZF,EAAO,KAAKH,EAAS5uB,CAAG,CACxC,CAEQ,GADA,KAAK,SAASivB,EAAYL,CAAM,EAC5BE,EAEA,QADII,EAAW,MAAM,UAAUF,EAAS,OAAS,SAAS,EACjD9qB,EAAI,EAAGA,EAAI6qB,EAAO,OAAQ7qB,IAC/BgrB,EAAS,MAAM,KAAK,OAAOH,EAAO7qB,CAAC,CAAC,EAAGyC,EAASmoB,CAAW,CAAC,EAE/D,KAAK,UACN,KAAK,QAAU,CAAA,GACnB,KAAK,QAAQ,KAAKF,CAAM,CAChC,EACI,KAAK,UAAY,UAAY,CACzB,OAAO,KAAK,OACpB,EACI,IAAIO,EAAY,SAAUX,EAAcR,EAAO,CAC3C,OAAIQ,GAAgB,SAAWR,EAAM,SACjCA,EAAM,QAAQ,KAAK,UAAWQ,CAAY,EACvC,KAAK,SACpB,EACQY,EAAW,SAAUZ,EAAcR,EAAO,CAC1C,OAAAA,EAAM,MAAK,EACJA,EAAM,MAAK,GAAM,OAChC,EACI,KAAK,eAAiB,UAAY,CAC9B,IAAIxyB,EAAK,EACL4xB,EAAQ,KAAK,OACjB,SAASiC,EAAarvB,EAAK,CACvB,IAAImkB,EAAQiJ,EAAMptB,CAAG,EACrBmkB,EAAM,UAAe,GACrB,QAAS,EAAI,EAAG,EAAIA,EAAM,OAAQ,IAAK,CACnC,IAAIuJ,EAAOvJ,EAAM,CAAC,EACdmL,EAAW,KACX,MAAM,QAAQ5B,CAAI,IAClB4B,EAAW5B,EACXA,EAAO,CAAA,GAEP,CAACA,EAAK,OAASA,EAAK,QACpBA,EAAK,MAAQA,EAAK,MACbA,EAAK,OACNA,EAAK,KAAO,CAAA,GAChBA,EAAK,KAAK,KAAK,CACX,aAAcA,EAAK,KAC3C,EAAuB,CACC,MAAOA,EAAK,MAAQ,OACpB,MAAOA,EAAK,KAAOA,EAAK,MACxB,KAAM,KAC9B,CAAqB,EACDA,EAAK,MAAQA,EAAK,MAAQ,SAC1BA,EAAK,KAAO,IAEhB,IAAI6B,EAAO7B,EAAK,MAAQA,EAAK,KAC7B,GAAI6B,GAAQ,MAAM,QAAQA,CAAI,EAAG,CAC7B,IAAIC,EAAY9B,EAAK,UAChB8B,IACDA,EAAY9B,EAAK,MACb,OAAO8B,GAAa,WACpBA,EAAYA,EAAU,CAAC,GAAK,IAC5BpC,EAAMoC,CAAS,IACfA,GAAah0B,MAErB4xB,EAAMoC,CAAS,EAAID,EACnB7B,EAAK,KAAO8B,EACZH,EAAaG,CAAS,CAC1C,MACyBD,GAAQ,QACb7B,EAAK,KAAO0B,GAOhB,GALI1B,EAAK,OACLA,EAAK,UAAYA,EAAK,MAAQA,EAAK,KACnCA,EAAK,KAAOyB,EACZ,OAAOzB,EAAK,MAEZA,EAAK,MACL,QAASlQ,KAAKkQ,EAAK,MACXN,EAAM5P,CAAC,EACH4P,EAAM5P,CAAC,EAAE,MACT4P,EAAM5P,CAAC,EAAE,KAAK,MAAM4P,EAAM5P,CAAC,EAAGkQ,EAAK,MAAMlQ,CAAC,CAAC,EAG/C4P,EAAM5P,CAAC,EAAIkQ,EAAK,MAAMlQ,CAAC,EAInC,IAAIiS,EAAc,OAAO/B,GAAQ,SAAWA,EAAOA,EAAK,QASxD,GARI+B,IACIA,IAAgB,UAChBA,EAAc,SACd,MAAM,QAAQA,CAAW,EACzBH,EAAWG,EAAY,IAAI,SAAUnf,EAAG,CAAE,OAAO8c,EAAM9c,CAAC,CAAE,CAAE,EAE5Dgf,EAAWlC,EAAMqC,CAAW,GAEhCH,EAAU,CACV,IAAII,EAAO,CAAC,EAAG,CAAC,EAAE,OAAOJ,CAAQ,EAC7B5B,EAAK,WACLgC,EAAOA,EAAK,OAAO,SAAUpf,EAAG,CAAE,MAAO,CAACA,EAAE,IAAK,CAAE,GACvD6T,EAAM,OAAO,MAAMA,EAAOuL,CAAI,EAC9B,GACpB,CACoBhC,EAAK,aACLA,EAAK,MAAQ,KAAK,oBAAoBA,EAAK,WAAYA,EAAK,cAAgB,OAAQA,EAAK,eAAe,EACxG,OAAOA,EAAK,aAEhC,CACA,CACQ,OAAO,KAAKN,CAAK,EAAE,QAAQiC,EAAc,IAAI,CACrD,EACI,KAAK,oBAAsB,SAAUpoB,EAAK0oB,EAAcC,EAAYC,EAAW,CAC3E,IAAIvxB,EAAW,OAAO,OAAO,IAAI,EACjC,YAAK,aAAe,CAAA,EACpB,OAAO,KAAK2I,CAAG,EAAE,QAAQ,SAAUgC,EAAW,CAG1C,QAFIhH,EAAIgF,EAAIgC,CAAS,EACjB6mB,EAAO7tB,EAAE,MAAM4tB,GAAa,GAAG,EAC1B3rB,EAAI4rB,EAAK,OAAQ5rB,KAAM,CAC5B,IAAI6rB,EAAOD,EAAK5rB,CAAC,EACjB,KAAK,aAAa,KAAK6rB,CAAI,EACvBH,IACAG,EAAOA,EAAK,YAAW,GAC3BzxB,EAASyxB,CAAI,EAAI9mB,CACjC,CACA,EAAW,IAAI,EACPhC,EAAM,KACC2oB,EACD,SAAUxpB,EAAO,CAAE,OAAO9H,EAAS8H,EAAM,YAAW,CAAE,GAAKupB,CAAa,EACxE,SAAUvpB,EAAO,CAAE,OAAO9H,EAAS8H,CAAK,GAAKupB,EAC3D,EACI,KAAK,YAAc,UAAY,CAC3B,OAAO,KAAK,SACpB,CACA,EAAG,KAAKhB,EAAmB,SAAS,EACpChqB,EAAQ,mBAAqBgqB,CAE7B,CAAC,EAED,IAAI,OAAO,qBAAqB,CAAC,UAAU,UAAU,QAAQ,EAAG,SAASvqB,EAASO,EAAShB,EAAO,CAClG,IAAIqsB,EACJA,EAAY,UAAY,CACpB,KAAK,YAAc,CAAA,CACvB,EACC,UAAY,CACT,KAAK,IAAM,SAAU7qB,EAAMgd,EAAQpe,EAAU,CACzC,OAAQ,OAAS,CACb,KAAK,KAAK,YACN,KAAK,YAAc,CAAA,EACvB,KAAK,KAAK,YAAYoB,CAAI,EACtB,KAAK,YAAYA,CAAI,EAAI,CAAA,EAEjC,KAAK,YAAYA,CAAI,EAAEgd,CAAM,EAAIpe,CACzC,EACI,KAAK,cAAgB,SAAUksB,EAAY,CACvC,QAASjwB,KAAOiwB,EACZ,QAAS9N,KAAU8N,EAAWjwB,CAAG,EAC7B,KAAK,IAAIA,EAAKmiB,EAAQ8N,EAAWjwB,CAAG,EAAEmiB,CAAM,CAAC,CAG7D,EACI,KAAK,OAAS,SAAUhd,EAAM,CACtB,KAAK,aAAe,KAAK,YAAYA,CAAI,GACzC,OAAO,KAAK,YAAYA,CAAI,CAExC,EACI,KAAK,QAAU,SAAU8b,EAAMiP,EAAQ,CACnC,GAAI,OAAOjP,GAAS,WAChB,IAAIgP,EAAa,IAAIhP,IAAO,cAAciP,CAAM,MAGhD,KAAID,EAAahP,EAAK,cAAciP,CAAM,EAE9C,KAAK,cAAcD,CAAU,CACrC,EACI,KAAK,cAAgB,SAAUC,EAAQ,CACnC,GAAKA,EAGA,CAED,QADIpH,EAAM,CAAA,EACD5kB,EAAI,EAAGA,EAAIgsB,EAAO,OAAQhsB,IAC3B,KAAK,YAAYgsB,EAAOhsB,CAAC,CAAC,IAC1B4kB,EAAIoH,EAAOhsB,CAAC,CAAC,EAAI,KAAK,YAAYgsB,EAAOhsB,CAAC,CAAC,GAGnD,OAAO4kB,CACnB,KAVY,QAAO,KAAK,WAWxB,CACA,EAAG,KAAKkH,EAAU,SAAS,EAC3BrrB,EAAQ,UAAYqrB,CAEpB,CAAC,EAED,IAAI,OAAO,qBAAqB,CAAC,UAAU,UAAU,SAAS,WAAW,EAAG,SAAS5rB,EAASO,EAAShB,EAAO,CAC9G,IAAIsL,EAAQ7K,EAAQ,SAAS,EAAE,MAC3B+rB,EAA+B,UAAY,CAC3C,SAASA,EAAcvgB,EAASwgB,EAAYC,EAAe,CACvD,KAAK,SAAWzgB,EAChB,KAAK,KAAOwgB,EACZ,KAAK,WAAaxgB,EAAQ,UAAUwgB,CAAU,EAC9C,IAAIz2B,EAAQiW,EAAQ,WAAWwgB,EAAYC,CAAa,EACxD,KAAK,YAAc12B,EAAQA,EAAM,MAAQ,EACjD,CACI,OAAAw2B,EAAc,UAAU,aAAe,UAAY,CAE/C,IADA,KAAK,aAAe,EACb,KAAK,YAAc,GAAG,CAEzB,GADA,KAAK,MAAQ,EACT,KAAK,KAAO,EACZ,YAAK,KAAO,EACL,KAEX,KAAK,WAAa,KAAK,SAAS,UAAU,KAAK,IAAI,EACnD,KAAK,YAAc,KAAK,WAAW,OAAS,CACxD,CACQ,OAAO,KAAK,WAAW,KAAK,WAAW,CAC/C,EACIA,EAAc,UAAU,YAAc,UAAY,CAC9C,KAAK,aAAe,EAEpB,QADIG,EACG,KAAK,aAAe,KAAK,WAAW,QAAQ,CAI/C,GAHA,KAAK,MAAQ,EACRA,IACDA,EAAW,KAAK,SAAS,UAAS,GAClC,KAAK,MAAQA,EACb,YAAK,KAAOA,EAAW,EAChB,KAEX,KAAK,WAAa,KAAK,SAAS,UAAU,KAAK,IAAI,EACnD,KAAK,YAAc,CAC/B,CACQ,OAAO,KAAK,WAAW,KAAK,WAAW,CAC/C,EACIH,EAAc,UAAU,gBAAkB,UAAY,CAClD,OAAO,KAAK,WAAW,KAAK,WAAW,CAC/C,EACIA,EAAc,UAAU,mBAAqB,UAAY,CACrD,OAAO,KAAK,IACpB,EACIA,EAAc,UAAU,sBAAwB,UAAY,CACxD,IAAII,EAAY,KAAK,WACjBC,EAAa,KAAK,YAClBhhB,EAAS+gB,EAAUC,CAAU,EAAE,MACnC,GAAIhhB,IAAW,OACX,OAAOA,EAEX,IADAA,EAAS,EACFghB,EAAa,GAChBA,GAAc,EACdhhB,GAAU+gB,EAAUC,CAAU,EAAE,MAAM,OAE1C,OAAOhhB,CACf,EACI2gB,EAAc,UAAU,wBAA0B,UAAY,CAC1D,MAAO,CAAE,IAAK,KAAK,KAAM,OAAQ,KAAK,uBAAuB,CACrE,EACIA,EAAc,UAAU,qBAAuB,UAAY,CACvD,IAAIx2B,EAAQ,KAAK,WAAW,KAAK,WAAW,EACxC6V,EAAS,KAAK,sBAAqB,EACvC,OAAO,IAAIP,EAAM,KAAK,KAAMO,EAAQ,KAAK,KAAMA,EAAS7V,EAAM,MAAM,MAAM,CAClF,EACWw2B,CACX,IACAxrB,EAAQ,cAAgBwrB,CAExB,CAAC,EAED,IAAI,OAAO,4BAA4B,CAAC,UAAU,UAAU,SAAS,cAAc,qBAAqB,qBAAqB,cAAc,EAAG,SAAS/rB,EAASO,EAAShB,EAAO,CAChL,IAAIoI,EAAM3H,EAAQ,eAAe,EAC7B4rB,EAAY5rB,EAAQ,cAAc,EAAE,UACpC+rB,EAAgB/rB,EAAQ,sBAAsB,EAAE,cAChD2I,EAAO3I,EAAQ,gBAAgB,EAC/BqsB,EAAwB,CAAC,OAAQ,eAAgB,SAAU,QAAS,sBAAsB,EAC1FC,EAA4B,CAAC,OAAQ,eAAgB,SAAU,QAAS,uBAAwB,SAAS,EACzGC,EACAC,EAAe,CAAA,EACfC,EAAgB,CAAE,IAAK,IAAK,IAAK,GAAG,EACpCC,EAAc,SAAU7Z,EAAQ,CAChC,IAAIzb,EAAK,GAMT,GALIyb,EAAO,cACPzb,EAAKyb,EAAO,UAAU,MAClB2Z,EAAa,YAAc3Z,EAAO,YAAY,aAC9C2Z,EAAe,CAAE,WAAY3Z,EAAO,YAAY,UAAU,IAE9D2Z,EAAap1B,CAAE,EACf,OAAOm1B,EAAUC,EAAap1B,CAAE,EACpCm1B,EAAUC,EAAap1B,CAAE,EAAI,CACzB,qBAAsB,EACtB,gBAAiB,GACjB,oBAAqB,GACrB,sBAAuB,EACvB,iBAAkB,GAClB,uBAAwB,GACxB,qBAAsB,EAC9B,CACA,EACIu1B,EAAa,SAAUnb,EAAWkM,EAAUkP,EAASC,EAAS,CAC9D,IAAIC,EAAUtb,EAAU,IAAI,IAAMA,EAAU,MAAM,IAClD,MAAO,CACH,KAAMob,EAAUlP,EAAWmP,EAC3B,UAAW,CACP,EACArb,EAAU,MAAM,OAAS,EACzBsb,EACAtb,EAAU,IAAI,QAAUsb,EAAU,EAAI,GAElD,CACA,EACIC,EACJA,EAAkB,SAAUt3B,EAAS,CACjCA,EAAUA,GAAW,CAAA,EACrB,KAAK,IAAI,SAAU,YAAa,SAAUsqB,EAAOhC,EAAQlL,EAAQrH,EAASyE,EAAM,CAC5E,IAAIqD,EAAST,EAAO,kBAAiB,EACjCtY,EAAOiR,EAAQ,IAAI,QAAQ8H,EAAO,GAAG,EACzC,GAAIrD,GAAQ,IAAK,CACbyc,EAAY7Z,CAAM,EAClB,IAAIrB,EAAYqB,EAAO,kBAAiB,EACpC6K,EAAWlS,EAAQ,IAAI,aAAagG,CAAS,EAC7Cjc,EAAQiW,EAAQ,WAAW8H,EAAO,IAAKA,EAAO,MAAM,EACxD,GAAIoK,IAAa,IAAMA,IAAa,KAAO7K,EAAO,2BAC9C,OAAO8Z,EAAWnb,EAAWkM,EAAU,IAAK,GAAG,EAE9C,GAAInoB,GAAS,0BAA0B,KAAKA,EAAM,IAAI,EAAG,CAC1D,IAAIy3B,EAAgB,CAChB,qBAAsB,iBAC1C,EACgB,OAAIA,EAAc,KAAK,SAAU7oB,EAAI,CAAE,OAAOA,EAAG,KAAK5O,EAAM,IAAI,CAAE,CAAE,GAAK,kBAAkB,KAAKA,EAAM,IAAI,GACnGA,EAAM,MAAM+d,EAAO,OAAS/d,EAAM,MAAQ,CAAC,IAAM,IACpD,QACJw3B,EAAgB,iBAAiBla,EAAQrH,EAAS,GAAG,EAC9C,CACH,KAAM,KACN,UAAW,CAAC,EAAG,CAAC,CACpC,EACA,SACqBuhB,EAAgB,gBAAgBla,EAAQrH,CAAO,EACpD,MAAI,WAAW,KAAKjR,EAAK+Y,EAAO,MAAM,CAAC,GAAKT,EAAO,mBAAqBpd,EAAQ,QAC5Es3B,EAAgB,iBAAiBla,EAAQrH,EAAS,GAAG,EAC9C,CACH,KAAM,KACN,UAAW,CAAC,EAAG,CAAC,CACxC,IAGoBuhB,EAAgB,kBAAkBla,EAAQrH,EAAS,GAAG,EAC/C,CACH,KAAM,IACN,UAAW,CAAC,EAAG,CAAC,CACxC,EAGA,SACiByE,GAAQ,IAAK,CAClByc,EAAY7Z,CAAM,EAClB,IAAIoa,EAAY1yB,EAAK,UAAU+Y,EAAO,OAAQA,EAAO,OAAS,CAAC,EAC/D,GAAI2Z,GAAa,IAAK,CAClB,IAAIC,EAAW1hB,EAAQ,oBAAoB,IAAK,CAAE,OAAQ8H,EAAO,OAAS,EAAG,IAAKA,EAAO,GAAG,CAAE,EAC9F,GAAI4Z,IAAa,MAAQH,EAAgB,sBAAsBzZ,EAAQ/Y,EAAM0V,CAAI,EAC7E,OAAA8c,EAAgB,uBAAsB,EAC/B,CACH,KAAM,GACN,UAAW,CAAC,EAAG,CAAC,CACxC,CAEA,CACA,SACiB9c,GAAQ;AAAA,GAAQA,GAAQ;AAAA,EAAQ,CACrCyc,EAAY7Z,CAAM,EAClB,IAAIga,EAAU,GACVE,EAAgB,uBAAuBzZ,EAAQ/Y,CAAI,IACnDsyB,EAAUlkB,EAAK,aAAa,IAAK4jB,EAAQ,qBAAqB,EAC9DQ,EAAgB,0BAAyB,GAE7C,IAAIE,EAAY1yB,EAAK,UAAU+Y,EAAO,OAAQA,EAAO,OAAS,CAAC,EAC/D,GAAI2Z,IAAc,IAAK,CACnB,IAAIE,EAAe3hB,EAAQ,oBAAoB,CAAE,IAAK8H,EAAO,IAAK,OAAQA,EAAO,OAAS,CAAC,EAAI,GAAG,EAClG,GAAI,CAAC6Z,EACD,OAAO,KACX,IAAIC,EAAc,KAAK,WAAW5hB,EAAQ,QAAQ2hB,EAAa,GAAG,CAAC,CACnF,SACqBN,EACL,IAAIO,EAAc,KAAK,WAAW7yB,CAAI,MAErC,CACDwyB,EAAgB,0BAAyB,EACzC,MAChB,CACY,IAAIM,EAASD,EAAc5hB,EAAQ,aAAY,EAC/C,MAAO,CACH,KAAM;AAAA,EAAO6hB,EAAS;AAAA,EAAOD,EAAcP,EAC3C,UAAW,CAAC,EAAGQ,EAAO,OAAQ,EAAGA,EAAO,MAAM,CAC9D,CACA,MAEYN,EAAgB,0BAAyB,CAErD,CAAK,EACD,KAAK,IAAI,SAAU,WAAY,SAAUhN,EAAOhC,EAAQlL,EAAQrH,EAASN,EAAO,CAC5E,IAAIwS,EAAWlS,EAAQ,IAAI,aAAaN,CAAK,EAC7C,GAAI,CAACA,EAAM,eAAiBwS,GAAY,IAAK,CACzCgP,EAAY7Z,CAAM,EAClB,IAAItY,EAAOiR,EAAQ,IAAI,QAAQN,EAAM,MAAM,GAAG,EAC1C+hB,EAAY1yB,EAAK,UAAU2Q,EAAM,IAAI,OAAQA,EAAM,IAAI,OAAS,CAAC,EACrE,GAAI+hB,GAAa,IACb,OAAA/hB,EAAM,IAAI,SACHA,EAGPqhB,EAAQ,uBAExB,CACA,CAAK,EACD,KAAK,IAAI,SAAU,YAAa,SAAUxM,EAAOhC,EAAQlL,EAAQrH,EAASyE,EAAM,CAC5E,GAAIA,GAAQ,IAAK,CACbyc,EAAY7Z,CAAM,EAClB,IAAIrB,EAAYqB,EAAO,kBAAiB,EACpC6K,EAAWlS,EAAQ,IAAI,aAAagG,CAAS,EACjD,GAAIkM,IAAa,IAAM7K,EAAO,yBAAwB,EAClD,OAAO8Z,EAAWnb,EAAWkM,EAAU,IAAK,GAAG,EAE9C,GAAIqP,EAAgB,gBAAgBla,EAAQrH,CAAO,EACpD,OAAAuhB,EAAgB,iBAAiBla,EAAQrH,EAAS,GAAG,EAC9C,CACH,KAAM,KACN,UAAW,CAAC,EAAG,CAAC,CACpC,CAEA,SACiByE,GAAQ,IAAK,CAClByc,EAAY7Z,CAAM,EAClB,IAAIS,EAAST,EAAO,kBAAiB,EACjCtY,EAAOiR,EAAQ,IAAI,QAAQ8H,EAAO,GAAG,EACrC2Z,EAAY1yB,EAAK,UAAU+Y,EAAO,OAAQA,EAAO,OAAS,CAAC,EAC/D,GAAI2Z,GAAa,IAAK,CAClB,IAAIC,EAAW1hB,EAAQ,oBAAoB,IAAK,CAAE,OAAQ8H,EAAO,OAAS,EAAG,IAAKA,EAAO,GAAG,CAAE,EAC9F,GAAI4Z,IAAa,MAAQH,EAAgB,sBAAsBzZ,EAAQ/Y,EAAM0V,CAAI,EAC7E,OAAA8c,EAAgB,uBAAsB,EAC/B,CACH,KAAM,GACN,UAAW,CAAC,EAAG,CAAC,CACxC,CAEA,CACA,CACA,CAAK,EACD,KAAK,IAAI,SAAU,WAAY,SAAUhN,EAAOhC,EAAQlL,EAAQrH,EAASN,EAAO,CAC5E,IAAIwS,EAAWlS,EAAQ,IAAI,aAAaN,CAAK,EAC7C,GAAI,CAACA,EAAM,eAAiBwS,GAAY,IAAK,CACzCgP,EAAY7Z,CAAM,EAClB,IAAItY,EAAOiR,EAAQ,IAAI,QAAQN,EAAM,MAAM,GAAG,EAC1C+hB,EAAY1yB,EAAK,UAAU2Q,EAAM,MAAM,OAAS,EAAGA,EAAM,MAAM,OAAS,CAAC,EAC7E,GAAI+hB,GAAa,IACb,OAAA/hB,EAAM,IAAI,SACHA,CAEvB,CACA,CAAK,EACD,KAAK,IAAI,WAAY,YAAa,SAAU6U,EAAOhC,EAAQlL,EAAQrH,EAASyE,EAAM,CAC9E,GAAIA,GAAQ,IAAK,CACbyc,EAAY7Z,CAAM,EAClB,IAAIrB,EAAYqB,EAAO,kBAAiB,EACpC6K,EAAWlS,EAAQ,IAAI,aAAagG,CAAS,EACjD,GAAIkM,IAAa,IAAM7K,EAAO,yBAAwB,EAClD,OAAO8Z,EAAWnb,EAAWkM,EAAU,IAAK,GAAG,EAE9C,GAAIqP,EAAgB,gBAAgBla,EAAQrH,CAAO,EACpD,OAAAuhB,EAAgB,iBAAiBla,EAAQrH,EAAS,GAAG,EAC9C,CACH,KAAM,KACN,UAAW,CAAC,EAAG,CAAC,CACpC,CAEA,SACiByE,GAAQ,IAAK,CAClByc,EAAY7Z,CAAM,EAClB,IAAIS,EAAST,EAAO,kBAAiB,EACjCtY,EAAOiR,EAAQ,IAAI,QAAQ8H,EAAO,GAAG,EACrC2Z,EAAY1yB,EAAK,UAAU+Y,EAAO,OAAQA,EAAO,OAAS,CAAC,EAC/D,GAAI2Z,GAAa,IAAK,CAClB,IAAIC,EAAW1hB,EAAQ,oBAAoB,IAAK,CAAE,OAAQ8H,EAAO,OAAS,EAAG,IAAKA,EAAO,GAAG,CAAE,EAC9F,GAAI4Z,IAAa,MAAQH,EAAgB,sBAAsBzZ,EAAQ/Y,EAAM0V,CAAI,EAC7E,OAAA8c,EAAgB,uBAAsB,EAC/B,CACH,KAAM,GACN,UAAW,CAAC,EAAG,CAAC,CACxC,CAEA,CACA,CACA,CAAK,EACD,KAAK,IAAI,WAAY,WAAY,SAAUhN,EAAOhC,EAAQlL,EAAQrH,EAASN,EAAO,CAC9E,IAAIwS,EAAWlS,EAAQ,IAAI,aAAaN,CAAK,EAC7C,GAAI,CAACA,EAAM,eAAiBwS,GAAY,IAAK,CACzCgP,EAAY7Z,CAAM,EAClB,IAAItY,EAAOiR,EAAQ,IAAI,QAAQN,EAAM,MAAM,GAAG,EAC1C+hB,EAAY1yB,EAAK,UAAU2Q,EAAM,MAAM,OAAS,EAAGA,EAAM,MAAM,OAAS,CAAC,EAC7E,GAAI+hB,GAAa,IACb,OAAA/hB,EAAM,IAAI,SACHA,CAEvB,CACA,CAAK,EACD,KAAK,IAAI,iBAAkB,YAAa,SAAU6U,EAAOhC,EAAQlL,EAAQrH,EAASyE,EAAM,CACpF,IAAIqd,EAAS9hB,EAAQ,MAAM,SAAWihB,EACtC,GAAIxc,EAAK,QAAU,GAAKqd,EAAOrd,CAAI,EAAG,CAClC,GAAI,KAAK,kBAAoB,KAAK,iBAAiB,QAAQA,CAAI,GAAK,GAChE,OACJyc,EAAY7Z,CAAM,EAClB,IAAI0a,EAAQtd,EACRuB,EAAYqB,EAAO,kBAAiB,EACpC6K,EAAWlS,EAAQ,IAAI,aAAagG,CAAS,EACjD,GAAIkM,IAAa,KAAOA,EAAS,QAAU,GAAK,CAAC4P,EAAO5P,CAAQ,IAAM7K,EAAO,yBAAwB,EACjG,OAAO8Z,EAAWnb,EAAWkM,EAAU6P,EAAOA,CAAK,EAElD,GAAI,CAAC7P,EAAU,CAChB,IAAIpK,EAAST,EAAO,kBAAiB,EACjCtY,EAAOiR,EAAQ,IAAI,QAAQ8H,EAAO,GAAG,EACrCka,EAAWjzB,EAAK,UAAU+Y,EAAO,OAAS,EAAGA,EAAO,MAAM,EAC1D2Z,EAAY1yB,EAAK,UAAU+Y,EAAO,OAAQA,EAAO,OAAS,CAAC,EAC3D/d,EAAQiW,EAAQ,WAAW8H,EAAO,IAAKA,EAAO,MAAM,EACpDma,EAAajiB,EAAQ,WAAW8H,EAAO,IAAKA,EAAO,OAAS,CAAC,EACjE,GAAIka,GAAY,MAAQj4B,GAAS,SAAS,KAAKA,EAAM,IAAI,EACrD,OAAO,KACX,IAAIm4B,EAAen4B,GAAS,gBAAgB,KAAKA,EAAM,IAAI,EACvDo4B,EAAc,CAACF,GAAc,gBAAgB,KAAKA,EAAW,IAAI,EACjEG,EACJ,GAAIX,GAAaM,EACbK,EAAOF,IAAiBC,EACpBC,GAAQ,cAAc,KAAKH,EAAW,IAAI,IAC1CG,EAAO,QAEV,CAGD,GAFIF,GAAgB,CAACC,GAEjBD,GAAgBC,EAChB,OAAO,KACX,IAAIE,EAASriB,EAAQ,MAAM,QAC3BqiB,EAAO,UAAY,EACnB,IAAIC,EAAeD,EAAO,KAAKL,CAAQ,EACvCK,EAAO,UAAY,EACnB,IAAIE,EAAcF,EAAO,KAAKZ,CAAS,EACnCe,EAAkBxiB,EAAQ,MAAM,iBAChCyiB,EAAmBD,GAAmBA,EAAgBT,CAAK,GAAKS,EAAgBT,CAAK,EAAE,KAAKC,CAAQ,EAGxG,GAFK,CAACS,GAAoBH,GAAiBC,GAEvCd,GAAa,CAAC,gBAAgB,KAAKA,CAAS,EAC5C,OAAO,KACX,IAAIiB,EAAa3zB,EAAK+Y,EAAO,OAAS,CAAC,EACvC,GAAIka,GAAYD,IAAUW,GAAcX,GAASM,EAAO,KAAKK,CAAU,GACnE,OAAO,KACXN,EAAO,EAC3B,CACgB,MAAO,CACH,KAAMA,EAAOL,EAAQA,EAAQ,GAC7B,UAAW,CAAC,EAAG,CAAC,CACpC,CACA,CACA,CACA,CAAK,EACD,KAAK,IAAI,iBAAkB,WAAY,SAAUxN,EAAOhC,EAAQlL,EAAQrH,EAASN,EAAO,CACpF,IAAIoiB,EAAS9hB,EAAQ,MAAM,SAAWihB,EAClC/O,EAAWlS,EAAQ,IAAI,aAAaN,CAAK,EAC7C,GAAI,CAACA,EAAM,YAAW,GAAMoiB,EAAO,eAAe5P,CAAQ,EAAG,CACzDgP,EAAY7Z,CAAM,EAClB,IAAItY,EAAOiR,EAAQ,IAAI,QAAQN,EAAM,MAAM,GAAG,EAC1C+hB,EAAY1yB,EAAK,UAAU2Q,EAAM,MAAM,OAAS,EAAGA,EAAM,MAAM,OAAS,CAAC,EAC7E,GAAI+hB,GAAavP,EACb,OAAAxS,EAAM,IAAI,SACHA,CAEvB,CACA,CAAK,EACGzV,EAAQ,kBAAoB,IAC5B,KAAK,IAAI,kBAAmB,YAAa,SAAUsqB,EAAOhC,EAAQlL,EAAQrH,EAASyE,EAAM,CACrF,GAAI8P,IAAU,cAAgB9P,IAAS;AAAA,GAAQA,IAAS;AAAA,IAAW4C,EAAO,UAAU,UAAW,CAC3F,IAAIS,EAAST,EAAO,kBAAiB,EACrC,GAAIS,EAAO,SAAW,EAClB,OAMJ,QAJI/Y,EAAOiR,EAAQ,IAAI,QAAQ8H,EAAO,GAAG,EACrC5B,EAAWlG,EAAQ,IAAI,QAAQ8H,EAAO,IAAM,CAAC,EAC7CqW,EAASne,EAAQ,UAAU8H,EAAO,GAAG,EACrC9Y,EAAQ,EACHsF,EAAI,EAAGA,EAAI6pB,EAAO,OAAQ7pB,IAAK,CACpCtF,GAASmvB,EAAO7pB,CAAC,EAAE,MAAM,OACzB,IAAIquB,EAAexE,EAAO7pB,CAAC,EAC3B,GAAItF,GAAS8Y,EAAO,OAAQ,CACxB,GAAI9Y,IAAU8Y,EAAO,OAAQ,CACzB,GAAI,CAAC,QAAQ,KAAK6a,EAAa,IAAI,EAC/B,OAEJ,GAAI,OAAO,KAAKA,EAAa,KAAK,EAAG,CACjC,IAAIC,EAAYzE,EAAO7pB,EAAI,CAAC,EAC5B,GAAI,CAACsuB,GAAa,CAAC,QAAQ,KAAKA,EAAU,IAAI,EAC1C,MAEpC,CACA,CACwB,IAAIC,EAAmB/a,EAAO,QAAU9Y,EAAQ2zB,EAAa,MAAM,QAC/DG,EAAcH,EAAa,MAAM,QAAQ,IAAI,EAC7CI,EAAaJ,EAAa,MAAM,QAAQ,MAAOG,EAAc,GAAKA,EAAc,EAAI,CAAC,EAIzF,GAHIC,IAAe,IAAMF,EAAmBE,GAAcF,EAAmBE,EAAa,GAGtFD,IAAgB,IAAMC,IAAe,IAAMF,GAAoBC,GAC5DD,GAAoBE,GAAc,CAAC,QAAQ,KAAKJ,EAAa,IAAI,EACpE,OAEJ,KACxB,CACA,CACgB,IAAId,EAAS,KAAK,WAAW9yB,CAAI,EACjC,GAAI,QAAQ,KAAKmX,CAAQ,EACrB,MAAI,SAAS,KAAKnX,CAAI,EACX,CACH,KAAM0V,EAAOod,EAAS,KACtB,UAAW,CAAC,EAAG,EAAIA,EAAO,OAAQ,EAAG,EAAIA,EAAO,MAAM,CAClF,EAG+B,CACH,KAAMpd,EAAOod,EAAS,MACtB,UAAW,CAAC,EAAG,EAAIA,EAAO,OAAQ,EAAG,EAAIA,EAAO,MAAM,CAClF,EAGgB,GAAI,SAAS,KAAK9yB,EAAK,UAAU,EAAG+Y,EAAO,MAAM,CAAC,EAC9C,MAAO,CACH,KAAMrD,EAAOod,EAAS,MAAQpd,EAAO,IAAMod,EAAS,KACpD,UAAW,CAAC,EAAG,EAAIA,EAAO,OAAQ,EAAG,EAAIA,EAAO,MAAM,CAC9E,CAEA,CACA,CAAS,CAET,EACAN,EAAgB,gBAAkB,SAAUla,EAAQrH,EAAS,CACzD,IAAI8H,EAAST,EAAO,kBAAiB,EACjC2b,EAAW,IAAIzC,EAAcvgB,EAAS8H,EAAO,IAAKA,EAAO,MAAM,EACnE,GAAI,CAAC,KAAK,gBAAgBkb,EAAS,mBAAqB,OAAQnC,CAAqB,EAAG,CACpF,GAAI,SAAS,KAAKxZ,EAAO,QAAQ,QAAQS,EAAO,GAAG,EAAEA,EAAO,MAAM,CAAC,EAC/D,MAAO,GACX,IAAImb,EAAY,IAAI1C,EAAcvgB,EAAS8H,EAAO,IAAKA,EAAO,OAAS,CAAC,EACxE,GAAI,CAAC,KAAK,gBAAgBmb,EAAU,gBAAe,GAAM,OAAQpC,CAAqB,EAClF,MAAO,EACnB,CACI,OAAAmC,EAAS,YAAW,EACbA,EAAS,uBAAyBlb,EAAO,KAC5C,KAAK,gBAAgBkb,EAAS,gBAAe,GAAM,OAAQlC,CAAyB,CAC5F,EACAS,EAAgB,gBAAqB,SAAUx3B,EAAO6mB,EAAO,CACzD,OAAOA,EAAM,QAAQ7mB,EAAM,MAAQA,CAAK,EAAI,EAChD,EACAw3B,EAAgB,iBAAsB,SAAUla,EAAQrH,EAASkjB,EAAS,CACtE,IAAIpb,EAAST,EAAO,kBAAiB,EACjCtY,EAAOiR,EAAQ,IAAI,QAAQ8H,EAAO,GAAG,EACpC,KAAK,sBAAyBA,EAAQ/Y,EAAMgyB,EAAQ,oBAAoB,CAAC,CAAC,IAC3EA,EAAQ,qBAAuB,GACnCA,EAAQ,gBAAkBjZ,EAAO,IACjCiZ,EAAQ,oBAAsBmC,EAAUn0B,EAAK,OAAO+Y,EAAO,MAAM,EACjEiZ,EAAQ,sBACZ,EACAQ,EAAgB,kBAAuB,SAAUla,EAAQrH,EAASkjB,EAAS,CACvE,IAAIpb,EAAST,EAAO,kBAAiB,EACjCtY,EAAOiR,EAAQ,IAAI,QAAQ8H,EAAO,GAAG,EACpC,KAAK,uBAA0BA,EAAQ/Y,CAAI,IAC5CgyB,EAAQ,sBAAwB,GACpCA,EAAQ,iBAAmBjZ,EAAO,IAClCiZ,EAAQ,uBAAyBhyB,EAAK,OAAO,EAAG+Y,EAAO,MAAM,EAAIob,EACjEnC,EAAQ,qBAAuBhyB,EAAK,OAAO+Y,EAAO,MAAM,EACxDiZ,EAAQ,uBACZ,EACAQ,EAAgB,sBAA2B,SAAUzZ,EAAQ/Y,EAAMm0B,EAAS,CACxE,OAAOnC,EAAQ,qBAAuB,GAClCjZ,EAAO,MAAQiZ,EAAQ,iBACvBmC,IAAYnC,EAAQ,oBAAoB,CAAC,GACzChyB,EAAK,OAAO+Y,EAAO,MAAM,IAAMiZ,EAAQ,mBAC/C,EACAQ,EAAgB,uBAA4B,SAAUzZ,EAAQ/Y,EAAM,CAChE,OAAOgyB,EAAQ,sBAAwB,GACnCjZ,EAAO,MAAQiZ,EAAQ,kBACvBhyB,EAAK,OAAO+Y,EAAO,MAAM,IAAMiZ,EAAQ,sBACvChyB,EAAK,OAAO,EAAG+Y,EAAO,MAAM,GAAKiZ,EAAQ,sBACjD,EACAQ,EAAgB,uBAA4B,UAAY,CACpDR,EAAQ,oBAAsBA,EAAQ,oBAAoB,OAAO,CAAC,EAClEA,EAAQ,sBACZ,EACAQ,EAAgB,0BAA+B,UAAY,CACnDR,IACAA,EAAQ,sBAAwB,EAChCA,EAAQ,iBAAmB,GAEnC,EACA5kB,EAAI,SAASolB,EAAiBnB,CAAS,EACvCrrB,EAAQ,gBAAkBwsB,CAE1B,CAAC,EAED,IAAI,OAAO,cAAc,CAAC,UAAU,UAAU,QAAQ,EAAG,SAAS/sB,EAASO,EAAShB,EAAO,CAI3F,QAHIovB,EAAY,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,IAAK,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,IAAK,GAAI,IAAK,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,KAAM,GAAI,EAAG,GAAI,EAAG,IAAK,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,KAAM,GAAI,MAAO,GAAI,KAAM,GAAI,GAAI,EAAG,IAAK,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,MAAO,GAAI,GAAI,EAAG,GAAI,KAAM,IAAK,EAAG,GAAI,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,IAAK,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,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AAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;A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A;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA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A;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wDAE5BC,GAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAExBC,GAA6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAE7BC,GAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAEnBC,GAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAEjBC,GAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAEZC,GAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAEtB,MAAMC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEXC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEbC,GAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;A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","x_google_ignoreList":[13,16,17,18,23]}